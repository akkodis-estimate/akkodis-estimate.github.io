"use strict";(self.webpackChunkangular_clean_architecture_serverless=self.webpackChunkangular_clean_architecture_serverless||[]).push([[179],{2011:(mt,Ae,U)=>{U.d(Ae,{Dh:()=>ye,GT:()=>ie,cc:()=>ke,hO:()=>Ke,on:()=>q,pX:()=>oe,xv:()=>_e});var s=U(4650),te=U(127),L=U(5813);mt=U.hmd(mt);const le=["ngOnDestroy"],oe=(Oe,Re,$e,xe={})=>new Proxy(Oe,{get:(Se,Me)=>$e.runOutsideAngular(()=>{var qe;if(Oe[Me])return!(null===(qe=xe?.spy)||void 0===qe)&&qe.get&&xe.spy.get(Me,Oe[Me]),Oe[Me];if(le.indexOf(Me)>-1)return()=>{};const Ve=Re.toPromise().then(G=>{const Ee=G&&G[Me];return"function"==typeof Ee?Ee.bind(G):Ee&&Ee.then?Ee.then(We=>$e.run(()=>We)):$e.run(()=>Ee)});return new Proxy(()=>{},{get:(G,Ee)=>Ve[Ee],apply:(G,Ee,We)=>Ve.then(tt=>{var _t;const nt=tt&&tt(...We);return!(null===(_t=xe?.spy)||void 0===_t)&&_t.apply&&xe.spy.apply(Me,We,nt),nt})})})}),ie=(Oe,Re)=>{Re.forEach($e=>{Object.getOwnPropertyNames($e.prototype||$e).forEach(xe=>{Object.defineProperty(Oe.prototype,xe,Object.getOwnPropertyDescriptor($e.prototype||$e,xe))})})};class Ce{constructor(Re){return Re}}const ye=new s.OlP("angularfire2.app.options"),_e=new s.OlP("angularfire2.app.name");function q(Oe,Re,$e){const Se="object"==typeof $e&&$e||{};Se.name=Se.name||"string"==typeof $e&&$e||"[DEFAULT]";const qe=te.Z.apps.filter(Ve=>Ve&&Ve.name===Se.name)[0]||Re.runOutsideAngular(()=>te.Z.initializeApp(Oe,Se));try{JSON.stringify(Oe)!==JSON.stringify(qe.options)&&Z("error",`${qe.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ce(qe)}const Z=(Oe,...Re)=>{(0,s.X6Q)()&&typeof console<"u"&&console[Oe](...Re)},ee={provide:Ce,useFactory:q,deps:[ye,s.R0b,[new s.FiY,_e]]};let Ke=(()=>{class Oe{constructor($e){te.Z.registerVersion("angularfire",L.q4.full,"core"),te.Z.registerVersion("angularfire",L.q4.full,"app-compat"),te.Z.registerVersion("angular",s.q4F.full,$e.toString())}static initializeApp($e,xe){return{ngModule:Oe,providers:[{provide:ye,useValue:$e},{provide:_e,useValue:xe}]}}}return Oe.\u0275fac=function($e){return new($e||Oe)(s.LFG(s.Lbi))},Oe.\u0275mod=s.oAB({type:Oe}),Oe.\u0275inj=s.cJS({providers:[ee]}),Oe})();function ke(Oe,Re,$e,xe,Se){const[,Me,qe]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===Oe)||[];if(Me)return function Je(Oe,Re){try{return Oe.toString()===Re.toString()}catch{return Oe===Re}}(Se,qe)||(be("error",`${Re} was already initialized on the ${$e} Firebase App with different settings.${ut?" You may need to reload as Firebase is not HMR aware.":""}`),be("warn",{is:Se,was:qe})),Me;{const Ve=xe();return globalThis.\u0275AngularfireInstanceCache.push([Oe,Ve,Se]),Ve}}const ut=!!mt.hot,be=(Oe,...Re)=>{(0,s.X6Q)()&&typeof console<"u"&&console[Oe](...Re)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(mt,Ae,U)=>{U.d(Ae,{q4:()=>tu,iC:()=>Zl,fc:()=>Zp,HU:()=>vr,vb:()=>Bt,JM:()=>vi});var s=U(4650),te=U(5867),L=U(5861),le=U(9681),oe=U(2090),ie=U(4859),Ce=U(1877),ye=U(8766);const _e="@firebase/installations",q="0.5.12",Z=1e4,ee=`w:${q}`,Ke="FIS_v2",ke="https://firebaseinstallations.googleapis.com/v1",Je=36e5,Re=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $e(I){return I instanceof oe.ZR&&I.code.includes("request-failed")}function xe({projectId:I}){return`${ke}/projects/${I}/installations`}function Se(I){return{token:I.token,requestStatus:2,expiresIn:tt(I.expiresIn),creationTime:Date.now()}}function Me(I,S){return qe.apply(this,arguments)}function qe(){return(qe=(0,L.Z)(function*(I,S){const j=(yield S.json()).error;return Re.create("request-failed",{requestName:I,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function Ve({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Ee(I){return We.apply(this,arguments)}function We(){return(We=(0,L.Z)(function*(I){const S=yield I();return S.status>=500&&S.status<600?I():S})).apply(this,arguments)}function tt(I){return Number(I.replace("s","000"))}function xn(){return(xn=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:S},{fid:R}){const j=xe(I),X=Ve(I),ce=S.getImmediate({optional:!0});if(ce){const It=yield ce.getHeartbeatsHeader();It&&X.append("x-firebase-client",It)}const et={method:"POST",headers:X,body:JSON.stringify({fid:R,authVersion:Ke,appId:I.appId,sdkVersion:ee})},bt=yield Ee(()=>fetch(j,et));if(bt.ok){const It=yield bt.json();return{fid:It.fid||R,registrationStatus:2,refreshToken:It.refreshToken,authToken:Se(It.authToken)}}throw yield Me("Create Installation",bt)})).apply(this,arguments)}function xr(I){return new Promise(S=>{setTimeout(S,I)})}const as=/^[cdef][\w-]{21}$/,ae="";function pe(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function fe(I){return function rr(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return as.test(R)?R:ae}catch{return ae}}function se(I){return`${I.appName}!${I.appId}`}const Ge=new Map;function He(I,S){const R=se(I);Kt(R,S),function Dt(I,S){const R=function ln(){return!Yt&&"BroadcastChannel"in self&&(Yt=new BroadcastChannel("[Firebase] FID Change"),Yt.onmessage=I=>{Kt(I.data.key,I.data.fid)}),Yt}();R&&R.postMessage({key:I,fid:S}),function nn(){0===Ge.size&&Yt&&(Yt.close(),Yt=null)}()}(R,S)}function Kt(I,S){const R=Ge.get(I);if(R)for(const j of R)j(S)}let Yt=null;const pr="firebase-installations-database",kr=1,Pn="firebase-installations-store";let Gn=null;function Si(){return Gn||(Gn=(0,ye.X3)(pr,kr,{upgrade:(I,S)=>{0===S&&I.createObjectStore(Pn)}})),Gn}function Fn(I,S){return yt.apply(this,arguments)}function yt(){return(yt=(0,L.Z)(function*(I,S){const R=se(I),X=(yield Si()).transaction(Pn,"readwrite"),ce=X.objectStore(Pn),ve=yield ce.get(R);return yield ce.put(S,R),yield X.done,(!ve||ve.fid!==S.fid)&&He(I,S.fid),S})).apply(this,arguments)}function ls(I){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,L.Z)(function*(I){const S=se(I),j=(yield Si()).transaction(Pn,"readwrite");yield j.objectStore(Pn).delete(S),yield j.done})).apply(this,arguments)}function Bn(I,S){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,L.Z)(function*(I,S){const R=se(I),X=(yield Si()).transaction(Pn,"readwrite"),ce=X.objectStore(Pn),ve=yield ce.get(R),et=S(ve);return void 0===et?yield ce.delete(R):yield ce.put(et,R),yield X.done,et&&(!ve||ve.fid!==et.fid)&&He(I,et.fid),et})).apply(this,arguments)}function $i(I){return yn.apply(this,arguments)}function yn(){return yn=(0,L.Z)(function*(I){let S;const R=yield Bn(I.appConfig,j=>{const X=function Tn(I){return $r(I||{fid:pe(),registrationStatus:0})}(j),ce=function Tt(I,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Re.create("app-offline"))};const R={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},j=function xt(I,S){return cs.apply(this,arguments)}(I,R);return{installationEntry:R,registrationPromise:j}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Kn(I)}:{installationEntry:S}}(I,X);return S=ce.registrationPromise,ce.installationEntry});return R.fid===ae?{installationEntry:yield S}:{installationEntry:R,registrationPromise:S}}),yn.apply(this,arguments)}function cs(){return cs=(0,L.Z)(function*(I,S){try{const R=yield function nt(I,S){return xn.apply(this,arguments)}(I,S);return Fn(I.appConfig,R)}catch(R){throw $e(R)&&409===R.customData.serverCode?yield ls(I.appConfig):yield Fn(I.appConfig,{fid:S.fid,registrationStatus:0}),R}}),cs.apply(this,arguments)}function Kn(I){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,L.Z)(function*(I){let S=yield Vs(I.appConfig);for(;1===S.registrationStatus;)yield xr(100),S=yield Vs(I.appConfig);if(0===S.registrationStatus){const{installationEntry:R,registrationPromise:j}=yield $i(I);return j||R}return S})).apply(this,arguments)}function Vs(I){return Bn(I,S=>{if(!S)throw Re.create("installation-not-found");return $r(S)})}function $r(I){return function Ra(I){return 1===I.registrationStatus&&I.registrationTime+Z<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Ii(){return(Ii=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:S},R){const j=function Xt(I,{fid:S}){return`${xe(I)}/${S}/authTokens:generate`}(I,R),X=function G(I,{refreshToken:S}){const R=Ve(I);return R.append("Authorization",function _t(I){return`${Ke} ${I}`}(S)),R}(I,R),ce=S.getImmediate({optional:!0});if(ce){const It=yield ce.getHeartbeatsHeader();It&&X.append("x-firebase-client",It)}const et={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:ee,appId:I.appId}})},bt=yield Ee(()=>fetch(j,et));if(bt.ok)return Se(yield bt.json());throw yield Me("Generate Auth Token",bt)})).apply(this,arguments)}function Q(I){return $.apply(this,arguments)}function $(){return $=(0,L.Z)(function*(I,S=!1){let R;const j=yield Bn(I.appConfig,ce=>{if(!vt(ce))throw Re.create("not-registered");const ve=ce.authToken;if(!S&&function En(I){return 2===I.requestStatus&&!function fn(I){const S=Date.now();return S<I.creationTime||I.creationTime+I.expiresIn<S+Je}(I)}(ve))return ce;if(1===ve.requestStatus)return R=function H(I,S){return z.apply(this,arguments)}(I,S),ce;{if(!navigator.onLine)throw Re.create("app-offline");const et=function Dn(I){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:S})}(ce);return R=function Ne(I,S){return Ye.apply(this,arguments)}(I,et),et}});return R?yield R:j.authToken}),$.apply(this,arguments)}function z(){return(z=(0,L.Z)(function*(I,S){let R=yield K(I.appConfig);for(;1===R.authToken.requestStatus;)yield xr(100),R=yield K(I.appConfig);const j=R.authToken;return 0===j.requestStatus?Q(I,S):j})).apply(this,arguments)}function K(I){return Bn(I,S=>{if(!vt(S))throw Re.create("not-registered");return function Ut(I){return 1===I.requestStatus&&I.requestTime+Z<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Ye(){return Ye=(0,L.Z)(function*(I,S){try{const R=yield function hn(I,S){return Ii.apply(this,arguments)}(I,S),j=Object.assign(Object.assign({},S),{authToken:R});return yield Fn(I.appConfig,j),R}catch(R){if(!$e(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const j=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Fn(I.appConfig,j)}else yield ls(I.appConfig);throw R}}),Ye.apply(this,arguments)}function vt(I){return void 0!==I&&2===I.registrationStatus}function Rr(){return(Rr=(0,L.Z)(function*(I){const S=I,{installationEntry:R,registrationPromise:j}=yield $i(S);return j?j.catch(console.error):Q(S).catch(console.error),R.fid})).apply(this,arguments)}function yo(){return yo=(0,L.Z)(function*(I,S=!1){const R=I;return yield function Ac(I){return Cs.apply(this,arguments)}(R),(yield Q(R,S)).token}),yo.apply(this,arguments)}function Cs(){return(Cs=(0,L.Z)(function*(I){const{registrationPromise:S}=yield $i(I);S&&(yield S)})).apply(this,arguments)}function Pa(I){return Re.create("missing-app-config-values",{valueName:I})}const Ch="installations",qn=I=>{const S=I.getProvider("app").getImmediate(),R=function zu(I){if(!I||!I.options)throw Pa("App Configuration");if(!I.name)throw Pa("App Name");const S=["projectId","apiKey","appId"];for(const R of S)if(!I.options[R])throw Pa(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(S);return{app:S,appConfig:R,heartbeatServiceProvider:(0,le._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Wu=I=>{const S=I.getProvider("app").getImmediate(),R=(0,le._getProvider)(S,Ch).getImmediate();return{getId:()=>function Yn(I){return Rr.apply(this,arguments)}(R),getToken:X=>function en(I){return yo.apply(this,arguments)}(R,X)}};(function dn(){(0,le._registerComponent)(new ie.wA(Ch,qn,"PUBLIC")),(0,le._registerComponent)(new ie.wA("installations-internal",Wu,"PRIVATE"))})(),(0,le.registerVersion)(_e,q),(0,le.registerVersion)(_e,q,"esm2017");const ir="@firebase/remote-config",ti=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zo{constructor(S,R,j,X){this.client=S,this.storage=R,this.storageCache=j,this.logger=X}isCachedDataFresh(S,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-R,X=j<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${X}.`),X}fetch(S){var R=this;return(0,L.Z)(function*(){const[j,X]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(X&&R.isCachedDataFresh(S.cacheMaxAgeMillis,j))return X;S.eTag=X&&X.eTag;const ce=yield R.client.fetch(S),ve=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ce.status&&ve.push(R.storage.setLastSuccessfulFetchResponse(ce)),yield Promise.all(ve),ce})()}}function Zi(I=navigator){return I.languages&&I.languages[0]||I.language}class $s{constructor(S,R,j,X,ce,ve){this.firebaseInstallations=S,this.sdkVersion=R,this.namespace=j,this.projectId=X,this.apiKey=ce,this.appId=ve}fetch(S){var R=this;return(0,L.Z)(function*(){var j,X,ce;const[ve,et]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),It=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ft={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},wt={sdk_version:R.sdkVersion,app_instance_id:ve,app_instance_id_token:et,app_id:R.appId,language_code:Zi()},Mr={method:"POST",headers:Ft,body:JSON.stringify(wt)},br=fetch(It,Mr),si=new Promise((Qs,In)=>{S.signal.addEventListener(()=>{const zl=new Error("The operation was aborted.");zl.name="AbortError",In(zl)})});let il;try{yield Promise.race([br,si]),il=yield br}catch(Qs){let In="fetch-client-network";throw"AbortError"===(null===(j=Qs)||void 0===j?void 0:j.name)&&(In="fetch-timeout"),ti.create(In,{originalErrorMessage:null===(X=Qs)||void 0===X?void 0:X.message})}let aa=il.status;const xs=il.headers.get("ETag")||void 0;let So,lr;if(200===il.status){let Qs;try{Qs=yield il.json()}catch(In){throw ti.create("fetch-client-parse",{originalErrorMessage:null===(ce=In)||void 0===ce?void 0:ce.message})}So=Qs.entries,lr=Qs.state}if("INSTANCE_STATE_UNSPECIFIED"===lr?aa=500:"NO_CHANGE"===lr?aa=304:("NO_TEMPLATE"===lr||"EMPTY_CONFIG"===lr)&&(So={}),304!==aa&&200!==aa)throw ti.create("fetch-status",{httpStatus:aa});return{status:aa,eTag:xs,config:So}})()}}class Es{constructor(S,R){this.client=S,this.storage=R}fetch(S){var R=this;return(0,L.Z)(function*(){const j=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(S,j)})()}attemptFetch(S,{throttleEndTimeMillis:R,backoffCount:j}){var X=this;return(0,L.Z)(function*(){yield function mi(I,S){return new Promise((R,j)=>{const X=Math.max(S-Date.now(),0),ce=setTimeout(R,X);I.addEventListener(()=>{clearTimeout(ce),j(ti.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,R);try{const ce=yield X.client.fetch(S);return yield X.storage.deleteThrottleMetadata(),ce}catch(ce){if(!function vn(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ce))throw ce;const ve={throttleEndTimeMillis:Date.now()+(0,oe.$s)(j),backoffCount:j+1};return yield X.storage.setThrottleMetadata(ve),X.attemptFetch(S,ve)}})()}}class Ua{constructor(S,R,j,X,ce){this.app=S,this._client=R,this._storageCache=j,this._storage=X,this._logger=ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Wo(I,S){var R;const j=I.target.error||void 0;return ti.create(S,{originalErrorMessage:j&&(null===(R=j)||void 0===R?void 0:R.message)})}const ri="app_namespace_store";class zi{constructor(S,R,j,X=function Ai(){return new Promise((I,S)=>{var R;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=X=>{S(Wo(X,"storage-open"))},j.onsuccess=X=>{I(X.target.result)},j.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(ri,{keyPath:"compositeKey"})}}catch(j){S(ti.create("storage-open",{originalErrorMessage:null===(R=j)||void 0===R?void 0:R.message}))}})}()){this.appId=S,this.appName=R,this.namespace=j,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var R=this;return(0,L.Z)(function*(){const j=yield R.openDbPromise;return new Promise((X,ce)=>{var ve;const bt=j.transaction([ri],"readonly").objectStore(ri),It=R.createCompositeKey(S);try{const Ft=bt.get(It);Ft.onerror=wt=>{ce(Wo(wt,"storage-get"))},Ft.onsuccess=wt=>{const Mr=wt.target.result;X(Mr?Mr.value:void 0)}}catch(Ft){ce(ti.create("storage-get",{originalErrorMessage:null===(ve=Ft)||void 0===ve?void 0:ve.message}))}})})()}set(S,R){var j=this;return(0,L.Z)(function*(){const X=yield j.openDbPromise;return new Promise((ce,ve)=>{var et;const It=X.transaction([ri],"readwrite").objectStore(ri),Ft=j.createCompositeKey(S);try{const wt=It.put({compositeKey:Ft,value:R});wt.onerror=Mr=>{ve(Wo(Mr,"storage-set"))},wt.onsuccess=()=>{ce()}}catch(wt){ve(ti.create("storage-set",{originalErrorMessage:null===(et=wt)||void 0===et?void 0:et.message}))}})})()}delete(S){var R=this;return(0,L.Z)(function*(){const j=yield R.openDbPromise;return new Promise((X,ce)=>{var ve;const bt=j.transaction([ri],"readwrite").objectStore(ri),It=R.createCompositeKey(S);try{const Ft=bt.delete(It);Ft.onerror=wt=>{ce(Wo(wt,"storage-delete"))},Ft.onsuccess=()=>{X()}}catch(Ft){ce(ti.create("storage-delete",{originalErrorMessage:null===(ve=Ft)||void 0===ve?void 0:ve.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Cl{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,L.Z)(function*(){const R=S.storage.getLastFetchStatus(),j=S.storage.getLastSuccessfulFetchTimestampMillis(),X=S.storage.getActiveConfig(),ce=yield R;ce&&(S.lastFetchStatus=ce);const ve=yield j;ve&&(S.lastSuccessfulFetchTimestampMillis=ve);const et=yield X;et&&(S.activeConfig=et)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Tl(){return kp.apply(this,arguments)}function kp(){return(kp=(0,L.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function ds(){(0,le._registerComponent)(new ie.wA("remote-config",function I(S,{instanceIdentifier:R}){const j=S.getProvider("app").getImmediate(),X=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ti.create("registration-window");if(!(0,oe.hl)())throw ti.create("indexed-db-unavailable");const{projectId:ce,apiKey:ve,appId:et}=j.options;if(!ce)throw ti.create("registration-project-id");if(!ve)throw ti.create("registration-api-key");if(!et)throw ti.create("registration-app-id");const bt=new zi(et,j.name,R=R||"firebase"),It=new Cl(bt),Ft=new Ce.Yd(ir);Ft.logLevel=Ce.in.ERROR;const wt=new $s(X,le.SDK_VERSION,R,ce,ve,et),Mr=new Es(wt,bt),br=new zo(Mr,bt,It,Ft),si=new Ua(j,br,It,bt,Ft);return function Vn(I){const S=(0,oe.m9)(I);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(si),si},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(ir,"0.3.11"),(0,le.registerVersion)(ir,"0.3.11","esm2017")}();const Qu="/firebase-messaging-sw.js",Gs="/firebase-cloud-messaging-push-scope",Ba="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",El="https://fcmregistrations.googleapis.com/v1",Xu="google.c.a.c_id",Rp="google.c.a.c_l",Op="google.c.a.ts",o_="google.c.a.e";var Ko=(()=>{return(I=Ko||(Ko={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Ko;var I})();function Ds(I){const S=new Uint8Array(I);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function a_(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(R),X=new Uint8Array(j.length);for(let ce=0;ce<j.length;++ce)X[ce]=j.charCodeAt(ce);return X}const Zr="fcm_token_details_db",ed=5,_i="fcm_token_object_Store";function Sh(){return Sh=(0,L.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ce=>ce.name).includes(Zr))return null;let S=null;return(yield(0,ye.X3)(Zr,ed,{upgrade:(j=(0,L.Z)(function*(X,ce,ve,et){var bt;if(ce<2||!X.objectStoreNames.contains(_i))return;const It=et.objectStore(_i),Ft=yield It.index("fcmSenderId").get(I);if(yield It.clear(),Ft)if(2===ce){const wt=Ft;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;S={token:wt.fcmToken,createTime:null!==(bt=wt.createTime)&&void 0!==bt?bt:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:Ds(wt.vapidKey)}}}else if(3===ce){const wt=Ft;S={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Ds(wt.auth),p256dh:Ds(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Ds(wt.vapidKey)}}}else if(4===ce){const wt=Ft;S={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Ds(wt.auth),p256dh:Ds(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Ds(wt.vapidKey)}}}}),function(ce,ve,et,bt){return j.apply(this,arguments)})})).close(),yield(0,ye.Lj)(Zr),yield(0,ye.Lj)("fcm_vapid_details_db"),yield(0,ye.Lj)("undefined"),function bo(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:S}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}(S)?S:null;var j}),Sh.apply(this,arguments)}const Nc="firebase-messaging-database",Yo=1,Jo="firebase-messaging-store";let xc=null;function ja(){return xc||(xc=(0,ye.X3)(Nc,Yo,{upgrade:(I,S)=>{0===S&&I.createObjectStore(Jo)}})),xc}function kc(I){return Ha.apply(this,arguments)}function Ha(){return Ha=(0,L.Z)(function*(I){const S=Ga(I),j=yield(yield ja()).transaction(Jo).objectStore(Jo).get(S);if(j)return j;{const X=yield function td(I){return Sh.apply(this,arguments)}(I.appConfig.senderId);if(X)return yield Qo(I,X),X}}),Ha.apply(this,arguments)}function Qo(I,S){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,L.Z)(function*(I,S){const R=Ga(I),X=(yield ja()).transaction(Jo,"readwrite");return yield X.objectStore(Jo).put(S,R),yield X.done,S})).apply(this,arguments)}function $a(){return($a=(0,L.Z)(function*(I){const S=Ga(I),j=(yield ja()).transaction(Jo,"readwrite");yield j.objectStore(Jo).delete(S),yield j.done})).apply(this,arguments)}function Ga({appConfig:I}){return I.appId}const zn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rc(I,S){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,L.Z)(function*(I,S){var R;const j=yield ea(I),X=Sl(S),ce={method:"POST",headers:j,body:JSON.stringify(X)};let ve;try{ve=yield(yield fetch(qa(I.appConfig),ce)).json()}catch(et){throw zn.create("token-subscribe-failed",{errorInfo:null===(R=et)||void 0===R?void 0:R.toString()})}if(ve.error)throw zn.create("token-subscribe-failed",{errorInfo:ve.error.message});if(!ve.token)throw zn.create("token-subscribe-no-token");return ve.token})).apply(this,arguments)}function Xo(){return(Xo=(0,L.Z)(function*(I,S){var R;const j=yield ea(I),X=Sl(S.subscriptionOptions),ce={method:"PATCH",headers:j,body:JSON.stringify(X)};let ve;try{ve=yield(yield fetch(`${qa(I.appConfig)}/${S.token}`,ce)).json()}catch(et){throw zn.create("token-update-failed",{errorInfo:null===(R=et)||void 0===R?void 0:R.toString()})}if(ve.error)throw zn.create("token-update-failed",{errorInfo:ve.error.message});if(!ve.token)throw zn.create("token-update-no-token");return ve.token})).apply(this,arguments)}function ar(I,S){return rd.apply(this,arguments)}function rd(){return(rd=(0,L.Z)(function*(I,S){var R;const X={method:"DELETE",headers:yield ea(I)};try{const ve=yield(yield fetch(`${qa(I.appConfig)}/${S}`,X)).json();if(ve.error)throw zn.create("token-unsubscribe-failed",{errorInfo:ve.error.message})}catch(ce){throw zn.create("token-unsubscribe-failed",{errorInfo:null===(R=ce)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function qa({projectId:I}){return`${El}/projects/${I}/registrations`}function ea(I){return mr.apply(this,arguments)}function mr(){return(mr=(0,L.Z)(function*({appConfig:I,installations:S}){const R=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Sl({p256dh:I,auth:S,endpoint:R,vapidKey:j}){const X={web:{endpoint:R,auth:S,p256dh:I}};return j!==Ba&&(X.web.applicationPubKey=j),X}const za=6048e5;function Zs(){return Zs=(0,L.Z)(function*(I){const S=yield function id(I,S){return sd.apply(this,arguments)}(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:S.endpoint,auth:Ds(S.getKey("auth")),p256dh:Ds(S.getKey("p256dh"))},j=yield kc(I.firebaseDependencies);if(j){if(function Fc(I,S){return S.vapidKey===I.vapidKey&&S.endpoint===I.endpoint&&S.auth===I.auth&&S.p256dh===I.p256dh}(j.subscriptionOptions,R))return Date.now()>=j.createTime+za?function Pt(I,S){return Mc.apply(this,arguments)}(I,{token:j.token,createTime:Date.now(),subscriptionOptions:R}):j.token;try{yield ar(I.firebaseDependencies,j.token)}catch(X){console.warn(X)}return Ih(I.firebaseDependencies,R)}return Ih(I.firebaseDependencies,R)}),Zs.apply(this,arguments)}function Al(){return Al=(0,L.Z)(function*(I){const S=yield kc(I.firebaseDependencies);S&&(yield ar(I.firebaseDependencies,S.token),yield function nd(I){return $a.apply(this,arguments)}(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()}),Al.apply(this,arguments)}function Mc(){return Mc=(0,L.Z)(function*(I,S){try{const R=yield function Za(I,S){return Xo.apply(this,arguments)}(I.firebaseDependencies,S),j=Object.assign(Object.assign({},S),{token:R,createTime:Date.now()});return yield Qo(I.firebaseDependencies,j),R}catch(R){throw yield function Il(I){return Al.apply(this,arguments)}(I),R}}),Mc.apply(this,arguments)}function Ih(I,S){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,L.Z)(function*(I,S){const j={token:yield Rc(I,S),createTime:Date.now(),subscriptionOptions:S};return yield Qo(I,j),j.token})).apply(this,arguments)}function sd(){return(sd=(0,L.Z)(function*(I,S){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:a_(S)})})).apply(this,arguments)}function Mp(I){const S={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function od(I,S){if(!S.notification)return;I.notification={};const R=S.notification.title;R&&(I.notification.title=R);const j=S.notification.body;j&&(I.notification.body=j);const X=S.notification.image;X&&(I.notification.image=X)}(S,I),function we(I,S){S.data&&(I.data=S.data)}(S,I),function sn(I,S){var R,j,X,ce,ve;if(!(S.fcmOptions||null!==(R=S.notification)&&void 0!==R&&R.click_action))return;I.fcmOptions={};const et=null!==(X=null===(j=S.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==X?X:null===(ce=S.notification)||void 0===ce?void 0:ce.click_action;et&&(I.fcmOptions.link=et);const bt=null===(ve=S.fcmOptions)||void 0===ve?void 0:ve.analytics_label;bt&&(I.fcmOptions.analyticsLabel=bt)}(S,I),S}function Ah(I,S){const R=[];for(let j=0;j<I.length;j++)R.push(I.charAt(j)),j<S.length&&R.push(S.charAt(j));return R.join("")}function Nl(I){return zn.create("missing-app-config-values",{valueName:I})}Ah("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ah("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Lc{constructor(S,R,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function qr(I){if(!I||!I.options)throw Nl("App Configuration Object");if(!I.name)throw Nl("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const j of S)if(!R[j])throw Nl(j);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:X,installations:R,analyticsProvider:j}}_delete(){return Promise.resolve()}}function ki(I){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,L.Z)(function*(I){var S;try{I.swRegistration=yield navigator.serviceWorker.register(Qu,{scope:Gs}),I.swRegistration.update().catch(()=>{})}catch(R){throw zn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=R)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function Nh(){return(Nh=(0,L.Z)(function*(I,S){if(!S&&!I.swRegistration&&(yield ki(I)),S||!I.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw zn.create("invalid-sw-registration");I.swRegistration=S}})).apply(this,arguments)}function Vc(){return(Vc=(0,L.Z)(function*(I,S){S?I.vapidKey=S:I.vapidKey||(I.vapidKey=Ba)})).apply(this,arguments)}function Ri(){return Ri=(0,L.Z)(function*(I,S){if(!navigator)throw zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw zn.create("permission-blocked");return yield function ld(I,S){return Vc.apply(this,arguments)}(I,S?.vapidKey),yield function Bc(I,S){return Nh.apply(this,arguments)}(I,S?.serviceWorkerRegistration),function Oc(I){return Zs.apply(this,arguments)}(I)}),Ri.apply(this,arguments)}function ta(){return(ta=(0,L.Z)(function*(I,S,R){const j=function Ss(I){switch(I){case Ko.NOTIFICATION_CLICKED:return"notification_open";case Ko.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(S);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:R[Xu],message_name:R[Rp],message_time:R[Op],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function xl(){return xl=(0,L.Z)(function*(I,S){const R=S.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===Ko.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Mp(R)):I.onMessageHandler.next(Mp(R)));const j=R.data;(function ad(I){return"object"==typeof I&&!!I&&Xu in I})(j)&&"1"===j[o_]&&(yield function wo(I,S,R){return ta.apply(this,arguments)}(I,R.messageType,j))}),xl.apply(this,arguments)}const kh="@firebase/messaging",ud=I=>{const S=new Lc(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function xh(I,S){return xl.apply(this,arguments)}(S,R)),S},qs=I=>{const S=I.getProvider("messaging").getImmediate();return{getToken:j=>function _r(I,S){return Ri.apply(this,arguments)}(S,j)}};function dd(){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,L.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Rh(){(0,le._registerComponent)(new ie.wA("messaging",ud,"PUBLIC")),(0,le._registerComponent)(new ie.wA("messaging-internal",qs,"PRIVATE")),(0,le.registerVersion)(kh,"0.9.16"),(0,le.registerVersion)(kh,"0.9.16","esm2017")}();const Ph="analytics",yi="firebase_id",Wa="origin",Rn=6e4,Ka="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hd="https://www.googletagmanager.com/gtag/js",zr=new Ce.Yd("@firebase/analytics");function Lp(I){return Promise.all(I.map(S=>S.catch(R=>R)))}function na(){return(na=(0,L.Z)(function*(I,S,R,j,X,ce){const ve=j[X];try{if(ve)yield S[ve];else{const bt=(yield Lp(R)).find(It=>It.measurementId===X);bt&&(yield S[bt.appId])}}catch(et){zr.error(et)}I("config",X,ce)})).apply(this,arguments)}function Co(){return(Co=(0,L.Z)(function*(I,S,R,j,X){try{let ce=[];if(X&&X.send_to){let ve=X.send_to;Array.isArray(ve)||(ve=[ve]);const et=yield Lp(R);for(const bt of ve){const It=et.find(wt=>wt.measurementId===bt),Ft=It&&S[It.appId];if(!Ft){ce=[];break}ce.push(Ft)}}0===ce.length&&(ce=Object.values(S)),yield Promise.all(ce),I("event",j,X||{})}catch(ce){zr.error(ce)}})).apply(this,arguments)}const Wi=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Hc=30,Lh=new class ra{constructor(S={},R=1e3){this.throttleMetadata=S,this.intervalMillis=R}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,R){this.throttleMetadata[S]=R}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Up(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Ml(){return(Ml=(0,L.Z)(function*(I){var S;const{appId:R,apiKey:j}=I,X={method:"GET",headers:Up(j)},ce=Ka.replace("{app-id}",R),ve=yield fetch(ce,X);if(200!==ve.status&&304!==ve.status){let et="";try{const bt=yield ve.json();null!==(S=bt.error)&&void 0!==S&&S.message&&(et=bt.error.message)}catch{}throw Wi.create("config-fetch-failed",{httpStatus:ve.status,responseMessage:et})}return ve.json()})).apply(this,arguments)}function Pl(){return(Pl=(0,L.Z)(function*(I,S=Lh,R){const{appId:j,apiKey:X,measurementId:ce}=I.options;if(!j)throw Wi.create("no-app-id");if(!X){if(ce)return{measurementId:ce,appId:j};throw Wi.create("no-api-key")}const ve=S.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},et=new Fl;return setTimeout((0,L.Z)(function*(){et.abort()}),void 0!==R?R:Rn),zs({appId:j,apiKey:X,measurementId:ce},ve,et,S)})).apply(this,arguments)}function zs(I,S,R){return Ws.apply(this,arguments)}function Ws(){return Ws=(0,L.Z)(function*(I,{throttleEndTimeMillis:S,backoffCount:R},j,X=Lh){var ce,ve;const{appId:et,measurementId:bt}=I;try{yield function Ja(I,S){return new Promise((R,j)=>{const X=Math.max(S-Date.now(),0),ce=setTimeout(R,X);I.addEventListener(()=>{clearTimeout(ce),j(Wi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(j,S)}catch(It){if(bt)return zr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${null===(ce=It)||void 0===ce?void 0:ce.message}]`),{appId:et,measurementId:bt};throw It}try{const It=yield function ia(I){return Ml.apply(this,arguments)}(I);return X.deleteThrottleMetadata(et),It}catch(It){const Ft=It;if(!function pd(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}(Ft)){if(X.deleteThrottleMetadata(et),bt)return zr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${Ft?.message}]`),{appId:et,measurementId:bt};throw It}const wt=503===Number(null===(ve=Ft?.customData)||void 0===ve?void 0:ve.httpStatus)?(0,oe.$s)(R,X.intervalMillis,Hc):(0,oe.$s)(R,X.intervalMillis),Mr={throttleEndTimeMillis:Date.now()+wt,backoffCount:R+1};return X.setThrottleMetadata(et,Mr),zr.debug(`Calling attemptFetch again in ${wt} millis`),zs(I,Mr,j,X)}}),Ws.apply(this,arguments)}class Fl{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let $c,Do;function Eo(){return(Eo=(0,L.Z)(function*(I,S,R,j,X){if(X&&X.global)I("event",R,j);else{const ce=yield S;I("event",R,Object.assign(Object.assign({},j),{send_to:ce}))}})).apply(this,arguments)}function gd(){return(gd=(0,L.Z)(function*(){var I;if(!(0,oe.hl)())return zr.warn(Wi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(S){return zr.warn(Wi.create("indexeddb-unavailable",{errorInfo:null===(I=S)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function Hl(){return Hl=(0,L.Z)(function*(I,S,R,j,X,ce,ve){var et;const bt=function jn(I){return Pl.apply(this,arguments)}(I);bt.then(br=>{R[br.measurementId]=br.appId,I.options.measurementId&&br.measurementId!==I.options.measurementId&&zr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${br.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(br=>zr.error(br)),S.push(bt);const It=function jl(){return gd.apply(this,arguments)}().then(br=>{if(br)return j.getId()}),[Ft,wt]=yield Promise.all([bt,It]);(function Ya(){const I=window.document.getElementsByTagName("script");for(const S of Object.values(I))if(S.src&&S.src.includes(hd))return S;return null})()||function c_(I,S){const R=document.createElement("script");R.src=`${hd}?l=${I}&id=${S}`,R.async=!0,document.head.appendChild(R)}(ce,Ft.measurementId),Do&&(X("consent","default",Do),function Vl(I){Do=I}(void 0)),X("js",new Date);const Mr=null!==(et=ve?.config)&&void 0!==et?et:{};return Mr[Wa]="firebase",Mr.update=!0,null!=wt&&(Mr[yi]=wt),X("config",Ft.measurementId,Mr),$c&&(X("set",$c),function qc(I){$c=I}(void 0)),Ft.measurementId}),Hl.apply(this,arguments)}class Uh{constructor(S){this.app=S}_delete(){return delete Is[this.app.options.appId],Promise.resolve()}}let Is={},zc=[];const oa={};let Wc,Ks,As="dataLayer",Bh="gtag",hs=!1;function Kc(I,S,R){!function Vh(){const I=[];if((0,oe.ru)()&&I.push("This is a browser extension environment."),(0,oe.zI)()||I.push("Cookies are not available."),I.length>0){const S=I.map((j,X)=>`(${X+1}) ${j}`).join(" "),R=Wi.create("invalid-analytics-context",{errorInfo:S});zr.warn(R.message)}}();const j=I.options.appId;if(!j)throw Wi.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Wi.create("no-api-key");zr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Is[j])throw Wi.create("already-exists",{id:j});if(!hs){!function u_(I){let S=[];Array.isArray(window[I])?S=window[I]:window[I]=S}(As);const{wrappedGtag:ce,gtagCore:ve}=function Ol(I,S,R,j,X){let ce=function(...ve){window[j].push(arguments)};return window[X]&&"function"==typeof window[X]&&(ce=window[X]),window[X]=function Rl(I,S,R,j){function ce(){return ce=(0,L.Z)(function*(ve,et,bt){try{"event"===ve?yield function fd(I,S,R,j,X){return Co.apply(this,arguments)}(I,S,R,et,bt):"config"===ve?yield function kl(I,S,R,j,X,ce){return na.apply(this,arguments)}(I,S,R,j,et,bt):"consent"===ve?I("consent","update",bt):I("set",et)}catch(It){zr.error(It)}}),ce.apply(this,arguments)}return function X(ve,et,bt){return ce.apply(this,arguments)}}(ce,I,S,R),{gtagCore:ce,wrappedGtag:window[X]}}(Is,zc,oa,As,Bh);Ks=ce,Wc=ve,hs=!0}return Is[j]=function sa(I,S,R,j,X,ce,ve){return Hl.apply(this,arguments)}(I,zc,oa,S,Wc,As,R),new Uh(I)}function Yc(){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,L.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const rn="@firebase/analytics";!function h_(){(0,le._registerComponent)(new ie.wA(Ph,(S,{options:R})=>Kc(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,le._registerComponent)(new ie.wA("analytics-internal",function I(S){try{const R=S.getProvider(Ph).getImmediate();return{logEvent:(j,X,ce)=>function Vp(I,S,R,j){I=(0,oe.m9)(I),function Gc(I,S,R,j,X){return Eo.apply(this,arguments)}(Ks,Is[I.app.options.appId],S,R,j).catch(X=>zr.error(X))}(R,j,X,ce)}}catch(R){throw Wi.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,le.registerVersion)(rn,"0.8.0"),(0,le.registerVersion)(rn,"0.8.0","esm2017")}();var Qc=U(4408),Hp=U(7565);const $p=new class $h extends Hp.v{}(class jp extends Qc.o{constructor(S,R){super(S,R),this.scheduler=S,this.work=R}schedule(S,R=0){return R>0?super.schedule(S,R):(this.delay=R,this.state=S,this.scheduler.flush(this),this)}execute(S,R){return R>0||this.closed?super.execute(S,R):this._execute(S,R)}requestAsyncId(S,R,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(S,R,j):(S.flush(this),0)}});var Gp=U(4986),vd=U(8505),Sn=U(5363),eu=U(9468);const tu=new s.GfV("7.6.1"),bd="__angularfire_symbol__analyticsIsSupportedValue",Oi="__angularfire_symbol__analyticsIsSupported",Ns="__angularfire_symbol__remoteConfigIsSupportedValue",nu="__angularfire_symbol__remoteConfigIsSupported",Gl="__angularfire_symbol__messagingIsSupportedValue",nl="__angularfire_symbol__messagingIsSupported";function vi(I,S,R){if(S){if(1===S.length)return S[0];const ce=S.filter(ve=>ve.app===R);if(1===ce.length)return ce[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[Oi]||(globalThis[Oi]=Yc().then(I=>globalThis[bd]=I).catch(()=>globalThis[bd]=!1)),globalThis[nl]||(globalThis[nl]=dd().then(I=>globalThis[Gl]=I).catch(()=>globalThis[Gl]=!1)),globalThis[nu]||(globalThis[nu]=Tl().then(I=>globalThis[Ns]=I).catch(()=>globalThis[Ns]=!1));const Bt=(I,S)=>{const R=S?[S]:(0,te.C6)(),j=[];return R.forEach(X=>{X.container.getProvider(I).instances.forEach(ve=>{j.includes(ve)||j.push(ve)})}),j};function yr(){}class Fe{constructor(S,R=$p){this.zone=S,this.delegate=R}now(){return this.delegate.now()}schedule(S,R,j){const X=this.zone;return this.delegate.schedule(function(ve){X.runGuarded(()=>{S.apply(this,[ve])})},R,j)}}class cn{constructor(S){this.zone=S,this.task=null}call(S,R){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yr,{},yr,yr)),R.pipe((0,vd.b)({next:j,complete:j,error:j})).subscribe(S).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let vr=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Fe(Zone.current)),this.insideAngular=R.run(()=>new Fe(Zone.current,Gp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(s.LFG(s.R0b))},I.\u0275prov=s.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Js(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Zp(I){return I.pipe((0,Sn.Q)(Js().outsideAngular))}function Zl(I){return Js(),function ql(I){return function(R){return(R=R.lift(new cn(I.ngZone))).pipe((0,eu.R)(I.outsideAngular),(0,Sn.Q)(I.insideAngular))}}(Js())(I)}},2090:(mt,Ae,U)=>{U.d(Ae,{$s:()=>Ra,BH:()=>Ke,DV:()=>Qe,Dv:()=>Bn,G6:()=>Ve,GJ:()=>He,L:()=>ye,LL:()=>xn,Mn:()=>Me,Pz:()=>ae,Sg:()=>ke,UG:()=>be,UI:()=>Dt,US:()=>ie,Wj:()=>yn,Yr:()=>qe,ZB:()=>Z,ZR:()=>nt,b$:()=>$e,cI:()=>as,d:()=>xe,dS:()=>Tt,eu:()=>Ee,g5:()=>L,gK:()=>Xr,gQ:()=>Gn,h$:()=>Ce,hl:()=>G,hu:()=>te,jU:()=>Oe,lb:()=>Tn,m9:()=>Xt,ne:()=>Si,p$:()=>q,pd:()=>Pn,r3:()=>Ct,ru:()=>Re,tV:()=>_e,uI:()=>ut,ug:()=>xt,vZ:()=>Yt,w1:()=>Se,w9:()=>Ge,xO:()=>pr,xb:()=>Kt,z$:()=>Je,zI:()=>We,zd:()=>kr});const s={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},te=function(Q,$){if(!Q)throw L($)},L=function(Q){return new Error("Firebase Database ("+s.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Q)},le=function(Q){const $=[];let H=0;for(let z=0;z<Q.length;z++){let K=Q.charCodeAt(z);K<128?$[H++]=K:K<2048?($[H++]=K>>6|192,$[H++]=63&K|128):55296==(64512&K)&&z+1<Q.length&&56320==(64512&Q.charCodeAt(z+1))?(K=65536+((1023&K)<<10)+(1023&Q.charCodeAt(++z)),$[H++]=K>>18|240,$[H++]=K>>12&63|128,$[H++]=K>>6&63|128,$[H++]=63&K|128):($[H++]=K>>12|224,$[H++]=K>>6&63|128,$[H++]=63&K|128)}return $},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Q,$){if(!Array.isArray(Q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,z=[];for(let K=0;K<Q.length;K+=3){const Ne=Q[K],Ye=K+1<Q.length,vt=Ye?Q[K+1]:0,En=K+2<Q.length,fn=En?Q[K+2]:0;let Yn=(15&vt)<<2|fn>>6,Rr=63&fn;En||(Rr=64,Ye||(Yn=64)),z.push(H[Ne>>2],H[(3&Ne)<<4|vt>>4],H[Yn],H[Rr])}return z.join("")},encodeString(Q,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(Q):this.encodeByteArray(le(Q),$)},decodeString(Q,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(Q):function(Q){const $=[];let H=0,z=0;for(;H<Q.length;){const K=Q[H++];if(K<128)$[z++]=String.fromCharCode(K);else if(K>191&&K<224){const Ne=Q[H++];$[z++]=String.fromCharCode((31&K)<<6|63&Ne)}else if(K>239&&K<365){const En=((7&K)<<18|(63&Q[H++])<<12|(63&Q[H++])<<6|63&Q[H++])-65536;$[z++]=String.fromCharCode(55296+(En>>10)),$[z++]=String.fromCharCode(56320+(1023&En))}else{const Ne=Q[H++],Ye=Q[H++];$[z++]=String.fromCharCode((15&K)<<12|(63&Ne)<<6|63&Ye)}}return $.join("")}(this.decodeStringToByteArray(Q,$))},decodeStringToByteArray(Q,$){this.init_();const H=$?this.charToByteMapWebSafe_:this.charToByteMap_,z=[];for(let K=0;K<Q.length;){const Ne=H[Q.charAt(K++)],vt=K<Q.length?H[Q.charAt(K)]:0;++K;const fn=K<Q.length?H[Q.charAt(K)]:64;++K;const Ut=K<Q.length?H[Q.charAt(K)]:64;if(++K,null==Ne||null==vt||null==fn||null==Ut)throw Error();z.push(Ne<<2|vt>>4),64!==fn&&(z.push(vt<<4&240|fn>>2),64!==Ut&&z.push(fn<<6&192|Ut))}return z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Q=0;Q<this.ENCODED_VALS.length;Q++)this.byteToCharMap_[Q]=this.ENCODED_VALS.charAt(Q),this.charToByteMap_[this.byteToCharMap_[Q]]=Q,this.byteToCharMapWebSafe_[Q]=this.ENCODED_VALS_WEBSAFE.charAt(Q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Q]]=Q,Q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Q)]=Q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Q)]=Q)}}},Ce=function(Q){const $=le(Q);return ie.encodeByteArray($,!0)},ye=function(Q){return Ce(Q).replace(/\./g,"")},_e=function(Q){try{return ie.decodeString(Q,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function q(Q){return Z(void 0,Q)}function Z(Q,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===Q&&(Q={});break;case Array:Q=[];break;default:return $}for(const H in $)!$.hasOwnProperty(H)||!ee(H)||(Q[H]=Z(Q[H],$[H]));return Q}function ee(Q){return"__proto__"!==Q}class Ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,H)=>{this.resolve=$,this.reject=H})}wrapCallback($){return(H,z)=>{H?this.reject(H):this.resolve(z),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(H):$(H,z))}}}function ke(Q,$){if(Q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const z=$||"demo-project",K=Q.iat||0,Ne=Q.sub||Q.user_id;if(!Ne)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ye=Object.assign({iss:`https://securetoken.google.com/${z}`,aud:z,iat:K,exp:K+3600,auth_time:K,sub:Ne,user_id:Ne,firebase:{sign_in_provider:"custom",identities:{}}},Q);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(Ye)),""].join(".")}function Je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ut(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Oe(){return"object"==typeof self&&self.self===self}function Re(){const Q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Q&&void 0!==Q.id}function $e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xe(){return Je().indexOf("Electron/")>=0}function Se(){const Q=Je();return Q.indexOf("MSIE ")>=0||Q.indexOf("Trident/")>=0}function Me(){return Je().indexOf("MSAppHost/")>=0}function qe(){return!0===s.NODE_CLIENT||!0===s.NODE_ADMIN}function Ve(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G(){return"object"==typeof indexedDB}function Ee(){return new Promise((Q,$)=>{try{let H=!0;const z="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(z);K.onsuccess=()=>{K.result.close(),H||self.indexedDB.deleteDatabase(z),Q(!0)},K.onupgradeneeded=()=>{H=!1},K.onerror=()=>{var Ne;$((null===(Ne=K.error)||void 0===Ne?void 0:Ne.message)||"")}}catch(H){$(H)}})}function We(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class nt extends Error{constructor($,H,z){super(H),this.code=$,this.customData=z,this.name="FirebaseError",Object.setPrototypeOf(this,nt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xn.prototype.create)}}class xn{constructor($,H,z){this.service=$,this.serviceName=H,this.errors=z}create($,...H){const z=H[0]||{},K=`${this.service}/${$}`,Ne=this.errors[$],Ye=Ne?function xr(Q,$){return Q.replace(rr,(H,z)=>{const K=$[z];return null!=K?String(K):`<${z}?>`})}(Ne,z):"Error";return new nt(K,`${this.serviceName}: ${Ye} (${K}).`,z)}}const rr=/\{\$([^}]+)}/g;function as(Q){return JSON.parse(Q)}function ae(Q){return JSON.stringify(Q)}const pe=function(Q){let $={},H={},z={},K="";try{const Ne=Q.split(".");$=as(_e(Ne[0])||""),H=as(_e(Ne[1])||""),K=Ne[2],z=H.d||{},delete H.d}catch{}return{header:$,claims:H,data:z,signature:K}},Ge=function(Q){const H=pe(Q).claims;return!!H&&"object"==typeof H&&H.hasOwnProperty("iat")},He=function(Q){const $=pe(Q).claims;return"object"==typeof $&&!0===$.admin};function Ct(Q,$){return Object.prototype.hasOwnProperty.call(Q,$)}function Qe(Q,$){if(Object.prototype.hasOwnProperty.call(Q,$))return Q[$]}function Kt(Q){for(const $ in Q)if(Object.prototype.hasOwnProperty.call(Q,$))return!1;return!0}function Dt(Q,$,H){const z={};for(const K in Q)Object.prototype.hasOwnProperty.call(Q,K)&&(z[K]=$.call(H,Q[K],K,Q));return z}function Yt(Q,$){if(Q===$)return!0;const H=Object.keys(Q),z=Object.keys($);for(const K of H){if(!z.includes(K))return!1;const Ne=Q[K],Ye=$[K];if(ln(Ne)&&ln(Ye)){if(!Yt(Ne,Ye))return!1}else if(Ne!==Ye)return!1}for(const K of z)if(!H.includes(K))return!1;return!0}function ln(Q){return null!==Q&&"object"==typeof Q}function pr(Q){const $=[];for(const[H,z]of Object.entries(Q))Array.isArray(z)?z.forEach(K=>{$.push(encodeURIComponent(H)+"="+encodeURIComponent(K))}):$.push(encodeURIComponent(H)+"="+encodeURIComponent(z));return $.length?"&"+$.join("&"):""}function kr(Q){const $={};return Q.replace(/^\?/,"").split("&").forEach(z=>{if(z){const[K,Ne]=z.split("=");$[decodeURIComponent(K)]=decodeURIComponent(Ne)}}),$}function Pn(Q){const $=Q.indexOf("?");if(!$)return"";const H=Q.indexOf("#",$);return Q.substring($,H>0?H:void 0)}class Gn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,H){H||(H=0);const z=this.W_;if("string"==typeof $)for(let Ut=0;Ut<16;Ut++)z[Ut]=$.charCodeAt(H)<<24|$.charCodeAt(H+1)<<16|$.charCodeAt(H+2)<<8|$.charCodeAt(H+3),H+=4;else for(let Ut=0;Ut<16;Ut++)z[Ut]=$[H]<<24|$[H+1]<<16|$[H+2]<<8|$[H+3],H+=4;for(let Ut=16;Ut<80;Ut++){const Yn=z[Ut-3]^z[Ut-8]^z[Ut-14]^z[Ut-16];z[Ut]=4294967295&(Yn<<1|Yn>>>31)}let fn,Dn,K=this.chain_[0],Ne=this.chain_[1],Ye=this.chain_[2],vt=this.chain_[3],En=this.chain_[4];for(let Ut=0;Ut<80;Ut++){Ut<40?Ut<20?(fn=vt^Ne&(Ye^vt),Dn=1518500249):(fn=Ne^Ye^vt,Dn=1859775393):Ut<60?(fn=Ne&Ye|vt&(Ne|Ye),Dn=2400959708):(fn=Ne^Ye^vt,Dn=3395469782);const Yn=(K<<5|K>>>27)+fn+En+Dn+z[Ut]&4294967295;En=vt,vt=Ye,Ye=4294967295&(Ne<<30|Ne>>>2),Ne=K,K=Yn}this.chain_[0]=this.chain_[0]+K&4294967295,this.chain_[1]=this.chain_[1]+Ne&4294967295,this.chain_[2]=this.chain_[2]+Ye&4294967295,this.chain_[3]=this.chain_[3]+vt&4294967295,this.chain_[4]=this.chain_[4]+En&4294967295}update($,H){if(null==$)return;void 0===H&&(H=$.length);const z=H-this.blockSize;let K=0;const Ne=this.buf_;let Ye=this.inbuf_;for(;K<H;){if(0===Ye)for(;K<=z;)this.compress_($,K),K+=this.blockSize;if("string"==typeof $){for(;K<H;)if(Ne[Ye]=$.charCodeAt(K),++Ye,++K,Ye===this.blockSize){this.compress_(Ne),Ye=0;break}}else for(;K<H;)if(Ne[Ye]=$[K],++Ye,++K,Ye===this.blockSize){this.compress_(Ne),Ye=0;break}}this.inbuf_=Ye,this.total_+=H}digest(){const $=[];let H=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let K=this.blockSize-1;K>=56;K--)this.buf_[K]=255&H,H/=256;this.compress_(this.buf_);let z=0;for(let K=0;K<5;K++)for(let Ne=24;Ne>=0;Ne-=8)$[z]=this.chain_[K]>>Ne&255,++z;return $}}function Si(Q,$){const H=new Fn(Q,$);return H.subscribe.bind(H)}class Fn{constructor($,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{$(this)}).catch(z=>{this.error(z)})}next($){this.forEachObserver(H=>{H.next($)})}error($){this.forEachObserver(H=>{H.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,H,z){let K;if(void 0===$&&void 0===H&&void 0===z)throw new Error("Missing Observer.");K=function ls(Q,$){if("object"!=typeof Q||null===Q)return!1;for(const H of $)if(H in Q&&"function"==typeof Q[H])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:H,complete:z},void 0===K.next&&(K.next=Bs),void 0===K.error&&(K.error=Bs),void 0===K.complete&&(K.complete=Bs);const Ne=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),Ne}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,$)}sendOne($,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{H(this.observers[$])}catch(z){typeof console<"u"&&console.error&&console.error(z)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bs(){}const Bn=function(Q,$,H,z){let K;if(z<$?K="at least "+$:z>H&&(K=0===H?"none":"no more than "+H),K)throw new Error(Q+" failed: Was called with "+z+(1===z?" argument.":" arguments.")+" Expects "+K+".")};function Xr(Q,$){return`${Q} failed: ${$} argument `}function yn(Q,$,H,z){if((!z||H)&&"function"!=typeof H)throw new Error(Xr(Q,$)+"must be a valid function.")}function Tn(Q,$,H,z){if((!z||H)&&("object"!=typeof H||null===H))throw new Error(Xr(Q,$)+"must be a valid context object.")}const Tt=function(Q){const $=[];let H=0;for(let z=0;z<Q.length;z++){let K=Q.charCodeAt(z);if(K>=55296&&K<=56319){const Ne=K-55296;z++,te(z<Q.length,"Surrogate pair missing trail surrogate."),K=65536+(Ne<<10)+(Q.charCodeAt(z)-56320)}K<128?$[H++]=K:K<2048?($[H++]=K>>6|192,$[H++]=63&K|128):K<65536?($[H++]=K>>12|224,$[H++]=K>>6&63|128,$[H++]=63&K|128):($[H++]=K>>18|240,$[H++]=K>>12&63|128,$[H++]=K>>6&63|128,$[H++]=63&K|128)}return $},xt=function(Q){let $=0;for(let H=0;H<Q.length;H++){const z=Q.charCodeAt(H);z<128?$++:z<2048?$+=2:z>=55296&&z<=56319?($+=4,H++):$+=3}return $},Kn=1e3,Zn=2,Vs=144e5,$r=.5;function Ra(Q,$=Kn,H=Zn){const z=$*Math.pow(H,Q),K=Math.round($r*z*(Math.random()-.5)*2);return Math.min(Vs,z+K)}function Xt(Q){return Q&&Q._delegate?Q._delegate:Q}},7937:(mt,Ae,U)=>{var s=U(4650);let te=null;function L(){return te}class oe{}const ie=new s.OlP("DocumentToken");let Ce=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return function ye(){return(0,s.LFG)(q)}()},providedIn:"platform"}),n})();const _e=new s.OlP("Location Initialized");let q=(()=>{class n extends Ce{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(e){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){Z()?this._history.pushState(e,r,i):this._location.hash=i}replaceState(e,r,i){Z()?this._history.replaceState(e,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:function(){return function ee(){return new q((0,s.LFG)(ie))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function Ke(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function ke(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Je(n){return n&&"?"!==n[0]?"?"+n:n}let ut=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return(0,s.f3M)(Oe)},providedIn:"root"}),n})();const be=new s.OlP("appBaseHref");let Oe=(()=>{class n extends ut{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,s.f3M)(ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Ke(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+Je(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){const c=this.prepareExternalUrl(i+Je(o));this._platformLocation.pushState(e,r,c)}replaceState(e,r,i,o){const c=this.prepareExternalUrl(i+Je(o));this._platformLocation.replaceState(e,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Ce),s.LFG(be,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Re=(()=>{class n extends ut{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=Ke(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,o){let c=this.prepareExternalUrl(i+Je(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,r,c)}replaceState(e,r,i,o){let c=this.prepareExternalUrl(i+Je(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Ce),s.LFG(be,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n{constructor(e){this._subject=new s.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._basePath=function qe(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(ke(Me(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Je(r))}normalize(e){return n.stripTrailingSlash(function Se(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,Me(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Je(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Je(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.normalizeQueryParams=Je,n.joinWithSlash=Ke,n.stripTrailingSlash=ke,n.\u0275fac=function(e){return new(e||n)(s.LFG(ut))},n.\u0275prov=s.Yz7({token:n,factory:function(){return function xe(){return new $e((0,s.LFG)(ut))}()},providedIn:"root"}),n})();function Me(n){return n.replace(/\/index.html$/,"")}function qo(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,o]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}const Gi=/\s+/,st=[];let Vt=(()=>{class n{constructor(e,r,i,o){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this.initialClasses=st,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Gi):st}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Gi):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,Boolean(e[r]));this._applyStateDiff()}_updateState(e,r){const i=this.stateMap.get(e);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(Gi).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.ZZ4),s.Y36(s.aQg),s.Y36(s.SBq),s.Y36(s.Qsj))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class sr{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let or=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((i,o,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new sr(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===o?void 0:o);else if(null!==o){const d=r.get(o);r.move(d,c),Vn(d,i)}});for(let i=0,o=r.length;i<o;i++){const d=r.get(i).context;d.index=i,d.count=o,d.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{Vn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(s.ZZ4))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Vn(n,t){n.context.$implicit=t.item}let gr=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new Zt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Ku("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Ku("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(s.Rgc))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Zt{constructor(){this.$implicit=null,this.ngIf=null}}function Ku(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,s.AaK)(t)}'.`)}function Es(n,t){return new s.vHH(2100,!1)}class qi{createSubscription(t,e){return t.subscribe({next:e,error:r=>{throw r}})}dispose(t){t.unsubscribe()}}class Eh{createSubscription(t,e){return t.then(e,r=>{throw r})}dispose(t){}}const Ua=new Eh,Wo=new qi;let ri=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r))}_selectStrategy(e){if((0,s.QGY)(e))return Ua;if((0,s.F4k)(e))return Wo;throw Es()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.sBO,16))},n.\u0275pipe=s.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),zi=(()=>{class n{transform(e){if(null==e)return null;if("string"!=typeof e)throw Es();return e.toUpperCase()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=s.Yjl({name:"uppercase",type:n,pure:!0,standalone:!0}),n})(),Zr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const ed="browser",_i="server";function bo(n){return n===ed}function Nc(n){return n===_i}let ja=(()=>{class n{}return n.\u0275prov=(0,s.Yz7)({token:n,providedIn:"root",factory:()=>new kc((0,s.LFG)(ie),window)}),n})();class kc{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Qo(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const c=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Ha(this.window.history)||Ha(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ha(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class nd{}class Co extends oe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Rl extends Co{static makeCurrent(){!function le(n){te||(te=n)}(new Rl)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Ya(){return Ol=Ol||document.querySelector("base"),Ol?Ol.getAttribute("href"):null}();return null==e?null:function Wi(n){To=To||document.createElement("a"),To.setAttribute("href",n);const t=To.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Ol=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return qo(document.cookie,t)}}let To,Ol=null;const Hc=new s.OlP("TRANSITION_ID"),ra=[{provide:s.ip1,useFactory:function Fh(n,t,e){return()=>{e.get(s.CZH).donePromise.then(()=>{const r=L(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Hc,ie,s.zs3],multi:!0}];let Up=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const ia=new s.OlP("EventManagerPlugins");let Ml=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const c=i[o];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ia),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class jn{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=L().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let Pl=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,r){const i=this.usageCount;let o=i.get(e)??0;return o+=r,o>0?i.set(e,o):i.delete(e),o}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),zs=(()=>{class n extends Pl{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.forEach(o=>o.remove()),r.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,r){const i=this.doc.createElement("style");i.textContent=r,e.appendChild(i);const o=this.styleRef.get(r);o?o.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Ws={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ja=/%COMP%/g,Qa=new s.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ul(n,t){return t.flat(100).map(e=>e.replace(Ja,n))}function Zc(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Wr=(()=>{class n{constructor(e,r,i,o){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=o,this.rendererByCompId=new Map,this.defaultRenderer=new Bl(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(e,r);return i instanceof gd?i.applyToHost(e):i instanceof jl&&i.applyStyles(),i}getOrCreateRenderer(e,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const c=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestory;switch(r.encapsulation){case s.ifc.Emulated:o=new gd(c,d,r,this.appId,f);break;case s.ifc.ShadowDom:return new qc(c,d,e,r);default:o=new jl(c,d,r,f)}o.onDestroy=()=>i.delete(r.id),i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Ml),s.LFG(zs),s.LFG(s.AFp),s.LFG(Qa))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class Bl{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Ws[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Vl(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(Vl(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const o=Ws[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=Ws[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(s.JOm.DashCase|s.JOm.Important)?t.style.setProperty(e,r,i&s.JOm.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&s.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Zc(r)):this.eventManager.addEventListener(t,e,Zc(r))}}function Vl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class qc extends Bl{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Ul(i.id,i.styles);for(const c of o){const d=document.createElement("style");d.textContent=c,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class jl extends Bl{constructor(t,e,r,i,o=r.id){super(t),this.sharedStylesHost=e,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Ul(o,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class gd extends jl{constructor(t,e,r,i,o){const c=i+"-"+r.id;super(t,e,r,o,c),this.contentAttr=function Xa(n){return"_ngcontent-%COMP%".replace(Ja,n)}(c),this.hostAttr=function Ll(n){return"_nghost-%COMP%".replace(Ja,n)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}let sa=(()=>{class n extends jn{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Hl=["alt","control","meta","shift"],Uh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Is={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let zc=(()=>{class n extends jn{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const o=n.parseEventName(r),c=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(e,o.domEventName,c))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let c="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),c="code."),Hl.forEach(y=>{const w=r.indexOf(y);w>-1&&(r.splice(w,1),c+=y+".")}),c+=o,0!=r.length||0===o.length)return null;const f={};return f.domEventName=i,f.fullKey=c,f}static matchEventFullKeyCode(e,r){let i=Uh[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Hl.forEach(c=>{c!==i&&(0,Is[c])(e)&&(o+=c+".")}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const jh=(0,s.eFA)(s._c5,"browser",[{provide:s.Lbi,useValue:ed},{provide:s.g9A,useValue:function hs(){Rl.makeCurrent()},multi:!0},{provide:ie,useFactory:function Vh(){return(0,s.RDi)(document),document},deps:[]}]),md=new s.OlP(""),Yc=[{provide:s.rWj,useClass:class Lh{addToWindow(t){s.dqk.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},s.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),s.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),s.dqk.frameworkStabilizers||(s.dqk.frameworkStabilizers=[]),s.dqk.frameworkStabilizers.push(r=>{const i=s.dqk.getAllAngularTestabilities();let o=i.length,c=!1;const d=function(f){c=c||f,o--,0==o&&r(c)};i.forEach(function(f){f.whenStable(d)})})}findTestabilityInTree(t,e,r){return null==e?null:t.getTestability(e)??(r?L().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:s.lri,useClass:s.dDg,deps:[s.R0b,s.eoX,s.rWj]},{provide:s.dDg,useClass:s.dDg,deps:[s.R0b,s.eoX,s.rWj]}],Ys=[{provide:s.zSh,useValue:"root"},{provide:s.qLn,useFactory:function d_(){return new s.qLn},deps:[]},{provide:ia,useClass:sa,multi:!0,deps:[ie,s.R0b,s.Lbi]},{provide:ia,useClass:zc,multi:!0,deps:[ie]},{provide:Wr,useClass:Wr,deps:[Ml,zs,s.AFp,Qa]},{provide:s.FYo,useExisting:Wr},{provide:Pl,useExisting:zs},{provide:zs,useClass:zs,deps:[ie]},{provide:Ml,useClass:Ml,deps:[ia,s.R0b]},{provide:nd,useClass:Up,deps:[]},[]];let tl=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:s.AFp,useValue:e.appId},{provide:Hc,useExisting:s.AFp},ra]}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(md,12))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[...Ys,...Yc],imports:[Zr,s.hGG]}),n})(),Vp=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:function(e){let r=null;return r=e?new e:function $l(){return new Vp((0,s.LFG)(ie))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Gh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(e){let r=null;return r=e?new(e||n):s.LFG(f_),r},providedIn:"root"}),n})(),f_=(()=>{class n extends Gh{constructor(e){super(),this._doc=e}sanitize(e,r){if(null==r)return null;switch(e){case s.q3G.NONE:return r;case s.q3G.HTML:return(0,s.qzn)(r,"HTML")?(0,s.z3N)(r):(0,s.EiD)(this._doc,String(r)).toString();case s.q3G.STYLE:return(0,s.qzn)(r,"Style")?(0,s.z3N)(r):r;case s.q3G.SCRIPT:if((0,s.qzn)(r,"Script"))return(0,s.z3N)(r);throw new Error("unsafe value used in a script context");case s.q3G.URL:return(0,s.qzn)(r,"URL")?(0,s.z3N)(r):(0,s.mCW)(String(r));case s.q3G.RESOURCE_URL:if((0,s.qzn)(r,"ResourceURL"))return(0,s.z3N)(r);throw new Error(`unsafe value used in a resource URL context (see ${s.JZr})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${s.JZr})`)}}bypassSecurityTrustHtml(e){return(0,s.JVY)(e)}bypassSecurityTrustStyle(e){return(0,s.L6k)(e)}bypassSecurityTrustScript(e){return(0,s.eBb)(e)}bypassSecurityTrustUrl(e){return(0,s.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,s.pB0)(e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:function(e){let r=null;return r=e?new e:function Zh(n){return new f_(n.get(ie))}(s.LFG(s.zs3)),r},providedIn:"root"}),n})();var Bt=U(8996),yr=U(3269);function Fe(...n){const t=(0,yr.yG)(n);return(0,Bt.D)(n,t)}var cn=U(7579);class vr extends cn.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const rl=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var bn=U(9751);const{isArray:Zp}=Array,{getPrototypeOf:qh,prototype:Zl,keys:ql}=Object;function iu(n){if(1===n.length){const t=n[0];if(Zp(t))return{args:t,keys:null};if(function su(n){return n&&"object"==typeof n&&qh(n)===Zl}(t)){const e=ql(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}var I=U(4671),S=U(4004);const{isArray:R}=Array;function X(n){return(0,S.U)(t=>function j(n,t){return R(t)?n(...t):n(t)}(n,t))}function ce(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}var ve=U(5403),et=U(9672);function bt(...n){const t=(0,yr.yG)(n),e=(0,yr.jO)(n),{args:r,keys:i}=iu(n);if(0===r.length)return(0,Bt.D)([],t);const o=new bn.y(function It(n,t,e=I.y){return r=>{Ft(t,()=>{const{length:i}=n,o=new Array(i);let c=i,d=i;for(let f=0;f<i;f++)Ft(t,()=>{const y=(0,Bt.D)(n[f],t);let w=!1;y.subscribe((0,ve.x)(r,E=>{o[f]=E,w||(w=!0,d--),d||r.next(e(o.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,t,i?c=>ce(i,c):I.y));return e?o.pipe(X(e)):o}function Ft(n,t,e){n?(0,et.f)(e,n,t):t()}var wt=U(8189);function br(...n){return function Mr(){return(0,wt.J)(1)}()((0,Bt.D)(n,(0,yr.yG)(n)))}var si=U(8421);function il(n){return new bn.y(t=>{(0,si.Xf)(n()).subscribe(t)})}var aa=U(9635),xs=U(576);function So(n,t){const e=(0,xs.m)(n)?n:()=>n,r=i=>i.error(e());return new bn.y(t?i=>t.schedule(r,0,i):r)}var lr=U(515),Qs=U(727),In=U(4482);function zl(){return(0,In.e)((n,t)=>{let e=null;n._refCount++;const r=(0,ve.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const i=n._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}class qp extends bn.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,In.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Qs.w0;const e=this.getSubject();t.add(this.source.subscribe((0,ve.x)(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Qs.w0.EMPTY)}return t}refCount(){return zl()(this)}}function Ln(n,t){return(0,In.e)((e,r)=>{let i=null,o=0,c=!1;const d=()=>c&&!i&&r.complete();e.subscribe((0,ve.x)(r,f=>{i?.unsubscribe();let y=0;const w=o++;(0,si.Xf)(n(f,w)).subscribe(i=(0,ve.x)(r,E=>r.next(t?t(f,E,w,y++):E),()=>{i=null,d()}))},()=>{c=!0,d()}))})}function oi(n){return n<=0?()=>lr.E:(0,In.e)((t,e)=>{let r=0;t.subscribe((0,ve.x)(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function la(...n){const t=(0,yr.yG)(n);return(0,In.e)((e,r)=>{(t?br(n,e,t):br(n,e)).subscribe(r)})}function Pr(n,t){return(0,In.e)((e,r)=>{let i=0;e.subscribe((0,ve.x)(r,o=>n.call(t,o,i++)&&r.next(o)))})}var Qn=U(5577);function zp(n){return(0,In.e)((t,e)=>{let r=!1;t.subscribe((0,ve.x)(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function r0(n=Wp){return(0,In.e)((t,e)=>{let r=!1;t.subscribe((0,ve.x)(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function Wp(){return new rl}function ca(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Pr((i,o)=>n(i,o,r)):I.y,oi(1),e?zp(t):r0(()=>new rl))}function Wl(n,t){return(0,xs.m)(t)?(0,Qn.z)(n,t,1):(0,Qn.z)(n,1)}var ai=U(8505);function Kl(n){return(0,In.e)((t,e)=>{let o,r=null,i=!1;r=t.subscribe((0,ve.x)(e,void 0,void 0,c=>{o=(0,si.Xf)(n(c,Kl(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function ua(n,t){return(0,In.e)(function w1(n,t,e,r,i){return(o,c)=>{let d=e,f=t,y=0;o.subscribe((0,ve.x)(c,w=>{const E=y++;f=d?n(f,w,E):(d=!0,w),r&&c.next(f)},i&&(()=>{d&&c.next(f),c.complete()})))}}(n,t,arguments.length>=2,!0))}function zh(n){return n<=0?()=>lr.E:(0,In.e)((t,e)=>{let r=[];t.subscribe((0,ve.x)(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function Wh(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Pr((i,o)=>n(i,o,r)):I.y,zh(1),e?zp(t):r0(()=>new rl))}function Kh(n){return(0,S.U)(()=>n)}function Yh(n){return(0,In.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const St="primary",wd=Symbol("RouteTitle");class s0{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ou(n){return new s0(n)}function g_(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const c=r[o],d=n[o];if(c.startsWith(":"))i[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Io(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!Jh(n[i],t[i]))return!1;return!0}function Jh(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}return n===t}function m_(n){return Array.prototype.concat.apply([],n)}function Qh(n){return n.length>0?n[n.length-1]:null}function Fr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function cr(n){return(0,s.CqO)(n)?n:(0,s.QGY)(n)?(0,Bt.D)(Promise.resolve(n)):Fe(n)}const Yl=!1,Kp={exact:function __(n,t,e){if(!ha(n.segments,t.segments)||!au(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!__(n.children[r],t.children[r],e))return!1;return!0},subset:y_},Xh={exact:function Td(n,t){return Io(n,t)},subset:function sl(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Jh(n[e],t[e]))},ignored:()=>!0};function li(n,t,e){return Kp[e.paths](n.root,t.root,e.matrixParams)&&Xh[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function y_(n,t,e){return Yp(n,t,t.segments,e)}function Yp(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!ha(i,e)||t.hasChildren()||!au(i,e,r))}if(n.segments.length===e.length){if(!ha(n.segments,e)||!au(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!y_(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!!(ha(n.segments,i)&&au(n.segments,i,r)&&n.children[St])&&Yp(n.children[St],t,o,r)}}function au(n,t,e){return t.every((r,i)=>Xh[e](n[i].parameters,r.parameters))}class da{constructor(t=new qt([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ou(this.queryParams)),this._queryParamMap}toString(){return Dd.serialize(this)}}class qt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Fr(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ef(this)}}class lu{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ou(this.parameters)),this._parameterMap}toString(){return nf(this)}}function ha(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}let Jl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return new Ed},providedIn:"root"}),n})();class Ed{parse(t){const e=new tg(t);return new da(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Sd(t.root,!0)}`,r=function a0(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${cu(e)}=${cu(i)}`).join("&"):`${cu(e)}=${cu(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${r}${"string"==typeof t.fragment?`#${function Qp(n){return encodeURI(n)}(t.fragment)}`:""}`}}const Dd=new Ed;function ef(n){return n.segments.map(t=>nf(t)).join("/")}function Sd(n,t){if(!n.hasChildren())return ef(n);if(t){const e=n.children[St]?Sd(n.children[St],!1):"",r=[];return Fr(n.children,(i,o)=>{o!==St&&r.push(`${o}:${Sd(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function Jp(n,t){let e=[];return Fr(n.children,(r,i)=>{i===St&&(e=e.concat(t(r,i)))}),Fr(n.children,(r,i)=>{i!==St&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===St?[Sd(n.children[St],!1)]:[`${i}:${Sd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[St]?`${ef(n)}/${e[0]}`:`${ef(n)}/(${e.join("//")})`}}function tf(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cu(n){return tf(n).replace(/%3B/gi,";")}function Ao(n){return tf(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function uu(n){return decodeURIComponent(n)}function Xp(n){return uu(n.replace(/\+/g,"%20"))}function nf(n){return`${Ao(n.path)}${function Id(n){return Object.keys(n).map(t=>`;${Ao(t)}=${Ao(n[t])}`).join("")}(n.parameters)}`}const l0=/^[^\/()?;=#]+/;function Ql(n){const t=n.match(l0);return t?t[0]:""}const c0=/^[^=?&#]+/,d0=/^[^&#]+/;class tg{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qt([],{}):new qt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[St]=new qt(t,e)),r}parseSegment(){const t=Ql(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new s.vHH(4009,Yl);return this.capture(t),new lu(uu(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Ql(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=Ql(this.remaining);i&&(r=i,this.capture(r))}t[uu(e)]=uu(r)}parseQueryParam(t){const e=function u0(n){const t=n.match(c0);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const c=function eg(n){const t=n.match(d0);return t?t[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Xp(e),o=Xp(r);if(t.hasOwnProperty(i)){let c=t[i];Array.isArray(c)||(c=[c],t[i]=c),c.push(o)}else t[i]=o}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ql(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new s.vHH(4010,Yl);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=St);const c=this.parseChildren();e[o]=1===Object.keys(c).length?c[St]:new qt([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new s.vHH(4011,Yl)}}function rf(n){return n.segments.length>0?new qt([],{[St]:n}):n}function du(n){const t={};for(const r of Object.keys(n.children)){const o=du(n.children[r]);(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function h0(n){if(1===n.numberOfChildren&&n.children[St]){const t=n.children[St];return new qt(n.segments.concat(t.segments),t.children)}return n}(new qt(n.segments,t))}function Xs(n){return n instanceof da}const sf=!1;function b_(n,t,e,r,i){if(0===e.length)return eo(t.root,t.root,t.root,r,i);const o=function rg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new lf(!0,0,n);let t=0,e=!1;const r=n.reduce((i,o,c)=>{if("object"==typeof o&&null!=o){if(o.outlets){const d={};return Fr(o.outlets,(f,y)=>{d[y]="string"==typeof f?f.split("/"):f}),[...i,{outlets:d}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===c?(o.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?e=!0:".."===d?t++:""!=d&&i.push(d))}),i):[...i,o]},[]);return new lf(e,t,r)}(e);return o.toRoot()?eo(t.root,t.root,new qt([],{}),r,i):function c(f){const y=function Ki(n,t,e,r){if(n.isAbsolute)return new fa(t.root,!0,0);if(-1===r)return new fa(e,e===t.root,0);return function pa(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new s.vHH(4005,sf&&"Invalid number of '../'");i=r.segments.length}return new fa(r,!1,i-o)}(e,r+(Ad(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,t,n.snapshot?._urlSegment,f),w=y.processChildren?No(y.segmentGroup,y.index,o.commands):cf(y.segmentGroup,y.index,o.commands);return eo(t.root,y.segmentGroup,w,r,i)}(n.snapshot?._lastPathIndex)}function Ad(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Nd(n){return"object"==typeof n&&null!=n&&n.outlets}function eo(n,t,e,r,i){let c,o={};r&&Fr(r,(f,y)=>{o[y]=Array.isArray(f)?f.map(w=>`${w}`):`${f}`}),c=n===t?e:af(n,t,e);const d=rf(du(c));return new da(d,o,i)}function af(n,t,e){const r={};return Fr(n.children,(i,o)=>{r[o]=i===t?e:af(i,t,e)}),new qt(n.segments,r)}class lf{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&Ad(r[0]))throw new s.vHH(4003,sf&&"Root segment cannot have matrix parameters");const i=r.find(Nd);if(i&&i!==Qh(r))throw new s.vHH(4004,sf&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fa{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function cf(n,t,e){if(n||(n=new qt([],{})),0===n.segments.length&&n.hasChildren())return No(n,t,e);const r=function kd(n,t,e){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;const c=n.segments[i],d=e[r];if(Nd(d))break;const f=`${d}`,y=r<e.length-1?e[r+1]:null;if(i>0&&void 0===f)break;if(f&&y&&"object"==typeof y&&void 0===y.outlets){if(!xo(f,y,c))return o;r+=2}else{if(!xo(f,{},c))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new qt(n.segments.slice(0,r.pathIndex),{});return o.children[St]=new qt(n.segments.slice(r.pathIndex),n.children),No(o,0,i)}return r.match&&0===i.length?new qt(n.segments,{}):r.match&&!n.hasChildren()?Rd(n,t,e):r.match?No(n,0,i):Rd(n,t,e)}function No(n,t,e){if(0===e.length)return new qt(n.segments,{});{const r=function xd(n){return Nd(n[0])?n[0].outlets:{[St]:n}}(e),i={};if(!r[St]&&n.children[St]&&1===n.numberOfChildren&&0===n.children[St].segments.length){const o=No(n.children[St],t,e);return new qt(n.segments,o.children)}return Fr(r,(o,c)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[c]=cf(n.children[c],t,o))}),Fr(n.children,(o,c)=>{void 0===r[c]&&(i[c]=o)}),new qt(n.segments,i)}}function Rd(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const o=e[i];if(Nd(o)){const f=hu(o.outlets);return new qt(r,f)}if(0===i&&Ad(e[0])){r.push(new lu(n.segments[t].path,w_(e[0]))),i++;continue}const c=Nd(o)?o.outlets[St]:`${o}`,d=i<e.length-1?e[i+1]:null;c&&d&&Ad(d)?(r.push(new lu(c,w_(d))),i+=2):(r.push(new lu(c,{})),i++)}return new qt(r,{})}function hu(n){const t={};return Fr(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=Rd(new qt([],{}),0,e))}),t}function w_(n){const t={};return Fr(n,(e,r)=>t[r]=`${e}`),t}function xo(n,t,e){return n==e.path&&Io(t,e.parameters)}const fu="imperative";class ko{constructor(t,e){this.id=t,this.url=e}}class sg extends ko{constructor(t,e,r="imperative",i=null){super(t,e),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class al extends ko{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pu extends ko{constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wr extends ko{constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i,this.type=16}}class Xl extends ko{constructor(t,e,r,i){super(t,e),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ll extends ko{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class f0 extends ko{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ga extends ko{constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class uf extends ko{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class C_ extends ko{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class df{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class p0{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hf{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ff{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class og{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class T_{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ag{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let _=(()=>{class n{createUrlTree(e,r,i,o,c,d){return b_(e||r.root,i,o,c,d)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),x=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(t){return _.\u0275fac(t)},providedIn:"root"}),n})();class P{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Y(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=Y(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=ue(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return ue(t,this._root).map(e=>e.value)}}function Y(n,t){if(n===t.value)return t;for(const e of t.children){const r=Y(n,e);if(r)return r}return null}function ue(n,t){if(n===t.value)return[t];for(const e of t.children){const r=ue(n,e);if(r.length)return r.unshift(t),r}return[]}class Ue{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function ot(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class At extends P{constructor(t,e){super(t),this.snapshot=e,pf(this,t)}toString(){return this.snapshot.toString()}}function Et(n,t){const e=function Lr(n,t){const c=new gu([],{},{},"",{},St,t,null,n.root,-1,{});return new cg("",new Ue(c,[]))}(n,t),r=new vr([new lu("",{})]),i=new vr({}),o=new vr({}),c=new vr({}),d=new vr(""),f=new bi(r,i,c,d,o,St,t,e.root);return f.snapshot=e.root,new At(new Ue(f,[]),e)}class bi{constructor(t,e,r,i,o,c,d,f){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=d,this.title=this.data?.pipe((0,S.U)(y=>y[wd]))??Fe(void 0),this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,S.U)(t=>ou(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,S.U)(t=>ou(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Od(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],o=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function lg(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(r))}class gu{get title(){return this.data?.[wd]}constructor(t,e,r,i,o,c,d,f,y,w,E){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=d,this.routeConfig=f,this._urlSegment=y,this._lastPathIndex=w,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ou(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ou(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cg extends P{constructor(t,e){super(e),this.url=t,pf(this,e)}toString(){return gf(this._root)}}function pf(n,t){t.value._routerState=n,t.children.forEach(e=>pf(n,e))}function gf(n){const t=n.children.length>0?` { ${n.children.map(gf).join(", ")} } `:"";return`${n.value}${t}`}function ec(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Io(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Io(t.params,e.params)||n.params.next(e.params),function Cd(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Io(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Io(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ks(n,t){const e=Io(n.params,t.params)&&function o0(n,t){return ha(n,t)&&n.every((e,r)=>Io(e.parameters,t[r].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||ks(n.parent,t.parent))}function nc(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function E_(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return nc(n,r,i);return nc(n,r)})}(n,t,e);return new Ue(r,i)}{if(n.shouldAttach(t.value)){const o=n.retrieve(t.value);if(null!==o){const c=o.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(d=>nc(n,d)),c}}const r=function mf(n){return new bi(new vr(n.url),new vr(n.params),new vr(n.queryParams),new vr(n.fragment),new vr(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(o=>nc(n,o));return new Ue(r,i)}}const D_="ngNavigationCancelingError";function SA(n,t){const{redirectTo:e,navigationBehaviorOptions:r}=Xs(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=IA(!1,0,t);return i.url=e,i.navigationBehaviorOptions=r,i}function IA(n,t,e){const r=new Error("NavigationCancelingError: "+(n||""));return r[D_]=!0,r.cancellationCode=t,e&&(r.url=e),r}function S_(n){return I_(n)&&Xs(n.url)}function I_(n){return n&&n[D_]}class kL{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new A_,this.attachRef=null}}let A_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new kL,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ug=!1;let N_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=St,this.activateEvents=new s.vpe,this.deactivateEvents=new s.vpe,this.attachEvents=new s.vpe,this.detachEvents=new s.vpe,this.parentContexts=(0,s.f3M)(A_),this.location=(0,s.f3M)(s.s_b),this.changeDetector=(0,s.f3M)(s.sBO),this.environmentInjector=(0,s.f3M)(s.lqb)}ngOnChanges(e){if(e.name){const{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new s.vHH(4012,ug);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new s.vHH(4012,ug);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new s.vHH(4012,ug);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new s.vHH(4013,ug);this._activatedRoute=e;const i=this.location,c=e.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,f=new AA(e,d,i.injector);if(r&&function NA(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(c);this.activated=i.createComponent(y,i.length,f)}else this.activated=i.createComponent(c,{index:i.length,injector:f,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[s.TTD]}),n})();class AA{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===bi?this.route:t===A_?this.childContexts:this.parent.get(t,e)}}let g0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[s.jDz],decls:1,vars:0,template:function(e,r){1&e&&s._UZ(0,"router-outlet")},dependencies:[N_],encapsulation:2}),n})();function m0(n,t){return n.providers&&!n._injector&&(n._injector=(0,s.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function x_(n){const t=n.children&&n.children.map(x_),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==St&&(e.component=g0),e}function Ro(n){return n.outlet||St}function S1(n,t){const e=n.filter(r=>Ro(r)===t);return e.push(...n.filter(r=>Ro(r)!==t)),e}function dg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class I1{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),ec(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=ot(e);t.children.forEach(o=>{const c=o.value.outlet;this.deactivateRoutes(o,i[c],r),delete i[c]}),Fr(i,(o,c)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){const i=t.value,o=e?e.value:null;if(i===o)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=ot(t);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);if(r&&r.outlet){const c=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=ot(t);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=ot(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new T_(o.value.snapshot))}),t.children.length&&this.forwardEvent(new ff(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,o=e?e.value:null;if(ec(i),i===o)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),ec(d.route.value),this.activateChildRoutes(t,null,c.children)}else{const d=dg(i.snapshot),f=d?.get(s._Vd)??null;c.attachRef=null,c.route=i,c.resolver=f,c.injector=d,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,r)}}class OA{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class y0{constructor(t,e){this.component=t,this.route=e}}function hg(n,t,e){const r=n._root;return _f(r,t?t._root:null,e,[r.value])}function Md(n,t){const e=Symbol(),r=t.get(n,e);return r===e?"function"!=typeof n||(0,s.Z0I)(n)?t.get(n):n:r}function _f(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=ot(t);return n.children.forEach(c=>{(function A1(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,c=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){const f=function MA(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!ha(n.url,t.url);case"pathParamsOrQueryParamsChange":return!ha(n.url,t.url)||!Io(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ks(n,t)||!Io(n.queryParams,t.queryParams);default:return!ks(n,t)}}(c,o,o.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new OA(r)):(o.data=c.data,o._resolvedData=c._resolvedData),_f(n,t,o.component?d?d.children:null:e,r,i),f&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new y0(d.outlet.component,c))}else c&&fg(t,d,i),i.canActivateChecks.push(new OA(r)),_f(n,null,o.component?d?d.children:null:e,r,i)})(c,o[c.value.outlet],e,r.concat([c.value]),i),delete o[c.value.outlet]}),Fr(o,(c,d)=>fg(c,e.getContext(d),i)),i}function fg(n,t,e){const r=ot(n),i=n.value;Fr(r,(o,c)=>{fg(o,i.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new y0(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function yf(n){return"function"==typeof n}function rc(n){return n instanceof rl||"EmptyError"===n?.name}const k_=Symbol("INITIAL_VALUE");function mu(){return Ln(n=>bt(n.map(t=>t.pipe(oi(1),la(k_)))).pipe((0,S.U)(t=>{for(const e of t)if(!0!==e){if(e===k_)return k_;if(!1===e||e instanceof da)return e}return!0}),Pr(t=>t!==k_),oi(1)))}function D0(n){return(0,aa.z)((0,ai.b)(t=>{if(Xs(t))throw SA(0,t)}),(0,S.U)(t=>!0===t))}const S0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function R1(n,t,e,r,i){const o=I0(n,t,e);return o.matched?function vf(n,t,e,r){const i=t.canMatch;return i&&0!==i.length?Fe(i.map(c=>{const d=Md(c,n);return cr(function C0(n){return n&&yf(n.canMatch)}(d)?d.canMatch(t,e):n.runInContext(()=>d(t,e)))})).pipe(mu(),D0()):Fe(!0)}(r=m0(t,r),t,e).pipe((0,S.U)(c=>!0===c?o:{...S0})):Fe(o)}function I0(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...S0}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const i=(t.matcher||g_)(e,n,t);if(!i)return{...S0};const o={};Fr(i.posParams,(d,f)=>{o[f]=d.path});const c=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function bf(n,t,e,r){if(e.length>0&&function jA(n,t,e){return e.some(r=>A0(n,t,r)&&Ro(r)!==St)}(n,e,r)){const o=new qt(t,function O1(n,t,e,r){const i={};i[St]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const o of e)if(""===o.path&&Ro(o)!==St){const c=new qt([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,i[Ro(o)]=c}return i}(n,t,r,new qt(e,n.children)));return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function M1(n,t,e){return e.some(r=>A0(n,t,r))}(n,e,r)){const o=new qt(n.segments,function VA(n,t,e,r,i){const o={};for(const c of r)if(A0(n,e,c)&&!i[Ro(c)]){const d=new qt([],{});d._sourceSegment=n,d._segmentIndexShift=t.length,o[Ro(c)]=d}return{...i,...o}}(n,t,e,r,n.children));return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const i=new qt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:e}}function A0(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function P1(n,t,e,r){return!!(Ro(n)===r||r!==St&&A0(t,e,n))&&("**"===n.path||I0(t,n,e).matched)}function wf(n,t,e){return 0===t.length&&!n.children[e]}const M_=!1;class ic{constructor(t){this.segmentGroup=t||null}}class Cf{constructor(t){this.urlTree=t}}function pg(n){return So(new ic(n))}function N0(n){return So(new Cf(n))}class F1{constructor(t,e,r,i,o){this.injector=t,this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const t=bf(this.urlTree.root,[],[],this.config).segmentGroup,e=new qt(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,St).pipe((0,S.U)(o=>this.createUrlTree(du(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Kl(o=>{if(o instanceof Cf)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof ic?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,St).pipe((0,S.U)(i=>this.createUrlTree(du(i),t.queryParams,t.fragment))).pipe(Kl(i=>{throw i instanceof ic?this.noMatchError(i):i}))}noMatchError(t){return new s.vHH(4002,M_)}createUrlTree(t,e,r){const i=rf(t);return new da(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe((0,S.U)(o=>new qt([],o))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,Bt.D)(i).pipe(Wl(o=>{const c=r.children[o],d=S1(e,o);return this.expandSegmentGroup(t,d,c,o).pipe((0,S.U)(f=>({segment:f,outlet:o})))}),ua((o,c)=>(o[c.outlet]=c.segment,o),{}),Wh())}expandSegment(t,e,r,i,o,c){return(0,Bt.D)(r).pipe(Wl(d=>this.expandSegmentAgainstRoute(t,e,r,d,i,o,c).pipe(Kl(y=>{if(y instanceof ic)return Fe(null);throw y}))),ca(d=>!!d),Kl((d,f)=>{if(rc(d))return wf(e,i,o)?Fe(new qt([],{})):pg(e);throw d}))}expandSegmentAgainstRoute(t,e,r,i,o,c,d){return P1(i,e,o,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,o,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c):pg(e):pg(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?N0(o):this.lineralizeSegments(r,o).pipe((0,Qn.z)(c=>{const d=new qt(c,{});return this.expandSegment(t,d,e,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c){const{matched:d,consumedSegments:f,remainingSegments:y,positionalParamSegments:w}=I0(e,i,o);if(!d)return pg(e);const E=this.applyRedirectCommands(f,i.redirectTo,w);return i.redirectTo.startsWith("/")?N0(E):this.lineralizeSegments(i,E).pipe((0,Qn.z)(A=>this.expandSegment(t,e,r,A.concat(y),c,!1)))}matchSegmentAgainstRoute(t,e,r,i,o){return"**"===r.path?(t=m0(r,t),r.loadChildren?(r._loadedRoutes?Fe({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe((0,S.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new qt(i,{})))):Fe(new qt(i,{}))):R1(e,r,i,t).pipe(Ln(({matched:c,consumedSegments:d,remainingSegments:f})=>c?this.getChildConfig(t=r._injector??t,r,i).pipe((0,Qn.z)(w=>{const E=w.injector??t,A=w.routes,{segmentGroup:k,slicedSegments:M}=bf(e,d,f,A),V=new qt(k.segments,k.children);if(0===M.length&&V.hasChildren())return this.expandChildren(E,A,V).pipe((0,S.U)(Ie=>new qt(d,Ie)));if(0===A.length&&0===M.length)return Fe(new qt(d,{}));const W=Ro(r)===o;return this.expandSegment(E,V,A,M,W?St:o,!0).pipe((0,S.U)(he=>new qt(d.concat(he.segments),he.children)))})):pg(e)))}getChildConfig(t,e,r){return e.children?Fe({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Fe({routes:e._loadedRoutes,injector:e._loadedInjector}):function BA(n,t,e,r){const i=t.canLoad;return void 0===i||0===i.length?Fe(!0):Fe(i.map(c=>{const d=Md(c,n);return cr(function b0(n){return n&&yf(n.canLoad)}(d)?d.canLoad(t,e):n.runInContext(()=>d(t,e)))})).pipe(mu(),D0())}(t,e,r).pipe((0,Qn.z)(i=>i?this.configLoader.loadChildren(t,e).pipe((0,ai.b)(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):function $A(n){return So(IA(M_,3))}())):Fe({routes:[],injector:t})}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Fe(r);if(i.numberOfChildren>1||!i.children[St])return t.redirectTo,So(new s.vHH(4e3,M_));i=i.children[St]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreateUrlTree(t,e,r,i){const o=this.createSegmentGroup(t,e.root,r,i);return new da(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Fr(t,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[o]=e[d]}else r[o]=i}),r}createSegmentGroup(t,e,r,i){const o=this.createSegments(t,e.segments,r,i);let c={};return Fr(e.children,(d,f)=>{c[f]=this.createSegmentGroup(t,d,r,i)}),new qt(o,c)}createSegments(t,e,r,i){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new s.vHH(4001,M_);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}class x0{}class gg{constructor(t,e,r,i,o,c,d){this.injector=t,this.rootComponentType=e,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=c,this.urlSerializer=d}recognize(){const t=bf(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,St).pipe((0,S.U)(e=>{if(null===e)return null;const r=new gu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},St,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ue(r,e),o=new cg(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(t){const e=t.value,r=Od(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,e,r):this.processSegment(t,e,r,r.segments,i)}processChildren(t,e,r){return(0,Bt.D)(Object.keys(r.children)).pipe(Wl(i=>{const o=r.children[i],c=S1(e,i);return this.processSegmentGroup(t,c,o,i)}),ua((i,o)=>i&&o?(i.push(...o),i):null),function p_(n,t=!1){return(0,In.e)((e,r)=>{let i=0;e.subscribe((0,ve.x)(r,o=>{const c=n(o,i++);(c||t)&&r.next(o),!c&&r.complete()}))})}(i=>null!==i),zp(null),Wh(),(0,S.U)(i=>{if(null===i)return null;const o=U1(i);return function qA(n){n.sort((t,e)=>t.value.outlet===St?-1:e.value.outlet===St?1:t.value.outlet.localeCompare(e.value.outlet))}(o),o}))}processSegment(t,e,r,i,o){return(0,Bt.D)(e).pipe(Wl(c=>this.processSegmentAgainstRoute(c._injector??t,c,r,i,o)),ca(c=>!!c),Kl(c=>{if(rc(c))return wf(r,i,o)?Fe([]):Fe(null);throw c}))}processSegmentAgainstRoute(t,e,r,i,o){if(e.redirectTo||!P1(e,r,i,o))return Fe(null);let c;if("**"===e.path){const d=i.length>0?Qh(i).parameters:{},f=V1(r)+i.length;c=Fe({snapshot:new gu(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,cl(e),Ro(e),e.component??e._loadedComponent??null,e,B1(r),f,j1(e)),consumedSegments:[],remainingSegments:[]})}else c=R1(r,e,i,t).pipe((0,S.U)(({matched:d,consumedSegments:f,remainingSegments:y,parameters:w})=>{if(!d)return null;const E=V1(r)+f.length;return{snapshot:new gu(f,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,cl(e),Ro(e),e.component??e._loadedComponent??null,e,B1(r),E,j1(e)),consumedSegments:f,remainingSegments:y}}));return c.pipe(Ln(d=>{if(null===d)return Fe(null);const{snapshot:f,consumedSegments:y,remainingSegments:w}=d;t=e._injector??t;const E=e._loadedInjector??t,A=function zA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:k,slicedSegments:M}=bf(r,y,w,A.filter(W=>void 0===W.redirectTo));if(0===M.length&&k.hasChildren())return this.processChildren(E,A,k).pipe((0,S.U)(W=>null===W?null:[new Ue(f,W)]));if(0===A.length&&0===M.length)return Fe([new Ue(f,[])]);const V=Ro(e)===o;return this.processSegment(E,A,k,M,V?St:o).pipe((0,S.U)(W=>null===W?null:[new Ue(f,W)]))}))}}function WA(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function U1(n){const t=[],e=new Set;for(const r of n){if(!WA(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=U1(r.children);t.push(new Ue(r.value,i))}return t.filter(r=>!e.has(r))}function B1(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function V1(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function cl(n){return n.data||{}}function j1(n){return n.resolve||{}}function R0(n){return"string"==typeof n.title||null===n.title}function O0(n){return Ln(t=>{const e=n(t);return e?(0,Bt.D)(e).pipe((0,S.U)(()=>t)):Fe(t)})}const Tf=new s.OlP("ROUTES");let P0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,s.f3M)(s.Sil)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Fe(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=cr(e.loadComponent()).pipe((0,S.U)(G1),(0,ai.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Yh(()=>{this.componentLoaders.delete(e)})),i=new qp(r,()=>new cn.x).pipe(zl());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Fe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,S.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let f,y,w=!1;Array.isArray(d)?y=d:(f=d.create(e).injector,y=m_(f.get(Tf,[],s.XFs.Self|s.XFs.Optional)));return{routes:y.map(x_),injector:f}}),Yh(()=>{this.childrenLoaders.delete(r)})),c=new qp(o,()=>new cn.x).pipe(zl());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(e){return cr(e()).pipe((0,S.U)(G1),(0,Qn.z)(r=>r instanceof s.YKP||Array.isArray(r)?Fe(r):(0,Bt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function G1(n){return function ma(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let F_=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new cn.x,this.configLoader=(0,s.f3M)(P0),this.environmentInjector=(0,s.f3M)(s.lqb),this.urlSerializer=(0,s.f3M)(Jl),this.rootContexts=(0,s.f3M)(A_),this.navigationId=0,this.afterPreactivation=()=>Fe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new p0(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new df(i))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:r})}setupNavigations(e){return this.transitions=new vr({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:fu,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Pr(r=>0!==r.id),(0,S.U)(r=>({...r,extractedUrl:e.urlHandlingStrategy.extract(r.rawUrl)})),Ln(r=>{let i=!1,o=!1;return Fe(r).pipe((0,ai.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ln(c=>{const d=e.browserUrlTree.toString(),f=!e.navigated||c.extractedUrl.toString()!==d||d!==e.currentUrlTree.toString();if(!f&&"reload"!==(c.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const w="";return this.events.next(new wr(c.id,e.serializeUrl(r.rawUrl),w,0)),e.rawUrlTree=c.rawUrl,c.resolve(null),lr.E}if(e.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Z1(c.source)&&(e.browserUrlTree=c.extractedUrl),Fe(c).pipe(Ln(w=>{const E=this.transitions?.getValue();return this.events.next(new sg(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),E!==this.transitions?.getValue()?lr.E:Promise.resolve(w)}),function L1(n,t,e,r){return Ln(i=>function GA(n,t,e,r,i){return new F1(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe((0,S.U)(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),(0,ai.b)(w=>{this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},r.urlAfterRedirects=w.urlAfterRedirects}),function YA(n,t,e,r,i){return(0,Qn.z)(o=>function k0(n,t,e,r,i,o,c="emptyOnly"){return new gg(n,t,e,r,i,c,o).recognize().pipe(Ln(d=>null===d?function ZA(n){return new bn.y(t=>t.error(n))}(new x0):Fe(d)))}(n,t,e,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe((0,S.U)(c=>({...o,targetSnapshot:c}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),(0,ai.b)(w=>{if(r.targetSnapshot=w.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!w.extras.skipLocationChange){const A=e.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);e.setBrowserUrl(A,w)}e.browserUrlTree=w.urlAfterRedirects}const E=new ll(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(E)}));if(f&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:w,extractedUrl:E,source:A,restoredState:k,extras:M}=c,V=new sg(w,this.urlSerializer.serialize(E),A,k);this.events.next(V);const W=Et(E,this.rootComponentType).snapshot;return Fe(r={...c,targetSnapshot:W,urlAfterRedirects:E,extras:{...M,skipLocationChange:!1,replaceUrl:!1}})}{const w="";return this.events.next(new wr(c.id,e.serializeUrl(r.extractedUrl),w,1)),e.rawUrlTree=c.rawUrl,c.resolve(null),lr.E}}),(0,ai.b)(c=>{const d=new f0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),(0,S.U)(c=>r={...c,guards:hg(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function R_(n,t){return(0,Qn.z)(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:c}}=e;return 0===c.length&&0===o.length?Fe({...e,guardsResult:!0}):function LA(n,t,e,r){return(0,Bt.D)(n).pipe((0,Qn.z)(i=>function UA(n,t,e,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Fe(o.map(d=>{const f=dg(t)??i,y=Md(d,f);return cr(function PA(n){return n&&yf(n.canDeactivate)}(y)?y.canDeactivate(n,t,e,r):f.runInContext(()=>y(n,t,e,r))).pipe(ca())})).pipe(mu()):Fe(!0)}(i.component,i.route,e,t,r)),ca(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Qn.z)(d=>d&&function N1(n){return"boolean"==typeof n}(d)?function T0(n,t,e,r){return(0,Bt.D)(t).pipe(Wl(i=>br(function Pd(n,t){return null!==n&&t&&t(new hf(n)),Fe(!0)}(i.route.parent,r),function O_(n,t){return null!==n&&t&&t(new og(n)),Fe(!0)}(i.route,r),function E0(n,t,e){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(c=>function v0(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>il(()=>Fe(c.guards.map(f=>{const y=dg(c.node)??e,w=Md(f,y);return cr(function w0(n){return n&&yf(n.canActivateChild)}(w)?w.canActivateChild(r,n):y.runInContext(()=>w(r,n))).pipe(ca())})).pipe(mu())));return Fe(o).pipe(mu())}(n,i.path,e),function k1(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Fe(!0);const i=r.map(o=>il(()=>{const c=dg(t)??e,d=Md(o,c);return cr(function OL(n){return n&&yf(n.canActivate)}(d)?d.canActivate(t,n):c.runInContext(()=>d(t,n))).pipe(ca())}));return Fe(i).pipe(mu())}(n,i.route,e))),ca(i=>!0!==i,!0))}(r,o,n,t):Fe(d)),(0,S.U)(d=>({...e,guardsResult:d})))})}(this.environmentInjector,c=>this.events.next(c)),(0,ai.b)(c=>{if(r.guardsResult=c.guardsResult,Xs(c.guardsResult))throw SA(0,c.guardsResult);const d=new ga(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),Pr(c=>!!c.guardsResult||(e.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),O0(c=>{if(c.guards.canActivateChecks.length)return Fe(c).pipe((0,ai.b)(d=>{const f=new uf(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Ln(d=>{let f=!1;return Fe(d).pipe(function ML(n,t){return(0,Qn.z)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return Fe(e);let o=0;return(0,Bt.D)(i).pipe(Wl(c=>function PL(n,t,e,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!R0(i)&&(o[wd]=i.title),function H1(n,t,e,r){const i=function FL(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Fe({});const o={};return(0,Bt.D)(i).pipe((0,Qn.z)(c=>function $1(n,t,e,r){const i=dg(t)??r,o=Md(n,i);return cr(o.resolve?o.resolve(t,e):i.runInContext(()=>o(t,e)))}(n[c],t,e,r).pipe(ca(),(0,ai.b)(d=>{o[c]=d}))),zh(1),Kh(o),Kl(c=>rc(c)?lr.E:So(c)))}(o,n,t,r).pipe((0,S.U)(c=>(n._resolvedData=c,n.data=Od(n,e).resolve,i&&R0(i)&&(n.data[wd]=i.title),null)))}(c.route,r,n,t)),(0,ai.b)(()=>o++),zh(1),(0,Qn.z)(c=>o===i.length?Fe(e):lr.E))})}(e.paramsInheritanceStrategy,this.environmentInjector),(0,ai.b)({next:()=>f=!0,complete:()=>{f||(e.restoreHistory(d),this.cancelNavigationTransition(d,"",2))}}))}),(0,ai.b)(d=>{const f=new C_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),O0(c=>{const d=f=>{const y=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(f.routeConfig).pipe((0,ai.b)(w=>{f.component=w}),(0,S.U)(()=>{})));for(const w of f.children)y.push(...d(w));return y};return bt(d(c.targetSnapshot.root)).pipe(zp(),oi(1))}),O0(()=>this.afterPreactivation()),(0,S.U)(c=>{const d=function tc(n,t,e){const r=nc(n,t._root,e?e._root:void 0);return new At(r,t)}(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:d}}),(0,ai.b)(c=>{e.currentUrlTree=c.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),e.routerState=c.targetRouterState,"deferred"===e.urlUpdateStrategy&&(c.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,c),e.browserUrlTree=c.urlAfterRedirects)}),((n,t,e)=>(0,S.U)(r=>(new I1(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c)),oi(1),(0,ai.b)({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new al(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),Yh(()=>{i||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Kl(c=>{if(o=!0,I_(c)){S_(c)||(e.navigated=!0,e.restoreHistory(r,!0));const d=new pu(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(d),S_(c)){const f=e.urlHandlingStrategy.merge(c.url,e.rawUrlTree),y={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||Z1(r.source)};e.scheduleNavigation(f,fu,null,y,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{e.restoreHistory(r,!0);const d=new Xl(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(d);try{r.resolve(e.errorHandler(c))}catch(f){r.reject(f)}}return lr.E}))}))}cancelNavigationTransition(e,r,i){const o=new pu(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Z1(n){return n!==fu}let q1=(()=>{class n{buildTitle(e){let r,i=e.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===St);return r}getResolvedTitleForRoute(e){return e.data[wd]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return(0,s.f3M)(JA)},providedIn:"root"}),n})(),JA=(()=>{class n extends q1{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Vp))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),z1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return(0,s.f3M)(XA)},providedIn:"root"}),n})();class QA{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let XA=(()=>{class n extends QA{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jt=new s.OlP("",{providedIn:"root",factory:()=>({})});let W1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return(0,s.f3M)(K1)},providedIn:"root"}),n})(),K1=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tN(n){throw n}function nN(n,t,e){return t.parse("/")}const Y1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Cr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,s.f3M)(s.c2e),this.isNgZoneEnabled=!1,this.options=(0,s.f3M)(jt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||tN,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||nN,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,s.f3M)(W1),this.routeReuseStrategy=(0,s.f3M)(z1),this.urlCreationStrategy=(0,s.f3M)(x),this.titleStrategy=(0,s.f3M)(q1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=m_((0,s.f3M)(Tf,{optional:!0})??[]),this.navigationTransitions=(0,s.f3M)(F_),this.urlSerializer=(0,s.f3M)(Jl),this.location=(0,s.f3M)($e),this.isNgZoneEnabled=(0,s.f3M)(s.R0b)instanceof s.R0b&&s.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new da,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Et(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),fu,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,r,e.state)},0)}))}navigateToSyncWithBrowser(e,r,i){const o={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const f={...i};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(o.state=f)}const d=this.parseUrl(e);this.scheduleNavigation(d,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(x_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:o,fragment:c,queryParamsHandling:d,preserveFragment:f}=r,y=f?this.currentUrlTree.fragment:c;let w=null;switch(d){case"merge":w={...this.currentUrlTree.queryParams,...o};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=o||null}return null!==w&&(w=this.removeEmptyProps(w)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,e,w,y??null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=Xs(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,fu,null,r)}navigate(e,r={skipLocationChange:!1}){return function iN(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new s.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?{...Y1}:!1===r?{...rN}:r,Xs(e))return li(this.currentUrlTree,e,i);const o=this.parseUrl(e);return li(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const o=e[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(e,r,i,o,c){if(this.disposed)return Promise.resolve(!1);let d,f,y,w;return c?(d=c.resolve,f=c.reject,y=c.promise):y=new Promise((E,A)=>{d=E,f=A}),w="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:w,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:d,reject:f,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(E=>Promise.reject(E))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",o)}}restoreHistory(e,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class L0{}let U0=(()=>{class n{constructor(e,r,i,o,c){this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Pr(e=>e instanceof al),Wl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,s.MMx)(o.providers,e,`Route: ${o.path}`));const c=o._injector??e,d=o._loadedInjector??c;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(c,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(d,o.children??o._loadedRoutes))}return(0,Bt.D)(i).pipe((0,wt.J)())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):Fe(null);const o=i.pipe((0,Qn.z)(c=>null===c?Fe(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Bt.D)([o,c]).pipe((0,wt.J)())}return o})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Cr),s.LFG(s.Sil),s.LFG(s.lqb),s.LFG(L0),s.LFG(P0))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yg=new s.OlP("");let Q1=(()=>{class n{constructor(e,r,i,o,c={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof sg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof al&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof ag&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ag(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(e){s.$Z()},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();var Oo=(()=>((Oo=Oo||{})[Oo.COMPLETE=0]="COMPLETE",Oo[Oo.FAILED=1]="FAILED",Oo[Oo.REDIRECTING=2]="REDIRECTING",Oo))();const vg=!1;function Fd(n,t){return{\u0275kind:n,\u0275providers:t}}const V0=new s.OlP("",{providedIn:"root",factory:()=>!1});function bg(){const n=(0,s.f3M)(s.zs3);return t=>{const e=n.get(s.z2F);if(t!==e.components[0])return;const r=n.get(Cr),i=n.get(X1);1===n.get(U_)&&r.initialNavigation(),n.get(eT,null,s.XFs.Optional)?.setUpPreloading(),n.get(yg,null,s.XFs.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const X1=new s.OlP(vg?"bootstrap done indicator":"",{factory:()=>new cn.x}),U_=new s.OlP(vg?"initial navigation":"",{providedIn:"root",factory:()=>1});function lN(){let n=[];return n=vg?[{provide:s.Xts,multi:!0,useFactory:()=>{const t=(0,s.f3M)(Cr);return()=>t.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function v(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],Fd(1,n)}const eT=new s.OlP(vg?"router preloader":"");function cN(n){return Fd(0,[{provide:eT,useExisting:U0},{provide:L0,useExisting:n}])}const Sf=!1,hN=new s.OlP(Sf?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),j0=[$e,{provide:Jl,useClass:Ed},Cr,A_,{provide:bi,useFactory:function B0(n){return n.routerState.root},deps:[Cr]},P0,Sf?{provide:V0,useValue:!0}:[]];function fN(){return new s.PXZ("Router",Cr)}let nT=(()=>{class n{constructor(e){}static forRoot(e,r){return{ngModule:n,providers:[j0,Sf&&r?.enableTracing?lN().\u0275providers:[],{provide:Tf,multi:!0,useValue:e},{provide:hN,useFactory:iT,deps:[[Cr,new s.FiY,new s.tp0]]},{provide:jt,useValue:r||{}},r?.useHash?{provide:ut,useClass:Re}:{provide:ut,useClass:Oe},{provide:yg,useFactory:()=>{const n=(0,s.f3M)(ja),t=(0,s.f3M)(s.R0b),e=(0,s.f3M)(jt),r=(0,s.f3M)(F_),i=(0,s.f3M)(Jl);return e.scrollOffset&&n.setOffset(e.scrollOffset),new Q1(i,r,n,t,e)}},r?.preloadingStrategy?cN(r.preloadingStrategy).\u0275providers:[],{provide:s.PXZ,multi:!0,useFactory:fN},r?.initialNavigation?gN(r):[],[{provide:sT,useFactory:bg},{provide:s.tb,multi:!0,useExisting:sT}]]}}static forChild(e){return{ngModule:n,providers:[{provide:Tf,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(hN,8))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[g0]}),n})();function iT(n){if(Sf&&n)throw new s.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function gN(n){return["disabled"===n.initialNavigation?Fd(3,[{provide:s.ip1,multi:!0,useFactory:()=>{const t=(0,s.f3M)(Cr);return()=>{t.setUpLocationChangeListener()}}},{provide:U_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Fd(2,[{provide:U_,useValue:0},{provide:s.ip1,multi:!0,deps:[s.zs3],useFactory:t=>{const e=t.get(_e,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const i=t.get(Cr),o=t.get(X1);(function BL(n,t){n.events.pipe(Pr(e=>e instanceof al||e instanceof pu||e instanceof Xl||e instanceof wr),(0,S.U)(e=>e instanceof al||e instanceof wr?Oo.COMPLETE:e instanceof pu&&(0===e.code||1===e.code)?Oo.REDIRECTING:Oo.FAILED),Pr(e=>e!==Oo.REDIRECTING),oi(1)).subscribe(()=>{t()})})(i,()=>{r(!0)}),t.get(F_).afterPreactivation=()=>(r(!0),o.closed?Fe(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const sT=new s.OlP(Sf?"Router Initializer":"");class V_{}class Cg{}const _a="*";function j_(n,t){return{type:7,name:n,definitions:t,options:{}}}function H0(n,t=null){return{type:4,styles:t,timings:n}}function H_(n,t=null){return{type:2,steps:n,options:t}}function Ld(n){return{type:6,styles:n,offset:null}}function $_(n,t,e){return{type:0,name:n,styles:t,options:e}}function lT(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function cT(n){Promise.resolve().then(n)}class Tg{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){cT(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class Rs{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,r=0,i=0;const o=this.players.length;0==o?cT(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==o&&this._onFinish()}),c.onDestroy(()=>{++r==o&&this._onDestroy()}),c.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){const t=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}const $0="!";function vN(n){return new s.vHH(3e3,!1)}function sc(){return typeof window<"u"&&typeof window.document<"u"}function Af(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ya(n){switch(n.length){case 0:return new Tg;case 1:return n[0];default:return new Rs(n)}}function Nf(n,t,e,r,i=new Map,o=new Map){const c=[],d=[];let f=-1,y=null;if(r.forEach(w=>{const E=w.get("offset"),A=E==f,k=A&&y||new Map;w.forEach((M,V)=>{let W=V,ne=M;if("offset"!==V)switch(W=t.normalizePropertyName(W,c),ne){case $0:ne=i.get(V);break;case _a:ne=o.get(V);break;default:ne=t.normalizeStyleValue(V,W,ne,c)}k.set(W,ne)}),A||d.push(k),y=k,f=E}),c.length)throw function MN(n){return new s.vHH(3502,!1)}();return d}function Y0(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&z_(e,"start",n)));break;case"done":n.onDone(()=>r(e&&z_(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&z_(e,"destroy",n)))}}function z_(n,t,e){const o=W_(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),c=n._data;return null!=c&&(o._data=c),o}function W_(n,t,e,r,i="",o=0,c){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:o,disabled:!!c}}function to(n,t,e){let r=n.get(t);return r||n.set(t,r=e),r}function mT(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let Ud=(n,t)=>!1,_T=(n,t,e)=>[],LN=null;function J0(n){const t=n.parentNode||n.host;return t===LN?null:t}(Af()||typeof Element<"u")&&(sc()?(LN=(()=>document.documentElement)(),Ud=(n,t)=>{for(;t;){if(t===n)return!0;t=J0(t)}return!1}):Ud=(n,t)=>n.contains(t),_T=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const r=n.querySelector(t);return r?[r]:[]});let Bd=null,yT=!1;const K_=Ud,bT=_T;let CT=(()=>{class n{validateStyleProperty(e){return function BN(n){Bd||(Bd=function vT(){return typeof document<"u"?document.body:null}()||{},yT=!!Bd.style&&"WebkitAppearance"in Bd.style);let t=!0;return Bd.style&&!function UN(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Bd.style,!t&&yT&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Bd.style)),t}(e)}matchesElement(e,r){return!1}containsElement(e,r){return K_(e,r)}getParentElement(e){return J0(e)}query(e,r,i){return bT(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,o,c,d=[],f){return new Tg(i,o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Q0=(()=>{class n{}return n.NOOP=new CT,n})();const VN=1e3,X0="ng-enter",Y_="ng-leave",Eg="ng-trigger",Dg=".ng-trigger",ET="ng-animating",DT=".ng-animating";function dl(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:ST(parseFloat(t[1]),t[2])}function ST(n,t){return"s"===t?n*VN:n}function Vd(n,t,e){return n.hasOwnProperty("duration")?n:function HN(n,t,e){let i,o=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(vN()),{duration:0,delay:0,easing:""};i=ST(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(o=ST(parseFloat(f),d[4]));const y=d[5];y&&(c=y)}else i=n;if(!e){let d=!1,f=t.length;i<0&&(t.push(function G0(){return new s.vHH(3100,!1)}()),d=!0),o<0&&(t.push(function uT(){return new s.vHH(3101,!1)}()),d=!0),d&&t.splice(f,0,vN())}return{duration:i,delay:o,easing:c}}(n,t,e)}function Sg(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function J_(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function Mo(n,t=new Map,e){if(e)for(let[r,i]of e)t.set(r,i);for(let[r,i]of n)t.set(r,i);return t}function Mi(n,t,e){return e?t+":"+e+";":""}function _u(n){let t="";for(let e=0;e<n.style.length;e++){const r=n.style.item(e);t+=Mi(0,r,n.style.getPropertyValue(r))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=Mi(0,Rf(e),n.style[e]));n.setAttribute("style",t)}function no(n,t,e){n.style&&(t.forEach((r,i)=>{const o=vu(i);e&&!e.has(i)&&e.set(i,n.style[o]),n.style[o]=r}),Af()&&_u(n))}function wi(n,t){n.style&&(t.forEach((e,r)=>{const i=vu(r);n.style[i]=""}),Af()&&_u(n))}function jd(n){return Array.isArray(n)?1==n.length?n[0]:H_(n):n}const yu=new RegExp("{{\\s*(.+?)\\s*}}","g");function Hd(n){let t=[];if("string"==typeof n){let e;for(;e=yu.exec(n);)t.push(e[1]);yu.lastIndex=0}return t}function hl(n,t,e){const r=n.toString(),i=r.replace(yu,(o,c)=>{let d=t[c];return null==d&&(e.push(function wN(n){return new s.vHH(3003,!1)}()),d=""),d.toString()});return i==r?n:i}function oc(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const kf=/-+([a-z0-9])/g;function vu(n){return n.replace(kf,(...t)=>t[1].toUpperCase())}function Rf(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Os(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function CN(n){return new s.vHH(3004,!1)}()}}function eb(n,t){return window.getComputedStyle(n)[t]}const Q_="*";function kT(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function ZN(n,t,e){if(":"==n[0]){const f=function RT(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(function kN(n){return new s.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof f)return void t.push(f);n=f}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(function hT(n){return new s.vHH(3015,!1)}()),t;const i=r[1],o=r[2],c=r[3];t.push(OT(i,c));"<"==o[0]&&!(i==Q_&&c==Q_)&&t.push(OT(c,i))}(r,e,t)):e.push(n),e}const Mf=new Set(["true","1"]),Pf=new Set(["false","0"]);function OT(n,t){const e=Mf.has(n)||Pf.has(n),r=Mf.has(t)||Pf.has(t);return(i,o)=>{let c=n==Q_||n==i,d=t==Q_||t==o;return!c&&e&&"boolean"==typeof i&&(c=i?Mf.has(n):Pf.has(n)),!d&&r&&"boolean"==typeof o&&(d=o?Mf.has(t):Pf.has(t)),c&&d}}const X_=new RegExp("s*:selfs*,?","g");function xg(n,t,e,r){return new ey(n).build(t,e,r)}class ey{constructor(t){this._driver=t}build(t,e,r){const i=new FT(e);return this._resetContextStyleTimingState(i),Os(this,jd(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0;const o=[],c=[];return"@"==t.name.charAt(0)&&e.errors.push(function TN(){return new s.vHH(3006,!1)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const f=d,y=f.name;y.toString().split(/\s*,\s*/).forEach(w=>{f.name=w,o.push(this.visitState(f,e))}),f.name=y}else if(1==d.type){const f=this.visitTransition(d,e);r+=f.queryCount,i+=f.depCount,c.push(f)}else e.errors.push(function EN(){return new s.vHH(3007,!1)}())}),{type:7,name:t.name,states:o,transitions:c,queryCount:r,depCount:i,options:null}}visitState(t,e){const r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){const o=new Set,c=i||{};r.styles.forEach(d=>{d instanceof Map&&d.forEach(f=>{Hd(f).forEach(y=>{c.hasOwnProperty(y)||o.add(y)})})}),o.size&&(oc(o.values()),e.errors.push(function Z0(n,t){return new s.vHH(3008,!1)}()))}return{type:0,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const r=Os(this,jd(t.animation),e);return{type:1,matchers:kT(t.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:bu(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(r=>Os(this,r,e)),options:bu(t.options)}}visitGroup(t,e){const r=e.currentTime;let i=0;const o=t.steps.map(c=>{e.currentTime=r;const d=Os(this,c,e);return i=Math.max(i,e.currentTime),d});return e.currentTime=i,{type:3,steps:o,options:bu(t.options)}}visitAnimate(t,e){const r=function LT(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return kg(Vd(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=kg(0,0,"");return o.dynamic=!0,o.strValue=e,o}const i=Vd(e,t);return kg(i.duration,i.delay,i.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;let i,o=t.styles?t.styles:Ld({});if(5==o.type)i=this.visitKeyframes(o,e);else{let c=t.styles,d=!1;if(!c){d=!0;const y={};r.easing&&(y.easing=r.easing),c=Ld(y)}e.currentTime+=r.duration+r.delay;const f=this.visitStyle(c,e);f.isEmptyStep=d,i=f}return e.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(t,e){const r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){const r=[],i=Array.isArray(t.styles)?t.styles:[t.styles];for(let d of i)"string"==typeof d?d===_a?r.push(d):e.errors.push(new s.vHH(3002,!1)):r.push(J_(d));let o=!1,c=null;return r.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(c=d.get("easing"),d.delete("easing")),!o))for(let f of d.values())if(f.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:c,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){const r=e.currentAnimateTimings;let i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(c=>{"string"!=typeof c&&c.forEach((d,f)=>{const y=e.collectedStyles.get(e.currentQuerySelector),w=y.get(f);let E=!0;w&&(o!=i&&o>=w.startTime&&i<=w.endTime&&(e.errors.push(function SN(n,t,e,r,i){return new s.vHH(3010,!1)}()),E=!1),o=w.startTime),E&&y.set(f,{startTime:o,endTime:i}),e.options&&function xf(n,t,e){const r=t.params||{},i=Hd(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||e.push(function bN(n){return new s.vHH(3001,!1)}())})}(d,e.options,e.errors)})})}visitKeyframes(t,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function IN(){return new s.vHH(3011,!1)}()),r;let o=0;const c=[];let d=!1,f=!1,y=0;const w=t.steps.map(ne=>{const he=this._makeStyleAst(ne,e);let Ie=null!=he.offset?he.offset:function tb(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const r=e;t=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(he.styles),me=0;return null!=Ie&&(o++,me=he.offset=Ie),f=f||me<0||me>1,d=d||me<y,y=me,c.push(me),he});f&&e.errors.push(function AN(){return new s.vHH(3012,!1)}()),d&&e.errors.push(function ul(){return new s.vHH(3200,!1)}());const E=t.steps.length;let A=0;o>0&&o<E?e.errors.push(function q0(){return new s.vHH(3202,!1)}()):0==o&&(A=1/(E-1));const k=E-1,M=e.currentTime,V=e.currentAnimateTimings,W=V.duration;return w.forEach((ne,he)=>{const Ie=A>0?he==k?1:A*he:c[he],me=Ie*W;e.currentTime=M+V.delay+me,V.duration=me,this._validateStyleAst(ne,e),ne.offset=Ie,r.styles.push(ne)}),r}visitReference(t,e){return{type:8,animation:Os(this,jd(t.animation),e),options:bu(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:bu(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:bu(t.options)}}visitQuery(t,e){const r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[o,c]=function ty(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(X_,"")),n=n.replace(/@\*/g,Dg).replace(/@\w+/g,e=>Dg+"-"+e.slice(1)).replace(/:animating/g,DT),[n,t]}(t.selector);e.currentQuerySelector=r.length?r+" "+o:o,to(e.collectedStyles,e.currentQuerySelector,new Map);const d=Os(this,jd(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:d,originalSelector:t.selector,options:bu(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function NN(){return new s.vHH(3013,!1)}());const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:Vd(t.timings,e.errors,!0);return{type:12,animation:Os(this,jd(t.animation),e),timings:r,options:null}}}class FT{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function bu(n){return n?(n=Sg(n)).params&&(n.params=function PT(n){return n?Sg(n):null}(n.params)):n={},n}function kg(n,t,e){return{duration:n,delay:t,easing:e}}function ny(n,t,e,r,i,o,c=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:c,subTimeline:d}}class ry{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const VT=new RegExp(":enter","g"),qN=new RegExp(":leave","g");function iy(n,t,e,r,i,o=new Map,c=new Map,d,f,y=[]){return(new HT).buildKeyframes(n,t,e,r,i,o,c,d,f,y)}class HT{buildKeyframes(t,e,r,i,o,c,d,f,y,w=[]){y=y||new ry;const E=new Lf(t,e,y,i,o,w,[]);E.options=f;const A=f.delay?dl(f.delay):0;E.currentTimeline.delayNextStep(A),E.currentTimeline.setStyles([c],null,E.errors,f),Os(this,r,E);const k=E.timelines.filter(M=>M.containsAnimation());if(k.length&&d.size){let M;for(let V=k.length-1;V>=0;V--){const W=k[V];if(W.element===e){M=W;break}}M&&!M.allowOnlyTimelineStyles()&&M.setStyles([d],null,E.errors,f)}return k.length?k.map(M=>M.buildKeyframes()):[ny(e,[],[],[],0,A,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const r=e.subInstructions.get(e.element);if(r){const i=e.createSubContext(t.options),o=e.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);o!=c&&e.transformIntoNewTimeline(c)}e.previousNode=t}visitAnimateRef(t,e){const r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,r),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,r){for(const i of t){const o=i?.delay;if(o){const c="number"==typeof o?o:dl(hl(o,i?.params??{},e.errors));r.delayNextStep(c)}}}_visitSubInstructions(t,e,r){let o=e.currentTimeline.currentTime;const c=null!=r.duration?dl(r.duration):null,d=null!=r.delay?dl(r.delay):null;return 0!==c&&t.forEach(f=>{const y=e.appendInstructionToTimeline(f,c,d);o=Math.max(o,y.duration+y.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),Os(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const r=e.subContextCount;let i=e;const o=t.options;if(o&&(o.params||o.delay)&&(i=e.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Ff);const c=dl(o.delay);i.delayNextStep(c)}t.steps.length&&(t.steps.forEach(c=>Os(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const r=[];let i=e.currentTimeline.currentTime;const o=t.options&&t.options.delay?dl(t.options.delay):0;t.steps.forEach(c=>{const d=e.createSubContext(t.options);o&&d.delayNextStep(o),Os(this,c,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const r=t.strValue;return Vd(e.params?hl(r,e.params,e.errors):r,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(r.duration),this.visitStyle(o,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(o):r.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const r=e.currentAnimateTimings,i=e.currentTimeline.duration,o=r.duration,d=e.createSubContext().currentTimeline;d.easing=r.easing,t.styles.forEach(f=>{d.forwardTime((f.offset||0)*o),d.setStyles(f.styles,f.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(i+o),e.previousNode=t}visitQuery(t,e){const r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?dl(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Ff);let c=r;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=d.length;let f=null;d.forEach((y,w)=>{e.currentQueryIndex=w;const E=e.createSubContext(t.options,y);o&&E.delayNextStep(o),y===e.element&&(f=E.currentTimeline),Os(this,t.animation,E),E.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,E.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),f&&(e.currentTimeline.mergeTimelineCollectedStyles(f),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const r=e.parentContext,i=e.currentTimeline,o=t.timings,c=Math.abs(o.duration),d=c*(e.currentQueryTotal-1);let f=c*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":f=d-f;break;case"full":f=r.currentStaggerTime}const w=e.currentTimeline;f&&w.delayNextStep(f);const E=w.currentTime;Os(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-E+(i.startTime-r.currentTimeline.startTime)}}const Ff={};class Lf{constructor(t,e,r,i,o,c,d,f){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ff,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new Rg(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const r=t;let i=this.options;null!=r.duration&&(i.duration=dl(r.duration)),null!=r.delay&&(i.delay=dl(r.delay));const o=r.params;if(o){let c=i.params;c||(c=this.options.params={}),Object.keys(o).forEach(d=>{(!e||!c.hasOwnProperty(d))&&(c[d]=hl(o[d],c,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){const i=e||this.element,o=new Lf(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=Ff,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){const i={duration:e??t.duration,delay:this.currentTimeline.currentTime+(r??0)+t.delay,easing:""},o=new $T(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,o,c){let d=[];if(i&&d.push(this.element),t.length>0){t=(t=t.replace(VT,"."+this._enterClassName)).replace(qN,"."+this._leaveClassName);let y=this._driver.query(this.element,t,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!o&&0==d.length&&c.push(function xN(n){return new s.vHH(3014,!1)}()),d}}class Rg{constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Rg(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||_a),this._currentKeyframe.set(e,_a);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){e&&this._previousKeyframe.set("easing",e);const o=i&&i.params||{},c=function GT(n,t){const e=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||t.keys();for(let o of r)e.set(o,_a)}else Mo(i,e)}),e}(t,this._globalTimelineStyles);for(let[d,f]of c){const y=hl(f,o,r);this._pendingStyles.set(d,y),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??_a),this._updateStyle(d,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,r)=>{const i=this._styleSummary.get(r);(!i||e.time>i.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,f)=>{const y=Mo(d,new Map,this._backFill);y.forEach((w,E)=>{w===$0?t.add(E):w===_a&&e.add(E)}),r||y.set("offset",f/this.duration),i.push(y)});const o=t.size?oc(t.values()):[],c=e.size?oc(e.values()):[];if(r){const d=i[0],f=new Map(d);d.set("offset",0),f.set("offset",1),i=[d,f]}return ny(this.element,i,o,c,this.duration,this.startTime,this.easing,!1)}}class $T extends Rg{constructor(t,e,r,i,o,c,d=!1){super(t,e,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],c=r+e,d=e/c,f=Mo(t[0]);f.set("offset",0),o.push(f);const y=Mo(t[0]);y.set("offset",nb(d)),o.push(y);const w=t.length-1;for(let E=1;E<=w;E++){let A=Mo(t[E]);const k=A.get("offset");A.set("offset",nb((e+k*r)/c)),o.push(A)}r=c,e=0,i="",t=o}return ny(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}}function nb(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class sy{}const ZT=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class oy extends sy{normalizePropertyName(t,e){return vu(t)}normalizeStyleValue(t,e,r,i){let o="";const c=r.toString().trim();if(ZT.has(e)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function dT(n,t){return new s.vHH(3005,!1)}())}return c+o}}function ac(n,t,e,r,i,o,c,d,f,y,w,E,A){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:o,toState:r,toStyles:c,timelines:d,queriedElements:f,preStyleProps:y,postStyleProps:w,totalTime:E,errors:A}}const rb={};class qT{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return function $d(n,t,e,r,i){return n.some(o=>o(t,e,r,i))}(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){let i=this._stateStyles.get("*");return void 0!==t&&(i=this._stateStyles.get(t?.toString())||i),i?i.buildStyles(e,r):new Map}build(t,e,r,i,o,c,d,f,y,w){const E=[],A=this.ast.options&&this.ast.options.params||rb,M=this.buildStyles(r,d&&d.params||rb,E),V=f&&f.params||rb,W=this.buildStyles(i,V,E),ne=new Set,he=new Map,Ie=new Map,me="void"===i,Pe={params:ib(V,A),delay:this.ast.options?.delay},je=w?[]:iy(t,e,this.ast.animation,o,c,M,W,Pe,y,E);let ct=0;if(je.forEach(Cn=>{ct=Math.max(Cn.duration+Cn.delay,ct)}),E.length)return ac(e,this._triggerName,r,i,me,M,W,[],[],he,Ie,ct,E);je.forEach(Cn=>{const Un=Cn.element,ji=to(he,Un,new Set);Cn.preStyleProps.forEach(jr=>ji.add(jr));const ws=to(Ie,Un,new Set);Cn.postStyleProps.forEach(jr=>ws.add(jr)),Un!==e&&ne.add(Un)});const Lt=oc(ne.values());return ac(e,this._triggerName,r,i,me,M,W,je,Lt,he,Ie,ct)}}function ib(n,t){const e=Sg(t);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(e[r]=n[r]);return e}class KN{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){const r=new Map,i=Sg(this.defaultParams);return Object.keys(t).forEach(o=>{const c=t[o];null!==c&&(i[o]=c)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((c,d)=>{c&&(c=hl(c,i,e));const f=this.normalizer.normalizePropertyName(d,e);c=this.normalizer.normalizeStyleValue(d,f,c,e),r.set(d,c)})}),r}}class QL{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states=new Map,e.states.forEach(i=>{this.states.set(i.name,new KN(i.style,i.options&&i.options.params||{},r))}),WT(this.states,"true","1"),WT(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new qT(t,i,this.states))}),this.fallbackTransition=function XL(n,t,e){return new qT(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(c=>c.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}}function WT(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const YN=new ry;class KT{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const r=[],i=[],o=xg(this._driver,e,r,i);if(r.length)throw function PN(n){return new s.vHH(3503,!1)}();this._animations.set(t,o)}_buildPlayer(t,e,r){const i=t.element,o=Nf(0,this._normalizer,0,t.keyframes,e,r);return this._driver.animate(i,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){const i=[],o=this._animations.get(t);let c;const d=new Map;if(o?(c=iy(this._driver,e,o,X0,Y_,new Map,new Map,r,YN,i),c.forEach(w=>{const E=to(d,w.element,new Map);w.postStyleProps.forEach(A=>E.set(A,null))})):(i.push(function G_(){return new s.vHH(3300,!1)}()),c=[]),i.length)throw function Z_(n){return new s.vHH(3504,!1)}();d.forEach((w,E)=>{w.forEach((A,k)=>{w.set(k,this._driver.computeStyle(E,k,_a))})});const y=ya(c.map(w=>{const E=d.get(w.element);return this._buildPlayer(w,new Map,E)}));return this._playersById.set(t,y),y.onDestroy(()=>this.destroy(t)),this.players.push(y),y}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function q_(n){return new s.vHH(3301,!1)}();return e}listen(t,e,r,i){const o=W_(e,"","","");return Y0(this._getPlayer(t),r,o,i),()=>{}}command(t,e,r,i){if("register"==r)return void this.register(t,i[0]);if("create"==r)return void this.create(t,e,i[0]||{});const o=this._getPlayer(t);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const YT="ng-animate-queued",ay="ng-animate-disabled",XN=[],ob={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},QT={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Pi="__ng_removed";class ab{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const r=t&&t.hasOwnProperty("value");if(this.value=function cb(n){return n??null}(r?t.value:t),r){const o=Sg(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const r=this.options.params;Object.keys(e).forEach(i=>{null==r[i]&&(r[i]=e[i])})}}}const Og="void",ly=new ab(Og);class ex{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Tr(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.has(e))throw function zL(n,t){return new s.vHH(3302,!1)}();if(null==r||0==r.length)throw function W0(n){return new s.vHH(3303,!1)}();if(!function tx(n){return"start"==n||"done"==n}(r))throw function WL(n,t){return new s.vHH(3400,!1)}();const o=to(this._elementListeners,t,[]),c={name:e,phase:r,callback:i};o.push(c);const d=to(this._engine.statesByElement,t,new Map);return d.has(e)||(Tr(t,Eg),Tr(t,Eg+"-"+e),d.set(e,ly)),()=>{this._engine.afterFlush(()=>{const f=o.indexOf(c);f>=0&&o.splice(f,1),this._triggers.has(e)||d.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function fT(n){return new s.vHH(3401,!1)}();return e}trigger(t,e,r,i=!0){const o=this._getTrigger(e),c=new eE(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(Tr(t,Eg),Tr(t,Eg+"-"+e),this._engine.statesByElement.set(t,d=new Map));let f=d.get(e);const y=new ab(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&f&&y.absorbOptions(f.options),d.set(e,y),f||(f=ly),y.value!==Og&&f.value===y.value){if(!function rx(n,t){const e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){const o=e[i];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}(f.params,y.params)){const V=[],W=o.matchStyles(f.value,f.params,V),ne=o.matchStyles(y.value,y.params,V);V.length?this._engine.reportError(V):this._engine.afterFlush(()=>{wi(t,W),no(t,ne)})}return}const A=to(this._engine.playersByElement,t,[]);A.forEach(V=>{V.namespaceId==this.id&&V.triggerName==e&&V.queued&&V.destroy()});let k=o.matchTransition(f.value,y.value,t,y.params),M=!1;if(!k){if(!i)return;k=o.fallbackTransition,M=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:k,fromState:f,toState:y,player:c,isFallbackTransition:M}),M||(Tr(t,YT),c.onStart(()=>{Gd(t,YT)})),c.onDone(()=>{let V=this.players.indexOf(c);V>=0&&this.players.splice(V,1);const W=this._engine.playersByElement.get(t);if(W){let ne=W.indexOf(c);ne>=0&&W.splice(ne,1)}}),this.players.push(c),A.push(c),c}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const r=this._engine.driver.query(t,Dg,!0);r.forEach(i=>{if(i[Pi])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(c=>c.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){const o=this._engine.statesByElement.get(t),c=new Map;if(o){const d=[];if(o.forEach((f,y)=>{if(c.set(y,f.value),this._triggers.has(y)){const w=this.trigger(t,y,Og,i);w&&d.push(w)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,c),r&&ya(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){const i=new Set;e.forEach(o=>{const c=o.name;if(i.has(c))return;i.add(c);const f=this._triggers.get(c).fallbackTransition,y=r.get(c)||ly,w=new ab(Og),E=new eE(this.id,c,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:c,transition:f,fromState:y,toState:w,player:E,isFallbackTransition:!0})})}}removeNode(t,e){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else{let c=t;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{const o=t[Pi];(!o||o===ob)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){Tr(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,c=this._elementListeners.get(o);c&&c.forEach(d=>{if(d.name==r.triggerName){const f=W_(o,r.triggerName,r.fromState.value,r.toState.value);f._data=t,Y0(r.player,d.phase,f,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{const o=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==o||0==c?o-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(r=>r.element===t)||e,e}}class XT{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){const r=new ex(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,d=this.driver.getParentElement(e);for(;d;){const f=i.get(d);if(f){const y=r.indexOf(f);r.splice(y+1,0,t),c=!0;break}d=this.driver.getParentElement(d)}c||r.unshift(t)}else r.push(t);return i.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,r=this.statesByElement.get(t);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&e.add(o)}return e}trigger(t,e,r,i){if(ro(e)){const o=this._fetchNamespace(t);if(o)return o.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!ro(e))return;const o=e[Pi];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(t){const c=this._fetchNamespace(t);c&&c.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Tr(t,ay)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Gd(t,ay))}removeNode(t,e,r,i){if(ro(e)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),r){const c=this.namespacesByHostElement.get(e);c&&c.id!==t&&c.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,r,i,o){this.collectedLeaveElements.push(e),e[Pi]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,r,i,o){return ro(e)?this._fetchNamespace(t).listen(e,r,i,o):()=>{}}_buildInstruction(t,e,r,i,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,Dg,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,DT,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ya(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Pi];if(e&&e.setForRemoval){if(t[Pi]=ob,e.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(ay)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Tr(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?ya(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw function pT(n){return new s.vHH(3402,!1)}()}_flushAnimations(t,e){const r=new ry,i=[],o=new Map,c=[],d=new Map,f=new Map,y=new Map,w=new Set;this.disabledNodes.forEach(lt=>{w.add(lt);const gt=this.driver.query(lt,".ng-animate-queued",!0);for(let Mt=0;Mt<gt.length;Mt++)w.add(gt[Mt])});const E=this.bodyNode,A=Array.from(this.statesByElement.keys()),k=Po(A,this.collectedEnterElements),M=new Map;let V=0;k.forEach((lt,gt)=>{const Mt=X0+V++;M.set(gt,Mt),lt.forEach(tn=>Tr(tn,Mt))});const W=[],ne=new Set,he=new Set;for(let lt=0;lt<this.collectedLeaveElements.length;lt++){const gt=this.collectedLeaveElements[lt],Mt=gt[Pi];Mt&&Mt.setForRemoval&&(W.push(gt),ne.add(gt),Mt.hasAnimation?this.driver.query(gt,".ng-star-inserted",!0).forEach(tn=>ne.add(tn)):he.add(gt))}const Ie=new Map,me=Po(A,Array.from(ne));me.forEach((lt,gt)=>{const Mt=Y_+V++;Ie.set(gt,Mt),lt.forEach(tn=>Tr(tn,Mt))}),t.push(()=>{k.forEach((lt,gt)=>{const Mt=M.get(gt);lt.forEach(tn=>Gd(tn,Mt))}),me.forEach((lt,gt)=>{const Mt=Ie.get(gt);lt.forEach(tn=>Gd(tn,Mt))}),W.forEach(lt=>{this.processLeaveNode(lt)})});const Pe=[],je=[];for(let lt=this._namespaceList.length-1;lt>=0;lt--)this._namespaceList[lt].drainQueuedTransitions(e).forEach(Mt=>{const tn=Mt.player,Hr=Mt.element;if(Pe.push(tn),this.collectedEnterElements.length){const pi=Hr[Pi];if(pi&&pi.setForMove){if(pi.previousTriggersValues&&pi.previousTriggersValues.has(Mt.triggerName)){const _o=pi.previousTriggersValues.get(Mt.triggerName),Us=this.statesByElement.get(Mt.element);if(Us&&Us.has(Mt.triggerName)){const Xv=Us.get(Mt.triggerName);Xv.value=_o,Us.set(Mt.triggerName,Xv)}}return void tn.destroy()}}const Go=!E||!this.driver.containsElement(E,Hr),Hi=Ie.get(Hr),ka=M.get(Hr),Mn=this._buildInstruction(Mt,r,ka,Hi,Go);if(Mn.errors&&Mn.errors.length)return void je.push(Mn);if(Go)return tn.onStart(()=>wi(Hr,Mn.fromStyles)),tn.onDestroy(()=>no(Hr,Mn.toStyles)),void i.push(tn);if(Mt.isFallbackTransition)return tn.onStart(()=>wi(Hr,Mn.fromStyles)),tn.onDestroy(()=>no(Hr,Mn.toStyles)),void i.push(tn);const Ic=[];Mn.timelines.forEach(pi=>{pi.stretchStartingKeyframe=!0,this.disabledNodes.has(pi.element)||Ic.push(pi)}),Mn.timelines=Ic,r.append(Hr,Mn.timelines),c.push({instruction:Mn,player:tn,element:Hr}),Mn.queriedElements.forEach(pi=>to(d,pi,[]).push(tn)),Mn.preStyleProps.forEach((pi,_o)=>{if(pi.size){let Us=f.get(_o);Us||f.set(_o,Us=new Set),pi.forEach((Xv,r_)=>Us.add(r_))}}),Mn.postStyleProps.forEach((pi,_o)=>{let Us=y.get(_o);Us||y.set(_o,Us=new Set),pi.forEach((Xv,r_)=>Us.add(r_))})});if(je.length){const lt=[];je.forEach(gt=>{lt.push(function gT(n,t){return new s.vHH(3505,!1)}())}),Pe.forEach(gt=>gt.destroy()),this.reportError(lt)}const ct=new Map,Lt=new Map;c.forEach(lt=>{const gt=lt.element;r.has(gt)&&(Lt.set(gt,gt),this._beforeAnimationBuild(lt.player.namespaceId,lt.instruction,ct))}),i.forEach(lt=>{const gt=lt.element;this._getPreviousPlayers(gt,!1,lt.namespaceId,lt.triggerName,null).forEach(tn=>{to(ct,gt,[]).push(tn),tn.destroy()})});const Cn=W.filter(lt=>rE(lt,f,y)),Un=new Map;ba(Un,this.driver,he,y,_a).forEach(lt=>{rE(lt,f,y)&&Cn.push(lt)});const ws=new Map;k.forEach((lt,gt)=>{ba(ws,this.driver,new Set(lt),f,$0)}),Cn.forEach(lt=>{const gt=Un.get(lt),Mt=ws.get(lt);Un.set(lt,new Map([...Array.from(gt?.entries()??[]),...Array.from(Mt?.entries()??[])]))});const jr=[],Zu=[],qu={};c.forEach(lt=>{const{element:gt,player:Mt,instruction:tn}=lt;if(r.has(gt)){if(w.has(gt))return Mt.onDestroy(()=>no(gt,tn.toStyles)),Mt.disabled=!0,Mt.overrideTotalTime(tn.totalTime),void i.push(Mt);let Hr=qu;if(Lt.size>1){let Hi=gt;const ka=[];for(;Hi=Hi.parentNode;){const Mn=Lt.get(Hi);if(Mn){Hr=Mn;break}ka.push(Hi)}ka.forEach(Mn=>Lt.set(Mn,Hr))}const Go=this._buildAnimation(Mt.namespaceId,tn,ct,o,ws,Un);if(Mt.setRealPlayer(Go),Hr===qu)jr.push(Mt);else{const Hi=this.playersByElement.get(Hr);Hi&&Hi.length&&(Mt.parentPlayer=ya(Hi)),i.push(Mt)}}else wi(gt,tn.fromStyles),Mt.onDestroy(()=>no(gt,tn.toStyles)),Zu.push(Mt),w.has(gt)&&i.push(Mt)}),Zu.forEach(lt=>{const gt=o.get(lt.element);if(gt&&gt.length){const Mt=ya(gt);lt.setRealPlayer(Mt)}}),i.forEach(lt=>{lt.parentPlayer?lt.syncPlayerEvents(lt.parentPlayer):lt.destroy()});for(let lt=0;lt<W.length;lt++){const gt=W[lt],Mt=gt[Pi];if(Gd(gt,Y_),Mt&&Mt.hasAnimation)continue;let tn=[];if(d.size){let Go=d.get(gt);Go&&Go.length&&tn.push(...Go);let Hi=this.driver.query(gt,DT,!0);for(let ka=0;ka<Hi.length;ka++){let Mn=d.get(Hi[ka]);Mn&&Mn.length&&tn.push(...Mn)}}const Hr=tn.filter(Go=>!Go.destroyed);Hr.length?tE(this,gt,Hr):this.processLeaveNode(gt)}return W.length=0,jr.forEach(lt=>{this.players.push(lt),lt.onDone(()=>{lt.destroy();const gt=this.players.indexOf(lt);this.players.splice(gt,1)}),lt.play()}),jr}elementContainsData(t,e){let r=!1;const i=e[Pi];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(t).elementContainsData(e)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,o){let c=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(c=d)}else{const d=this.playersByElement.get(t);if(d){const f=!o||o==Og;d.forEach(y=>{y.queued||!f&&y.triggerName!=i||c.push(y)})}}return(r||i)&&(c=c.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),c}_beforeAnimationBuild(t,e,r){const o=e.element,c=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const f of e.timelines){const y=f.element,w=y!==o,E=to(r,y,[]);this._getPreviousPlayers(y,w,c,d,e.toState).forEach(k=>{const M=k.getRealPlayer();M.beforeDestroy&&M.beforeDestroy(),k.destroy(),E.push(k)})}wi(o,e.fromStyles)}_buildAnimation(t,e,r,i,o,c){const d=e.triggerName,f=e.element,y=[],w=new Set,E=new Set,A=e.timelines.map(M=>{const V=M.element;w.add(V);const W=V[Pi];if(W&&W.removedBeforeQueried)return new Tg(M.duration,M.delay);const ne=V!==f,he=function nx(n){const t=[];return nE(n,t),t}((r.get(V)||XN).map(ct=>ct.getRealPlayer())).filter(ct=>!!ct.element&&ct.element===V),Ie=o.get(V),me=c.get(V),Pe=Nf(0,this._normalizer,0,M.keyframes,Ie,me),je=this._buildPlayer(M,Pe,he);if(M.subTimeline&&i&&E.add(V),ne){const ct=new eE(t,d,V);ct.setRealPlayer(je),y.push(ct)}return je});y.forEach(M=>{to(this.playersByQueriedElement,M.element,[]).push(M),M.onDone(()=>function lb(n,t,e){let r=n.get(t);if(r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&n.delete(t)}return r}(this.playersByQueriedElement,M.element,M))}),w.forEach(M=>Tr(M,ET));const k=ya(A);return k.onDestroy(()=>{w.forEach(M=>Gd(M,ET)),no(f,e.toStyles)}),E.forEach(M=>{to(i,M,[]).push(k)}),k}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new Tg(t.duration,t.delay)}}class eE{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new Tg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,r)=>{e.forEach(i=>Y0(t,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){to(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function ro(n){return n&&1===n.nodeType}function ub(n,t){const e=n.style.display;return n.style.display=t??"none",e}function ba(n,t,e,r,i){const o=[];e.forEach(f=>o.push(ub(f)));const c=[];r.forEach((f,y)=>{const w=new Map;f.forEach(E=>{const A=t.computeStyle(y,E,i);w.set(E,A),(!A||0==A.length)&&(y[Pi]=QT,c.push(y))}),n.set(y,w)});let d=0;return e.forEach(f=>ub(f,o[d++])),c}function Po(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=1,i=new Set(t),o=new Map;function c(d){if(!d)return r;let f=o.get(d);if(f)return f;const y=d.parentNode;return f=e.has(y)?y:i.has(y)?r:c(y),o.set(d,f),f}return t.forEach(d=>{const f=c(d);f!==r&&e.get(f).push(d)}),e}function Tr(n,t){n.classList?.add(t)}function Gd(n,t){n.classList?.remove(t)}function tE(n,t,e){ya(e).onDone(()=>n.processLeaveNode(t))}function nE(n,t){for(let e=0;e<n.length;e++){const r=n[e];r instanceof Rs?nE(r.players,t):t.push(r)}}function rE(n,t,e){const r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(o=>i.add(o)):t.set(n,r),e.delete(n),!0}class Uf{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new XT(t,e,r),this._timelineEngine=new KT(t,e,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(t,e,r,i,o){const c=t+"-"+i;let d=this._triggerCache[c];if(!d){const f=[],y=[],w=xg(this._driver,o,f,y);if(f.length)throw function z0(n,t){return new s.vHH(3404,!1)}();d=function sb(n,t,e){return new QL(n,t,e)}(i,w,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(e,i,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r,i){this._transitionEngine.removeNode(t,e,i||!1,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if("@"==r.charAt(0)){const[o,c]=mT(r);this._timelineEngine.command(o,e,c,i)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,o){if("@"==r.charAt(0)){const[c,d]=mT(r);return this._timelineEngine.listen(c,e,d,o)}return this._transitionEngine.listen(t,e,r,i,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ix=(()=>{class n{constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&no(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(no(this._element,this._initialStyles),this._endStyles&&(no(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(wi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wi(this._element,this._endStyles),this._endStyles=null),no(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function cy(n){let t=null;return n.forEach((e,r)=>{(function sx(n){return"display"===n||"position"===n})(r)&&(t=t||new Map,t.set(r,e))}),t}class iE{constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(t,e,r){return t.animate(this._convertKeyframesToObject(e),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&t.set(i,this._finished?r:eb(this.element,i))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class sE{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return K_(t,e)}getParentElement(t){return J0(t)}query(t,e,r){return bT(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}animate(t,e,r,i,o,c=[]){const f={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(f.easing=o);const y=new Map,w=c.filter(k=>k instanceof iE);(function Of(n,t){return 0===n||0===t})(r,i)&&w.forEach(k=>{k.currentSnapshot.forEach((M,V)=>y.set(V,M))});let E=function $N(n){return n.length?n[0]instanceof Map?n:n.map(t=>J_(t)):[]}(e).map(k=>Mo(k));E=function IT(n,t,e){if(e.size&&t.length){let r=t[0],i=[];if(e.forEach((o,c)=>{r.has(c)||i.push(c),r.set(c,o)}),i.length)for(let o=1;o<t.length;o++){let c=t[o];i.forEach(d=>c.set(d,eb(n,d)))}}return t}(t,E,y);const A=function Mg(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=cy(t[0]),t.length>1&&(r=cy(t[t.length-1]))):t instanceof Map&&(e=cy(t)),e||r?new ix(n,e,r):null}(t,E);return new iE(t,E,f,A)}}let oE=(()=>{class n extends V_{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:s.ifc.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(e)?H_(e):e;return db(this._renderer,null,r,"register",[i]),new uy(r,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.FYo),s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class uy extends Cg{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new ox(this._id,t,e||{},this._renderer)}}class ox{constructor(t,e,r,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return db(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function db(n,t,e,r,i){return n.setProperty(t,`@@${e}:${r}`,i)}const dy="@.disabled";let hy=(()=>{class n{constructor(e,r,i){this.delegate=e,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,c)=>{const d=c?.parentNode(o);d&&c.removeChild(d,o)}}createRenderer(e,r){const o=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let w=this._rendererCache.get(o);return w||(w=new fy("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,w)),w}const c=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const f=w=>{Array.isArray(w)?w.forEach(f):this.engine.registerTrigger(c,d,e,w.name,w)};return r.data.animation.forEach(f),new aE(this,d,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,i){e>=0&&e<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[c,d]=o;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.FYo),s.LFG(Uf),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class fy{constructor(t,e,r,i){this.namespaceId=t,this.delegate=e,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?o=>e.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){"@"==e.charAt(0)&&e==dy?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class aE extends fy{constructor(t,e,r,i,o){super(e,r,i,o),this.factory=t,this.namespaceId=e}setProperty(t,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==dy?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,e.slice(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if("@"==e.charAt(0)){const i=function lE(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let o=e.slice(1),c="";return"@"!=o.charAt(0)&&([o,c]=function cE(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(o)),this.engine.listen(this.namespaceId,i,o,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(t,e,r)}}let uE=(()=>{class n extends Uf{constructor(e,r,i,o){super(e.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie),s.LFG(Q0),s.LFG(sy),s.LFG(s.z2F))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const hb=[{provide:V_,useClass:oE},{provide:sy,useFactory:function dE(){return new oy}},{provide:Uf,useClass:uE},{provide:s.FYo,useFactory:function hE(n,t,e){return new hy(n,t,e)},deps:[Wr,Uf,s.R0b]}],fb=[{provide:Q0,useFactory:()=>new sE},{provide:s.QbO,useValue:"BrowserAnimations"},...hb],fE=[{provide:Q0,useClass:CT},{provide:s.QbO,useValue:"NoopAnimations"},...hb];let ax=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?fE:fb}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:fb,imports:[tl]}),n})(),pE=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.Qsj),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n}),n})(),Zd=(()=>{class n extends pE{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,features:[s.qOj]}),n})();const fl=new s.OlP("NgValueAccessor"),ux={provide:fl,useExisting:(0,s.Gpc)(()=>lc),multi:!0},hx=new s.OlP("CompositionEventMode");let lc=(()=>{class n extends pE{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function dx(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(hx,8))},n.\u0275dir=s.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&s.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[s._Bn([ux]),s.qOj]}),n})();const fx=!1;function wu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function pb(n){return null!=n&&"number"==typeof n.length}const Fi=new s.OlP("NgValidators"),cc=new s.OlP("NgAsyncValidators"),mE=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class An{static min(t){return function gb(n){return t=>{if(wu(t.value)||wu(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function mb(n){return t=>{if(wu(t.value)||wu(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function _b(n){return wu(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function yb(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function py(n){return wu(n.value)||mE.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function gy(n){return t=>wu(t.value)||!pb(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function Cu(n){return t=>pb(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function _E(n){if(!n)return my;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(wu(r.value))return null;const i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}(t)}static nullValidator(t){return null}static compose(t){return mx(t)}static composeAsync(t){return vE(t)}}function my(n){return null}function qd(n){return null!=n}function px(n){const t=(0,s.QGY)(n)?(0,Bt.D)(n):n;if(fx&&!(0,s.CqO)(t)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new s.vHH(-1101,e)}return t}function _y(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function gx(n,t){return t.map(e=>e(n))}function vb(n){return n.map(t=>function yE(n){return!n.validate}(t)?t:e=>t.validate(e))}function mx(n){if(!n)return null;const t=n.filter(qd);return 0==t.length?null:function(e){return _y(gx(e,t))}}function Nt(n){return null!=n?mx(vb(n)):null}function vE(n){if(!n)return null;const t=n.filter(qd);return 0==t.length?null:function(e){return function lx(...n){const t=(0,yr.jO)(n),{args:e,keys:r}=iu(n),i=new bn.y(o=>{const{length:c}=e;if(!c)return void o.complete();const d=new Array(c);let f=c,y=c;for(let w=0;w<c;w++){let E=!1;(0,si.Xf)(e[w]).subscribe((0,ve.x)(o,A=>{E||(E=!0,y--),d[w]=A},()=>f--,void 0,()=>{(!f||!E)&&(y||o.next(r?ce(r,d):d),o.complete())}))}});return t?i.pipe(X(t)):i}(gx(e,t).map(px)).pipe((0,S.U)(_y))}}function bb(n){return null!=n?vE(vb(n)):null}function bE(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function zd(n){return n._rawValidators}function wE(n){return n._rawAsyncValidators}function Bf(n){return n?Array.isArray(n)?n:[n]:[]}function Wd(n,t){return Array.isArray(n)?n.includes(t):n===t}function dr(n,t){const e=Bf(t);return Bf(n).forEach(i=>{Wd(e,i)||e.push(i)}),e}function _x(n,t){return Bf(t).filter(e=>!Wd(n,e))}class wb{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Nt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=bb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Yi extends wb{get formDirective(){return null}get path(){return null}}class Tu extends wb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Cb{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Eu=(()=>{class n extends Cb{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Tu,2))},n.\u0275dir=s.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&s.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[s.qOj]}),n})(),Kd=(()=>{class n extends Cb{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Yi,10))},n.\u0275dir=s.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,r){2&e&&s.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[s.qOj]}),n})();function CE(n,t){return n?`with name: '${t}'`:`at index: ${t}`}const by=!1,Vf="VALID",wy="INVALID",Yd="PENDING",Ug="DISABLED";function Sb(n){return(Ib(n)?n.validators:n)||null}function EE(n,t){return(Ib(t)?t.asyncValidators:n)||null}function Ib(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class DE{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Vf}get invalid(){return this.status===wy}get pending(){return this.status==Yd}get disabled(){return this.status===Ug}get enabled(){return this.status!==Ug}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(dr(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(dr(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(_x(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(_x(t,this._rawAsyncValidators))}hasValidator(t){return Wd(this._rawValidators,t)}hasAsyncValidator(t){return Wd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Yd,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ug,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Vf,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vf||this.status===Yd)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ug:Vf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Yd,this._hasOwnPendingAsyncValidator=!0;const e=px(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new s.vpe,this.statusChanges=new s.vpe}_calculateStatus(){return this._allControlsDisabled()?Ug:this.errors?wy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yd)?Yd:this._anyControlsHaveStatus(wy)?wy:Vf}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ib(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function o2(n){return Array.isArray(n)?Nt(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function a2(n){return Array.isArray(n)?bb(n):n||null}(this._rawAsyncValidators)}}class Ji extends DE{constructor(t,e,r){super(Sb(e),EE(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function Bg(n,t,e){n._forEachChild((r,i)=>{if(void 0===e[i])throw new s.vHH(1002,by?function TE(n,t){return`Must supply a value for form control ${CE(n,t)}`}(t,i):"")})})(this,!0,t),Object.keys(t).forEach(r=>{(function Ab(n,t,e){const r=n.controls;if(!(t?Object.keys(r):r).length)throw new s.vHH(1e3,by?function Ex(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(t):"");if(!r[e])throw new s.vHH(1001,by?function Dx(n,t){return`Cannot find form control ${CE(n,t)}`}(t,e):"")})(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{const i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const Jd=new s.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Vg}),Vg="always";function jg(n,t,e=Vg){Qd(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function SE(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&xb(n,t)})}(n,t),function xx(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function Nx(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&xb(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Ax(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function Hg(n,t,e=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),Ey(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ty(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Qd(n,t){const e=zd(n);null!==t.validator?n.setValidators(bE(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=wE(n);null!==t.asyncValidator?n.setAsyncValidators(bE(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Ty(t._rawValidators,i),Ty(t._rawAsyncValidators,i)}function Ey(n,t){let e=!1;if(null!==n){if(null!==t.validator){const i=zd(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(null!==t.asyncValidator){const i=wE(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}const r=()=>{};return Ty(t._rawValidators,r),Ty(t._rawAsyncValidators,r),e}function xb(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function NE(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function xE(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Xe=class extends DE{constructor(t=null,e,r){super(Sb(e),EE(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ib(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=xE(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){NE(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){NE(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){xE(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};let uc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Bx={provide:fl,useExisting:(0,s.Gpc)(()=>Gg),multi:!0};let Gg=(()=>{class n extends Zd{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=r=>{e(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,r){1&e&&s.NdJ("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[s._Bn([Bx]),s.qOj]}),n})(),Bb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const Ay=new s.OlP("NgModelWithFormControlWarning"),Hb={provide:Yi,useExisting:(0,s.Gpc)(()=>dc)};let dc=(()=>{class n extends Yi{constructor(e,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new s.vpe,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ey(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return jg(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){Hg(e.control||null,e,!1),function AE(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,function Sy(n,t){n._syncPendingControls(),t.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,i=this.form.get(e.path);r!==i&&(Hg(r||null,e),(n=>n instanceof Xe)(i)&&(jg(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);(function kb(n,t){Qd(n,t)})(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function kx(n,t){return Ey(n,t)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Qd(this.form,this),this._oldForm&&Ey(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Fi,10),s.Y36(cc,10),s.Y36(Jd,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&s.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([Hb]),s.qOj,s.TTD]}),n})();const LE={provide:Tu,useExisting:(0,s.Gpc)(()=>Du)};let Du=(()=>{class n extends Tu{set isDisabled(e){}constructor(e,r,i,o,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new s.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Ob(n,t){if(!t)return null;let e,r,i;return Array.isArray(t),t.forEach(o=>{o.constructor===lc?e=o:function Mx(n){return Object.getPrototypeOf(n.constructor)===Zd}(o)?r=o:i=o}),i||r||e||null}(0,o)}ngOnChanges(e){this._added||this._setUpControl(),function Rb(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function Nb(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(s.Y36(Yi,13),s.Y36(Fi,10),s.Y36(cc,10),s.Y36(fl,10),s.Y36(Ay,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[s._Bn([LE]),s.qOj,s.TTD]}),n})();const Hx={provide:fl,useExisting:(0,s.Gpc)(()=>Xd),multi:!0};function UE(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Xd=(()=>{class n extends Zd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const i=UE(this._getOptionId(e),e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function $x(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&s.NdJ("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([Hx]),s.qOj]}),n})(),xy=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(UE(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(Xd,9))},n.\u0275dir=s.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const BE={provide:fl,useExisting:(0,s.Gpc)(()=>Gb),multi:!0};function VE(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Gb=(()=>{class n extends Zd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const i=e.map(o=>this._getOptionId(o));r=(o,c)=>{o._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const c=o;for(let d=0;d<c.length;d++){const y=this._getOptionValue(c[d].value);i.push(y)}}else{const c=r.options;for(let d=0;d<c.length;d++){const f=c[d];if(f.selected){const y=this._getOptionValue(f.value);i.push(y)}}}this.value=i,e(i)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function Gx(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&s.NdJ("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([BE]),s.qOj]}),n})(),qg=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(VE(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(VE(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(Gb,9))},n.\u0275dir=s.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),WE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Bb]}),n})(),JE=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Jd,useValue:e.callSetDisabledState??Vg}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[WE]}),n})(),Qx=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ay,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Jd,useValue:e.callSetDisabledState??Vg}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[WE]}),n})();class Oy{}class $f{}class Fo{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),o=i.toLowerCase(),c=e.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(c):this.headers.set(o,[c])}})}:()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{let i;if(i="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(o=>o.toString()),i.length>0){const o=e.toLowerCase();this.headers.set(o,i),this.maybeSetNormalizedName(e,o)}})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Fo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Fo;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Fo?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const o=t.value;if(o){let c=this.headers.get(e);if(!c)return;c=c.filter(d=>-1===o.indexOf(d)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Xx{encodeKey(t){return Jb(t)}encodeValue(t){return Jb(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const XE=/%(\d[a-f0-9])/gi,Yb={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Jb(n){return encodeURIComponent(n).replace(XE,(t,e)=>Yb[e]??t)}function Gf(n){return`${n}`}class pl{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Xx,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function QE(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[c,d]=-1==o?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],f=e.get(c)||[];f.push(d),e.set(c,f)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e],i=Array.isArray(r)?r.map(Gf):[Gf(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new pl({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(Gf(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(Gf(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Qb{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function eD(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function tD(n){return typeof Blob<"u"&&n instanceof Blob}function nD(n){return typeof FormData<"u"&&n instanceof FormData}class Zf{constructor(t,e,r,i){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function Xb(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Fo),this.context||(this.context=new Qb),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const d=e.indexOf("?");this.urlWithParams=e+(-1===d?"?":d<e.length-1?"&":"")+c}}else this.params=new pl,this.urlWithParams=e}serializeBody(){return null===this.body?null:eD(this.body)||tD(this.body)||nD(this.body)||function tk(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof pl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||nD(this.body)?null:tD(this.body)?this.body.type||null:eD(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof pl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,c=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,d=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let f=t.headers||this.headers,y=t.params||this.params;const w=t.context??this.context;return void 0!==t.setHeaders&&(f=Object.keys(t.setHeaders).reduce((E,A)=>E.set(A,t.setHeaders[A]),f)),t.setParams&&(y=Object.keys(t.setParams).reduce((E,A)=>E.set(A,t.setParams[A]),y)),new Zf(e,r,o,{params:y,headers:f,context:w,reportProgress:d,responseType:i,withCredentials:c})}}var Er=(()=>((Er=Er||{})[Er.Sent=0]="Sent",Er[Er.UploadProgress=1]="UploadProgress",Er[Er.ResponseHeader=2]="ResponseHeader",Er[Er.DownloadProgress=3]="DownloadProgress",Er[Er.Response=4]="Response",Er[Er.User=5]="User",Er))();class My{constructor(t,e=200,r="OK"){this.headers=t.headers||new Fo,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Py extends My{constructor(t={}){super(t),this.type=Er.ResponseHeader}clone(t={}){return new Py({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class zg extends My{constructor(t={}){super(t),this.type=Er.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new zg({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ew extends My{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function tw(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let nw=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof Zf)o=e;else{let f,y;f=i.headers instanceof Fo?i.headers:new Fo(i.headers),i.params&&(y=i.params instanceof pl?i.params:new pl({fromObject:i.params})),o=new Zf(e,r,void 0!==i.body?i.body:null,{headers:f,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=Fe(o).pipe(Wl(f=>this.handler.handle(f)));if(e instanceof Zf||"events"===i.observe)return c;const d=c.pipe(Pr(f=>f instanceof zg));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return d.pipe((0,S.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe((0,S.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe((0,S.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return d.pipe((0,S.U)(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new pl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,tw(i,r))}post(e,r,i={}){return this.request("POST",e,tw(i,r))}put(e,r,i={}){return this.request("PUT",e,tw(i,r))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Oy))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function rw(n,t){return t(n)}function nk(n,t){return(e,r)=>t.intercept(e,{handle:i=>n(i,r)})}const iD=new s.OlP("HTTP_INTERCEPTORS"),ui=new s.OlP("HTTP_INTERCEPTOR_FNS");function qf(){let n=null;return(t,e)=>(null===n&&(n=((0,s.f3M)(iD,{optional:!0})??[]).reduceRight(nk,rw)),n(t,e))}let sD=(()=>{class n extends Oy{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=Array.from(new Set(this.injector.get(ui)));this.chain=r.reduceRight((i,o)=>function rD(n,t,e){return(r,i)=>e.runInContext(()=>t(r,o=>n(o,i)))}(i,o,this.injector),rw)}return this.chain(e,r=>this.backend.handle(r))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG($f),s.LFG(s.lqb))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const sk=/^\)\]\}',?\n/;let Ly=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new bn.y(r=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((k,M)=>i.setRequestHeader(k,M.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const k=e.detectContentTypeHeader();null!==k&&i.setRequestHeader("Content-Type",k)}if(e.responseType){const k=e.responseType.toLowerCase();i.responseType="json"!==k?k:"text"}const o=e.serializeBody();let c=null;const d=()=>{if(null!==c)return c;const k=i.statusText||"OK",M=new Fo(i.getAllResponseHeaders()),V=function ok(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||e.url;return c=new Py({headers:M,status:i.status,statusText:k,url:V}),c},f=()=>{let{headers:k,status:M,statusText:V,url:W}=d(),ne=null;204!==M&&(ne=typeof i.response>"u"?i.responseText:i.response),0===M&&(M=ne?200:0);let he=M>=200&&M<300;if("json"===e.responseType&&"string"==typeof ne){const Ie=ne;ne=ne.replace(sk,"");try{ne=""!==ne?JSON.parse(ne):null}catch(me){ne=Ie,he&&(he=!1,ne={error:me,text:ne})}}he?(r.next(new zg({body:ne,headers:k,status:M,statusText:V,url:W||void 0})),r.complete()):r.error(new ew({error:ne,headers:k,status:M,statusText:V,url:W||void 0}))},y=k=>{const{url:M}=d(),V=new ew({error:k,status:i.status||0,statusText:i.statusText||"Unknown Error",url:M||void 0});r.error(V)};let w=!1;const E=k=>{w||(r.next(d()),w=!0);let M={type:Er.DownloadProgress,loaded:k.loaded};k.lengthComputable&&(M.total=k.total),"text"===e.responseType&&i.responseText&&(M.partialText=i.responseText),r.next(M)},A=k=>{let M={type:Er.UploadProgress,loaded:k.loaded};k.lengthComputable&&(M.total=k.total),r.next(M)};return i.addEventListener("load",f),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),e.reportProgress&&(i.addEventListener("progress",E),null!==o&&i.upload&&i.upload.addEventListener("progress",A)),i.send(o),r.next({type:Er.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",f),i.removeEventListener("timeout",y),e.reportProgress&&(i.removeEventListener("progress",E),null!==o&&i.upload&&i.upload.removeEventListener("progress",A)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(nd))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Uy=new s.OlP("XSRF_ENABLED"),Wg=new s.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),ak=new s.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class ow{}let lk=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=qo(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie),s.LFG(s.Lbi),s.LFG(Wg))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function uD(n,t){const e=n.url.toLowerCase();if(!(0,s.f3M)(Uy)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const r=(0,s.f3M)(ow).getToken(),i=(0,s.f3M)(ak);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),t(n)}var Ur=(()=>((Ur=Ur||{})[Ur.Interceptors=0]="Interceptors",Ur[Ur.LegacyInterceptors=1]="LegacyInterceptors",Ur[Ur.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Ur[Ur.NoXsrfProtection=3]="NoXsrfProtection",Ur[Ur.JsonpSupport=4]="JsonpSupport",Ur[Ur.RequestsMadeViaParent=5]="RequestsMadeViaParent",Ur))();function eh(n,t){return{\u0275kind:n,\u0275providers:t}}function aw(...n){const t=[nw,Ly,sD,{provide:Oy,useExisting:sD},{provide:$f,useExisting:Ly},{provide:ui,useValue:uD,multi:!0},{provide:Uy,useValue:!0},{provide:ow,useClass:lk}];for(const e of n)t.push(...e.\u0275providers);return(0,s.MR2)(t)}const dD=new s.OlP("LEGACY_INTERCEPTOR_FN");let dk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[aw(eh(Ur.LegacyInterceptors,[{provide:dD,useFactory:qf},{provide:ui,useExisting:dD,multi:!0}]))]}),n})();var By=U(6451),Yg=U(4986),hD=U(3532);function Jg(n=0,t,e=Yg.P){let r=-1;return null!=t&&((0,hD.K)(t)?e=t:r=t),new bn.y(i=>{let o=function pk(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;o<0&&(o=0);let c=0;return e.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function th(n,t=I.y){return n=n??fD,(0,In.e)((e,r)=>{let i,o=!0;e.subscribe((0,ve.x)(r,c=>{const d=t(c);(o||!n(i,d))&&(o=!1,i=d,r.next(c))}))})}function fD(n,t){return n===t}var pD=U(6063);class gk extends cn.x{constructor(t=1/0,e=1/0,r=pD.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:c}=this;e||(r.push(t),!i&&r.push(o.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let c=0;c<o.length&&!t.closed;c+=r?1:2)t.next(o[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const c=e.now();let d=0;for(let f=1;f<r.length&&r[f]<=c;f+=2)d=f;d&&r.splice(0,d+1)}}}var gD=U(3099);function mD(n,t,e){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:t=1/0,refCount:i=!1,scheduler:e}=n):r=n??1/0,(0,gD.B)({connector:()=>new gk(r,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}var Qg=U(5032);function di(n){return(0,In.e)((t,e)=>{(0,si.Xf)(n).subscribe((0,ve.x)(e,()=>e.complete(),Qg.Z)),!e.closed&&t.subscribe(e)})}let zf={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const _k=/[&<>"']/,S2=new RegExp(_k.source,"g"),yk=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,I2=new RegExp(yk.source,"g"),Vy={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vk=n=>Vy[n];function Li(n,t){if(t){if(_k.test(n))return n.replace(S2,vk)}else if(yk.test(n))return n.replace(I2,vk);return n}const jy=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function lw(n){return n.replace(jy,(t,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):"")}const _D=/(^|[^\[])\^/g;function Hn(n,t){n="string"==typeof n?n:n.source,t=t||"";const e={replace:(r,i)=>(i=(i=i.source||i).replace(_D,"$1"),n=n.replace(r,i),e),getRegex:()=>new RegExp(n,t)};return e}const cw=/[^\w:]/g,yD=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function vD(n,t,e){if(n){let r;try{r=decodeURIComponent(lw(e)).replace(cw,"").toLowerCase()}catch{return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!yD.test(e)&&(e=function Hy(n,t){uw[" "+n]||(uw[" "+n]=bk.test(n)?n+"/":dw(n,"/",!0));const e=-1===(n=uw[" "+n]).indexOf(":");return"//"===t.substring(0,2)?e?t:n.replace(wk,"$1")+t:"/"===t.charAt(0)?e?t:n.replace(Ck,"$1")+t:n+t}(t,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const uw={},bk=/^[^:]+:\/*[^/]*$/,wk=/^([^:]+:)[\s\S]*$/,Ck=/^([^:]+:\/*[^/]*)[\s\S]*$/,$y={exec:function(){}};function Tk(n,t){const r=n.replace(/\|/g,(o,c,d)=>{let f=!1,y=c;for(;--y>=0&&"\\"===d[y];)f=!f;return f?"|":" |"}).split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function dw(n,t,e){const r=n.length;if(0===r)return"";let i=0;for(;i<r;){const o=n.charAt(r-i-1);if(o!==t||e){if(o===t||!e)break;i++}else i++}return n.slice(0,r-i)}function bD(n,t){if(t<1)return"";let e="";for(;t>1;)1&t&&(e+=n),t>>=1,n+=n;return e+n}function wD(n,t,e,r){const i=t.href,o=t.title?Li(t.title):null,c=n[1].replace(/\\([\[\]])/g,"$1");if("!"!==n[0].charAt(0)){r.state.inLink=!0;const d={type:"link",raw:e,href:i,title:o,text:c,tokens:r.inlineTokens(c)};return r.state.inLink=!1,d}return{type:"image",raw:e,href:i,title:o,text:Li(c)}}class hw{constructor(t){this.options=t||zf}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const r=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?r:dw(r,"\n")}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const r=e[0],i=function N2(n,t){const e=n.match(/^(\s+)(?:```)/);if(null===e)return t;const r=e[1];return t.split("\n").map(i=>{const o=i.match(/^\s+/);if(null===o)return i;const[c]=o;return c.length>=r.length?i.slice(r.length):i}).join("\n")}(r,e[3]||"");return{type:"code",raw:r,lang:e[2]?e[2].trim().replace(this.rules.inline._escapes,"$1"):e[2],text:i}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let r=e[2].trim();if(/#$/.test(r)){const i=dw(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){const r=e[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:e[0],tokens:o,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let r,i,o,c,d,f,y,w,E,A,k,M,V=e[1].trim();const W=V.length>1,ne={type:"list",raw:"",ordered:W,start:W?+V.slice(0,-1):"",loose:!1,items:[]};V=W?`\\d{1,9}\\${V.slice(-1)}`:`\\${V}`,this.options.pedantic&&(V=W?V:"[*+-]");const he=new RegExp(`^( {0,3}${V})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;t&&(M=!1,(e=he.exec(t))&&!this.rules.block.hr.test(t));){if(r=e[0],t=t.substring(r.length),w=e[2].split("\n",1)[0].replace(/^\t+/,me=>" ".repeat(3*me.length)),E=t.split("\n",1)[0],this.options.pedantic?(c=2,k=w.trimLeft()):(c=e[2].search(/[^ ]/),c=c>4?1:c,k=w.slice(c),c+=e[1].length),f=!1,!w&&/^ *$/.test(E)&&(r+=E+"\n",t=t.substring(E.length+1),M=!0),!M){const me=new RegExp(`^ {0,${Math.min(3,c-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),Pe=new RegExp(`^ {0,${Math.min(3,c-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),je=new RegExp(`^ {0,${Math.min(3,c-1)}}(?:\`\`\`|~~~)`),ct=new RegExp(`^ {0,${Math.min(3,c-1)}}#`);for(;t&&(A=t.split("\n",1)[0],E=A,this.options.pedantic&&(E=E.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(je.test(E)||ct.test(E)||me.test(E)||Pe.test(t)));){if(E.search(/[^ ]/)>=c||!E.trim())k+="\n"+E.slice(c);else{if(f||w.search(/[^ ]/)>=4||je.test(w)||ct.test(w)||Pe.test(w))break;k+="\n"+E}!f&&!E.trim()&&(f=!0),r+=A+"\n",t=t.substring(A.length+1),w=E.slice(c)}}ne.loose||(y?ne.loose=!0:/\n *\n *$/.test(r)&&(y=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(k),i&&(o="[ ] "!==i[0],k=k.replace(/^\[[ xX]\] +/,""))),ne.items.push({type:"list_item",raw:r,task:!!i,checked:o,loose:!1,text:k}),ne.raw+=r}ne.items[ne.items.length-1].raw=r.trimRight(),ne.items[ne.items.length-1].text=k.trimRight(),ne.raw=ne.raw.trimRight();const Ie=ne.items.length;for(d=0;d<Ie;d++)if(this.lexer.state.top=!1,ne.items[d].tokens=this.lexer.blockTokens(ne.items[d].text,[]),!ne.loose){const me=ne.items[d].tokens.filter(je=>"space"===je.type),Pe=me.length>0&&me.some(je=>/\n.*\n/.test(je.raw));ne.loose=Pe}if(ne.loose)for(d=0;d<Ie;d++)ne.items[d].loose=!0;return ne}}html(t){const e=this.rules.block.html.exec(t);if(e){const r={type:"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:e[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(e[0]):Li(e[0]);r.type="paragraph",r.text=i,r.tokens=this.lexer.inline(i)}return r}}def(t){const e=this.rules.block.def.exec(t);if(e){const r=e[1].toLowerCase().replace(/\s+/g," "),i=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline._escapes,"$1"):e[3];return{type:"def",tag:r,raw:e[0],href:i,title:o}}}table(t){const e=this.rules.block.table.exec(t);if(e){const r={type:"table",header:Tk(e[1]).map(i=>({text:i})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(r.header.length===r.align.length){r.raw=e[0];let o,c,d,f,i=r.align.length;for(o=0;o<i;o++)r.align[o]=/^ *-+: *$/.test(r.align[o])?"right":/^ *:-+: *$/.test(r.align[o])?"center":/^ *:-+ *$/.test(r.align[o])?"left":null;for(i=r.rows.length,o=0;o<i;o++)r.rows[o]=Tk(r.rows[o],r.header.length).map(y=>({text:y}));for(i=r.header.length,c=0;c<i;c++)r.header[c].tokens=this.lexer.inline(r.header[c].text);for(i=r.rows.length,c=0;c<i;c++)for(f=r.rows[c],d=0;d<f.length;d++)f[d].tokens=this.lexer.inline(f[d].text);return r}}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const r="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:r,tokens:this.lexer.inline(r)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:Li(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):Li(e[0]):e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const r=e[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const c=dw(r.slice(0,-1),"\\");if((r.length-c.length)%2==0)return}else{const c=function A2(n,t){if(-1===n.indexOf(t[1]))return-1;const e=n.length;let r=0,i=0;for(;i<e;i++)if("\\"===n[i])i++;else if(n[i]===t[0])r++;else if(n[i]===t[1]&&(r--,r<0))return i;return-1}(e[2],"()");if(c>-1){const f=(0===e[0].indexOf("!")?5:4)+e[1].length+c;e[2]=e[2].substring(0,c),e[0]=e[0].substring(0,f).trim(),e[3]=""}}let i=e[2],o="";if(this.options.pedantic){const c=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);c&&(i=c[1],o=c[3])}else o=e[3]?e[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(i=this.options.pedantic&&!/>$/.test(r)?i.slice(1):i.slice(1,-1)),wD(e,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}reflink(t,e){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=e[i.toLowerCase()],!i){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return wD(r,i,r[0],this.lexer)}}emStrong(t,e,r=""){let i=this.rules.inline.emStrong.lDelim.exec(t);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;const o=i[1]||i[2]||"";if(!o||o&&(""===r||this.rules.inline.punctuation.exec(r))){const c=i[0].length-1;let d,f,y=c,w=0;const E="*"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(E.lastIndex=0,e=e.slice(-1*t.length+c);null!=(i=E.exec(e));){if(d=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!d)continue;if(f=d.length,i[3]||i[4]){y+=f;continue}if((i[5]||i[6])&&c%3&&!((c+f)%3)){w+=f;continue}if(y-=f,y>0)continue;f=Math.min(f,f+y+w);const A=t.slice(0,c+i.index+(i[0].length-d.length)+f);if(Math.min(c,f)%2){const M=A.slice(1,-1);return{type:"em",raw:A,text:M,tokens:this.lexer.inlineTokens(M)}}const k=A.slice(2,-2);return{type:"strong",raw:A,text:k,tokens:this.lexer.inlineTokens(k)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let r=e[2].replace(/\n/g," ");const i=/[^ ]/.test(r),o=/^ /.test(r)&&/ $/.test(r);return i&&o&&(r=r.substring(1,r.length-1)),r=Li(r,!0),{type:"codespan",raw:e[0],text:r}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t,e){const r=this.rules.inline.autolink.exec(t);if(r){let i,o;return"@"===r[2]?(i=Li(this.options.mangle?e(r[1]):r[1]),o="mailto:"+i):(i=Li(r[1]),o=i),{type:"link",raw:r[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}url(t,e){let r;if(r=this.rules.inline.url.exec(t)){let i,o;if("@"===r[2])i=Li(this.options.mangle?e(r[0]):r[0]),o="mailto:"+i;else{let c;do{c=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0]}while(c!==r[0]);i=Li(r[0]),o="www."===r[1]?"http://"+r[0]:r[0]}return{type:"link",raw:r[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t,e){const r=this.rules.inline.text.exec(t);if(r){let i;return i=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):Li(r[0]):r[0]:Li(this.options.smartypants?e(r[0]):r[0]),{type:"text",raw:r[0],text:i}}}}const kt={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:$y,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};kt.def=Hn(kt.def).replace("label",kt._label).replace("title",kt._title).getRegex(),kt.bullet=/(?:[*+-]|\d{1,9}[.)])/,kt.listItemStart=Hn(/^( *)(bull) */).replace("bull",kt.bullet).getRegex(),kt.list=Hn(kt.list).replace(/bull/g,kt.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+kt.def.source+")").getRegex(),kt._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",kt._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,kt.html=Hn(kt.html,"i").replace("comment",kt._comment).replace("tag",kt._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),kt.paragraph=Hn(kt._paragraph).replace("hr",kt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kt._tag).getRegex(),kt.blockquote=Hn(kt.blockquote).replace("paragraph",kt.paragraph).getRegex(),kt.normal={...kt},kt.gfm={...kt.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},kt.gfm.table=Hn(kt.gfm.table).replace("hr",kt.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kt._tag).getRegex(),kt.gfm.paragraph=Hn(kt._paragraph).replace("hr",kt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",kt.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kt._tag).getRegex(),kt.pedantic={...kt.normal,html:Hn("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",kt._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:$y,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Hn(kt.normal._paragraph).replace("hr",kt.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",kt.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const dt={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:$y,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:$y,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function x2(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function Lo(n){let e,r,t="";const i=n.length;for(e=0;e<i;e++)r=n.charCodeAt(e),Math.random()>.5&&(r="x"+r.toString(16)),t+="&#"+r+";";return t}dt._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",dt.punctuation=Hn(dt.punctuation).replace(/punctuation/g,dt._punctuation).getRegex(),dt.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,dt.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,dt._comment=Hn(kt._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),dt.emStrong.lDelim=Hn(dt.emStrong.lDelim).replace(/punct/g,dt._punctuation).getRegex(),dt.emStrong.rDelimAst=Hn(dt.emStrong.rDelimAst,"g").replace(/punct/g,dt._punctuation).getRegex(),dt.emStrong.rDelimUnd=Hn(dt.emStrong.rDelimUnd,"g").replace(/punct/g,dt._punctuation).getRegex(),dt._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,dt._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,dt._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,dt.autolink=Hn(dt.autolink).replace("scheme",dt._scheme).replace("email",dt._email).getRegex(),dt._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,dt.tag=Hn(dt.tag).replace("comment",dt._comment).replace("attribute",dt._attribute).getRegex(),dt._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,dt._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,dt._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,dt.link=Hn(dt.link).replace("label",dt._label).replace("href",dt._href).replace("title",dt._title).getRegex(),dt.reflink=Hn(dt.reflink).replace("label",dt._label).replace("ref",kt._label).getRegex(),dt.nolink=Hn(dt.nolink).replace("ref",kt._label).getRegex(),dt.reflinkSearch=Hn(dt.reflinkSearch,"g").replace("reflink",dt.reflink).replace("nolink",dt.nolink).getRegex(),dt.normal={...dt},dt.pedantic={...dt.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Hn(/^!?\[(label)\]\((.*?)\)/).replace("label",dt._label).getRegex(),reflink:Hn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",dt._label).getRegex()},dt.gfm={...dt.normal,escape:Hn(dt.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},dt.gfm.url=Hn(dt.gfm.url,"i").replace("email",dt.gfm._extended_email).getRegex(),dt.breaks={...dt.gfm,br:Hn(dt.br).replace("{2,}","*").getRegex(),text:Hn(dt.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class Iu{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||zf,this.options.tokenizer=this.options.tokenizer||new hw,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:kt.normal,inline:dt.normal};this.options.pedantic?(e.block=kt.pedantic,e.inline=dt.pedantic):this.options.gfm&&(e.block=kt.gfm,e.inline=this.options.breaks?dt.breaks:dt.gfm),this.tokenizer.rules=e}static get rules(){return{block:kt,inline:dt}}static lex(t,e){return new Iu(e).lex(t)}static lexInline(t,e){return new Iu(e).inlineTokens(t)}lex(t){let e;for(t=t.replace(/\r\n|\r/g,"\n"),this.blockTokens(t,this.tokens);e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(t,e=[]){let r,i,o,c;for(t=this.options.pedantic?t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t.replace(/^( *)(\t+)/gm,(d,f,y)=>f+"    ".repeat(y.length));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(d=>!!(r=d.call({lexer:this},t,e))&&(t=t.substring(r.raw.length),e.push(r),!0)))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),1===r.raw.length&&e.length>0?e[e.length-1].raw+="\n":e.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),i=e[e.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?e.push(r):(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),i=e[e.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(i.raw+="\n"+r.raw,i.text+="\n"+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let d=1/0;const f=t.slice(1);let y;this.options.extensions.startBlock.forEach(function(w){y=w.call({lexer:this},f),"number"==typeof y&&y>=0&&(d=Math.min(d,y))}),d<1/0&&d>=0&&(o=t.substring(0,d+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){i=e[e.length-1],c&&"paragraph"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r),c=o.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),i=e[e.length-1],i&&"text"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r);continue}if(t){const d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let r,i,o,d,f,y,c=t;if(this.tokens.links){const w=Object.keys(this.tokens.links);if(w.length>0)for(;null!=(d=this.tokenizer.rules.inline.reflinkSearch.exec(c));)w.includes(d[0].slice(d[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,d.index)+"["+bD("a",d[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(d=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,d.index)+"["+bD("a",d[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(d=this.tokenizer.rules.inline.escapedEmSt.exec(c));)c=c.slice(0,d.index+d[0].length-2)+"++"+c.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;t;)if(f||(y=""),f=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(w=>!!(r=w.call({lexer:this},t,e))&&(t=t.substring(r.raw.length),e.push(r),!0)))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),i=e[e.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),i=e[e.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(r=this.tokenizer.emStrong(t,c,y)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.autolink(t,Lo)){t=t.substring(r.raw.length),e.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t,Lo))){t=t.substring(r.raw.length),e.push(r);continue}if(o=t,this.options.extensions&&this.options.extensions.startInline){let w=1/0;const E=t.slice(1);let A;this.options.extensions.startInline.forEach(function(k){A=k.call({lexer:this},E),"number"==typeof A&&A>=0&&(w=Math.min(w,A))}),w<1/0&&w>=0&&(o=t.substring(0,w+1))}if(r=this.tokenizer.inlineText(o,x2)){t=t.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(y=r.raw.slice(-1)),f=!0,i=e[e.length-1],i&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(t){const w="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(w);break}throw new Error(w)}}return e}}class nh{constructor(t){this.options=t||zf}code(t,e,r){const i=(e||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(t,i);null!=o&&o!==t&&(r=!0,t=o)}return t=t.replace(/\n$/,"")+"\n",i?'<pre><code class="'+this.options.langPrefix+Li(i)+'">'+(r?t:Li(t,!0))+"</code></pre>\n":"<pre><code>"+(r?t:Li(t,!0))+"</code></pre>\n"}blockquote(t){return`<blockquote>\n${t}</blockquote>\n`}html(t){return t}heading(t,e,r,i){return this.options.headerIds?`<h${e} id="${this.options.headerPrefix+i.slug(r)}">${t}</h${e}>\n`:`<h${e}>${t}</h${e}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e,r){const i=e?"ol":"ul";return"<"+i+(e&&1!==r?' start="'+r+'"':"")+">\n"+t+"</"+i+">\n"}listitem(t){return`<li>${t}</li>\n`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>\n`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}tablerow(t){return`<tr>\n${t}</tr>\n`}tablecell(t,e){const r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>\n`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,e,r){if(null===(t=vD(this.options.sanitize,this.options.baseUrl,t)))return r;let i='<a href="'+t+'"';return e&&(i+=' title="'+e+'"'),i+=">"+r+"</a>",i}image(t,e,r){if(null===(t=vD(this.options.sanitize,this.options.baseUrl,t)))return r;let i=`<img src="${t}" alt="${r}"`;return e&&(i+=` title="${e}"`),i+=this.options.xhtml?"/>":">",i}text(t){return t}}class CD{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,r){return""+r}image(t,e,r){return""+r}br(){return""}}class Dk{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,e){let r=t,i=0;if(this.seen.hasOwnProperty(r)){i=this.seen[t];do{i++,r=t+"-"+i}while(this.seen.hasOwnProperty(r))}return e||(this.seen[t]=i,this.seen[r]=0),r}slug(t,e={}){const r=this.serialize(t);return this.getNextSafeSlug(r,e.dryrun)}}class hi{constructor(t){this.options=t||zf,this.options.renderer=this.options.renderer||new nh,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new CD,this.slugger=new Dk}static parse(t,e){return new hi(e).parse(t)}static parseInline(t,e){return new hi(e).parseInline(t)}parse(t,e=!0){let i,o,c,d,f,y,w,E,A,k,M,V,W,ne,he,Ie,me,Pe,je,r="";const ct=t.length;for(i=0;i<ct;i++)if(k=t[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[k.type]&&(je=this.options.extensions.renderers[k.type].call({parser:this},k),!1!==je||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(k.type)))r+=je||"";else switch(k.type){case"space":continue;case"hr":r+=this.renderer.hr();continue;case"heading":r+=this.renderer.heading(this.parseInline(k.tokens),k.depth,lw(this.parseInline(k.tokens,this.textRenderer)),this.slugger);continue;case"code":r+=this.renderer.code(k.text,k.lang,k.escaped);continue;case"table":for(E="",w="",d=k.header.length,o=0;o<d;o++)w+=this.renderer.tablecell(this.parseInline(k.header[o].tokens),{header:!0,align:k.align[o]});for(E+=this.renderer.tablerow(w),A="",d=k.rows.length,o=0;o<d;o++){for(y=k.rows[o],w="",f=y.length,c=0;c<f;c++)w+=this.renderer.tablecell(this.parseInline(y[c].tokens),{header:!1,align:k.align[c]});A+=this.renderer.tablerow(w)}r+=this.renderer.table(E,A);continue;case"blockquote":A=this.parse(k.tokens),r+=this.renderer.blockquote(A);continue;case"list":for(M=k.ordered,V=k.start,W=k.loose,d=k.items.length,A="",o=0;o<d;o++)he=k.items[o],Ie=he.checked,me=he.task,ne="",he.task&&(Pe=this.renderer.checkbox(Ie),W?he.tokens.length>0&&"paragraph"===he.tokens[0].type?(he.tokens[0].text=Pe+" "+he.tokens[0].text,he.tokens[0].tokens&&he.tokens[0].tokens.length>0&&"text"===he.tokens[0].tokens[0].type&&(he.tokens[0].tokens[0].text=Pe+" "+he.tokens[0].tokens[0].text)):he.tokens.unshift({type:"text",text:Pe}):ne+=Pe),ne+=this.parse(he.tokens,W),A+=this.renderer.listitem(ne,me,Ie);r+=this.renderer.list(A,M,V);continue;case"html":r+=this.renderer.html(k.text);continue;case"paragraph":r+=this.renderer.paragraph(this.parseInline(k.tokens));continue;case"text":for(A=k.tokens?this.parseInline(k.tokens):k.text;i+1<ct&&"text"===t[i+1].type;)k=t[++i],A+="\n"+(k.tokens?this.parseInline(k.tokens):k.text);r+=e?this.renderer.paragraph(A):A;continue;default:{const Lt='Token with "'+k.type+'" type was not found.';if(this.options.silent)return void console.error(Lt);throw new Error(Lt)}}return r}parseInline(t,e){e=e||this.renderer;let i,o,c,r="";const d=t.length;for(i=0;i<d;i++)if(o=t[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(c=this.options.extensions.renderers[o.type].call({parser:this},o),!1!==c||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)))r+=c||"";else switch(o.type){case"escape":case"text":r+=e.text(o.text);break;case"html":r+=e.html(o.text);break;case"link":r+=e.link(o.href,o.title,this.parseInline(o.tokens,e));break;case"image":r+=e.image(o.href,o.title,o.text);break;case"strong":r+=e.strong(this.parseInline(o.tokens,e));break;case"em":r+=e.em(this.parseInline(o.tokens,e));break;case"codespan":r+=e.codespan(o.text);break;case"br":r+=e.br();break;case"del":r+=e.del(this.parseInline(o.tokens,e));break;default:{const f='Token with "'+o.type+'" type was not found.';if(this.options.silent)return void console.error(f);throw new Error(f)}}return r}}class fw{constructor(t){this.options=t||zf}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(t){return t}postprocess(t){return t}}function TD(n,t){return(e,r,i)=>{"function"==typeof r&&(i=r,r=null);const o={...r},c=function pw(n,t,e){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",n){const i="<p>An error occurred:</p><pre>"+Li(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):e?void e(null,i):i}if(t)return Promise.reject(r);if(!e)throw r;e(r)}}((r={...Rt.defaults,...o}).silent,r.async,i);if(typeof e>"u"||null===e)return c(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof e)return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(function Ek(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(r),r.hooks&&(r.hooks.options=r),i){const d=r.highlight;let f;try{r.hooks&&(e=r.hooks.preprocess(e)),f=n(e,r)}catch(E){return c(E)}const y=function(E){let A;if(!E)try{r.walkTokens&&Rt.walkTokens(f,r.walkTokens),A=t(f,r),r.hooks&&(A=r.hooks.postprocess(A))}catch(k){E=k}return r.highlight=d,E?c(E):i(null,A)};if(!d||d.length<3||(delete r.highlight,!f.length))return y();let w=0;return Rt.walkTokens(f,function(E){"code"===E.type&&(w++,setTimeout(()=>{d(E.text,E.lang,function(A,k){if(A)return y(A);null!=k&&k!==E.text&&(E.text=k,E.escaped=!0),w--,0===w&&y()})},0))}),void(0===w&&y())}if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(e):e).then(d=>n(d,r)).then(d=>r.walkTokens?Promise.all(Rt.walkTokens(d,r.walkTokens)).then(()=>d):d).then(d=>t(d,r)).then(d=>r.hooks?r.hooks.postprocess(d):d).catch(c);try{r.hooks&&(e=r.hooks.preprocess(e));const d=n(e,r);r.walkTokens&&Rt.walkTokens(d,r.walkTokens);let f=t(d,r);return r.hooks&&(f=r.hooks.postprocess(f)),f}catch(d){return c(d)}}}function Rt(n,t,e){return TD(Iu.lex,hi.parse)(n,t,e)}Rt.options=Rt.setOptions=function(n){return function D2(n){zf=n}(Rt.defaults={...Rt.defaults,...n}),Rt},Rt.getDefaults=function mk(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},Rt.defaults=zf,Rt.use=function(...n){const t=Rt.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(e=>{const r={...e};if(r.async=Rt.defaults.async||r.async||!1,e.extensions&&(e.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){const o=t.renderers[i.name];t.renderers[i.name]=o?function(...c){let d=i.renderer.apply(this,c);return!1===d&&(d=o.apply(this,c)),d}:i.renderer}if(i.tokenizer){if(!i.level||"block"!==i.level&&"inline"!==i.level)throw new Error("extension level must be 'block' or 'inline'");t[i.level]?t[i.level].unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&("block"===i.level?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:"inline"===i.level&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),e.renderer){const i=Rt.defaults.renderer||new nh;for(const o in e.renderer){const c=i[o];i[o]=(...d)=>{let f=e.renderer[o].apply(i,d);return!1===f&&(f=c.apply(i,d)),f}}r.renderer=i}if(e.tokenizer){const i=Rt.defaults.tokenizer||new hw;for(const o in e.tokenizer){const c=i[o];i[o]=(...d)=>{let f=e.tokenizer[o].apply(i,d);return!1===f&&(f=c.apply(i,d)),f}}r.tokenizer=i}if(e.hooks){const i=Rt.defaults.hooks||new fw;for(const o in e.hooks){const c=i[o];i[o]=fw.passThroughHooks.has(o)?d=>{if(Rt.defaults.async)return Promise.resolve(e.hooks[o].call(i,d)).then(y=>c.call(i,y));const f=e.hooks[o].call(i,d);return c.call(i,f)}:(...d)=>{let f=e.hooks[o].apply(i,d);return!1===f&&(f=c.apply(i,d)),f}}r.hooks=i}if(e.walkTokens){const i=Rt.defaults.walkTokens;r.walkTokens=function(o){let c=[];return c.push(e.walkTokens.call(this,o)),i&&(c=c.concat(i.call(this,o))),c}}Rt.setOptions(r)})},Rt.walkTokens=function(n,t){let e=[];for(const r of n)switch(e=e.concat(t.call(Rt,r)),r.type){case"table":for(const i of r.header)e=e.concat(Rt.walkTokens(i.tokens,t));for(const i of r.rows)for(const o of i)e=e.concat(Rt.walkTokens(o.tokens,t));break;case"list":e=e.concat(Rt.walkTokens(r.items,t));break;default:Rt.defaults.extensions&&Rt.defaults.extensions.childTokens&&Rt.defaults.extensions.childTokens[r.type]?Rt.defaults.extensions.childTokens[r.type].forEach(function(i){e=e.concat(Rt.walkTokens(r[i],t))}):r.tokens&&(e=e.concat(Rt.walkTokens(r.tokens,t)))}return e},Rt.parseInline=TD(Iu.lexInline,hi.parseInline),Rt.Parser=hi,Rt.parser=hi.parse,Rt.Renderer=nh,Rt.TextRenderer=CD,Rt.Lexer=Iu,Rt.lexer=Iu.lex,Rt.Tokenizer=hw,Rt.Slugger=Dk,Rt.Hooks=fw,Rt.parse=Rt;let gl=(()=>{class n{constructor(){this._buttonClick$=new cn.x,this.copied$=this._buttonClick$.pipe(Ln(()=>(0,By.T)(Fe(!0),Jg(3e3).pipe(Kh(!1)))),th(),mD(1)),this.copiedText$=this.copied$.pipe(la(!1),(0,S.U)(e=>e?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(e,r){1&e&&(s.TgZ(0,"button",0),s.NdJ("click",function(){return r.onCopyToClipboardClick()}),s.ALo(1,"async"),s._uU(2),s.ALo(3,"async"),s.qZA()),2&e&&(s.ekj("copied",s.lcZ(1,3,r.copied$)),s.xp6(2),s.Oqu(s.lcZ(3,5,r.copiedText$)))},dependencies:[ri],encapsulation:2,changeDetection:0}),n})();class DD{}class Mk{}const ND=new s.OlP("SECURITY_CONTEXT");let xD=(()=>{class n{constructor(e,r,i,o,c,d){this.platform=e,this.securityContext=r,this.http=i,this.clipboardOptions=o,this.sanitizer=d,this.DEFAULT_MARKED_OPTIONS={renderer:new nh},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new cn.x,this.reload$=this._reload$.asObservable(),this.options=c}get options(){return this._options}set options(e){this._options={...this.DEFAULT_MARKED_OPTIONS,...e}}get renderer(){return this.options.renderer}set renderer(e){this.options.renderer=e}parse(e,r=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:i,inline:o,emoji:c,mermaid:d,disableSanitizer:f}=r,y={...this.options,...r.markedOptions};d&&(this.renderer=this.extendRenderer(y.renderer||new nh));const w=this.trimIndentation(e),E=i?this.decodeHtml(w):w,A=c?this.parseEmoji(E):E,k=this.parseMarked(A,y,o);return(f?k:this.sanitizer.sanitize(this.securityContext,k))||""}render(e,r=this.DEFAULT_RENDER_OPTIONS,i){const{clipboard:o,clipboardOptions:c,katex:d,katexOptions:f,mermaid:y,mermaidOptions:w}=r;o&&this.renderClipboard(e,i,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...c}),d&&this.renderKatex(e,{...this.DEFAULT_KATEX_OPTIONS,...f}),y&&this.renderMermaid(e,{...this.DEFAULT_MERMAID_OPTIONS,...w}),this.highlight(e)}reload(){this._reload$.next()}getSource(e){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(e,{responseType:"text"}).pipe((0,S.U)(r=>this.handleExtension(e,r)))}highlight(e){if(!bo(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;e||(e=document);const r=e.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,i=>i.classList.add("language-none")),Prism.highlightAllUnder(e)}decodeHtml(e){if(!bo(this.platform))return e;const r=document.createElement("textarea");return r.innerHTML=e,r.value}extendRenderer(e){const r=e;if(!0===r.\u0275NgxMarkdownRendererExtended)return e;const i=e.code;return e.code=function(o,c,d){return"mermaid"===c?`<div class="mermaid">${o}</div>`:i.call(this,o,c,d)},r.\u0275NgxMarkdownRendererExtended=!0,e}handleExtension(e,r){const i=e.lastIndexOf("://"),o=i>-1?e.substring(i+4):e,c=o.lastIndexOf("/"),d=c>-1?o.substring(c+1).split("?")[0]:"",f=d.lastIndexOf("."),y=f>-1?d.substring(f+1):"";return y&&"md"!==y?"```"+y+"\n"+r+"\n```":r}parseMarked(e,r,i=!1){return i?Rt.parseInline(e,r):Rt.parse(e,r)}parseEmoji(e){if(!bo(this.platform))return e;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(e)}renderKatex(e,r){if(bo(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(e,r)}}renderClipboard(e,r,i){if(!bo(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!r)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:o,buttonTemplate:c}=i,d=e.querySelectorAll("pre");for(let f=0;f<d.length;f++){const y=d.item(f),w=document.createElement("div");w.style.position="relative",y.parentNode.insertBefore(w,y),w.appendChild(y);const E=document.createElement("div");let A,k;E.style.position="absolute",E.style.top=".5em",E.style.right=".5em",E.style.opacity="0",E.style.transition="opacity 250ms ease-out",w.insertAdjacentElement("beforeend",E),y.onmouseover=()=>E.style.opacity="1",y.onmouseout=()=>E.style.opacity="0",A=o?r.createComponent(o).hostView:c?r.createEmbeddedView(c):r.createComponent(gl).hostView,A.rootNodes.forEach(M=>{M.onmouseover=()=>E.style.opacity="1",E.appendChild(M),k=new ClipboardJS(M,{text:()=>y.innerText})}),A.onDestroy(()=>k.destroy())}}renderMermaid(e,r=this.DEFAULT_MERMAID_OPTIONS){if(!bo(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const i=e.querySelectorAll(".mermaid");0!==i.length&&(mermaid.initialize(r),mermaid.init(i))}trimIndentation(e){if(!e)return"";let r;return e.split("\n").map(i=>{let o=r;return i.length>0&&(o=isNaN(o)?i.search(/\S|$/):Math.min(i.search(/\S|$/),o)),isNaN(r)&&(r=o),o?i.substring(o):i}).join("\n")}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.Lbi),s.LFG(ND),s.LFG(nw,8),s.LFG(DD,8),s.LFG(Mk,8),s.LFG(Gh))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),RD=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[xD,e&&e.loader||[],e&&e.clipboardOptions||[],e&&e.markedOptions||[],{provide:ND,useValue:e&&null!=e.sanitize?e.sanitize:s.q3G.HTML}]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Zr]}),n})();var mw;!function(n){let t;var i;let e,r;(i=t=n.SecurityLevel||(n.SecurityLevel={})).Strict="strict",i.Loose="loose",i.Antiscript="antiscript",i.Sandbox="sandbox",function(i){i.Base="base",i.Forest="forest",i.Dark="dark",i.Default="default",i.Neutral="neutral"}(e=n.Theme||(n.Theme={})),function(i){i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"}(r=n.LogLevel||(n.LogLevel={}))}(mw||(mw={}));let Wf=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const _w=["toast-component",""];function Hk(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",5),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.remove())}),s.TgZ(1,"span",6),s._uU(2,"\xd7"),s.qZA()()}}function $k(n,t){if(1&n&&(s.ynx(0),s._uU(1),s.BQk()),2&n){const e=s.oxw(2);s.xp6(1),s.hij("[",e.duplicatesCount+1,"]")}}function M2(n,t){if(1&n&&(s.TgZ(0,"div"),s._uU(1),s.YNc(2,$k,2,1,"ng-container",4),s.qZA()),2&n){const e=s.oxw();s.Tol(e.options.titleClass),s.uIk("aria-label",e.title),s.xp6(1),s.hij(" ",e.title," "),s.xp6(1),s.Q6J("ngIf",e.duplicatesCount)}}function P2(n,t){if(1&n&&s._UZ(0,"div",7),2&n){const e=s.oxw();s.Tol(e.options.messageClass),s.Q6J("innerHTML",e.message,s.oJD)}}function F2(n,t){if(1&n&&(s.TgZ(0,"div",8),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.Tol(e.options.messageClass),s.uIk("aria-label",e.message),s.xp6(1),s.hij(" ",e.message," ")}}function OD(n,t){if(1&n&&(s.TgZ(0,"div"),s._UZ(1,"div",9),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Udp("width",e.width+"%")}}class V2{_attachedHost;component;viewContainerRef;injector;constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){const t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class zk{_attachedPortal;_disposeFn;attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}}class Zy{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new cn.x;_activate=new cn.x;_manualClose=new cn.x;_resetTimeout=new cn.x;_countDuplicate=new cn.x;constructor(t){this._overlayRef=t}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}}class qy{toastId;config;message;title;toastType;toastRef;_onTap=new cn.x;_onAction=new cn.x;constructor(t,e,r,i,o,c){this.toastId=t,this.config=e,this.message=r,this.title=i,this.toastType=o,this.toastRef=c,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}}const yw=new s.OlP("ToastConfig");class rh extends zk{_hostDomElement;_componentFactoryResolver;_appRef;constructor(t,e,r){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=r}attachComponentPortal(t,e){const r=this._componentFactoryResolver.resolveComponentFactory(t.component);let i;return i=r.create(t.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let PD=(()=>{class n{_document=(0,s.f3M)(ie);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class vw{_portalHost;constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}}let bw=(()=>{class n{_overlayContainer=(0,s.f3M)(PD);_componentFactoryResolver=(0,s.f3M)(s._Vd);_appRef=(0,s.f3M)(s.z2F);_document=(0,s.f3M)(ie);_paneElements=new Map;create(e,r){return this._createOverlayRef(this.getPaneElement(e,r))}getPaneElement(e="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[e]||(this._paneElements.get(r)[e]=this._createPaneElement(e,r)),this._paneElements.get(r)[e]}_createPaneElement(e,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(e),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(e){return new rh(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new vw(this._createPortalHost(e))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Au=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(e,r,i,o,c){this.overlay=r,this._injector=i,this.sanitizer=o,this.ngZone=c,this.toastrConfig={...e.default,...e.config},e.config.iconClasses&&(this.toastrConfig.iconClasses={...e.default.iconClasses,...e.config.iconClasses})}show(e,r,i={},o=""){return this._preBuildNotification(o,e,r,this.applyConfig(i))}success(e,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",e,r,this.applyConfig(i))}error(e,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",e,r,this.applyConfig(i))}info(e,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",e,r,this.applyConfig(i))}warning(e,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",e,r,this.applyConfig(i))}clear(e){for(const r of this.toasts)if(void 0!==e){if(r.toastId===e)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(e){const r=this._findToast(e);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(e="",r="",i,o){const{includeTitleDuplicates:c}=this.toastrConfig;for(const d of this.toasts)if((!c||c&&d.title===e)&&d.message===r)return d.toastRef.onDuplicate(i,o),d;return null}applyConfig(e={}){return{...this.toastrConfig,...e}}_findToast(e){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===e)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(e,r,i,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,r,i,o)):this._buildNotification(e,r,i,o)}_buildNotification(e,r,i,o){if(!o.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=r;let d=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(d=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const f=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let y=r;r&&o.enableHtml&&(y=this.sanitizer.sanitize(s.q3G.HTML,r));const w=new Zy(f),E=new qy(this.index,o,y,i,e,w),k=s.zs3.create({providers:[{provide:qy,useValue:E}],parent:this._injector}),M=new V2(o.toastComponent,k),V=f.attach(M,o.newestOnTop);w.componentInstance=V.instance;const W={toastId:this.index,title:i||"",message:r||"",toastRef:w,onShown:w.afterActivate(),onHidden:w.afterClosed(),onTap:E.onTap(),onAction:E.onAction(),portal:V};return d||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{W.toastRef.activate()})),this.toasts.push(W),W}static \u0275fac=function(r){return new(r||n)(s.LFG(yw),s.LFG(bw),s.LFG(s.zs3),s.LFG(Gh),s.LFG(s.R0b))};static \u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ww={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if("inactive"===this.state.value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,r,i){this.toastrService=e,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),r)):this.timeout=setTimeout(()=>e(),r)}outsideInterval(e,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),r)):this.intervalId=setInterval(()=>e(),r)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}static \u0275fac=function(r){return new(r||n)(s.Y36(Au),s.Y36(qy),s.Y36(s.R0b))};static \u0275cmp=s.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){1&r&&s.NdJ("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),2&r&&(s.d8E("@flyInOut",i.state),s.Tol(i.toastClasses),s.Udp("display",i.displayStyle))},standalone:!0,features:[s.jDz],attrs:_w,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){1&r&&(s.YNc(0,Hk,3,0,"button",0),s.YNc(1,M2,3,5,"div",1),s.YNc(2,P2,1,3,"div",2),s.YNc(3,F2,2,4,"div",3),s.YNc(4,OD,2,2,"div",4)),2&r&&(s.Q6J("ngIf",i.options.closeButton),s.xp6(1),s.Q6J("ngIf",i.title),s.xp6(1),s.Q6J("ngIf",i.message&&i.options.enableHtml),s.xp6(1),s.Q6J("ngIf",i.message&&!i.options.enableHtml),s.xp6(1),s.Q6J("ngIf",i.options.progressBar))},dependencies:[gr],encapsulation:2,data:{animation:[j_("flyInOut",[$_("inactive",Ld({opacity:0})),$_("active",Ld({opacity:1})),$_("removed",Ld({opacity:0})),lT("inactive => active",H0("{{ easeTime }}ms {{ easing }}")),lT("active => removed",H0("{{ easeTime }}ms {{ easing }}"))])]}})}return n})()},zy=(n={})=>(0,s.MR2)([{provide:yw,useValue:{default:ww,config:n}}]);let j2=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[zy(e)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=s.oAB({type:n});static \u0275inj=s.cJS({})}return n})(),ih=(()=>{class n{constructor(){}add(e,r){localStorage.setItem(e,JSON.stringify(r))}update(e,r){localStorage.getItem(e)&&this.delete(e),this.add(e,r)}get(e){const r=localStorage.getItem(e);return r?JSON.parse(r):null}getLoggedAccount(){return this.get("logged_account")}delete(e){localStorage.removeItem(e)}clear(){localStorage.clear()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Kk(n,t){1&n&&(s.TgZ(0,"small",22),s._uU(1," Please enter email address.! "),s.qZA())}function Yk(n,t){1&n&&(s.TgZ(0,"small",22),s._uU(1," Email address not well formed.! "),s.qZA())}let Jk=(()=>{class n{constructor(e,r,i,o){this.accountInteractor=e,this.router=r,this.toastr=i,this.localStorageService=o,this.loginForm=new Ji({email:new Xe("",[An.required,An.email]),password:new Xe("",[An.required])})}ngOnInit(){this.localStorageService.clear()}onSubmit(){this.loginForm.valid?this.accountInteractor.login({username:this.loginForm.value.email,password:this.loginForm.value.password}).subscribe({next:e=>{e&&e.success?(this.localStorageService.add("logged_account",e.data),this.router.navigate(["/dashboard"])):this.toastr.error("Account not found","Error")},error:e=>{this.toastr.error(e.message(),"Error")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Error")}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(Wf),s.Y36(Cr),s.Y36(Au),s.Y36(ih))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-login"]],decls:34,vars:4,consts:[[1,"main-wrapper","account-wrapper"],[1,"account-page"],[1,"account-center"],[1,"account-box"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],[1,"account-logo"],["href",""],["src","assets/images/logo.png","alt",""],[1,"form-group"],["for","loginUsername"],["type","email","formControlName","email","placeholder","Enter email","id","loginUsername",1,"form-control"],["class","form-text text-muted",4,"ngIf"],["for","loginPassword"],["type","password","formControlName","password","placeholder","Password","id","loginPassword",1,"form-control"],[1,"form-group","text-right"],[1,"form-group","text-center"],["type","submit",1,"btn","btn-primary","account-btn",2,"background-color","#042c44","color","#fcbc1f",3,"disabled"],[1,"text-center","register-link"],[1,"m-t-50"],["width","50","src","assets/images/akkodis.png","alt","akkodis",1,""],[2,"font-size","xx-small"],[1,"text-danger"],[1,"form-text","text-muted"]],template:function(r,i){1&r&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(5,"div",5)(6,"a",6),s._UZ(7,"img",7),s.qZA()(),s.TgZ(8,"div",8)(9,"label",9),s._uU(10,"Email"),s.qZA(),s._UZ(11,"input",10),s.YNc(12,Kk,2,0,"small",11),s.YNc(13,Yk,2,0,"small",11),s.qZA(),s.TgZ(14,"div",8)(15,"label",12),s._uU(16,"Password"),s.qZA(),s._UZ(17,"input",13),s.qZA(),s.TgZ(18,"div",14)(19,"a",6),s._uU(20,"Forgot your password?"),s.qZA()(),s.TgZ(21,"div",15)(22,"button",16),s._uU(23," Login "),s.qZA()(),s.TgZ(24,"div",17),s._uU(25," Don\u2019t have an account? "),s.TgZ(26,"a",6),s._uU(27,"Register Now"),s.qZA()(),s.TgZ(28,"div",18),s._UZ(29,"img",19),s.TgZ(30,"span",20),s._uU(31,"Version : "),s.TgZ(32,"b",21),s._uU(33," 0.1.0"),s.qZA()()()()()()()()),2&r&&(s.xp6(4),s.Q6J("formGroup",i.loginForm),s.xp6(8),s.Q6J("ngIf",i.loginForm.controls.email.touched&&(null==i.loginForm.controls.email.errors?null:i.loginForm.controls.email.errors.required)),s.xp6(1),s.Q6J("ngIf",i.loginForm.controls.email.touched&&(null==i.loginForm.controls.email.errors?null:i.loginForm.controls.email.errors.email)),s.xp6(9),s.Q6J("disabled",!i.loginForm.valid))},dependencies:[gr,uc,lc,Eu,Kd,dc,Du],encapsulation:2})}return n})(),LD=(()=>{class n{constructor(e,r){this.localStorageService=e,this.router=r,this.showSideBar=!0,this.loggedAccount=e.getLoggedAccount()}onClickBars(){this.showSideBar=!this.showSideBar}onClickLogo(){this.router.navigate(["dashboard"])}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(ih),s.Y36(Cr))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-header"]],decls:17,vars:2,consts:[[1,"header"],[1,"header-left"],[1,"logo","pointer",3,"click"],["src","assets/images/logo.png","width","35","height","35","alt",""],["id","toggle_btn","href","javascript:void(0);",3,"click"],[1,"fa","fa-bars"],["id","mobile_btn","href","#sidebar",1,"mobile_btn","float-left"],[1,"nav","user-menu","float-right"],[1,"nav-item","dropdown"],["href","#","data-toggle","dropdown",1,"dropdown-toggle","nav-link","user-link"],[1,"user-img"],["src","assets/images/user.jpg","width","24","alt","Admin",1,"rounded-circle"]],template:function(r,i){1&r&&(s.TgZ(0,"div",0)(1,"div",1)(2,"a",2),s.NdJ("click",function(){return i.onClickLogo()}),s._UZ(3,"img",3),s.TgZ(4,"span"),s._uU(5,"EstiMate"),s.qZA()()(),s.TgZ(6,"a",4),s.NdJ("click",function(){return i.onClickBars()}),s._UZ(7,"i",5),s.qZA(),s.TgZ(8,"a",6),s._UZ(9,"i",5),s.qZA(),s.TgZ(10,"ul",7)(11,"li",8)(12,"a",9)(13,"span",10),s._UZ(14,"img",11),s.qZA(),s.TgZ(15,"span"),s._uU(16),s.qZA()()()()()),2&r&&(s.xp6(16),s.AsE("",i.loggedAccount.firstname," ",i.loggedAccount.lastname,""))}})}return n})(),UD=(()=>{class n{constructor(e,r){this.router=e,this.localStorageService=r,this.menu="dashboard"}onClickMenu(e){this.menu=e,this.router.navigate([e])}onClickSignOut(){this.localStorageService.clear(),this.router.navigate(["login"])}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(Cr),s.Y36(ih))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-sidebar"]],decls:36,vars:4,consts:[["id","sidebar",1,"sidebar"],[1,"sidebar-inner","slimscroll"],["id","sidebar-menu",1,"sidebar-menu"],[1,"menu-title"],[1,"pointer",3,"ngClass"],[3,"click"],[1,"fa","fa-dashboard"],[1,"fa","fa-user-md"],[1,"fa","fa-users"],[1,"fa","fa-cog"],[1,"pointer",2,"background-color","yellow"],[1,"fa","fa-sign-out"],[1,"pointer","m-3"],["width","50","src","assets/images/akkodis.png","alt","akkodis",1,""],[2,"font-size","xx-small"],[1,"text-danger"]],template:function(r,i){1&r&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul"),s._UZ(4,"li",3),s.TgZ(5,"li",4)(6,"a",5),s.NdJ("click",function(){return i.onClickMenu("dashboard")}),s._UZ(7,"i",6),s.TgZ(8,"span"),s._uU(9,"Projects"),s.qZA()()(),s.TgZ(10,"li",4)(11,"a",5),s.NdJ("click",function(){return i.onClickMenu("clients")}),s._UZ(12,"i",7),s.TgZ(13,"span"),s._uU(14,"Clients"),s.qZA()()(),s.TgZ(15,"li",4)(16,"a",5),s.NdJ("click",function(){return i.onClickMenu("accounts")}),s._UZ(17,"i",8),s.TgZ(18,"span"),s._uU(19,"Accounts"),s.qZA()()(),s.TgZ(20,"li",4)(21,"a",5),s.NdJ("click",function(){return i.onClickMenu("settings")}),s._UZ(22,"i",9),s.TgZ(23,"span"),s._uU(24,"Settings"),s.qZA()()(),s.TgZ(25,"li",10)(26,"a",5),s.NdJ("click",function(){return i.onClickSignOut()}),s._UZ(27,"i",11),s.TgZ(28,"span"),s._uU(29,"Sign out"),s.qZA()()(),s.TgZ(30,"li",12),s._UZ(31,"img",13),s.TgZ(32,"span",14),s._uU(33,"Version : "),s.TgZ(34,"b",15),s._uU(35," 0.1.0"),s.qZA()()()()()()()),2&r&&(s.xp6(5),s.Q6J("ngClass","dashboard"==i.menu?"active":""),s.xp6(5),s.Q6J("ngClass","clients"==i.menu?"active":""),s.xp6(5),s.Q6J("ngClass","accounts"==i.menu?"active":""),s.xp6(5),s.Q6J("ngClass","settings"==i.menu?"active":""))},dependencies:[Vt]})}return n})(),BD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-auth"]],decls:6,vars:0,consts:[[1,"page-wrapper","sm-responsive"],[1,"content"]],template:function(r,i){1&r&&(s.TgZ(0,"div"),s._UZ(1,"app-header")(2,"app-sidebar"),s.TgZ(3,"div",0)(4,"div",1),s._UZ(5,"router-outlet"),s.qZA()()())},dependencies:[N_,LD,UD]})}return n})();const VD={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Xg;const Cw=new Uint8Array(16);function $2(){if(!Xg&&(Xg=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Xg))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xg(Cw)}const Ci=[];for(let n=0;n<256;++n)Ci.push((n+256).toString(16).slice(1));const Ky=function q2(n,t,e){if(VD.randomUUID&&!t&&!n)return VD.randomUUID();const r=(n=n||{}).random||(n.rng||$2)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){e=e||0;for(let i=0;i<16;++i)t[e+i]=r[i];return t}return function Wy(n,t=0){return Ci[n[t+0]]+Ci[n[t+1]]+Ci[n[t+2]]+Ci[n[t+3]]+"-"+Ci[n[t+4]]+Ci[n[t+5]]+"-"+Ci[n[t+6]]+Ci[n[t+7]]+"-"+Ci[n[t+8]]+Ci[n[t+9]]+"-"+Ci[n[t+10]]+Ci[n[t+11]]+Ci[n[t+12]]+Ci[n[t+13]]+Ci[n[t+14]]+Ci[n[t+15]]}(r)};let jD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class sh{constructor(t,e,r){this.success=t,this.message=e,this.data=r}}class Kf{toEntities(t){return t.map(e=>this.toEntity(e))}fromEntities(t){return t.map(e=>this.fromEntity(e))}toResponse(t){return t?new sh(!0,"",this.fromEntity(t)):new sh(!1,"Not found",{})}toFirstResponse(t){return t&&t.length>0?new sh(!0,"",this.fromEntity(t[0])):new sh(!1,"Not found",{})}toResponses(t){return t&&t.length>0?new sh(!0,"",this.fromEntities(t)):new sh(!1,"Not found",[])}toEmptyResponse(){return new sh(!0,"",{})}}class z2 extends Kf{toEntity(t){return{id:t.id,createdAt:t.createdAt,updatedAt:new Date,deleted:!1,title:t.title,duration:t.duration,description:t.description,margin:t.margin,client:t.client,riskProvision:t.riskProvision}}fromEntity(t){return{id:t.id,createdAt:t.createdAt,title:t.title,duration:t.duration,description:t.description,margin:t.margin,client:t.client,riskProvision:t.riskProvision}}fromRequest(t){return{updatedAt:new Date,deleted:!1,title:t.title,duration:t.duration,description:t.description,margin:t.margin,client:t.client,riskProvision:t.riskProvision}}}class em{}let tm=(()=>{class n extends em{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=s.n5z(n)))(i||n)}}();static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),HD=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.create(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(tm))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Tw=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.delete(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(tm))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$D=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.update(e.id,e.request)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(tm))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),GD=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.fetch(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(tm))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ZD=(()=>{class n{constructor(e){this.repository=e}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(tm))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qD=(()=>{class n extends jD{constructor(e,r,i,o,c){super(),this.createProjectUseCase=e,this.deleteProjectUseCase=r,this.updateProjectUseCase=i,this.fetchProjectUseCase=o,this.fetchProjectsUseCase=c,this.mapper=new z2}create(e){let r=this.mapper.fromRequest(e);return r.id=Ky(),r.createdAt=new Date,this.createProjectUseCase.execute(r).pipe((0,S.U)(i=>this.mapper.toResponse(i)))}delete(e){return this.deleteProjectUseCase.execute(e),Fe(this.mapper.toEmptyResponse())}fetchAll(){return this.fetchProjectsUseCase.execute().pipe((0,S.U)(e=>this.mapper.toResponses(e)))}fetchOne(e){return this.fetchProjectUseCase.execute(e).pipe((0,S.U)(r=>this.mapper.toResponse(r)))}update(e,r){return this.updateProjectUseCase.execute({id:e,request:this.mapper.fromRequest(r)}),Fe(this.mapper.toEmptyResponse())}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(HD),s.LFG(Tw),s.LFG($D),s.LFG(GD),s.LFG(ZD))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yy=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function W2(n,t){if(1&n&&(s.TgZ(0,"b"),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Oqu(e.projects.length)}}function a(n,t){1&n&&s._UZ(0,"option",51),2&n&&s.Q6J("value",t.$implicit.companyName)}function l(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"img",52),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s.qZA()}}function u(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"tr")(1,"td",53),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickAddResources(o))}),s.TgZ(2,"h2"),s._uU(3),s.qZA()(),s.TgZ(4,"td",53),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickAddResources(o))}),s._uU(5),s.qZA(),s.TgZ(6,"td",53),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickAddResources(o))}),s._uU(7),s.qZA(),s.TgZ(8,"td",53),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickAddResources(o))}),s._uU(9),s.qZA(),s.TgZ(10,"td"),s._UZ(11,"img",54),s.TgZ(12,"img",55),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickProjectToBeDeleted(o))}),s.qZA()()()}if(2&n){const e=t.$implicit,r=s.oxw();let i;s.xp6(3),s.Oqu(e.title),s.xp6(2),s.Oqu(null==(i=r.getClient(e.client))?null:i.companyName),s.xp6(2),s.Oqu(e.duration),s.xp6(2),s.Oqu(e.description)}}function h(n,t){1&n&&(s.TgZ(0,"small",56),s._uU(1," Please enter the title of the project. "),s.qZA())}function p(n,t){1&n&&s._UZ(0,"option",51),2&n&&s.Q6J("value",t.$implicit.companyName)}let m=(()=>{class n{constructor(e,r,i,o,c){this.projectInteractor=e,this.clientInteractor=r,this.localStorageService=i,this.router=o,this.toastr=c,this.projects=[],this.clients=[],this.options=["aaa","bbb","eee"],this.projectForm=new Ji({title:new Xe("",[An.required]),client:new Xe("",[An.required]),description:new Xe(""),duration:new Xe("")})}ngOnInit(){this.fetchClients(),this.fetchProjects()}fetchClients(){this.clientInteractor.fetchAll().subscribe({next:e=>{e&&e.success&&(this.clients=e.data)},error:e=>{},complete:()=>{}})}fetchProjects(){this.projectInteractor.fetchAll().subscribe({next:e=>{e&&e.success&&(this.projects=e.data)},error:e=>{},complete:()=>{}})}getClient(e){return this.clients.find(r=>r.id===e)}getClientById(e){return this.clients.find(r=>r.id===e)}onSubmit(){if(this.projectForm.valid){let e={title:this.projectForm.value.title,duration:this.projectForm.value.duration,description:this.projectForm.value.description,client:this.projectForm.value.client,margin:18,riskProvision:0};console.log(e);let r=this.getClientById(e.client);console.log(r),r?(e.client=r.id,this.saveProject(e)):this.saveClient({companyName:e.client,email:"",address:"",phoneNumber:"",logo:""},e)}else this.toastr.error("Some inputs are incorrect","Error")}saveProject(e){this.projectInteractor.create(e).subscribe({next:r=>{this.toastr.success("project successfully saved","Success"),this.projectForm.reset(),this.fetchProjects()},error:r=>{this.toastr.error("Error occurred while saving the project","Error")},complete:()=>{}})}saveClient(e,r){this.clientInteractor.create(e).subscribe({next:i=>{r.client=i.data?.id,this.saveProject(r)},error:i=>{this.toastr.error("Error occurred while saving the client","Error")},complete:()=>{}})}onClickProject(e){this.projectForm.setValue({title:e.title,duration:e.duration,description:e.description,client:e.client})}onClickAddResources(e){this.localStorageService.add("project",e),this.router.navigate(["/resources"])}onClickProjectToBeDeleted(e){this.localStorageService.add("project",e)}onClickDismiss(){this.localStorageService.delete("project")}onClickDeleteProject(){let e=this.localStorageService.get("project");e&&e.id?this.projectInteractor.delete(e.id).subscribe({next:r=>{this.localStorageService.delete("project"),this.toastr.success("Project deleted successfully","Delete project")},error:r=>{this.localStorageService.delete("project"),this.toastr.error("Error occurred while deleting the project","Delete project")},complete:()=>{}}):(this.localStorageService.delete("project"),this.toastr.error("Project not found","Delete project"))}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(qD),s.Y36(Yy),s.Y36(ih),s.Y36(Cr),s.Y36(Au))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-dashboard"]],decls:104,vars:12,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],[4,"ngIf"],["href","","data-bs-toggle","modal","data-bs-target","#addProjectModal",1,"btn","btn-outline-primary","float-right"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],[1,"text-right"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["type","text","formControlName","title","placeholder","Title of the project","id","title"],["autocomplete","off","autofocus","","formControlName","client","placeholder","Select client","list","options"],["id","options"],[3,"value",4,"ngFor","ngForOf"],["type","number","formControlName","duration","placeholder","Duration","id","duration"],["type","text","formControlName","description","placeholder","Description","id","description"],["class","aspect-square","src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["id","addProjectModal","tabindex","-1","aria-labelledby","addProjectModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","addProjectModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","row"],[1,"col-12"],[1,"form-group"],["for","projectTitle"],["type","text","formControlName","title","placeholder","Title","id","projectTitle",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],[1,"col-9"],["for","projectClient"],["autocomplete","off","autofocus","","id","projectClient","formControlName","client","placeholder","Select client","list","listClients",1,"form-control"],["id","listClients"],[1,"col-3"],["for","projectDuration"],["type","number","formControlName","duration","placeholder","Duration","id","projectDuration",1,"form-control"],["for","projectDescription"],["id","projectDescription","name","w3review","formControlName","description","rows","4","placeholder","description of the project",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["id","projectDeleteModal","tabindex","-1","aria-labelledby","projectDeleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],["id","projectDeleteModalLabel",1,"modal-title"],[1,"modal-body"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[3,"value"],["src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],[3,"click"],["src","assets/images/duplicate.png","alt","duplicate","data-bs-toggle","tooltip","data-bs-placement","top","title","duplicate",1,"aspect-square","action"],["src","assets/images/delete.png","data-bs-target","#projectDeleteModal","alt","delete","data-bs-toggle","modal","data-bs-placement","top","title","delete",1,"aspect-square","action",3,"click"],[1,"form-text","text-muted","text-danger"]],template:function(r,i){1&r&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),s.YNc(5,W2,2,1,"b",5),s._uU(6," Projects"),s.qZA(),s.TgZ(7,"a",6),s._uU(8,"Add"),s.qZA()(),s.TgZ(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead")(13,"tr")(14,"th"),s._uU(15,"Title"),s.TgZ(16,"span",10),s._uU(17,"*"),s.qZA()(),s.TgZ(18,"th"),s._uU(19,"Client"),s.TgZ(20,"span",10),s._uU(21,"*"),s.qZA()(),s.TgZ(22,"th"),s._uU(23,"Duration (months)"),s.qZA(),s.TgZ(24,"th"),s._uU(25,"Description"),s.qZA(),s.TgZ(26,"th",11),s._uU(27,"Actions"),s.qZA()()(),s.TgZ(28,"tbody")(29,"tr")(30,"td")(31,"form",12),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(32,"input",13),s.qZA()(),s.TgZ(33,"td")(34,"form",12),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(35,"input",14),s.TgZ(36,"datalist",15),s.YNc(37,a,1,1,"option",16),s.qZA()()(),s.TgZ(38,"td")(39,"form",12),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(40,"input",17),s.qZA()(),s.TgZ(41,"td")(42,"form",12),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(43,"input",18),s.qZA()(),s.TgZ(44,"td"),s.YNc(45,l,1,0,"img",19),s.qZA()(),s.YNc(46,u,13,4,"tr",20),s.qZA()()()()()()(),s.TgZ(47,"div",21)(48,"div",22)(49,"div",23)(50,"div",24)(51,"h1",25),s._uU(52,"Add new project"),s.qZA(),s._UZ(53,"button",26),s.qZA(),s.TgZ(54,"form",12),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(55,"div",27)(56,"div",28)(57,"div",29)(58,"label",30),s._uU(59,"Title"),s.TgZ(60,"span",10),s._uU(61,"*"),s.qZA()(),s._UZ(62,"input",31),s.YNc(63,h,2,0,"small",32),s.qZA()(),s.TgZ(64,"div",33)(65,"div",29)(66,"label",34),s._uU(67,"Client"),s.TgZ(68,"span",10),s._uU(69,"*"),s.qZA()(),s._UZ(70,"br")(71,"input",35),s.TgZ(72,"datalist",36),s.YNc(73,p,1,1,"option",16),s.qZA()()(),s.TgZ(74,"div",37)(75,"div",29)(76,"label",38),s._uU(77,"Duration (months)"),s.qZA(),s._UZ(78,"input",39),s.qZA()(),s.TgZ(79,"div",28)(80,"label",40),s._uU(81,"Description"),s.qZA(),s.TgZ(82,"textarea",41),s._uU(83,"                        "),s.qZA()()()(),s.TgZ(84,"div",42)(85,"button",43),s._uU(86,"Close"),s.qZA(),s.TgZ(87,"button",44),s.NdJ("click",function(){return i.onSubmit()}),s._uU(88,"Save "),s.qZA()()()()(),s.TgZ(89,"div",45)(90,"div",46)(91,"div",23)(92,"div",24)(93,"h5",47),s._uU(94,"Delete project"),s.qZA(),s._UZ(95,"button",26),s.qZA(),s.TgZ(96,"div",48)(97,"b"),s._uU(98,"Do you really want to delete this project?"),s.qZA()(),s.TgZ(99,"div",42)(100,"button",49),s.NdJ("click",function(){return i.onClickDismiss()}),s._uU(101,"Close "),s.qZA(),s.TgZ(102,"button",50),s.NdJ("click",function(){return i.onClickDeleteProject()}),s._uU(103," Confirm "),s.qZA()()()()()),2&r&&(s.xp6(5),s.Q6J("ngIf",i.projects),s.xp6(26),s.Q6J("formGroup",i.projectForm),s.xp6(3),s.Q6J("formGroup",i.projectForm),s.xp6(3),s.Q6J("ngForOf",i.clients),s.xp6(2),s.Q6J("formGroup",i.projectForm),s.xp6(3),s.Q6J("formGroup",i.projectForm),s.xp6(3),s.Q6J("ngIf",i.projectForm.valid),s.xp6(1),s.Q6J("ngForOf",i.projects),s.xp6(8),s.Q6J("formGroup",i.projectForm),s.xp6(9),s.Q6J("ngIf",i.projectForm.controls.title.touched&&(null==i.projectForm.controls.title.errors?null:i.projectForm.controls.title.errors.required)),s.xp6(10),s.Q6J("ngForOf",i.clients),s.xp6(14),s.Q6J("disabled",!i.projectForm.valid))},dependencies:[or,gr,uc,xy,qg,lc,Gg,Eu,Kd,dc,Du],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})(),b=(()=>{class n{constructor(e){this.router=e}canActivate(e){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Cr))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var T=U(1144);const D=["addListener","removeListener"],N=["addEventListener","removeEventListener"],O=["on","off"];function B(n,t,e,r){if((0,xs.m)(e)&&(r=e,e=void 0),r)return B(n,t,e).pipe(X(r));const[i,o]=function ze(n){return(0,xs.m)(n.addEventListener)&&(0,xs.m)(n.removeEventListener)}(n)?N.map(c=>d=>n[c](t,d,e)):function re(n){return(0,xs.m)(n.addListener)&&(0,xs.m)(n.removeListener)}(n)?D.map(J(n,t)):function De(n){return(0,xs.m)(n.on)&&(0,xs.m)(n.off)}(n)?O.map(J(n,t)):[];if(!i&&(0,T.z)(n))return(0,Qn.z)(c=>B(c,t,e))((0,si.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new bn.y(c=>{const d=(...f)=>c.next(1<f.length?f:f[0]);return i(d),()=>o(d)})}function J(n,t){return e=>r=>n[e](t,r)}const{isArray:rt}=Array;function ht(n){return 1===n.length&&rt(n[0])?n[0]:n}function Xn(...n){const t=(0,yr.jO)(n),e=ht(n);return e.length?new bn.y(r=>{let i=e.map(()=>[]),o=e.map(()=>!1);r.add(()=>{i=o=null});for(let c=0;!r.closed&&c<e.length;c++)(0,si.Xf)(e[c]).subscribe((0,ve.x)(r,d=>{if(i[c].push(d),i.every(f=>f.length)){const f=i.map(y=>y.shift());r.next(t?t(...f):f),i.some((y,w)=>!y.length&&o[w])&&r.complete()}},()=>{o[c]=!0,!i[c].length&&r.complete()}));return()=>{i=o=null}}):lr.E}function zD(...n){const t=(0,yr.jO)(n);return(0,In.e)((e,r)=>{const i=n.length,o=new Array(i);let c=n.map(()=>!1),d=!1;for(let f=0;f<i;f++)(0,si.Xf)(n[f]).subscribe((0,ve.x)(r,y=>{o[f]=y,!d&&!c[f]&&(c[f]=!0,(d=c.every(I.y))&&(c=null))},Qg.Z));e.subscribe((0,ve.x)(r,f=>{if(d){const y=[f,...o];r.next(t?t(...y):y)}}))})}new bn.y(Qg.Z),Math,Math,Math;const c4=["*"],I4=["dialog"];function cR(n){return"string"==typeof n}function im(n){return null!=n}function tv(n){return(n||document.body).getBoundingClientRect()}const pU={animation:!0,transitionTimerDelayMs:5},w8=()=>{},{transitionTimerDelayMs:C8}=pU,xw=new Map,io=(n,t,e,r)=>{let i=r.context||{};const o=xw.get(t);if(o)switch(r.runningTransition){case"continue":return lr.E;case"stop":n.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),xw.delete(t)}const c=e(t,r.animation,i)||w8;if(!r.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>c()),Fe(void 0).pipe(function v8(n){return t=>new bn.y(e=>t.subscribe({next:c=>n.run(()=>e.next(c)),error:c=>n.run(()=>e.error(c)),complete:()=>n.run(()=>e.complete())}))}(n));const d=new cn.x,f=new cn.x,y=d.pipe(function K2(...n){return t=>br(t,Fe(...n))}(!0));xw.set(t,{transition$:d,complete:()=>{f.next(),f.complete()},context:i});const w=function b8(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const E=B(t,"transitionend").pipe(di(y),Pr(({target:k})=>k===t));(function Ot(...n){return 1===(n=ht(n)).length?(0,si.Xf)(n[0]):new bn.y(function Le(n){return t=>{let e=[];for(let r=0;e&&!t.closed&&r<n.length;r++)e.push((0,si.Xf)(n[r]).subscribe((0,ve.x)(t,i=>{if(e){for(let o=0;o<e.length;o++)o!==r&&e[o].unsubscribe();e=null}t.next(i)})))}}(n))})(Jg(w+C8).pipe(di(y)),E,f).pipe(di(y)).subscribe(()=>{xw.delete(t),n.run(()=>{c(),d.next(),d.complete()})})}),d.asObservable()};let XD=(()=>{class n{constructor(){this.animation=pU.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Zr]}),n})(),wU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Zr]}),n})(),EU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Zr]}),n})(),DU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();var Ui=(()=>{return(n=Ui||(Ui={}))[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",Ui;var n})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const IU=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function AU(n){const t=Array.from(n.querySelectorAll(IU)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let FU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Zr,JE]}),n})(),VU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();class lm{constructor(t,e,r){this.nodes=t,this.viewRef=e,this.componentRef=r}}let dz=(()=>{class n{constructor(e,r){this._el=e,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(oi(1)).subscribe(()=>{io(this._zone,this._el.nativeElement,(e,r)=>{r&&tv(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return io(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.R0b))},n.\u0275cmp=s.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,r){2&e&&(s.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),s.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})();class jU{close(t){}dismiss(t){}}class hz{constructor(t,e,r,i){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new cn.x,this._dismissed=new cn.x,this._hidden=new cn.x,t.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,c)=>{this._resolve=o,this._reject=c}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(di(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(di(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function fU(n){return n&&n.then}(e)?!1!==e&&this._dismiss(t):e.then(r=>{!1!==r&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Fe(void 0);t.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Xn(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var _c=(()=>{return(n=_c||(_c={}))[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",_c;var n})();let fz=(()=>{class n{constructor(e,r,i){this._document=e,this._elRef=r,this._zone=i,this._closed$=new cn.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new s.vpe,this.shown=new cn.x,this.hidden=new cn.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":cR(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(oi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,r={animation:this.animation,runningTransition:"stop"},c=Xn(io(this._zone,e,()=>e.classList.remove("show"),r),io(this._zone,this._dialogEl.nativeElement,()=>{},r));return c.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),c}_show(){const e={animation:this.animation,runningTransition:"continue"};Xn(io(this._zone,this._elRef.nativeElement,(o,c)=>{c&&tv(o),o.classList.add("show")},e),io(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{B(e,"keydown").pipe(di(this._closed$),Pr(i=>i.which===Ui.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(_c.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;B(this._dialogEl.nativeElement,"mousedown").pipe(di(this._closed$),(0,ai.b)(()=>r=!1),Ln(()=>B(e,"mouseup").pipe(di(this._closed$),oi(1))),Pr(({target:i})=>e===i)).subscribe(()=>{r=!0}),B(e,"click").pipe(di(this._closed$)).subscribe(({target:i})=>{e===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(_c.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const r=e.querySelector("[ngbAutofocus]"),i=AU(e)[0];(r||i||e).focus()}}_restoreFocus(){const e=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&e.contains(r)?r:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&io(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(ie),s.Y36(s.SBq),s.Y36(s.R0b))},n.\u0275cmp=s.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,r){if(1&e&&s.Gf(I4,7),2&e){let i;s.iGM(i=s.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,r){2&e&&(s.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),s.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),s.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:c4,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,r){1&e&&(s.F$t(),s.TgZ(0,"div",0,1)(2,"div",2),s.Hsn(3),s.qZA()()),2&e&&s.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),pz=(()=>{class n{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:o,paddingRight:c}=i;if(e>0){const d=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${d+e}px`}return i.overflow="hidden",()=>{e>0&&(i.paddingRight=c),i.overflow=o}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gz=(()=>{class n{constructor(e,r,i,o,c,d){this._applicationRef=e,this._injector=r,this._document=i,this._scrollBar=o,this._rendererFactory=c,this._ngZone=d,this._activeWindowCmptHasChanged=new cn.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new s.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const f=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const i=B(t,"focusin").pipe(di(e),(0,S.U)(o=>o.target));B(t,"keydown").pipe(di(e),Pr(o=>o.which===Ui.Tab),zD(i)).subscribe(([o,c])=>{const[d,f]=AU(t);(c===d||c===t)&&o.shiftKey&&(f.focus(),o.preventDefault()),c===f&&!o.shiftKey&&(d.focus(),o.preventDefault())}),r&&B(t,"click").pipe(di(e),zD(i),(0,S.U)(o=>o[1])).subscribe(o=>o.focus())})})(0,f.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(f.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,r,i){const o=i.container instanceof HTMLElement?i.container:im(i.container)?this._document.querySelector(i.container):this._document.body,c=this._rendererFactory.createRenderer(null,null);if(!o)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const d=new jU,f=this._getContentRef(i.injector||e,r,d,i);let y=!1!==i.backdrop?this._attachBackdrop(o):void 0,w=this._attachWindowComponent(o,f.nodes),E=new hz(w,f,y,i.beforeDismiss);return this._registerModalRef(E),this._registerWindowCmpt(w),E.hidden.pipe(oi(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(c.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),d.close=A=>{E.close(A)},d.dismiss=A=>{E.dismiss(A)},this._applyWindowOptions(w.instance,i),1===this._modalRefs.length&&c.addClass(this._document.body,"modal-open"),y&&y.instance&&(this._applyBackdropOptions(y.instance,i),y.changeDetectorRef.detectChanges()),w.changeDetectorRef.detectChanges(),E}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(r=>r.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let r=(0,s.LMc)(dz,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_attachWindowComponent(e,r){let i=(0,s.LMc)(fz,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_applyWindowOptions(e,r){this._windowAttributes.forEach(i=>{im(r[i])&&(e[i]=r[i])})}_applyBackdropOptions(e,r){this._backdropAttributes.forEach(i=>{im(r[i])&&(e[i]=r[i])})}_getContentRef(e,r,i,o){return r?r instanceof s.Rgc?this._createFromTemplateRef(r,i):cR(r)?this._createFromString(r):this._createFromComponent(e,r,i,o):new lm([])}_createFromTemplateRef(e,r){const o=e.createEmbeddedView({$implicit:r,close(c){r.close(c)},dismiss(c){r.dismiss(c)}});return this._applicationRef.attachView(o),new lm([o.rootNodes],o)}_createFromString(e){const r=this._document.createTextNode(`${e}`);return new lm([[r]])}_createFromComponent(e,r,i,o){const c=s.zs3.create({providers:[{provide:jU,useValue:i}],parent:e}),d=(0,s.LMc)(r,{environmentInjector:this._applicationRef.injector,elementInjector:c}),f=d.location.nativeElement;return o.scrollable&&f.classList.add("component-host-scrollable"),this._applicationRef.attachView(d.hostView),new lm([[f]],d.hostView,d)}_setAriaHidden(e){const r=e.parentElement;r&&e!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==e&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,r)=>{e?r.setAttribute("aria-hidden",e):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const r=()=>{const i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(r,r)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const r=this._windowCmpts.indexOf(e);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.z2F),s.LFG(s.zs3),s.LFG(ie),s.LFG(pz),s.LFG(s.FYo),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mz=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(XD))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aS=(()=>{class n{constructor(e,r,i){this._injector=e,this._modalStack=r,this._config=i}open(e,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.zs3),s.LFG(gz),s.LFG(mz))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[aS]}),n})(),qU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Zr]}),n})(),eB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Zr]}),n})(),nB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Zr]}),n})(),rB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Zr]}),n})(),iB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Zr]}),n})(),sB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Zr]}),n})(),oB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Zr]}),n})(),aB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();new s.OlP("live announcer delay",{providedIn:"root",factory:function Nz(){return 100}});let lB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Zr]}),n})(),cB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const xz=[bU,wU,EU,DU,FU,VU,HU,qU,cB,eB,nB,rB,iB,sB,oB,aB,lB];let kz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[xz,bU,wU,EU,DU,FU,VU,HU,qU,cB,eB,nB,rB,iB,sB,oB,aB,lB]}),n})();function Rz(n,t){if(1&n&&(s.TgZ(0,"b"),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Oqu(e.clients.length)}}function Oz(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"img",29),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s.qZA()}}function Mz(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"tr")(1,"td",30),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(58);return s.KtG(c.openEditClientModal(o,d))}),s.TgZ(2,"div",0)(3,"div",31),s._UZ(4,"img",32),s.qZA(),s.TgZ(5,"div",33)(6,"h2"),s._uU(7),s.qZA()()()(),s.TgZ(8,"td",30),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(58);return s.KtG(c.openEditClientModal(o,d))}),s._uU(9),s.qZA(),s.TgZ(10,"td",30),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(58);return s.KtG(c.openEditClientModal(o,d))}),s._uU(11),s.qZA(),s.TgZ(12,"td",30),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(58);return s.KtG(c.openEditClientModal(o,d))}),s._uU(13),s.qZA(),s.TgZ(14,"td")(15,"img",34),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickClientToBeDeleted(o))}),s.qZA()()()}if(2&n){const e=t.$implicit;s.xp6(7),s.Oqu(e.companyName),s.xp6(2),s.Oqu(e.email),s.xp6(2),s.Oqu(e.phoneNumber),s.xp6(2),s.Oqu(e.address)}}function Pz(n,t){1&n&&(s.TgZ(0,"small",50),s._uU(1," Please enter company name.! "),s.qZA())}function Fz(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",21)(1,"h4",35),s._uU(2,"Edit client"),s.qZA(),s.TgZ(3,"button",36),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.KtG(o.dismiss("Cross click"))}),s.qZA()(),s.TgZ(4,"div",24)(5,"form",11),s.NdJ("ngSubmit",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s.TgZ(6,"div",0)(7,"div",33)(8,"div",37)(9,"label",38),s._uU(10,"Company name"),s.TgZ(11,"span",10),s._uU(12,"*"),s.qZA()(),s._UZ(13,"input",39),s.YNc(14,Pz,2,0,"small",40),s.qZA(),s.TgZ(15,"div"),s._UZ(16,"img",41),s.qZA()(),s.TgZ(17,"div",33)(18,"div",37)(19,"label",42),s._uU(20,"Email"),s.qZA(),s._UZ(21,"input",43),s.qZA(),s.TgZ(22,"div",37)(23,"label",44),s._uU(24,"Phone number"),s.qZA(),s._UZ(25,"input",45),s.qZA(),s.TgZ(26,"div",37)(27,"label",46),s._uU(28,"Address"),s.qZA(),s._UZ(29,"input",47),s.qZA()()()()(),s.TgZ(30,"div",25)(31,"button",48),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onClickEditClientModalClose())}),s._uU(32,"Close"),s.qZA(),s.TgZ(33,"button",49),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s._uU(34,"Save "),s.qZA()()}if(2&n){const e=s.oxw();s.xp6(5),s.Q6J("formGroup",e.clientForm),s.xp6(9),s.Q6J("ngIf",e.clientForm.controls.companyName.touched&&(null==e.clientForm.controls.companyName.errors?null:e.clientForm.controls.companyName.errors.required)),s.xp6(19),s.Q6J("disabled",!e.clientForm.valid)}}let Lz=(()=>{class n{constructor(e,r,i,o,c){this.clientInteractor=e,this.router=r,this.toastr=i,this.modalService=o,this.localStorageService=c,this.clients=[],this.closeResult="",this.clientForm=new Ji({companyName:new Xe("",[An.required]),email:new Xe(""),address:new Xe(""),phoneNumber:new Xe("")})}ngOnInit(){this.fetchClients()}fetchClients(){this.clientInteractor.fetchAll().subscribe({next:e=>{e&&e.success&&(this.clients=e.data)},error:e=>{},complete:()=>{}})}onSubmit(){if(this.clientForm.valid){let e={companyName:this.clientForm.value.companyName,email:this.clientForm.value.email,address:this.clientForm.value.address,phoneNumber:this.clientForm.value.phoneNumber,logo:""};this.selectedClient&&this.selectedClient.id?this.clientInteractor.update(this.selectedClient.id,e).subscribe({next:r=>{this.selectedClient=void 0,this.clientForm.reset(),this.editClientModalReference.dismiss(),this.toastr.success("client successfully updated","Update client"),this.fetchClients()},error:r=>{this.toastr.error("Error occurred while updating the client","Update client")},complete:()=>{}}):this.clientInteractor.create(e).subscribe({next:r=>{this.clientForm.reset(),this.editClientModalReference.dismiss(),this.toastr.success("client successfully saved","Add client"),this.fetchClients()},error:r=>{this.toastr.error("Error occurred while saving the client","Add client")},complete:()=>{}})}else this.toastr.error("Some inputs are incorrect","Edit client")}onClickDeleteClient(){let e=this.localStorageService.get("client");e&&e.id?this.clientInteractor.delete(e.id).subscribe({next:r=>{this.localStorageService.delete("client"),this.toastr.success("Client deleted successfully","Delete client")},error:r=>{this.localStorageService.delete("client"),this.toastr.error("Error occurred while deleting the client","Delete client")},complete:()=>{}}):(this.localStorageService.delete("client"),this.toastr.error("Client not found","Delete client"))}onClickClientToBeDeleted(e){this.localStorageService.add("client",e)}onClickDismiss(){this.localStorageService.delete("client")}openEditClientModal(e,r){this.selectedClient=e,this.clientForm=new Ji({companyName:new Xe(e.companyName,[An.required]),email:new Xe(e.email),phoneNumber:new Xe(e.phoneNumber),address:new Xe(e.address),logo:new Xe(e.logo)}),this.open(r)}open(e){this.editClientModalReference=this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"}),this.editClientModalReference.result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(e){switch(e){case _c.ESC:return"by pressing ESC";case _c.BACKDROP_CLICK:return"by clicking on a backdrop";default:return`with: ${e}`}}onClickEditClientModalClose(){this.clientForm.reset(),this.editClientModalReference.dismiss()}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(Yy),s.Y36(Cr),s.Y36(Au),s.Y36(aS),s.Y36(ih))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-clients"]],decls:59,vars:7,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],[4,"ngIf"],[1,"btn","btn-outline-primary","float-right",3,"click"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["type","text","formControlName","companyName","placeholder","Company name","id","companyName"],["type","text","formControlName","email","placeholder","Email","id","email"],["type","tel","formControlName","phoneNumber","placeholder","Phone number","id","phoneNumber"],["type","text","formControlName","address","placeholder","Address","id","address"],["class","aspect-square","src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["id","clientDeleteModal","tabindex","-1","aria-labelledby","clientDeleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","clientDeleteModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],["editClientModal",""],["src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],[3,"click"],[1,"col-5","col-sm-5","col-md-4","col-lg-3","col-xl-3"],["width","28","height","28","src","assets/images/user.jpg","alt","",1,"aspect-square"],[1,"col"],["src","assets/images/delete.png","data-bs-target","#clientDeleteModal","alt","delete","data-bs-toggle","modal","data-bs-placement","top","title","delete",1,"aspect-square","action",3,"click"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"form-group"],["for","clientCompanyName"],["type","companyName","formControlName","companyName","placeholder","Company name","id","clientCompanyName",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],["src","assets/images/user.jpg"],["for","clientEmail"],["type","email","formControlName","email","placeholder","Email","id","clientEmail",1,"form-control"],["for","clientPhoneNumber"],["type","tel","formControlName","phoneNumber","placeholder","Phone number","id","clientPhoneNumber",1,"form-control"],["for","clientAddress"],["type","tel","formControlName","address","placeholder","Address","id","clientAddress",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"form-text","text-muted","text-danger"]],template:function(r,i){if(1&r){const o=s.EpF();s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),s.YNc(5,Rz,2,1,"b",5),s._uU(6," Clients "),s.qZA(),s.TgZ(7,"button",6),s.NdJ("click",function(){s.CHM(o);const d=s.MAs(58);return s.KtG(i.open(d))}),s._uU(8,"Add "),s.qZA()(),s.TgZ(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead")(13,"tr")(14,"th"),s._uU(15,"Company name"),s.TgZ(16,"span",10),s._uU(17,"*"),s.qZA()(),s.TgZ(18,"th"),s._uU(19,"Email"),s.qZA(),s.TgZ(20,"th"),s._uU(21,"Phone number"),s.qZA(),s.TgZ(22,"th"),s._uU(23,"Address"),s.qZA(),s._UZ(24,"th"),s.qZA()(),s.TgZ(25,"tbody")(26,"tr")(27,"td")(28,"form",11),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(29,"input",12),s.qZA()(),s.TgZ(30,"td")(31,"form",11),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(32,"input",13),s.qZA()(),s.TgZ(33,"td")(34,"form",11),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(35,"input",14),s.qZA()(),s.TgZ(36,"td")(37,"form",11),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(38,"input",15),s.qZA()(),s.TgZ(39,"td"),s.YNc(40,Oz,1,0,"img",16),s.qZA()(),s.YNc(41,Mz,16,4,"tr",17),s.qZA()()()()()()(),s.TgZ(42,"div",18)(43,"div",19)(44,"div",20)(45,"div",21)(46,"h5",22),s._uU(47,"Delete client"),s.qZA(),s._UZ(48,"button",23),s.qZA(),s.TgZ(49,"div",24)(50,"b"),s._uU(51,"Do you really want to delete this client?"),s.qZA()(),s.TgZ(52,"div",25)(53,"button",26),s.NdJ("click",function(){return i.onClickDismiss()}),s._uU(54,"Close "),s.qZA(),s.TgZ(55,"button",27),s.NdJ("click",function(){return i.onClickDeleteClient()}),s._uU(56," Confirm "),s.qZA()()()()(),s.YNc(57,Fz,35,3,"ng-template",null,28,s.W1O)}2&r&&(s.xp6(5),s.Q6J("ngIf",i.clients),s.xp6(23),s.Q6J("formGroup",i.clientForm),s.xp6(3),s.Q6J("formGroup",i.clientForm),s.xp6(3),s.Q6J("formGroup",i.clientForm),s.xp6(3),s.Q6J("formGroup",i.clientForm),s.xp6(3),s.Q6J("ngIf",i.clientForm.valid),s.xp6(1),s.Q6J("ngForOf",i.clients))},dependencies:[or,gr,uc,lc,Eu,Kd,dc,Du],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})();var Qf=(()=>{return(n=Qf||(Qf={})).AED="AED",n.USD="USD",n.EUR="EUR",Qf;var n})();let uB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Uz extends Kf{toEntity(t){return{id:t.id,createdAt:t.createdAt,updatedAt:new Date,deleted:!1,currency1:t.currency1,currency2:t.currency2,rate:t.rate,code:t.currency1+t.currency2}}fromEntity(t){return{id:t.id,createdAt:t.createdAt,currency1:t.currency1,currency2:t.currency2,rate:t.rate}}fromRequest(t){return{updatedAt:new Date,deleted:!1,currency1:t.currency1,currency2:t.currency2,rate:t.rate,code:t.currency1+t.currency2}}}let vR=(()=>{class n extends em{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=s.n5z(n)))(i||n)}}();static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.create(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(vR))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wR=(()=>{class n{constructor(e){this.repository=e}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(vR))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dB=(()=>{class n extends uB{constructor(e,r){super(),this.createCurrencyExchangeUseCase=e,this.fetchCurrencyExchangesUseCase=r,this.mapper=new Uz}create(e){let r=this.mapper.fromRequest(e);return r.id=Ky(),r.createdAt=new Date,this.createCurrencyExchangeUseCase.execute(r).pipe((0,S.U)(i=>this.mapper.toResponse(i)))}delete(e){return Fe()}fetchAll(){return this.fetchCurrencyExchangesUseCase.execute().pipe((0,S.U)(e=>this.mapper.toResponses(e)))}fetchOne(e){return Fe()}update(e,r){return Fe()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(bR),s.LFG(wR))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Bz extends Kf{toEntity(t){return{id:t.id,createdAt:t.createdAt,updatedAt:new Date,deleted:!1,totalCalendarDays:t.totalCalendarDays,weekends:t.weekends,paidLeave:t.paidLeave,publicHolidays:t.publicHolidays}}fromEntity(t){return{id:t.id,createdAt:t.createdAt,totalCalendarDays:t.totalCalendarDays,weekends:t.weekends,paidLeave:t.paidLeave,publicHolidays:t.publicHolidays,billableWorkingDays:t.totalCalendarDays??365-t.weekends??104-t.paidLeave??0-t.publicHolidays??0}}fromRequest(t){return{updatedAt:new Date,deleted:!1,totalCalendarDays:t.totalCalendarDays,weekends:t.weekends,paidLeave:t.paidLeave,publicHolidays:t.publicHolidays}}}let fB=(()=>{class n extends em{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=s.n5z(n)))(i||n)}}();static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CR=(()=>{class n{constructor(e){this.repository=e}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(fB))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pB=(()=>{class n extends hB{constructor(e){super(),this.fetchWorkingDaysUseCase=e,this.mapper=new Bz}fetch(){return this.fetchWorkingDaysUseCase.execute().pipe((0,S.U)(e=>this.mapper.toFirstResponse(e)))}update(e,r){return Fe()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(CR))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Vz(n,t){if(1&n&&(s.TgZ(0,"option",30),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function jz(n,t){if(1&n&&(s.TgZ(0,"option",30),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function Hz(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"img",31),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmitCurrency())}),s.qZA()}}function $z(n,t){if(1&n&&(s.TgZ(0,"tr")(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.qZA(),s.TgZ(7,"td"),s._UZ(8,"img",32),s.qZA()()),2&n){const e=t.$implicit;s.xp6(2),s.Oqu(e.currency1),s.xp6(2),s.Oqu(e.currency2),s.xp6(2),s.Oqu(e.rate)}}function Gz(n,t){if(1&n&&(s.TgZ(0,"b"),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Oqu(e.calculateBillableWorkingDays())}}function Zz(n,t){if(1&n&&(s.TgZ(0,"option",33),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}let qz=(()=>{class n{constructor(e,r,i){this.currencyExchangeInteractor=e,this.workingDaysInteractor=r,this.toastr=i,this.languages=["English"],this.currencies=[],this.currencyExchanges=[],this.currencies=Object.values(Qf),this.currencyForm=new Ji({currency1:new Xe("",[An.required]),currency2:new Xe("",[An.required]),rate:new Xe("",[An.required])}),this.workingDaysForm=new Ji({totalCalendarDays:new Xe("",[An.required]),weekends:new Xe("",[An.required]),paidLeave:new Xe("",[An.required]),publicHolidays:new Xe("",[An.required])}),this.languageForm=new Ji({language:new Xe(this.languages[0],[An.required])})}ngOnInit(){this.fetchCurrencyExchanges(),this.fetchWorkingDays()}fetchWorkingDays(){this.workingDaysInteractor.fetch().subscribe({next:e=>{e&&e.success&&(this.workingDaysResponse=e.data,this.workingDaysForm.setValue({totalCalendarDays:this.workingDaysResponse.totalCalendarDays,weekends:this.workingDaysResponse.weekends,paidLeave:this.workingDaysResponse.paidLeave,publicHolidays:this.workingDaysResponse.publicHolidays}))},error:e=>{},complete:()=>{}})}calculateBillableWorkingDays(){return this.workingDaysResponse.totalCalendarDays-this.workingDaysResponse.weekends-this.workingDaysResponse.paidLeave-this.workingDaysResponse.publicHolidays}fetchCurrencyExchanges(){this.currencyExchangeInteractor.fetchAll().subscribe({next:e=>{e&&e.success&&(this.currencyExchanges=e.data)},error:e=>{},complete:()=>{}})}onSubmitCurrency(){this.currencyForm.valid?this.currencyExchangeInteractor.create({currency1:this.currencyForm.value.currency1,currency2:this.currencyForm.value.currency2,rate:this.currencyForm.value.rate}).subscribe({next:r=>{this.toastr.success("currency exchange successfully saved","Success"),this.fetchCurrencyExchanges(),this.currencyForm.reset()},error:r=>{this.toastr.error("Error occurred while saving the currency exchange","Error")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Error")}onSubmitWorkingDays(){this.workingDaysForm.valid?this.workingDaysInteractor.update(this.workingDaysResponse.id,{totalCalendarDays:this.workingDaysForm.value.totalCalendarDays,weekends:this.workingDaysForm.value.weekends,paidLeave:this.workingDaysForm.value.paidLeave,publicHolidays:this.workingDaysForm.value.publicHolidays}).subscribe({next:r=>{this.toastr.success("working days successfully saved","Success"),this.fetchCurrencyExchanges(),this.currencyForm.reset()},error:r=>{this.toastr.error("Error occurred while saving working days","Error")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Error")}onSubmitLanguage(){}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(dB),s.Y36(pB),s.Y36(Au))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-settings"]],decls:109,vars:14,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],["href","","data-bs-toggle","modal","data-bs-target","#addClientModal",1,"btn","btn-outline-primary","float-right"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["formControlName","currency1",2,"color","black"],["value","","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","currency2",2,"color","black"],["type","number","formControlName","rate","placeholder","Rate","id","rate"],["class","aspect-square","src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["href","",1,"btn","btn-outline-success","float-right",3,"click"],["type","number","formControlName","totalCalendarDays","placeholder","Total calendar days","id","totalCalendarDays"],["type","number","formControlName","weekends","placeholder","Weekends","id","weekends"],["type","number","formControlName","paidLeave","placeholder","Paid leave","id","paidLeave"],["type","number","formControlName","publicHolidays","placeholder","Public holidays","id","publicHolidays"],["href","",1,"btn","btn-outline-success","float-right"],[1,"card-block","m-3"],[1,"form-group"],["for","language"],["formControlName","language","id","language",1,"form-control"],["style","color: black;",3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],["src","assets/images/delete.png","alt","delete","data-bs-toggle","tooltip","data-bs-placement","top","title","delete",1,"aspect-square","action"],[2,"color","black",3,"ngValue"]],template:function(r,i){1&r&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),s._UZ(5,"b"),s._uU(6," Currencies "),s.qZA(),s.TgZ(7,"a",5),s._uU(8,"Add"),s.qZA()(),s.TgZ(9,"div",6)(10,"div",7)(11,"table",8)(12,"thead")(13,"tr")(14,"th"),s._uU(15,"Currency 1"),s.TgZ(16,"span",9),s._uU(17,"*"),s.qZA()(),s.TgZ(18,"th"),s._uU(19,"Currency 2"),s.TgZ(20,"span",9),s._uU(21,"*"),s.qZA()(),s.TgZ(22,"th"),s._uU(23,"Rate"),s.TgZ(24,"span",9),s._uU(25,"*"),s.qZA()(),s._UZ(26,"th"),s.qZA()(),s.TgZ(27,"tbody")(28,"tr")(29,"td")(30,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitCurrency()}),s.TgZ(31,"select",11)(32,"option",12),s._uU(33,"Select currency"),s.qZA(),s.YNc(34,Vz,2,2,"option",13),s.qZA()()(),s.TgZ(35,"td")(36,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitCurrency()}),s.TgZ(37,"select",14)(38,"option",12),s._uU(39,"Select currency"),s.qZA(),s.YNc(40,jz,2,2,"option",13),s.qZA()()(),s.TgZ(41,"td")(42,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitCurrency()}),s._UZ(43,"input",15),s.qZA()(),s.TgZ(44,"td"),s.YNc(45,Hz,1,0,"img",16),s.qZA()(),s.YNc(46,$z,9,3,"tr",17),s.qZA()()()()()()(),s.TgZ(47,"div",0)(48,"div",1)(49,"div",2)(50,"div",3)(51,"h4",4),s._UZ(52,"b"),s._uU(53," Billable working days : "),s.YNc(54,Gz,2,1,"b",18),s.qZA(),s.TgZ(55,"a",19),s.NdJ("click",function(){return i.onSubmitWorkingDays()}),s._uU(56,"Save"),s.qZA()(),s.TgZ(57,"div",6)(58,"div",7)(59,"table",8)(60,"thead")(61,"tr")(62,"th"),s._uU(63,"Type of days"),s.qZA(),s.TgZ(64,"th"),s._uU(65,"Value"),s.qZA()()(),s.TgZ(66,"tbody")(67,"tr")(68,"td"),s._uU(69," Total calendar days "),s.qZA(),s.TgZ(70,"td")(71,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),s._UZ(72,"input",20),s.qZA()()(),s.TgZ(73,"tr")(74,"td"),s._uU(75," Weekends "),s.qZA(),s.TgZ(76,"td")(77,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),s._UZ(78,"input",21),s.qZA()()(),s.TgZ(79,"tr")(80,"td"),s._uU(81," Paid leave "),s.qZA(),s.TgZ(82,"td")(83,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),s._UZ(84,"input",22),s.qZA()()(),s.TgZ(85,"tr")(86,"td"),s._uU(87," Public holidays "),s.qZA(),s.TgZ(88,"td")(89,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),s._UZ(90,"input",23),s.qZA()()()()()()()()()(),s.TgZ(91,"div",0)(92,"div",1)(93,"div",2)(94,"div",3)(95,"h4",4),s._UZ(96,"b"),s._uU(97," Languages"),s.qZA(),s.TgZ(98,"a",24),s._uU(99,"Save"),s.qZA()(),s.TgZ(100,"div",25)(101,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitLanguage()}),s.TgZ(102,"div",26)(103,"label",27),s._uU(104,"Language"),s.qZA(),s.TgZ(105,"select",28)(106,"option",12),s._uU(107,"Select language"),s.qZA(),s.YNc(108,Zz,2,2,"option",29),s.qZA()()()()()()()),2&r&&(s.xp6(30),s.Q6J("formGroup",i.currencyForm),s.xp6(4),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("formGroup",i.currencyForm),s.xp6(4),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("formGroup",i.currencyForm),s.xp6(3),s.Q6J("ngIf",i.currencyForm.valid),s.xp6(1),s.Q6J("ngForOf",i.currencyExchanges),s.xp6(8),s.Q6J("ngIf",i.workingDaysResponse),s.xp6(17),s.Q6J("formGroup",i.workingDaysForm),s.xp6(6),s.Q6J("formGroup",i.workingDaysForm),s.xp6(6),s.Q6J("formGroup",i.workingDaysForm),s.xp6(6),s.Q6J("formGroup",i.workingDaysForm),s.xp6(12),s.Q6J("formGroup",i.languageForm),s.xp6(7),s.Q6J("ngForOf",i.languages))},dependencies:[or,gr,uc,xy,qg,lc,Gg,Xd,Eu,Kd,dc,Du],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})();var lS=(()=>{return(n=lS||(lS={})).EOD="EOD",n.WORK_PACKAGE="WORK PACKAGE",lS;var n})(),fs=(()=>{return(n=fs||(fs={})).Annually="ANNUALLY",n.Monthly="MONTHLY",n.Weekly="WEEKLY",n.Daily="DAILY",n.Hourly="HOURLY",fs;var n})();class zz extends Kf{toEntity(t){return{id:t.id,createdAt:t.createdAt,updatedAt:new Date,deleted:!1,companyName:t.companyName,email:t.email,phoneNumber:t.phoneNumber,address:t.address,logo:t.logo}}fromEntity(t){return{id:t.id,createdAt:t.createdAt,companyName:t.companyName,email:t.email,phoneNumber:t.phoneNumber,address:t.address,logo:t.logo}}fromRequest(t){return{updatedAt:new Date,deleted:!1,companyName:t.companyName,email:t.email,phoneNumber:t.phoneNumber,address:t.address,logo:t.logo}}}let Mw=(()=>{class n extends em{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=s.n5z(n)))(i||n)}}();static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.create(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Mw))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ER=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.delete(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Mw))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),DR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.update(e.id,e.request)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Mw))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SR=(()=>{class n{constructor(e){this.repository=e}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Mw))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gB=(()=>{class n extends Yy{constructor(e,r,i,o){super(),this.createClientUseCase=e,this.deleteClientUseCase=r,this.updateClientUseCase=i,this.fetchClientsUseCase=o,this.mapper=new zz}create(e){let r=this.mapper.fromRequest(e);return r.id=Ky(),r.createdAt=new Date,this.createClientUseCase.execute(r).pipe((0,S.U)(i=>this.mapper.toResponse(i)))}delete(e){return this.deleteClientUseCase.execute(e),Fe(this.mapper.toEmptyResponse())}fetchAll(){return this.fetchClientsUseCase.execute().pipe((0,S.U)(e=>this.mapper.toResponses(e)))}fetchOne(e){return Fe()}update(e,r){return this.updateClientUseCase.execute({id:e,request:this.mapper.fromRequest(r)}),Fe(this.mapper.toEmptyResponse())}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(TR),s.LFG(ER),s.LFG(DR),s.LFG(SR))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const cm_resource_insurance="ANNUALLY AED 790",cm_resource_flightTicket="ANNUALLY AED 2500",cm_resource_workPermit="ANNUALLY AED 6500",cm_resource_office="DAILY AED 19",cm_resource_generalSupportPackage="DAILY AED 15",cm_resource_laptopWorkstation="ANNUALLY AED 5000",cm_resource_licenses="ANNUALLY AED 400";class Wz extends Kf{toEntity(t){return{id:t.id,createdAt:t.createdAt,updatedAt:new Date,deleted:!1,jobTitle:t.jobTitle,resourceType:t.resourceType,workload:t.workload,project:t.project,basicSalary:t.basicSalary,allowance:t.allowance,gratuity:t.gratuity,insurance:t.insurance,flightTicket:t.flightTicket,workPermit:t.workPermit,office:t.office,generalSupportPackage:t.generalSupportPackage,laptopWorkstation:t.laptopWorkstation,licenses:t.licenses}}fromEntity(t){return{id:t.id,createdAt:t.createdAt,jobTitle:t.jobTitle,resourceType:t.resourceType,workload:t.workload,project:t.project,basicSalary:t.basicSalary,allowance:t.allowance,gratuity:t.gratuity,insurance:t.insurance,flightTicket:t.flightTicket,workPermit:t.workPermit,office:t.office,generalSupportPackage:t.generalSupportPackage,laptopWorkstation:t.laptopWorkstation,licenses:t.licenses}}fromRequest(t){return{updatedAt:new Date,deleted:!1,jobTitle:t.jobTitle,resourceType:t.resourceType,workload:t.workload,project:t.project,basicSalary:t.basicSalary,allowance:t.allowance,gratuity:t.gratuity,insurance:t.insurance??cm_resource_insurance,flightTicket:t.flightTicket??cm_resource_flightTicket,workPermit:t.workPermit??cm_resource_workPermit,office:t.office??cm_resource_office,generalSupportPackage:t.generalSupportPackage??cm_resource_generalSupportPackage,laptopWorkstation:t.laptopWorkstation??cm_resource_laptopWorkstation,licenses:t.licenses??cm_resource_licenses}}}let rv=(()=>{class n extends em{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=s.n5z(n)))(i||n)}}();static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.create(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(rv))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),AR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.fetchByProject(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(rv))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),NR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.delete(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(rv))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.update(e.id,e.request)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(rv))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kR=(()=>{class n{constructor(e){this.repository=e}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(rv))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_B=(()=>{class n extends mB{constructor(e,r,i,o,c){super(),this.createResourceUseCase=e,this.fetchProjectResourcesUseCase=r,this.deleteResourceUseCase=i,this.updateResourceUseCase=o,this.fetchResourcesUseCase=c,this.mapper=new Wz}create(e){let r=this.mapper.fromRequest(e);return r.id=Ky(),r.createdAt=new Date,this.createResourceUseCase.execute(r).pipe((0,S.U)(i=>this.mapper.toResponse(i)))}delete(e){return this.deleteResourceUseCase.execute(e),Fe(this.mapper.toEmptyResponse())}fetchAll(){return this.fetchResourcesUseCase.execute().pipe((0,S.U)(e=>this.mapper.toResponses(e)))}fetchByProject(e){return this.fetchProjectResourcesUseCase.execute(e).pipe((0,S.U)(r=>this.mapper.toResponses(r)))}fetchOne(e){return Fe()}update(e,r){return this.updateResourceUseCase.execute({id:e,request:this.mapper.fromRequest(r)}),Fe(this.mapper.toEmptyResponse())}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(IR),s.LFG(AR),s.LFG(NR),s.LFG(xR),s.LFG(kR))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yB=(()=>{class n{transform(e){return Number(e).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=s.Yjl({name:"amount",type:n,pure:!0})}return n})();function Kz(n,t){1&n&&(s.TgZ(0,"small",81),s._uU(1," Please enter project title "),s.qZA())}function Yz(n,t){if(1&n&&(s.TgZ(0,"option",82),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e.id),s.xp6(1),s.Oqu(e.companyName)}}function Jz(n,t){if(1&n&&(s.TgZ(0,"b"),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Oqu(e.resources.length)}}function Qz(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function Xz(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function e5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function t5(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"img",84),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s.qZA()}}function n5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function r5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function i5(n,t){if(1&n&&(s.TgZ(0,"select",85),s.YNc(1,r5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function s5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function o5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function a5(n,t){if(1&n&&(s.TgZ(0,"select",86),s.YNc(1,o5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function l5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function c5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function u5(n,t){if(1&n&&(s.TgZ(0,"select",87),s.YNc(1,c5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function d5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function h5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function f5(n,t){if(1&n&&(s.TgZ(0,"select",88),s.YNc(1,h5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function p5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function g5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function m5(n,t){if(1&n&&(s.TgZ(0,"select",89),s.YNc(1,g5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function _5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function y5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function v5(n,t){if(1&n&&(s.TgZ(0,"select",90),s.YNc(1,y5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function b5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function w5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function C5(n,t){if(1&n&&(s.TgZ(0,"select",91),s.YNc(1,w5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function T5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function E5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function D5(n,t){if(1&n&&(s.TgZ(0,"select",92),s.YNc(1,E5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function S5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function I5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function A5(n,t){if(1&n&&(s.TgZ(0,"select",93),s.YNc(1,I5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function N5(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"tr")(1,"td",94),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(184);return s.KtG(c.openEditResourceModal(o,d))}),s.TgZ(2,"h2"),s._uU(3),s.qZA()(),s.TgZ(4,"td",94),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(184);return s.KtG(c.openEditResourceModal(o,d))}),s._uU(5),s.qZA(),s.TgZ(6,"td",94),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(184);return s.KtG(c.openEditResourceModal(o,d))}),s._uU(7),s.qZA(),s.TgZ(8,"td",94),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(184);return s.KtG(c.openEditResourceModal(o,d))}),s._uU(9),s.qZA(),s.TgZ(10,"td"),s._UZ(11,"img",95),s.TgZ(12,"img",96),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickResourceToBeDeleted(o))}),s.qZA()(),s.TgZ(13,"td",94),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(184);return s.KtG(c.openEditResourceModal(o,d))}),s._uU(14),s.qZA(),s.TgZ(15,"td",94),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(184);return s.KtG(c.openEditResourceModal(o,d))}),s._uU(16),s.qZA(),s.TgZ(17,"td",94),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(184);return s.KtG(c.openEditResourceModal(o,d))}),s._uU(18),s.qZA(),s.TgZ(19,"td",94),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(184);return s.KtG(c.openEditResourceModal(o,d))}),s._uU(20),s.qZA(),s.TgZ(21,"td",94),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(184);return s.KtG(c.openEditResourceModal(o,d))}),s._uU(22),s.qZA(),s.TgZ(23,"td",94),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(184);return s.KtG(c.openEditResourceModal(o,d))}),s._uU(24),s.qZA(),s.TgZ(25,"td",94),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(184);return s.KtG(c.openEditResourceModal(o,d))}),s._uU(26),s.qZA(),s.TgZ(27,"td",94),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(184);return s.KtG(c.openEditResourceModal(o,d))}),s._uU(28),s.qZA(),s.TgZ(29,"td",94),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(184);return s.KtG(c.openEditResourceModal(o,d))}),s._uU(30),s.qZA()()}if(2&n){const e=t.$implicit;s.xp6(3),s.Oqu(e.jobTitle),s.xp6(2),s.Oqu(e.resourceType),s.xp6(2),s.Oqu(e.basicSalary),s.xp6(2),s.Oqu(e.workload),s.xp6(5),s.Oqu(e.allowance),s.xp6(2),s.Oqu(e.gratuity),s.xp6(2),s.Oqu(e.insurance),s.xp6(2),s.Oqu(e.flightTicket),s.xp6(2),s.Oqu(e.workPermit),s.xp6(2),s.Oqu(e.office),s.xp6(2),s.Oqu(e.generalSupportPackage),s.xp6(2),s.Oqu(e.laptopWorkstation),s.xp6(2),s.Oqu(e.licenses)}}function x5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function k5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function R5(n,t){if(1&n&&(s.TgZ(0,"th"),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.xp6(1),s.Oqu(e)}}function O5(n,t){if(1&n&&(s.TgZ(0,"td")(1,"h2"),s._uU(2),s.ALo(3,"amount"),s.qZA()()),2&n){const e=t.$implicit,r=s.oxw().$implicit,i=s.oxw(2);s.xp6(2),s.Oqu(s.lcZ(3,1,i.calculateCurrencyPeriodCost(e,r)))}}function M5(n,t){if(1&n&&(s.TgZ(0,"tr")(1,"td")(2,"h2"),s._uU(3),s.qZA()(),s.YNc(4,O5,4,3,"td",68),s.qZA()),2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(3),s.Oqu(e),s.xp6(1),s.Q6J("ngForOf",r.displayCurrencies)}}function P5(n,t){if(1&n&&(s.TgZ(0,"th"),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.xp6(1),s.Oqu(e)}}function F5(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"td")(1,"h2"),s._uU(2),s.ALo(3,"amount"),s.qZA(),s.TgZ(4,"div",107)(5,"input",108),s.NdJ("change",function(i){const c=s.CHM(e).$implicit,d=s.oxw().$implicit,f=s.oxw(2);return s.KtG(f.onChangePrice(d,c,i))}),s.qZA()()()}if(2&n){const e=t.$implicit,r=s.oxw().$implicit,i=s.oxw(2);s.xp6(2),s.hij(" ",s.lcZ(3,3,i.calculateCurrencyPeriodPrice(e,r))," "),s.xp6(2),s.Q6J("formGroup",i.pricesForm),s.xp6(1),s.s9C("placeholder",i.calculateCurrencyPeriodPrice(e,r))}}function L5(n,t){if(1&n&&(s.TgZ(0,"tr")(1,"td")(2,"h2"),s._uU(3),s.qZA()(),s.YNc(4,F5,6,5,"td",68),s.qZA()),2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(3),s.Oqu(e),s.xp6(1),s.Q6J("ngForOf",r.displayCurrencies)}}function U5(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",2)(1,"div",27)(2,"div",0)(3,"div",1)(4,"form",10),s.NdJ("ngSubmit",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmitDisplay())}),s.TgZ(5,"div",2)(6,"div",97)(7,"label",98)(8,"strong"),s._uU(9,"Display amount in selected period"),s.qZA()(),s.TgZ(10,"select",99),s.NdJ("change",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onChangePeriod())}),s.YNc(11,x5,2,2,"option",35),s.qZA()(),s.TgZ(12,"div",5)(13,"label",100)(14,"strong"),s._uU(15,"Convert amounts in selected currency"),s.qZA()(),s.TgZ(16,"select",101),s.NdJ("change",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onChangeCurrency())}),s.YNc(17,k5,2,2,"option",35),s.qZA()()()()(),s.TgZ(18,"div",9)(19,"div",31)(20,"table",32)(21,"thead")(22,"tr")(23,"th")(24,"h4"),s._uU(25,"Costs"),s.qZA()(),s.YNc(26,R5,2,1,"th",68),s.qZA()(),s.TgZ(27,"tbody"),s.YNc(28,M5,5,2,"tr",68),s.qZA()()(),s.TgZ(29,"div",102)(30,"div",5)(31,"form",10),s.NdJ("ngSubmit",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmitProject())}),s.TgZ(32,"label",103),s._uU(33,"Margin (%)"),s.qZA(),s._UZ(34,"input",104),s.qZA()(),s.TgZ(35,"div",5)(36,"form",10),s.NdJ("ngSubmit",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmitProject())}),s.TgZ(37,"label",105),s._uU(38,"Risk provision (%)"),s.qZA(),s._UZ(39,"input",106),s.qZA()()(),s.TgZ(40,"div",31)(41,"table",32)(42,"thead")(43,"tr")(44,"th")(45,"h4"),s._uU(46,"Prices"),s.qZA()(),s.YNc(47,P5,2,1,"th",68),s.qZA()(),s.TgZ(48,"tbody"),s.YNc(49,L5,5,2,"tr",68),s.qZA()()()()()()()}if(2&n){const e=s.oxw();s.xp6(4),s.Q6J("formGroup",e.displayForm),s.xp6(7),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(9),s.Q6J("ngForOf",e.displayCurrencies),s.xp6(2),s.Q6J("ngForOf",e.displayPeriods),s.xp6(3),s.Q6J("formGroup",e.projectForm),s.xp6(5),s.Q6J("formGroup",e.projectForm),s.xp6(11),s.Q6J("ngForOf",e.displayCurrencies),s.xp6(2),s.Q6J("ngForOf",e.displayPeriods)}}function B5(n,t){1&n&&(s.TgZ(0,"small",81),s._uU(1," Please enter job title! "),s.qZA())}function V5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function j5(n,t){1&n&&(s.TgZ(0,"small",81),s._uU(1," Please select resource type! "),s.qZA())}function H5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function $5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function G5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function Z5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function q5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function z5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function W5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function K5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function Y5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function J5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function Q5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function X5(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function eW(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function tW(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function nW(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function rW(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function iW(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function sW(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function oW(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function aW(n,t){if(1&n&&(s.TgZ(0,"option",83),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function lW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",73)(1,"h4",109),s._uU(2,"Edit resource"),s.qZA(),s.TgZ(3,"button",110),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.KtG(o.dismiss("Cross click"))}),s.qZA()(),s.TgZ(4,"div",76)(5,"form",10),s.NdJ("ngSubmit",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s.TgZ(6,"div",2)(7,"div",111)(8,"div",112)(9,"label",113),s._uU(10,"Job title"),s.TgZ(11,"span",14),s._uU(12,"*"),s.qZA()(),s._UZ(13,"input",114),s.YNc(14,B5,2,0,"small",16),s.qZA(),s.TgZ(15,"div",112)(16,"label",113),s._uU(17,"Resource type"),s.TgZ(18,"span",14),s._uU(19,"*"),s.qZA()(),s.TgZ(20,"select",115)(21,"option",20),s._uU(22,"Select resource type"),s.qZA(),s.YNc(23,V5,2,2,"option",35),s.qZA(),s.YNc(24,j5,2,0,"small",16),s.qZA(),s.TgZ(25,"div",116)(26,"label",117),s._uU(27,"Basic salary"),s.TgZ(28,"span",14),s._uU(29,"*"),s.qZA()(),s.TgZ(30,"div",118)(31,"select",119),s.NdJ("change",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onChangeBasicSalary())}),s.YNc(32,H5,2,2,"option",35),s.qZA()(),s.TgZ(33,"div",5)(34,"input",120),s.NdJ("change",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onChangeBasicSalary())}),s.qZA()(),s.TgZ(35,"div",121)(36,"select",122),s.NdJ("change",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onChangeBasicSalary())}),s.YNc(37,$5,2,2,"option",35),s.qZA()()(),s.TgZ(38,"div",116)(39,"label",123),s._uU(40,"Workload"),s.qZA(),s._UZ(41,"input",124),s.qZA()(),s.TgZ(42,"div",111)(43,"div",116)(44,"label",125),s._uU(45,"Allowance"),s.qZA(),s.TgZ(46,"div",118)(47,"select",126),s.YNc(48,G5,2,2,"option",35),s.qZA()(),s.TgZ(49,"div",5),s._UZ(50,"input",127),s.qZA(),s.TgZ(51,"div",121)(52,"select",128),s.YNc(53,Z5,2,2,"option",35),s.qZA()()(),s.TgZ(54,"div",116)(55,"label",129),s._uU(56,"Gratuity / End of service"),s.qZA(),s.TgZ(57,"div",118)(58,"select",130),s.YNc(59,q5,2,2,"option",35),s.qZA()(),s.TgZ(60,"div",5),s._UZ(61,"input",131),s.qZA(),s.TgZ(62,"div",121)(63,"select",132),s.YNc(64,z5,2,2,"option",35),s.qZA()()(),s.TgZ(65,"div",116)(66,"label",133),s._uU(67,"Insurance"),s.qZA(),s.TgZ(68,"div",118)(69,"select",134),s.YNc(70,W5,2,2,"option",35),s.qZA()(),s.TgZ(71,"div",5),s._UZ(72,"input",135),s.qZA(),s.TgZ(73,"div",121)(74,"select",136),s.YNc(75,K5,2,2,"option",35),s.qZA()()(),s.TgZ(76,"div",116)(77,"label",137),s._uU(78,"Annual flight ticket"),s.qZA(),s.TgZ(79,"div",118)(80,"select",138),s.YNc(81,Y5,2,2,"option",35),s.qZA()(),s.TgZ(82,"div",5),s._UZ(83,"input",139),s.qZA(),s.TgZ(84,"div",121)(85,"select",140),s.YNc(86,J5,2,2,"option",35),s.qZA()()(),s.TgZ(87,"div",116)(88,"label",141),s._uU(89,"VISA / Work Permit"),s.qZA(),s.TgZ(90,"div",118)(91,"select",142),s.YNc(92,Q5,2,2,"option",35),s.qZA()(),s.TgZ(93,"div",5),s._UZ(94,"input",143),s.qZA(),s.TgZ(95,"div",121)(96,"select",144),s.YNc(97,X5,2,2,"option",35),s.qZA()()()(),s.TgZ(98,"div",5)(99,"div",116)(100,"label",145),s._uU(101,"Office"),s.qZA(),s.TgZ(102,"div",118)(103,"select",146),s.YNc(104,eW,2,2,"option",35),s.qZA()(),s.TgZ(105,"div",5),s._UZ(106,"input",147),s.qZA(),s.TgZ(107,"div",121)(108,"select",148),s.YNc(109,tW,2,2,"option",35),s.qZA()()(),s.TgZ(110,"div",116)(111,"label",149),s._uU(112,"General support package"),s.qZA(),s.TgZ(113,"div",118)(114,"select",150),s.YNc(115,nW,2,2,"option",35),s.qZA()(),s.TgZ(116,"div",5),s._UZ(117,"input",151),s.qZA(),s.TgZ(118,"div",121)(119,"select",152),s.YNc(120,rW,2,2,"option",35),s.qZA()()(),s.TgZ(121,"div",116)(122,"label",153),s._uU(123,"Laptop workstation"),s.qZA(),s.TgZ(124,"div",118)(125,"select",154),s.YNc(126,iW,2,2,"option",35),s.qZA()(),s.TgZ(127,"div",5),s._UZ(128,"input",155),s.qZA(),s.TgZ(129,"div",121)(130,"select",156),s.YNc(131,sW,2,2,"option",35),s.qZA()()(),s.TgZ(132,"div",116)(133,"label",157),s._uU(134,"Licenses"),s.qZA(),s.TgZ(135,"div",118)(136,"select",158),s.YNc(137,oW,2,2,"option",35),s.qZA()(),s.TgZ(138,"div",5),s._UZ(139,"input",159),s.qZA(),s.TgZ(140,"div",121)(141,"select",160),s.YNc(142,aW,2,2,"option",35),s.qZA()()()()()()(),s.TgZ(143,"div",77)(144,"button",161),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onClickEditResourceModalClose())}),s._uU(145,"Close"),s.qZA(),s.TgZ(146,"button",162),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s._uU(147,"Save "),s.qZA()()}if(2&n){const e=s.oxw();s.xp6(5),s.Q6J("formGroup",e.resourceForm),s.xp6(9),s.Q6J("ngIf",e.resourceForm.controls.jobTitle.touched&&(null==e.resourceForm.controls.jobTitle.errors?null:e.resourceForm.controls.jobTitle.errors.required)),s.xp6(9),s.Q6J("ngForOf",e.resourceTypes),s.xp6(1),s.Q6J("ngIf",e.resourceForm.controls.resourceType.touched&&(null==e.resourceForm.controls.resourceType.errors?null:e.resourceForm.controls.resourceType.errors.required)),s.xp6(8),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(11),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(7),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(4),s.Q6J("disabled",!e.resourceForm.valid)}}let cW=(()=>{class n{constructor(e,r,i,o,c,d,f){this.localStorageService=e,this.toastr=r,this.router=i,this.modalService=o,this.clientInteractor=c,this.projectInteractor=d,this.resourceInteractor=f,this.clients=[],this.resources=[],this.resourceTypes=[],this.currencies=[],this.periods=[],this.displayCurrencies=[],this.displayPeriods=[],this.closeResult="",this.project=e.get("project"),this.periods=Object.values(fs),this.resourceTypes=Object.values(lS),this.currencies=Object.values(Qf),this.displayCurrencies.push(Qf.AED),this.displayPeriods.push(fs.Annually),this.resourceForm=this.initResourceForm(),this.projectForm=new Ji({title:new Xe(this.project.title,[An.required]),client:new Xe(this.project.client,[An.required]),description:new Xe(this.project.description),duration:new Xe(this.project.duration),margin:new Xe(this.project.margin),riskProvision:new Xe(this.project.riskProvision)}),this.displayForm=new Ji({period:new Xe(fs.Annually),currency:new Xe(Qf.AED)}),this.pricesForm=new Ji({period:new Xe(""),currency:new Xe(""),amount:new Xe("")})}ngOnInit(){this.fetchClients(),this.fetchResources(this.project.id)}initResourceForm(e){return new Ji({jobTitle:new Xe((e=e??{}).jobTitle?e.jobTitle:"",[An.required]),resourceType:new Xe(e.resourceType?e.resourceType:"",[An.required]),workload:new Xe(e&&e.workload?e.workload:""),basicSalaryPeriod:new Xe(e.basicSalary?this.getPeriod(e.basicSalary):"MONTHLY"),basicSalaryCurrency:new Xe(e.basicSalary?this.getCurrency(e.basicSalary):"AED"),basicSalary:new Xe(this.getAmount(e.basicSalary),[An.required]),allowancePeriod:new Xe(e.allowance?this.getPeriod(e.allowance):"MONTHLY"),allowanceCurrency:new Xe(this.getCurrency(e.allowance)),allowance:new Xe(this.getAmount(e.allowance)),gratuityPeriod:new Xe(e.gratuity?this.getPeriod(e.gratuity):"ANNUALLY"),gratuityCurrency:new Xe(this.getCurrency(e.gratuity)),gratuity:new Xe(this.getAmount(e.gratuity)),insurancePeriod:new Xe(e.insurance?this.getPeriod(e.insurance):"ANNUALLY"),insuranceCurrency:new Xe(this.getCurrency(e.insurance)),insurance:new Xe(e.insurance?this.getAmount(e.insurance):"790"),flightTicketPeriod:new Xe(e.flightTicket?this.getPeriod(e.flightTicket):"ANNUALLY"),flightTicketCurrency:new Xe(this.getCurrency(e.flightTicket)),flightTicket:new Xe(e.flightTicket?this.getAmount(e.flightTicket):"2500"),workPermitPeriod:new Xe(e.workPermit?this.getPeriod(e.workPermit):"ANNUALLY"),workPermitCurrency:new Xe(this.getCurrency(e.workPermit)),workPermit:new Xe(e.workPermit?this.getAmount(e.workPermit):"6500"),officePeriod:new Xe(e.office?this.getPeriod(e.office):"DAILY"),officeCurrency:new Xe(this.getCurrency(e.office)),office:new Xe(e.office?this.getAmount(e.office):"19"),generalSupportPackagePeriod:new Xe(e.generalSupportPackage?this.getPeriod(e.generalSupportPackage):"DAILY"),generalSupportPackageCurrency:new Xe(this.getCurrency(e.generalSupportPackage)),generalSupportPackage:new Xe(e.generalSupportPackage?this.getAmount(e.generalSupportPackage):"15"),laptopWorkstationPeriod:new Xe(e.laptopWorkstation?this.getPeriod(e.laptopWorkstation):"ANNUALLY"),laptopWorkstationCurrency:new Xe(this.getCurrency(e.laptopWorkstation)),laptopWorkstation:new Xe(e.laptopWorkstation?this.getAmount(e.laptopWorkstation):"5000"),licensesPeriod:new Xe(e.licenses?this.getPeriod(e.licenses):"ANNUALLY"),licensesCurrency:new Xe(this.getCurrency(e.licenses)),licenses:new Xe(e.licenses?this.getAmount(e.licenses):"400")})}fetchClients(){this.clientInteractor.fetchAll().subscribe({next:e=>{e&&e.success&&(this.clients=e.data)},error:e=>{},complete:()=>{}})}fetchResources(e){this.resourceInteractor.fetchByProject(e).subscribe({next:r=>{r&&r.success&&(this.resources=r.data)},error:r=>{},complete:()=>{}})}splitAmount(e){return e.split(" ")}getAmount(e){return e?this.splitAmount(e)[2]:""}getCurrency(e){return e?this.splitAmount(e)[1]:Qf.AED}getPeriod(e){return e?this.splitAmount(e)[0]:fs.Annually}calculateAttributeAnnualCost(e){let r=0,i=this.splitAmount(e);switch(i[0]){case fs.Annually:r=+i[2];break;case fs.Monthly:r=12*+i[2];break;case fs.Weekly:r=52*+i[2];break;case fs.Daily:r=228*+i[2];break;case fs.Hourly:r=52*+i[2]*48}return r}calculateTotalAnnualCost(){let e=0;return this.resources.forEach(r=>{e+=this.calculateAttributeAnnualCost(r.basicSalary),e+=this.calculateAttributeAnnualCost(r.allowance),e+=this.calculateAttributeAnnualCost(r.gratuity),e+=this.calculateAttributeAnnualCost(r.insurance),e+=this.calculateAttributeAnnualCost(r.flightTicket),e+=this.calculateAttributeAnnualCost(r.workPermit),e+=this.calculateAttributeAnnualCost(r.office),e+=this.calculateAttributeAnnualCost(r.generalSupportPackage),e+=this.calculateAttributeAnnualCost(r.laptopWorkstation),e+=this.calculateAttributeAnnualCost(r.licenses)}),e}calculateByCurrencyAndPeriod(e,r,i){switch(i){case fs.Annually:break;case fs.Monthly:e/=12;break;case fs.Weekly:e/=52;break;case fs.Daily:e/=228;break;case fs.Hourly:e/=2496}return e}calculateCurrencyPeriodCost(e,r){return this.calculateByCurrencyAndPeriod(this.calculateTotalAnnualCost(),e,r)}calculateTotalAnnualPrice(){return(1+this.project.margin/100)*(1+this.project.riskProvision/100)*this.calculateTotalAnnualCost()}calculateCurrencyPeriodPrice(e,r){return this.calculateByCurrencyAndPeriod(this.calculateTotalAnnualPrice(),e,r)}onSubmit(){if(this.resourceForm.valid){let e={jobTitle:this.resourceForm.value.jobTitle,resourceType:this.resourceForm.value.resourceType,workload:this.resourceForm.value.workload,project:this.project.id,basicSalary:this.resourceForm.value.basicSalaryPeriod+" "+this.resourceForm.value.basicSalaryCurrency+" "+this.resourceForm.value.basicSalary,allowance:this.resourceForm.value.allowancePeriod+" "+this.resourceForm.value.allowanceCurrency+" "+this.resourceForm.value.allowance,gratuity:this.resourceForm.value.gratuityPeriod+" "+this.resourceForm.value.gratuityCurrency+" "+this.resourceForm.value.gratuity,insurance:this.resourceForm.value.insurancePeriod+" "+this.resourceForm.value.insuranceCurrency+" "+this.resourceForm.value.insurance,flightTicket:this.resourceForm.value.flightTicketPeriod+" "+this.resourceForm.value.flightTicketCurrency+" "+this.resourceForm.value.flightTicket,workPermit:this.resourceForm.value.workPermitPeriod+" "+this.resourceForm.value.workPermitCurrency+" "+this.resourceForm.value.workPermit,office:this.resourceForm.value.officePeriod+" "+this.resourceForm.value.officeCurrency+" "+this.resourceForm.value.office,generalSupportPackage:this.resourceForm.value.generalSupportPackagePeriod+" "+this.resourceForm.value.generalSupportPackageCurrency+" "+this.resourceForm.value.generalSupportPackage,laptopWorkstation:this.resourceForm.value.laptopWorkstationPeriod+" "+this.resourceForm.value.laptopWorkstationCurrency+" "+this.resourceForm.value.laptopWorkstation,licenses:this.resourceForm.value.licensesPeriod+" "+this.resourceForm.value.licensesCurrency+" "+this.resourceForm.value.licenses};this.selectedResource&&this.selectedResource.id?this.resourceInteractor.update(this.selectedResource.id,e).subscribe({next:r=>{this.selectedResource=void 0,this.resourceForm.reset(),this.editResourceModalReference.dismiss(),this.toastr.success("resource successfully updated","Update resource"),this.fetchResources(this.project.id)},error:r=>{this.toastr.error("Error occurred while updating the client","Update client")},complete:()=>{}}):this.resourceInteractor.create(e).subscribe({next:r=>{this.resourceForm.reset(),this.editResourceModalReference.dismiss(),this.toastr.success("resource successfully saved","Add resource"),this.fetchResources(this.project.id)},error:r=>{this.toastr.error("Error occurred while saving the resource","Add resource")},complete:()=>{}})}else this.toastr.error("Some inputs are incorrect","Edit resource")}onChangeBasicSalary(){this.inputs={jobTitle:this.resourceForm.value.jobTitle,basicSalaryPeriod:this.resourceForm.value.basicSalaryPeriod,basicSalaryCurrency:this.resourceForm.value.basicSalaryCurrency,basicSalary:this.resourceForm.value.basicSalary,resourceType:this.resourceForm.value.resourceType,workload:this.resourceForm.value.workload,allowancePeriod:this.resourceForm.value.allowancePeriod,allowanceCurrency:this.resourceForm.value.allowanceCurrency,allowance:this.resourceForm.value.basicSalary,gratuityPeriod:this.resourceForm.value.gratuityPeriod,gratuityCurrency:this.resourceForm.value.gratuityCurrency,gratuity:this.resourceForm.value.basicSalary,insurancePeriod:this.resourceForm.value.insurancePeriod,insuranceCurrency:this.resourceForm.value.insuranceCurrency,insurance:this.resourceForm.value.insurance,flightTicketPeriod:this.resourceForm.value.flightTicketPeriod,flightTicketCurrency:this.resourceForm.value.flightTicketCurrency,flightTicket:this.resourceForm.value.flightTicket,workPermitPeriod:this.resourceForm.value.workPermitPeriod,workPermitCurrency:this.resourceForm.value.workPermitCurrency,workPermit:this.resourceForm.value.workPermit,officePeriod:this.resourceForm.value.officePeriod,officeCurrency:this.resourceForm.value.officeCurrency,office:this.resourceForm.value.office,generalSupportPackagePeriod:this.resourceForm.value.generalSupportPackagePeriod,generalSupportPackageCurrency:this.resourceForm.value.generalSupportPackageCurrency,generalSupportPackage:this.resourceForm.value.generalSupportPackage,laptopWorkstationPeriod:this.resourceForm.value.laptopWorkstationPeriod,laptopWorkstationCurrency:this.resourceForm.value.laptopWorkstationCurrency,laptopWorkstation:this.resourceForm.value.laptopWorkstation,licensesPeriod:this.resourceForm.value.licensesPeriod,licensesCurrency:this.resourceForm.value.licensesCurrency,licenses:this.resourceForm.value.licenses},this.resourceForm.setValue(this.inputs)}onChangePeriod(){let e={period:this.displayForm.value.period,currency:this.displayForm.value.currency},r=this.displayPeriods.indexOf(e.period);r>-1?this.displayPeriods.splice(r,1):this.displayPeriods.push(e.period)}onChangeCurrency(){let e={period:this.displayForm.value.period,currency:this.displayForm.value.currency},r=this.displayCurrencies.indexOf(e.currency);r>-1?this.displayCurrencies.splice(r,1):this.displayCurrencies.push(e.currency)}fetchProject(){this.projectInteractor.fetchOne(this.project.id).subscribe({next:e=>{e&&e.success&&(this.project=e.data,this.localStorageService.update("project",this.project))},error:e=>{},complete:()=>{}})}onSubmitProject(){this.projectForm.valid?this.projectInteractor.update(this.project.id,{title:this.projectForm.value.title,duration:this.projectForm.value.duration,description:this.projectForm.value.description,client:this.projectForm.value.client,margin:this.projectForm.value.margin,riskProvision:this.projectForm.value.riskProvision}).subscribe({next:r=>{this.fetchProject(),this.toastr.success("project successfully updated","Success")},error:r=>{this.toastr.error("Error occurred while updating the project","Error")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Error")}onSubmitDisplay(){}onClickBack(){this.router.navigate(["dashboard"])}onClickDeleteResource(){let e=this.localStorageService.get("resource");e&&e.id?this.resourceInteractor.delete(e.id).subscribe({next:r=>{this.localStorageService.delete("resource"),this.toastr.success("Resource deleted successfully","Delete resource")},error:r=>{this.localStorageService.delete("resource"),this.toastr.error("Error occurred while deleting the resource","Delete resource")},complete:()=>{}}):(this.localStorageService.delete("resource"),this.toastr.error("Resource not found","Delete resource"))}onClickResourceToBeDeleted(e){this.localStorageService.add("resource",e)}onClickDismissResource(){this.localStorageService.delete("resource")}onClickEditResourceModalClose(){this.resourceForm=this.initResourceForm(),this.editResourceModalReference.dismiss()}open(e){this.editResourceModalReference=this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}),this.editResourceModalReference.result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(e){switch(e){case _c.ESC:return"by pressing ESC";case _c.BACKDROP_CLICK:return"by clicking on a backdrop";default:return`with: ${e}`}}openEditResourceModal(e,r){this.selectedResource=e,this.resourceForm=this.initResourceForm(this.selectedResource),this.open(r)}onSubmitPrices(){}onChangePrice(e,r,i){console.log(e),console.log(r),console.log(i.target.value)}calculateMargin(){}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(ih),s.Y36(Au),s.Y36(Cr),s.Y36(aS),s.Y36(gB),s.Y36(qD),s.Y36(_B))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-resources"]],decls:185,vars:44,consts:[[1,"card"],[1,"card-header"],[1,"row"],[1,"col-2","pointer",3,"click"],["src","assets/images/arrow-left.png",1,"float-left"],[1,"col"],[1,"card-title"],[1,"col-2"],[1,"btn","btn-outline-success","float-right",3,"click"],[1,"card-block"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],[1,"row","m-3"],[1,"col-12","form-group"],["for","title"],[2,"color","red"],["type","text","formControlName","title","placeholder","Project title","id","title",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],[1,"col-9","form-group"],["for","client"],["formControlName","client","id","client",1,"form-control"],["value","","disabled",""],["style","color: black;",3,"ngValue",4,"ngFor","ngForOf"],[1,"col-3","form-group"],["for","duration"],["type","number","formControlName","duration","placeholder","Duration","id","duration",1,"form-control"],["for","description"],["type","number","formControlName","description","placeholder","Description","id","description",1,"form-control"],[1,"col-12"],[1,"card-title","d-inline-block"],[4,"ngIf"],[1,"btn","btn-outline-primary","float-right",3,"click"],[1,"table-responsive","scrollmenu","m-3"],[1,"table","mb-0","new-patient-table","table-hover"],["type","text","formControlName","jobTitle","placeholder","Title of the resource","id","jobTitle"],["formControlName","resourceType"],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","basicSalaryCurrency",3,"change"],["type","number","formControlName","basicSalary","placeholder","basic salary","id","basicSalary",3,"change"],["formControlName","basicSalaryPeriod",3,"change"],["type","number","formControlName","workload","placeholder","Workload","id","workload"],["class","aspect-square","src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],["formControlName","allowanceCurrency",2,"color","black"],["type","number","formControlName","allowance","placeholder","allowance","id","allowance"],["formControlName","allowancePeriod",4,"ngIf"],["formControlName","gratuityCurrency",2,"color","black"],["type","number","formControlName","gratuity","placeholder","gratuity","id","gratuity"],["formControlName","gratuityPeriod",4,"ngIf"],["formControlName","insuranceCurrency",2,"color","black"],["type","number","formControlName","insurance","placeholder","insurance","id","insurance"],["formControlName","insurancePeriod",4,"ngIf"],["formControlName","flightTicketCurrency",2,"color","black"],["type","number","formControlName","flightTicket","placeholder","flightTicket","id","flightTicket"],["formControlName","flightTicketPeriod",4,"ngIf"],["formControlName","workPermitCurrency",2,"color","black"],["type","number","formControlName","workPermit","placeholder","workPermit","id","workPermit"],["formControlName","workPermitPeriod",4,"ngIf"],["formControlName","officeCurrency",2,"color","black"],["type","number","formControlName","office","placeholder","office","id","office"],["formControlName","officePeriod",4,"ngIf"],["formControlName","generalSupportPackageCurrency",2,"color","black"],["type","number","formControlName","generalSupportPackage","placeholder","generalSupportPackage","id","generalSupportPackage"],["formControlName","generalSupportPackagePeriod",4,"ngIf"],["formControlName","laptopWorkstationCurrency",2,"color","black"],["type","number","formControlName","laptopWorkstation","placeholder","laptopWorkstation","id","laptopWorkstation"],["formControlName","laptopWorkstationPeriod",4,"ngIf"],["formControlName","licensesCurrency",2,"color","black"],["type","number","formControlName","licenses","placeholder","licenses","id","licenses"],["formControlName","licensesPeriod",4,"ngIf"],[4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["id","resourceDeleteModal","tabindex","-1","aria-labelledby","resourceDeleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","resourceDeleteModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],["editResourceModal",""],[1,"form-text","text-muted","text-danger"],[2,"color","black",3,"ngValue"],[3,"ngValue"],["src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],["formControlName","allowancePeriod"],["formControlName","gratuityPeriod"],["formControlName","insurancePeriod"],["formControlName","flightTicketPeriod"],["formControlName","workPermitPeriod"],["formControlName","officePeriod"],["formControlName","generalSupportPackagePeriod"],["formControlName","laptopWorkstationPeriod"],["formControlName","licensesPeriod"],[3,"click"],["src","assets/images/duplicate.png","alt","duplicate","data-bs-toggle","tooltip","data-bs-placement","top","title","duplicate",1,"aspect-square","action"],["src","assets/images/delete.png","data-bs-target","#resourceDeleteModal","alt","delete","data-bs-toggle","modal","data-bs-placement","top","title","delete",1,"aspect-square","action",3,"click"],[1,"col-6"],["for","period"],["formControlName","period","id","period",1,"form-control",3,"change"],["for","currency"],["formControlName","currency","id","currency",1,"form-control",3,"change"],[1,"row","m-2"],["for","margin"],["type","number","formControlName","margin","placeholder","margin","id","margin",1,"form-control"],["for","riskProvision"],["type","number","formControlName","riskProvision","placeholder","Risk provision","id","riskProvision",1,"form-control"],[3,"formGroup"],["type","number","formControlName","amount",1,"form-control",3,"placeholder","change"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"col","divider-left"],[1,"form-group"],["for","resourceJobTitle"],["type","text","formControlName","jobTitle","placeholder","Title of the resource","id","resourceJobTitle",1,"form-control"],["formControlName","resourceType",1,"form-control"],[1,"row","form-group"],["for","resourceBasicSalary"],[1,"col-3"],["formControlName","basicSalaryCurrency",1,"form-control",3,"change"],["type","number","formControlName","basicSalary","placeholder","basic salary","id","resourceBasicSalary",1,"form-control",3,"change"],[1,"col-4"],["formControlName","basicSalaryPeriod",1,"form-control",3,"change"],["for","resourceWorkload"],["type","number","formControlName","workload","placeholder","Workload","id","resourceWorkload",1,"form-control"],["for","resourceAllowance"],["formControlName","allowanceCurrency",1,"form-control"],["type","number","formControlName","allowance","placeholder","Allowance","id","resourceAllowance",1,"form-control"],["formControlName","allowancePeriod",1,"form-control"],["for","resourceGratuity"],["formControlName","gratuityCurrency",1,"form-control"],["type","number","formControlName","gratuity","placeholder","Gratuity / End of service","id","resourceGratuity",1,"form-control"],["formControlName","gratuityPeriod",1,"form-control"],["for","resourceInsurance"],["formControlName","insuranceCurrency",1,"form-control"],["type","number","formControlName","insurance","placeholder","Insurance","id","resourceInsurance",1,"form-control"],["formControlName","insurancePeriod",1,"form-control"],["for","resourceFlightTicket"],["formControlName","flightTicketCurrency",1,"form-control"],["type","number","formControlName","flightTicket","placeholder","Annual flight ticket","id","resourceFlightTicket",1,"form-control"],["formControlName","flightTicketPeriod",1,"form-control"],["for","resourceWorkPermit"],["formControlName","workPermitCurrency",1,"form-control"],["type","number","formControlName","workPermit","placeholder","VISA / Work Permit","id","resourceWorkPermit",1,"form-control"],["formControlName","workPermitPeriod",1,"form-control"],["for","resourceOffice"],["formControlName","officeCurrency",1,"form-control"],["type","number","formControlName","office","placeholder","Office","id","resourceOffice",1,"form-control"],["formControlName","officePeriod",1,"form-control"],["for","resourceGeneralSupportPackage"],["formControlName","generalSupportPackageCurrency",1,"form-control"],["type","number","formControlName","generalSupportPackage","placeholder","General support package","id","resourceGeneralSupportPackage",1,"form-control"],["formControlName","generalSupportPackagePeriod",1,"form-control"],["for","resourceLaptopWorkstation"],["formControlName","laptopWorkstationCurrency",1,"form-control"],["type","number","formControlName","laptopWorkstation","placeholder","Laptop workstation","id","resourceLaptopWorkstation",1,"form-control"],["formControlName","laptopWorkstationPeriod",1,"form-control"],["for","resourceLicenses"],["formControlName","licensesCurrency",1,"form-control"],["type","number","formControlName","licenses","placeholder","Licenses","id","resourceLicenses",1,"form-control"],["formControlName","licensesPeriod",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(r,i){if(1&r){const o=s.EpF();s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),s.NdJ("click",function(){return i.onClickBack()}),s._UZ(4,"img",4),s.qZA(),s.TgZ(5,"div",5)(6,"h4",6)(7,"b"),s._uU(8),s.ALo(9,"uppercase"),s.qZA()()(),s.TgZ(10,"div",7)(11,"button",8),s.NdJ("click",function(){return i.onSubmitProject()}),s._uU(12,"Save"),s.qZA()()()(),s.TgZ(13,"div",9)(14,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitProject()}),s.TgZ(15,"div",11)(16,"div",12)(17,"label",13),s._uU(18,"Project title"),s.TgZ(19,"span",14),s._uU(20,"*"),s.qZA()(),s._UZ(21,"input",15),s.YNc(22,Kz,2,0,"small",16),s.qZA(),s.TgZ(23,"div",17)(24,"label",18),s._uU(25,"Client"),s.TgZ(26,"span",14),s._uU(27,"*"),s.qZA()(),s.TgZ(28,"select",19)(29,"option",20),s._uU(30,"Select client"),s.qZA(),s.YNc(31,Yz,2,2,"option",21),s.qZA()(),s.TgZ(32,"div",22)(33,"label",23),s._uU(34,"Duration(Months)"),s.qZA(),s._UZ(35,"input",24),s.qZA(),s.TgZ(36,"div",12)(37,"label",25),s._uU(38,"Description"),s.qZA(),s.TgZ(39,"textarea",26),s._uU(40,"            "),s.qZA()()()()()(),s.TgZ(41,"div",2)(42,"div",27)(43,"div",0)(44,"div",1)(45,"h4",28),s.YNc(46,Jz,2,1,"b",29),s._uU(47," Resources "),s.qZA(),s.TgZ(48,"button",30),s.NdJ("click",function(){s.CHM(o);const d=s.MAs(184);return s.KtG(i.open(d))}),s._uU(49,"Add"),s.qZA()(),s.TgZ(50,"div",9)(51,"div",31)(52,"table",32)(53,"thead")(54,"tr")(55,"th"),s._uU(56,"Job title"),s.TgZ(57,"span",14),s._uU(58,"*"),s.qZA()(),s.TgZ(59,"th"),s._uU(60,"Resource type"),s.TgZ(61,"span",14),s._uU(62,"*"),s.qZA()(),s.TgZ(63,"th"),s._uU(64,"Basic salary"),s.TgZ(65,"span",14),s._uU(66,"*"),s.qZA()(),s.TgZ(67,"th"),s._uU(68,"Workload"),s.qZA(),s.TgZ(69,"th"),s._uU(70,"Actions"),s.qZA(),s.TgZ(71,"th"),s._uU(72,"Allowance"),s.qZA(),s.TgZ(73,"th"),s._uU(74,"Gratuity / End of service"),s.qZA(),s.TgZ(75,"th"),s._uU(76,"Insurance"),s.qZA(),s.TgZ(77,"th"),s._uU(78,"Annual flight ticket"),s.qZA(),s.TgZ(79,"th"),s._uU(80,"VISA / Work Permit"),s.qZA(),s.TgZ(81,"th"),s._uU(82,"Office"),s.qZA(),s.TgZ(83,"th"),s._uU(84,"General support package"),s.qZA(),s.TgZ(85,"th"),s._uU(86,"Laptop workstation"),s.qZA(),s.TgZ(87,"th"),s._uU(88,"Licenses"),s.qZA()()(),s.TgZ(89,"tbody")(90,"tr")(91,"td")(92,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(93,"input",33),s.qZA()(),s.TgZ(94,"td")(95,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(96,"select",34)(97,"option",20),s._uU(98,"Select resource type"),s.qZA(),s.YNc(99,Qz,2,2,"option",35),s.qZA()()(),s.TgZ(100,"td")(101,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(102,"select",36),s.NdJ("change",function(){return i.onChangeBasicSalary()}),s.YNc(103,Xz,2,2,"option",35),s.qZA(),s.TgZ(104,"input",37),s.NdJ("change",function(){return i.onChangeBasicSalary()}),s.qZA(),s.TgZ(105,"select",38),s.NdJ("change",function(){return i.onChangeBasicSalary()}),s.YNc(106,e5,2,2,"option",35),s.qZA()()(),s.TgZ(107,"td")(108,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(109,"input",39),s.qZA()(),s.TgZ(110,"td"),s.YNc(111,t5,1,0,"img",40),s.qZA(),s.TgZ(112,"td")(113,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(114,"select",41),s.YNc(115,n5,2,2,"option",35),s.qZA(),s._UZ(116,"input",42),s.YNc(117,i5,2,1,"select",43),s.qZA()(),s.TgZ(118,"td")(119,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(120,"select",44),s.YNc(121,s5,2,2,"option",35),s.qZA(),s._UZ(122,"input",45),s.YNc(123,a5,2,1,"select",46),s.qZA()(),s.TgZ(124,"td")(125,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(126,"select",47),s.YNc(127,l5,2,2,"option",35),s.qZA(),s._UZ(128,"input",48),s.YNc(129,u5,2,1,"select",49),s.qZA()(),s.TgZ(130,"td")(131,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(132,"select",50),s.YNc(133,d5,2,2,"option",35),s.qZA(),s._UZ(134,"input",51),s.YNc(135,f5,2,1,"select",52),s.qZA()(),s.TgZ(136,"td")(137,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(138,"select",53),s.YNc(139,p5,2,2,"option",35),s.qZA(),s._UZ(140,"input",54),s.YNc(141,m5,2,1,"select",55),s.qZA()(),s.TgZ(142,"td")(143,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(144,"select",56),s.YNc(145,_5,2,2,"option",35),s.qZA(),s._UZ(146,"input",57),s.YNc(147,v5,2,1,"select",58),s.qZA()(),s.TgZ(148,"td")(149,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(150,"select",59),s.YNc(151,b5,2,2,"option",35),s.qZA(),s._UZ(152,"input",60),s.YNc(153,C5,2,1,"select",61),s.qZA()(),s.TgZ(154,"td")(155,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(156,"select",62),s.YNc(157,T5,2,2,"option",35),s.qZA(),s._UZ(158,"input",63),s.YNc(159,D5,2,1,"select",64),s.qZA()(),s.TgZ(160,"td")(161,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(162,"select",65),s.YNc(163,S5,2,2,"option",35),s.qZA(),s._UZ(164,"input",66),s.YNc(165,A5,2,1,"select",67),s.qZA()()(),s.YNc(166,N5,31,13,"tr",68),s.qZA()()()()()()(),s.YNc(167,U5,50,9,"div",69),s.TgZ(168,"div",70)(169,"div",71)(170,"div",72)(171,"div",73)(172,"h5",74),s._uU(173,"Delete resource"),s.qZA(),s._UZ(174,"button",75),s.qZA(),s.TgZ(175,"div",76)(176,"b"),s._uU(177,"Do you really want to delete this resource?"),s.qZA()(),s.TgZ(178,"div",77)(179,"button",78),s.NdJ("click",function(){return i.onClickDismissResource()}),s._uU(180,"Close "),s.qZA(),s.TgZ(181,"button",79),s.NdJ("click",function(){return i.onClickDeleteResource()}),s._uU(182," Confirm "),s.qZA()()()()(),s.YNc(183,lW,148,25,"ng-template",null,80,s.W1O)}2&r&&(s.xp6(8),s.Oqu(s.lcZ(9,42,i.project.title)),s.xp6(6),s.Q6J("formGroup",i.projectForm),s.xp6(8),s.Q6J("ngIf",i.projectForm.controls.title.touched&&(null==i.projectForm.controls.title.errors?null:i.projectForm.controls.title.errors.required)),s.xp6(9),s.Q6J("ngForOf",i.clients),s.xp6(15),s.Q6J("ngIf",i.resources),s.xp6(46),s.Q6J("formGroup",i.resourceForm),s.xp6(3),s.Q6J("formGroup",i.resourceForm),s.xp6(4),s.Q6J("ngForOf",i.resourceTypes),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(3),s.Q6J("ngForOf",i.periods),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(3),s.Q6J("ngIf",i.resourceForm.valid),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(1),s.Q6J("ngForOf",i.resources),s.xp6(1),s.Q6J("ngIf",i.resources&&i.resources.length>0))},dependencies:[or,gr,uc,xy,qg,lc,Gg,Xd,Eu,Kd,dc,Du,zi,yB],styles:["div.scrollmenu[_ngcontent-%COMP%]{background-color:#333;overflow:auto;white-space:nowrap}div.scrollmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;color:#fff;text-align:center;padding:14px;text-decoration:none}tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid lightgray;border-collapse:collapse}.divider-left[_ngcontent-%COMP%]{border-right:1px dashed #333}"]})}return n})();var cS=(()=>{return(n=cS||(cS={})).Admin="ADMIN",n.Business="BUSINESS MANAGER",n.Financial="FINANCIAL MANAGER",cS;var n})();class uW extends Kf{toEntity(t){return{id:t.id,createdAt:t.createdAt,updatedAt:new Date,deleted:!1,firstname:t.firstname,lastname:t.lastname,email:t.email,phoneNumber:t.phoneNumber,address:t.address,role:t.role,avatar:t.avatar}}fromEntity(t){return{id:t.id,createdAt:t.createdAt,firstname:t.firstname,lastname:t.lastname,email:t.email,phoneNumber:t.phoneNumber,address:t.address,role:t.role,avatar:t.avatar}}fromRequest(t){return{updatedAt:new Date,deleted:!1,firstname:t.firstname,lastname:t.lastname,email:t.email,phoneNumber:t.phoneNumber,address:t.address,role:t.role,avatar:t.avatar}}}let um=(()=>{class n extends em{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=s.n5z(n)))(i||n)}}();static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RR=(()=>{class n{constructor(e){this.accountRepository=e}execute(e){return this.accountRepository.fetch(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(um))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OR=(()=>{class n{constructor(e){this.accountRepository=e}execute(){return this.accountRepository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(um))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.update(e.id,e.request)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(um))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.delete(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(um))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FR=(()=>{class n{constructor(e){this.accountRepository=e}execute(e){return this.accountRepository.login(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(um))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LR=(()=>{class n{constructor(e){this.accountRepository=e}execute(e){return this.accountRepository.create(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(um))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vB=(()=>{class n extends Wf{constructor(e,r,i,o,c,d){super(),this.fetchAccountUseCase=e,this.fetchAccountsUseCase=r,this.updateAccountUseCase=i,this.deleteAccountUseCase=o,this.loginAccountUseCase=c,this.createAccountUseCase=d,this.mapper=new uW}create(e){let r=this.mapper.fromRequest(e);return r.id=Ky(),r.password="Password1",r.createdAt=new Date,this.createAccountUseCase.execute(r).pipe((0,S.U)(i=>this.mapper.toResponse(i)))}delete(e){return this.deleteAccountUseCase.execute(e),Fe(this.mapper.toEmptyResponse())}fetchAll(){return this.fetchAccountsUseCase.execute().pipe((0,S.U)(e=>this.mapper.toResponses(e)))}fetchOne(e){return this.fetchAccountUseCase.execute(e).pipe((0,S.U)(r=>this.mapper.toResponse(r)))}login(e){return this.loginAccountUseCase.execute(e).pipe((0,S.U)(r=>this.mapper.toFirstResponse(r)))}update(e,r){return this.updateAccountUseCase.execute({id:e,request:this.mapper.fromRequest(r)}),Fe(this.mapper.toEmptyResponse())}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(RR),s.LFG(OR),s.LFG(MR),s.LFG(PR),s.LFG(FR),s.LFG(LR))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dW(n,t){if(1&n&&(s.TgZ(0,"option",32),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function hW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"img",33),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s.qZA()}}function fW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"tr")(1,"td",34),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(66);return s.KtG(c.openEditAccountModal(o,d))}),s.TgZ(2,"div",0)(3,"div",35),s._UZ(4,"img",36),s.qZA(),s.TgZ(5,"div",37)(6,"h2"),s._uU(7),s.qZA()()()(),s.TgZ(8,"td",34),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(66);return s.KtG(c.openEditAccountModal(o,d))}),s._uU(9),s.qZA(),s.TgZ(10,"td",34),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(66);return s.KtG(c.openEditAccountModal(o,d))}),s._uU(11),s.qZA(),s.TgZ(12,"td",34),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(66);return s.KtG(c.openEditAccountModal(o,d))}),s._uU(13),s.qZA(),s._UZ(14,"td"),s.TgZ(15,"td",34),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(66);return s.KtG(c.openEditAccountModal(o,d))}),s._uU(16),s.qZA(),s.TgZ(17,"td",34),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(66);return s.KtG(c.openEditAccountModal(o,d))}),s._uU(18),s.qZA(),s.TgZ(19,"td")(20,"img",38),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickAccountToBeDeleted(o))}),s.qZA()()()}if(2&n){const e=t.$implicit;s.xp6(7),s.Oqu(e.firstname),s.xp6(2),s.Oqu(e.lastname),s.xp6(2),s.Oqu(e.email),s.xp6(2),s.Oqu(e.role),s.xp6(3),s.Oqu(e.phoneNumber),s.xp6(2),s.Oqu(e.address)}}function pW(n,t){1&n&&(s.TgZ(0,"small",58),s._uU(1," Please enter firstname! "),s.qZA())}function gW(n,t){1&n&&(s.TgZ(0,"small",58),s._uU(1," Please enter lastname! "),s.qZA())}function mW(n,t){if(1&n&&(s.TgZ(0,"option",32),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function _W(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",25)(1,"h4",39),s._uU(2,"Edit account"),s.qZA(),s.TgZ(3,"button",40),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.KtG(o.dismiss("Cross click"))}),s.qZA()(),s.TgZ(4,"div",28)(5,"form",10),s.NdJ("ngSubmit",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s.TgZ(6,"div",0)(7,"div",37)(8,"div",41)(9,"label",42),s._uU(10,"Firstname"),s.TgZ(11,"span",9),s._uU(12,"*"),s.qZA()(),s._UZ(13,"input",43),s.YNc(14,pW,2,0,"small",44),s.qZA(),s.TgZ(15,"div",41)(16,"label",45),s._uU(17,"Lastname"),s.TgZ(18,"span",9),s._uU(19,"*"),s.qZA()(),s._UZ(20,"input",46),s.YNc(21,gW,2,0,"small",44),s.qZA(),s.TgZ(22,"div"),s._UZ(23,"img",47),s.qZA()(),s.TgZ(24,"div",37)(25,"div",41)(26,"label",48),s._uU(27,"Role"),s.TgZ(28,"span",9),s._uU(29,"*"),s.qZA()(),s.TgZ(30,"select",49)(31,"option",15),s._uU(32,"Select role"),s.qZA(),s.YNc(33,mW,2,2,"option",16),s.qZA()(),s.TgZ(34,"div",41)(35,"label",50),s._uU(36,"Email"),s.TgZ(37,"span",9),s._uU(38,"*"),s.qZA()(),s._UZ(39,"input",51),s.qZA(),s.TgZ(40,"div",41)(41,"label",52),s._uU(42,"Phone number"),s.qZA(),s._UZ(43,"input",53),s.qZA(),s.TgZ(44,"div",41)(45,"label",54),s._uU(46,"Address"),s.qZA(),s._UZ(47,"input",55),s.qZA()()()()(),s.TgZ(48,"div",29)(49,"button",56),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onClickEditAccountModalClose())}),s._uU(50,"Close"),s.qZA(),s.TgZ(51,"button",57),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s._uU(52,"Save "),s.qZA()()}if(2&n){const e=s.oxw();s.xp6(5),s.Q6J("formGroup",e.accountForm),s.xp6(9),s.Q6J("ngIf",e.accountForm.controls.firstname.touched&&(null==e.accountForm.controls.firstname.errors?null:e.accountForm.controls.firstname.errors.required)),s.xp6(7),s.Q6J("ngIf",e.accountForm.controls.lastname.touched&&(null==e.accountForm.controls.lastname.errors?null:e.accountForm.controls.lastname.errors.required)),s.xp6(12),s.Q6J("ngForOf",e.roles),s.xp6(18),s.Q6J("disabled",!e.accountForm.valid)}}const yW=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:Jk},{path:"",component:BD,canActivate:[b],children:[{path:"dashboard",component:m},{path:"resources",component:cW},{path:"clients",component:Lz},{path:"accounts",component:(()=>{class n{constructor(e,r,i,o,c){this.accountInteractor=e,this.router=r,this.modalService=i,this.toastr=o,this.localStorageService=c,this.accounts=[],this.roles=[],this.closeResult="",this.roles=Object.values(cS),this.accountForm=new Ji({firstname:new Xe("",[An.required]),lastname:new Xe("",[An.required]),email:new Xe("",[An.required]),address:new Xe(""),phoneNumber:new Xe(""),avatar:new Xe(""),role:new Xe("",[An.required])})}ngOnInit(){this.fetchAccounts()}fetchAccounts(){this.accountInteractor.fetchAll().subscribe({next:e=>{this.accounts=e.data},error:e=>{},complete:()=>{}})}onSubmit(){if(this.accountForm.valid){let e={firstname:this.accountForm.value.firstname,lastname:this.accountForm.value.lastname,email:this.accountForm.value.email,address:this.accountForm.value.address,phoneNumber:this.accountForm.value.phoneNumber,role:this.accountForm.value.role,avatar:""};this.selectedAccount&&this.selectedAccount.id?this.accountInteractor.update(this.selectedAccount.id,e).subscribe({next:r=>{this.selectedAccount=void 0,this.accountForm.reset(),this.editAccountModalReference.dismiss(),this.toastr.success("account successfully updated","Update account"),this.fetchAccounts()},error:r=>{this.toastr.error("Error occurred while updating the account","Update account")},complete:()=>{}}):this.accountInteractor.create(e).subscribe({next:r=>{this.accountForm.reset(),this.editAccountModalReference.dismiss(),this.toastr.success("account successfully saved","Success"),this.fetchAccounts()},error:r=>{this.toastr.error("Error occurred while saving account","Error")},complete:()=>{}})}else this.toastr.error("Some inputs are incorrect","Error")}onClickAccountToBeDeleted(e){this.localStorageService.add("account",e)}onClickDeleteAccount(){let e=this.localStorageService.get("account");e&&e.id?this.accountInteractor.delete(e.id).subscribe({next:r=>{this.localStorageService.delete("account"),this.toastr.success("Account deleted successfully","Delete account")},error:r=>{this.localStorageService.delete("account"),this.toastr.error("Error occurred while deleting the account","Delete account")},complete:()=>{}}):(this.localStorageService.delete("account"),this.toastr.error("Account not found","Delete account"))}onClickDismiss(){this.localStorageService.delete("account")}onClickEditAccountModalClose(){this.accountForm.reset(),this.editAccountModalReference.dismiss()}open(e){this.editAccountModalReference=this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"}),this.editAccountModalReference.result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(e){switch(e){case _c.ESC:return"by pressing ESC";case _c.BACKDROP_CLICK:return"by clicking on a backdrop";default:return`with: ${e}`}}openEditAccountModal(e,r){this.selectedAccount=e,this.accountForm=new Ji({firstname:new Xe(e.firstname,[An.required]),lastname:new Xe(e.lastname,[An.required]),email:new Xe(e.email,[An.required]),address:new Xe(e.address),phoneNumber:new Xe(e.phoneNumber),avatar:new Xe(e.avatar),role:new Xe(e.role,[An.required])}),this.open(r)}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(vB),s.Y36(Cr),s.Y36(aS),s.Y36(Au),s.Y36(ih))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-accounts"]],decls:82,vars:10,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],[1,"btn","btn-outline-primary","float-right",3,"click"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["type","text","formControlName","firstname","placeholder","Firstname"],["type","text","formControlName","lastname","placeholder","Lastname"],["type","text","formControlName","email","placeholder","Email"],["formControlName","role"],["value","","disabled",""],["style","color: black;",3,"ngValue",4,"ngFor","ngForOf"],["class","aspect-square","src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],["type","tel","formControlName","phoneNumber","placeholder","Phone number"],["type","text","formControlName","address","placeholder","Address"],[4,"ngFor","ngForOf"],["editAccountModal",""],["id","accountDeleteModal","tabindex","-1","aria-labelledby","accountDeleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","accountDeleteModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[2,"color","black",3,"ngValue"],["src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],[3,"click"],[1,"col-5","col-sm-5","col-md-4","col-lg-3","col-xl-3"],["width","28","height","28","src","assets/images/user.jpg","alt","",1,"rounded-circle","m-r-5"],[1,"col"],["src","assets/images/delete.png","data-bs-target","#accountDeleteModal","alt","delete","data-bs-toggle","modal","data-bs-placement","top","title","delete",1,"aspect-square","action",3,"click"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"form-group"],["for","firstname"],["type","text","formControlName","firstname","placeholder","Firstname","id","firstname",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],["for","lastname"],["type","text","formControlName","lastname","placeholder","Lastname","id","lastname",1,"form-control"],["src","assets/images/user.jpg"],["for","role"],["formControlName","role","id","role",1,"form-control"],["for","email"],["type","email","formControlName","email","placeholder","Email","id","email",1,"form-control"],["for","phoneNumber"],["type","tel","formControlName","phoneNumber","placeholder","Phone number","id","phoneNumber",1,"form-control"],["for","address"],["type","tel","formControlName","address","placeholder","Address","id","address",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"form-text","text-muted","text-danger"]],template:function(r,i){if(1&r){const o=s.EpF();s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4)(5,"b"),s._uU(6),s.qZA(),s._uU(7," Accounts "),s.qZA(),s.TgZ(8,"button",5),s.NdJ("click",function(){s.CHM(o);const d=s.MAs(66);return s.KtG(i.open(d))}),s._uU(9,"Add "),s.qZA()(),s.TgZ(10,"div",6)(11,"div",7)(12,"table",8)(13,"thead")(14,"tr")(15,"th"),s._uU(16,"Firstname"),s.TgZ(17,"span",9),s._uU(18,"*"),s.qZA()(),s.TgZ(19,"th"),s._uU(20,"Lastname"),s.TgZ(21,"span",9),s._uU(22,"*"),s.qZA()(),s.TgZ(23,"th"),s._uU(24,"Email"),s.TgZ(25,"span",9),s._uU(26,"*"),s.qZA()(),s.TgZ(27,"th"),s._uU(28,"Role"),s.TgZ(29,"span",9),s._uU(30,"*"),s.qZA()(),s._UZ(31,"th"),s.TgZ(32,"th"),s._uU(33,"Phone number"),s.qZA(),s.TgZ(34,"th"),s._uU(35,"Address"),s.qZA(),s.TgZ(36,"th"),s._uU(37,"Actions"),s.qZA()()(),s.TgZ(38,"tbody")(39,"tr")(40,"td")(41,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(42,"input",11),s.qZA()(),s.TgZ(43,"td")(44,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(45,"input",12),s.qZA()(),s.TgZ(46,"td")(47,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(48,"input",13),s.qZA()(),s.TgZ(49,"td")(50,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(51,"select",14)(52,"option",15),s._uU(53,"Select role"),s.qZA(),s.YNc(54,dW,2,2,"option",16),s.qZA()()(),s.TgZ(55,"td"),s.YNc(56,hW,1,0,"img",17),s.qZA(),s.TgZ(57,"td")(58,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(59,"input",18),s.qZA()(),s.TgZ(60,"td")(61,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(62,"input",19),s.qZA()(),s._UZ(63,"td"),s.qZA(),s.YNc(64,fW,21,6,"tr",20),s.qZA()()()()()()(),s.YNc(65,_W,53,5,"ng-template",null,21,s.W1O),s.TgZ(67,"div",22)(68,"div",23)(69,"div",24)(70,"div",25)(71,"h5",26),s._uU(72,"Delete account"),s.qZA(),s._UZ(73,"button",27),s.qZA(),s.TgZ(74,"div",28)(75,"b"),s._uU(76,"Do you really want to delete this account?"),s.qZA()(),s.TgZ(77,"div",29)(78,"button",30),s.NdJ("click",function(){return i.onClickDismiss()}),s._uU(79,"Close "),s.qZA(),s.TgZ(80,"button",31),s.NdJ("click",function(){return i.onClickDeleteAccount()}),s._uU(81," Confirm "),s.qZA()()()()()}2&r&&(s.xp6(6),s.Oqu(null==i.accounts?null:i.accounts.length),s.xp6(35),s.Q6J("formGroup",i.accountForm),s.xp6(3),s.Q6J("formGroup",i.accountForm),s.xp6(3),s.Q6J("formGroup",i.accountForm),s.xp6(3),s.Q6J("formGroup",i.accountForm),s.xp6(4),s.Q6J("ngForOf",i.roles),s.xp6(2),s.Q6J("ngIf",i.accountForm.valid),s.xp6(2),s.Q6J("formGroup",i.accountForm),s.xp6(3),s.Q6J("formGroup",i.accountForm),s.xp6(3),s.Q6J("ngForOf",i.accounts))},dependencies:[or,gr,uc,xy,qg,lc,Xd,Eu,Kd,dc,Du],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})()},{path:"settings",component:qz}]}];let vW=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=s.oAB({type:n});static#n=this.\u0275inj=s.cJS({imports:[nT.forRoot(yW,{scrollPositionRestoration:"enabled"}),nT]})}return n})(),bW=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&s._UZ(0,"router-outlet")},dependencies:[N_],encapsulation:2})}return n})(),lh=(()=>{class n{static#e=this.ACCOUNTS="accounts";static#t=this.CLIENTS="clients";static#n=this.PROJECTS="projects";static#r=this.RESOURCES="resources";static#i=this.CURRENCY_EXCHANGE="currency-exchanges";static#s=this.WORKING_DAYS="working-days"}return n})();var Nn=U(5813);function UR(){return(0,In.e)((n,t)=>{let e,r=!1;n.subscribe((0,ve.x)(t,i=>{const o=e;e=i,r&&t.next([o,i]),r=!0}))})}var ft,Bi=U(2011),BR=(U(1451),U(3942)),Te=U(5861),so=U(9681),yc=U(4859),vc=U(1877),F=U(2090),wW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ch={},VR=VR||{},zt=wW||self;function uS(){}function jR(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Pw(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var HR="closure_uid_"+(1e9*Math.random()>>>0),TW=0;function EW(n,t,e){return n.call.apply(n.bind,arguments)}function DW(n,t,e){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(t,i)}}return function(){return n.apply(t,arguments)}}function ps(n,t,e){return(ps=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?EW:DW).apply(null,arguments)}function dS(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function gs(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(r,i,o){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return t.prototype[i].apply(r,c)}}function Xf(){this.s=this.s,this.o=this.o}var IW={};Xf.prototype.s=!1,Xf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function CW(n){return Object.prototype.hasOwnProperty.call(n,HR)&&n[HR]||(n[HR]=++TW)}(this);delete IW[n]}},Xf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bB=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},wB=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const r=n.length,i="string"==typeof n?n.split(""):n;for(let o=0;o<r;o++)o in i&&t.call(e,i[o],o,n)};function CB(n){return Array.prototype.concat.apply([],arguments)}function $R(n){const t=n.length;if(0<t){const e=Array(t);for(let r=0;r<t;r++)e[r]=n[r];return e}return[]}function hS(n){return/^[\s\xa0]*$/.test(n)}var ao,TB=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function oo(n,t){return-1!=n.indexOf(t)}function GR(n,t){return n<t?-1:n>t?1:0}e:{var EB=zt.navigator;if(EB){var DB=EB.userAgent;if(DB){ao=DB;break e}}ao=""}function ZR(n,t,e){for(const r in n)t.call(e,n[r],r,n)}function SB(n){const t={};for(const e in n)t[e]=n[e];return t}var IB="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function AB(n,t){let e,r;for(let i=1;i<arguments.length;i++){for(e in r=arguments[i],r)n[e]=r[e];for(let o=0;o<IB.length;o++)e=IB[o],Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}}function qR(n){return qR[" "](n),n}qR[" "]=uS;var fS,n,xW=oo(ao,"Opera"),iv=oo(ao,"Trident")||oo(ao,"MSIE"),NB=oo(ao,"Edge"),zR=NB||iv,xB=oo(ao,"Gecko")&&!(oo(ao.toLowerCase(),"webkit")&&!oo(ao,"Edge"))&&!(oo(ao,"Trident")||oo(ao,"MSIE"))&&!oo(ao,"Edge"),kW=oo(ao.toLowerCase(),"webkit")&&!oo(ao,"Edge");function kB(){var n=zt.document;return n?n.documentMode:void 0}e:{var WR="",KR=(n=ao,xB?/rv:([^\);]+)(\)|;)/.exec(n):NB?/Edge\/([\d\.]+)/.exec(n):iv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):kW?/WebKit\/(\S+)/.exec(n):xW?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(KR&&(WR=KR?KR[1]:""),iv){var YR=kB();if(null!=YR&&YR>parseFloat(WR)){fS=String(YR);break e}}fS=WR}var RW={};var MW=zt.document&&iv&&(kB()||parseInt(fS,10))||void 0,PW=function(){if(!zt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{zt.addEventListener("test",uS,t),zt.removeEventListener("test",uS,t)}catch{}return n}();function Ms(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function Fw(n,t){if(Ms.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(xB){e:{try{qR(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:FW[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Fw.Z.h.call(this)}}Ms.prototype.h=function(){this.defaultPrevented=!0},gs(Fw,Ms);var FW={2:"touch",3:"pen",4:"mouse"};Fw.prototype.h=function(){Fw.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Lw="closure_listenable_"+(1e6*Math.random()|0),LW=0;function UW(n,t,e,r,i){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!r,this.ia=i,this.key=++LW,this.ca=this.fa=!1}function pS(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function gS(n){this.src=n,this.g={},this.h=0}function QR(n,t){var e=t.type;if(e in n.g){var o,r=n.g[e],i=bB(r,t);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(pS(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function XR(n,t,e,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ca&&o.listener==t&&o.capture==!!e&&o.ia==r)return i}return-1}gS.prototype.add=function(n,t,e,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var c=XR(n,t,r,i);return-1<c?(t=n[c],e||(t.fa=!1)):((t=new UW(t,this.src,o,!!r,i)).fa=e,n.push(t)),t};var eO="closure_lm_"+(1e6*Math.random()|0),tO={};function OB(n,t,e,r,i){if(r&&r.once)return PB(n,t,e,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)OB(n,t[o],e,r,i);return null}return e=sO(e),n&&n[Lw]?n.N(t,e,Pw(r)?!!r.capture:!!r,i):MB(n,t,e,!1,r,i)}function MB(n,t,e,r,i,o){if(!t)throw Error("Invalid event type");var c=Pw(i)?!!i.capture:!!i,d=rO(n);if(d||(n[eO]=d=new gS(n)),(e=d.add(t,e,r,c,o)).proxy)return e;if(r=function BW(){var t=VW;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=r,r.src=n,r.listener=e,n.addEventListener)PW||(i=c),void 0===i&&(i=!1),n.addEventListener(t.toString(),r,i);else if(n.attachEvent)n.attachEvent(LB(t.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return e}function PB(n,t,e,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)PB(n,t[o],e,r,i);return null}return e=sO(e),n&&n[Lw]?n.O(t,e,Pw(r)?!!r.capture:!!r,i):MB(n,t,e,!0,r,i)}function FB(n,t,e,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)FB(n,t[o],e,r,i);else r=Pw(r)?!!r.capture:!!r,e=sO(e),n&&n[Lw]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=XR(o=n.g[t],e,r,i))&&(pS(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete n.g[t],n.h--))):n&&(n=rO(n))&&(t=n.g[t.toString()],n=-1,t&&(n=XR(t,e,r,i)),(e=-1<n?t[n]:null)&&nO(e))}function nO(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[Lw])QR(t.i,n);else{var e=n.type,r=n.proxy;t.removeEventListener?t.removeEventListener(e,r,n.capture):t.detachEvent?t.detachEvent(LB(e),r):t.addListener&&t.removeListener&&t.removeListener(r),(e=rO(t))?(QR(e,n),0==e.h&&(e.src=null,t[eO]=null)):pS(n)}}}function LB(n){return n in tO?tO[n]:tO[n]="on"+n}function VW(n,t){if(n.ca)n=!0;else{t=new Fw(t,this);var e=n.listener,r=n.ia||n.src;n.fa&&nO(n),n=e.call(r,t)}return n}function rO(n){return(n=n[eO])instanceof gS?n:null}var iO="__closure_events_fn_"+(1e9*Math.random()>>>0);function sO(n){return"function"==typeof n?n:(n[iO]||(n[iO]=function(t){return n.handleEvent(t)}),n[iO])}function Qi(){Xf.call(this),this.i=new gS(this),this.P=this,this.I=null}function ms(n,t){var e,r=n.I;if(r)for(e=[];r;r=r.I)e.push(r);if(n=n.P,r=t.type||t,"string"==typeof t)t=new Ms(t,n);else if(t instanceof Ms)t.target=t.target||n;else{var i=t;AB(t=new Ms(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var c=t.g=e[o];i=mS(c,r,!0,t)&&i}if(i=mS(c=t.g=n,r,!0,t)&&i,i=mS(c,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=mS(c=t.g=e[o],r,!1,t)&&i}function mS(n,t,e,r){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var c=t[o];if(c&&!c.ca&&c.capture==e){var d=c.listener,f=c.ia||c.src;c.fa&&QR(n.i,c),i=!1!==d.call(f,r)&&i}}return i&&!r.defaultPrevented}gs(Qi,Xf),Qi.prototype[Lw]=!0,Qi.prototype.removeEventListener=function(n,t,e,r){FB(this,n,t,e,r)},Qi.prototype.M=function(){if(Qi.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],r=0;r<e.length;r++)pS(e[r]);delete n.g[t],n.h--}}this.I=null},Qi.prototype.N=function(n,t,e,r){return this.i.add(String(n),t,!1,e,r)},Qi.prototype.O=function(n,t,e,r){return this.i.add(String(n),t,!0,e,r)};var oO=zt.JSON.stringify;function jW(){var n=BB;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var lO,UB=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new $W,n=>n.reset());class $W{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function GW(n){zt.setTimeout(()=>{throw n},0)}function aO(n,t){lO||function ZW(){var n=zt.Promise.resolve(void 0);lO=function(){n.then(qW)}}(),cO||(lO(),cO=!0),BB.add(n,t)}var cO=!1,BB=new class HW{constructor(){this.h=this.g=null}add(t,e){const r=UB.get();r.set(t,e),this.h?this.h.next=r:this.g=r,this.h=r}};function qW(){for(var n;n=jW();){try{n.h.call(n.g)}catch(e){GW(e)}var t=UB;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}cO=!1}function _S(n,t){Qi.call(this),this.h=n||1,this.g=t||zt,this.j=ps(this.kb,this),this.l=Date.now()}function uO(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function dO(n,t,e){if("function"==typeof n)e&&(n=ps(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ps(n.handleEvent,n)}return 2147483647<Number(t)?-1:zt.setTimeout(n,t||0)}function VB(n){n.g=dO(()=>{n.g=null,n.i&&(n.i=!1,VB(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}gs(_S,Qi),(ft=_S.prototype).da=!1,ft.S=null,ft.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ms(this,"tick"),this.da&&(uO(this),this.start()))}},ft.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.M=function(){_S.Z.M.call(this),uO(this),delete this.g};class zW extends Xf{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:VB(this)}M(){super.M(),this.g&&(zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Uw(n){Xf.call(this),this.h=n,this.g={}}gs(Uw,Xf);var jB=[];function HB(n,t,e,r){Array.isArray(e)||(e&&(jB[0]=e.toString()),e=jB);for(var i=0;i<e.length;i++){var o=OB(t,e[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function $B(n){ZR(n.g,function(t,e){this.g.hasOwnProperty(e)&&nO(t)},n),n.g={}}function yS(){this.g=!0}function sv(n,t,e,r){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function JW(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var r=e[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var c=1;c<i.length;c++)i[c]=""}}}return oO(e)}catch{return t}}(n,e)+(r?" "+r:"")})}Uw.prototype.M=function(){Uw.Z.M.call(this),$B(this)},Uw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yS.prototype.Aa=function(){this.g=!1},yS.prototype.info=function(){};var dm={},GB=null;function vS(){return GB=GB||new Qi}function ZB(n){Ms.call(this,dm.Ma,n)}function Bw(n){const t=vS();ms(t,new ZB(t,n))}function qB(n,t){Ms.call(this,dm.STAT_EVENT,n),this.stat=t}function lo(n){const t=vS();ms(t,new qB(t,n))}function zB(n,t){Ms.call(this,dm.Na,n),this.size=t}function Vw(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return zt.setTimeout(function(){n()},t)}dm.Ma="serverreachability",gs(ZB,Ms),dm.STAT_EVENT="statevent",gs(qB,Ms),dm.Na="timingevent",gs(zB,Ms);var bS={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},WB={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function hO(){}function YB(){}hO.prototype.h=null;var gO,jw={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function fO(){Ms.call(this,"d")}function pO(){Ms.call(this,"c")}function wS(){}function Hw(n,t,e,r){this.l=n,this.j=t,this.m=e,this.X=r||1,this.V=new Uw(this),this.P=QW,this.W=new _S(n=zR?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new JB}function JB(){this.i=null,this.g="",this.h=!1}gs(fO,Ms),gs(pO,Ms),gs(wS,hO),wS.prototype.g=function(){return new XMLHttpRequest},wS.prototype.i=function(){return{}},gO=new wS;var QW=45e3,mO={},CS={};function _O(n,t,e){n.K=1,n.v=IS(uh(t)),n.s=e,n.U=!0,QB(n,null)}function QB(n,t){n.F=Date.now(),$w(n),n.A=uh(n.v);var e=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),aV(e.h,"t",r),n.C=0,e=n.l.H,n.h=new JB,n.g=xV(n.l,e?t:null,!n.s),0<n.O&&(n.L=new zW(ps(n.Ia,n,n.g),n.O)),HB(n.V,n.g,"readystatechange",n.gb),t=n.H?SB(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),Bw(1),function WW(n,t,e,r,i,o){n.info(function(){if(n.g)if(o)for(var c="",d=o.split("&"),f=0;f<d.length;f++){var y=d[f].split("=");if(1<y.length){var w=y[0];y=y[1];var E=w.split("_");c=2<=E.length&&"type"==E[1]?c+(w+"=")+y+"&":c+(w+"=redacted&")}}else c=null;else c=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function XB(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function eV(n,t,e){let i,r=!0;for(;!n.I&&n.C<e.length;){if(i=XW(n,e),i==CS){4==t&&(n.o=4,lo(14),r=!1),sv(n.j,n.m,null,"[Incomplete Response]");break}if(i==mO){n.o=4,lo(15),sv(n.j,n.m,e,"[Invalid Chunk]"),r=!1;break}sv(n.j,n.m,i,null),yO(n,i)}XB(n)&&i!=CS&&i!=mO&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,lo(16),r=!1),n.i=n.i&&r,r?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),NO(t),t.L=!0,lo(11))):(sv(n.j,n.m,e,"[Invalid Chunked Response]"),hm(n),Gw(n))}function XW(n,t){var e=n.C,r=t.indexOf("\n",e);return-1==r?CS:(e=Number(t.substring(e,r)),isNaN(e)?mO:(r+=1)+e>t.length?CS:(t=t.substr(r,e),n.C=r+e,t))}function $w(n){n.Y=Date.now()+n.P,tV(n,n.P)}function tV(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Vw(ps(n.eb,n),t)}function TS(n){n.B&&(zt.clearTimeout(n.B),n.B=null)}function Gw(n){0==n.l.G||n.I||SV(n.l,n)}function hm(n){TS(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,uO(n.W),$B(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function yO(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||wO(e.i,n)))if(e.I=n.N,!n.J&&wO(e.i,n)&&3==e.G){try{var r=e.Ca.g.parse(t)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<n.F))break e;OS(e),kS(e)}AO(e),lo(18)}}else e.ta=i[1],0<e.ta-e.U&&37500>i[2]&&e.N&&0==e.A&&!e.v&&(e.v=Vw(ps(e.ab,e),6e3));if(1>=uV(e.i)&&e.ka){try{e.ka()}catch{}e.ka=void 0}}else gm(e,11)}else if((n.J||e.g==n)&&OS(e),!hS(t))for(i=e.Ca.g.parse(t),t=0;t<i.length;t++){let y=i[t];if(e.U=y[0],y=y[1],2==e.G)if("c"==y[0]){e.J=y[1],e.la=y[2];const w=y[3];null!=w&&(e.ma=w,e.h.info("VER="+e.ma));const E=y[4];null!=E&&(e.za=E,e.h.info("SVER="+e.za));const A=y[5];null!=A&&"number"==typeof A&&0<A&&(e.K=r=1.5*A,e.h.info("backChannelRequestTimeoutMs_="+r)),r=e;const k=n.g;if(k){const M=k.g?k.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(M){var o=r.i;!o.g&&(oo(M,"spdy")||oo(M,"quic")||oo(M,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(CO(o,o.h),o.h=null))}if(r.D){const V=k.g?k.g.getResponseHeader("X-HTTP-Session-Id"):null;V&&(r.sa=V,Sr(r.F,r.D,V))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var c=n;if((r=e).oa=NV(r,r.H?r.la:null,r.W),c.J){dV(r.i,c);var d=c,f=r.K;f&&d.setTimeout(f),d.B&&(TS(d),$w(d)),r.g=c}else EV(r);0<e.l.length&&RS(e)}else"stop"!=y[0]&&"close"!=y[0]||gm(e,7);else 3==e.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?gm(e,7):SO(e):"noop"!=y[0]&&e.j&&e.j.wa(y),e.A=0)}Bw(4)}catch{}}function vO(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(jR(n)||"string"==typeof n)wB(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(jR(n)||"string"==typeof n){e=[];for(var r=n.length,i=0;i<r;i++)e.push(i)}else for(i in e=[],r=0,n)e[r++]=i;r=function eK(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(jR(n)){for(var t=[],e=n.length,r=0;r<e;r++)t.push(n[r]);return t}for(r in t=[],e=0,n)t[e++]=n[r];return t}(n),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],e&&e[o],n)}}function ov(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var r=0;r<e;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof ov)for(e=n.T(),r=0;r<e.length;r++)this.set(e[r],n.get(e[r]));else for(r in n)this.set(r,n[r])}function bO(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var r=n.g[t];fm(n.h,r)&&(n.g[e++]=r),t++}n.g.length=e}if(n.i!=n.g.length){var i={};for(e=t=0;t<n.g.length;)fm(i,r=n.g[t])||(n.g[e++]=r,i[r]=1),t++;n.g.length=e}}function fm(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(ft=Hw.prototype).setTimeout=function(n){this.P=n},ft.gb=function(n){n=n.target;const t=this.L;t&&3==dh(n)?t.l():this.Ia(n)},ft.Ia=function(n){try{if(n==this.g)e:{const w=dh(this.g);var t=this.g.Da();const E=this.g.ba();if(!(3>w)&&(3!=w||zR||this.g&&(this.h.h||this.g.ga()||vV(this.g)))){this.I||4!=w||7==t||Bw(8==t||0>=E?3:2),TS(this);var e=this.g.ba();this.N=e;t:if(XB(this)){var r=vV(this.g);n="";var i=r.length,o=4==dh(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){hm(this),Gw(this);var c="";break t}this.h.i=new zt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,n+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==e,function KW(n,t,e,r,i,o,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+e+"\n"+o+" "+c})}(this.j,this.u,this.A,this.m,this.X,w,e),this.i){if(this.$&&!this.J){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hS(d)){var y=d;break t}}y=null}if(!(e=y)){this.i=!1,this.o=3,lo(12),hm(this),Gw(this);break e}sv(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,yO(this,e)}this.U?(eV(this,w,c),zR&&this.i&&3==w&&(HB(this.V,this.W,"tick",this.fb),this.W.start())):(sv(this.j,this.m,c,null),yO(this,c)),4==w&&hm(this),this.i&&!this.I&&(4==w?SV(this.l,this):(this.i=!1,$w(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,lo(12)):(this.o=0,lo(13)),hm(this),Gw(this)}}}catch{}},ft.fb=function(){if(this.g){var n=dh(this.g),t=this.g.ga();this.C<t.length&&(TS(this),eV(this,n,t),this.i&&4!=n&&$w(this))}},ft.cancel=function(){this.I=!0,hm(this)},ft.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function YW(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Bw(3),lo(17)),hm(this),this.o=2,Gw(this)):tV(this,this.Y-n)},(ft=ov.prototype).R=function(){bO(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},ft.T=function(){return bO(this),this.g.concat()},ft.get=function(n,t){return fm(this.h,n)?this.h[n]:t},ft.set=function(n,t){fm(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},ft.forEach=function(n,t){for(var e=this.T(),r=0;r<e.length;r++){var i=e[r],o=this.get(i);n.call(t,o,i,this)}};var nV=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function pm(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof pm){this.g=void 0!==t?t:n.g,ES(this,n.j),this.s=n.s,DS(this,n.i),SS(this,n.m),this.l=n.l,t=n.h;var e=new zw;e.i=t.i,t.g&&(e.g=new ov(t.g),e.h=t.h),rV(this,e),this.o=n.o}else n&&(e=String(n).match(nV))?(this.g=!!t,ES(this,e[1]||"",!0),this.s=Zw(e[2]||""),DS(this,e[3]||"",!0),SS(this,e[4]),this.l=Zw(e[5]||"",!0),rV(this,e[6]||"",!0),this.o=Zw(e[7]||"")):(this.g=!!t,this.h=new zw(null,this.g))}function uh(n){return new pm(n)}function ES(n,t,e){n.j=e?Zw(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function DS(n,t,e){n.i=e?Zw(t,!0):t}function SS(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function rV(n,t,e){t instanceof zw?(n.h=t,function cK(n,t){t&&!n.j&&(ep(n),n.i=null,n.g.forEach(function(e,r){var i=r.toLowerCase();r!=i&&(sV(this,r),aV(this,i,e))},n)),n.j=t}(n.h,n.g)):(e||(t=qw(t,aK)),n.h=new zw(t,n.g))}function Sr(n,t,e){n.h.set(t,e)}function IS(n){return Sr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Zw(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function qw(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,iK),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function iK(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}pm.prototype.toString=function(){var n=[],t=this.j;t&&n.push(qw(t,iV,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(qw(t,iV,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(qw(e,"/"==e.charAt(0)?oK:sK,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",qw(e,lK)),n.join("")};var iV=/[#\/\?@]/g,sK=/[#\?:]/g,oK=/[#\?]/g,aK=/[#\?@]/g,lK=/#/g;function zw(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function ep(n){n.g||(n.g=new ov,n.h=0,n.i&&function tK(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var r=n[e].indexOf("="),i=null;if(0<=r){var o=n[e].substring(0,r);i=n[e].substring(r+1)}else o=n[e];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function sV(n,t){ep(n),t=av(n,t),fm(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,fm((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&bO(n)))}function oV(n,t){return ep(n),t=av(n,t),fm(n.g.h,t)}function aV(n,t,e){sV(n,t),0<e.length&&(n.i=null,n.g.set(av(n,t),$R(e)),n.h+=e.length)}function av(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}(ft=zw.prototype).add=function(n,t){ep(this),this.i=null,n=av(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},ft.forEach=function(n,t){ep(this),this.g.forEach(function(e,r){wB(e,function(i){n.call(t,i,r,this)},this)},this)},ft.T=function(){ep(this);for(var n=this.g.R(),t=this.g.T(),e=[],r=0;r<t.length;r++)for(var i=n[r],o=0;o<i.length;o++)e.push(t[r]);return e},ft.R=function(n){ep(this);var t=[];if("string"==typeof n)oV(this,n)&&(t=CB(t,this.g.get(av(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=CB(t,n[e])}return t},ft.set=function(n,t){return ep(this),this.i=null,oV(this,n=av(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},ft.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var r=t[e],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var c=i;""!==r[o]&&(c+="="+encodeURIComponent(String(r[o]))),n.push(c)}}return this.i=n.join("&")};var uK=class{constructor(n,t){this.h=n,this.g=t}};function lV(n){this.l=n||dK,n=zt.PerformanceNavigationTiming?0<(n=zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(zt.g&&zt.g.Ea&&zt.g.Ea()&&zt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var dK=10;function cV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function uV(n){return n.h?1:n.g?n.g.size:0}function wO(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function CO(n,t){n.g?n.g.add(t):n.h=t}function dV(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function hV(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return $R(n.i)}function TO(){}function hK(){this.g=new TO}function fK(n,t,e){const r=e||"";try{vO(n,function(i,o){let c=i;Pw(i)&&(c=oO(i)),t.push(r+o+"="+encodeURIComponent(c))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function AS(n,t,e,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function Ww(n){this.l=n.$b||null,this.j=n.ib||!1}function NS(n,t){Qi.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=EO,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}lV.prototype.cancel=function(){if(this.i=hV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},TO.prototype.stringify=function(n){return zt.JSON.stringify(n,void 0)},TO.prototype.parse=function(n){return zt.JSON.parse(n,void 0)},gs(Ww,hO),Ww.prototype.g=function(){return new NS(this.l,this.j)},Ww.prototype.i=function(n){return function(){return n}}({}),gs(NS,Qi);var EO=0;function fV(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Kw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Yw(n)}function Yw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=NS.prototype).open=function(n,t){if(this.readyState!=EO)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,Yw(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||zt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kw(this)),this.readyState=EO},ft.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Yw(this)),this.g&&(this.readyState=3,Yw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fV(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ft.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Kw(this):Yw(this),3==this.readyState&&fV(this)}},ft.Ua=function(n){this.g&&(this.response=this.responseText=n,Kw(this))},ft.Ta=function(n){this.g&&(this.response=n,Kw(this))},ft.ha=function(){this.g&&Kw(this)},ft.setRequestHeader=function(n,t){this.v.append(n,t)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(NS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var gK=zt.JSON.parse;function Ti(n){Qi.call(this),this.headers=new ov,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=pV,this.K=this.L=!1}gs(Ti,Qi);var pV="",mK=/^https?$/i,_K=["POST","PUT"];function vK(n){return"content-type"==n.toLowerCase()}function gV(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,mV(n),xS(n)}function mV(n){n.D||(n.D=!0,ms(n,"complete"),ms(n,"error"))}function _V(n){if(n.h&&typeof VR<"u"&&(!n.C[1]||4!=dh(n)||2!=n.ba()))if(n.v&&4==dh(n))dO(n.Fa,0,n);else if(ms(n,"readystatechange"),4==dh(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var r;if(r=0===d){var i=String(n.H).match(nV)[1]||null;if(!i&&zt.self&&zt.self.location){var o=zt.self.location.protocol;i=o.substr(0,o.length-1)}r=!mK.test(i?i.toLowerCase():"")}e=r}if(e)ms(n,"complete"),ms(n,"success");else{n.m=6;try{var c=2<dh(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",mV(n)}}finally{xS(n)}}}function xS(n,t){if(n.g){yV(n);const e=n.g,r=n.C[0]?uS:null;n.g=null,n.C=null,t||ms(n,"ready");try{e.onreadystatechange=r}catch{}}}function yV(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(zt.clearTimeout(n.A),n.A=null)}function dh(n){return n.g?n.g.readyState:0}function vV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case pV:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function DO(n,t,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=function bK(n){let t="";return ZR(n,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Sr(n,t,e))}function Jw(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function bV(n){this.za=0,this.l=[],this.h=new yS,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Jw("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Jw("baseRetryDelayMs",5e3,n),this.$a=Jw("retryDelaySeedMs",1e4,n),this.Ya=Jw("forwardChannelMaxRetries",2,n),this.ra=Jw("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new lV(n&&n.concurrentRequestLimit),this.Ca=new hK,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function SO(n){if(wV(n),3==n.G){var t=n.V++,e=uh(n.F);Sr(e,"SID",n.J),Sr(e,"RID",t),Sr(e,"TYPE","terminate"),Qw(n,e),(t=new Hw(n,n.h,t,void 0)).K=2,t.v=IS(uh(e)),e=!1,zt.navigator&&zt.navigator.sendBeacon&&(e=zt.navigator.sendBeacon(t.v.toString(),"")),!e&&zt.Image&&((new Image).src=t.v,e=!0),e||(t.g=xV(t.l,null),t.g.ea(t.v)),t.F=Date.now(),$w(t)}AV(n)}function kS(n){n.g&&(NO(n),n.g.cancel(),n.g=null)}function wV(n){kS(n),n.u&&(zt.clearTimeout(n.u),n.u=null),OS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&zt.clearTimeout(n.m),n.m=null)}function IO(n,t){n.l.push(new uK(n.Za++,t)),3==n.G&&RS(n)}function RS(n){cV(n.i)||n.m||(n.m=!0,aO(n.Ha,n),n.C=0)}function CV(n,t){var e;e=t?t.m:n.V++;const r=uh(n.F);Sr(r,"SID",n.J),Sr(r,"RID",e),Sr(r,"AID",n.U),Qw(n,r),n.o&&n.s&&DO(r,n.o,n.s),e=new Hw(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=TV(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),CO(n.i,e),_O(e,r,t)}function Qw(n,t){n.j&&vO({},function(e,r){Sr(t,r,e)})}function TV(n,t,e){e=Math.min(n.l.length,e);var r=n.j?ps(n.j.Oa,n.j,n):null;e:{var i=n.l;let o=-1;for(;;){const c=["count="+e];-1==o?0<e?(o=i[0].h,c.push("ofs="+o)):o=0:c.push("ofs="+o);let d=!0;for(let f=0;f<e;f++){let y=i[f].h;const w=i[f].g;if(y-=o,0>y)o=Math.max(0,i[f].h-100),d=!1;else try{fK(w,c,"req"+y+"_")}catch{r&&r(w)}}if(d){r=c.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,r}function EV(n){n.g||n.u||(n.Y=1,aO(n.Ga,n),n.A=0)}function AO(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Vw(ps(n.Ga,n),IV(n,n.A)),n.A++,0))}function NO(n){null!=n.B&&(zt.clearTimeout(n.B),n.B=null)}function DV(n){n.g=new Hw(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=uh(n.oa);Sr(t,"RID","rpc"),Sr(t,"SID",n.J),Sr(t,"CI",n.N?"0":"1"),Sr(t,"AID",n.U),Qw(n,t),Sr(t,"TYPE","xmlhttp"),n.o&&n.s&&DO(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=IS(uh(t)),e.s=null,e.U=!0,QB(e,n)}function OS(n){null!=n.v&&(zt.clearTimeout(n.v),n.v=null)}function SV(n,t){var e=null;if(n.g==t){OS(n),NO(n),n.g=null;var r=2}else{if(!wO(n.i,t))return;e=t.D,dV(n.i,t),r=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==r){e=t.s?t.s.length:0,t=Date.now()-t.F;var i=n.C;ms(r=vS(),new zB(r,e,t,i)),RS(n)}else EV(n);else if(3==(i=t.o)||0==i&&0<n.I||!(1==r&&function wK(n,t){return!(uV(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Vw(ps(n.Ha,n,t),IV(n,n.C)),n.C++,0)))}(n,t)||2==r&&AO(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),i){case 1:gm(n,5);break;case 4:gm(n,10);break;case 3:gm(n,6);break;default:gm(n,2)}}function IV(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function gm(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var r=ps(n.jb,n);e||(e=new pm("//www.google.com/images/cleardot.gif"),zt.location&&"http"==zt.location.protocol||ES(e,"https"),IS(e)),function pK(n,t){const e=new yS;if(zt.Image){const r=new Image;r.onload=dS(AS,e,r,"TestLoadImage: loaded",!0,t),r.onerror=dS(AS,e,r,"TestLoadImage: error",!1,t),r.onabort=dS(AS,e,r,"TestLoadImage: abort",!1,t),r.ontimeout=dS(AS,e,r,"TestLoadImage: timeout",!1,t),zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else t(!1)}(e.toString(),r)}else lo(2);n.G=0,n.j&&n.j.va(t),AV(n),wV(n)}function AV(n){n.G=0,n.I=-1,n.j&&((0!=hV(n.i).length||0!=n.l.length)&&(n.i.i.length=0,$R(n.l),n.l.length=0),n.j.ua())}function NV(n,t,e){let r=function nK(n){return n instanceof pm?uh(n):new pm(n,void 0)}(e);if(""!=r.i)t&&DS(r,t+"."+r.i),SS(r,r.m);else{const i=zt.location;r=function rK(n,t,e,r){var i=new pm(null,void 0);return n&&ES(i,n),t&&DS(i,t),e&&SS(i,e),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,e)}return n.aa&&ZR(n.aa,function(i,o){Sr(r,o,i)}),e=n.sa,(t=n.D)&&e&&Sr(r,t,e),Sr(r,"VER",n.ma),Qw(n,r),r}function xV(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Ti(e&&n.Ba&&!n.qa?new Ww({ib:!0}):n.qa)).L=n.H,t}function kV(){}function MS(){if(iv&&!(10<=Number(MW)))throw Error("Environmental error: no available transport.")}function Ea(n,t){Qi.call(this),this.g=new bV(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!hS(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!hS(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new lv(this)}function RV(n){fO.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function OV(){pO.call(this),this.status=1}function lv(n){this.g=n}(ft=Ti.prototype).ea=function(n,t,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():gO.g(),this.C=function KB(n){return n.h||(n.h=n.i())}(this.u?this.u:gO),this.g.onreadystatechange=ps(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(o){return void gV(this,o)}n=e||"";const i=new ov(this.headers);r&&vO(r,function(o,c){i.set(c,o)}),r=function AW(n){e:{var t=vK;const e=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<e;i++)if(i in r&&t.call(void 0,r[i],i,n)){t=i;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(i.T()),e=zt.FormData&&n instanceof zt.FormData,!(0<=bB(_K,t))||r||e||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,c){this.g.setRequestHeader(c,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{yV(this),0<this.B&&((this.K=function yK(n){return iv&&function OW(){return function NW(n){var t=RW;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=TB(String(fS)).split("."),e=TB("9").split("."),r=Math.max(t.length,e.length);for(let c=0;0==n&&c<r;c++){var i=t[c]||"",o=e[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=GR(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||GR(0==i[2].length,0==o[2].length)||GR(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ps(this.pa,this)):this.A=dO(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){gV(this,o)}},ft.pa=function(){typeof VR<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ms(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ms(this,"complete"),ms(this,"abort"),xS(this))},ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xS(this,!0)),Ti.Z.M.call(this)},ft.Fa=function(){this.s||(this.F||this.v||this.l?_V(this):this.cb())},ft.cb=function(){_V(this)},ft.ba=function(){try{return 2<dh(this)?this.g.status:-1}catch{return-1}},ft.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),gK(t)}},ft.Da=function(){return this.m},ft.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=bV.prototype).ma=8,ft.G=1,ft.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},ft.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Hw(this,this.h,n,void 0);let o=this.s;if(this.P&&(o?(o=SB(o),AB(o,this.P)):o=this.P),null===this.o&&(i.H=o),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var r=this.l[e];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=TV(this,i,t),Sr(e=uh(this.F),"RID",n),Sr(e,"CVER",22),this.D&&Sr(e,"X-HTTP-Session-Id",this.D),Qw(this,e),this.o&&o&&DO(e,this.o,o),CO(this.i,i),this.Ra&&Sr(e,"TYPE","init"),this.ja?(Sr(e,"$req",t),Sr(e,"SID","null"),i.$=!0,_O(i,e,null)):_O(i,e,t),this.G=2}}else 3==this.G&&(n?CV(this,n):0==this.l.length||cV(this.i)||CV(this))},ft.Ga=function(){if(this.u=null,DV(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Vw(ps(this.bb,this),n)}},ft.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,lo(10),kS(this),DV(this))},ft.ab=function(){null!=this.v&&(this.v=null,kS(this),AO(this),lo(19))},ft.jb=function(n){n?(this.h.info("Successfully pinged google.com"),lo(2)):(this.h.info("Failed to ping google.com"),lo(1))},(ft=kV.prototype).xa=function(){},ft.wa=function(){},ft.va=function(){},ft.ua=function(){},ft.Oa=function(){},MS.prototype.g=function(n,t){return new Ea(n,t)},gs(Ea,Qi),Ea.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),aO(ps(n.hb,n,t))),lo(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=NV(n,null,n.W),RS(n)},Ea.prototype.close=function(){SO(this.g)},Ea.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,IO(this.g,t)}else this.v?((t={}).__data__=oO(n),IO(this.g,t)):IO(this.g,n)},Ea.prototype.M=function(){this.g.j=null,delete this.j,SO(this.g),delete this.g,Ea.Z.M.call(this)},gs(RV,fO),gs(OV,pO),gs(lv,kV),lv.prototype.xa=function(){ms(this.g,"a")},lv.prototype.wa=function(n){ms(this.g,new RV(n))},lv.prototype.va=function(n){ms(this.g,new OV(n))},lv.prototype.ua=function(){ms(this.g,"b")},MS.prototype.createWebChannel=MS.prototype.g,Ea.prototype.send=Ea.prototype.u,Ea.prototype.open=Ea.prototype.m,Ea.prototype.close=Ea.prototype.close,bS.NO_ERROR=0,bS.TIMEOUT=8,bS.HTTP_ERROR=6,WB.COMPLETE="complete",YB.EventType=jw,jw.OPEN="a",jw.CLOSE="b",jw.ERROR="c",jw.MESSAGE="d",Qi.prototype.listen=Qi.prototype.N,Ti.prototype.listenOnce=Ti.prototype.O,Ti.prototype.getLastError=Ti.prototype.La,Ti.prototype.getLastErrorCode=Ti.prototype.Da,Ti.prototype.getStatus=Ti.prototype.ba,Ti.prototype.getResponseJson=Ti.prototype.Qa,Ti.prototype.getResponseText=Ti.prototype.ga,Ti.prototype.send=Ti.prototype.ea;var CK=ch.createWebChannelTransport=function(){return new MS},TK=ch.getStatEventTarget=function(){return vS()},xO=ch.ErrorCode=bS,EK=ch.EventType=WB,DK=ch.Event=dm,MV=ch.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},SK=ch.FetchXmlHttpFactory=Ww,PS=ch.WebChannel=YB,IK=ch.XhrIo=Ti;const PV="@firebase/firestore";class Xi{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Xi.UNAUTHENTICATED=new Xi(null),Xi.GOOGLE_CREDENTIALS=new Xi("google-credentials-uid"),Xi.FIRST_PARTY=new Xi("first-party-uid"),Xi.MOCK_USER=new Xi("mock-user");let cv="9.9.2";const tp=new vc.Yd("@firebase/firestore");function kO(){return tp.logLevel}function Ze(n,...t){if(tp.logLevel<=vc.in.DEBUG){const e=t.map(RO);tp.debug(`Firestore (${cv}): ${n}`,...e)}}function fi(n,...t){if(tp.logLevel<=vc.in.ERROR){const e=t.map(RO);tp.error(`Firestore (${cv}): ${n}`,...e)}}function mm(n,...t){if(tp.logLevel<=vc.in.WARN){const e=t.map(RO);tp.warn(`Firestore (${cv}): ${n}`,...e)}}function RO(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function pt(n="Unexpected state"){const t=`FIRESTORE (${cv}) INTERNAL ASSERTION FAILED: `+n;throw fi(t),new Error(t)}function Gt(n,t){n||pt()}function at(n,t){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends F.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class es{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class FV{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class xK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Xi.UNAUTHENTICATED))}shutdown(){}}class kK{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class RK{constructor(t){this.t=t,this.currentUser=Xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var r=this;let i=this.i;const o=y=>this.i!==i?(i=this.i,e(y)):Promise.resolve();let c=new es;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new es,t.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const y=c;t.enqueueRetryable((0,Te.Z)(function*(){yield y.promise,yield o(r.currentUser)}))},f=y=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>f(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?f(y):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new es)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Gt("string"==typeof r.accessToken),new FV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Gt(null===t||"string"==typeof t),new Xi(t)}}class OK{constructor(t,e,r){this.type="FirstParty",this.user=Xi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class MK{constructor(t,e,r){this.h=t,this.l=e,this.m=r}getToken(){return Promise.resolve(new OK(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Xi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LV{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PK{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const r=o=>{null!=o.error&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.p;return this.p=o.token,Ze("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const i=o=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?i(o):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Gt("string"==typeof e.token),this.p=e.token,new LV(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function FK(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}class UV{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=FK(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<e&&(r+=t.charAt(i[o]%t.length))}return r}}function Wt(n,t){return n<t?-1:n>t?1:0}function uv(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function BV(n){return n+"\0"}class Ir{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Be(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Be(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Be(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Be(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ir.fromMillis(Date.now())}static fromDate(t){return Ir.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*e));return new Ir(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Wt(this.nanoseconds,t.nanoseconds):Wt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ht{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Ht(t)}static min(){return new Ht(new Ir(0,0))}static max(){return new Ht(new Ir(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xw{constructor(t,e,r){void 0===e?e=0:e>t.length&&pt(),void 0===r?r=t.length-e:r>t.length-e&&pt(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return 0===Xw.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Xw?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const o=t.get(i),c=e.get(i);if(o<c)return-1;if(o>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class mn extends Xw{construct(t,e,r){return new mn(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Be(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new mn(e)}static emptyPath(){return new mn([])}}const LK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kr extends Xw{construct(t,e,r){return new Kr(t,e,r)}static isValidIdentifier(t){return LK.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kr.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kr(["__name__"])}static fromServerFormat(t){const e=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Be(ge.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;i<t.length;){const d=t[i];if("\\"===d){if(i+1===t.length)throw new Be(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Be(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=f,i+=2}else"`"===d?(c=!c,i++):"."!==d||c?(r+=d,i++):(o(),i++)}if(o(),c)throw new Be(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Kr(e)}static emptyPath(){return new Kr([])}}class it{constructor(t){this.path=t}static fromPath(t){return new it(mn.fromString(t))}static fromName(t){return new it(mn.fromString(t).popFirst(5))}static empty(){return new it(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===mn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return mn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new it(new mn(t.slice()))}}class FS{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function OO(n){return n.fields.find(t=>2===t.kind)}function _m(n){return n.fields.filter(t=>2!==t.kind)}FS.UNKNOWN_ID=-1;class LS{constructor(t,e){this.fieldPath=t,this.kind=e}}class eC{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new eC(0,Da.min())}}function VV(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ht.fromTimestamp(1e9===r?new Ir(e+1,0):new Ir(e,r));return new Da(i,it.empty(),t)}function jV(n){return new Da(n.readTime,n.key,-1)}class Da{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Da(Ht.min(),it.empty(),-1)}static max(){return new Da(Ht.max(),it.empty(),-1)}}function MO(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=it.comparator(n.documentKey,t.documentKey),0!==e?e:Wt(n.largestBatchId,t.largestBatchId))}const HV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $V{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function np(n){return PO.apply(this,arguments)}function PO(){return PO=(0,Te.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==HV)throw n;Ze("LocalStore","Unexpectedly lost primary lease")}),PO.apply(this,arguments)}class de{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new de((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(e,o).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof de?e:de.resolve(e)}catch(e){return de.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):de.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):de.reject(e)}static resolve(t){return new de((e,r)=>{e(t)})}static reject(t){return new de((e,r)=>{r(t)})}static waitFor(t){return new de((e,r)=>{let i=0,o=0,c=!1;t.forEach(d=>{++i,d.next(()=>{++o,c&&o===i&&e()},f=>r(f))}),c=!0,o===i&&e()})}static or(t){let e=de.resolve(!1);for(const r of t)e=e.next(i=>i?de.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,o)=>{r.push(e.call(this,i,o))}),this.waitFor(r)}static mapArray(t,e){return new de((r,i)=>{const o=t.length,c=new Array(o);let d=0;for(let f=0;f<o;f++){const y=f;e(t[y]).next(w=>{c[y]=w,++d,d===o&&r(c)},w=>i(w))}})}static doWhile(t,e){return new de((r,i)=>{const o=()=>{!0===t()?e().next(()=>{o()},i):r()};o()})}}class US{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.T=new es,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{e.error?this.T.reject(new tC(t,e.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=FO(r.target.error);this.T.reject(new tC(t,i))}}static open(t,e,r,i){try{return new US(e,t.transaction(i,r))}catch(o){throw new tC(e,o)}}get A(){return this.T.promise}abort(t){t&&this.T.reject(t),this.aborted||(Ze("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new jK(e)}}class bc{constructor(t,e,r){this.name=t,this.version=e,this.P=r,12.2===bc.v((0,F.z$)())&&fi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ze("SimpleDb","Removing database:",t),ym(window.indexedDB.deleteDatabase(t)).toPromise()}static V(){if(!(0,F.hl)())return!1;if(bc.S())return!0;const t=(0,F.z$)(),e=bc.v(t),r=0<e&&e<10,i=bc.D(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)}static S(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.C)}static N(t,e){return t.store(e)}static v(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(t){var e=this;return(0,Te.Z)(function*(){return e.db||(Ze("SimpleDb","Opening database:",e.name),e.db=yield new Promise((r,i)=>{const o=indexedDB.open(e.name,e.version);o.onsuccess=c=>{r(c.target.result)},o.onblocked=()=>{i(new tC(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=c=>{const d=c.target.error;i("VersionError"===d.name?new Be(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Be(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new tC(t,d))},o.onupgradeneeded=c=>{Ze("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.P.M(c.target.result,o.transaction,c.oldVersion,e.version).next(()=>{Ze("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.O&&(e.db.onversionchange=r=>e.O(r)),e.db})()}F(t){this.O=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,r,i){var o=this;return(0,Te.Z)(function*(){const c="readonly"===e;let d=0;for(;;){++d;try{o.db=yield o.k(t);const f=US.open(o.db,t,c?"readonly":"readwrite",r),y=i(f).next(w=>(f.R(),w)).catch(w=>(f.abort(w),de.reject(w))).toPromise();return y.catch(()=>{}),yield f.A,y}catch(f){const y=f,w="FirebaseError"!==y.name&&d<3;if(Ze("SimpleDb","Transaction failed with error:",y.message,"Retrying:",w),o.close(),!w)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class VK{constructor(t){this.$=t,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(t){this.$=t}done(){this.B=!0}q(t){this.L=t}delete(){return ym(this.$.delete())}}class tC extends Be{constructor(t,e){super(ge.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function rp(n){return"IndexedDbTransactionError"===n.name}class jK{constructor(t){this.store=t}put(t,e){let r;return void 0!==e?(Ze("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):(Ze("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ym(r)}add(t){return Ze("SimpleDb","ADD",this.store.name,t,t),ym(this.store.add(t))}get(t){return ym(this.store.get(t)).next(e=>(void 0===e&&(e=null),Ze("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Ze("SimpleDb","DELETE",this.store.name,t),ym(this.store.delete(t))}count(){return Ze("SimpleDb","COUNT",this.store.name),ym(this.store.count())}K(t,e){const r=this.options(t,e);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.G(i,(c,d)=>{o.push(d)}).next(()=>o)}{const i=this.store.getAll(r.range);return new de((o,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{o(d.target.result)}})}}j(t,e){const r=this.store.getAll(t,null===e?void 0:e);return new de((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}W(t,e){Ze("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,e);r.H=!1;const i=this.cursor(r);return this.G(i,(o,c,d)=>d.delete())}J(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.G(i,e)}Y(t){const e=this.cursor({});return new de((r,i)=>{e.onerror=o=>{const c=FO(o.target.error);i(c)},e.onsuccess=o=>{const c=o.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}G(t,e){const r=[];return new de((i,o)=>{t.onerror=c=>{o(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void i();const f=new VK(d),y=e(d.primaryKey,d.value,f);if(y instanceof de){const w=y.catch(E=>(f.done(),de.reject(E)));r.push(w)}f.isDone?i():null===f.U?d.continue():d.continue(f.U)}}).next(()=>de.waitFor(r))}options(t,e){let r;return void 0!==t&&("string"==typeof t?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.H?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function ym(n){return new de((t,e)=>{n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{const i=FO(r.target.error);e(i)}})}let GV=!1;function FO(n){const t=bc.v((0,F.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new Be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return GV||(GV=!0,setTimeout(()=>{throw r},0)),r}}return n}class HK{constructor(t,e){this.asyncQueue=t,this.X=e,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(t){var e=this;Ze("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,Te.Z)(function*(){e.task=null;try{Ze("IndexBackiller",`Documents written: ${yield e.X.tt()}`)}catch(r){rp(r)?Ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield np(r)}yield e.Z(1)}))}}class $K{constructor(t,e){this.localStore=t,this.persistence=e}tt(t=50){var e=this;return(0,Te.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>e.et(r,t))})()}et(t,e){const r=new Set;let i=e,o=!0;return de.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(null!==c&&!r.has(c))return Ze("IndexBackiller",`Processing collection: ${c}`),this.nt(t,c,i).next(d=>{i-=d,r.add(c)});o=!1})).next(()=>e-i)}nt(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(i=>this.localStore.localDocuments.getNextDocuments(t,e,i,r).next(o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.st(i,o)).next(d=>(Ze("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}st(t,e){let r=t;return e.changes.forEach((i,o)=>{const c=jV(o);MO(c,r)>0&&(r=c)}),new Da(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}class Uo{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.it(r),this.rt=r=>e.writeSequenceNumber(r))}it(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.rt&&this.rt(t),t}}function ZV(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function vm(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function qV(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}Uo.ot=-1;class Yr{constructor(t,e){this.comparator=t,this.root=e||_s.EMPTY}insert(t,e){return new Yr(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,_s.BLACK,null,null))}remove(t){return new Yr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,_s.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(0===i)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new BS(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new BS(this.root,t,this.comparator,!1)}getReverseIterator(){return new BS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new BS(this.root,t,this.comparator,!0)}}class BS{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?r(t.key,e):1,e&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class _s{constructor(t,e,r,i,o){this.key=t,this.value=e,this.color=r??_s.RED,this.left=i??_s.EMPTY,this.right=o??_s.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,o){return new _s(t??this.key,e??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const o=r(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,e,r),null):0===o?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _s.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return _s.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,_s.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,_s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const t=this.left.check();if(t!==this.right.check())throw pt();return t+(this.isRed()?0:1)}}_s.EMPTY=null,_s.RED=!0,_s.BLACK=!1,_s.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(n,t,e,r,i){return this}insert(n,t,e){return new _s(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $n{constructor(t){this.comparator=t,this.data=new Yr(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new zV(this.data.getIterator())}getIteratorFrom(t){return new zV(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof $n)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new $n(this.comparator);return e.data=t,e}}class zV{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function dv(n){return n.hasNext()?n.getNext():void 0}class Sa{constructor(t){this.fields=t,t.sort(Kr.comparator)}static empty(){return new Sa([])}unionWith(t){let e=new $n(Kr.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Sa(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return uv(this.fields,t.fields,(e,r)=>e.isEqual(r))}}class Vi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Vi(e)}static fromUint8Array(t){const e=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(t);return new Vi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Wt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Vi.EMPTY_BYTE_STRING=new Vi("");const ZK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ip(n){if(Gt(!!n),"string"==typeof n){let t=0;const e=ZK.exec(n);if(Gt(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Jr(n.seconds),nanos:Jr(n.nanos)}}function Jr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function bm(n){return"string"==typeof n?Vi.fromBase64String(n):Vi.fromUint8Array(n)}function LO(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function WV(n){const t=n.mapValue.fields.__previous_value__;return LO(t)?WV(t):t}function nC(n){const t=ip(n.mapValue.fields.__local_write_time__.timestampValue);return new Ir(t.seconds,t.nanos)}class qK{constructor(t,e,r,i,o,c,d,f){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=f}}class hh{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new hh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof hh&&t.projectId===this.projectId&&t.database===this.database}}function rC(n){return null==n}function iC(n){return 0===n&&1/n==-1/0}function KV(n){return"number"==typeof n&&Number.isInteger(n)&&!iC(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const sp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},VS={nullValue:"NULL_VALUE"};function wm(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?LO(n)?4:XV(n)?9007199254740991:10:pt()}function Ru(n,t){if(n===t)return!0;const e=wm(n);if(e!==wm(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return nC(n).isEqual(nC(t));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=ip(r.timestampValue),c=ip(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return i=t,bm(n.bytesValue).isEqual(bm(i.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,i){return Jr(r.geoPointValue.latitude)===Jr(i.geoPointValue.latitude)&&Jr(r.geoPointValue.longitude)===Jr(i.geoPointValue.longitude)}(n,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Jr(r.integerValue)===Jr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Jr(r.doubleValue),c=Jr(i.doubleValue);return o===c?iC(o)===iC(c):isNaN(o)&&isNaN(c)}return!1}(n,t);case 9:return uv(n.arrayValue.values||[],t.arrayValue.values||[],Ru);case 10:return function(r,i){const o=r.mapValue.fields||{},c=i.mapValue.fields||{};if(ZV(o)!==ZV(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(void 0===c[d]||!Ru(o[d],c[d])))return!1;return!0}(n,t);default:return pt()}var i}function sC(n,t){return void 0!==(n.values||[]).find(e=>Ru(e,t))}function op(n,t){if(n===t)return 0;const e=wm(n),r=wm(t);if(e!==r)return Wt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,t.booleanValue);case 2:return function(i,o){const c=Jr(i.integerValue||i.doubleValue),d=Jr(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,t);case 3:return YV(n.timestampValue,t.timestampValue);case 4:return YV(nC(n),nC(t));case 5:return Wt(n.stringValue,t.stringValue);case 6:return function(i,o){const c=bm(i),d=bm(o);return c.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(i,o){const c=i.split("/"),d=o.split("/");for(let f=0;f<c.length&&f<d.length;f++){const y=Wt(c[f],d[f]);if(0!==y)return y}return Wt(c.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,o){const c=Wt(Jr(i.latitude),Jr(o.latitude));return 0!==c?c:Wt(Jr(i.longitude),Jr(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(i,o){const c=i.values||[],d=o.values||[];for(let f=0;f<c.length&&f<d.length;++f){const y=op(c[f],d[f]);if(y)return y}return Wt(c.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===sp.mapValue&&o===sp.mapValue)return 0;if(i===sp.mapValue)return 1;if(o===sp.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),f=o.fields||{},y=Object.keys(f);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const E=Wt(d[w],y[w]);if(0!==E)return E;const A=op(c[d[w]],f[y[w]]);if(0!==A)return A}return Wt(d.length,y.length)}(n.mapValue,t.mapValue);default:throw pt()}}function YV(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Wt(n,t);const e=ip(n),r=ip(t),i=Wt(e.seconds,r.seconds);return 0!==i?i:Wt(e.nanos,r.nanos)}function hv(n){return UO(n)}function UO(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ip(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?bm(n.bytesValue).toBase64():"referenceValue"in n?it.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const c of r.values||[])o?o=!1:i+=",",i+=UO(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",c=!0;for(const d of i)c?c=!1:o+=",",o+=`${d}:${UO(r.fields[d])}`;return o+"}"}(n.mapValue):pt();var t}function Cm(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function BO(n){return!!n&&"integerValue"in n}function oC(n){return!!n&&"arrayValue"in n}function JV(n){return!!n&&"nullValue"in n}function QV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jS(n){return!!n&&"mapValue"in n}function aC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return vm(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=aC(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=aC(n.arrayValue.values[e]);return t}return Object.assign({},n)}function XV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function zK(n){return"nullValue"in n?VS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Cm(hh.empty(),it.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:pt()}function WK(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Cm(hh.empty(),it.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?sp:pt()}function e3(n,t){const e=op(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function t3(n,t){const e=op(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class ys{constructor(t){this.value=t}static empty(){return new ys({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!jS(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=aC(e)}setAll(t){let e=Kr.emptyPath(),r={},i=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const f=this.getFieldsMap(e);this.applyChanges(f,r,i),r={},i=[],e=d.popLast()}c?r[d.lastSegment()]=aC(c):i.push(d.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,r,i)}delete(t){const e=this.field(t.popLast());jS(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ru(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];jS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){vm(e,(i,o)=>t[i]=o);for(const i of r)delete t[i]}clone(){return new ys(aC(this.value))}}function n3(n){const t=[];return vm(n.fields,(e,r)=>{const i=new Kr([e]);if(jS(r)){const o=n3(r.mapValue).fields;if(0===o.length)t.push(i);else for(const c of o)t.push(i.child(c))}else t.push(i)}),new Sa(t)}class er{constructor(t,e,r,i,o,c){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.data=o,this.documentState=c}static newInvalidDocument(t){return new er(t,0,Ht.min(),Ht.min(),ys.empty(),0)}static newFoundDocument(t,e,r){return new er(t,1,e,Ht.min(),r,0)}static newNoDocument(t,e){return new er(t,2,e,Ht.min(),ys.empty(),0)}static newUnknownDocument(t,e){return new er(t,3,e,Ht.min(),ys.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ys.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ys.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ht.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof er&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new er(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class KK{constructor(t,e=null,r=[],i=[],o=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=d,this.ut=null}}function r3(n,t=null,e=[],r=[],i=null,o=null,c=null){return new KK(n,t,e,r,i,o,c)}function Tm(n){const t=at(n);if(null===t.ut){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+hv(i.value);var i}).join(","),e+="|ob:",e+=t.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),rC(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>hv(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>hv(r)).join(",")),t.ut=e}return t.ut}function lC(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!i7(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((e=n.filters[i]).op!==(r=t.filters[i]).op||!e.field.isEqual(r.field)||!Ru(e.value,r.value))return!1;var e,r;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!c3(n.startAt,t.startAt)&&c3(n.endAt,t.endAt)}function HS(n){return it.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function $S(n,t){return n.filters.filter(e=>e instanceof vs&&e.field.isEqual(t))}function s3(n,t,e){let r=VS,i=!0;for(const o of $S(n,t)){let c=VS,d=!0;switch(o.op){case"<":case"<=":c=zK(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,d=!1;break;case"!=":case"not-in":c=VS}e3({value:r,inclusive:i},{value:c,inclusive:d})<0&&(r=c,i=d)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];e3({value:r,inclusive:i},{value:c,inclusive:e.inclusive})<0&&(r=c,i=e.inclusive);break}return{value:r,inclusive:i}}function o3(n,t,e){let r=sp,i=!0;for(const o of $S(n,t)){let c=sp,d=!0;switch(o.op){case">=":case">":c=WK(o.value),d=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,d=!1;break;case"!=":case"not-in":c=sp}t3({value:r,inclusive:i},{value:c,inclusive:d})>0&&(r=c,i=d)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];t3({value:r,inclusive:i},{value:c,inclusive:e.inclusive})>0&&(r=c,i=e.inclusive);break}return{value:r,inclusive:i}}class vs extends class{}{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?"in"===e||"not-in"===e?this.ct(t,e,r):new JK(t,e,r):"array-contains"===e?new e7(t,r):"in"===e?new t7(t,r):"not-in"===e?new n7(t,r):"array-contains-any"===e?new r7(t,r):new vs(t,e,r)}static ct(t,e,r){return"in"===e?new QK(t,r):new XK(t,r)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.at(op(e,this.value)):null!==e&&wm(this.value)===wm(e)&&this.at(op(e,this.value))}at(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return pt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class JK extends vs{constructor(t,e,r){super(t,e,r),this.key=it.fromName(r.referenceValue)}matches(t){const e=it.comparator(t.key,this.key);return this.at(e)}}class QK extends vs{constructor(t,e){super(t,"in",e),this.keys=a3(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class XK extends vs{constructor(t,e){super(t,"not-in",e),this.keys=a3(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function a3(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(r=>it.fromName(r.referenceValue))}class e7 extends vs{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return oC(e)&&sC(e.arrayValue,this.value)}}class t7 extends vs{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&sC(this.value.arrayValue,e)}}class n7 extends vs{constructor(t,e){super(t,"not-in",e)}matches(t){if(sC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!sC(this.value.arrayValue,e)}}class r7 extends vs{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!oC(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>sC(this.value.arrayValue,r))}}class ap{constructor(t,e){this.position=t,this.inclusive=e}}class fv{constructor(t,e="asc"){this.field=t,this.dir=e}}function i7(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function l3(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const o=t[i],c=n.position[i];if(r=o.field.isKeyField()?it.comparator(it.fromName(c.referenceValue),e.key):op(c,e.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function c3(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ru(n.position[e],t.position[e]))return!1;return!0}class fh{constructor(t,e=null,r=[],i=[],o=null,c="F",d=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=f,this.lt=null,this.ft=null}}function u3(n,t,e,r,i,o,c,d){return new fh(n,t,e,r,i,o,c,d)}function pv(n){return new fh(n)}function d3(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function VO(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function jO(n){for(const t of n.filters)if(t.ht())return t.field;return null}function HO(n){return null!==n.collectionGroup}function gv(n){const t=at(n);if(null===t.lt){t.lt=[];const e=jO(t),r=VO(t);if(null!==e&&null===r)e.isKeyField()||t.lt.push(new fv(e)),t.lt.push(new fv(Kr.keyField(),"asc"));else{let i=!1;for(const o of t.explicitOrderBy)t.lt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new fv(Kr.keyField(),o))}}}return t.lt}function Bo(n){const t=at(n);if(!t.ft)if("F"===t.limitType)t.ft=r3(t.path,t.collectionGroup,gv(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const o of gv(t))e.push(new fv(o.field,"desc"===o.dir?"asc":"desc"));const r=t.endAt?new ap(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ap(t.startAt.position,t.startAt.inclusive):null;t.ft=r3(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}return t.ft}function GS(n,t,e){return new fh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function cC(n,t){return lC(Bo(n),Bo(t))&&n.limitType===t.limitType}function h3(n){return`${Tm(Bo(n))}|lt:${n.limitType}`}function $O(n){return`Query(target=${function YK(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(r=e).field.canonicalString()} ${r.op} ${hv(r.value)}`;var r}).join(", ")}]`),rC(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(r=e).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>hv(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>hv(e)).join(",")),`Target(${t})`}(Bo(n))}; limitType=${n.limitType})`}function GO(n,t){return t.isFoundDocument()&&function(e,r){const i=r.key.path;return null!==e.collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(i):it.isDocumentKey(e.path)?e.path.isEqual(i):e.path.isImmediateParentOf(i)}(n,t)&&function(e,r){for(const i of e.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,t)&&function(e,r){for(const i of e.filters)if(!i.matches(r))return!1;return!0}(n,t)&&(r=t,!((e=n).startAt&&!function(i,o,c){const d=l3(i,o,c);return i.inclusive?d<=0:d<0}(e.startAt,gv(e),r)||e.endAt&&!function(i,o,c){const d=l3(i,o,c);return i.inclusive?d>=0:d>0}(e.endAt,gv(e),r)));var e,r}function f3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function p3(n){return(t,e)=>{let r=!1;for(const i of gv(n)){const o=s7(i,t,e);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function s7(n,t,e){const r=n.field.isKeyField()?it.comparator(t.key,e.key):function(i,o,c){const d=o.data.field(i),f=c.data.field(i);return null!==d&&null!==f?op(d,f):pt()}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pt()}}function g3(n,t){if(n.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iC(t)?"-0":t}}function m3(n){return{integerValue:""+n}}function _3(n,t){return KV(t)?m3(t):g3(n,t)}class ZS{constructor(){this._=void 0}}function o7(n,t,e){return n instanceof mv?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(e,t):n instanceof Em?v3(n,t):n instanceof Dm?b3(n,t):function(r,i){const o=y3(r,i),c=w3(o)+w3(r._t);return BO(o)&&BO(r._t)?m3(c):g3(r.wt,c)}(n,t)}function a7(n,t,e){return n instanceof Em?v3(n,t):n instanceof Dm?b3(n,t):e}function y3(n,t){return n instanceof _v?BO(e=t)||(r=e)&&"doubleValue"in r?t:{integerValue:0}:null;var r,e}class mv extends ZS{}class Em extends ZS{constructor(t){super(),this.elements=t}}function v3(n,t){const e=C3(t);for(const r of n.elements)e.some(i=>Ru(i,r))||e.push(r);return{arrayValue:{values:e}}}class Dm extends ZS{constructor(t){super(),this.elements=t}}function b3(n,t){let e=C3(t);for(const r of n.elements)e=e.filter(i=>!Ru(i,r));return{arrayValue:{values:e}}}class _v extends ZS{constructor(t,e){super(),this.wt=t,this._t=e}}function w3(n){return Jr(n.integerValue||n.doubleValue)}function C3(n){return oC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class uC{constructor(t,e){this.field=t,this.transform=e}}class c7{constructor(t,e){this.version=t,this.transformResults=e}}class Br{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Br}static exists(t){return new Br(void 0,t)}static updateTime(t){return new Br(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function qS(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class zS{}function T3(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new vv(n.key,Br.none()):new yv(n.key,n.data,Br.none());{const e=n.data,r=ys.empty();let i=new $n(Kr.comparator);for(let o of t.fields)if(!i.has(o)){let c=e.field(o);null===c&&o.length>1&&(o=o.popLast(),c=e.field(o)),null===c?r.delete(o):r.set(o,c),i=i.add(o)}return new ph(n.key,r,new Sa(i.toArray()),Br.none())}}function u7(n,t,e){n instanceof yv?function(r,i,o){const c=r.value.clone(),d=S3(r.fieldTransforms,i,o.transformResults);c.setAll(d),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,t,e):n instanceof ph?function(r,i,o){if(!qS(r.precondition,i))return void i.convertToUnknownDocument(o.version);const c=S3(r.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(D3(r)),d.setAll(c),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function dC(n,t,e,r){return n instanceof yv?function(i,o,c,d){if(!qS(i.precondition,o))return c;const f=i.value.clone(),y=I3(i.fieldTransforms,d,o);return f.setAll(y),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,t,e,r):n instanceof ph?function(i,o,c,d){if(!qS(i.precondition,o))return c;const f=I3(i.fieldTransforms,d,o),y=o.data;return y.setAll(D3(i)),y.setAll(f),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(w=>w.field))}(n,t,e,r):(c=e,qS(n.precondition,o=t)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c);var o,c}function d7(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),o=y3(r.transform,i||null);null!=o&&(null===e&&(e=ys.empty()),e.set(r.field,o))}return e||null}function E3(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===r||e&&r&&uv(e,r,(i,o)=>function l7(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(e=n.transform)instanceof Em&&r instanceof Em||e instanceof Dm&&r instanceof Dm?uv(e.elements,r.elements,Ru):e instanceof _v&&r instanceof _v?Ru(e._t,r._t):e instanceof mv&&r instanceof mv);var e,r}(i,o))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,r}class yv extends zS{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ph extends zS{constructor(t,e,r,i,o=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function D3(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function S3(n,t,e){const r=new Map;Gt(n.length===e.length);for(let i=0;i<e.length;i++){const o=n[i],c=o.transform,d=t.data.field(o.field);r.set(o.field,a7(c,d,e[i]))}return r}function I3(n,t,e){const r=new Map;for(const i of n){const o=i.transform,c=e.data.field(i.field);r.set(i.field,o7(o,c,t))}return r}class vv extends zS{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZO extends zS{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class h7{constructor(t){this.count=t}}var Ei,_n;function A3(n){switch(n){default:return pt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function N3(n){if(void 0===n)return fi("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Ei.OK:return ge.OK;case Ei.CANCELLED:return ge.CANCELLED;case Ei.UNKNOWN:return ge.UNKNOWN;case Ei.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Ei.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Ei.INTERNAL:return ge.INTERNAL;case Ei.UNAVAILABLE:return ge.UNAVAILABLE;case Ei.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Ei.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Ei.NOT_FOUND:return ge.NOT_FOUND;case Ei.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Ei.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Ei.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Ei.ABORTED:return ge.ABORTED;case Ei.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Ei.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Ei.DATA_LOSS:return ge.DATA_LOSS;default:return pt()}}(_n=Ei||(Ei={}))[_n.OK=0]="OK",_n[_n.CANCELLED=1]="CANCELLED",_n[_n.UNKNOWN=2]="UNKNOWN",_n[_n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_n[_n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_n[_n.NOT_FOUND=5]="NOT_FOUND",_n[_n.ALREADY_EXISTS=6]="ALREADY_EXISTS",_n[_n.PERMISSION_DENIED=7]="PERMISSION_DENIED",_n[_n.UNAUTHENTICATED=16]="UNAUTHENTICATED",_n[_n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_n[_n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_n[_n.ABORTED=10]="ABORTED",_n[_n.OUT_OF_RANGE=11]="OUT_OF_RANGE",_n[_n.UNIMPLEMENTED=12]="UNIMPLEMENTED",_n[_n.INTERNAL=13]="INTERNAL",_n[_n.UNAVAILABLE=14]="UNAVAILABLE",_n[_n.DATA_LOSS=15]="DATA_LOSS";class lp{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,t))return o}has(t){return void 0!==this.get(t)}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(void 0===i)return this.inner[r]=[[t,e]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return 1===r.length?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){vm(this.inner,(e,r)=>{for(const[i,o]of r)t(i,o)})}isEmpty(){return qV(this.inner)}size(){return this.innerSize}}const f7=new Yr(it.comparator);function Vo(){return f7}const x3=new Yr(it.comparator);function hC(...n){let t=x3;for(const e of n)t=t.insert(e.key,e);return t}function k3(n){let t=x3;return n.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function Ou(){return fC()}function R3(){return fC()}function fC(){return new lp(n=>n.toString(),(n,t)=>n.isEqual(t))}const p7=new Yr(it.comparator),g7=new $n(it.comparator);function Qt(...n){let t=g7;for(const e of n)t=t.add(e);return t}const m7=new $n(Wt);function WS(){return m7}class pC{constructor(t,e,r,i,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e){const r=new Map;return r.set(t,gC.createSynthesizedTargetChangeForCurrentChange(t,e)),new pC(Ht.min(),r,WS(),Vo(),Qt())}}class gC{constructor(t,e,r,i,o){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e){return new gC(Vi.EMPTY_BYTE_STRING,e,Qt(),Qt(),Qt())}}class KS{constructor(t,e,r,i){this.gt=t,this.removedTargetIds=e,this.key=r,this.yt=i}}class O3{constructor(t,e){this.targetId=t,this.It=e}}class M3{constructor(t,e,r=Vi.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class P3{constructor(){this.Tt=0,this.Et=L3(),this.At=Vi.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(t){t.approximateByteSize()>0&&(this.bt=!0,this.At=t)}St(){let t=Qt(),e=Qt(),r=Qt();return this.Et.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:pt()}}),new gC(this.At,this.Rt,t,e,r)}Dt(){this.bt=!1,this.Et=L3()}Ct(t,e){this.bt=!0,this.Et=this.Et.insert(t,e)}xt(t){this.bt=!0,this.Et=this.Et.remove(t)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class _7{constructor(t){this.Ot=t,this.Ft=new Map,this.$t=Vo(),this.Bt=F3(),this.Lt=new $n(Wt)}Ut(t){for(const e of t.gt)t.yt&&t.yt.isFoundDocument()?this.qt(e,t.yt):this.Kt(e,t.key,t.yt);for(const e of t.removedTargetIds)this.Kt(e,t.key,t.yt)}Gt(t){this.forEachTarget(t,e=>{const r=this.Qt(e);switch(t.state){case 0:this.jt(e)&&r.Vt(t.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(t.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(e);break;case 3:this.jt(e)&&(r.Mt(),r.Vt(t.resumeToken));break;case 4:this.jt(e)&&(this.Wt(e),r.Vt(t.resumeToken));break;default:pt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ft.forEach((r,i)=>{this.jt(i)&&e(i)})}zt(t){const e=t.targetId,r=t.It.count,i=this.Ht(e);if(i){const o=i.target;if(HS(o))if(0===r){const c=new it(o.path);this.Kt(e,c,er.newNoDocument(c,Ht.min()))}else Gt(1===r);else this.Jt(e)!==r&&(this.Wt(e),this.Lt=this.Lt.add(e))}}Yt(t){const e=new Map;this.Ft.forEach((o,c)=>{const d=this.Ht(c);if(d){if(o.current&&HS(d.target)){const f=new it(d.target.path);null!==this.$t.get(f)||this.Xt(c,f)||this.Kt(c,f,er.newNoDocument(f,t))}o.vt&&(e.set(c,o.St()),o.Dt())}});let r=Qt();this.Bt.forEach((o,c)=>{let d=!0;c.forEachWhile(f=>{const y=this.Ht(f);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(o))}),this.$t.forEach((o,c)=>c.setReadTime(t));const i=new pC(t,e,this.Lt,this.$t,r);return this.$t=Vo(),this.Bt=F3(),this.Lt=new $n(Wt),i}qt(t,e){if(!this.jt(t))return;const r=this.Xt(t,e.key)?2:0;this.Qt(t).Ct(e.key,r),this.$t=this.$t.insert(e.key,e),this.Bt=this.Bt.insert(e.key,this.Zt(e.key).add(t))}Kt(t,e,r){if(!this.jt(t))return;const i=this.Qt(t);this.Xt(t,e)?i.Ct(e,1):i.xt(e),this.Bt=this.Bt.insert(e,this.Zt(e).delete(t)),r&&(this.$t=this.$t.insert(e,r))}removeTarget(t){this.Ft.delete(t)}Jt(t){const e=this.Qt(t).St();return this.Ot.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Nt(t){this.Qt(t).Nt()}Qt(t){let e=this.Ft.get(t);return e||(e=new P3,this.Ft.set(t,e)),e}Zt(t){let e=this.Bt.get(t);return e||(e=new $n(Wt),this.Bt=this.Bt.insert(t,e)),e}jt(t){const e=null!==this.Ht(t);return e||Ze("WatchChangeAggregator","Detected inactive target",t),e}Ht(t){const e=this.Ft.get(t);return e&&e.Pt?null:this.Ot.te(t)}Wt(t){this.Ft.set(t,new P3),this.Ot.getRemoteKeysForTarget(t).forEach(e=>{this.Kt(t,e,null)})}Xt(t,e){return this.Ot.getRemoteKeysForTarget(t).has(e)}}function F3(){return new Yr(it.comparator)}function L3(){return new Yr(it.comparator)}const y7={asc:"ASCENDING",desc:"DESCENDING"},v7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class b7{constructor(t,e){this.databaseId=t,this.dt=e}}function mC(n,t){return n.dt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function U3(n,t){return n.dt?t.toBase64():t.toUint8Array()}function w7(n,t){return mC(n,t.toTimestamp())}function ts(n){return Gt(!!n),Ht.fromTimestamp(function(t){const e=ip(t);return new Ir(e.seconds,e.nanos)}(n))}function qO(n,t){return(e=n,new mn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function B3(n){const t=mn.fromString(n);return Gt(W3(t)),t}function _C(n,t){return qO(n.databaseId,t.path)}function Mu(n,t){const e=B3(t);if(e.get(1)!==n.databaseId.projectId)throw new Be(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Be(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new it(j3(e))}function zO(n,t){return qO(n.databaseId,t)}function V3(n){const t=B3(n);return 4===t.length?mn.emptyPath():j3(t)}function yC(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function j3(n){return Gt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function H3(n,t,e){return{name:_C(n,t),fields:e.value.mapValue.fields}}function $3(n,t,e){const r=Mu(n,t.name),i=ts(t.updateTime),o=new ys({mapValue:{fields:t.fields}}),c=er.newFoundDocument(r,i,o);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function vC(n,t){let e;if(t instanceof yv)e={update:H3(n,t.key,t.value)};else if(t instanceof vv)e={delete:_C(n,t.key)};else if(t instanceof ph)e={update:H3(n,t.key,t.data),updateMask:x7(t.fieldMask)};else{if(!(t instanceof ZO))return pt();e={verify:_C(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof mv)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Em)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Dm)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof _v)return{fieldPath:o.field.canonicalString(),increment:c._t};throw pt()}(0,r))),t.precondition.isNone||(e.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:w7(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:pt()),e;var i}function WO(n,t){const e=t.currentDocument?void 0!==(i=t.currentDocument).updateTime?Br.updateTime(ts(i.updateTime)):void 0!==i.exists?Br.exists(i.exists):Br.none():Br.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(o,c){let d=null;"setToServerValue"in c?(Gt("REQUEST_TIME"===c.setToServerValue),d=new mv):"appendMissingElements"in c?d=new Em(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new Dm(c.removeAllFromArray.values||[]):"increment"in c?d=new _v(o,c.increment):pt();const f=Kr.fromServerFormat(c.fieldPath);return new uC(f,d)}(n,i)):[];var i;if(t.update){const i=Mu(n,t.update.name),o=new ys({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new Sa((t.updateMask.fieldPaths||[]).map(y=>Kr.fromServerFormat(y)));return new ph(i,o,c,e,r)}return new yv(i,o,e,r)}if(t.delete){const i=Mu(n,t.delete);return new vv(i,e)}if(t.verify){const i=Mu(n,t.verify);return new ZO(i,e)}return pt()}function G3(n,t){return{documents:[zO(n,t.path)]}}function Z3(n,t){const e={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(e.parent=zO(n,r),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=zO(n,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0===f.length)return;const y=f.map(w=>function(E){if("=="===E.op){if(QV(E.value))return{unaryFilter:{field:bv(E.field),op:"IS_NAN"}};if(JV(E.value))return{unaryFilter:{field:bv(E.field),op:"IS_NULL"}}}else if("!="===E.op){if(QV(E.value))return{unaryFilter:{field:bv(E.field),op:"IS_NOT_NAN"}};if(JV(E.value))return{unaryFilter:{field:bv(E.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bv(E.field),op:I7(E.op),value:E.value}}}(w));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(t.filters);i&&(e.structuredQuery.where=i);const o=function(f){if(0!==f.length)return f.map(y=>{return{field:bv((w=y).field),direction:S7(w.dir)};var w})}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const c=(y=t.limit,n.dt||rC(y)?y:{value:y});var y,d,f;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(f=t.endAt).inclusive,values:f.position}),e}function q3(n){let t=V3(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Gt(1===r);const w=e.from[0];w.allDescendants?i=w.collectionId:t=t.child(w.collectionId)}let o=[];e.where&&(o=z3(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(w=>{return new fv(wv((E=w).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let d=null;e.limit&&(d=function(w){let E;return E="object"==typeof w?w.value:w,rC(E)?null:E}(e.limit));let f=null;var w;e.startAt&&(f=new ap((w=e.startAt).values||[],!!w.before));let y=null;return e.endAt&&(y=function(w){return new ap(w.values||[],!w.before)}(e.endAt)),u3(t,i,c,o,d,"F",f,y)}function z3(n){return n?void 0!==n.unaryFilter?[N7(n)]:void 0!==n.fieldFilter?[A7(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>z3(t)).reduce((t,e)=>t.concat(e)):pt():[]}function S7(n){return y7[n]}function I7(n){return v7[n]}function bv(n){return{fieldPath:n.canonicalString()}}function wv(n){return Kr.fromServerFormat(n.fieldPath)}function A7(n){return vs.create(wv(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(n.fieldFilter.op),n.fieldFilter.value)}function N7(n){switch(n.unaryFilter.op){case"IS_NAN":const t=wv(n.unaryFilter.field);return vs.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=wv(n.unaryFilter.field);return vs.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=wv(n.unaryFilter.field);return vs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=wv(n.unaryFilter.field);return vs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}function x7(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function W3(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function co(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=K3(t)),t=k7(n.get(e),t);return K3(t)}function k7(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=o}}return e}function K3(n){return n+"\x01\x01"}function Pu(n){const t=n.length;if(Gt(t>=2),2===t)return Gt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mn.emptyPath();const e=t-2,r=[];let i="";for(let o=0;o<t;){const c=n.indexOf("\x01",o);switch((c<0||c>e)&&pt(),n.charAt(c+1)){case"\x01":const d=n.substring(o,c);let f;0===i.length?f=d:(i+=d,f=i,i=""),r.push(f);break;case"\x10":i+=n.substring(o,c),i+="\0";break;case"\x11":i+=n.substring(o,c+1);break;default:pt()}o=c+2}return new mn(r)}const Y3=["userId","batchId"];function YS(n,t){return[n,co(t)]}function J3(n,t,e){return[n,co(t),e]}const R7={},O7=["prefixPath","collectionGroup","readTime","documentId"],M7=["prefixPath","collectionGroup","documentId"],P7=["collectionGroup","readTime","prefixPath","documentId"],F7=["canonicalId","targetId"],L7=["targetId","path"],U7=["path","targetId"],B7=["collectionId","parent"],V7=["indexId","uid"],j7=["uid","sequenceNumber"],H7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$7=["indexId","uid","orderedDocumentKey"],G7=["userId","collectionPath","documentId"],Z7=["userId","collectionPath","largestBatchId"],q7=["userId","collectionGroup","largestBatchId"],Q3=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],z7=[...Q3,"documentOverlays"],X3=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ej=X3,W7=[...ej,"indexConfiguration","indexState","indexEntries"];class KO extends $V{constructor(t,e){super(),this.ee=t,this.currentSequenceNumber=e}}function ns(n,t){const e=at(n);return bc.N(e.ee,t)}class YO{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&u7(o,t,r[i])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=dC(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=dC(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=R3();return this.mutations.forEach(i=>{const o=t.get(i.key),c=o.overlayedDocument;let d=this.applyToLocalView(c,o.mutatedFields);d=e.has(i.key)?null:d;const f=T3(c,d);null!==f&&r.set(i.key,f),c.isValidDocument()||c.convertToNoDocument(Ht.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Qt())}isEqual(t){return this.batchId===t.batchId&&uv(this.mutations,t.mutations,(e,r)=>E3(e,r))&&uv(this.baseMutations,t.baseMutations,(e,r)=>E3(e,r))}}class JO{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Gt(t.mutations.length===r.length);let i=p7;const o=t.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new JO(t,e,r,i)}}class QO{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cp{constructor(t,e,r,i,o=Ht.min(),c=Ht.min(),d=Vi.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(t){return new cp(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new cp(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new cp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class tj{constructor(t){this.ne=t}}function nj(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:JS(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document={name:_C(i=n.ne,(o=t).key),fields:o.data.value.mapValue.fields,updateTime:mC(i,o.version.toTimestamp())};else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Sm(t.version)};else{if(!t.isUnknownDocument())return pt();r.unknownDocument={path:e.path.toArray(),version:Sm(t.version)}}var i,o;return r}function JS(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Sm(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Im(n){const t=new Ir(n.seconds,n.nanoseconds);return Ht.fromTimestamp(t)}function Am(n,t){const e=(t.baseMutations||[]).map(o=>WO(n.ne,o));for(let o=0;o<t.mutations.length-1;++o)o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform&&(t.mutations[o].updateTransforms=t.mutations[o+1].transform.fieldTransforms,t.mutations.splice(o+1,1),++o);const r=t.mutations.map(o=>WO(n.ne,o)),i=Ir.fromMillis(t.localWriteTimeMs);return new YO(t.batchId,i,e,r)}function bC(n){const t=Im(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Im(n.lastLimboFreeSnapshotVersion):Ht.min();let r;var i;return void 0!==n.query.documents?(Gt(1===(i=n.query).documents.length),r=Bo(pv(V3(i.documents[0])))):r=Bo(q3(n.query)),new cp(r,n.targetId,0,n.lastListenSequenceNumber,t,e,Vi.fromBase64String(n.resumeToken))}function rj(n,t){const e=Sm(t.snapshotVersion),r=Sm(t.lastLimboFreeSnapshotVersion);let i;i=HS(t.target)?G3(n.ne,t.target):Z3(n.ne,t.target);const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Tm(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function XO(n){const t=q3({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?GS(t,t.limit,"L"):t}function eM(n,t){return new QO(t.largestBatchId,WO(n.ne,t.overlayMutation))}function ij(n,t){const e=t.path.lastSegment();return[n,co(t.path.popLast()),e]}function sj(n,t,e,r){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:Sm(r.readTime),documentKey:co(r.documentKey.path),largestBatchId:r.largestBatchId}}class Y7{getBundleMetadata(t,e){return oj(t).get(e).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Im(i.createTime),version:i.version};var i})}saveBundleMetadata(t,e){return oj(t).put({bundleId:(r=e).id,createTime:Sm(ts(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return aj(t).get(e).next(r=>{if(r)return{name:(i=r).name,query:XO(i.bundledQuery),readTime:Im(i.readTime)};var i})}saveNamedQuery(t,e){return aj(t).put({name:(r=e).name,readTime:Sm(ts(r.readTime)),bundledQuery:r.bundledQuery});var r}}function oj(n){return ns(n,"bundles")}function aj(n){return ns(n,"namedQueries")}class QS{constructor(t,e){this.wt=t,this.userId=e}static se(t,e){return new QS(t,e.uid||"")}getOverlay(t,e){return wC(t).get(ij(this.userId,e)).next(r=>r?eM(this.wt,r):null)}getOverlays(t,e){const r=Ou();return de.forEach(e,i=>this.getOverlay(t,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(t,e,r){const i=[];return r.forEach((o,c)=>{const d=new QO(e,c);i.push(this.ie(t,d))}),de.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(c=>i.add(co(c.getCollectionPath())));const o=[];return i.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(wC(t).W("collectionPathOverlayIndex",d))}),de.waitFor(o)}getOverlaysForCollection(t,e,r){const i=Ou(),o=co(e),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return wC(t).K("collectionPathOverlayIndex",c).next(d=>{for(const f of d){const y=eM(this.wt,f);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const o=Ou();let c;const d=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return wC(t).J({index:"collectionGroupOverlayIndex",range:d},(f,y,w)=>{const E=eM(this.wt,y);o.size()<i||E.largestBatchId===c?(o.set(E.getKey(),E),c=E.largestBatchId):w.done()}).next(()=>o)}ie(t,e){return wC(t).put(function(r,i,o){const[c,d,f]=ij(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:f,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:vC(r.ne,o.mutation)}}(this.wt,this.userId,e))}}function wC(n){return ns(n,"documentOverlays")}class Nm{constructor(){}re(t,e){this.oe(t,e),e.ue()}oe(t,e){if("nullValue"in t)this.ce(e,5);else if("booleanValue"in t)this.ce(e,10),e.ae(t.booleanValue?1:0);else if("integerValue"in t)this.ce(e,15),e.ae(Jr(t.integerValue));else if("doubleValue"in t){const r=Jr(t.doubleValue);isNaN(r)?this.ce(e,13):(this.ce(e,15),iC(r)?e.ae(0):e.ae(r))}else if("timestampValue"in t){const r=t.timestampValue;this.ce(e,20),"string"==typeof r?e.he(r):(e.he(`${r.seconds||""}`),e.ae(r.nanos||0))}else if("stringValue"in t)this.le(t.stringValue,e),this.fe(e);else if("bytesValue"in t)this.ce(e,30),e.de(bm(t.bytesValue)),this.fe(e);else if("referenceValue"in t)this._e(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.ce(e,45),e.ae(r.latitude||0),e.ae(r.longitude||0)}else"mapValue"in t?XV(t)?this.ce(e,Number.MAX_SAFE_INTEGER):(this.we(t.mapValue,e),this.fe(e)):"arrayValue"in t?(this.me(t.arrayValue,e),this.fe(e)):pt()}le(t,e){this.ce(e,25),this.ge(t,e)}ge(t,e){e.he(t)}we(t,e){const r=t.fields||{};this.ce(e,55);for(const i of Object.keys(r))this.le(i,e),this.oe(r[i],e)}me(t,e){const r=t.values||[];this.ce(e,50);for(const i of r)this.oe(i,e)}_e(t,e){this.ce(e,37),it.fromName(t).path.forEach(r=>{this.ce(e,60),this.ge(r,e)})}ce(t,e){t.ae(e)}fe(t){t.ae(2)}}function J7(n){if(0===n)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function lj(n){const t=64-function(e){let r=0;for(let i=0;i<8;++i){const o=J7(255&e[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(t/8)}Nm.ye=new Nm;class Q7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Ie(r.value),r=e.next();this.Te()}Ee(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Ae(r.value),r=e.next();this.Re()}be(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=e.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=e.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(t){const e=this.Ve(t),r=lj(e);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}De(t){const e=this.Ve(t),r=lj(e);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(t){this.Se(t.length),this.buffer.set(t,this.position),this.position+=t.length}Me(){return this.buffer.slice(0,this.position)}Ve(t){const e=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(t),r=0!=(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}Ie(t){const e=255&t;0===e?(this.xe(0),this.xe(255)):255===e?(this.xe(255),this.xe(0)):this.xe(e)}Ae(t){const e=255&t;0===e?(this.ke(0),this.ke(255)):255===e?(this.ke(255),this.ke(0)):this.ke(t)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(t){this.Se(1),this.buffer[this.position++]=t}ke(t){this.Se(1),this.buffer[this.position++]=~t}Se(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class X7{constructor(t){this.Oe=t}de(t){this.Oe.pe(t)}he(t){this.Oe.be(t)}ae(t){this.Oe.ve(t)}ue(){this.Oe.Ce()}}class eY{constructor(t){this.Oe=t}de(t){this.Oe.Ee(t)}he(t){this.Oe.Pe(t)}ae(t){this.Oe.De(t)}ue(){this.Oe.Ne()}}class CC{constructor(){this.Oe=new Q7,this.Fe=new X7(this.Oe),this.$e=new eY(this.Oe)}seed(t){this.Oe.seed(t)}Be(t){return 0===t?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class xm{constructor(t,e,r,i){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=i}Le(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new xm(this.indexId,this.documentKey,this.arrayValue,r)}}function km(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=cj(n.arrayValue,t.arrayValue),0!==e?e:(e=cj(n.directionalValue,t.directionalValue),0!==e?e:it.comparator(n.documentKey,t.documentKey)))}function cj(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(0!==r)return r}return n.length-t.length}class tY{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];for(const e of t.filters){const r=e;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(t){const e=OO(t);if(void 0!==e&&!this.Qe(e))return!1;const r=_m(t);let i=0,o=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const c=r[i];if(!this.je(this.Ke,c)||!this.We(this.Ue[o++],c))return!1;++i}for(;i<r.length;++i)if(o>=this.Ue.length||!this.We(this.Ue[o++],r[i]))return!1;return!0}Qe(t){for(const e of this.qe)if(this.je(e,t))return!0;return!1}je(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}We(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class nY{constructor(){this.ze=new tM}addToCollectionParentIndex(t,e){return this.ze.add(e),de.resolve()}getCollectionParents(t,e){return de.resolve(this.ze.getEntries(e))}addFieldIndex(t,e){return de.resolve()}deleteFieldIndex(t,e){return de.resolve()}getDocumentsMatchingTarget(t,e){return de.resolve(null)}getIndexType(t,e){return de.resolve(0)}getFieldIndexes(t,e){return de.resolve([])}getNextCollectionGroupToUpdate(t){return de.resolve(null)}getMinOffset(t,e){return de.resolve(Da.min())}getMinOffsetFromCollectionGroup(t,e){return de.resolve(Da.min())}updateCollectionGroup(t,e,r){return de.resolve()}updateIndexEntries(t,e){return de.resolve()}}class tM{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new $n(mn.comparator),o=!i.has(r);return this.index[e]=i.add(r),o}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new $n(mn.comparator)).toArray()}}const XS=new Uint8Array(0);class rY{constructor(t,e){this.user=t,this.databaseId=e,this.He=new tM,this.Je=new lp(r=>Tm(r),(r,i)=>lC(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.He.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.He.add(e)});const o={collectionId:r,parent:co(i)};return uj(t).put(o)}return de.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[BV(e),""],!1,!0);return uj(t).K(i).next(o=>{for(const c of o){if(c.collectionId!==e)break;r.push(Pu(c.parent))}return r})}addFieldIndex(t,e){const r=eI(t),i={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;delete i.indexId;const o=r.add(i);if(e.indexState){const c=EC(t);return o.next(d=>{c.put(sj(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return o.next()}deleteFieldIndex(t,e){const r=eI(t),i=EC(t),o=TC(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const r=TC(t);let i=!0;const o=new Map;return de.forEach(this.Ye(e),c=>this.Xe(t,c).next(d=>{i&&(i=!!d),o.set(c,d)})).next(()=>{if(i){let c=Qt();const d=[];return de.forEach(o,(f,y)=>{var w;Ze("IndexedDbIndexManager",`Using index ${w=f,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(Ie=>`${Ie.fieldPath}:${Ie.kind}`).join(",")}`} to execute ${Tm(e)}`);const E=function(Ie,me){const Pe=OO(me);if(void 0===Pe)return null;for(const je of $S(Ie,Pe.fieldPath))switch(je.op){case"array-contains-any":return je.value.arrayValue.values||[];case"array-contains":return[je.value]}return null}(y,f),A=function(Ie,me){const Pe=new Map;for(const je of _m(me))for(const ct of $S(Ie,je.fieldPath))switch(ct.op){case"==":case"in":Pe.set(je.fieldPath.canonicalString(),ct.value);break;case"not-in":case"!=":return Pe.set(je.fieldPath.canonicalString(),ct.value),Array.from(Pe.values())}return null}(y,f),k=function(Ie,me){const Pe=[];let je=!0;for(const ct of _m(me)){const Lt=0===ct.kind?s3(Ie,ct.fieldPath,Ie.startAt):o3(Ie,ct.fieldPath,Ie.startAt);Pe.push(Lt.value),je&&(je=Lt.inclusive)}return new ap(Pe,je)}(y,f),M=function(Ie,me){const Pe=[];let je=!0;for(const ct of _m(me)){const Lt=0===ct.kind?o3(Ie,ct.fieldPath,Ie.endAt):s3(Ie,ct.fieldPath,Ie.endAt);Pe.push(Lt.value),je&&(je=Lt.inclusive)}return new ap(Pe,je)}(y,f),V=this.Ze(f,y,k),W=this.Ze(f,y,M),ne=this.tn(f,y,A),he=this.en(f.indexId,E,V,k.inclusive,W,M.inclusive,ne);return de.forEach(he,Ie=>r.j(Ie,e.limit).next(me=>{me.forEach(Pe=>{const je=it.fromSegments(Pe.documentKey);c.has(je)||(c=c.add(je),d.push(je))})}))}).next(()=>d)}return de.resolve(null)})}Ye(t){let e=this.Je.get(t);return e||(e=[t],this.Je.set(t,e),e)}en(t,e,r,i,o,c,d){const f=(null!=e?e.length:1)*Math.max(r.length,o.length),y=f/(null!=e?e.length:1),w=[];for(let E=0;E<f;++E){const A=e?this.nn(e[E/y]):XS,k=this.sn(t,A,r[E%y],i),M=this.rn(t,A,o[E%y],c),V=d.map(W=>this.sn(t,A,W,!0));w.push(...this.createRange(k,M,V))}return w}sn(t,e,r,i){const o=new xm(t,it.empty(),e,r);return i?o:o.Le()}rn(t,e,r,i){const o=new xm(t,it.empty(),e,r);return i?o.Le():o}Xe(t,e){const r=new tY(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(o=>{let c=null;for(const d of o)r.Ge(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let r=2;return de.forEach(this.Ye(e),i=>this.Xe(t,i).next(o=>{o?0!==r&&o.fields.length<function(c){let d=new $n(Kr.comparator),f=!1;for(const y of c.filters){const w=y;w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?f=!0:d=d.add(w.field))}for(const y of c.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(f?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(t,e){const r=new CC;for(const i of _m(t)){const o=e.data.field(i.fieldPath);if(null==o)return null;const c=r.Be(i.kind);Nm.ye.re(o,c)}return r.Me()}nn(t){const e=new CC;return Nm.ye.re(t,e.Be(0)),e.Me()}un(t,e){const r=new CC;return Nm.ye.re(Cm(this.databaseId,e),r.Be(function(i){const o=_m(i);return 0===o.length?0:o[o.length-1].kind}(t))),r.Me()}tn(t,e,r){if(null===r)return[];let i=[];i.push(new CC);let o=0;for(const c of _m(t)){const d=r[o++];for(const f of i)if(this.cn(e,c.fieldPath)&&oC(d))i=this.an(i,c,d);else{const y=f.Be(c.kind);Nm.ye.re(d,y)}}return this.hn(i)}Ze(t,e,r){return this.tn(t,e,r.position)}hn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].Me();return e}an(t,e,r){const i=[...t],o=[];for(const c of r.arrayValue.values||[])for(const d of i){const f=new CC;f.seed(d.Me()),Nm.ye.re(c,f.Be(e.kind)),o.push(f)}return o}cn(t,e){return!!t.filters.find(r=>r instanceof vs&&r.field.isEqual(e)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(t,e){const r=eI(t),i=EC(t);return(e?r.K("collectionGroupIndex",IDBKeyRange.bound(e,e)):r.K()).next(o=>{const c=[];return de.forEach(o,d=>i.get([d.indexId,this.uid]).next(f=>{c.push(function(y,w){const E=w?new eC(w.sequenceNumber,new Da(Im(w.readTime),new it(Pu(w.documentKey)),w.largestBatchId)):eC.empty(),A=y.fields.map(([k,M])=>new LS(Kr.fromServerFormat(k),M));return new FS(y.indexId,y.collectionGroup,A,E)}(d,f))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Wt(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=eI(t),o=EC(t);return this.ln(t).next(c=>i.K("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>de.forEach(d,f=>o.put(sj(f.indexId,this.user,c,r)))))}updateIndexEntries(t,e){const r=new Map;return de.forEach(e,(i,o)=>{const c=r.get(i.collectionGroup);return(c?de.resolve(c):this.getFieldIndexes(t,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),de.forEach(d,f=>this.fn(t,i,f).next(y=>{const w=this.dn(o,f);return y.isEqual(w)?de.resolve():this._n(t,o,f,y,w)}))))})}wn(t,e,r,i){return TC(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,e.key),documentKey:e.key.path.toArray()})}mn(t,e,r,i){return TC(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,e.key),e.key.path.toArray()])}fn(t,e,r){const i=TC(t);let o=new $n(km);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,e)])},(c,d)=>{o=o.add(new xm(r.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>o)}dn(t,e){let r=new $n(km);const i=this.on(e,t);if(null==i)return r;const o=OO(e);if(null!=o){const c=t.data.field(o.fieldPath);if(oC(c))for(const d of c.arrayValue.values||[])r=r.add(new xm(e.indexId,t.key,this.nn(d),i))}else r=r.add(new xm(e.indexId,t.key,XS,i));return r}_n(t,e,r,i,o){Ze("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(d,f,y,w,E){const A=d.getIterator(),k=f.getIterator();let M=dv(A),V=dv(k);for(;M||V;){let W=!1,ne=!1;if(M&&V){const he=y(M,V);he<0?ne=!0:he>0&&(W=!0)}else null!=M?ne=!0:W=!0;W?(w(V),V=dv(k)):ne?(E(M),M=dv(A)):(M=dv(A),V=dv(k))}}(i,o,km,d=>{c.push(this.wn(t,e,r,d))},d=>{c.push(this.mn(t,e,r,d))}),de.waitFor(c)}ln(t){let e=1;return EC(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((c,d)=>km(c,d)).filter((c,d,f)=>!d||0!==km(c,f[d-1]));const i=[];i.push(t);for(const c of r){const d=km(c,t),f=km(c,e);if(0===d)i[0]=t.Le();else if(d>0&&f<0)i.push(c),i.push(c.Le());else if(f>0)break}i.push(e);const o=[];for(let c=0;c<i.length;c+=2)o.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,XS,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,XS,[]]));return o}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(dj)}getMinOffset(t,e){return de.mapArray(this.Ye(e),r=>this.Xe(t,r).next(i=>i||pt())).next(dj)}}function uj(n){return ns(n,"collectionParents")}function TC(n){return ns(n,"indexEntries")}function eI(n){return ns(n,"indexConfiguration")}function EC(n){return ns(n,"indexState")}function dj(n){Gt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;MO(i,t)<0&&(t=i),e<i.largestBatchId&&(e=i.largestBatchId)}return new Da(t.readTime,t.documentKey,e)}const hj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class jo{constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new jo(t,jo.DEFAULT_COLLECTION_PERCENTILE,jo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fj(n,t,e){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],c=IDBKeyRange.only(e.batchId);let d=0;const f=r.J({range:c},(w,E,A)=>(d++,A.delete()));o.push(f.next(()=>{Gt(1===d)}));const y=[];for(const w of e.mutations){const E=J3(t,w.key.path,e.batchId);o.push(i.delete(E)),y.push(w.key)}return de.waitFor(o).next(()=>y)}function tI(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw pt();t=n.noDocument}return JSON.stringify(t).length}jo.DEFAULT_COLLECTION_PERCENTILE=10,jo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jo.DEFAULT=new jo(41943040,jo.DEFAULT_COLLECTION_PERCENTILE,jo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jo.DISABLED=new jo(-1,0,0);class nI{constructor(t,e,r,i){this.userId=t,this.wt=e,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(t,e,r,i){Gt(""!==t.uid);const o=t.isAuthenticated()?t.uid:"";return new nI(o,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return up(t).J({index:"userMutationsIndex",range:r},(i,o,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const o=Cv(t),c=up(t);return c.add({}).next(d=>{Gt("number"==typeof d);const f=new YO(d,e,r,i),y=function(A,k,M){const V=M.baseMutations.map(ne=>vC(A.ne,ne)),W=M.mutations.map(ne=>vC(A.ne,ne));return{userId:k,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:V,mutations:W}}(this.wt,this.userId,f),w=[];let E=new $n((A,k)=>Wt(A.canonicalString(),k.canonicalString()));for(const A of i){const k=J3(this.userId,A.key.path,d);E=E.add(A.key.path.popLast()),w.push(c.put(y)),w.push(o.put(k,R7))}return E.forEach(A=>{w.push(this.indexManager.addToCollectionParentIndex(t,A))}),t.addOnCommittedListener(()=>{this.gn[d]=f.keys()}),de.waitFor(w).next(()=>f)})}lookupMutationBatch(t,e){return up(t).get(e).next(r=>r?(Gt(r.userId===this.userId),Am(this.wt,r)):null)}yn(t,e){return this.gn[e]?de.resolve(this.gn[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.gn[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return up(t).J({index:"userMutationsIndex",range:i},(c,d,f)=>{d.userId===this.userId&&(Gt(d.batchId>=r),o=Am(this.wt,d)),f.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return up(t).J({index:"userMutationsIndex",range:e,reverse:!0},(i,o,c)=>{r=o.batchId,c.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return up(t).K("userMutationsIndex",e).next(r=>r.map(i=>Am(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=YS(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Cv(t).J({range:i},(c,d,f)=>{const[y,w,E]=c,A=Pu(w);if(y===this.userId&&e.path.isEqual(A))return up(t).get(E).next(k=>{if(!k)throw pt();Gt(k.userId===this.userId),o.push(Am(this.wt,k))});f.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new $n(Wt);const i=[];return e.forEach(o=>{const c=YS(this.userId,o.path),d=IDBKeyRange.lowerBound(c),f=Cv(t).J({range:d},(y,w,E)=>{const[A,k,M]=y,V=Pu(k);A===this.userId&&o.path.isEqual(V)?r=r.add(M):E.done()});i.push(f)}),de.waitFor(i).next(()=>this.pn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,o=YS(this.userId,r),c=IDBKeyRange.lowerBound(o);let d=new $n(Wt);return Cv(t).J({range:c},(f,y,w)=>{const[E,A,k]=f,M=Pu(A);E===this.userId&&r.isPrefixOf(M)?M.length===i&&(d=d.add(k)):w.done()}).next(()=>this.pn(t,d))}pn(t,e){const r=[],i=[];return e.forEach(o=>{i.push(up(t).get(o).next(c=>{if(null===c)throw pt();Gt(c.userId===this.userId),r.push(Am(this.wt,c))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return fj(t.ee,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this.In(e.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}In(t){delete this.gn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Cv(t).J({range:r},(o,c,d)=>{if(o[0]===this.userId){const f=Pu(o[1]);i.push(f)}else d.done()}).next(()=>{Gt(0===i.length)})})}containsKey(t,e){return pj(t,this.userId,e)}Tn(t){return gj(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pj(n,t,e){const r=YS(t,e.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return Cv(n).J({range:o,H:!0},(d,f,y)=>{const[w,E,A]=d;w===t&&E===i&&(c=!0),y.done()}).next(()=>c)}function up(n){return ns(n,"mutations")}function Cv(n){return ns(n,"documentMutations")}function gj(n){return ns(n,"mutationQueues")}class Rm{constructor(t){this.En=t}next(){return this.En+=2,this.En}static An(){return new Rm(0)}static Rn(){return new Rm(-1)}}class iY{constructor(t,e){this.referenceDelegate=t,this.wt=e}allocateTargetId(t){return this.bn(t).next(e=>{const r=new Rm(e.highestTargetId);return e.highestTargetId=r.next(),this.Pn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.bn(t).next(e=>Ht.fromTimestamp(new Ir(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.bn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.bn(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.Pn(t,i)))}addTargetData(t,e){return this.vn(t,e).next(()=>this.bn(t).next(r=>(r.targetCount+=1,this.Vn(e,r),this.Pn(t,r))))}updateTargetData(t,e){return this.vn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Tv(t).delete(e.targetId)).next(()=>this.bn(t)).next(r=>(Gt(r.targetCount>0),r.targetCount-=1,this.Pn(t,r)))}removeTargets(t,e,r){let i=0;const o=[];return Tv(t).J((c,d)=>{const f=bC(d);f.sequenceNumber<=e&&null===r.get(f.targetId)&&(i++,o.push(this.removeTargetData(t,f)))}).next(()=>de.waitFor(o)).next(()=>i)}forEachTarget(t,e){return Tv(t).J((r,i)=>{const o=bC(i);e(o)})}bn(t){return mj(t).get("targetGlobalKey").next(e=>(Gt(null!==e),e))}Pn(t,e){return mj(t).put("targetGlobalKey",e)}vn(t,e){return Tv(t).put(rj(this.wt,e))}Vn(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.bn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=Tm(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Tv(t).J({range:i,index:"queryTargetsIndex"},(c,d,f)=>{const y=bC(d);lC(e,y.target)&&(o=y,f.done())}).next(()=>o)}addMatchingKeys(t,e,r){const i=[],o=dp(t);return e.forEach(c=>{const d=co(c.path);i.push(o.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(t,r,c))}),de.waitFor(i)}removeMatchingKeys(t,e,r){const i=dp(t);return de.forEach(e,o=>{const c=co(o.path);return de.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(t,r,o)])})}removeMatchingKeysForTargetId(t,e){const r=dp(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=dp(t);let o=Qt();return i.J({range:r,H:!0},(c,d,f)=>{const y=Pu(c[1]),w=new it(y);o=o.add(w)}).next(()=>o)}containsKey(t,e){const r=co(e.path),i=IDBKeyRange.bound([r],[BV(r)],!1,!0);let o=0;return dp(t).J({index:"documentTargetsIndex",H:!0,range:i},([c,d],f,y)=>{0!==c&&(o++,y.done())}).next(()=>o>0)}te(t,e){return Tv(t).get(e).next(r=>r?bC(r):null)}}function Tv(n){return ns(n,"targets")}function mj(n){return ns(n,"targetGlobal")}function dp(n){return ns(n,"targetDocuments")}function _j([n,t],[e,r]){const i=Wt(n,e);return 0===i?Wt(t,r):i}class sY{constructor(t){this.Sn=t,this.buffer=new $n(_j),this.Dn=0}Cn(){return++this.Dn}xn(t){const e=[t,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();_j(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class oY{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(t){var e=this;Ze("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,Te.Z)(function*(){e.Nn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(r){rp(r)?Ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield np(r)}yield e.kn(3e5)}))}}class aY{constructor(t,e){this.Mn=t,this.params=e}calculateTargetCount(t,e){return this.Mn.On(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(0===e)return de.resolve(Uo.ot);const r=new sY(e);return this.Mn.forEachTarget(t,i=>r.xn(i.sequenceNumber)).next(()=>this.Mn.Fn(t,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Mn.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Mn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(hj)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hj):this.$n(t,e))}getCacheSize(t){return this.Mn.getCacheSize(t)}$n(t,e){let r,i,o,c,d,f,y;const w=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,c=Date.now(),this.nthSequenceNumber(t,i))).next(E=>(r=E,d=Date.now(),this.removeTargets(t,r,e))).next(E=>(o=E,f=Date.now(),this.removeOrphanedDocuments(t,r))).next(E=>(y=Date.now(),kO()<=vc.in.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-w}ms\n\tDetermined least recently used ${i} in `+(d-c)+`ms\n\tRemoved ${o} targets in `+(f-d)+`ms\n\tRemoved ${E} documents in `+(y-f)+`ms\nTotal Duration: ${y-w}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:E})))}}class lY{constructor(t,e){this.db=t,this.garbageCollector=new aY(this,e)}On(t){const e=this.Bn(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}Bn(t){let e=0;return this.Fn(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Fn(t,e){return this.Ln(t,(r,i)=>e(i))}addReference(t,e,r){return rI(t,r)}removeReference(t,e,r){return rI(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return rI(t,e)}Un(t,e){return function(r,i){let o=!1;return gj(r).Y(c=>pj(r,c,i).next(d=>(d&&(o=!0),de.resolve(!d)))).next(()=>o)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Ln(t,(c,d)=>{if(d<=e){const f=this.Un(t,c).next(y=>{if(!y)return o++,r.getEntry(t,c).next(()=>(r.removeEntry(c,Ht.min()),dp(t).delete([0,co(c.path)])))});i.push(f)}}).next(()=>de.waitFor(i)).next(()=>r.apply(t)).next(()=>o)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return rI(t,e)}Ln(t,e){const r=dp(t);let i,o=Uo.ot;return r.J({index:"documentTargetsIndex"},([c,d],{path:f,sequenceNumber:y})=>{0===c?(o!==Uo.ot&&e(new it(Pu(i)),o),o=y,i=f):o=Uo.ot}).next(()=>{o!==Uo.ot&&e(new it(Pu(i)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function rI(n,t){return dp(n).put((r=n.currentSequenceNumber,{targetId:0,path:co(t.path),sequenceNumber:r}));var r}class yj{constructor(){this.changes=new lp(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,er.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return void 0!==r?de.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class cY{constructor(t){this.wt=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Om(t).put(r)}removeEntry(t,e,r){return Om(t).delete(function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],JS(o),c[c.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.qn(t,r)))}getEntry(t,e){let r=er.newInvalidDocument(e);return Om(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(DC(e))},(i,o)=>{r=this.Kn(e,o)}).next(()=>r)}Gn(t,e){let r={size:0,document:er.newInvalidDocument(e)};return Om(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(DC(e))},(i,o)=>{r={document:this.Kn(e,o),size:tI(o)}}).next(()=>r)}getEntries(t,e){let r=Vo();return this.Qn(t,e,(i,o)=>{const c=this.Kn(i,o);r=r.insert(i,c)}).next(()=>r)}jn(t,e){let r=Vo(),i=new Yr(it.comparator);return this.Qn(t,e,(o,c)=>{const d=this.Kn(o,c);r=r.insert(o,d),i=i.insert(o,tI(c))}).next(()=>({documents:r,Wn:i}))}Qn(t,e,r){if(e.isEmpty())return de.resolve();let i=new $n(Cj);e.forEach(f=>i=i.add(f));const o=IDBKeyRange.bound(DC(i.first()),DC(i.last())),c=i.getIterator();let d=c.getNext();return Om(t).J({index:"documentKeyIndex",range:o},(f,y,w)=>{const E=it.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&Cj(d,E)<0;)r(d,null),d=c.getNext();d&&d.isEqual(E)&&(r(d,y),d=c.hasNext()?c.getNext():null),d?w.q(DC(d)):w.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getAllFromCollection(t,e,r){const i=[e.popLast().toArray(),e.lastSegment(),JS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Om(t).K(IDBKeyRange.bound(i,o,!0)).next(c=>{let d=Vo();for(const f of c){const y=this.Kn(it.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(t,e,r,i){let o=Vo();const c=wj(e,r),d=wj(e,Da.max());return Om(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(f,y,w)=>{const E=this.Kn(it.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(E.key,E),o.size===i&&w.done()}).next(()=>o)}newChangeBuffer(t){return new uY(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return bj(t).get("remoteDocumentGlobalKey").next(e=>(Gt(!!e),e))}qn(t,e){return bj(t).put("remoteDocumentGlobalKey",e)}Kn(t,e){if(e){const r=function K7(n,t){let e;if(t.document)e=$3(n.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=it.fromSegments(t.noDocument.path),i=Im(t.noDocument.readTime);e=er.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return pt();{const r=it.fromSegments(t.unknownDocument.path),i=Im(t.unknownDocument.version);e=er.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(r){const i=new Ir(r[0],r[1]);return Ht.fromTimestamp(i)}(t.readTime)),e}(this.wt,e);if(!r.isNoDocument()||!r.version.isEqual(Ht.min()))return r}return er.newInvalidDocument(t)}}function vj(n){return new cY(n)}class uY extends yj{constructor(t,e){super(),this.zn=t,this.trackRemovals=e,this.Hn=new lp(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new $n((o,c)=>Wt(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const d=this.Hn.get(o);if(e.push(this.zn.removeEntry(t,o,d.readTime)),c.isValidDocument()){const f=nj(this.zn.wt,c);i=i.add(o.path.popLast());const y=tI(f);r+=y-d.size,e.push(this.zn.addEntry(t,o,f))}else if(r-=d.size,this.trackRemovals){const f=nj(this.zn.wt,c.convertToNoDocument(Ht.min()));e.push(this.zn.addEntry(t,o,f))}}),i.forEach(o=>{e.push(this.zn.indexManager.addToCollectionParentIndex(t,o))}),e.push(this.zn.updateMetadata(t,r)),de.waitFor(e)}getFromCache(t,e){return this.zn.Gn(t,e).next(r=>(this.Hn.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.zn.jn(t,e).next(({documents:r,Wn:i})=>(i.forEach((o,c)=>{this.Hn.set(o,{size:c,readTime:r.get(o).readTime})}),r))}}function bj(n){return ns(n,"remoteDocumentGlobal")}function Om(n){return ns(n,"remoteDocumentsV14")}function DC(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function wj(n,t){const e=t.documentKey.path.toArray();return[n,JS(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function Cj(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<e.length-2&&o<r.length-2;++o)if(i=Wt(e[o],r[o]),i)return i;return i=Wt(e.length,r.length),i||(i=Wt(e[e.length-2],r[r.length-2]),i||Wt(e[e.length-1],r[r.length-1]))}class dY{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Tj{constructor(t,e,r,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(r=i,this.getBaseDocument(t,e,r))).next(i=>(null!==r&&dC(r.mutation,i,Sa.empty(),Ir.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,Qt()).next(()=>r))}getLocalViewOfDocuments(t,e,r=Qt()){const i=Ou();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,r).next(o=>{let c=hC();return o.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const r=Ou();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,Qt()))}populateOverlays(t,e,r){const i=[];return r.forEach(o=>{e.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,r,i){let o=Vo();const c=fC(),d=fC();return e.forEach((f,y)=>{const w=r.get(y.key);i.has(y.key)&&(void 0===w||w.mutation instanceof ph)?o=o.insert(y.key,y):void 0!==w&&(c.set(y.key,w.mutation.getFieldMask()),dC(w.mutation,y,w.mutation.getFieldMask(),Ir.now()))}),this.recalculateAndSaveOverlays(t,o).next(f=>(f.forEach((y,w)=>c.set(y,w)),e.forEach((y,w)=>{var E;return d.set(y,new dY(w,null!==(E=c.get(y))&&void 0!==E?E:null))}),d))}recalculateAndSaveOverlays(t,e){const r=fC();let i=new Yr((c,d)=>c-d),o=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(f=>{const y=e.get(f);if(null===y)return;let w=r.get(f)||Sa.empty();w=d.applyToLocalView(y,w),r.set(f,w);const E=(i.get(d.batchId)||Qt()).add(f);i=i.insert(d.batchId,E)})}).next(()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),y=f.key,w=f.value,E=R3();w.forEach(A=>{if(!o.has(A)){const k=T3(e.get(A),r.get(A));null!==k&&E.set(A,k),o=o.add(A)}}),c.push(this.documentOverlayCache.saveOverlays(t,y,E))}return de.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r){return it.isDocumentKey((i=e).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):HO(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r):this.getDocumentsMatchingCollectionQuery(t,e,r);var i}getNextDocuments(t,e,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,i-o.size):de.resolve(Ou());let d=-1,f=o;return c.next(y=>de.forEach(y,(w,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),o.get(w)?de.resolve():this.getBaseDocument(t,w,E).next(A=>{f=f.insert(w,A)}))).next(()=>this.populateOverlays(t,y,o)).next(()=>this.computeViews(t,f,y,Qt())).next(w=>({batchId:d,changes:k3(w)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new it(e)).next(r=>{let i=hC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,r){const i=e.collectionGroup;let o=hC();return this.indexManager.getCollectionParents(t,i).next(c=>de.forEach(c,d=>{const f=(y=e,w=d.child(i),new fh(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,w;return this.getDocumentsMatchingCollectionQuery(t,f,r).next(y=>{y.forEach((w,E)=>{o=o.insert(w,E)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,r){let i;return this.remoteDocumentCache.getAllFromCollection(t,e.path,r).next(o=>(i=o,this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId))).next(o=>{o.forEach((d,f)=>{const y=f.getKey();null===i.get(y)&&(i=i.insert(y,er.newInvalidDocument(y)))});let c=hC();return i.forEach((d,f)=>{const y=o.get(d);void 0!==y&&dC(y.mutation,f,Sa.empty(),Ir.now()),GO(e,f)&&(c=c.insert(d,f))}),c})}getBaseDocument(t,e,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(t,e):de.resolve(er.newInvalidDocument(e))}}class hY{constructor(t){this.wt=t,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(t,e){return de.resolve(this.Jn.get(e))}saveBundleMetadata(t,e){var r;return this.Jn.set(e.id,{id:(r=e).id,version:r.version,createTime:ts(r.createTime)}),de.resolve()}getNamedQuery(t,e){return de.resolve(this.Yn.get(e))}saveNamedQuery(t,e){return this.Yn.set(e.name,{name:(r=e).name,query:XO(r.bundledQuery),readTime:ts(r.readTime)}),de.resolve();var r}}class fY{constructor(){this.overlays=new Yr(it.comparator),this.Xn=new Map}getOverlay(t,e){return de.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Ou();return de.forEach(e,i=>this.getOverlay(t,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((i,o)=>{this.ie(t,e,o)}),de.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Xn.delete(r)),de.resolve()}getOverlaysForCollection(t,e,r){const i=Ou(),o=e.length+1,c=new it(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,y=f.getKey();if(!e.isPrefixOf(y.path))break;y.path.length===o&&f.largestBatchId>r&&i.set(f.getKey(),f)}return de.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let o=new Yr((y,w)=>y-w);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===e&&y.largestBatchId>r){let w=o.get(y.largestBatchId);null===w&&(w=Ou(),o=o.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const d=Ou(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((y,w)=>d.set(y,w)),!(d.size()>=i)););return de.resolve(d)}ie(t,e,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new QO(e,r));let o=this.Xn.get(e);void 0===o&&(o=Qt(),this.Xn.set(e,o)),this.Xn.set(e,o.add(r.key))}}class nM{constructor(){this.Zn=new $n(rs.ts),this.es=new $n(rs.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const r=new rs(t,e);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.rs(new rs(t,e))}os(t,e){t.forEach(r=>this.removeReference(r,e))}us(t){const e=new it(new mn([])),r=new rs(e,t),i=new rs(e,t+1),o=[];return this.es.forEachInRange([r,i],c=>{this.rs(c),o.push(c.key)}),o}cs(){this.Zn.forEach(t=>this.rs(t))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new it(new mn([])),r=new rs(e,t),i=new rs(e,t+1);let o=Qt();return this.es.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(t){const e=new rs(t,0),r=this.Zn.firstAfterOrEqual(e);return null!==r&&t.isEqual(r.key)}}class rs{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return it.comparator(t.key,e.key)||Wt(t.ls,e.ls)}static ns(t,e){return Wt(t.ls,e.ls)||it.comparator(t.key,e.key)}}class pY{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.fs=1,this.ds=new $n(rs.ts)}checkEmpty(t){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,r,i){const o=this.fs;this.fs++;const c=new YO(o,e,r,i);this.mutationQueue.push(c);for(const d of i)this.ds=this.ds.add(new rs(d.key,o)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return de.resolve(c)}lookupMutationBatch(t,e){return de.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const i=this.ws(e+1),o=i<0?0:i;return de.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(t){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new rs(e,0),i=new rs(e,Number.POSITIVE_INFINITY),o=[];return this.ds.forEachInRange([r,i],c=>{const d=this._s(c.ls);o.push(d)}),de.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new $n(Wt);return e.forEach(i=>{const o=new rs(i,0),c=new rs(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([o,c],d=>{r=r.add(d.ls)})}),de.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let o=r;it.isDocumentKey(o)||(o=o.child(""));const c=new rs(new it(o),0);let d=new $n(Wt);return this.ds.forEachWhile(f=>{const y=f.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(f.ls)),!0)},c),de.resolve(this.gs(d))}gs(t){const e=[];return t.forEach(r=>{const i=this._s(r);null!==i&&e.push(i)}),e}removeMutationBatch(t,e){Gt(0===this.ys(e.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return de.forEach(e.mutations,i=>{const o=new rs(i.key,e.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.ds=r})}In(t){}containsKey(t,e){const r=new rs(e,0),i=this.ds.firstAfterOrEqual(r);return de.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return de.resolve()}ys(t,e){return this.ws(t)}ws(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}_s(t){const e=this.ws(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class gY{constructor(t){this.ps=t,this.docs=new Yr(it.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),o=i?i.size:0,c=this.ps(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return de.resolve(r?r.document.mutableCopy():er.newInvalidDocument(e))}getEntries(t,e){let r=Vo();return e.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():er.newInvalidDocument(i))}),de.resolve(r)}getAllFromCollection(t,e,r){let i=Vo();const o=new it(e.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!e.isPrefixOf(d.path))break;d.path.length>e.length+1||MO(jV(f),r)<=0||(i=i.insert(f.key,f.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(t,e,r,i){pt()}Is(t,e){return de.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new mY(this)}getSize(t){return de.resolve(this.size)}}class mY extends yj{constructor(t){super(),this.zn=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.zn.addEntry(t,i)):this.zn.removeEntry(r)}),de.waitFor(e)}getFromCache(t,e){return this.zn.getEntry(t,e)}getAllFromCache(t,e){return this.zn.getEntries(t,e)}}class _Y{constructor(t){this.persistence=t,this.Ts=new lp(e=>Tm(e),lC),this.lastRemoteSnapshotVersion=Ht.min(),this.highestTargetId=0,this.Es=0,this.As=new nM,this.targetCount=0,this.Rs=Rm.An()}forEachTarget(t,e){return this.Ts.forEach((r,i)=>e(i)),de.resolve()}getLastRemoteSnapshotVersion(t){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return de.resolve(this.Es)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.Es&&(this.Es=e),de.resolve()}vn(t){this.Ts.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new Rm(e),this.highestTargetId=e),t.sequenceNumber>this.Es&&(this.Es=t.sequenceNumber)}addTargetData(t,e){return this.vn(e),this.targetCount+=1,de.resolve()}updateTargetData(t,e){return this.vn(e),de.resolve()}removeTargetData(t,e){return this.Ts.delete(e.target),this.As.us(e.targetId),this.targetCount-=1,de.resolve()}removeTargets(t,e,r){let i=0;const o=[];return this.Ts.forEach((c,d)=>{d.sequenceNumber<=e&&null===r.get(d.targetId)&&(this.Ts.delete(c),o.push(this.removeMatchingKeysForTargetId(t,d.targetId)),i++)}),de.waitFor(o).next(()=>i)}getTargetCount(t){return de.resolve(this.targetCount)}getTargetData(t,e){const r=this.Ts.get(e)||null;return de.resolve(r)}addMatchingKeys(t,e,r){return this.As.ss(e,r),de.resolve()}removeMatchingKeys(t,e,r){this.As.os(e,r);const i=this.persistence.referenceDelegate,o=[];return i&&e.forEach(c=>{o.push(i.markPotentiallyOrphaned(t,c))}),de.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.As.us(e),de.resolve()}getMatchingKeysForTargetId(t,e){const r=this.As.hs(e);return de.resolve(r)}containsKey(t,e){return de.resolve(this.As.containsKey(e))}}class Ej{constructor(t,e){this.bs={},this.overlays={},this.Ps=new Uo(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new _Y(this),this.indexManager=new nY,this.remoteDocumentCache=new gY(r=>this.referenceDelegate.Ss(r)),this.wt=new tj(e),this.Ds=new hY(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new fY,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.bs[t.toKey()];return r||(r=new pY(e,this.referenceDelegate),this.bs[t.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(t,e,r){Ze("MemoryPersistence","Starting transaction:",t);const i=new yY(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(o=>this.referenceDelegate.xs(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ns(t,e){return de.or(Object.values(this.bs).map(r=>()=>r.containsKey(t,e)))}}class yY extends $V{constructor(t){super(),this.currentSequenceNumber=t}}class iI{constructor(t){this.persistence=t,this.ks=new nM,this.Ms=null}static Os(t){return new iI(t)}get Fs(){if(this.Ms)return this.Ms;throw pt()}addReference(t,e,r){return this.ks.addReference(r,e),this.Fs.delete(r.toString()),de.resolve()}removeReference(t,e,r){return this.ks.removeReference(r,e),this.Fs.add(r.toString()),de.resolve()}markPotentiallyOrphaned(t,e){return this.Fs.add(e.toString()),de.resolve()}removeTarget(t,e){this.ks.us(e.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(o=>this.Fs.add(o.toString()))}).next(()=>r.removeTargetData(t,e))}Cs(){this.Ms=new Set}xs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Fs,r=>{const i=it.fromPath(r);return this.$s(t,i).next(o=>{o||e.removeEntry(i,Ht.min())})}).next(()=>(this.Ms=null,e.apply(t)))}updateLimboDocument(t,e){return this.$s(t,e).next(r=>{r?this.Fs.delete(e.toString()):this.Fs.add(e.toString())})}Ss(t){return 0}$s(t,e){return de.or([()=>de.resolve(this.ks.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ns(t,e)])}}class vY{constructor(t){this.wt=t}M(t,e,r,i){const o=new US("createOrUpgrade",e);var d;r<1&&i>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Y3,{unique:!0}),d.createObjectStore("documentMutations"),Dj(t),function(d){d.createObjectStore("remoteDocuments")}(t));let c=de.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),Dj(t)),c=c.next(()=>function(d){const f=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ht.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",y)}(o))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(d,f){return f.store("mutations").K().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Y3,{unique:!0});const w=f.store("mutations"),E=y.map(A=>w.put(A));return de.waitFor(E)})}(t,o))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),r<5&&i>=5&&(c=c.next(()=>this.Bs(o))),r<6&&i>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Ls(o)))),r<7&&i>=7&&(c=c.next(()=>this.Us(o))),r<8&&i>=8&&(c=c.next(()=>this.qs(t,o))),r<9&&i>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),r<10&&i>=10&&(c=c.next(()=>this.Ks(o))),r<11&&i>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),r<12&&i>=12&&(c=c.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:G7});f.createIndex("collectionPathOverlayIndex",Z7,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",q7,{unique:!1})}(t)})),r<13&&i>=13&&(c=c.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:O7});f.createIndex("documentKeyIndex",M7),f.createIndex("collectionGroupIndex",P7)}(t)).next(()=>this.Gs(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.Qs(t,o))),r<15&&i>=15&&(c=c.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:V7}).createIndex("sequenceNumberIndex",j7,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:H7}).createIndex("documentKeyIndex",$7,{unique:!1})}(t))),c}Ls(t){let e=0;return t.store("remoteDocuments").J((r,i)=>{e+=tI(i)}).next(()=>{const r={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(t){const e=t.store("mutationQueues"),r=t.store("mutations");return e.K().next(i=>de.forEach(i,o=>{const c=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",c).next(d=>de.forEach(d,f=>{Gt(f.userId===o.userId);const y=Am(this.wt,f);return fj(t,o.userId,y).next(()=>{})}))}))}Us(t){const e=t.store("targetDocuments"),r=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.J((c,d)=>{const f=new mn(c),y=[0,co(f)];o.push(e.get(y).next(w=>w?de.resolve():e.put({targetId:0,path:co(f),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(o))})}qs(t,e){t.createObjectStore("collectionParents",{keyPath:B7});const r=e.store("collectionParents"),i=new tM,o=c=>{if(i.add(c)){const d=c.lastSegment(),f=c.popLast();return r.put({collectionId:d,parent:co(f)})}};return e.store("remoteDocuments").J({H:!0},(c,d)=>{const f=new mn(c);return o(f.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([c,d,f],y)=>{const w=Pu(d);return o(w.popLast())}))}Ks(t){const e=t.store("targets");return e.J((r,i)=>{const o=bC(i),c=rj(this.wt,o);return e.put(c)})}Gs(t,e){const r=e.store("remoteDocuments"),i=[];return r.J((o,c)=>{const d=e.store("remoteDocumentsV14"),f=(y=c,y.document?new it(mn.fromString(y.document.name).popFirst(5)):y.noDocument?it.fromSegments(y.noDocument.path):y.unknownDocument?it.fromSegments(y.unknownDocument.path):pt()).path.toArray();var y;const w={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(d.put(w))}).next(()=>de.waitFor(i))}Qs(t,e){const r=e.store("mutations"),i=vj(this.wt),o=new Ej(iI.Os,this.wt.ne);return r.K().next(c=>{const d=new Map;return c.forEach(f=>{var y;let w=null!==(y=d.get(f.userId))&&void 0!==y?y:Qt();Am(this.wt,f).keys().forEach(E=>w=w.add(E)),d.set(f.userId,w)}),de.forEach(d,(f,y)=>{const w=new Xi(y),E=QS.se(this.wt,w),A=o.getIndexManager(w),k=nI.se(w,this.wt,A,o.referenceDelegate);return new Tj(i,k,E,A).recalculateAndSaveOverlaysForDocumentKeys(new KO(e,Uo.ot),f).next()})})}}function Dj(n){n.createObjectStore("targetDocuments",{keyPath:L7}).createIndex("documentTargetsIndex",U7,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",F7,{unique:!0}),n.createObjectStore("targetGlobal")}const rM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iM{constructor(t,e,r,i,o,c,d,f,y,w,E=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.js=o,this.window=c,this.document=d,this.Ws=y,this.zs=w,this.Hs=E,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=A=>Promise.resolve(),!iM.V())throw new Be(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lY(this,i),this.ei=e+"main",this.wt=new tj(f),this.ni=new bc(this.ei,this.Hs,new vY(this.wt)),this.Vs=new iY(this.referenceDelegate,this.wt),this.remoteDocumentCache=vj(this.wt),this.Ds=new Y7,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===w&&fi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Be(ge.FAILED_PRECONDITION,rM);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Vs.getHighestSequenceNumber(t))}).then(t=>{this.Ps=new Uo(t,this.Ws)}).then(()=>{this.vs=!0}).catch(t=>(this.ni&&this.ni.close(),Promise.reject(t)))}ci(t){var e=this;return this.ti=function(){var r=(0,Te.Z)(function*(i){if(e.started)return t(i)});return function(i){return r.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ni.F(function(){var e=(0,Te.Z)(function*(r){null===r.newVersion&&(yield t())});return function(r){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.js.enqueueAndForget((0,Te.Z)(function*(){e.started&&(yield e.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>sI(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(t).next(e=>{e||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(t)).next(e=>this.isPrimary&&!e?this.li(t).next(()=>!1):!!e&&this.fi(t).next(()=>!0))).catch(t=>{if(rp(t))return Ze("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.js.enqueueRetryable(()=>this.ti(t)),this.isPrimary=t})}ai(t){return SC(t).get("owner").next(e=>de.resolve(this.di(e)))}_i(t){return sI(t).delete(this.clientId)}wi(){var t=this;return(0,Te.Z)(function*(){if(t.isPrimary&&!t.mi(t.Zs,18e5)){t.Zs=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ns(r,"clientMetadata");return i.K().next(o=>{const c=t.gi(o,18e5),d=o.filter(f=>-1===c.indexOf(f));return de.forEach(d,f=>i.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(t.si)for(const r of e)t.si.removeItem(t.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(t){return!!t&&t.ownerId===this.clientId}hi(t){return this.zs?de.resolve(!0):SC(t).get("owner").next(e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)){if(this.di(e)&&this.networkEnabled)return!0;if(!this.di(e)){if(!e.allowTabSynchronization)throw new Be(ge.FAILED_PRECONDITION,rM);return!1}}return!(!this.networkEnabled||!this.inForeground)||sI(t).K().next(r=>void 0===this.gi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(e=>(this.isPrimary!==e&&Ze("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Te.Z)(function*(){t.vs=!1,t.Ii(),t.Xs&&(t.Xs.cancel(),t.Xs=null),t.Ti(),t.Ei(),yield t.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new KO(e,Uo.ot);return t.li(r).next(()=>t._i(r))}),t.ni.close(),t.Ai()})()}gi(t,e){return t.filter(r=>this.mi(r.updateTimeMs,e)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",t=>sI(t).K().next(e=>this.gi(e,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(t,e){return nI.se(t,this.wt,e,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new rY(t,this.wt.ne.databaseId)}getDocumentOverlayCache(t){return QS.se(this.wt,t)}getBundleCache(){return this.Ds}runTransaction(t,e,r){Ze("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",o=15===(c=this.Hs)?W7:14===c?ej:13===c?X3:12===c?z7:11===c?Q3:void pt();var c;let d;return this.ni.runTransaction(t,i,o,f=>(d=new KO(f,this.Ps?this.Ps.next():Uo.ot),"readwrite-primary"===e?this.ai(d).next(y=>!!y||this.hi(d)).next(y=>{if(!y)throw fi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Be(ge.FAILED_PRECONDITION,HV);return r(d)}).next(y=>this.fi(d).next(()=>y)):this.bi(d).next(()=>r(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}bi(t){return SC(t).get("owner").next(e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)&&!this.di(e)&&!(this.zs||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Be(ge.FAILED_PRECONDITION,rM)})}fi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return SC(t).put("owner",e)}static V(){return bc.V()}li(t){const e=SC(t);return e.get("owner").next(r=>this.di(r)?(Ze("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):de.resolve())}mi(t,e){const r=Date.now();return!(t<r-e||t>r&&(fi(`Detected an update time that is in the future: ${t} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Js=()=>{this.Ii(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(t){var e;try{const r=null!==(null===(e=this.si)||void 0===e?void 0:e.getItem(this.yi(t)));return Ze("IndexedDbPersistence",`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(t){fi("Failed to set zombie client id.",t)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function SC(n){return ns(n,"owner")}function sI(n){return ns(n,"clientMetadata")}function sM(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class oM{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Pi=r,this.vi=i}static Vi(t,e){let r=Qt(),i=Qt();for(const o of e.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new oM(t,e.fromCache,r,i)}}class Sj{constructor(){this.Si=!1}initialize(t,e){this.Di=t,this.indexManager=e,this.Si=!0}getDocumentsMatchingQuery(t,e,r,i){return this.Ci(t,e).next(o=>o||this.xi(t,e,i,r)).next(o=>o||this.Ni(t,e))}Ci(t,e){if(d3(e))return de.resolve(null);let r=Bo(e);return this.indexManager.getIndexType(t,r).next(i=>0===i?null:(null!==e.limit&&1===i&&(e=GS(e,null,"F"),r=Bo(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(o=>{const c=Qt(...o);return this.Di.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,r).next(f=>{const y=this.ki(e,d);return this.Mi(e,y,c,f.readTime)?this.Ci(t,GS(e,null,"F")):this.Oi(t,y,e,f)}))})))}xi(t,e,r,i){return d3(e)||i.isEqual(Ht.min())?this.Ni(t,e):this.Di.getDocuments(t,r).next(o=>{const c=this.ki(e,o);return this.Mi(e,c,r,i)?this.Ni(t,e):(kO()<=vc.in.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$O(e)),this.Oi(t,c,e,VV(i,-1)))})}ki(t,e){let r=new $n(p3(t));return e.forEach((i,o)=>{GO(t,o)&&(r=r.add(o))}),r}Mi(t,e,r,i){if(null===t.limit)return!1;if(r.size!==e.size)return!0;const o="F"===t.limitType?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ni(t,e){return kO()<=vc.in.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",$O(e)),this.Di.getDocumentsMatchingQuery(t,e,Da.min())}Oi(t,e,r,i){return this.Di.getDocumentsMatchingQuery(t,r,i).next(o=>(e.forEach(c=>{o=o.insert(c.key,c)}),o))}}class bY{constructor(t,e,r,i){this.persistence=t,this.Fi=e,this.wt=i,this.$i=new Yr(Wt),this.Bi=new lp(o=>Tm(o),lC),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Tj(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.$i))}}function Ij(n,t,e,r){return new bY(n,t,e,r)}function Aj(n,t){return aM.apply(this,arguments)}function aM(){return aM=(0,Te.Z)(function*(n,t){const e=at(n);return yield e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,e.qi(t),e.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],d=[];let f=Qt();for(const y of i){c.push(y.batchId);for(const w of y.mutations)f=f.add(w.key)}for(const y of o){d.push(y.batchId);for(const w of y.mutations)f=f.add(w.key)}return e.localDocuments.getDocuments(r,f).next(y=>({Ki:y,removedBatchIds:c,addedBatchIds:d}))})})}),aM.apply(this,arguments)}function Nj(n){const t=at(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Vs.getLastRemoteSnapshotVersion(e))}function xj(n,t,e){let r=Qt(),i=Qt();return e.forEach(o=>r=r.add(o)),t.getEntries(n,r).next(o=>{let c=Vo();return e.forEach((d,f)=>{const y=o.get(d);f.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(Ht.min())?(t.removeEntry(d,f.readTime),c=c.insert(d,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(t.addEntry(f),c=c.insert(d,f)):Ze("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",f.version)}),{Gi:c,Qi:i}})}function TY(n,t){const e=at(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Ev(n,t){const e=at(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.Vs.getTargetData(r,t).next(o=>o?(i=o,de.resolve(i)):e.Vs.allocateTargetId(r).next(c=>(i=new cp(t,c,0,r.currentSequenceNumber),e.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.$i=e.$i.insert(r.targetId,r),e.Bi.set(t,r.targetId)),r})}function Dv(n,t,e){return lM.apply(this,arguments)}function lM(){return lM=(0,Te.Z)(function*(n,t,e){const r=at(n),i=r.$i.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!rp(c))throw c;Ze("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}r.$i=r.$i.remove(t),r.Bi.delete(i.target)}),lM.apply(this,arguments)}function oI(n,t,e){const r=at(n);let i=Ht.min(),o=Qt();return r.persistence.runTransaction("Execute query","readonly",c=>function(d,f,y){const w=at(d),E=w.Bi.get(y);return void 0!==E?de.resolve(w.$i.get(E)):w.Vs.getTargetData(f,y)}(r,c,Bo(t)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(c,d.targetId).next(f=>{o=f})}).next(()=>r.Fi.getDocumentsMatchingQuery(c,t,e?i:Ht.min(),e?o:Qt())).next(d=>(Oj(r,f3(t),d),{documents:d,ji:o})))}function kj(n,t){const e=at(n),r=at(e.Vs),i=e.$i.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",o=>r.te(o,t).next(c=>c?c.target:null))}function Rj(n,t){const e=at(n),r=e.Li.get(t)||Ht.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.Ui.getAllFromCollectionGroup(i,t,VV(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Oj(e,t,i),i))}function Oj(n,t,e){let r=Ht.min();e.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Li.set(t,r)}function cM(){return cM=(0,Te.Z)(function*(n,t,e,r){const i=at(n);let o=Qt(),c=Vo();for(const y of e){const w=t.Wi(y.metadata.name);y.document&&(o=o.add(w));const E=t.zi(y);E.setReadTime(t.Hi(y.metadata.readTime)),c=c.insert(w,E)}const d=i.Ui.newChangeBuffer({trackRemovals:!0}),f=yield Ev(i,(y=r,Bo(pv(mn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>xj(y,d,c).next(w=>(d.apply(y),w)).next(w=>i.Vs.removeMatchingKeysForTargetId(y,f.targetId).next(()=>i.Vs.addMatchingKeys(y,o,f.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,w.Gi,w.Qi)).next(()=>w.Gi)))}),cM.apply(this,arguments)}function DY(n,t){return uM.apply(this,arguments)}function uM(){return uM=(0,Te.Z)(function*(n,t,e=Qt()){const r=yield Ev(n,Bo(XO(t.bundledQuery))),i=at(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const c=ts(t.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ds.saveNamedQuery(o,t);const d=r.withResumeToken(Vi.EMPTY_BYTE_STRING,c);return i.$i=i.$i.insert(d.targetId,d),i.Vs.updateTargetData(o,d).next(()=>i.Vs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Vs.addMatchingKeys(o,e,r.targetId)).next(()=>i.Ds.saveNamedQuery(o,t))})}),uM.apply(this,arguments)}function Mj(n,t){return`firestore_clients_${n}_${t}`}function Pj(n,t,e){let r=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function dM(n,t){return`firestore_targets_${n}_${t}`}class aI{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static Ji(t,e,r){const i=JSON.parse(r);let o,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(o=new Be(i.error.code,i.error.message))),c?new aI(t,e,i.state,o):(fi("SharedClientState",`Failed to parse mutation state for ID '${e}': ${r}`),null)}Yi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class IC{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ji(t,e){const r=JSON.parse(e);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Be(r.error.code,r.error.message))),o?new IC(t,r.state,i):(fi("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Yi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class lI{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ji(t,e){const r=JSON.parse(e);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=WS();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=KV(r.activeTargetIds[c]),o=o.add(r.activeTargetIds[c]);return i?new lI(t,o):(fi("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class hM{constructor(t,e){this.clientId=t,this.onlineState=e}static Ji(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new hM(e.clientId,e.onlineState):(fi("SharedClientState",`Failed to parse online state: ${t}`),null)}}class fM{constructor(){this.activeTargetIds=WS()}Xi(t){this.activeTargetIds=this.activeTargetIds.add(t)}Zi(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Yi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class pM{constructor(t,e,r,i,o){this.window=t,this.js=e,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Yr(Wt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.rr=Mj(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new fM),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Te.Z)(function*(){const e=yield t.syncEngine.Ri();for(const i of e){if(i===t.tr)continue;const o=t.getItem(Mj(t.persistenceKey,i));if(o){const c=lI.Ji(i,o);c&&(t.sr=t.sr.insert(c.clientId,c))}}t._r();const r=t.storage.getItem(t.lr);if(r){const i=t.wr(r);i&&t.mr(i)}for(const i of t.ir)t.nr(i);t.ir=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ur,JSON.stringify(t))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(t){let e=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.yr(t,"pending")}updateMutationState(t,e,r){this.yr(t,e,r),this.pr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const r=this.storage.getItem(dM(this.persistenceKey,t));if(r){const i=IC.Ji(t,r);i&&(e=i.state)}}return this.Ir.Xi(t),this._r(),e}removeLocalQueryTarget(t){this.Ir.Zi(t),this._r()}isLocalQueryTarget(t){return this.Ir.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(dM(this.persistenceKey,t))}updateQueryState(t,e,r){this.Tr(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.pr(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Er(t)}notifyBundleLoaded(t){this.Ar(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Ze("SharedClientState","READ",t,e),e}setItem(t,e){Ze("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Ze("SharedClientState","REMOVE",t),this.storage.removeItem(t)}nr(t){var e=this;const r=t;if(r.storageArea===this.storage){if(Ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void fi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Te.Z)(function*(){if(e.started){if(null!==r.key)if(e.cr.test(r.key)){if(null==r.newValue){const i=e.Rr(r.key);return e.br(i,null)}{const i=e.Pr(r.key,r.newValue);if(i)return e.br(i.clientId,i)}}else if(e.ar.test(r.key)){if(null!==r.newValue){const i=e.vr(r.key,r.newValue);if(i)return e.Vr(i)}}else if(e.hr.test(r.key)){if(null!==r.newValue){const i=e.Sr(r.key,r.newValue);if(i)return e.Dr(i)}}else if(r.key===e.lr){if(null!==r.newValue){const i=e.wr(r.newValue);if(i)return e.mr(i)}}else if(r.key===e.ur){const i=function(o){let c=Uo.ot;if(null!=o)try{const d=JSON.parse(o);Gt("number"==typeof d),c=d}catch(d){fi("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(r.newValue);i!==Uo.ot&&e.sequenceNumberHandler(i)}else if(r.key===e.dr){const i=e.Cr(r.newValue);yield Promise.all(i.map(o=>e.syncEngine.Nr(o)))}}else e.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(t,e,r){const i=new aI(this.currentUser,t,e,r),o=Pj(this.persistenceKey,this.currentUser,t);this.setItem(o,i.Yi())}pr(t){const e=Pj(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Er(t){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:t}))}Tr(t,e,r){const i=dM(this.persistenceKey,t),o=new IC(t,e,r);this.setItem(i,o.Yi())}Ar(t){const e=JSON.stringify(Array.from(t));this.setItem(this.dr,e)}Rr(t){const e=this.cr.exec(t);return e?e[1]:null}Pr(t,e){const r=this.Rr(t);return lI.Ji(r,e)}vr(t,e){const r=this.ar.exec(t),i=Number(r[1]);return aI.Ji(new Xi(void 0!==r[2]?r[2]:null),i,e)}Sr(t,e){const r=this.hr.exec(t),i=Number(r[1]);return IC.Ji(i,e)}wr(t){return hM.Ji(t)}Cr(t){return JSON.parse(t)}Vr(t){var e=this;return(0,Te.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.kr(t.batchId,t.state,t.error);Ze("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Dr(t){return this.syncEngine.Mr(t.targetId,t.state,t.error)}br(t,e){const r=e?this.sr.insert(t,e):this.sr.remove(t),i=this.gr(this.sr),o=this.gr(r),c=[],d=[];return o.forEach(f=>{i.has(f)||c.push(f)}),i.forEach(f=>{o.has(f)||d.push(f)}),this.syncEngine.Or(c,d).then(()=>{this.sr=r})}mr(t){this.sr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}gr(t){let e=WS();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class Fj{constructor(){this.Fr=new fM,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t){return this.Fr.Xi(t),this.$r[t]||"not-current"}updateQueryState(t,e,r){this.$r[t]=e}removeLocalQueryTarget(t){this.Fr.Zi(t)}isLocalQueryTarget(t){return this.Fr.activeTargetIds.has(t)}clearQueryState(t){delete this.$r[t]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(t){return this.Fr.activeTargetIds.has(t)}start(){return this.Fr=new fM,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class SY{Br(t){}shutdown(){}}class Lj{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(t){this.Gr.push(t)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Gr)t(0)}Kr(){Ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Gr)t(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const IY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class AY{constructor(t){this.jr=t.jr,this.Wr=t.Wr}zr(t){this.Hr=t}Jr(t){this.Yr=t}onMessage(t){this.Xr=t}close(){this.Wr()}send(t){this.jr(t)}Zr(){this.Hr()}eo(t){this.Yr(t)}no(t){this.Xr(t)}}class NY extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.so=(t.ssl?"https":"http")+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(t,e,r,i,o){const c=this.oo(t,e);Ze("RestConnection","Sending: ",c,r);const d={};return this.uo(d,i,o),this.co(t,c,d,r).then(f=>(Ze("RestConnection","Received: ",f),f),f=>{throw mm("RestConnection",`${t} failed with error: `,f,"url: ",c,"request:",r),f})}ao(t,e,r,i,o,c){return this.ro(t,e,r,i,o)}uo(t,e,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+cv,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,o)=>t[o]=i),r&&r.headers.forEach((i,o)=>t[o]=i)}oo(t,e){return`${this.so}/v1/${e}:${IY[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,r,i){return new Promise((o,c)=>{const d=new IK;d.listenOnce(EK.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case xO.NO_ERROR:const y=d.getResponseJson();Ze("Connection","XHR received:",JSON.stringify(y)),o(y);break;case xO.TIMEOUT:Ze("Connection",'RPC "'+t+'" timed out'),c(new Be(ge.DEADLINE_EXCEEDED,"Request time out"));break;case xO.HTTP_ERROR:const w=d.getStatus();if(Ze("Connection",'RPC "'+t+'" failed with status:',w,"response text:",d.getResponseText()),w>0){const E=d.getResponseJson().error;if(E&&E.status&&E.message){const A=function(k){const M=k.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(M)>=0?M:ge.UNKNOWN}(E.status);c(new Be(A,E.message))}else c(new Be(ge.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Be(ge.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{Ze("Connection",'RPC "'+t+'" completed.')}});const f=JSON.stringify(i);d.send(e,"POST",f,r,15)})}ho(t,e,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=CK(),c=TK(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new SK({})),this.uo(d.initMessageHeaders,e,r),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const f=i.join("");Ze("Connection","Creating WebChannel: "+f,d);const y=o.createWebChannel(f,d);let w=!1,E=!1;const A=new AY({jr:M=>{E?Ze("Connection","Not sending because WebChannel is closed:",M):(w||(Ze("Connection","Opening WebChannel transport."),y.open(),w=!0),Ze("Connection","WebChannel sending:",M),y.send(M))},Wr:()=>y.close()}),k=(M,V,W)=>{M.listen(V,ne=>{try{W(ne)}catch(he){setTimeout(()=>{throw he},0)}})};return k(y,PS.EventType.OPEN,()=>{E||Ze("Connection","WebChannel transport opened.")}),k(y,PS.EventType.CLOSE,()=>{E||(E=!0,Ze("Connection","WebChannel transport closed"),A.eo())}),k(y,PS.EventType.ERROR,M=>{E||(E=!0,mm("Connection","WebChannel transport errored:",M),A.eo(new Be(ge.UNAVAILABLE,"The operation could not be completed")))}),k(y,PS.EventType.MESSAGE,M=>{var V;if(!E){const W=M.data[0];Gt(!!W);const he=W.error||(null===(V=W[0])||void 0===V?void 0:V.error);if(he){Ze("Connection","WebChannel received error:",he);const Ie=he.status;let me=function(je){const ct=Ei[je];if(void 0!==ct)return N3(ct)}(Ie),Pe=he.message;void 0===me&&(me=ge.INTERNAL,Pe="Unknown error status: "+Ie+" with message "+he.message),E=!0,A.eo(new Be(me,Pe)),y.close()}else Ze("Connection","WebChannel received:",W),A.no(W)}}),k(c,DK.STAT_EVENT,M=>{M.stat===MV.PROXY?Ze("Connection","Detected buffering proxy"):M.stat===MV.NOPROXY&&Ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{A.Zr()},0),A}}function Uj(){return typeof window<"u"?window:null}function cI(){return typeof document<"u"?document:null}function AC(n){return new b7(n,!0)}class gM{constructor(t,e,r=1e3,i=1.5,o=6e4){this.js=t,this.timerId=e,this.lo=r,this.fo=i,this._o=o,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(t){this.cancel();const e=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,e-r);i>0&&Ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),t())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Bj{constructor(t,e,r,i,o,c,d,f){this.js=t,this.Ao=r,this.Ro=i,this.bo=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new gM(t,e)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var t=this;return(0,Te.Z)(function*(){t.Do()&&(yield t.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(t){this.Fo(),this.stream.send(t)}Mo(){var t=this;return(0,Te.Z)(function*(){if(t.Co())return t.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(t,e){var r=this;return(0,Te.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==t?r.So.reset():e&&e.code===ge.RESOURCE_EXHAUSTED?(fi(e.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):e&&e.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=t,yield r.listener.Jr(e)})()}Bo(){}auth(){this.state=1;const t=this.Lo(this.Po),e=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===e&&this.Uo(r,i)},r=>{t(()=>{const i=new Be(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(t,e){const r=this.Lo(this.Po);this.stream=this.Ko(t,e),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var t=this;this.state=5,this.So.Io((0,Te.Z)(function*(){t.state=0,t.start()}))}qo(t){return Ze("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Lo(t){return e=>{this.js.enqueueAndForget(()=>this.Po===t?e():(Ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xY extends Bj{constructor(t,e,r,i,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,c),this.wt=o}Ko(t,e){return this.bo.ho("Listen",t,e)}onMessage(t){this.So.reset();const e=function T7(n,t){let e;if("targetChange"in t){const r="NO_CHANGE"===(f=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:pt(),i=t.targetChange.targetIds||[],o=function(f,y){return f.dt?(Gt(void 0===y||"string"==typeof y),Vi.fromBase64String(y||"")):(Gt(void 0===y||y instanceof Uint8Array),Vi.fromUint8Array(y||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(f){const y=void 0===f.code?ge.UNKNOWN:N3(f.code);return new Be(y,f.message||"")}(c);e=new M3(r,i,o,d||null)}else if("documentChange"in t){const r=t.documentChange,i=Mu(n,r.document.name),o=ts(r.document.updateTime),c=new ys({mapValue:{fields:r.document.fields}}),d=er.newFoundDocument(i,o,c);e=new KS(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){const r=t.documentDelete,i=Mu(n,r.document),o=r.readTime?ts(r.readTime):Ht.min(),c=er.newNoDocument(i,o);e=new KS([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const r=t.documentRemove,i=Mu(n,r.document);e=new KS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return pt();{const r=t.filter,o=new h7(r.count||0);e=new O3(r.targetId,o)}}var f;return e}(this.wt,t),r=function(i){if(!("targetChange"in i))return Ht.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ht.min():o.readTime?ts(o.readTime):Ht.min()}(t);return this.listener.Go(e,r)}Qo(t){const e={};e.database=yC(this.wt),e.addTarget=function(i,o){let c;const d=o.target;return c=HS(d)?{documents:G3(i,d)}:{query:Z3(i,d)},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?c.resumeToken=U3(i,o.resumeToken):o.snapshotVersion.compareTo(Ht.min())>0&&(c.readTime=mC(i,o.snapshotVersion.toTimestamp())),c}(this.wt,t);const r=function D7(n,t){const e=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);r&&(e.labels=r),this.Oo(e)}jo(t){const e={};e.database=yC(this.wt),e.removeTarget=t,this.Oo(e)}}class kY extends Bj{constructor(t,e,r,i,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,c),this.wt=o,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(t,e){return this.bo.ho("Write",t,e)}onMessage(t){if(Gt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Wo){this.So.reset();const e=function E7(n,t){return n&&n.length>0?(Gt(void 0!==t),n.map(e=>function(r,i){let o=ts(r.updateTime?r.updateTime:i);return o.isEqual(Ht.min())&&(o=ts(i)),new c7(o,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),r=ts(t.commitTime);return this.listener.Jo(r,e)}return Gt(!t.writeResults||0===t.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const t={};t.database=yC(this.wt),this.Oo(t)}Ho(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>vC(this.wt,r))};this.Oo(e)}}class RY extends class{}{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Be(ge.FAILED_PRECONDITION,"The client has already been terminated.")}ro(t,e,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.bo.ro(t,e,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Be(ge.UNKNOWN,i.toString())})}ao(t,e,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.bo.ao(t,e,r,o,c,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Be(ge.UNKNOWN,o.toString())})}terminate(){this.Zo=!0}}class OY{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(t){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ru("Offline")))}set(t){this.cu(),this.eu=0,"Online"===t&&(this.su=!1),this.ru(t)}ru(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ou(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(fi(e),this.su=!1):Ze("OnlineStateTracker",e)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class MY{constructor(t,e,r,i,o){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=o,this.du.Br(d=>{r.enqueueAndForget((0,Te.Z)(function*(){var f;hp(c)&&(Ze("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,Te.Z)(function*(y){const w=at(y);w.lu.add(4),yield Sv(w),w._u.set("Unknown"),w.lu.delete(4),yield NC(w)}),function(y){return f.apply(this,arguments)})(c))}))}),this._u=new OY(r,i)}}function NC(n){return mM.apply(this,arguments)}function mM(){return mM=(0,Te.Z)(function*(n){if(hp(n))for(const t of n.fu)yield t(!0)}),mM.apply(this,arguments)}function Sv(n){return _M.apply(this,arguments)}function _M(){return _M=(0,Te.Z)(function*(n){for(const t of n.fu)yield t(!1)}),_M.apply(this,arguments)}function uI(n,t){const e=at(n);e.hu.has(t.targetId)||(e.hu.set(t.targetId,t),bM(e)?vM(e):Av(e).Co()&&yM(e,t))}function xC(n,t){const e=at(n),r=Av(e);e.hu.delete(t),r.Co()&&Vj(e,t),0===e.hu.size&&(r.Co()?r.ko():hp(e)&&e._u.set("Unknown"))}function yM(n,t){n.wu.Nt(t.targetId),Av(n).Qo(t)}function Vj(n,t){n.wu.Nt(t),Av(n).jo(t)}function vM(n){n.wu=new _7({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),te:t=>n.hu.get(t)||null}),Av(n).start(),n._u.iu()}function bM(n){return hp(n)&&!Av(n).Do()&&n.hu.size>0}function hp(n){return 0===at(n).lu.size}function jj(n){n.wu=void 0}function PY(n){return wM.apply(this,arguments)}function wM(){return wM=(0,Te.Z)(function*(n){n.hu.forEach((t,e)=>{yM(n,t)})}),wM.apply(this,arguments)}function FY(n,t){return CM.apply(this,arguments)}function CM(){return CM=(0,Te.Z)(function*(n,t){jj(n),bM(n)?(n._u.uu(t),vM(n)):n._u.set("Unknown")}),CM.apply(this,arguments)}function LY(n,t,e){return TM.apply(this,arguments)}function TM(){return TM=(0,Te.Z)(function*(n,t,e){if(n._u.set("Online"),t instanceof M3&&2===t.state&&t.cause)try{yield(r=(0,Te.Z)(function*(i,o){const c=o.cause;for(const d of o.targetIds)i.hu.has(d)&&(yield i.remoteSyncer.rejectListen(d,c),i.hu.delete(d),i.wu.removeTarget(d))}),function(i,o){return r.apply(this,arguments)})(n,t)}catch(r){Ze("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield dI(n,r)}else if(t instanceof KS?n.wu.Ut(t):t instanceof O3?n.wu.zt(t):n.wu.Gt(t),!e.isEqual(Ht.min()))try{const r=yield Nj(n.localStore);e.compareTo(r)>=0&&(yield function(i,o){const c=i.wu.Yt(o);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.hu.get(f);y&&i.hu.set(f,y.withResumeToken(d.resumeToken,o))}}),c.targetMismatches.forEach(d=>{const f=i.hu.get(d);if(!f)return;i.hu.set(d,f.withResumeToken(Vi.EMPTY_BYTE_STRING,f.snapshotVersion)),Vj(i,d);const y=new cp(f.target,d,1,f.sequenceNumber);yM(i,y)}),i.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(r){Ze("RemoteStore","Failed to raise snapshot:",r),yield dI(n,r)}var r}),TM.apply(this,arguments)}function dI(n,t,e){return EM.apply(this,arguments)}function EM(){return EM=(0,Te.Z)(function*(n,t,e){if(!rp(t))throw t;n.lu.add(1),yield Sv(n),n._u.set("Offline"),e||(e=()=>Nj(n.localStore)),n.asyncQueue.enqueueRetryable((0,Te.Z)(function*(){Ze("RemoteStore","Retrying IndexedDB access"),yield e(),n.lu.delete(1),yield NC(n)}))}),EM.apply(this,arguments)}function Hj(n,t){return t().catch(e=>dI(n,e,t))}function Iv(n){return DM.apply(this,arguments)}function DM(){return DM=(0,Te.Z)(function*(n){const t=at(n),e=fp(t);let r=t.au.length>0?t.au[t.au.length-1].batchId:-1;for(;UY(t);)try{const i=yield TY(t.localStore,r);if(null===i){0===t.au.length&&e.ko();break}r=i.batchId,BY(t,i)}catch(i){yield dI(t,i)}$j(t)&&Gj(t)}),DM.apply(this,arguments)}function UY(n){return hp(n)&&n.au.length<10}function BY(n,t){n.au.push(t);const e=fp(n);e.Co()&&e.zo&&e.Ho(t.mutations)}function $j(n){return hp(n)&&!fp(n).Do()&&n.au.length>0}function Gj(n){fp(n).start()}function VY(n){return SM.apply(this,arguments)}function SM(){return SM=(0,Te.Z)(function*(n){fp(n).Xo()}),SM.apply(this,arguments)}function jY(n){return IM.apply(this,arguments)}function IM(){return IM=(0,Te.Z)(function*(n){const t=fp(n);for(const e of n.au)t.Ho(e.mutations)}),IM.apply(this,arguments)}function HY(n,t,e){return AM.apply(this,arguments)}function AM(){return AM=(0,Te.Z)(function*(n,t,e){const r=n.au.shift(),i=JO.from(r,t,e);yield Hj(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Iv(n)}),AM.apply(this,arguments)}function $Y(n,t){return NM.apply(this,arguments)}function NM(){return NM=(0,Te.Z)(function*(n,t){var e;t&&fp(n).zo&&(yield(e=(0,Te.Z)(function*(r,i){if(A3(o=i.code)&&o!==ge.ABORTED){const c=r.au.shift();fp(r).No(),yield Hj(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Iv(r)}var o}),function(r,i){return e.apply(this,arguments)})(n,t)),$j(n)&&Gj(n)}),NM.apply(this,arguments)}function Zj(n,t){return xM.apply(this,arguments)}function xM(){return xM=(0,Te.Z)(function*(n,t){const e=at(n);e.asyncQueue.verifyOperationInProgress(),Ze("RemoteStore","RemoteStore received new credentials");const r=hp(e);e.lu.add(3),yield Sv(e),r&&e._u.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.lu.delete(3),yield NC(e)}),xM.apply(this,arguments)}function kM(n,t){return RM.apply(this,arguments)}function RM(){return RM=(0,Te.Z)(function*(n,t){const e=at(n);t?(e.lu.delete(2),yield NC(e)):t||(e.lu.add(2),yield Sv(e),e._u.set("Unknown"))}),RM.apply(this,arguments)}function Av(n){return n.mu||(n.mu=function(t,e,r){const i=at(t);return i.tu(),new xY(e,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:PY.bind(null,n),Jr:FY.bind(null,n),Go:LY.bind(null,n)}),n.fu.push(function(){var t=(0,Te.Z)(function*(e){e?(n.mu.No(),bM(n)?vM(n):n._u.set("Unknown")):(yield n.mu.stop(),jj(n))});return function(e){return t.apply(this,arguments)}}())),n.mu}function fp(n){return n.gu||(n.gu=function(t,e,r){const i=at(t);return i.tu(),new kY(e,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:VY.bind(null,n),Jr:$Y.bind(null,n),Yo:jY.bind(null,n),Jo:HY.bind(null,n)}),n.fu.push(function(){var t=(0,Te.Z)(function*(e){e?(n.gu.No(),yield Iv(n)):(yield n.gu.stop(),n.au.length>0&&(Ze("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(e){return t.apply(this,arguments)}}())),n.gu}class OM{constructor(t,e,r,i,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,r,i,o){const c=Date.now()+r,d=new OM(t,e,c,i,o);return d.start(r),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Be(ge.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nv(n,t){if(fi("AsyncQueue",`${t}: ${n}`),rp(n))return new Be(ge.UNAVAILABLE,`${t}: ${n}`);throw n}class xv{constructor(t){this.comparator=t?(e,r)=>t(e,r)||it.comparator(e.key,r.key):(e,r)=>it.comparator(e.key,r.key),this.keyedMap=hC(),this.sortedSet=new Yr(this.comparator)}static emptySet(t){return new xv(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof xv)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const r=new xv;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class qj{constructor(){this.yu=new Yr(it.comparator)}track(t){const e=t.doc.key,r=this.yu.get(e);r?0!==t.type&&3===r.type?this.yu=this.yu.insert(e,t):3===t.type&&1!==r.type?this.yu=this.yu.insert(e,{type:r.type,doc:t.doc}):2===t.type&&2===r.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===r.type?this.yu=this.yu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===r.type?this.yu=this.yu.remove(e):1===t.type&&2===r.type?this.yu=this.yu.insert(e,{type:1,doc:r.doc}):0===t.type&&1===r.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):pt():this.yu=this.yu.insert(e,t)}pu(){const t=[];return this.yu.inorderTraversal((e,r)=>{t.push(r)}),t}}class kv{constructor(t,e,r,i,o,c,d,f){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f}static fromInitialDocuments(t,e,r,i){const o=[];return e.forEach(c=>{o.push({type:0,doc:c})}),new kv(t,e,xv.emptySet(e),o,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&cC(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}class GY{constructor(){this.Iu=void 0,this.listeners=[]}}class ZY{constructor(){this.queries=new lp(t=>h3(t),cC),this.onlineState="Unknown",this.Tu=new Set}}function MM(n,t){return PM.apply(this,arguments)}function PM(){return PM=(0,Te.Z)(function*(n,t){const e=at(n),r=t.query;let i=!1,o=e.queries.get(r);if(o||(i=!0,o=new GY),i)try{o.Iu=yield e.onListen(r)}catch(c){const d=Nv(c,`Initialization of query '${$O(t.query)}' failed`);return void t.onError(d)}e.queries.set(r,o),o.listeners.push(t),t.Eu(e.onlineState),o.Iu&&t.Au(o.Iu)&&UM(e)}),PM.apply(this,arguments)}function FM(n,t){return LM.apply(this,arguments)}function LM(){return LM=(0,Te.Z)(function*(n,t){const e=at(n),r=t.query;let i=!1;const o=e.queries.get(r);if(o){const c=o.listeners.indexOf(t);c>=0&&(o.listeners.splice(c,1),i=0===o.listeners.length)}if(i)return e.queries.delete(r),e.onUnlisten(r)}),LM.apply(this,arguments)}function qY(n,t){const e=at(n);let r=!1;for(const i of t){const c=e.queries.get(i.query);if(c){for(const d of c.listeners)d.Au(i)&&(r=!0);c.Iu=i}}r&&UM(e)}function zY(n,t,e){const r=at(n),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(e);r.queries.delete(t)}function UM(n){n.Tu.forEach(t=>{t.next()})}class BM{constructor(t,e,r){this.query=t,this.Ru=e,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)3!==i.type&&r.push(i);t=new kv(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Ru.next(t),e=!0):this.Vu(t,this.onlineState)&&(this.Su(t),e=!0),this.Pu=t,e}onError(t){this.Ru.error(t)}Eu(t){this.onlineState=t;let e=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,t)&&(this.Su(this.Pu),e=!0),e}Vu(t,e){return!t.fromCache||!(this.options.Du&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(t){t=kv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Ru.next(t)}}class WY{constructor(t,e){this.payload=t,this.byteLength=e}Cu(){return"metadata"in this.payload}}class zj{constructor(t){this.wt=t}Wi(t){return Mu(this.wt,t)}zi(t){return t.metadata.exists?$3(this.wt,t.document,!1):er.newNoDocument(this.Wi(t.metadata.name),this.Hi(t.metadata.readTime))}Hi(t){return ts(t)}}class KY{constructor(t,e,r){this.xu=t,this.localStore=e,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Wj(t)}Nu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const r=mn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}ku(t){const e=new Map,r=new zj(this.wt);for(const i of t)if(i.metadata.queries){const o=r.Wi(i.metadata.name);for(const c of i.metadata.queries){const d=(e.get(c)||Qt()).add(o);e.set(c,d)}}return e}complete(){var t=this;return(0,Te.Z)(function*(){const e=yield function EY(n,t,e,r){return cM.apply(this,arguments)}(t.localStore,new zj(t.wt),t.documents,t.xu.id),r=t.ku(t.documents);for(const i of t.queries)yield DY(t.localStore,i,r.get(i.name));return t.progress.taskState="Success",{progress:t.progress,Mu:t.collectionGroups,Ou:e}})()}}function Wj(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Kj{constructor(t){this.key=t}}class Yj{constructor(t){this.key=t}}class Jj{constructor(t,e){this.query=t,this.Fu=e,this.$u=null,this.current=!1,this.Bu=Qt(),this.mutatedKeys=Qt(),this.Lu=p3(t),this.Uu=new xv(this.Lu)}get qu(){return this.Fu}Ku(t,e){const r=e?e.Gu:new qj,i=e?e.Uu:this.Uu;let o=e?e.mutatedKeys:this.mutatedKeys,c=i,d=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((w,E)=>{const A=i.get(w),k=GO(this.query,E)?E:null,M=!!A&&this.mutatedKeys.has(A.key),V=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let W=!1;A&&k?A.data.isEqual(k.data)?M!==V&&(r.track({type:3,doc:k}),W=!0):this.Qu(A,k)||(r.track({type:2,doc:k}),W=!0,(f&&this.Lu(k,f)>0||y&&this.Lu(k,y)<0)&&(d=!0)):!A&&k?(r.track({type:0,doc:k}),W=!0):A&&!k&&(r.track({type:1,doc:A}),W=!0,(f||y)&&(d=!0)),W&&(k?(c=c.add(k),o=V?o.add(w):o.delete(w)):(c=c.delete(w),o=o.delete(w)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const w="F"===this.query.limitType?c.last():c.first();c=c.delete(w.key),o=o.delete(w.key),r.track({type:1,doc:w})}return{Uu:c,Gu:r,Mi:d,mutatedKeys:o}}Qu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r){const i=this.Uu;this.Uu=t.Uu,this.mutatedKeys=t.mutatedKeys;const o=t.Gu.pu();o.sort((y,w)=>function(E,A){const k=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return k(E)-k(A)}(y.type,w.type)||this.Lu(y.doc,w.doc)),this.ju(r);const c=e?this.Wu():[],d=0===this.Bu.size&&this.current?1:0,f=d!==this.$u;return this.$u=d,0!==o.length||f?{snapshot:new kv(this.query,t.Uu,i,o,t.mutatedKeys,0===d,f,!1),zu:c}:{zu:c}}Eu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new qj,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(t){return!this.Fu.has(t)&&!!this.Uu.has(t)&&!this.Uu.get(t).hasLocalMutations}ju(t){t&&(t.addedDocuments.forEach(e=>this.Fu=this.Fu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Fu=this.Fu.delete(e)),this.current=t.current)}Wu(){if(!this.current)return[];const t=this.Bu;this.Bu=Qt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const e=[];return t.forEach(r=>{this.Bu.has(r)||e.push(new Yj(r))}),this.Bu.forEach(r=>{t.has(r)||e.push(new Kj(r))}),e}Ju(t){this.Fu=t.ji,this.Bu=Qt();const e=this.Ku(t.documents);return this.applyChanges(e,!0)}Yu(){return kv.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class YY{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class JY{constructor(t){this.key=t,this.Xu=!1}}class QY{constructor(t,e,r,i,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Zu={},this.tc=new lp(d=>h3(d),cC),this.ec=new Map,this.nc=new Set,this.sc=new Yr(it.comparator),this.ic=new Map,this.rc=new nM,this.oc={},this.uc=new Map,this.cc=Rm.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function XY(n,t){return VM.apply(this,arguments)}function VM(){return VM=(0,Te.Z)(function*(n,t){const e=cP(n);let r,i;const o=e.tc.get(t);if(o)r=o.targetId,e.sharedClientState.addLocalQueryTarget(r),i=o.view.Yu();else{const c=yield Ev(e.localStore,Bo(t));e.isPrimaryClient&&uI(e.remoteStore,c);const d=e.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield jM(e,t,r,"current"===d)}return i}),VM.apply(this,arguments)}function jM(n,t,e,r){return HM.apply(this,arguments)}function HM(){return HM=(0,Te.Z)(function*(n,t,e,r){n.hc=(w,E,A)=>{return(k=(0,Te.Z)(function*(M,V,W,ne){let he=V.view.Ku(W);he.Mi&&(he=yield oI(M.localStore,V.query,!1).then(({documents:Pe})=>V.view.Ku(Pe,he)));const Ie=ne&&ne.targetChanges.get(V.targetId),me=V.view.applyChanges(he,M.isPrimaryClient,Ie);return QM(M,V.targetId,me.zu),me.snapshot}),function(M,V,W,ne){return k.apply(this,arguments)})(n,w,E,A);var k};const i=yield oI(n.localStore,t,!0),o=new Jj(t,i.ji),c=o.Ku(i.documents),d=gC.createSynthesizedTargetChangeForCurrentChange(e,r&&"Offline"!==n.onlineState),f=o.applyChanges(c,n.isPrimaryClient,d);QM(n,e,f.zu);const y=new YY(t,e,o);return n.tc.set(t,y),n.ec.has(e)?n.ec.get(e).push(t):n.ec.set(e,[t]),f.snapshot}),HM.apply(this,arguments)}function e9(n,t){return $M.apply(this,arguments)}function $M(){return $M=(0,Te.Z)(function*(n,t){const e=at(n),r=e.tc.get(t),i=e.ec.get(r.targetId);if(i.length>1)return e.ec.set(r.targetId,i.filter(o=>!cC(o,t))),void e.tc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Dv(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),xC(e.remoteStore,r.targetId),Rv(e,r.targetId)}).catch(np))):(Rv(e,r.targetId),yield Dv(e.localStore,r.targetId,!0))}),$M.apply(this,arguments)}function GM(){return GM=(0,Te.Z)(function*(n,t,e){const r=uP(n);try{const i=yield function(o,c){const d=at(o),f=Ir.now(),y=c.reduce((A,k)=>A.add(k.key),Qt());let w,E;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let k=Vo(),M=Qt();return d.Ui.getEntries(A,y).next(V=>{k=V,k.forEach((W,ne)=>{ne.isValidDocument()||(M=M.add(W))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,k)).next(V=>{w=V;const W=[];for(const ne of c){const he=d7(ne,w.get(ne.key).overlayedDocument);null!=he&&W.push(new ph(ne.key,he,n3(he.value.mapValue),Br.exists(!0)))}return d.mutationQueue.addMutationBatch(A,f,W,c)}).next(V=>{E=V;const W=V.applyToLocalDocumentSet(w,M);return d.documentOverlayCache.saveOverlays(A,V.batchId,W)})}).then(()=>({batchId:E.batchId,changes:k3(w)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,d){let f=o.oc[o.currentUser.toKey()];f||(f=new Yr(Wt)),f=f.insert(c,d),o.oc[o.currentUser.toKey()]=f}(r,i.batchId,e),yield gh(r,i.changes),yield Iv(r.remoteStore)}catch(i){const o=Nv(i,"Failed to persist write");e.reject(o)}}),GM.apply(this,arguments)}function Qj(n,t){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,Te.Z)(function*(n,t){const e=at(n);try{const r=yield function CY(n,t){const e=at(n),r=t.snapshotVersion;let i=e.$i;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=e.Ui.newChangeBuffer({trackRemovals:!0});i=e.$i;const d=[];t.targetChanges.forEach((w,E)=>{const A=i.get(E);if(!A)return;d.push(e.Vs.removeMatchingKeys(o,w.removedDocuments,E).next(()=>e.Vs.addMatchingKeys(o,w.addedDocuments,E)));let k=A.withSequenceNumber(o.currentSequenceNumber);var M,V,W;t.targetMismatches.has(E)?k=k.withResumeToken(Vi.EMPTY_BYTE_STRING,Ht.min()).withLastLimboFreeSnapshotVersion(Ht.min()):w.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(w.resumeToken,r)),i=i.insert(E,k),V=k,W=w,(0===(M=A).resumeToken.approximateByteSize()||V.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8||W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0)&&d.push(e.Vs.updateTargetData(o,k))});let f=Vo(),y=Qt();if(t.documentUpdates.forEach(w=>{t.resolvedLimboDocuments.has(w)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(o,w))}),d.push(xj(o,c,t.documentUpdates).next(w=>{f=w.Gi,y=w.Qi})),!r.isEqual(Ht.min())){const w=e.Vs.getLastRemoteSnapshotVersion(o).next(E=>e.Vs.setTargetsMetadata(o,o.currentSequenceNumber,r));d.push(w)}return de.waitFor(d).next(()=>c.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,f,y)).next(()=>f)}).then(o=>(e.$i=i,o))}(e.localStore,t);t.targetChanges.forEach((i,o)=>{const c=e.ic.get(o);c&&(Gt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?Gt(c.Xu):i.removedDocuments.size>0&&(Gt(c.Xu),c.Xu=!1))}),yield gh(e,r,t)}catch(r){yield np(r)}}),ZM.apply(this,arguments)}function Xj(n,t,e){const r=at(n);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){const i=[];r.tc.forEach((o,c)=>{const d=c.view.Eu(t);d.snapshot&&i.push(d.snapshot)}),function(o,c){const d=at(o);d.onlineState=c;let f=!1;d.queries.forEach((y,w)=>{for(const E of w.listeners)E.Eu(c)&&(f=!0)}),f&&UM(d)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function n9(n,t,e){return qM.apply(this,arguments)}function qM(){return qM=(0,Te.Z)(function*(n,t,e){const r=at(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.ic.get(t),o=i&&i.key;if(o){let c=new Yr(it.comparator);c=c.insert(o,er.newNoDocument(o,Ht.min()));const d=Qt().add(o),f=new pC(Ht.min(),new Map,new $n(Wt),c,d);yield Qj(r,f),r.sc=r.sc.remove(o),r.ic.delete(t),XM(r)}else yield Dv(r.localStore,t,!1).then(()=>Rv(r,t,e)).catch(np)}),qM.apply(this,arguments)}function r9(n,t){return zM.apply(this,arguments)}function zM(){return zM=(0,Te.Z)(function*(n,t){const e=at(n),r=t.batch.batchId;try{const i=yield function wY(n,t){const e=at(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),o=e.Ui.newChangeBuffer({trackRemovals:!0});return function(c,d,f,y){const w=f.batch,E=w.keys();let A=de.resolve();return E.forEach(k=>{A=A.next(()=>y.getEntry(d,k)).next(M=>{const V=f.docVersions.get(k);Gt(null!==V),M.version.compareTo(V)<0&&(w.applyToRemoteDocument(M,f),M.isValidDocument()&&(M.setReadTime(f.commitVersion),y.addEntry(M)))})}),A.next(()=>c.mutationQueue.removeMutationBatch(d,w))}(e,r,t,o).next(()=>o.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=Qt();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(t))).next(()=>e.localDocuments.getDocuments(r,i))})}(e.localStore,t);JM(e,r,null),YM(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),yield gh(e,i)}catch(i){yield np(i)}}),zM.apply(this,arguments)}function i9(n,t,e){return WM.apply(this,arguments)}function WM(){return WM=(0,Te.Z)(function*(n,t,e){const r=at(n);try{const i=yield function(o,c){const d=at(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let y;return d.mutationQueue.lookupMutationBatch(f,c).next(w=>(Gt(null!==w),y=w.keys(),d.mutationQueue.removeMutationBatch(f,w))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,y,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y)).next(()=>d.localDocuments.getDocuments(f,y))})}(r.localStore,t);JM(r,t,e),YM(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),yield gh(r,i)}catch(i){yield np(i)}}),WM.apply(this,arguments)}function KM(){return KM=(0,Te.Z)(function*(n,t){const e=at(n);hp(e.remoteStore)||Ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const c=at(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===r)return void t.resolve();const i=e.uc.get(r)||[];i.push(t),e.uc.set(r,i)}catch(r){const i=Nv(r,"Initialization of waitForPendingWrites() operation failed");t.reject(i)}}),KM.apply(this,arguments)}function YM(n,t){(n.uc.get(t)||[]).forEach(e=>{e.resolve()}),n.uc.delete(t)}function JM(n,t,e){const r=at(n);let i=r.oc[r.currentUser.toKey()];if(i){const o=i.get(t);o&&(e?o.reject(e):o.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function Rv(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.ec.get(t))n.tc.delete(r),e&&n.Zu.lc(r,e);n.ec.delete(t),n.isPrimaryClient&&n.rc.us(t).forEach(r=>{n.rc.containsKey(r)||eH(n,r)})}function eH(n,t){n.nc.delete(t.path.canonicalString());const e=n.sc.get(t);null!==e&&(xC(n.remoteStore,e),n.sc=n.sc.remove(t),n.ic.delete(e),XM(n))}function QM(n,t,e){for(const r of e)r instanceof Kj?(n.rc.addReference(r.key,t),o9(n,r)):r instanceof Yj?(Ze("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,t),n.rc.containsKey(r.key)||eH(n,r.key)):pt()}function o9(n,t){const e=t.key,r=e.path.canonicalString();n.sc.get(e)||n.nc.has(r)||(Ze("SyncEngine","New document in limbo: "+e),n.nc.add(r),XM(n))}function XM(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const t=n.nc.values().next().value;n.nc.delete(t);const e=new it(mn.fromString(t)),r=n.cc.next();n.ic.set(r,new JY(e)),n.sc=n.sc.insert(e,r),uI(n.remoteStore,new cp(Bo(pv(e.path)),r,2,Uo.ot))}}function gh(n,t,e){return eP.apply(this,arguments)}function eP(){return eP=(0,Te.Z)(function*(n,t,e){const r=at(n),i=[],o=[],c=[];var d;r.tc.isEmpty()||(r.tc.forEach((d,f)=>{c.push(r.hc(f,t,e).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,y.fromCache?"not-current":"current"),i.push(y);const w=oM.Vi(f.targetId,y);o.push(w)}}))}),yield Promise.all(c),r.Zu.Go(i),yield(d=(0,Te.Z)(function*(f,y){const w=at(f);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>de.forEach(y,A=>de.forEach(A.Pi,k=>w.persistence.referenceDelegate.addReference(E,A.targetId,k)).next(()=>de.forEach(A.vi,k=>w.persistence.referenceDelegate.removeReference(E,A.targetId,k)))))}catch(E){if(!rp(E))throw E;Ze("LocalStore","Failed to update sequence numbers: "+E)}for(const E of y){const A=E.targetId;if(!E.fromCache){const k=w.$i.get(A),V=k.withLastLimboFreeSnapshotVersion(k.snapshotVersion);w.$i=w.$i.insert(A,V)}}}),function(f,y){return d.apply(this,arguments)})(r.localStore,o))}),eP.apply(this,arguments)}function a9(n,t){return tP.apply(this,arguments)}function tP(){return tP=(0,Te.Z)(function*(n,t){const e=at(n);if(!e.currentUser.isEqual(t)){Ze("SyncEngine","User change. New user:",t.toKey());const r=yield Aj(e.localStore,t);e.currentUser=t,(i=e).uc.forEach(c=>{c.forEach(d=>{d.reject(new Be(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield gh(e,r.Ki)}var i}),tP.apply(this,arguments)}function l9(n,t){const e=at(n),r=e.ic.get(t);if(r&&r.Xu)return Qt().add(r.key);{let i=Qt();const o=e.ec.get(t);if(!o)return i;for(const c of o){const d=e.tc.get(c);i=i.unionWith(d.view.qu)}return i}}function c9(n,t){return nP.apply(this,arguments)}function nP(){return nP=(0,Te.Z)(function*(n,t){const e=at(n),r=yield oI(e.localStore,t.query,!0),i=t.view.Ju(r);return e.isPrimaryClient&&QM(e,t.targetId,i.zu),i}),nP.apply(this,arguments)}function u9(n,t){return rP.apply(this,arguments)}function rP(){return rP=(0,Te.Z)(function*(n,t){const e=at(n);return Rj(e.localStore,t).then(r=>gh(e,r))}),rP.apply(this,arguments)}function d9(n,t,e,r){return iP.apply(this,arguments)}function iP(){return iP=(0,Te.Z)(function*(n,t,e,r){const i=at(n),o=yield function(c,d){const f=at(c),y=at(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",w=>y.yn(w,d).next(E=>E?f.localDocuments.getDocuments(w,E):de.resolve(null)))}(i.localStore,t);var d;null!==o?("pending"===e?yield Iv(i.remoteStore):"acknowledged"===e||"rejected"===e?(JM(i,t,r||null),YM(i,t),d=t,at(at(i.localStore).mutationQueue).In(d)):pt(),yield gh(i,o)):Ze("SyncEngine","Cannot apply mutation batch with id: "+t)}),iP.apply(this,arguments)}function sP(){return sP=(0,Te.Z)(function*(n,t){const e=at(n);if(cP(e),uP(e),!0===t&&!0!==e.ac){const r=e.sharedClientState.getAllActiveQueryTargets(),i=yield tH(e,r.toArray());e.ac=!0,yield kM(e.remoteStore,!0);for(const o of i)uI(e.remoteStore,o)}else if(!1===t&&!1!==e.ac){const r=[];let i=Promise.resolve();e.ec.forEach((o,c)=>{e.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Rv(e,c),Dv(e.localStore,c,!0))),xC(e.remoteStore,c)}),yield i,yield tH(e,r),function(o){const c=at(o);c.ic.forEach((d,f)=>{xC(c.remoteStore,f)}),c.rc.cs(),c.ic=new Map,c.sc=new Yr(it.comparator)}(e),e.ac=!1,yield kM(e.remoteStore,!1)}}),sP.apply(this,arguments)}function tH(n,t,e){return oP.apply(this,arguments)}function oP(){return oP=(0,Te.Z)(function*(n,t,e){const r=at(n),i=[],o=[];for(const c of t){let d;const f=r.ec.get(c);if(f&&0!==f.length){d=yield Ev(r.localStore,Bo(f[0]));for(const y of f){const w=r.tc.get(y),E=yield c9(r,w);E.snapshot&&o.push(E.snapshot)}}else{const y=yield kj(r.localStore,c);d=yield Ev(r.localStore,y),yield jM(r,nH(y),c,!1)}i.push(d)}return r.Zu.Go(o),i}),oP.apply(this,arguments)}function nH(n){return u3(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function f9(n){const t=at(n);return at(at(t.localStore).persistence).Ri()}function p9(n,t,e,r){return aP.apply(this,arguments)}function aP(){return aP=(0,Te.Z)(function*(n,t,e,r){const i=at(n);if(i.ac)return void Ze("SyncEngine","Ignoring unexpected query state notification.");const o=i.ec.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{const c=yield Rj(i.localStore,f3(o[0])),d=pC.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield gh(i,c,d);break}case"rejected":yield Dv(i.localStore,t,!0),Rv(i,t,r);break;default:pt()}}),aP.apply(this,arguments)}function g9(n,t,e){return lP.apply(this,arguments)}function lP(){return lP=(0,Te.Z)(function*(n,t,e){const r=cP(n);if(r.ac){for(const i of t){if(r.ec.has(i)){Ze("SyncEngine","Adding an already active target "+i);continue}const o=yield kj(r.localStore,i),c=yield Ev(r.localStore,o);yield jM(r,nH(o),c.targetId,!1),uI(r.remoteStore,c)}for(const i of e)r.ec.has(i)&&(yield Dv(r.localStore,i,!1).then(()=>{xC(r.remoteStore,i),Rv(r,i)}).catch(np))}}),lP.apply(this,arguments)}function cP(n){const t=at(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Qj.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=l9.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=n9.bind(null,t),t.Zu.Go=qY.bind(null,t.eventManager),t.Zu.lc=zY.bind(null,t.eventManager),t}function uP(n){const t=at(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=r9.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=i9.bind(null,t),t}class rH{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Te.Z)(function*(){e.wt=AC(t.databaseInfo.databaseId),e.sharedClientState=e.dc(t),e.persistence=e._c(t),yield e.persistence.start(),e.localStore=e.wc(t),e.gcScheduler=e.mc(t,e.localStore),e.indexBackfillerScheduler=e.gc(t,e.localStore)})()}mc(t,e){return null}gc(t,e){return null}wc(t){return Ij(this.persistence,new Sj,t.initialUser,this.wt)}_c(t){return new Ej(iI.Os,this.wt)}dc(t){return new Fj}terminate(){var t=this;return(0,Te.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class iH extends rH{constructor(t,e,r){super(),this.yc=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield e().call(r,t),yield r.yc.initialize(r,t),yield uP(r.yc.syncEngine),yield Iv(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(t){return Ij(this.persistence,new Sj,t.initialUser,this.wt)}mc(t,e){return new oY(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}gc(t,e){const r=new $K(e,this.persistence);return new HK(t.asyncQueue,r)}_c(t){const e=sM(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?jo.withCacheSize(this.cacheSizeBytes):jo.DEFAULT;return new iM(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,Uj(),cI(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(t){return new Fj}}class _9 extends iH{constructor(t,e){super(t,e,!1),this.yc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield e().call(r,t);const i=r.yc.syncEngine;r.sharedClientState instanceof pM&&(r.sharedClientState.syncEngine={kr:d9.bind(null,i),Mr:p9.bind(null,i),Or:g9.bind(null,i),Ri:f9.bind(null,i),Nr:u9.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var o=(0,Te.Z)(function*(c){yield function h9(n,t){return sP.apply(this,arguments)}(r.yc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return o.apply(this,arguments)}}())})()}dc(t){const e=Uj();if(!pM.V(e))throw new Be(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=sM(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new pM(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class dP{initialize(t,e){var r=this;return(0,Te.Z)(function*(){r.localStore||(r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(e),r.remoteStore=r.createRemoteStore(e),r.eventManager=r.createEventManager(e),r.syncEngine=r.createSyncEngine(e,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Xj(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=a9.bind(null,r.syncEngine),yield kM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(t){return new ZY}createDatastore(t){const e=AC(t.databaseInfo.databaseId),r=new NY(t.databaseInfo);return new RY(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return e=this.localStore,r=this.datastore,i=t.asyncQueue,o=d=>Xj(this.syncEngine,d,0),c=Lj.V()?new Lj:new SY,new MY(e,r,i,o,c);var e,r,i,o,c}createSyncEngine(t,e){return function(r,i,o,c,d,f,y){const w=new QY(r,i,o,c,d,f);return y&&(w.ac=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Te.Z)(function*(e){const r=at(e);Ze("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Sv(r),r.du.shutdown(),r._u.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function sH(n,t=10240){let e=0;return{read:()=>(0,Te.Z)(function*(){if(e<n.byteLength){const r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})(),cancel:()=>(0,Te.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class hI{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ic(this.observer.next,t)}error(t){this.observer.error?this.Ic(this.observer.error,t):fi("Uncaught Error in snapshot listener:",t)}Tc(){this.muted=!0}Ic(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class y9{constructor(t,e){this.Ec=t,this.wt=e,this.metadata=new es,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var t=this;return(0,Te.Z)(function*(){return t.metadata.promise})()}fc(){var t=this;return(0,Te.Z)(function*(){return yield t.getMetadata(),t.Rc()})()}Rc(){var t=this;return(0,Te.Z)(function*(){const e=yield t.bc();if(null===e)return null;const r=t.Ac.decode(e),i=Number(r);isNaN(i)&&t.Pc(`length string (${r}) is not valid number`);const o=yield t.vc(i);return new WY(JSON.parse(o),e.length+i)})()}Vc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}bc(){var t=this;return(0,Te.Z)(function*(){for(;t.Vc()<0&&!(yield t.Sc()););if(0===t.buffer.length)return null;const e=t.Vc();e<0&&t.Pc("Reached the end of bundle when a length string is expected.");const r=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),r})()}vc(t){var e=this;return(0,Te.Z)(function*(){for(;e.buffer.length<t;)(yield e.Sc())&&e.Pc("Reached the end of bundle when more is expected.");const r=e.Ac.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),r})()}Pc(t){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${t}`)}Sc(){var t=this;return(0,Te.Z)(function*(){const e=yield t.Ec.read();if(!e.done){const r=new Uint8Array(t.buffer.length+e.value.length);r.set(t.buffer),r.set(e.value,t.buffer.length),t.buffer=r}return e.done})()}}class v9{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Te.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Be(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Te.Z)(function*(o,c){const d=at(o),f=yC(d.wt)+"/documents",y={documents:c.map(k=>_C(d.wt,k))},w=yield d.ao("BatchGetDocuments",f,y,c.length),E=new Map;w.forEach(k=>{const M=function C7(n,t){return"found"in t?function(e,r){Gt(!!r.found);const i=Mu(e,r.found.name),o=ts(r.found.updateTime),c=new ys({mapValue:{fields:r.found.fields}});return er.newFoundDocument(i,o,c)}(n,t):"missing"in t?function(e,r){Gt(!!r.missing),Gt(!!r.readTime);const i=Mu(e,r.missing),o=ts(r.readTime);return er.newNoDocument(i,o)}(n,t):pt()}(d.wt,k);E.set(M.key.toString(),M)});const A=[];return c.forEach(k=>{const M=E.get(k.toString());Gt(!!M),A.push(M)}),A}),function(o,c){return i.apply(this,arguments)})(e.datastore,t);var i;return r.forEach(i=>e.recordVersion(i)),r})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new vv(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Te.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var r;t.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,i)=>{const o=it.fromPath(i);t.mutations.push(new ZO(o,t.precondition(o)))}),yield(r=(0,Te.Z)(function*(i,o){const c=at(i),d=yC(c.wt)+"/documents",f={writes:o.map(y=>vC(c.wt,y))};yield c.ro("Commit",d,f)}),function(i,o){return r.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw pt();e=Ht.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new Be(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Br.updateTime(e):Br.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Ht.min()))throw new Be(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Br.updateTime(e)}return Br.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class b9{constructor(t,e,r,i,o){this.asyncQueue=t,this.datastore=e,this.options=r,this.updateFunction=i,this.deferred=o,this.Dc=r.maxAttempts,this.So=new gM(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var t=this;this.So.Io((0,Te.Z)(function*(){const e=new v9(t.datastore),r=t.xc(e);r&&r.then(i=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(i)}).catch(o=>{t.Nc(o)}))}).catch(i=>{t.Nc(i)})}))}xc(t){try{const e=this.updateFunction(t);return!rC(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Nc(t){this.Dc>0&&this.kc(t)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(t)}kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!A3(e)}return!1}}class w9{constructor(t,e,r,i){var o=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=Xi.UNAUTHENTICATED,this.clientId=UV.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Te.Z)(function*(d){Ze("FirestoreClient","Received user=",d.uid),yield o.authCredentialListener(d),o.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ze("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,Te.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Be(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=Nv(r,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}function oH(n,t){return hP.apply(this,arguments)}function hP(){return hP=(0,Te.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Ze("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(function(){var i=(0,Te.Z)(function*(o){r.isEqual(o)||(yield Aj(t.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),hP.apply(this,arguments)}function aH(n,t){return fP.apply(this,arguments)}function fP(){return fP=(0,Te.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield pP(n);Ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield t.initialize(e,r),n.setCredentialChangeListener(i=>Zj(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>Zj(t.remoteStore,o)),n.onlineComponents=t}),fP.apply(this,arguments)}function pP(n){return gP.apply(this,arguments)}function gP(){return gP=(0,Te.Z)(function*(n){return n.offlineComponents||(Ze("FirestoreClient","Using default OfflineComponentProvider"),yield oH(n,new rH)),n.offlineComponents}),gP.apply(this,arguments)}function fI(n){return mP.apply(this,arguments)}function mP(){return mP=(0,Te.Z)(function*(n){return n.onlineComponents||(Ze("FirestoreClient","Using default OnlineComponentProvider"),yield aH(n,new dP)),n.onlineComponents}),mP.apply(this,arguments)}function lH(n){return pP(n).then(t=>t.persistence)}function pI(n){return pP(n).then(t=>t.localStore)}function cH(n){return fI(n).then(t=>t.remoteStore)}function _P(n){return fI(n).then(t=>t.syncEngine)}function Ov(n){return yP.apply(this,arguments)}function yP(){return yP=(0,Te.Z)(function*(n){const t=yield fI(n),e=t.eventManager;return e.onListen=XY.bind(null,t.syncEngine),e.onUnlisten=e9.bind(null,t.syncEngine),e}),yP.apply(this,arguments)}function uH(n,t,e={}){const r=new es;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,o,c,d,f){const y=new hI({next:E=>{o.enqueueAndForget(()=>FM(i,w));const A=E.docs.has(c);!A&&E.fromCache?f.reject(new Be(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&d&&"server"===d.source?f.reject(new Be(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),w=new BM(pv(c.path),y,{includeMetadataChanges:!0,Du:!0});return MM(i,w)}(yield Ov(n),n.asyncQueue,t,e,r)})),r.promise}function dH(n,t,e={}){const r=new es;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,o,c,d,f){const y=new hI({next:E=>{o.enqueueAndForget(()=>FM(i,w)),E.fromCache&&"server"===d.source?f.reject(new Be(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),w=new BM(c,y,{includeMetadataChanges:!0,Du:!0});return MM(i,w)}(yield Ov(n),n.asyncQueue,t,e,r)})),r.promise}const hH=new Map;function vP(n,t,e){if(!e)throw new Be(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function fH(n,t,e,r){if(!0===t&&!0===r)throw new Be(ge.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function pH(n){if(!it.isDocumentKey(n))throw new Be(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gH(n){if(it.isDocumentKey(n))throw new Be(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":pt()}function pn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Be(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=gI(n);throw new Be(ge.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function mH(n,t){if(t<=0)throw new Be(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class _H{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Be(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Be(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,fH("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class kC{constructor(t,e,r){this._authCredentials=e,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _H({}),this._settingsFrozen=!1,t instanceof hh?this._databaseId=t:(this._app=t,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Be(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hh(i.options.projectId)}(t))}get app(){if(!this._app)throw new Be(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Be(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _H(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new xK;switch(e.type){case"gapi":const r=e.client;return Gt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new MK(r,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Be(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=hH.get(t);e&&(Ze("ComponentProvider","Removing Datastore"),hH.delete(t),e.terminate())}(this),Promise.resolve()}}class fr{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new fr(this.firestore,t,this._key)}}class Ps{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ps(this.firestore,t,this._query)}}class Fu extends Ps{constructor(t,e,r){super(t,e,pv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new fr(this.firestore,null,new it(t))}withConverter(t){return new Fu(this.firestore,t,this._path)}}function yH(n,t,...e){if(n=(0,F.m9)(n),vP("collection","path",t),n instanceof kC){const r=mn.fromString(t,...e);return gH(r),new Fu(n,null,r)}{if(!(n instanceof fr||n instanceof Fu))throw new Be(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(t,...e));return gH(r),new Fu(n.firestore,null,r)}}function mI(n,t,...e){if(n=(0,F.m9)(n),1===arguments.length&&(t=UV.I()),vP("doc","path",t),n instanceof kC){const r=mn.fromString(t,...e);return pH(r),new fr(n,null,new it(r))}{if(!(n instanceof fr||n instanceof Fu))throw new Be(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(t,...e));return pH(r),new fr(n.firestore,n instanceof Fu?n.converter:null,new it(r))}}function vH(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),(n instanceof fr||n instanceof Fu)&&(t instanceof fr||t instanceof Fu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function bH(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),n instanceof Ps&&t instanceof Ps&&n.firestore===t.firestore&&cC(n._query,t._query)&&n.converter===t.converter}class R9{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new gM(this,"async_queue_retry"),this.Kc=()=>{const e=cI();e&&Ze("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()};const t=cI();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Gc(),this.Qc(t)}enterRestrictedMode(t){if(!this.Fc){this.Fc=!0,this.Uc=t||!1;const e=cI();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Kc)}}enqueue(t){if(this.Gc(),this.Fc)return new Promise(()=>{});const e=new es;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Oc.push(t),this.jc()))}jc(){var t=this;return(0,Te.Z)(function*(){if(0!==t.Oc.length){try{yield t.Oc[0](),t.Oc.shift(),t.So.reset()}catch(e){if(!rp(e))throw e;Ze("AsyncQueue","Operation failed with retryable error: "+e)}t.Oc.length>0&&t.So.Io(()=>t.jc())}})()}Qc(t){const e=this.Mc.then(()=>(this.Lc=!0,t().catch(r=>{throw this.Bc=r,this.Lc=!1,fi("INTERNAL UNHANDLED ERROR: ",function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),c}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=e,e}enqueueAfterDelay(t,e,r){this.Gc(),this.qc.indexOf(t)>-1&&(e=0);const i=OM.createAndSchedule(this,t,e,r,o=>this.Wc(o));return this.$c.push(i),i}Gc(){this.Bc&&pt()}verifyOperationInProgress(){}zc(){var t=this;return(0,Te.Z)(function*(){let e;do{e=t.Mc,yield e}while(e!==t.Mc)})()}Hc(t){for(const e of this.$c)if(e.timerId===t)return!0;return!1}Jc(t){return this.zc().then(()=>{this.$c.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.$c)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.zc()})}Yc(t){this.qc.push(t)}Wc(t){const e=this.$c.indexOf(t);this.$c.splice(e,1)}}function bP(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const r=t;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class O9{constructor(){this._progressObserver={},this._taskCompletionResolver=new es,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Ar extends kC{constructor(t,e,r){super(t,e,r),this.type="firestore",this._queue=new R9,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||wH(this),this._firestoreClient.terminate()}}function Di(n){return n._firestoreClient||wH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wH(n){var t;const e=n._freezeSettings(),r=(o=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new qK(n._databaseId,o,n._persistenceKey,(d=e).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var o,d;n._firestoreClient=new w9(n._authCredentials,n._appCheckCredentials,n._queue,r)}function CH(n,t,e){const r=new es;return n.asyncQueue.enqueue((0,Te.Z)(function*(){try{yield oH(n,e),yield aH(n,t),r.resolve()}catch(i){const o=i;if(!("FirebaseError"===(c=o).name?c.code===ge.FAILED_PRECONDITION||c.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw o;mm("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var c})).then(()=>r.promise)}function TH(n){if(n._initialized||n._terminated)throw new Be(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class mh{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Be(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Lu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Lu(Vi.fromBase64String(t))}catch(e){throw new Be(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Lu(Vi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Mm{constructor(t){this._methodName=t}}class _I{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Be(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Be(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Wt(this._lat,t._lat)||Wt(this._long,t._long)}}const $9=/^__.*__$/;class G9{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return null!==this.fieldMask?new ph(t,this.data,this.fieldMask,e,this.fieldTransforms):new yv(t,this.data,e,this.fieldTransforms)}}class EH{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new ph(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function DH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class yI{constructor(t,e,r,i,o,c){this.settings=t,this.databaseId=e,this.wt=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Xc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(t){return new yI(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ta({path:r,na:!1});return i.sa(t),i}ia(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(t){return this.ta({path:void 0,na:!0})}oa(t){return wI(t,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Xc(){if(this.path)for(let t=0;t<this.path.length;t++)this.sa(this.path.get(t))}sa(t){if(0===t.length)throw this.oa("Document fields must not be empty");if(DH(this.Zc)&&$9.test(t))throw this.oa('Document fields cannot begin and end with "__"')}}class Z9{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.wt=r||AC(t)}aa(t,e,r,i=!1){return new yI({Zc:t,methodName:e,ca:r,path:Kr.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Pm(n){const t=n._freezeSettings(),e=AC(n._databaseId);return new Z9(n._databaseId,!!t.ignoreUndefinedProperties,e)}function vI(n,t,e,r,i,o={}){const c=n.aa(o.merge||o.mergeFields?2:0,t,e,i);EP("Data must be an object, but it was:",c,r);const d=AH(r,c);let f,y;if(o.merge)f=new Sa(c.fieldMask),y=c.fieldTransforms;else if(o.mergeFields){const w=[];for(const E of o.mergeFields){const A=DP(t,E,e);if(!c.contains(A))throw new Be(ge.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);xH(w,A)||w.push(A)}f=new Sa(w),y=c.fieldTransforms.filter(E=>f.covers(E.field))}else f=null,y=c.fieldTransforms;return new G9(new ys(d),f,y)}class RC extends Mm{_toFieldTransform(t){if(2!==t.Zc)throw t.oa(1===t.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof RC}}function SH(n,t,e){return new yI({Zc:3,ca:t.settings.ca,methodName:n._methodName,na:e},t.databaseId,t.wt,t.ignoreUndefinedProperties)}class wP extends Mm{_toFieldTransform(t){return new uC(t.path,new mv)}isEqual(t){return t instanceof wP}}class q9 extends Mm{constructor(t,e){super(t),this.ha=e}_toFieldTransform(t){const e=SH(this,t,!0),r=this.ha.map(o=>Fm(o,e)),i=new Em(r);return new uC(t.path,i)}isEqual(t){return this===t}}class z9 extends Mm{constructor(t,e){super(t),this.ha=e}_toFieldTransform(t){const e=SH(this,t,!0),r=this.ha.map(o=>Fm(o,e)),i=new Dm(r);return new uC(t.path,i)}isEqual(t){return this===t}}class W9 extends Mm{constructor(t,e){super(t),this.la=e}_toFieldTransform(t){const e=new _v(t.wt,_3(t.wt,this.la));return new uC(t.path,e)}isEqual(t){return this===t}}function CP(n,t,e,r){const i=n.aa(1,t,e);EP("Data must be an object, but it was:",i,r);const o=[],c=ys.empty();vm(r,(f,y)=>{const w=bI(t,f,e);y=(0,F.m9)(y);const E=i.ia(w);if(y instanceof RC)o.push(w);else{const A=Fm(y,E);null!=A&&(o.push(w),c.set(w,A))}});const d=new Sa(o);return new EH(c,d,i.fieldTransforms)}function TP(n,t,e,r,i,o){const c=n.aa(1,t,e),d=[DP(t,r,e)],f=[i];if(o.length%2!=0)throw new Be(ge.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<o.length;A+=2)d.push(DP(t,o[A])),f.push(o[A+1]);const y=[],w=ys.empty();for(let A=d.length-1;A>=0;--A)if(!xH(y,d[A])){const k=d[A];let M=f[A];M=(0,F.m9)(M);const V=c.ia(k);if(M instanceof RC)y.push(k);else{const W=Fm(M,V);null!=W&&(y.push(k),w.set(k,W))}}const E=new Sa(y);return new EH(w,E,c.fieldTransforms)}function IH(n,t,e,r=!1){return Fm(e,n.aa(r?4:3,t))}function Fm(n,t){if(NH(n=(0,F.m9)(n)))return EP("Unsupported field value:",t,n),AH(n,t);if(n instanceof Mm)return function(e,r){if(!DH(r.Zc))throw r.oa(`${e._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${e._methodName}() is not currently supported inside arrays`);const i=e._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,r){const i=[];let o=0;for(const c of e){let d=Fm(c,r.ra(o));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}}(n,t)}return function(e,r){if(null===(e=(0,F.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return _3(r.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const i=Ir.fromDate(e);return{timestampValue:mC(r.wt,i)}}if(e instanceof Ir){const i=new Ir(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:mC(r.wt,i)}}if(e instanceof _I)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Lu)return{bytesValue:U3(r.wt,e._byteString)};if(e instanceof fr){const i=r.databaseId,o=e.firestore._databaseId;if(!o.isEqual(i))throw r.oa(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:qO(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r.oa(`Unsupported field value: ${gI(e)}`)}(n,t)}function AH(n,t){const e={};return qV(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vm(n,(r,i)=>{const o=Fm(i,t.ea(r));null!=o&&(e[r]=o)}),{mapValue:{fields:e}}}function NH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ir||n instanceof _I||n instanceof Lu||n instanceof fr||n instanceof Mm)}function EP(n,t,e){if(!NH(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=gI(e);throw t.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function DP(n,t,e){if((t=(0,F.m9)(t))instanceof mh)return t._internalPath;if("string"==typeof t)return bI(n,t);throw wI("Field path arguments must be of type string or ",n,!1,void 0,e)}const K9=new RegExp("[~\\*/\\[\\]]");function bI(n,t,e){if(t.search(K9)>=0)throw wI(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new mh(...t.split("."))._internalPath}catch{throw wI(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function wI(n,t,e,r,i){const o=r&&!r.isEmpty(),c=void 0!==i;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(o||c)&&(f+=" (found",o&&(f+=` in field ${r}`),c&&(f+=` in document ${i}`),f+=")"),new Be(ge.INVALID_ARGUMENT,d+n+f)}function xH(n,t){return n.some(e=>e.isEqual(t))}class OC{constructor(t,e,r,i,o){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new fr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Y9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(CI("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Y9 extends OC{data(){return super.data()}}function CI(n,t){return"string"==typeof t?bI(n,t):t instanceof mh?t._internalPath:t._delegate._internalPath}class Lm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class _h extends OC{constructor(t,e,r,i,o,c){super(t,e,r,i,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new MC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(CI("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class MC extends _h{data(t={}){return super.data(t)}}class pp{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Lm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new MC(this._firestore,this._userDataWriter,r.key,r,new Lm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Be(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new MC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Lm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const d=new MC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Lm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,y=-1;return 0!==c.type&&(f=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),1!==c.type&&(o=o.add(c.doc),y=o.indexOf(c.doc.key)),{type:J9(c.type),doc:d,oldIndex:f,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function J9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}function kH(n,t){return n instanceof _h&&t instanceof _h?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof pp&&t instanceof pp&&n._firestore===t._firestore&&bH(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function RH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Be(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PC{}function gp(n,...t){for(const e of t)n=e._apply(n);return n}class Q9 extends PC{constructor(t,e,r){super(),this.fa=t,this.da=e,this._a=r,this.type="where"}_apply(t){const e=Pm(t.firestore),r=function(i,o,c,d,f,y,w){let E;if(f.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Be(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){UH(w,y);const k=[];for(const M of w)k.push(LH(d,i,M));E={arrayValue:{values:k}}}else E=LH(d,i,w)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||UH(w,y),E=IH(c,"where",w,"in"===y||"not-in"===y);const A=vs.create(f,y,E);return function(k,M){if(M.ht()){const W=jO(k);if(null!==W&&!W.isEqual(M.field))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${W.toString()}' and '${M.field.toString()}'`);const ne=VO(k);null!==ne&&BH(0,M.field,ne)}const V=function(W,ne){for(const he of W.filters)if(ne.indexOf(he.op)>=0)return he.op;return null}(k,function(W){switch(W){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(M.op));if(null!==V)throw new Be(ge.INVALID_ARGUMENT,V===M.op?`Invalid query. You cannot use more than one '${M.op.toString()}' filter.`:`Invalid query. You cannot use '${M.op.toString()}' filters with '${V.toString()}' filters.`)}(i,A),A}(t._query,0,e,t.firestore._databaseId,this.fa,this.da,this._a);return new Ps(t.firestore,t.converter,function(i,o){const c=i.filters.concat([o]);return new fh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}class eJ extends PC{constructor(t,e){super(),this.fa=t,this.wa=e,this.type="orderBy"}_apply(t){const e=function(r,i,o){if(null!==r.startAt)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new fv(i,o);return function(d,f){if(null===VO(d)){const y=jO(d);null!==y&&BH(0,y,f.field)}}(r,c),c}(t._query,this.fa,this.wa);return new Ps(t.firestore,t.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new fh(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class OH extends PC{constructor(t,e,r){super(),this.type=t,this.ma=e,this.ga=r}_apply(t){return new Ps(t.firestore,t.converter,GS(t._query,this.ma,this.ga))}}class MH extends PC{constructor(t,e,r){super(),this.type=t,this.ya=e,this.pa=r}_apply(t){const e=FH(t,this.type,this.ya,this.pa);return new Ps(t.firestore,t.converter,(i=e,new fh((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class PH extends PC{constructor(t,e,r){super(),this.type=t,this.ya=e,this.pa=r}_apply(t){const e=FH(t,this.type,this.ya,this.pa);return new Ps(t.firestore,t.converter,(i=e,new fh((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function FH(n,t,e,r){if(e[0]=(0,F.m9)(e[0]),e[0]instanceof OC)return function(i,o,c,d,f){if(!d)throw new Be(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const w of gv(i))if(w.field.isKeyField())y.push(Cm(o,d.key));else{const E=d.data.field(w.field);if(LO(E))throw new Be(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===E){const A=w.field.canonicalString();throw new Be(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(E)}return new ap(y,f)}(n._query,n.firestore._databaseId,t,e[0]._document,r);{const i=Pm(n.firestore);return function(o,c,d,f,y,w){const E=o.explicitOrderBy;if(y.length>E.length)throw new Be(ge.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let k=0;k<y.length;k++){const M=y[k];if(E[k].field.isKeyField()){if("string"!=typeof M)throw new Be(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof M}`);if(!HO(o)&&-1!==M.indexOf("/"))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${M}' contains a slash.`);const V=o.path.child(mn.fromString(M));if(!it.isDocumentKey(V))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const W=new it(V);A.push(Cm(c,W))}else{const V=IH(d,f,M);A.push(V)}}return new ap(A,w)}(n._query,n.firestore._databaseId,i,t,e,r)}}function LH(n,t,e){if("string"==typeof(e=(0,F.m9)(e))){if(""===e)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HO(t)&&-1!==e.indexOf("/"))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(mn.fromString(e));if(!it.isDocumentKey(r))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cm(n,new it(r))}if(e instanceof fr)return Cm(n,e._key);throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gI(e)}.`)}function UH(n,t){if(!Array.isArray(n)||0===n.length)throw new Be(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Be(ge.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function BH(n,t,e){if(!e.isEqual(t))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}const lJ={maxAttempts:5};class SP{convertValue(t,e="none"){switch(wm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Jr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(bm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw pt()}}convertObject(t,e){const r={};return vm(t.fields,(i,o)=>{r[i]=this.convertValue(o,e)}),r}convertGeoPoint(t){return new _I(Jr(t.latitude),Jr(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=WV(t);return null==r?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(nC(t));default:return null}}convertTimestamp(t){const e=ip(t);return new Ir(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=mn.fromString(t);Gt(W3(r));const i=new hh(r.get(1),r.get(3)),o=new it(r.popFirst(5));return i.isEqual(e)||fi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}function TI(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class cJ extends SP{constructor(t){super(),this.firestore=t}convertBytes(t){return new Lu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new fr(this.firestore,null,e)}}class VH{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Pm(t)}set(t,e,r){this._verifyNotCommitted();const i=mp(t,this._firestore),o=TI(i.converter,e,r),c=vI(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Br.none())),this}update(t,e,r,...i){this._verifyNotCommitted();const o=mp(t,this._firestore);let c;return c="string"==typeof(e=(0,F.m9)(e))||e instanceof mh?TP(this._dataReader,"WriteBatch.update",o._key,e,r,i):CP(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(c.toMutation(o._key,Br.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=mp(t,this._firestore);return this._mutations=this._mutations.concat(new vv(e._key,Br.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mp(n,t){if((n=(0,F.m9)(n)).firestore!==t)throw new Be(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Um extends SP{constructor(t){super(),this.firestore=t}convertBytes(t){return new Lu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new fr(this.firestore,null,e)}}function jH(n,t,e){n=pn(n,fr);const r=pn(n.firestore,Ar),i=TI(n.converter,t,e);return Mv(r,[vI(Pm(r),"setDoc",n._key,i,null!==n.converter,e).toMutation(n._key,Br.none())])}function HH(n,t,e,...r){n=pn(n,fr);const i=pn(n.firestore,Ar),o=Pm(i);let c;return c="string"==typeof(t=(0,F.m9)(t))||t instanceof mh?TP(o,"updateDoc",n._key,t,e,r):CP(o,"updateDoc",n._key,t),Mv(i,[c.toMutation(n._key,Br.exists(!0))])}function $H(n,...t){var e,r,i;n=(0,F.m9)(n);let o={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||bP(t[c])||(o=t[c],c++);const d={includeMetadataChanges:o.includeMetadataChanges};if(bP(t[c])){const E=t[c];t[c]=null===(e=E.next)||void 0===e?void 0:e.bind(E),t[c+1]=null===(r=E.error)||void 0===r?void 0:r.bind(E),t[c+2]=null===(i=E.complete)||void 0===i?void 0:i.bind(E)}let f,y,w;if(n instanceof fr)y=pn(n.firestore,Ar),w=pv(n._key.path),f={next:E=>{t[c]&&t[c](IP(y,n,E))},error:t[c+1],complete:t[c+2]};else{const E=pn(n,Ps);y=pn(E.firestore,Ar),w=E._query;const A=new Um(y);f={next:k=>{t[c]&&t[c](new pp(y,A,E,k))},error:t[c+1],complete:t[c+2]},RH(n._query)}return function(E,A,k,M){const V=new hI(M),W=new BM(A,V,k);return E.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return MM(yield Ov(E),W)})),()=>{V.Tc(),E.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return FM(yield Ov(E),W)}))}}(Di(y),w,d,f)}function Mv(n,t){return function(e,r){const i=new es;return e.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function t9(n,t,e){return GM.apply(this,arguments)}(yield _P(e),r,i)})),i.promise}(Di(n),t)}function IP(n,t,e){const r=e.docs.get(t._key),i=new Um(n);return new _h(n,i,t._key,r,new Lm(e.hasPendingWrites,e.fromCache),t.converter)}class vJ extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Pm(t)}get(t){const e=mp(t,this._firestore),r=new cJ(this._firestore);return this._transaction.lookup([e._key]).then(i=>{if(!i||1!==i.length)return pt();const o=i[0];if(o.isFoundDocument())return new OC(this._firestore,r,o.key,o,e.converter);if(o.isNoDocument())return new OC(this._firestore,r,e._key,null,e.converter);throw pt()})}set(t,e,r){const i=mp(t,this._firestore),o=TI(i.converter,e,r),c=vI(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(t,e,r,...i){const o=mp(t,this._firestore);let c;return c="string"==typeof(e=(0,F.m9)(e))||e instanceof mh?TP(this._dataReader,"Transaction.update",o._key,e,r,i):CP(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,c),this}delete(t){const e=mp(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=mp(t,this._firestore),r=new Um(this._firestore);return super.get(t).then(i=>new _h(this._firestore,r,e._key,i._document,new Lm(!1,!1),e.converter))}}!function(n,t=!0){cv=so.SDK_VERSION,(0,so._registerComponent)(new yc.wA("firestore",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),o=new Ar(i,new RK(e.getProvider("auth-internal")),new PK(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o},"PUBLIC")),(0,so.registerVersion)(PV,"3.4.14",n),(0,so.registerVersion)(PV,"3.4.14","esm2017")}();function AP(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function ZH(){if(typeof Uint8Array>"u")throw new Be("unimplemented","Uint8Arrays are not available in this environment.")}function qH(){if(!function GK(){return typeof atob<"u"}())throw new Be("unimplemented","Blobs are unavailable in Firestore in this environment.")}class FC{constructor(t){this._delegate=t}static fromBase64String(t){return qH(),new FC(Lu.fromBase64String(t))}static fromUint8Array(t){return ZH(),new FC(Lu.fromUint8Array(t))}toBase64(){return qH(),this._delegate.toBase64()}toUint8Array(){return ZH(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function NP(n){return function AJ(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(n,["next","error","complete"])}class NJ{enableIndexedDbPersistence(t,e){return function P9(n,t){TH(n=pn(n,Ar));const e=Di(n),r=n._freezeSettings(),i=new dP;return CH(e,i,new iH(i,r.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function F9(n){TH(n=pn(n,Ar));const t=Di(n),e=n._freezeSettings(),r=new dP;return CH(t,r,new _9(r,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function L9(n){if(n._initialized&&!n._terminated)throw new Be(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new es;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{yield(e=(0,Te.Z)(function*(r){if(!bc.V())return Promise.resolve();const i=r+"main";yield bc.delete(i)}),function(r){return e.apply(this,arguments)})(sM(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class zH{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof hh||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&mm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,r={}){!function x9(n,t,e,r={}){var i;const o=(n=pn(n,kC))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&mm("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${t}:${e}`,ssl:!1})),r.mockUserToken){let c,d;if("string"==typeof r.mockUserToken)c=r.mockUserToken,d=Xi.MOCK_USER;else{c=(0,F.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Be(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Xi(f)}n._authCredentials=new kK(new FV(c,d))}}(this._delegate,t,e,r)}enableNetwork(){return function B9(n){return function C9(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const t=yield lH(n),e=yield cH(n);return t.setNetworkEnabled(!0),function(r){const i=at(r);return i.lu.delete(0),NC(i)}(e)}))}(Di(n=pn(n,Ar)))}(this._delegate)}disableNetwork(){return function V9(n){return function T9(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const t=yield lH(n),e=yield cH(n);return t.setNetworkEnabled(!1),(r=(0,Te.Z)(function*(i){const o=at(i);o.lu.add(0),yield Sv(o),o._u.set("Offline")}),function(i){return r.apply(this,arguments)})(e);var r}))}(Di(n=pn(n,Ar)))}(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,fH("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function U9(n){return function(t){const e=new es;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function s9(n,t){return KM.apply(this,arguments)}(yield _P(t),e)})),e.promise}(Di(n=pn(n,Ar)))}(this._delegate)}onSnapshotsInSync(t){return function yJ(n,t){return function S9(n,t){const e=new hI(t);return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield Ov(n),i=e,at(r).Tu.add(i),void i.next();var r,i})),()=>{e.Tc(),n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield Ov(n),i=e,void at(r).Tu.delete(i);var r,i}))}}(Di(n=pn(n,Ar)),bP(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Pv(this,yH(this._delegate,t))}catch(e){throw uo(e,"collection()","Firestore.collection()")}}doc(t){try{return new _l(this,mI(this._delegate,t))}catch(e){throw uo(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new ho(this,function k9(n,t){if(n=pn(n,kC),vP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Be(ge.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ps(n,null,(e=t,new fh(mn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw uo(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function bJ(n,t,e){n=pn(n,Ar);const r=Object.assign(Object.assign({},lJ),e);return function(i){if(i.maxAttempts<1)throw new Be(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function I9(n,t,e){const r=new es;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){const i=yield(o=n,fI(o).then(c=>c.datastore));var o;new b9(n.asyncQueue,i,e,t,r).run()})),r.promise}(Di(n),i=>t(new vJ(n,i)),r)}(this._delegate,e=>t(new WH(this,e)))}batch(){return Di(this._delegate),new KH(new VH(this._delegate,t=>Mv(this._delegate,t)))}loadBundle(t){return function j9(n,t){const e=Di(n=pn(n,Ar)),r=new O9;return function A9(n,t,e,r){const i=function(o,c){let d;return d="string"==typeof o?(new TextEncoder).encode(o):o,f=function(f,y){if(f instanceof Uint8Array)return sH(f,y);if(f instanceof ArrayBuffer)return sH(new Uint8Array(f),y);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new y9(f,c);var f}(e,AC(t));n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){!function m9(n,t,e){const r=at(n);var i;(i=(0,Te.Z)(function*(o,c,d){try{const f=yield c.getMetadata();if(yield function(A,k){const M=at(A),V=ts(k.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",W=>M.Ds.getBundleMetadata(W,k.id)).then(W=>!!W&&W.createTime.compareTo(V)>=0)}(o.localStore,f))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(A=f).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);d._updateProgress(Wj(f));const y=new KY(f,o.localStore,c.wt);let w=yield c.fc();for(;w;){const A=yield y.Nu(w);A&&d._updateProgress(A),w=yield c.fc()}const E=yield y.complete();return yield gh(o,E.Ou,void 0),yield function(A,k){const M=at(A);return M.persistence.runTransaction("Save bundle","readwrite",V=>M.Ds.saveBundleMetadata(V,k))}(o.localStore,f),d._completeWith(E.progress),Promise.resolve(E.Mu)}catch(f){return mm("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var A}),function(o,c,d){return i.apply(this,arguments)})(r,t,e).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield _P(n),i,r)}))}(e,n._databaseId,t,r),r}(this._delegate,t)}namedQuery(t){return function H9(n,t){return function N9(n,t){return n.asyncQueue.enqueue((0,Te.Z)(function*(){return function(e,r){const i=at(e);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ds.getNamedQuery(o,r))}(yield pI(n),t)}))}(Di(n=pn(n,Ar)),t).then(e=>e?new Ps(n,null,e.query):null)}(this._delegate,t).then(e=>e?new ho(this,e):null)}}class EI extends SP{constructor(t){super(),this.firestore=t}convertBytes(t){return new FC(new Lu(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return _l.forKey(e,this.firestore,null)}}class WH{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new EI(t)}get(t){const e=Vm(t);return this._delegate.get(e).then(r=>new LC(this._firestore,new _h(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const i=Vm(t);return r?(AP("Transaction.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const o=Vm(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,r,...i),this}delete(t){const e=Vm(t);return this._delegate.delete(e),this}}class KH{constructor(t){this._delegate=t}set(t,e,r){const i=Vm(t);return r?(AP("WriteBatch.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const o=Vm(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,r,...i),this}delete(t){const e=Vm(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Bm{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new MC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new UC(this._firestore,r),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=Bm.INSTANCES;let i=r.get(t);i||(i=new WeakMap,r.set(t,i));let o=i.get(e);return o||(o=new Bm(t,new EI(t),e),i.set(e,o)),o}}Bm.INSTANCES=new WeakMap;class _l{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new EI(t)}static forPath(t,e,r){if(t.length%2!=0)throw new Be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new _l(e,new fr(e._delegate,r,new it(t)))}static forKey(t,e,r){return new _l(e,new fr(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new Pv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Pv(this.firestore,yH(this._delegate,t))}catch(e){throw uo(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,F.m9)(t))instanceof fr&&vH(this._delegate,t)}set(t,e){e=AP("DocumentReference.set",e);try{return e?jH(this._delegate,t,e):jH(this._delegate,t)}catch(r){throw uo(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return 1===arguments.length?HH(this._delegate,t):HH(this._delegate,t,e,...r)}catch(i){throw uo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function mJ(n){return Mv(pn(n.firestore,Ar),[new vv(n._key,Br.none())])}(this._delegate)}onSnapshot(...t){const e=YH(t),r=JH(t,i=>new LC(this.firestore,new _h(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return $H(this._delegate,e,r)}get(t){let e;return e="cache"===t?.source?function dJ(n){n=pn(n,fr);const t=pn(n.firestore,Ar),e=Di(t),r=new Um(t);return function E9(n,t){const e=new es;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,o,c){try{const d=yield function(f,y){const w=at(f);return w.persistence.runTransaction("read document","readonly",E=>w.localDocuments.getDocument(E,y))}(i,o);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new Be(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=Nv(d,`Failed to get document '${o} from cache`);c.reject(f)}}),function(i,o,c){return r.apply(this,arguments)})(yield pI(n),t,e);var r})),e.promise}(e,n._key).then(i=>new _h(t,r,n._key,i,new Lm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function hJ(n){n=pn(n,fr);const t=pn(n.firestore,Ar);return uH(Di(t),n._key,{source:"server"}).then(e=>IP(t,n,e))}(this._delegate):function uJ(n){n=pn(n,fr);const t=pn(n.firestore,Ar);return uH(Di(t),n._key).then(e=>IP(t,n,e))}(this._delegate),e.then(r=>new LC(this.firestore,new _h(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new _l(this.firestore,this._delegate.withConverter(t?Bm.getInstance(this.firestore,t):null))}}function uo(n,t,e){return n.message=n.message.replace(t,e),n}function YH(n){for(const t of n)if("object"==typeof t&&!NP(t))return t;return{}}function JH(n,t){var e,r;let i;return i=NP(n[0])?n[0]:NP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(t(o))},error:null===(e=i.error)||void 0===e?void 0:e.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class LC{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new _l(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return kH(this._delegate,t._delegate)}}class UC extends LC{data(t){const e=this._delegate.data(t);return function NK(n,t){n||pt()}(void 0!==e),e}}class ho{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new EI(t)}where(t,e,r){try{return new ho(this.firestore,gp(this._delegate,function X9(n,t,e){const r=t,i=CI("where",n);return new Q9(i,r,e)}(t,e,r)))}catch(i){throw uo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new ho(this.firestore,gp(this._delegate,function tJ(n,t="asc"){const e=t,r=CI("orderBy",n);return new eJ(r,e)}(t,e)))}catch(r){throw uo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new ho(this.firestore,gp(this._delegate,function nJ(n){return mH("limit",n),new OH("limit",n,"F")}(t)))}catch(e){throw uo(e,"limit()","Query.limit()")}}limitToLast(t){try{return new ho(this.firestore,gp(this._delegate,function rJ(n){return mH("limitToLast",n),new OH("limitToLast",n,"L")}(t)))}catch(e){throw uo(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new ho(this.firestore,gp(this._delegate,function iJ(...n){return new MH("startAt",n,!0)}(...t)))}catch(e){throw uo(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new ho(this.firestore,gp(this._delegate,function sJ(...n){return new MH("startAfter",n,!1)}(...t)))}catch(e){throw uo(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new ho(this.firestore,gp(this._delegate,function oJ(...n){return new PH("endBefore",n,!1)}(...t)))}catch(e){throw uo(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new ho(this.firestore,gp(this._delegate,function aJ(...n){return new PH("endAt",n,!0)}(...t)))}catch(e){throw uo(e,"endAt()","Query.endAt()")}}isEqual(t){return bH(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function pJ(n){n=pn(n,Ps);const t=pn(n.firestore,Ar),e=Di(t),r=new Um(t);return function D9(n,t){const e=new es;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,o,c){try{const d=yield oI(i,o,!0),f=new Jj(o,d.ji),y=f.Ku(d.documents),w=f.applyChanges(y,!1);c.resolve(w.snapshot)}catch(d){const f=Nv(d,`Failed to execute query '${o} against cache`);c.reject(f)}}),function(i,o,c){return r.apply(this,arguments)})(yield pI(n),t,e);var r})),e.promise}(e,n._query).then(i=>new pp(t,r,n,i))}(this._delegate):"server"===t?.source?function gJ(n){n=pn(n,Ps);const t=pn(n.firestore,Ar),e=Di(t),r=new Um(t);return dH(e,n._query,{source:"server"}).then(i=>new pp(t,r,n,i))}(this._delegate):function fJ(n){n=pn(n,Ps);const t=pn(n.firestore,Ar),e=Di(t),r=new Um(t);return RH(n._query),dH(e,n._query).then(i=>new pp(t,r,n,i))}(this._delegate),e.then(r=>new xP(this.firestore,new pp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=YH(t),r=JH(t,i=>new xP(this.firestore,new pp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return $H(this._delegate,e,r)}withConverter(t){return new ho(this.firestore,this._delegate.withConverter(t?Bm.getInstance(this.firestore,t):null))}}class kJ{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new UC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xP{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new ho(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new UC(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new kJ(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new UC(this._firestore,r))})}isEqual(t){return kH(this._delegate,t._delegate)}}class Pv extends ho{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new _l(this.firestore,t):null}doc(t){try{return new _l(this.firestore,void 0===t?mI(this._delegate):mI(this._delegate,t))}catch(e){throw uo(e,"doc()","CollectionReference.doc()")}}add(t){return function _J(n,t){const e=pn(n.firestore,Ar),r=mI(n),i=TI(n.converter,t);return Mv(e,[vI(Pm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Br.exists(!1))]).then(()=>r)}(this._delegate,t).then(e=>new _l(this.firestore,e))}isEqual(t){return vH(this._delegate,t._delegate)}withConverter(t){return new Pv(this.firestore,this._delegate.withConverter(t?Bm.getInstance(this.firestore,t):null))}}function Vm(n){return pn(n,fr)}class kP{constructor(...t){this._delegate=new mh(...t)}static documentId(){return new kP(Kr.keyField().canonicalString())}isEqual(t){return(t=(0,F.m9)(t))instanceof mh&&this._delegate._internalPath.isEqual(t._internalPath)}}class jm{constructor(t){this._delegate=t}static serverTimestamp(){const t=function CJ(){return new wP("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new jm(t)}static delete(){const t=function wJ(){return new RC("deleteField")}();return t._methodName="FieldValue.delete",new jm(t)}static arrayUnion(...t){const e=function TJ(...n){return new q9("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new jm(e)}static arrayRemove(...t){const e=function EJ(...n){return new z9("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new jm(e)}static increment(t){const e=function DJ(n){return new W9("increment",n)}(t);return e._methodName="FieldValue.increment",new jm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const RJ={Firestore:zH,GeoPoint:_I,Timestamp:Ir,Blob:FC,Transaction:WH,WriteBatch:KH,DocumentReference:_l,DocumentSnapshot:LC,Query:ho,QueryDocumentSnapshot:UC,QuerySnapshot:xP,CollectionReference:Pv,FieldPath:kP,FieldValue:jm,setLogLevel:function xJ(n){!function AK(n){tp.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function MJ(n){(function OJ(n,t){n.INTERNAL.registerComponent(new yc.wA("firestore-compat",e=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("firestore").getImmediate();return t(r,i)},"PUBLIC").setServiceProps(Object.assign({},RJ)))})(n,(t,e)=>new zH(t,e,new NJ)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(BR.Z);var DI=U(5363);function QH(n,t){return(0,xs.m)(t)?Ln(()=>n,t):Ln(()=>n)}var RP=U(9468);U(5867);const e$=new Map,BJ={activated:!1,tokenObservers:[]},VJ={initialized:!1,enabled:!1};function is(n){return e$.get(n)||BJ}function wc(n,t){e$.set(n,t)}function II(){return VJ}const MP="https://content-firebaseappcheck.googleapis.com/v1",$J="exchangeDebugToken",t$={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class ZJ{constructor(t,e,r,i,o){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Te.Z)(function*(){e.stop();try{e.pending=new F.BH,yield function qJ(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new F.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(r){e.retryPolicy(r)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const fo=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function LP(){return LP=(0,Te.Z)(function*({url:n,body:t},e){var r,i;const o={"Content-Type":"application/json"},c=e.getImmediate({optional:!0});if(c){const k=yield c.getHeartbeatsHeader();k&&(o["X-Firebase-Client"]=k)}const d={method:"POST",body:JSON.stringify(t),headers:o};let f,y;try{f=yield fetch(n,d)}catch(k){throw fo.create("fetch-network-error",{originalErrorMessage:null===(r=k)||void 0===r?void 0:r.message})}if(200!==f.status)throw fo.create("fetch-status-error",{httpStatus:f.status});try{y=yield f.json()}catch(k){throw fo.create("fetch-parse-error",{originalErrorMessage:null===(i=k)||void 0===i?void 0:i.message})}const w=y.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw fo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const E=1e3*Number(w[1]),A=Date.now();return{token:y.token,expireTimeMillis:A+E,issuedAtTimeMillis:A}}),LP.apply(this,arguments)}const JJ="firebase-app-check-database",QJ=1,BC="firebase-app-check-store";let xI=null;function UP(){return UP=(0,Te.Z)(function*(n,t){const r=(yield function i$(){return xI||(xI=new Promise((n,t)=>{var e;try{const r=indexedDB.open(JJ,QJ);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var o;t(fo.create("storage-open",{originalErrorMessage:null===(o=i.target.error)||void 0===o?void 0:o.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(BC,{keyPath:"compositeKey"})}}catch(r){t(fo.create("storage-open",{originalErrorMessage:null===(e=r)||void 0===e?void 0:e.message}))}}),xI)}()).transaction(BC,"readwrite"),o=r.objectStore(BC).put({compositeKey:n,value:t});return new Promise((c,d)=>{o.onsuccess=f=>{c()},r.onerror=f=>{var y;d(fo.create("storage-set",{originalErrorMessage:null===(y=f.target.error)||void 0===y?void 0:y.message}))}})}),UP.apply(this,arguments)}const VC=new vc.Yd("@firebase/app-check");function l$(n,t){return(0,F.hl)()?function eQ(n,t){return function s$(n,t){return UP.apply(this,arguments)}(function a$(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{VC.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function HP(){return HP=(0,Te.Z)(function*(){const n=II();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),HP.apply(this,arguments)}const oQ={error:"UNKNOWN_ERROR"};function aQ(n){return F.US.encodeString(JSON.stringify(n),!1)}function kI(n){return $P.apply(this,arguments)}function $P(){return $P=(0,Te.Z)(function*(n,t=!1){const e=n.app;!function n$(n){if(!is(n).activated)throw fo.create("use-before-activation",{appName:n.name})}(e);const r=is(e);let o,i=r.token;if(!i){const f=yield r.cachedTokenPromise;f&&RI(f)&&(i=f)}if(!t&&i&&RI(i))return{token:i.token};let d,c=!1;if(function c$(){return II().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function FP(n,t){return LP.apply(this,arguments)}(function YJ(n,t){const{projectId:e,appId:r,apiKey:i}=n.options;return{url:`${MP}/projects/${e}/apps/${r}:${$J}?key=${i}`,body:{debug_token:t}}}(e,yield function u$(){return HP.apply(this,arguments)}()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0);const f=yield r.exchangeTokenPromise;return yield l$(e,f),wc(e,Object.assign(Object.assign({},r),{token:f})),{token:f.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(f=>(r.exchangeTokenPromise=void 0,f)),c=!0),i=yield r.exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?VC.warn(f.message):VC.error(f),o=f}return i?(d={token:i.token},wc(e,Object.assign(Object.assign({},r),{token:i})),yield l$(e,i)):d=function cQ(n){return{token:aQ(oQ),error:n}}(o),c&&function h$(n,t){const e=is(n).tokenObservers;for(const r of e)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch{}}(e,d),d}),$P.apply(this,arguments)}function ZP(n,t){const e=is(n),r=e.tokenObservers.filter(i=>i.next!==t);0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),wc(n,Object.assign(Object.assign({},e),{tokenObservers:r}))}function d$(n){const{app:t}=n,e=is(t);let r=e.tokenRefresher;r||(r=function lQ(n){const{app:t}=n;return new ZJ((0,Te.Z)(function*(){let r;if(r=is(t).token?yield kI(n,!0):yield kI(n),r.error)throw r.error}),()=>!0,()=>{const e=is(t);if(e.token){let r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},t$.RETRIAL_MIN_WAIT,t$.RETRIAL_MAX_WAIT)}(n),wc(t,Object.assign(Object.assign({},e),{tokenRefresher:r}))),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function RI(n){return n.expireTimeMillis-Date.now()>0}class uQ{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=is(this.app);for(const e of t)ZP(this.app,e.next);return Promise.resolve()}}const b$="app-check-internal";!function EQ(){(0,so._registerComponent)(new yc.wA("app-check",n=>function dQ(n,t){return new uQ(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(b$).initialize()})),(0,so._registerComponent)(new yc.wA(b$,n=>function hQ(n){return{getToken:t=>kI(n,t),addTokenListener:t=>function GP(n,t,e,r){const{app:i}=n,o=is(i),c={next:e,error:r,type:t};if(wc(i,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,c]})),o.token&&RI(o.token)){const d=o.token;Promise.resolve().then(()=>{e({token:d.token}),d$(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>d$(n))}(n,"INTERNAL",t),removeTokenListener:t=>ZP(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,so.registerVersion)("@firebase/app-check","0.5.12")}();class jC{constructor(){return(0,Nn.vb)("app-check")}}typeof window<"u"&&window;var YP=U(127);const JP=new s.OlP("angularfire2.auth.use-emulator"),QP=new s.OlP("angularfire2.auth.settings"),XP=new s.OlP("angularfire2.auth.tenant-id"),eF=new s.OlP("angularfire2.auth.langugage-code"),tF=new s.OlP("angularfire2.auth.use-device-language"),nF=new s.OlP("angularfire.auth.persistence"),rF=(n,t,e,r,i,o,c,d)=>(0,Bi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=t.runOutsideAngular(()=>n.auth());if(e&&f.useEmulator(...e),r&&(f.tenantId=r),f.languageCode=i,o&&f.useDeviceLanguage(),c)for(const[y,w]of Object.entries(c))f.settings[y]=w;return d&&f.setPersistence(d),f},[e,r,i,o,c,d]);let iF=(()=>{class n{constructor(e,r,i,o,c,d,f,y,w,E,A,k){const M=new cn.x,V=Fe(void 0).pipe((0,DI.Q)(c.outsideAngular),Ln(()=>o.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,1451)))),(0,S.U)(()=>(0,Bi.on)(e,o,r)),(0,S.U)(W=>rF(W,o,d,y,w,E,f,A)),mD({bufferSize:1,refCount:!1}));if(Nc(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Fe(null);else{V.pipe(ca()).subscribe();const ne=V.pipe(Ln(me=>me.getRedirectResult().then(Pe=>Pe,()=>null)),Nn.iC,mD({bufferSize:1,refCount:!1})),he=V.pipe(Ln(me=>new bn.y(Pe=>({unsubscribe:o.runOutsideAngular(()=>me.onAuthStateChanged(je=>Pe.next(je),je=>Pe.error(je),()=>Pe.complete()))})))),Ie=V.pipe(Ln(me=>new bn.y(Pe=>({unsubscribe:o.runOutsideAngular(()=>me.onIdTokenChanged(je=>Pe.next(je),je=>Pe.error(je),()=>Pe.complete()))}))));this.authState=ne.pipe(QH(he),(0,RP.R)(c.outsideAngular),(0,DI.Q)(c.insideAngular)),this.user=ne.pipe(QH(Ie),(0,RP.R)(c.outsideAngular),(0,DI.Q)(c.insideAngular)),this.idToken=this.user.pipe(Ln(me=>me?(0,Bt.D)(me.getIdToken()):Fe(null))),this.idTokenResult=this.user.pipe(Ln(me=>me?(0,Bt.D)(me.getIdTokenResult()):Fe(null))),this.credential=(0,By.T)(ne,M,this.authState.pipe(Pr(me=>!me))).pipe((0,S.U)(me=>me?.user?me:null),(0,RP.R)(c.outsideAngular),(0,DI.Q)(c.insideAngular))}return(0,Bi.pX)(this,V,o,{spy:{apply:(W,ne,he)=>{(W.startsWith("signIn")||W.startsWith("createUser"))&&he.then(Ie=>M.next(Ie))}}})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Bi.Dh),s.LFG(Bi.xv,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(Nn.HU),s.LFG(JP,8),s.LFG(QP,8),s.LFG(XP,8),s.LFG(eF,8),s.LFG(tF,8),s.LFG(nF,8),s.LFG(jC,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function C$(n,t){return function xQ(n,t=Yg.z){return new bn.y(e=>{let r;return null!=t?t.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},e)}):r=n.onSnapshot({includeMetadataChanges:!0},e),()=>{r?.()}})}(n,t)}function sF(n,t){return C$(n,t).pipe((0,S.U)(e=>({payload:e,type:"query"})))}function MI(n,t){return sF(n,t).pipe(la(void 0),UR(),(0,S.U)(([e,r])=>{const i=r.payload.docChanges(),o=i.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,d)=>{const f=i.find(w=>w.doc.ref.isEqual(c.ref)),y=e?.payload.docs.find(w=>w.ref.isEqual(c.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(c.metadata)||!f&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||o.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),o}))}function T$(n,t,e){return MI(n,e).pipe(ua((r,i)=>function RQ(n,t,e){return t.forEach(r=>{e.indexOf(r.type)>-1&&(n=function OQ(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return oF(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return oF(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return oF(n,t.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),t),[]),th(),(0,S.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function oF(n,t,e,...r){const i=n.slice();return i.splice(t,e,...r),i}function E$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class D${constructor(t,e,r){this.ref=t,this.query=e,this.afs=r}stateChanges(t){let e=MI(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,S.U)(r=>r.filter(i=>t.indexOf(i.type)>-1)))),e.pipe(la(void 0),UR(),Pr(([r,i])=>i.length>0||!r),(0,S.U)(([r,i])=>i),Nn.iC)}auditTrail(t){return this.stateChanges(t).pipe(ua((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=E$(t);return T$(this.query,e,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}valueChanges(t={}){return sF(this.query,this.afs.schedulers.outsideAngular).pipe((0,S.U)(e=>e.payload.docs.map(r=>t.idField?Object.assign(Object.assign({},r.data()),{[t.idField]:r.id}):r.data())),Nn.iC)}get(t){return(0,Bt.D)(this.query.get(t)).pipe(Nn.iC)}add(t){return this.ref.add(t)}doc(t){return new S$(this.ref.doc(t),this.afs)}}class S${constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const r=this.ref.collection(t),{ref:i,query:o}=N$(r,e);return new D$(i,o,this.afs)}snapshotChanges(){return function kQ(n,t){return C$(n,t).pipe(la(void 0),UR(),(0,S.U)(([e,r])=>r.exists?e?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,S.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Bt.D)(this.ref.get(t)).pipe(Nn.iC)}}class MQ{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?MI(this.query,this.afs.schedulers.outsideAngular).pipe((0,S.U)(e=>e.filter(r=>t.indexOf(r.type)>-1)),Pr(e=>e.length>0),Nn.iC):MI(this.query,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}auditTrail(t){return this.stateChanges(t).pipe(ua((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=E$(t);return T$(this.query,e,this.afs.schedulers.outsideAngular).pipe(Nn.iC)}valueChanges(t={}){return sF(this.query,this.afs.schedulers.outsideAngular).pipe((0,S.U)(r=>r.payload.docs.map(i=>t.idField?Object.assign({[t.idField]:i.id},i.data()):i.data())),Nn.iC)}get(t){return(0,Bt.D)(this.query.get(t)).pipe(Nn.iC)}}const I$=new s.OlP("angularfire2.enableFirestorePersistence"),A$=new s.OlP("angularfire2.firestore.persistenceSettings"),PQ=new s.OlP("angularfire2.firestore.settings"),FQ=new s.OlP("angularfire2.firestore.use-emulator");function N$(n,t=(e=>e)){return{query:t(n),ref:n}}let Ia=(()=>{class n{constructor(e,r,i,o,c,d,f,y,w,E,A,k,M,V,W,ne,he){this.schedulers=f;const Ie=(0,Bi.on)(e,d,r),me=w;E&&rF(Ie,d,A,M,V,W,k,ne),[this.firestore,this.persistenceEnabled$]=(0,Bi.cc)(`${Ie.name}.firestore`,"AngularFirestore",Ie.name,()=>{const Pe=d.runOutsideAngular(()=>Ie.firestore());if(o&&Pe.settings(o),me&&Pe.useEmulator(...me),i&&!Nc(c)){const je=()=>{try{return(0,Bt.D)(Pe.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(ct){return typeof console<"u"&&console.warn(ct),Fe(!1)}};return[Pe,d.runOutsideAngular(je)]}return[Pe,Fe(!1)]},[o,me,i])}collection(e,r){let i;i="string"==typeof e?this.firestore.collection(e):e;const{ref:o,query:c}=N$(i,r),d=this.schedulers.ngZone.run(()=>o);return new D$(d,c,this)}collectionGroup(e,r){const i=r||(c=>c),o=this.firestore.collectionGroup(e);return new MQ(i(o),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const i=this.schedulers.ngZone.run(()=>r);return new S$(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Bi.Dh),s.LFG(Bi.xv,8),s.LFG(I$,8),s.LFG(PQ,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(Nn.HU),s.LFG(A$,8),s.LFG(FQ,8),s.LFG(iF,8),s.LFG(JP,8),s.LFG(QP,8),s.LFG(XP,8),s.LFG(eF,8),s.LFG(tF,8),s.LFG(nF,8),s.LFG(jC,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),LQ=(()=>{class n{constructor(){YP.Z.registerVersion("angularfire",Nn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:I$,useValue:!0},{provide:A$,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[Ia]}),n})(),_p=(()=>{class n extends um{constructor(e){super(),this.firestore=e,this.collection=e.collection(lh.ACCOUNTS)}login(e){return this.firestore.collection(lh.ACCOUNTS,r=>r.where("deleted","==",!1).where("email","==",e.username).where("password","==",e.password).limit(1)).valueChanges()}create(e){return this.collection.doc(e.id).set(e),Fe(e)}delete(e){return(0,Bt.D)(this.collection.doc(e).delete())}fetch(e){return Fe()}fetchAll(){return this.collection.valueChanges()}update(e,r){return(0,Bt.D)(this.collection.doc(e).update(r))}search(e,r){let i=this.collection.ref;return console.log(e),e.forEach(o=>{i.where(o.field,o.comparator,o.value)}),(0,Bt.D)(i.get()).pipe((0,S.U)(o=>{const c=[];return o.forEach(d=>{c.push(d.data())}),console.log(c),c}))}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Ia))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fv=(()=>{class n extends Mw{constructor(e){super(),this.firestore=e,this.collection=e.collection(lh.CLIENTS)}create(e){return this.collection.doc(e.id).set(e),Fe(e)}delete(e){return(0,Bt.D)(this.collection.doc(e).delete())}fetch(e){return Fe()}fetchAll(){return this.collection.valueChanges()}update(e,r){return(0,Bt.D)(this.collection.doc(e).update(r))}search(e,r){return Fe()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Ia))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hm=(()=>{class n extends tm{constructor(e){super(),this.firestore=e,this.collection=e.collection(lh.PROJECTS)}create(e){return this.collection.doc(e.id).set(e),Fe(e)}delete(e){return(0,Bt.D)(this.collection.doc(e).delete())}fetch(e){return this.collection.doc(e).valueChanges()}fetchAll(){return this.collection.valueChanges()}update(e,r){return(0,Bt.D)(this.collection.doc(e).update(r))}search(e,r){return Fe()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Ia))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$m=(()=>{class n extends rv{constructor(e){super(),this.firestore=e,this.collection=e.collection(lh.RESOURCES)}create(e){return this.collection.doc(e.id).set(e),Fe(e)}delete(e){return(0,Bt.D)(this.collection.doc(e).delete())}fetch(e){return Fe()}fetchByProject(e){return this.firestore.collection(lh.RESOURCES,r=>r.where("project","==",e)).valueChanges()}update(e,r){return(0,Bt.D)(this.collection.doc(e).update(r))}search(e,r){return Fe()}fetchAll(){return this.firestore.collection(lh.RESOURCES,e=>e.where("delete","==",!1)).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Ia))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aF=(()=>{class n extends fB{constructor(e){super(),this.firestore=e,this.collection=e.collection(lh.WORKING_DAYS)}create(e){return Fe()}delete(e){return Fe()}fetch(e){return Fe()}fetchAll(){return this.collection.valueChanges()}update(e,r){return(0,Bt.D)(this.collection.doc(e).update(r))}search(e,r){return Fe()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Ia))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PI=(()=>{class n extends vR{constructor(e){super(),this.firestore=e,this.collection=e.collection(lh.CURRENCY_EXCHANGE)}create(e){return this.collection.doc(e.id).set(e),Fe(e)}delete(e){return Fe()}fetch(e){return Fe()}fetchAll(){return this.collection.valueChanges()}update(e,r){return(0,Bt.D)(this.collection.doc(e).update(r))}search(e,r){return Fe()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Ia))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const UQ=[{provide:Wf,useClass:vB},{deps:[Ia],provide:_p,useFactory:n=>new _p(n)},{deps:[_p],provide:RR,useFactory:n=>new RR(n)},{deps:[_p],provide:FR,useFactory:n=>new FR(n)},{deps:[_p],provide:LR,useFactory:n=>new LR(n)},{deps:[_p],provide:OR,useFactory:n=>new OR(n)},{deps:[_p],provide:PR,useFactory:n=>new PR(n)},{deps:[_p],provide:MR,useFactory:n=>new MR(n)}],BQ=[{provide:Yy,useClass:gB},{deps:[Ia],provide:Fv,useFactory:n=>new Fv(n)},{deps:[Fv],provide:TR,useFactory:n=>new TR(n)},{deps:[Fv],provide:SR,useFactory:n=>new SR(n)},{deps:[Fv],provide:ER,useFactory:n=>new ER(n)},{deps:[Fv],provide:DR,useFactory:n=>new DR(n)}],VQ=[{provide:jD,useClass:qD},{deps:[Ia],provide:Hm,useFactory:n=>new Hm(n)},{deps:[Hm],provide:HD,useFactory:n=>new HD(n)},{deps:[Hm],provide:ZD,useFactory:n=>new ZD(n)},{deps:[Hm],provide:GD,useFactory:n=>new GD(n)},{deps:[Hm],provide:Tw,useFactory:n=>new Tw(n)},{deps:[Hm],provide:$D,useFactory:n=>new $D(n)}],jQ=[{provide:mB,useClass:_B},{deps:[Ia],provide:$m,useFactory:n=>new $m(n)},{deps:[$m],provide:IR,useFactory:n=>new IR(n)},{deps:[$m],provide:kR,useFactory:n=>new kR(n)},{deps:[$m],provide:AR,useFactory:n=>new AR(n)},{deps:[$m],provide:NR,useFactory:n=>new NR(n)},{deps:[$m],provide:xR,useFactory:n=>new xR(n)}],HQ=[{provide:hB,useClass:pB},{deps:[Ia],provide:aF,useFactory:n=>new aF(n)},{deps:[aF],provide:CR,useFactory:n=>new CR(n)}],$Q=[{provide:uB,useClass:dB},{deps:[Ia],provide:PI,useFactory:n=>new PI(n)},{deps:[PI],provide:wR,useFactory:n=>new wR(n)},{deps:[PI],provide:bR,useFactory:n=>new bR(n)}],GQ_firebase={apiKey:"AIzaSyAg_FtlI1_5LgKh0cgXEMxQ_XFp2uAskkU",authDomain:"estimate-674a4.firebaseapp.com",projectId:"estimate-674a4",storageBucket:"estimate-674a4.appspot.com",messagingSenderId:"484728303804",appId:"1:484728303804:web:ce5e31020ba5e783d160b9",measurementId:"G-W9WFLFDK8R"},x$="firebasestorage.googleapis.com",k$="storageBucket";class Qr extends F.ZR{constructor(t,e){super(lF(t),`Firebase Storage: ${e} (${lF(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qr.prototype)}_codeEquals(t){return lF(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function lF(n){return"storage/"+n}function cF(){return new Qr("unknown","An unknown error occurred, please check the error payload for server response.")}function R$(){return new Qr("canceled","User canceled the upload/download.")}function O$(){return new Qr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Lv(n){return new Qr("invalid-argument",n)}function M$(){return new Qr("app-deleted","The Firebase app was deleted.")}function P$(n){return new Qr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function HC(n,t){return new Qr("invalid-format","String does not match format '"+n+"': "+t)}function $C(n){throw new Qr("internal-error","Internal error: "+n)}class Fs{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let r;try{r=Fs.makeFromUrl(t,e)}catch{return new Fs(t,"")}if(""===r.path)return r;throw function tX(n){return new Qr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(me){me.path_=decodeURIComponent(me.path)}const E=e.replace(/[.]/g,"\\."),Ie=[{regex:d,indices:{bucket:1,path:3},postModify:function o(me){"/"===me.path.charAt(me.path.length-1)&&(me.path_=me.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${E}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${e===x$?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let me=0;me<Ie.length;me++){const Pe=Ie[me],je=Pe.regex.exec(t);if(je){let Lt=je[Pe.indices.path];Lt||(Lt=""),r=new Fs(je[Pe.indices.bucket],Lt),Pe.postModify(r);break}}if(null==r)throw function eX(n){return new Qr("invalid-url","Invalid URL '"+n+"'.")}(t);return r}}class sX{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function FI(n){return"string"==typeof n||n instanceof String}function F$(n){return uF()&&n instanceof Blob}function uF(){return typeof Blob<"u"}function dF(n,t,e,r){if(r<t)throw Lv(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>e)throw Lv(`Invalid value for '${n}'. Expected ${e} or less.`)}function yh(n,t,e){let r=t;return null==e&&(r=`https://${t}`),`${e}://${r}/v0${n}`}function L$(n){const t=encodeURIComponent;let e="?";for(const r in n)n.hasOwnProperty(r)&&(e=e+(t(r)+"=")+t(n[r])+"&");return e=e.slice(0,-1),e}var yp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(yp||(yp={})),yp))();class dX{constructor(t,e,r,i,o,c,d,f,y,w,E){this.url_=t,this.method_=e,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=f,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,k)=>{this.resolve_=A,this.reject_=k,this.start_()})}start_(){const e=(r,i)=>{const o=this.resolve_,c=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function lX(n){return void 0!==n}(f)?o():o(f)}catch(f){c(f)}else if(null!==d){const f=cF();f.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,f):f)}else c(i.canceled?this.appDelete_?M$():R$():function XQ(){return new Qr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?e(0,new LI(!1,null,!0)):this.backoffId_=function oX(n,t,e){let r=1,i=null,o=null,c=!1,d=0;function f(){return 2===d}let y=!1;function w(...W){y||(y=!0,t.apply(null,W))}function E(W){i=setTimeout(()=>{i=null,n(k,f())},W)}function A(){o&&clearTimeout(o)}function k(W,...ne){if(y)return void A();if(W)return A(),void w.call(null,W,...ne);if(f()||c)return A(),void w.call(null,W,...ne);let Ie;r<64&&(r*=2),1===d?(d=2,Ie=0):Ie=1e3*(r+Math.random()),E(Ie)}let M=!1;function V(W){M||(M=!0,A(),!y&&(null!==i?(W||(d=2),clearTimeout(i),E(0)):W||(d=1)))}return E(0),o=setTimeout(()=>{c=!0,V(!0)},e),V}((r,i)=>{if(i)return void r(!1,new LI(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const d=o.getErrorCode()===yp.NO_ERROR,f=o.getStatus();if(!d||this.isRetryStatusCode_(f)){const w=o.getErrorCode()===yp.ABORT;return void r(!1,new LI(!1,null,w))}const y=-1!==this.successCodes_.indexOf(f);r(!0,new LI(y,o))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function aX(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,i=-1!==[408,429].indexOf(t),o=-1!==this.additionalRetryCodes_.indexOf(t);return e||i||o}}class LI{constructor(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r}}function yX(...n){const t=function _X(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let r=0;r<n.length;r++)e.append(n[r]);return e.getBlob()}if(uF())return new Blob(n);throw new Qr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Aa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hF{constructor(t,e){this.data=t,this.contentType=e||null}}function fF(n,t){switch(n){case Aa.RAW:return new hF(U$(t));case Aa.BASE64:case Aa.BASE64URL:return new hF(B$(n,t));case Aa.DATA_URL:return new hF(function CX(n){const t=new V$(n);return t.base64?B$(Aa.BASE64,t.rest):function wX(n){let t;try{t=decodeURIComponent(n)}catch{throw HC(Aa.DATA_URL,"Malformed data URL.")}return U$(t)}(t.rest)}(t),function TX(n){return new V$(n).contentType}(t))}throw cF()}function U$(n){const t=[];for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++e),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function B$(n,t){switch(n){case Aa.BASE64:{const i=-1!==t.indexOf("-"),o=-1!==t.indexOf("_");if(i||o)throw HC(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Aa.BASE64URL:{const i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw HC(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function bX(n){return atob(n)}(t)}catch{throw HC(n,"Invalid character found")}const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}class V${constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw HC(Aa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=e[1]||null;null!=r&&(this.base64=function EX(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}class Uu{constructor(t,e){let r=0,i="";F$(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(F$(this.data_)){const i=function vX(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===i?null:new Uu(i)}{const r=new Uint8Array(this.data_.buffer,t,e-t);return new Uu(r,!0)}}static getBlob(...t){if(uF()){const e=t.map(r=>r instanceof Uu?r.data_:r);return new Uu(yX.apply(null,e))}{const e=t.map(c=>FI(c)?fF(Aa.RAW,c).data:c.data_);let r=0;e.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let o=0;return e.forEach(c=>{for(let d=0;d<c.length;d++)i[o++]=c[d]}),new Uu(i,!0)}}uploadData(){return this.data_}}function pF(n){let t;try{t=JSON.parse(n)}catch{return null}return function uX(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function j$(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function IX(n,t){return t}class po{constructor(t,e,r,i){this.server=t,this.local=e||t,this.writable=!!r,this.xform=i||IX}}let UI=null;function GC(){if(UI)return UI;const n=[];n.push(new po("bucket")),n.push(new po("generation")),n.push(new po("metageneration")),n.push(new po("name","fullPath",!0));const e=new po("name");e.xform=function t(o,c){return function AX(n){return!FI(n)||n.length<2?n:j$(n)}(c)},n.push(e);const i=new po("size");return i.xform=function r(o,c){return void 0!==c?Number(c):c},n.push(i),n.push(new po("timeCreated")),n.push(new po("updated")),n.push(new po("md5Hash",null,!0)),n.push(new po("cacheControl",null,!0)),n.push(new po("contentDisposition",null,!0)),n.push(new po("contentEncoding",null,!0)),n.push(new po("contentLanguage",null,!0)),n.push(new po("contentType",null,!0)),n.push(new po("metadata","customMetadata",!0)),UI=n,UI}function H$(n,t,e){const r=pF(t);return null===r?null:function xX(n,t,e){const r={type:"file"},i=e.length;for(let o=0;o<i;o++){const c=e[o];r[c.local]=c.xform(r,t[c.server])}return function NX(n,t){Object.defineProperty(n,"ref",{get:function e(){const o=new Fs(n.bucket,n.fullPath);return t._makeStorageReference(o)}})}(r,n),r}(n,r,e)}function gF(n,t){const e={},r=t.length;for(let i=0;i<r;i++){const o=t[i];o.writable&&(e[o.server]=n[o.local])}return JSON.stringify(e)}const $$="prefixes",G$="items";class Bu{constructor(t,e,r,i){this.url=t,this.method=e,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Vu(n){if(!n)throw cF()}function BI(n,t){return function e(r,i){const o=H$(n,i,t);return Vu(null!==o),o}}function Uv(n){return function t(e,r){let i;return i=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function JQ(){return new Qr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function YQ(){return new Qr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function KQ(n){return new Qr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function QQ(n){return new Qr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function ZC(n){const t=Uv(n);return function e(r,i){let o=t(r,i);return 404===r.getStatus()&&(o=function WQ(n){return new Qr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function Z$(n,t,e){const i=yh(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Bu(i,"GET",BI(n,e),c);return d.errorHandler=ZC(t),d}function FX(n,t,e,r,i){const o={};o.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(o.delimiter=e),r&&(o.pageToken=r),i&&(o.maxResults=i);const d=yh(t.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,w=new Bu(d,"GET",function MX(n,t){return function e(r,i){const o=function OX(n,t,e){const r=pF(e);return null===r?null:function RX(n,t,e){const r={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[$$])for(const i of e[$$]){const o=i.replace(/\/$/,""),c=n._makeStorageReference(new Fs(t,o));r.prefixes.push(c)}if(e[G$])for(const i of e[G$]){const o=n._makeStorageReference(new Fs(t,i.name));r.items.push(o)}return r}(n,t,r)}(n,t,i);return Vu(null!==o),o}}(n,t.bucket),y);return w.urlParams=o,w.errorHandler=Uv(t),w}function z$(n,t,e){const r=Object.assign({},e);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=function VX(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}class VI{constructor(t,e,r,i){this.current=t,this.total=e,this.finalized=!!r,this.metadata=i||null}}function mF(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{Vu(!1)}return Vu(!!e&&-1!==(t||["active"]).indexOf(e)),e}const GX={STATE_CHANGED:"state_changed"},go={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _F(n){switch(n){case"running":case"pausing":case"canceling":return go.RUNNING;case"paused":return go.PAUSED;case"success":return go.SUCCESS;case"canceled":return go.CANCELED;default:return go.ERROR}}class ZX{constructor(t,e,r){if(function cX(n){return"function"==typeof n}(t)||null!=e||null!=r)this.next=t,this.error=e??void 0,this.complete=r??void 0;else{const o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Bv(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}let Y$=null;class qX{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,r,i){if(this.sent_)throw $C("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $C("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $C("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $C("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $C("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class zX extends qX{initXhr(){this.xhr_.responseType="text"}}function Cc(){return Y$?Y$():new zX}class J${constructor(t,e,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=r,this._mappings=GC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,r])=>{switch(this._state){case"running":t(e,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const r=function jX(n,t,e,r,i){const o=t.bucketOnlyServerUrl(),c=z$(t,r,i),d={name:c.fullPath},f=yh(o,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},E=gF(c,e),M=new Bu(f,"POST",function k(V){let W;mF(V);try{W=V.getResponseHeader("X-Goog-Upload-URL")}catch{Vu(!1)}return Vu(FI(W)),W},n.maxUploadRetryTime);return M.urlParams=d,M.headers=w,M.body=E,M.errorHandler=Uv(t),M}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Cc,t,e);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,r)=>{const i=function HX(n,t,e,r){const f=new Bu(e,"POST",function o(y){const w=mF(y,["active","final"]);let E=null;try{E=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Vu(!1)}E||Vu(!1);const A=Number(E);return Vu(!isNaN(A)),new VI(A,r.size(),"final"===w)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=Uv(t),f}(this._ref.storage,this._ref._location,t,this._blob),o=this._ref.storage._makeRequest(i,Cc,e,r);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new VI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let c;try{c=function $X(n,t,e,r,i,o,c,d){const f=new VI(0,0);if(c?(f.current=c.current,f.total=c.total):(f.current=0,f.total=r.size()),r.size()!==f.total)throw function rX(){return new Qr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=f.total-f.current;let w=y;i>0&&(w=Math.min(w,i));const E=f.current,M={"X-Goog-Upload-Command":w===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${f.current}`},V=r.slice(E,E+w);if(null===V)throw O$();const Ie=new Bu(e,"POST",function W(me,Pe){const je=mF(me,["active","final"]),ct=f.current+w,Lt=r.size();let Cn;return Cn="final"===je?BI(t,o)(me,Pe):null,new VI(ct,Lt,"final"===je,Cn)},t.maxUploadRetryTime);return Ie.headers=M,Ie.body=V.uploadData(),Ie.progressCallback=d||null,Ie.errorHandler=Uv(n),Ie}(this._ref._location,this._ref.storage,r,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(c,Cc,i,o);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const r=Z$(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Cc,t,e);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const r=function W$(n,t,e,r,i){const o=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let Ie="";for(let me=0;me<2;me++)Ie+=Math.random().toString().slice(2);return Ie}();c["Content-Type"]="multipart/related; boundary="+f;const y=z$(t,r,i),w=gF(y,e),k=Uu.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+f+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+f+"--");if(null===k)throw O$();const M={name:y.fullPath},V=yh(o,n.host,n._protocol),ne=n.maxUploadRetryTime,he=new Bu(V,"POST",BI(n,e),ne);return he.urlParams=M,he.headers=c,he.body=k.uploadData(),he.errorHandler=Uv(t),he}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Cc,t,e);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=R$(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=_F(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,r,i){const o=new ZX(e||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(_F(this._state)){case go.SUCCESS:Bv(this._resolve.bind(null,this.snapshot))();break;case go.CANCELED:case go.ERROR:Bv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(_F(this._state)){case go.RUNNING:case go.PAUSED:t.next&&Bv(t.next.bind(t,this.snapshot))();break;case go.SUCCESS:t.complete&&Bv(t.complete.bind(t))();break;default:t.error&&Bv(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class Gm{constructor(t,e){this._service=t,this._location=e instanceof Fs?e:Fs.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Gm(t,e)}get root(){const t=new Fs(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return j$(this._location.path)}get storage(){return this._service}get parent(){const t=function DX(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Fs(this._location.bucket,t);return new Gm(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw P$(t)}}function X$(n,t,e){return yF.apply(this,arguments)}function yF(){return yF=(0,Te.Z)(function*(n,t,e){const i=yield e6(n,{pageToken:e});t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&(yield X$(n,t,i.nextPageToken))}),yF.apply(this,arguments)}function e6(n,t){null!=t&&"number"==typeof t.maxResults&&dF("options.maxResults",1,1e3,t.maxResults);const e=t||{},r=FX(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(r,Cc)}function see(n){n._throwIfRoot("getDownloadURL");const t=function LX(n,t,e){const i=yh(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Bu(i,"GET",function PX(n,t){return function e(r,i){const o=H$(n,i,t);return Vu(null!==o),function kX(n,t,e,r){const i=pF(t);if(null===i||!FI(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const c=encodeURIComponent;return o.split(",").map(y=>{const E=n.fullPath;return yh("/b/"+c(n.bucket)+"/o/"+c(E),e,r)+L$({alt:"media",token:y})})[0]}(o,i,n.host,n._protocol)}}(n,e),c);return d.errorHandler=ZC(t),d}(n.storage,n._location,GC());return n.storage.makeRequestWithTokens(t,Cc).then(e=>{if(null===e)throw function iX(){return new Qr("no-download-url","The given file does not have any download URLs.")}();return e})}function t6(n,t){const e=function SX(n,t){const e=t.split("/").filter(r=>r.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),r=new Fs(n._location.bucket,e);return new Gm(n.storage,r)}function n6(n,t){if(n instanceof vF){const e=n;if(null==e._bucket)throw function nX(){return new Qr("no-default-bucket","No default bucket found. Did you set the '"+k$+"' property when initializing the app?")}();const r=new Gm(e,e._bucket);return null!=t?n6(r,t):r}return void 0!==t?t6(n,t):n}function cee(n,t){if(t&&function aee(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof vF)return function lee(n,t){return new Gm(n,t)}(n,t);throw Lv("To use ref(service, url), the first argument must be a Storage instance.")}return n6(n,t)}function r6(n,t){const e=t?.[k$];return null==e?null:Fs.makeFromBucketSpec(e,n)}class vF{constructor(t,e,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=x$,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Fs.makeFromBucketSpec(i,this._host):r6(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Fs.makeFromBucketSpec(this._url,t):r6(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){dF("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){dF("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,Te.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const r=yield e.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,Te.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Gm(this,t)}_makeRequest(t,e,r,i){if(this._deleted)return new sX(M$());{const o=function mX(n,t,e,r,i,o){const c=L$(n.urlParams),d=n.url+c,f=Object.assign({},n.headers);return function pX(n,t){t&&(n["X-Firebase-GMPID"]=t)}(f,t),function hX(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(f,e),function fX(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(f,o),function gX(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(f,r),new dX(d,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(t,this._appId,r,i,e,this._firebaseVersion);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(t,e){var r=this;return(0,Te.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(t,e,i,o).getPromise()})()}}const i6="@firebase/storage";function a6(n,t){return cee(n=(0,F.m9)(n),t)}function bee(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new vF(e,r,i,t,so.SDK_VERSION)}!function wee(){(0,so._registerComponent)(new yc.wA("storage",bee,"PUBLIC").setMultipleInstances(!0)),(0,so.registerVersion)(i6,"0.9.9",""),(0,so.registerVersion)(i6,"0.9.9","esm2017")}();class jI{constructor(t,e,r){this._delegate=t,this.task=e,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class l6{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new jI(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(r=>{if(t)return t(new jI(r,this,this._ref))},e)}on(t,e,r,i){let o;return e&&(o="function"==typeof e?c=>e(new jI(c,this,this._ref)):{next:e.next?c=>e.next(new jI(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,r||void 0,i||void 0)}}class c6{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new vh(t,this._service))}get items(){return this._delegate.items.map(t=>new vh(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class vh{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function yee(n,t){return t6(n,t)}(this._delegate,t);return new vh(e,this.storage)}get root(){return new vh(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new vh(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new l6(function dee(n,t,e){return function eee(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new J$(n,new Uu(t),e)}(n=(0,F.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=Aa.RAW,r){this._throwIfRoot("putString");const i=fF(e,t),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new l6(new J$(this._delegate,new Uu(i.data,!0),o),this)}listAll(){return function gee(n){return function nee(n){const t={prefixes:[],items:[]};return X$(n,t).then(()=>t)}(n=(0,F.m9)(n))}(this._delegate).then(t=>new c6(t,this.storage))}list(t){return function pee(n,t){return e6(n=(0,F.m9)(n),t)}(this._delegate,t||void 0).then(e=>new c6(e,this.storage))}getMetadata(){return function hee(n){return function ree(n){n._throwIfRoot("getMetadata");const t=Z$(n.storage,n._location,GC());return n.storage.makeRequestWithTokens(t,Cc)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(t){return function fee(n,t){return function iee(n,t){n._throwIfRoot("updateMetadata");const e=function UX(n,t,e,r){const o=yh(t.fullServerUrl(),n.host,n._protocol),d=gF(e,r),y=n.maxOperationRetryTime,w=new Bu(o,"PATCH",BI(n,r),y);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=d,w.errorHandler=ZC(t),w}(n.storage,n._location,t,GC());return n.storage.makeRequestWithTokens(e,Cc)}(n=(0,F.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function mee(n){return see(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function _ee(n){return function oee(n){n._throwIfRoot("deleteObject");const t=function BX(n,t){const r=yh(t.fullServerUrl(),n.host,n._protocol),d=new Bu(r,"DELETE",function c(f,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=ZC(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,Cc)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw P$(t)}}class u6{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(d6(t))throw Lv("ref() expected a child path but got a URL, use refFromURL instead.");return new vh(a6(this._delegate,t),this)}refFromURL(t){if(!d6(t))throw Lv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Fs.makeFromUrl(t,this._delegate.host)}catch{throw Lv("refFromUrl() expected a valid full URL but got an invalid one.")}return new vh(a6(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,r={}){!function vee(n,t,e,r={}){!function uee(n,t,e,r={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,F.Sg)(i,n.app.options.projectId))}(n,t,e,r)}(this._delegate,t,e,r)}}function d6(n){return/^[A-Za-z]+:\/\//.test(n)}function Dee(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:t});return new u6(e,r)}function h6(n){const t=function Iee(n){return new bn.y(t=>{const e=c=>t.next(c);e(n.snapshot);const o=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){o()}}).pipe(function ZQ(n,t=Yg.z){return(0,In.e)((e,r)=>{let i=null,o=null,c=null;const d=()=>{if(i){i.unsubscribe(),i=null;const y=o;o=null,r.next(y)}};function f(){const y=c+n,w=t.now();if(w<y)return i=this.schedule(void 0,y-w),void r.add(i);d()}e.subscribe((0,ve.x)(r,y=>{o=y,c=t.now(),i||(i=t.schedule(f,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,S.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function HI(n){return{getDownloadURL:()=>Fe(void 0).pipe(Nn.fc,Ln(()=>n.getDownloadURL()),Nn.iC),getMetadata:()=>Fe(void 0).pipe(Nn.fc,Ln(()=>n.getMetadata()),Nn.iC),delete:()=>(0,Bt.D)(n.delete()),child:t=>HI(n.child(t)),updateMetadata:t=>(0,Bt.D)(n.updateMetadata(t)),put:(t,e)=>h6(n.put(t,e)),putString:(t,e,r)=>h6(n.putString(t,e,r)),list:t=>(0,Bt.D)(n.list(t)),listAll:()=>(0,Bt.D)(n.listAll())}}!function See(n){const t={TaskState:go,TaskEvent:GX,StringFormat:Aa,Storage:u6,Reference:vh};n.INTERNAL.registerComponent(new yc.wA("storage-compat",Dee,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(BR.Z);const Aee=new s.OlP("angularfire2.storageBucket"),Nee=new s.OlP("angularfire2.storage.maxUploadRetryTime"),xee=new s.OlP("angularfire2.storage.maxOperationRetryTime"),kee=new s.OlP("angularfire2.storage.use-emulator");let Ree=(()=>{class n{constructor(e,r,i,o,c,d,f,y,w,E){const A=(0,Bi.on)(e,c,r);this.storage=(0,Bi.cc)(`${A.name}.storage.${i}`,"AngularFireStorage",A.name,()=>{const k=c.runOutsideAngular(()=>A.storage(i||void 0)),M=w;return M&&k.useEmulator(...M),f&&k.setMaxUploadRetryTime(f),y&&k.setMaxOperationRetryTime(y),k},[f,y])}ref(e){return HI(this.storage.ref(e))}refFromURL(e){return HI(this.storage.refFromURL(e))}upload(e,r,i){return HI(this.storage.ref(e)).put(r,i)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Bi.Dh),s.LFG(Bi.xv,8),s.LFG(Aee,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(Nn.HU),s.LFG(Nee,8),s.LFG(xee,8),s.LFG(kee,8),s.LFG(jC,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Oee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})(),Mee=(()=>{class n{constructor(){YP.Z.registerVersion("angularfire",Nn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[Ree],imports:[Oee]}),n})();const f6="@firebase/database";let bF="";function g6(n){bF=n}class Fee{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,F.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,F.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class Lee{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,F.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const m6=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Fee(t)}}catch{}return new Lee},Zm=m6("localStorage"),wF=m6("sessionStorage"),Vv=new vc.Yd("@firebase/database"),_6=function(){let n=1;return function(){return n++}}(),y6=function(n){const t=(0,F.dS)(n),e=new F.gQ;e.update(t);const r=e.digest();return F.US.encodeByteArray(r)},qC=function(...n){let t="";for(let e=0;e<n.length;e++){const r=n[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=qC.apply(null,r):t+="object"==typeof r?(0,F.Pz)(r):r,t+=" "}return t};let qm=null,v6=!0;const b6=function(n,t){(0,F.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Vv.logLevel=vc.in.VERBOSE,qm=Vv.log.bind(Vv),t&&wF.set("logging_enabled",!0)):"function"==typeof n?qm=n:(qm=null,wF.remove("logging_enabled"))},ss=function(...n){if(!0===v6&&(v6=!1,null===qm&&!0===wF.get("logging_enabled")&&b6(!0)),qm){const t=qC.apply(null,n);qm(t)}},zC=function(n){return function(...t){ss(n,...t)}},CF=function(...n){const t="FIREBASE INTERNAL ERROR: "+qC(...n);Vv.error(t)},ju=function(...n){const t=`FIREBASE FATAL ERROR: ${qC(...n)}`;throw Vv.error(t),new Error(t)},Ls=function(...n){const t="FIREBASE WARNING: "+qC(...n);Vv.warn(t)},$I=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},bh="[MIN_NAME]",Hu="[MAX_NAME]",zm=function(n,t){if(n===t)return 0;if(n===bh||t===Hu)return-1;if(t===bh||n===Hu)return 1;{const e=GI(n),r=GI(t);return null!==e?null!==r?e-r==0?n.length-t.length:e-r:-1:null!==r?1:n<t?-1:1}},Vee=function(n,t){return n===t?0:n<t?-1:1},WC=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(t))},TF=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const t=[];for(const r in n)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)0!==r&&(e+=","),e+=(0,F.Pz)(t[r]),e+=":",e+=TF(n[t[r]]);return e+="}",e},w6=function(n,t){const e=n.length;if(e<=t)return[n];const r=[];for(let i=0;i<e;i+=t)r.push(n.substring(i,i+t>e?e:i+t));return r};function os(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const C6=function(n){(0,F.hu)(!$I(n),"Invalid JSON number");const r=1023;let i,o,c,d,f;0===n?(o=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=d+r,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(o=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(f=52;f;f-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(f=11;f;f-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(i?1:0),y.reverse();const w=y.join("");let E="";for(f=0;f<64;f+=8){let A=parseInt(w.substr(f,8),2).toString(16);1===A.length&&(A="0"+A),E+=A}return E.toLowerCase()},Gee=new RegExp("^-?(0*)\\d{1,10}$"),T6=-2147483648,EF=2147483647,GI=function(n){if(Gee.test(n)){const t=Number(n);if(t>=T6&&t<=EF)return t}return null},jv=function(n){try{n()}catch(t){setTimeout(()=>{throw Ls("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},Zee=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},KC=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class qee{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Ls(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class zee{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(ss("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ls(t)}}let YC=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const A6=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,k6="websocket",R6="long_polling";class SF{constructor(t,e,r,i,o=!1,c="",d=!1){this.secure=e,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zm.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Zm.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function O6(n,t,e){let r;if((0,F.hu)("string"==typeof t,"typeof type must == string"),(0,F.hu)("object"==typeof e,"typeof params must == object"),t===k6)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==R6)throw new Error("Unknown connection type: "+t);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Wee(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const i=[];return os(e,(o,c)=>{i.push(o+"="+c)}),r+i.join("&")}class Kee{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,F.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,F.p$)(this.counters_)}}const IF={},AF={};function NF(n){const t=n.toString();return IF[t]||(IF[t]=new Kee),IF[t]}class Jee{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&jv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class vp{constructor(t,e,r,i,o,c,d){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zC(t),this.stats_=NF(e),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),O6(e,R6,f))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Jee(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xF((...o)=>{const[c,d,f,y,w]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=f;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[c,d]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&A6.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vp.forceAllow_=!0}static forceDisallow(){vp.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!vp.forceAllow_&&(vp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,F.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=(0,F.h$)(e),i=w6(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,F.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class xF{constructor(t,e,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=_6(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=xF.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){ss("frame writing exception"),d.stack&&ss(d.stack),ss(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||ss("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return e+=r,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),r()})}addTag(t,e){(0,F.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{ss("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let qI=null;typeof MozWebSocket<"u"?qI=MozWebSocket:typeof WebSocket<"u"&&(qI=WebSocket);let Hv=(()=>{class n{constructor(e,r,i,o,c,d,f){this.connId=e,this.applicationId=i,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zC(this.connId),this.stats_=NF(r),this.connURL=n.connectionURL_(r,d,f,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,i,o,c){const d={v:"5"};return!(0,F.Yr)()&&typeof location<"u"&&location.hostname&&A6.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),o&&(d.ac=o),c&&(d.p=c),O6(e,k6,d)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zm.set("previous_websocket_failure",!0);try{let i;if((0,F.Yr)()){i={headers:{"User-Agent":`Firebase/5/${bF}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,d=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new qI(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&null!==qI&&!n.forceDisallow_}static previouslyFailed(){return Zm.isInMemoryStorage||!0===Zm.get("previous_websocket_failure")}markConnectionHealthy(){Zm.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,F.cI)(r);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const r=(0,F.Pz)(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=w6(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),V6=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[vp,Hv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const r=Hv&&Hv.isAvailable();let i=r&&!Hv.previouslyFailed();if(e.webSocketOnly&&(r||Ls("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Hv];else{const o=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class z6{constructor(t,e,r,i,o,c,d,f,y,w){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=f,this.onKill_=y,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zC("c:"+this.id+":"),this.transportManager_=new V6(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=KC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=WC("t",t),r=WC("d",t);if("c"===e)this.onSecondaryControl_(r);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=WC("t",t),r=WC("d",t);"c"===e?this.onControl_(r):"d"===e&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=WC("t",t);if("d"in t){const r=t.d;if("h"===e)this.onHandshake_(r);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(r):"r"===e?this.onReset_(r):"e"===e?CF("Server Error: "+r):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):CF("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==r&&Ls("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),KC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):KC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class W6{put(t,e,r,i){}merge(t,e,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}}class K6{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,F.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});const i=this.getInitialEvent(t);i&&e.apply(r,i)}off(t,e,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===e&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(t){(0,F.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class zI extends K6{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zI}getInitialEvent(t){return(0,F.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const Y6=32,J6=768;class On{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function wn(){return new On("")}function on(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function bp(n){return n.pieces_.length-n.pieceNum_}function Wn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new On(n.pieces_,t)}function RF(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function JC(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function Q6(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new On(t,0)}function Nr(n,t){const e=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)e.push(n.pieces_[r]);if(t instanceof On)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&e.push(r[i])}return new On(e,0)}function an(n){return n.pieceNum_>=n.pieces_.length}function mo(n,t){const e=on(n),r=on(t);if(null===e)return t;if(e===r)return mo(Wn(n),Wn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function vte(n,t){const e=JC(n,0),r=JC(t,0);for(let i=0;i<e.length&&i<r.length;i++){const o=zm(e[i],r[i]);if(0!==o)return o}return e.length===r.length?0:e.length<r.length?-1:1}function OF(n,t){if(bp(n)!==bp(t))return!1;for(let e=n.pieceNum_,r=t.pieceNum_;e<=n.pieces_.length;e++,r++)if(n.pieces_[e]!==t.pieces_[r])return!1;return!0}function yl(n,t){let e=n.pieceNum_,r=t.pieceNum_;if(bp(n)>bp(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}class bte{constructor(t,e){this.errorPrefix_=e,this.parts_=JC(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);X6(this)}}function X6(n){if(n.byteLength_>J6)throw new Error(n.errorPrefix_+"has a key path longer than "+J6+" bytes ("+n.byteLength_+").");if(n.parts_.length>Y6)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Y6+") or object contains a cycle "+Wm(n))}function Wm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class MF extends K6{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new MF}getInitialEvent(t){return(0,F.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const QC=1e3;let KI,Km=(()=>{class n extends W6{constructor(e,r,i,o,c,d,f,y){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=zC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=QC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");MF.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&zI.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,i){const o=++this.requestNumber_,c={r:o,a:e,b:r};this.log_((0,F.Pz)(c)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[o]=i)}get(e){this.initConnection_();const r=new F.BH,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const f=d.d;"ok"===d.s?r.resolve(f):r.reject(f)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(e,r,i,o){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const f={onComplete:o,hashFn:r,query:e,tag:i};this.listens.get(d).set(c,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(e){const r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const c={p:i};e.tag&&(c.q=r._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,f=>{const y=f.d,w=f.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(o))===e&&(this.log_("listen response",f),"ok"!==w&&this.removeListen_(i,o),e.onComplete&&e.onComplete(w,y))})}static warnOnListenWarnings_(e,r){if(e&&"object"==typeof e&&(0,F.r3)(e,"w")){const i=(0,F.DV)(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Ls(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,F.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=(0,F.w9)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const c=o.s,d=o.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,i=e.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(e,r){const i=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,e._queryObject,r)}sendUnlisten_(e,r,i,o){this.log_("Unlisten on "+e+" for "+r);const c={p:e};o&&(c.q=i,c.t=o),this.sendRequest("n",c)}onDisconnectPut(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:i})}onDisconnectMerge(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:i})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,i,o){const c={p:r,d:i};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(e,r,i,o){this.putInternal("p",e,r,i,o)}merge(e,r,i,o){this.putInternal("m",e,r,i,o)}putInternal(e,r,i,o,c){this.initConnection_();const d={p:r,d:i};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,F.Pz)(e));const r=e.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),"d"===e?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===e?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===e?this.onListenRevoked_(r.p,r.q):"ac"===e?this.onAuthRevoked_(r.s,r.d):"apc"===e?this.onAppCheckRevoked_(r.s,r.d):"sd"===e?this.onSecurityDebugPacket_(r):CF("Unrecognized action received from server: "+(0,F.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=QC,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=QC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=QC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Te.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const r=e.onDataMessage_.bind(e),i=e.onReady_.bind(e),o=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let f=!1,y=null;const w=function(){y?y.close():(f=!0,o())};e.realtime_={close:w,sendRequest:function(k){(0,F.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(k)}};const A=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[k,M]=yield Promise.all([e.authTokenProvider_.getToken(A),e.appCheckTokenProvider_.getToken(A)]);f?ss("getToken() completed but was canceled"):(ss("getToken() completed. Creating connection."),e.authToken_=k&&k.accessToken,e.appCheckToken_=M&&M.token,y=new z6(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,r,i,o,V=>{Ls(V+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(k){e.log_("Failed to get token: "+k),f||(e.repoInfo_.nodeAdmin&&Ls(k),w())}}})()}interrupt(e){ss("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ss("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=QC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let i;i=r?r.map(c=>TF(c)).join("$"):"default";const o=this.removeListen_(e,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,r){const i=new On(e).toString();let o;if(this.listens.has(i)){const c=this.listens.get(i);o=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(e,r){ss("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){ss("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+r+"."+bF.replace(/\./g,"-")]=1,(0,F.uI)()?e["framework.cordova"]=1:(0,F.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=zI.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class un{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new un(t,e)}}class WI{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const r=new un(bh,t),i=new un(bh,e);return 0!==this.compare(r,i)}minPost(){return un.MIN}}class nG extends WI{static get __EMPTY_NODE(){return KI}static set __EMPTY_NODE(t){KI=t}compare(t,e){return zm(t.name,e.name)}isDefinedOn(t){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return un.MIN}maxPost(){return new un(Hu,KI)}makePost(t,e){return(0,F.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new un(t,KI)}toString(){return".key"}}const $u=new nG;class YI{constructor(t,e,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(c=e?r(t.key,e):1,i&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let FF,Tc=(()=>{class n{constructor(e,r,i,o,c){this.key=e,this.value=r,this.color=i??n.RED,this.left=o??Ho.EMPTY_NODE,this.right=c??Ho.EMPTY_NODE}copy(e,r,i,o,c){return new n(e??this.key,r??this.value,i??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,r,i),null):0===c?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(e,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ho.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let i,o;if(i=this,r(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(e,i.key)){if(i.right.isEmpty())return Ho.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ho{constructor(t,e=Ho.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ho(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Tc.BLACK,null,null))}remove(t){return new Ho(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Tc.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,i=null;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new YI(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new YI(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new YI(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new YI(this.root_,null,this.comparator_,!0,t)}}function Ate(n,t){return zm(n.name,t.name)}function PF(n,t){return zm(n,t)}Ho.EMPTY_NODE=new class Ite{copy(t,e,r,i,o){return this}insert(t,e,r){return new Tc(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const rG=function(n){return"number"==typeof n?"number:"+C6(n):"string:"+n},iG=function(n){if(n.isLeafNode()){const t=n.val();(0,F.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,F.r3)(t,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===FF||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===FF||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let sG,oG,aG,$v=(()=>{class n{constructor(e,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),iG(this.priorityNode_)}static set __childrenNodeConstructor(e){sG=e}static get __childrenNodeConstructor(){return sG}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return an(e)?this:".priority"===on(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return".priority"===e?this.updatePriority(r):r.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const i=on(e);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,F.hu)(".priority"!==i||1===bp(e),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Wn(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+rG(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",e+="number"===r?C6(this.value_):this.value_,this.lazyHash_=y6(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,F.hu)(o>=0,"Unknown leaf type: "+r),(0,F.hu)(c>=0,"Unknown leaf type: "+i),o===c?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const tr=new class Rte extends WI{compare(t,e){const r=t.node.getPriority(),i=e.node.getPriority(),o=r.compareTo(i);return 0===o?zm(t.name,e.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return un.MIN}maxPost(){return new un(Hu,new $v("[PRIORITY-POST]",aG))}makePost(t,e){const r=oG(t);return new un(e,new $v("[PRIORITY-POST]",r))}toString(){return".priority"}},Ote=Math.log(2);class Mte{constructor(t){this.count=parseInt(Math.log(t+1)/Ote,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const JI=function(n,t,e,r){n.sort(t);const i=function(f,y){const w=y-f;let E,A;if(0===w)return null;if(1===w)return E=n[f],A=e?e(E):E,new Tc(A,E.node,Tc.BLACK,null,null);{const k=parseInt(w/2,10)+f,M=i(f,k),V=i(k+1,y);return E=n[k],A=e?e(E):E,new Tc(A,E.node,Tc.BLACK,M,V)}},d=function(f){let y=null,w=null,E=n.length;const A=function(M,V){const W=E-M,ne=E;E-=M;const he=i(W+1,ne),Ie=n[W],me=e?e(Ie):Ie;k(new Tc(me,Ie.node,V,null,he))},k=function(M){y?(y.left=M,y=M):(w=M,y=M)};for(let M=0;M<f.count;++M){const V=f.nextBitIsOne(),W=Math.pow(2,f.count-(M+1));V?A(W,Tc.BLACK):(A(W,Tc.BLACK),A(W,Tc.RED))}return w}(new Mte(n.length));return new Ho(r||t,d)};let LF;const Gv={};class wh{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,F.hu)(Gv&&tr,"ChildrenNode.ts has not been loaded"),LF=LF||new wh({".priority":Gv},{".priority":tr}),LF}get(t){const e=(0,F.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ho?e:null}hasIndex(t){return(0,F.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,F.hu)(t!==$u,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=e.getIterator(un.Wrap);let d,c=o.getNext();for(;c;)i=i||t.isDefinedOn(c.node),r.push(c),c=o.getNext();d=i?JI(r,t.getCompare()):Gv;const f=t.toString(),y=Object.assign({},this.indexSet_);y[f]=t;const w=Object.assign({},this.indexes_);return w[f]=d,new wh(w,y)}addToIndexes(t,e){const r=(0,F.UI)(this.indexes_,(i,o)=>{const c=(0,F.DV)(this.indexSet_,o);if((0,F.hu)(c,"Missing index implementation for "+o),i===Gv){if(c.isDefinedOn(t.node)){const d=[],f=e.getIterator(un.Wrap);let y=f.getNext();for(;y;)y.name!==t.name&&d.push(y),y=f.getNext();return d.push(t),JI(d,c.getCompare())}return Gv}{const d=e.get(t.name);let f=i;return d&&(f=f.remove(new un(t.name,d))),f.insert(t,t.node)}});return new wh(r,this.indexSet_)}removeFromIndexes(t,e){const r=(0,F.UI)(this.indexes_,i=>{if(i===Gv)return i;{const o=e.get(t.name);return o?i.remove(new un(t.name,o)):i}});return new wh(r,this.indexSet_)}}let XC,Jt=(()=>{class n{constructor(e,r,i){this.children_=e,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&iG(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return XC||(XC=new n(new Ho(PF),null,wh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||XC}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const r=this.children_.get(e);return null===r?XC:r}}getChild(e){const r=on(e);return null===r?this:this.getImmediateChild(r).getChild(Wn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(r);{const i=new un(e,r);let o,c;r.isEmpty()?(o=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,r),c=this.indexMap_.addToIndexes(i,this.children_));const d=o.isEmpty()?XC:this.priorityNode_;return new n(o,d,c)}}updateChild(e,r){const i=on(e);if(null===i)return r;{(0,F.hu)(".priority"!==on(e)||1===bp(e),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Wn(e),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let i=0,o=0,c=!0;if(this.forEachChild(tr,(d,f)=>{r[d]=f.val(e),i++,c&&n.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):c=!1}),!e&&c&&o<2*i){const d=[];for(const f in r)d[f]=r[f];return d}return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+rG(this.getPriority().val())+":"),this.forEachChild(tr,(r,i)=>{const o=i.hash();""!==o&&(e+=":"+r+":"+o)}),this.lazyHash_=""===e?"":y6(e)}return this.lazyHash_}getPredecessorChildName(e,r,i){const o=this.resolveIndex_(i);if(o){const c=o.getPredecessorKey(new un(e,r));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new un(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new un(r,this.children_.get(r)):null}forEachChild(e,r){const i=this.resolveIndex_(e);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,un.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,e)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,un.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,e)>0;)o.getNext(),c=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===e1?-1:0}withIndex(e){if(e===$u||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===$u||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(tr),o=r.getIterator(tr);let c=i.getNext(),d=o.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=i.getNext(),d=o.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(e){return e===$u?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const e1=new class Pte extends Jt{constructor(){super(new Ho(PF),Jt.EMPTY_NODE,wh.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Jt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(un,{MIN:{value:new un(bh,Jt.EMPTY_NODE)},MAX:{value:new un(Hu,e1)}}),nG.__EMPTY_NODE=Jt.EMPTY_NODE,$v.__childrenNodeConstructor=Jt,function Nte(n){FF=n}(e1),function kte(n){aG=n}(e1);const Fte=!0;function Vr(n,t=null){if(null===n)return Jt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,F.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new $v(n,Vr(t));if(n instanceof Array||!Fte){let e=Jt.EMPTY_NODE;return os(n,(r,i)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const o=Vr(i);(o.isLeafNode()||!o.isEmpty())&&(e=e.updateImmediateChild(r,o))}}),e.updatePriority(Vr(t))}{const e=[];let r=!1;if(os(n,(c,d)=>{if("."!==c.substring(0,1)){const f=Vr(d);f.isEmpty()||(r=r||!f.getPriority().isEmpty(),e.push(new un(c,f)))}}),0===e.length)return Jt.EMPTY_NODE;const o=JI(e,Ate,c=>c.name,PF);if(r){const c=JI(e,tr.getCompare());return new Jt(o,Vr(t),new wh({".priority":c},{".priority":tr}))}return new Jt(o,Vr(t),wh.Default)}}!function xte(n){oG=n}(Vr);class UF extends WI{constructor(t){super(),this.indexPath_=t,(0,F.hu)(!an(t)&&".priority"!==on(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const r=this.extractChild(t.node),i=this.extractChild(e.node),o=r.compareTo(i);return 0===o?zm(t.name,e.name):o}makePost(t,e){const r=Vr(t),i=Jt.EMPTY_NODE.updateChild(this.indexPath_,r);return new un(e,i)}maxPost(){const t=Jt.EMPTY_NODE.updateChild(this.indexPath_,e1);return new un(Hu,t)}toString(){return JC(this.indexPath_,0).join("/")}}const BF=new class Lte extends WI{compare(t,e){const r=t.node.compareTo(e.node);return 0===r?zm(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return un.MIN}maxPost(){return un.MAX}makePost(t,e){const r=Vr(t);return new un(e,r)}toString(){return".value"}},Zv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ute=function(){let n=0;const t=[];return function(e){const r=e===n;let i;n=e;const o=new Array(8);for(i=7;i>=0;i--)o[i]=Zv.charAt(e%64),e=Math.floor(e/64);(0,F.hu)(0===e,"Cannot push at time == 0");let c=o.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=Zv.charAt(t[i]);return(0,F.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),uG=function(n){if(n===""+EF)return"-";const t=GI(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let c=0;c<e.length;c++)e[c]=n.charAt(c);if(e.length<786)return e.push("-"),e.join("");let r=e.length-1;for(;r>=0&&"z"===e[r];)r--;if(-1===r)return Hu;const o=Zv.charAt(Zv.indexOf(e[r])+1);return e[r]=o,e.slice(0,r+1).join("")},dG=function(n){if(n===""+T6)return bh;const t=GI(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let r=0;r<e.length;r++)e[r]=n.charAt(r);return"-"===e[e.length-1]?1===e.length?""+EF:(delete e[e.length-1],e.join("")):(e[e.length-1]=Zv.charAt(Zv.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function hG(n){return{type:"value",snapshotNode:n}}function qv(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function t1(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function n1(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class jF{constructor(t){this.index_=t}updateChild(t,e,r,i,o,c){(0,F.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?t.hasChild(e)?c.trackChildChange(t1(e,d)):(0,F.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(qv(e,r)):c.trackChildChange(n1(e,r,d))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(t,e,r){return null!=r&&(t.isLeafNode()||t.forEachChild(tr,(i,o)=>{e.hasChild(i)||r.trackChildChange(t1(i,o))}),e.isLeafNode()||e.forEachChild(tr,(i,o)=>{if(t.hasChild(i)){const c=t.getImmediateChild(i);c.equals(o)||r.trackChildChange(n1(i,o,c))}else r.trackChildChange(qv(i,o))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Jt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class r1{constructor(t){this.indexedFilter_=new jF(t.getIndex()),this.index_=t.getIndex(),this.startPost_=r1.getStartPost_(t),this.endPost_=r1.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,r,i,o,c){return this.matches(new un(e,r))||(r=Jt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,r,i,o,c)}updateFullNode(t,e,r){e.isLeafNode()&&(e=Jt.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(Jt.EMPTY_NODE);const o=this;return e.forEachChild(tr,(c,d)=>{o.matches(new un(c,d))||(i=i.updateImmediateChild(c,Jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Vte{constructor(t){this.rangedFilter_=new r1(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,r,i,o,c){return this.rangedFilter_.matches(new un(e,r))||(r=Jt.EMPTY_NODE),t.getImmediateChild(e).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,r,i,o,c):this.fullLimitUpdateChild_(t,e,r,o,c)}updateFullNode(t,e,r){let i;if(e.isLeafNode()||e.isEmpty())i=Jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let o;i=Jt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){const d=o.getNext();let f;if(f=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!f)break;i=i.updateImmediateChild(d.name,d.node),c++}}else{let o,c,d,f;if(i=e.withIndex(this.index_),i=i.updatePriority(Jt.EMPTY_NODE),this.reverse_){f=i.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const E=this.index_.getCompare();d=(A,k)=>E(k,A)}else f=i.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,w=!1;for(;f.hasNext();){const E=f.getNext();!w&&d(o,E)<=0&&(w=!0),w&&y<this.limit_&&d(E,c)<=0?y++:i=i.updateImmediateChild(E.name,Jt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,r,i,o){let c;if(this.reverse_){const E=this.index_.getCompare();c=(A,k)=>E(k,A)}else c=this.index_.getCompare();const d=t;(0,F.hu)(d.numChildren()===this.limit_,"");const f=new un(e,r),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),w=this.rangedFilter_.matches(f);if(d.hasChild(e)){const E=d.getImmediateChild(e);let A=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=A&&(A.name===e||d.hasChild(A.name));)A=i.getChildAfterChild(this.index_,A,this.reverse_);const k=null==A?1:c(A,f);if(w&&!r.isEmpty()&&k>=0)return o?.trackChildChange(n1(e,r,E)),d.updateImmediateChild(e,r);{o?.trackChildChange(t1(e,E));const V=d.updateImmediateChild(e,Jt.EMPTY_NODE);return null!=A&&this.rangedFilter_.matches(A)?(o?.trackChildChange(qv(A.name,A.node)),V.updateImmediateChild(A.name,A.node)):V}}return r.isEmpty()?t:w&&c(y,f)>=0?(null!=o&&(o.trackChildChange(t1(y.name,y.node)),o.trackChildChange(qv(e,r))),d.updateImmediateChild(e,r).updateImmediateChild(y.name,Jt.EMPTY_NODE)):t}}class QI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:bh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Hu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tr}copy(){const t=new QI;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function HF(n,t,e){const r=n.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=e?(r.startNameSet_=!0,r.indexStartName_=e):(r.startNameSet_=!1,r.indexStartName_=""),r}function $F(n,t,e){const r=n.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==e?(r.endNameSet_=!0,r.indexEndName_=e):(r.endNameSet_=!1,r.indexEndName_=""),r}function XI(n,t){const e=n.copy();return e.index_=t,e}function fG(n){const t={};if(n.isDefault())return t;let e;return n.index_===tr?e="$priority":n.index_===BF?e="$value":n.index_===$u?e="$key":((0,F.hu)(n.index_ instanceof UF,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,F.Pz)(e),n.startSet_&&(t.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function pG(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==tr&&(t.i=n.index_.toString()),t}class eA extends W6{constructor(t,e,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=zC("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,F.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,r,i){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const c=eA.getListenId_(t,r),d={};this.listens_[c]=d;const f=fG(t._queryParams);this.restRequest_(o+".json",f,(y,w)=>{let E=w;if(404===y&&(E=null,y=null),null===y&&this.onDataUpdate_(o,E,!1,r),(0,F.DV)(this.listens_,c)===d){let A;A=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(A,null)}})}unlisten(t,e){const r=eA.getListenId_(t,e);delete this.listens_[r]}get(t){const e=fG(t._queryParams),r=t._path.toString(),i=new F.BH;return this.restRequest_(r+".json",e,(o,c)=>{let d=c;404===o&&(d=null,o=null),null===o?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(e.auth=i.accessToken),o&&o.token&&(e.ac=o.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,F.xO)(e);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,F.cI)(d.responseText)}catch{Ls("Failed to parse JSON response for "+c+": "+d.responseText)}r(null,f)}else 401!==d.status&&404!==d.status&&Ls("Got unsuccessful REST response for "+c+" Status: "+d.status),r(d.status);r=null}},d.open("GET",c,!0),d.send()})}}class qte{constructor(){this.rootNode_=Jt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function tA(){return{value:null,children:new Map}}function zv(n,t,e){if(an(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const r=on(t);n.children.has(r)||n.children.set(r,tA()),zv(n.children.get(r),t=Wn(t),e)}}function GF(n,t){if(an(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(tr,(r,i)=>{zv(n,new On(r),i)}),GF(n,t)}}if(n.children.size>0){const e=on(t);return t=Wn(t),n.children.has(e)&&GF(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function ZF(n,t,e){null!==n.value?e(t,n.value):function zte(n,t){n.children.forEach((e,r)=>{t(r,e)})}(n,(r,i)=>{ZF(i,new On(t.toString()+"/"+r),e)})}class Wte{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&os(this.last_,(r,i)=>{e[r]=e[r]-i}),this.last_=t,e}}class Jte{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Wte(t);const r=1e4+2e4*Math.random();KC(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),e={};let r=!1;os(t,(i,o)=>{o>0&&(0,F.r3)(this.statsToReport_,i)&&(e[i]=o,r=!0)}),r&&this.server_.reportStats(e),KC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var vl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(vl||(vl={})),vl))();function WF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class nA{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=vl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(an(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new On(t));return new nA(wn(),e,this.revert)}}return(0,F.hu)(on(this.path)===t,"operationForChild called for unrelated child."),new nA(Wn(this.path),this.affectedTree,this.revert)}}class i1{constructor(t,e){this.source=t,this.path=e,this.type=vl.LISTEN_COMPLETE}operationForChild(t){return an(this.path)?new i1(this.source,wn()):new i1(this.source,Wn(this.path))}}class Ym{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=vl.OVERWRITE}operationForChild(t){return an(this.path)?new Ym(this.source,wn(),this.snap.getImmediateChild(t)):new Ym(this.source,Wn(this.path),this.snap)}}class Wv{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=vl.MERGE}operationForChild(t){if(an(this.path)){const e=this.children.subtree(new On(t));return e.isEmpty()?null:e.value?new Ym(this.source,wn(),e.value):new Wv(this.source,wn(),e)}return(0,F.hu)(on(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Wv(this.source,Wn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class wp{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(an(t))return this.isFullyInitialized()&&!this.filtered_;const e=on(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Qte{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function s1(n,t,e,r,i,o){const c=r.filter(d=>d.type===e);c.sort((d,f)=>function tne(n,t,e){if(null==t.childName||null==e.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new un(t.childName,t.snapshotNode),i=new un(e.childName,e.snapshotNode);return n.index_.compare(r,i)}(n,d,f)),c.forEach(d=>{const f=function ene(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,o);i.forEach(y=>{y.respondsTo(d.type)&&t.push(y.createEvent(f,n.query_))})})}function rA(n,t){return{eventCache:n,serverCache:t}}function o1(n,t,e,r){return rA(new wp(t,e,r),n.serverCache)}function mG(n,t,e,r){return rA(n.eventCache,new wp(t,e,r))}function iA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Jm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let KF;class nr{constructor(t,e=(()=>(KF||(KF=new Ho(Vee)),KF))()){this.value=t,this.children=e}static fromObject(t){let e=new nr(null);return os(t,(r,i)=>{e=e.set(new On(r),i)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:wn(),value:this.value};if(an(t))return null;{const r=on(t),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Wn(t),e);return null!=o?{path:Nr(new On(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(an(t))return this;{const e=on(t),r=this.children.get(e);return null!==r?r.subtree(Wn(t)):new nr(null)}}set(t,e){if(an(t))return new nr(e,this.children);{const r=on(t),o=(this.children.get(r)||new nr(null)).set(Wn(t),e),c=this.children.insert(r,o);return new nr(this.value,c)}}remove(t){if(an(t))return this.children.isEmpty()?new nr(null):new nr(null,this.children);{const e=on(t),r=this.children.get(e);if(r){const i=r.remove(Wn(t));let o;return o=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&o.isEmpty()?new nr(null):new nr(this.value,o)}return this}}get(t){if(an(t))return this.value;{const e=on(t),r=this.children.get(e);return r?r.get(Wn(t)):null}}setTree(t,e){if(an(t))return e;{const r=on(t),o=(this.children.get(r)||new nr(null)).setTree(Wn(t),e);let c;return c=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new nr(this.value,c)}}fold(t){return this.fold_(wn(),t)}fold_(t,e){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Nr(t,i),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,wn(),e)}findOnPath_(t,e,r){const i=!!this.value&&r(e,this.value);if(i)return i;if(an(t))return null;{const o=on(t),c=this.children.get(o);return c?c.findOnPath_(Wn(t),Nr(e,o),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,wn(),e)}foreachOnPath_(t,e,r){if(an(t))return this;{this.value&&r(e,this.value);const i=on(t),o=this.children.get(i);return o?o.foreachOnPath_(Wn(t),Nr(e,i),r):new nr(null)}}foreach(t){this.foreach_(wn(),t)}foreach_(t,e){this.children.inorderTraversal((r,i)=>{i.foreach_(Nr(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}}class Ec{constructor(t){this.writeTree_=t}static empty(){return new Ec(new nr(null))}}function a1(n,t,e){if(an(t))return new Ec(new nr(e));{const r=n.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const c=mo(i,t);return o=o.updateChild(c,e),new Ec(n.writeTree_.set(i,o))}{const i=new nr(e),o=n.writeTree_.setTree(t,i);return new Ec(o)}}}function YF(n,t,e){let r=n;return os(e,(i,o)=>{r=a1(r,Nr(t,i),o)}),r}function _G(n,t){if(an(t))return Ec.empty();{const e=n.writeTree_.setTree(t,new nr(null));return new Ec(e)}}function JF(n,t){return null!=Qm(n,t)}function Qm(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(mo(e.path,t)):null}function yG(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(tr,(r,i)=>{t.push(new un(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&t.push(new un(r,i.value))}),t}function Cp(n,t){if(an(t))return n;{const e=Qm(n,t);return new Ec(null!=e?new nr(e):n.writeTree_.subtree(t))}}function QF(n){return n.writeTree_.isEmpty()}function Kv(n,t){return vG(wn(),n.writeTree_,t)}function vG(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{".priority"===i?((0,F.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):e=vG(Nr(n,i),o,e)}),!e.getChild(n).isEmpty()&&null!==r&&(e=e.updateChild(Nr(n,".priority"),r)),e}}function sA(n,t){return EG(t,n)}function ane(n,t){if(n.snap)return yl(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&yl(Nr(n.path,e),t))return!0;return!1}function cne(n){return n.visible}function bG(n,t,e){let r=Ec.empty();for(let i=0;i<n.length;++i){const o=n[i];if(t(o)){const c=o.path;let d;if(o.snap)yl(e,c)?(d=mo(e,c),r=a1(r,d,o.snap)):yl(c,e)&&(d=mo(c,e),r=a1(r,wn(),o.snap.getChild(d)));else{if(!o.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(yl(e,c))d=mo(e,c),r=YF(r,d,o.children);else if(yl(c,e))if(d=mo(c,e),an(d))r=YF(r,wn(),o.children);else{const f=(0,F.DV)(o.children,on(d));if(f){const y=f.getChild(Wn(d));r=a1(r,wn(),y)}}}}}return r}function wG(n,t,e,r,i){if(r||i){const o=Cp(n.visibleWrites,t);return!i&&QF(o)?e:i||null!=e||JF(o,wn())?Kv(bG(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(yl(y.path,t)||yl(t,y.path))},t),e||Jt.EMPTY_NODE):null}{const o=Qm(n.visibleWrites,t);if(null!=o)return o;{const c=Cp(n.visibleWrites,t);return QF(c)?e:null!=e||JF(c,wn())?Kv(c,e||Jt.EMPTY_NODE):null}}}function oA(n,t,e,r){return wG(n.writeTree,n.treePath,t,e,r)}function XF(n,t){return function une(n,t,e){let r=Jt.EMPTY_NODE;const i=Qm(n.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(tr,(o,c)=>{r=r.updateImmediateChild(o,c)}),r;if(e){const o=Cp(n.visibleWrites,t);return e.forEachChild(tr,(c,d)=>{const f=Kv(Cp(o,new On(c)),d);r=r.updateImmediateChild(c,f)}),yG(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return yG(Cp(n.visibleWrites,t)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,t)}function CG(n,t,e,r){return function dne(n,t,e,r,i){(0,F.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Nr(t,e);if(JF(n.visibleWrites,o))return null;{const c=Cp(n.visibleWrites,o);return QF(c)?i.getChild(e):Kv(c,i.getChild(e))}}(n.writeTree,n.treePath,t,e,r)}function aA(n,t){return function fne(n,t){return Qm(n.visibleWrites,t)}(n.writeTree,Nr(n.treePath,t))}function eL(n,t,e){return function hne(n,t,e,r){const i=Nr(t,e),o=Qm(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(e)?Kv(Cp(n.visibleWrites,i),r.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function TG(n,t){return EG(Nr(n.treePath,t),n.writeTree)}function EG(n,t){return{treePath:n,writeTree:t}}class _ne{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,r=t.childName;(0,F.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(r,n1(r,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(r,t1(r,i.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(r,qv(r,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw(0,F.g5)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(r,n1(r,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const DG=new class yne{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}};class tL{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new wp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return eL(this.writes_,t,r)}}getChildAfterChild(t,e,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Jm(this.viewCache_),o=function mne(n,t,e,r,i,o){return function pne(n,t,e,r,i,o,c){let d;const f=Cp(n.visibleWrites,t),y=Qm(f,wn());if(null!=y)d=y;else{if(null==e)return[];d=Kv(f,e)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const w=[],E=c.getCompare(),A=o?d.getReverseIteratorFrom(r,c):d.getIteratorFrom(r,c);let k=A.getNext();for(;k&&w.length<i;)0!==E(k,r)&&w.push(k),k=A.getNext();return w}}(n.writeTree,n.treePath,t,e,r,i,o)}(this.writes_,i,e,1,r,t);return 0===o.length?null:o[0]}}function SG(n,t,e,r,i,o){const c=t.eventCache;if(null!=aA(r,e))return t;{let d,f;if(an(e))if((0,F.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const y=Jm(t),E=XF(r,y instanceof Jt?y:Jt.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),E,o)}else{const y=oA(r,Jm(t));d=n.filter.updateFullNode(t.eventCache.getNode(),y,o)}else{const y=on(e);if(".priority"===y){(0,F.hu)(1===bp(e),"Can't have a priority with additional path components");const w=c.getNode();f=t.serverCache.getNode();const E=CG(r,e,w,f);d=null!=E?n.filter.updatePriority(w,E):c.getNode()}else{const w=Wn(e);let E;if(c.isCompleteForChild(y)){f=t.serverCache.getNode();const A=CG(r,e,c.getNode(),f);E=null!=A?c.getNode().getImmediateChild(y).updateChild(w,A):c.getNode().getImmediateChild(y)}else E=eL(r,y,t.serverCache);d=null!=E?n.filter.updateChild(c.getNode(),y,E,w,i,o):c.getNode()}}return o1(t,d,c.isFullyInitialized()||an(e),n.filter.filtersNodes())}}function lA(n,t,e,r,i,o,c,d){const f=t.serverCache;let y;const w=c?n.filter:n.filter.getIndexedFilter();if(an(e))y=w.updateFullNode(f.getNode(),r,null);else if(w.filtersNodes()&&!f.isFiltered()){const k=f.getNode().updateChild(e,r);y=w.updateFullNode(f.getNode(),k,null)}else{const k=on(e);if(!f.isCompleteForPath(e)&&bp(e)>1)return t;const M=Wn(e),W=f.getNode().getImmediateChild(k).updateChild(M,r);y=".priority"===k?w.updatePriority(f.getNode(),W):w.updateChild(f.getNode(),k,W,M,DG,null)}const E=mG(t,y,f.isFullyInitialized()||an(e),w.filtersNodes());return SG(n,E,e,i,new tL(i,E,o),d)}function nL(n,t,e,r,i,o,c){const d=t.eventCache;let f,y;const w=new tL(i,t,o);if(an(e))y=n.filter.updateFullNode(t.eventCache.getNode(),r,c),f=o1(t,y,!0,n.filter.filtersNodes());else{const E=on(e);if(".priority"===E)y=n.filter.updatePriority(t.eventCache.getNode(),r),f=o1(t,y,d.isFullyInitialized(),d.isFiltered());else{const A=Wn(e),k=d.getNode().getImmediateChild(E);let M;if(an(A))M=r;else{const V=w.getCompleteChild(E);M=null!=V?".priority"===RF(A)&&V.getChild(Q6(A)).isEmpty()?V:V.updateChild(A,r):Jt.EMPTY_NODE}f=k.equals(M)?t:o1(t,n.filter.updateChild(d.getNode(),E,M,A,w,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function IG(n,t){return n.eventCache.isCompleteForChild(t)}function AG(n,t,e){return e.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function rL(n,t,e,r,i,o,c,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let y,f=t;y=an(e)?r:new nr(null).setTree(e,r);const w=t.serverCache.getNode();return y.children.inorderTraversal((E,A)=>{if(w.hasChild(E)){const M=AG(0,t.serverCache.getNode().getImmediateChild(E),A);f=lA(n,f,new On(E),M,i,o,c,d)}}),y.children.inorderTraversal((E,A)=>{const k=!t.serverCache.isCompleteForChild(E)&&null===A.value;if(!w.hasChild(E)&&!k){const V=AG(0,t.serverCache.getNode().getImmediateChild(E),A);f=lA(n,f,new On(E),V,i,o,c,d)}}),f}class Ine{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new jF(r.getIndex()),o=function jte(n){return n.loadsAllData()?new jF(n.getIndex()):n.hasLimit()?new Vte(n):new r1(n)}(r);this.processor_=function vne(n){return{filter:n}}(o);const c=e.serverCache,d=e.eventCache,f=i.updateFullNode(Jt.EMPTY_NODE,c.getNode(),null),y=o.updateFullNode(Jt.EMPTY_NODE,d.getNode(),null),w=new wp(f,c.isFullyInitialized(),i.filtersNodes()),E=new wp(y,d.isFullyInitialized(),o.filtersNodes());this.viewCache_=rA(E,w),this.eventGenerator_=new Qte(this.query_)}get query(){return this.query_}}function xne(n,t){const e=Jm(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!an(t)&&!e.getImmediateChild(on(t)).isEmpty())?e.getChild(t):null}function NG(n){return 0===n.eventRegistrations_.length}function xG(n,t,e){const r=[];if(e){(0,F.hu)(null==t,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const c=o.createCancelEvent(e,i);c&&r.push(c)})}if(t){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const c=n.eventRegistrations_[o];if(c.matches(t)){if(t.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function kG(n,t,e,r){t.type===vl.MERGE&&null!==t.source.queryId&&((0,F.hu)(Jm(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(iA(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function wne(n,t,e,r,i){const o=new _ne;let c,d;if(e.type===vl.OVERWRITE){const y=e;y.source.fromUser?c=nL(n,t,y.path,y.snap,r,i,o):((0,F.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||t.serverCache.isFiltered()&&!an(y.path),c=lA(n,t,y.path,y.snap,r,i,d,o))}else if(e.type===vl.MERGE){const y=e;y.source.fromUser?c=function Tne(n,t,e,r,i,o,c){let d=t;return r.foreach((f,y)=>{const w=Nr(e,f);IG(t,on(w))&&(d=nL(n,d,w,y,i,o,c))}),r.foreach((f,y)=>{const w=Nr(e,f);IG(t,on(w))||(d=nL(n,d,w,y,i,o,c))}),d}(n,t,y.path,y.children,r,i,o):((0,F.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||t.serverCache.isFiltered(),c=rL(n,t,y.path,y.children,r,i,d,o))}else if(e.type===vl.ACK_USER_WRITE){const y=e;c=y.revert?function Sne(n,t,e,r,i,o){let c;if(null!=aA(r,e))return t;{const d=new tL(r,t,i),f=t.eventCache.getNode();let y;if(an(e)||".priority"===on(e)){let w;if(t.serverCache.isFullyInitialized())w=oA(r,Jm(t));else{const E=t.serverCache.getNode();(0,F.hu)(E instanceof Jt,"serverChildren would be complete if leaf node"),w=XF(r,E)}y=n.filter.updateFullNode(f,w,o)}else{const w=on(e);let E=eL(r,w,t.serverCache);null==E&&t.serverCache.isCompleteForChild(w)&&(E=f.getImmediateChild(w)),y=null!=E?n.filter.updateChild(f,w,E,Wn(e),d,o):t.eventCache.getNode().hasChild(w)?n.filter.updateChild(f,w,Jt.EMPTY_NODE,Wn(e),d,o):f,y.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=oA(r,Jm(t)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,o)))}return c=t.serverCache.isFullyInitialized()||null!=aA(r,wn()),o1(t,y,c,n.filter.filtersNodes())}}(n,t,y.path,r,i,o):function Ene(n,t,e,r,i,o,c){if(null!=aA(i,e))return t;const d=t.serverCache.isFiltered(),f=t.serverCache;if(null!=r.value){if(an(e)&&f.isFullyInitialized()||f.isCompleteForPath(e))return lA(n,t,e,f.getNode().getChild(e),i,o,d,c);if(an(e)){let y=new nr(null);return f.getNode().forEachChild($u,(w,E)=>{y=y.set(new On(w),E)}),rL(n,t,e,y,i,o,d,c)}return t}{let y=new nr(null);return r.foreach((w,E)=>{const A=Nr(e,w);f.isCompleteForPath(A)&&(y=y.set(w,f.getNode().getChild(A)))}),rL(n,t,e,y,i,o,d,c)}}(n,t,y.path,y.affectedTree,r,i,o)}else{if(e.type!==vl.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+e.type);c=function Dne(n,t,e,r,i){const o=t.serverCache;return SG(n,mG(t,o.getNode(),o.isFullyInitialized()||an(e),o.isFiltered()),e,r,DG,i)}(n,t,e.path,r,o)}const f=o.getChanges();return function Cne(n,t,e){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=iA(n);(e.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&e.push(hG(iA(t)))}}(t,c,f),{viewCache:c,changes:f}}(n.processor_,i,t,e,r);return function bne(n,t){(0,F.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,F.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,RG(n,o.changes,o.viewCache.eventCache.getNode(),null)}function RG(n,t,e,r){return function Xte(n,t,e,r){const i=[],o=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(function Bte(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),s1(n,i,"child_removed",t,r,e),s1(n,i,"child_added",t,r,e),s1(n,i,"child_moved",o,r,e),s1(n,i,"child_changed",t,r,e),s1(n,i,"value",t,r,e),i}(n.eventGenerator_,t,e,r?[r]:n.eventRegistrations_)}let cA,dA;class OG{constructor(){this.views=new Map}}function iL(n,t,e,r){const i=t.source.queryId;if(null!==i){const o=n.views.get(i);return(0,F.hu)(null!=o,"SyncTree gave us an op for an invalid query."),kG(o,t,e,r)}{let o=[];for(const c of n.views.values())o=o.concat(kG(c,t,e,r));return o}}function MG(n,t,e,r,i){const c=n.views.get(t._queryIdentifier);if(!c){let d=oA(e,i?r:null),f=!1;d?f=!0:r instanceof Jt?(d=XF(e,r),f=!1):(d=Jt.EMPTY_NODE,f=!1);const y=rA(new wp(d,f,!1),new wp(r,i,!1));return new Ine(t,y)}return c}function PG(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Tp(n,t){let e=null;for(const r of n.views.values())e=e||xne(r,t);return e}function FG(n,t){return t._queryParams.loadsAllData()?uA(n):n.views.get(t._queryIdentifier)}function LG(n,t){return null!=FG(n,t)}function Ep(n){return null!=uA(n)}function uA(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Vne=1;class UG{constructor(t){this.listenProvider_=t,this.syncPointTree_=new nr(null),this.pendingWriteTree_=function gne(){return{visibleWrites:Ec.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sL(n,t,e,r,i){return function rne(n,t,e,r,i){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:t,snap:e,writeId:r,visible:i}),i&&(n.visibleWrites=a1(n.visibleWrites,t,e)),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r,i),i?Yv(n,new Ym({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Dp(n,t,e=!1){const r=function sne(n,t){for(let e=0;e<n.allWrites.length;e++){const r=n.allWrites[e];if(r.writeId===t)return r}return null}(n.pendingWriteTree_,t);if(function one(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,F.hu)(e>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[e];n.allWrites.splice(e,1);let i=r.visible,o=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=e&&ane(d,r.path)?i=!1:yl(r.path,d.path)&&(o=!0)),c--}return!!i&&(o?(function lne(n){n.visibleWrites=bG(n.allWrites,cne,wn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=_G(n.visibleWrites,r.path):os(r.children,f=>{n.visibleWrites=_G(n.visibleWrites,Nr(r.path,f))}),!0))}(n.pendingWriteTree_,t)){let o=new nr(null);return null!=r.snap?o=o.set(wn(),!0):os(r.children,c=>{o=o.set(new On(c),!0)}),Yv(n,new nA(r.path,o,e))}return[]}function l1(n,t,e){return Yv(n,new Ym({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function hA(n,t,e,r,i=!1){const o=t._path,c=n.syncPointTree_.get(o);let d=[];if(c&&("default"===t._queryIdentifier||LG(c,t))){const f=function Lne(n,t,e,r){const i=t._queryIdentifier,o=[];let c=[];const d=Ep(n);if("default"===i)for(const[f,y]of n.views.entries())c=c.concat(xG(y,e,r)),NG(y)&&(n.views.delete(f),y.query._queryParams.loadsAllData()||o.push(y.query));else{const f=n.views.get(i);f&&(c=c.concat(xG(f,e,r)),NG(f)&&(n.views.delete(i),f.query._queryParams.loadsAllData()||o.push(f.query)))}return d&&!Ep(n)&&o.push(new(function Mne(){return(0,F.hu)(cA,"Reference.ts has not been loaded"),cA}())(t._repo,t._path)),{removed:o,events:c}}(c,t,e,r);(function Pne(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=f.removed;if(d=f.events,!i){const w=-1!==y.findIndex(A=>A._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(o,(A,k)=>Ep(k));if(w&&!E){const A=n.syncPointTree_.subtree(o);if(!A.isEmpty()){const k=function zne(n){return n.fold((t,e,r)=>{if(e&&Ep(e))return[uA(e)];{let i=[];return e&&(i=PG(e)),os(r,(o,c)=>{i=i.concat(c)}),i}})}(A);for(let M=0;M<k.length;++M){const V=k[M],W=V.query,ne=HG(n,V);n.listenProvider_.startListening(u1(W),c1(n,W),ne.hashFn,ne.onComplete)}}}!E&&y.length>0&&!r&&(w?n.listenProvider_.stopListening(u1(t),null):y.forEach(A=>{const k=n.queryToTagMap.get(pA(A));n.listenProvider_.stopListening(u1(A),k)}))}!function Wne(n,t){for(let e=0;e<t.length;++e){const r=t[e];if(!r._queryParams.loadsAllData()){const i=pA(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,y)}return d}function BG(n,t,e,r){const i=aL(n,r);if(null!=i){const o=lL(i),c=o.path,d=o.queryId,f=mo(c,t);return cL(n,c,new Ym(WF(d),f,e))}return[]}function oL(n,t,e,r=!1){const i=t._path;let o=null,c=!1;n.syncPointTree_.foreachOnPath(i,(A,k)=>{const M=mo(A,i);o=o||Tp(k,M),c=c||Ep(k)});let f,d=n.syncPointTree_.get(i);d?(c=c||Ep(d),o=o||Tp(d,wn())):(d=new OG,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=o?f=!0:(f=!1,o=Jt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((k,M)=>{const V=Tp(M,wn());V&&(o=o.updateImmediateChild(k,V))}));const y=LG(d,t);if(!y&&!t._queryParams.loadsAllData()){const A=pA(t);(0,F.hu)(!n.queryToTagMap.has(A),"View does not exist, but we have a tag");const k=function Kne(){return Vne++}();n.queryToTagMap.set(A,k),n.tagToQueryMap.set(k,A)}let E=function Fne(n,t,e,r,i,o){const c=MG(n,t,r,i,o);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function kne(n,t){n.eventRegistrations_.push(t)}(c,e),function Rne(n,t){const e=n.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(tr,(o,c)=>{r.push(qv(o,c))}),e.isFullyInitialized()&&r.push(hG(e.getNode())),RG(n,r,e.getNode(),t)}(c,e)}(d,t,e,sA(n.pendingWriteTree_,i),o,f);if(!y&&!c&&!r){const A=FG(d,t);E=E.concat(function Yne(n,t,e){const r=t._path,i=c1(n,t),o=HG(n,e),c=n.listenProvider_.startListening(u1(t),i,o.hashFn,o.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,F.hu)(!Ep(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((y,w,E)=>{if(!an(y)&&w&&Ep(w))return[uA(w).query];{let A=[];return w&&(A=A.concat(PG(w).map(k=>k.query))),os(E,(k,M)=>{A=A.concat(M)}),A}});for(let y=0;y<f.length;++y){const w=f[y];n.listenProvider_.stopListening(u1(w),c1(n,w))}}return c}(n,t,A))}return E}function fA(n,t,e){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(t,(c,d)=>{const y=Tp(d,mo(c,t));if(y)return y});return wG(i,t,o,e,!0)}function Yv(n,t){return VG(t,n.syncPointTree_,null,sA(n.pendingWriteTree_,wn()))}function VG(n,t,e,r){if(an(n.path))return jG(n,t,e,r);{const i=t.get(wn());null==e&&null!=i&&(e=Tp(i,wn()));let o=[];const c=on(n.path),d=n.operationForChild(c),f=t.children.get(c);if(f&&d){const y=e?e.getImmediateChild(c):null,w=TG(r,c);o=o.concat(VG(d,f,y,w))}return i&&(o=o.concat(iL(i,n,r,e))),o}}function jG(n,t,e,r){const i=t.get(wn());null==e&&null!=i&&(e=Tp(i,wn()));let o=[];return t.children.inorderTraversal((c,d)=>{const f=e?e.getImmediateChild(c):null,y=TG(r,c),w=n.operationForChild(c);w&&(o=o.concat(jG(w,d,f,y)))}),i&&(o=o.concat(iL(i,n,r,e))),o}function HG(n,t){const e=t.query,r=c1(n,e);return{hashFn:()=>(function Ane(n){return n.viewCache_.serverCache.getNode()}(t)||Jt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Gne(n,t,e){const r=aL(n,e);if(r){const i=lL(r),o=i.path,c=i.queryId,d=mo(o,t);return cL(n,o,new i1(WF(c),d))}return[]}(n,e._path,r):function $ne(n,t){return Yv(n,new i1({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const o=function $ee(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const r=new Error(n+" at "+t._path.toString()+": "+e);return r.code=n.toUpperCase(),r}(i,e);return hA(n,e,null,o)}}}}function c1(n,t){const e=pA(t);return n.queryToTagMap.get(e)}function pA(n){return n._path.toString()+"$"+n._queryIdentifier}function aL(n,t){return n.tagToQueryMap.get(t)}function lL(n){const t=n.indexOf("$");return(0,F.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new On(n.substr(0,t))}}function cL(n,t,e){const r=n.syncPointTree_.get(t);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),iL(r,e,sA(n.pendingWriteTree_,t),null)}function u1(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Bne(){return(0,F.hu)(dA,"Reference.ts has not been loaded"),dA}())(n._repo,n._path):n}class uL{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new uL(e)}node(){return this.node_}}class dL{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Nr(this.path_,t);return new dL(this.syncTree_,e)}node(){return fA(this.syncTree_,this.path_)}}const Jne=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},$G=function(n,t,e){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Qne(n[".sv"],t,e):"object"==typeof n[".sv"]?Xne(n[".sv"],t):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Qne=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},Xne=function(n,t,e){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,F.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},GG=function(n,t,e,r){return fL(t,new dL(e,n),r)},hL=function(n,t,e){return fL(n,new uL(t),e)};function fL(n,t,e){const r=n.getPriority().val(),i=$G(r,t.getImmediateChild(".priority"),e);let o;if(n.isLeafNode()){const c=n,d=$G(c.getValue(),t,e);return d!==c.getValue()||i!==c.getPriority().val()?new $v(d,Vr(i)):n}{const c=n;return o=c,i!==c.getPriority().val()&&(o=o.updatePriority(new $v(i))),c.forEachChild(tr,(d,f)=>{const y=fL(f,t.getImmediateChild(d),e);y!==f&&(o=o.updateImmediateChild(d,y))}),o}}class pL{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}}function gA(n,t){let e=t instanceof On?t:new On(t),r=n,i=on(e);for(;null!==i;){const o=(0,F.DV)(r.node.children,i)||{children:{},childCount:0};r=new pL(i,r,o),e=Wn(e),i=on(e)}return r}function Xm(n){return n.node.value}function gL(n,t){n.node.value=t,mL(n)}function ZG(n){return n.node.childCount>0}function mA(n,t){os(n.node.children,(e,r)=>{t(new pL(e,n,r))})}function qG(n,t,e,r){e&&!r&&t(n),mA(n,i=>{qG(i,t,!0,r)}),e&&r&&t(n)}function d1(n){return new On(null===n.parent?n.name:d1(n.parent)+"/"+n.name)}function mL(n){null!==n.parent&&function nre(n,t,e){const r=function ere(n){return void 0===Xm(n)&&!ZG(n)}(e),i=(0,F.r3)(n.node.children,t);r&&i?(delete n.node.children[t],n.node.childCount--,mL(n)):!r&&!i&&(n.node.children[t]=e.node,n.node.childCount++,mL(n))}(n.parent,n.name,n)}const rre=/[\[\].#$\/\u0000-\u001F\u007F]/,ire=/[\[\].#$\u0000-\u001F\u007F]/,_L=10485760,_A=function(n){return"string"==typeof n&&0!==n.length&&!rre.test(n)},zG=function(n){return"string"==typeof n&&0!==n.length&&!ire.test(n)},h1=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!$I(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},Gu=function(n,t,e,r){r&&void 0===t||f1((0,F.gK)(n,"value"),t,e)},f1=function(n,t,e){const r=e instanceof On?new bte(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Wm(r));if("function"==typeof t)throw new Error(n+"contains a function "+Wm(r)+" with contents = "+t.toString());if($I(t))throw new Error(n+"contains "+t.toString()+" "+Wm(r));if("string"==typeof t&&t.length>_L/3&&(0,F.ug)(t)>_L)throw new Error(n+"contains a string greater than "+_L+" utf8 bytes "+Wm(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,o=!1;if(os(t,(c,d)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(o=!0,!_A(c)))throw new Error(n+" contains an invalid key ("+c+") "+Wm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function wte(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,F.ug)(t),X6(n)})(r,c),f1(n,d,r),function Cte(n){const t=n.parts_.pop();n.byteLength_-=(0,F.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+Wm(r)+" in addition to actual children.")}},WG=function(n,t,e,r){if(r&&void 0===t)return;const i=(0,F.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const o=[];os(t,(c,d)=>{const f=new On(c);if(f1(i,d,Nr(e,f)),".priority"===RF(f)&&!h1(d))throw new Error(i+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(f)}),function(n,t){let e,r;for(e=0;e<t.length;e++){r=t[e];const o=JC(r);for(let c=0;c<o.length;c++)if((".priority"!==o[c]||c!==o.length-1)&&!_A(o[c]))throw new Error(n+"contains an invalid key ("+o[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(vte);let i=null;for(e=0;e<t.length;e++){if(r=t[e],null!==i&&yl(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},yL=function(n,t,e){if(!e||void 0!==t){if($I(t))throw new Error((0,F.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!h1(t))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},p1=function(n,t,e,r){if(!(r&&void 0===e||_A(e)))throw new Error((0,F.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},g1=function(n,t,e,r){if(!(r&&void 0===e||zG(e)))throw new Error((0,F.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},are=function(n,t,e,r){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),g1(n,t,e,r)},bl=function(n,t){if(".info"===on(t))throw new Error(n+" failed = Can't modify data under /.info/")},KG=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!_A(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),zG(n)}(e))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class lre{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function yA(n,t){let e=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null!==e&&!OF(o,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:o}),e.events.push(i)}e&&n.eventLists_.push(e)}function YG(n,t,e){yA(n,e),JG(n,r=>OF(r,t))}function Na(n,t,e){yA(n,e),JG(n,r=>yl(r,t)||yl(t,r))}function JG(n,t){n.recursionDepth_++;let e=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(t(i.path)?(cre(n.eventLists_[r]),n.eventLists_[r]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function cre(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const r=e.getEventRunner();qm&&ss("event: "+e.toString()),jv(r)}}}const QG="repo_interrupt",ure=25;class dre{constructor(t,e,r,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new lre,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tA(),this.transactionQueueTree_=new pL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function XG(n){const e=n.infoData_.getNode(new On(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function m1(n){return Jne({timestamp:XG(n)})}function eZ(n,t,e,r,i){n.dataUpdateCount++;const o=new On(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(i)if(r){const f=(0,F.UI)(e,y=>Vr(y));c=function Zne(n,t,e,r){const i=aL(n,r);if(i){const o=lL(i),c=o.path,d=o.queryId,f=mo(c,t),y=nr.fromObject(e);return cL(n,c,new Wv(WF(d),f,y))}return[]}(n.serverSyncTree_,o,f,i)}else{const f=Vr(e);c=BG(n.serverSyncTree_,o,f,i)}else if(r){const f=(0,F.UI)(e,y=>Vr(y));c=function Hne(n,t,e){const r=nr.fromObject(e);return Yv(n,new Wv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,o,f)}else{const f=Vr(e);c=l1(n.serverSyncTree_,o,f)}let d=o;c.length>0&&(d=Qv(n,o)),Na(n.eventQueue_,d,c)}function tZ(n,t){vL(n,"connected",t),!1===t&&function mre(n){Jv(n,"onDisconnectEvents");const t=m1(n),e=tA();ZF(n.onDisconnect_,wn(),(i,o)=>{const c=GG(i,o,n.serverSyncTree_,t);zv(e,i,c)});let r=[];ZF(e,wn(),(i,o)=>{r=r.concat(l1(n.serverSyncTree_,i,o));const c=TL(n,i);Qv(n,c)}),n.onDisconnect_=tA(),Na(n.eventQueue_,wn(),r)}(n)}function vL(n,t,e){const r=new On("/.info/"+t),i=Vr(e);n.infoData_.updateSnapshot(r,i);const o=l1(n.infoSyncTree_,r,i);Na(n.eventQueue_,r,o)}function vA(n){return n.nextWriteId_++}function bL(n,t,e,r,i){Jv(n,"set",{path:t.toString(),value:e,priority:r});const o=m1(n),c=Vr(e,r),d=fA(n.serverSyncTree_,t),f=hL(c,d,o),y=vA(n),w=sL(n.serverSyncTree_,t,f,y,!0);yA(n.eventQueue_,w),n.server_.put(t.toString(),c.val(!0),(A,k)=>{const M="ok"===A;M||Ls("set at "+t+" failed: "+A);const V=Dp(n.serverSyncTree_,y,!M);Na(n.eventQueue_,t,V),Sp(0,i,A,k)});const E=TL(n,t);Qv(n,E),Na(n.eventQueue_,E,[])}function _re(n,t,e){n.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&GF(n.onDisconnect_,t),Sp(0,e,r,i)})}function nZ(n,t,e,r){const i=Vr(e);n.server_.onDisconnectPut(t.toString(),i.val(!0),(o,c)=>{"ok"===o&&zv(n.onDisconnect_,t,i),Sp(0,r,o,c)})}function wL(n,t,e){let r;r=".info"===on(t._path)?hA(n.infoSyncTree_,t,e):hA(n.serverSyncTree_,t,e),YG(n.eventQueue_,t._path,r)}function rZ(n){n.persistentConnection_&&n.persistentConnection_.interrupt(QG)}function Jv(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),ss(e,...t)}function Sp(n,t,e,r){t&&jv(()=>{if("ok"===e)t(null);else{const i=(e||"error").toUpperCase();let o=i;r&&(o+=": "+r);const c=new Error(o);c.code=i,t(c)}})}function CL(n,t,e){return fA(n.serverSyncTree_,t,e)||Jt.EMPTY_NODE}function bA(n,t=n.transactionQueueTree_){if(t||wA(n,t),Xm(t)){const e=sZ(n,t);(0,F.hu)(e.length>0,"Sending zero length transaction queue"),e.every(i=>0===i.status)&&function Tre(n,t,e){const r=e.map(y=>y.currentWriteId),i=CL(n,t,r);let o=i;const c=i.hash();for(let y=0;y<e.length;y++){const w=e[y];(0,F.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const E=mo(t,w.path);o=o.updateChild(E,w.currentOutputSnapshotRaw)}const d=o.val(!0),f=t;n.server_.put(f.toString(),d,y=>{Jv(n,"transaction put response",{path:f.toString(),status:y});let w=[];if("ok"===y){const E=[];for(let A=0;A<e.length;A++)e[A].status=2,w=w.concat(Dp(n.serverSyncTree_,e[A].currentWriteId)),e[A].onComplete&&E.push(()=>e[A].onComplete(null,!0,e[A].currentOutputSnapshotResolved)),e[A].unwatcher();wA(n,gA(n.transactionQueueTree_,t)),bA(n,n.transactionQueueTree_),Na(n.eventQueue_,t,w);for(let A=0;A<E.length;A++)jv(E[A])}else{if("datastale"===y)for(let E=0;E<e.length;E++)e[E].status=3===e[E].status?4:0;else{Ls("transaction at "+f.toString()+" failed: "+y);for(let E=0;E<e.length;E++)e[E].status=4,e[E].abortReason=y}Qv(n,t)}},c)}(n,d1(t),e)}else ZG(t)&&mA(t,e=>{bA(n,e)})}function Qv(n,t){const e=iZ(n,t),r=d1(e);return function Ere(n,t,e){if(0===t.length)return;const r=[];let i=[];const c=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const f=t[d],y=mo(e,f.path);let E,w=!1;if((0,F.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)w=!0,E=f.abortReason,i=i.concat(Dp(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=ure)w=!0,E="maxretry",i=i.concat(Dp(n.serverSyncTree_,f.currentWriteId,!0));else{const A=CL(n,f.path,c);f.currentInputSnapshot=A;const k=t[d].update(A.val());if(void 0!==k){f1("transaction failed: Data returned ",k,f.path);let M=Vr(k);"object"==typeof k&&null!=k&&(0,F.r3)(k,".priority")||(M=M.updatePriority(A.getPriority()));const W=f.currentWriteId,ne=m1(n),he=hL(M,A,ne);f.currentOutputSnapshotRaw=M,f.currentOutputSnapshotResolved=he,f.currentWriteId=vA(n),c.splice(c.indexOf(W),1),i=i.concat(sL(n.serverSyncTree_,f.path,he,f.currentWriteId,f.applyLocally)),i=i.concat(Dp(n.serverSyncTree_,W,!0))}else w=!0,E="nodata",i=i.concat(Dp(n.serverSyncTree_,f.currentWriteId,!0))}Na(n.eventQueue_,e,i),i=[],w&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&r.push("nodata"===E?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(E),!1,null)))}wA(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)jv(r[d]);bA(n,n.transactionQueueTree_)}(n,sZ(n,e),r),r}function iZ(n,t){let e,r=n.transactionQueueTree_;for(e=on(t);null!==e&&void 0===Xm(r);)r=gA(r,e),e=on(t=Wn(t));return r}function sZ(n,t){const e=[];return oZ(n,t,e),e.sort((r,i)=>r.order-i.order),e}function oZ(n,t,e){const r=Xm(t);if(r)for(let i=0;i<r.length;i++)e.push(r[i]);mA(t,i=>{oZ(n,i,e)})}function wA(n,t){const e=Xm(t);if(e){let r=0;for(let i=0;i<e.length;i++)2!==e[i].status&&(e[r]=e[i],r++);e.length=r,gL(t,e.length>0?e:void 0)}mA(t,r=>{wA(n,r)})}function TL(n,t){const e=d1(iZ(n,t)),r=gA(n.transactionQueueTree_,t);return function tre(n,t,e){let r=e?n:n.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,i=>{EL(n,i)}),EL(n,r),qG(r,i=>{EL(n,i)}),e}function EL(n,t){const e=Xm(t);if(e){const r=[];let i=[],o=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,F.hu)(o===c-1,"All SENT items should be at beginning of queue."),o=c,e[c].status=3,e[c].abortReason="set"):((0,F.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),i=i.concat(Dp(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&r.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===o?gL(t,void 0):e.length=o+1,Na(n.eventQueue_,d1(t),i);for(let c=0;c<r.length;c++)jv(r[c])}}const DL=function(n,t){const e=Ire(n),r=e.namespace;return"firebase.com"===e.domain&&ju(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==e.domain&&ju("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ls("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new SF(e.host,e.secure,r,"ws"===e.scheme||"wss"===e.scheme,t,"",r!==e.subdomain),path:new On(e.pathString)}},Ire=function(n){let t="",e="",r="",i="",o="",c=!0,d="https",f=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let w=n.indexOf("/");-1===w&&(w=n.length);let E=n.indexOf("?");-1===E&&(E=n.length),t=n.substring(0,Math.min(w,E)),w<E&&(i=function Dre(n){let t="";const e=n.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let i=e[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}(n.substring(w,E)));const A=function Sre(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const r=e.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ls(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,E)));y=t.indexOf(":"),y>=0?(c="https"===d||"wss"===d,f=parseInt(t.substring(y+1),10)):y=t.length;const k=t.slice(0,y);if("localhost"===k.toLowerCase())e="localhost";else if(k.split(".").length<=2)e=k;else{const M=t.indexOf(".");r=t.substring(0,M).toLowerCase(),e=t.substring(M+1),o=r}"ns"in A&&(o=A.ns)}return{host:t,port:f,domain:e,subdomain:r,secure:c,scheme:d,pathString:i,namespace:o}};class aZ{constructor(t,e,r,i){this.eventType=t,this.eventRegistration=e,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class lZ{constructor(t,e,r){this.eventRegistration=t,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class SL{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class cZ{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new F.BH;return _re(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){bl("OnDisconnect.remove",this._path);const t=new F.BH;return nZ(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){bl("OnDisconnect.set",this._path),Gu("OnDisconnect.set",t,this._path,!1);const e=new F.BH;return nZ(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){bl("OnDisconnect.setWithPriority",this._path),Gu("OnDisconnect.setWithPriority",t,this._path,!1),yL("OnDisconnect.setWithPriority",e,!1);const r=new F.BH;return function yre(n,t,e,r,i){const o=Vr(e,r);n.server_.onDisconnectPut(t.toString(),o.val(!0),(c,d)=>{"ok"===c&&zv(n.onDisconnect_,t,o),Sp(0,i,c,d)})}(this._repo,this._path,t,e,r.wrapCallback(()=>{})),r.promise}update(t){bl("OnDisconnect.update",this._path),WG("OnDisconnect.update",t,this._path,!1);const e=new F.BH;return function vre(n,t,e,r){if((0,F.xb)(e))return ss("onDisconnect().update() called with empty data.  Don't do anything."),void Sp(0,r,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(i,o)=>{"ok"===i&&os(e,(c,d)=>{const f=Vr(d);zv(n.onDisconnect_,Nr(t,c),f)}),Sp(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class $o{constructor(t,e,r,i){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=i}get key(){return an(this._path)?null:RF(this._path)}get ref(){return new wl(this._repo,this._path)}get _queryIdentifier(){const t=pG(this._queryParams),e=TF(t);return"{}"===e?"default":e}get _queryObject(){return pG(this._queryParams)}isEqual(t){if(!((t=(0,F.m9)(t))instanceof $o))return!1;const e=this._repo===t._repo,r=OF(this._path,t._path);return e&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function yte(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function CA(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Ip(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===$u){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==bh)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Hu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}}else if(n.getIndex()===tr){if(null!=t&&!h1(t)||null!=e&&!h1(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof UF||n.getIndex()===BF,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function TA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class wl extends $o{constructor(t,e){super(t,e,new QI,!1)}get parent(){const t=Q6(this._path);return null===t?null:new wl(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class e_{constructor(t,e,r){this._node=t,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new On(t),r=t_(this.ref,t);return new e_(this._node.getChild(e),r,tr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>t(new e_(i,t_(this.ref,r),tr)))}hasChild(t){const e=new On(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function uZ(n,t){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==t?t_(n._root,t):n._root}function dZ(n,t){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const e=DL(t,n._repo.repoInfo_.nodeAdmin);KG("refFromURL",e);const r=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ju("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),uZ(n,e.path.toString())}function t_(n,t){return null===on((n=(0,F.m9)(n))._path)?are("child","path",t,!1):g1("child","path",t,!1),new wl(n._repo,Nr(n._path,t))}function IL(n,t){n=(0,F.m9)(n),bl("set",n._path),Gu("set",t,n._path,!1);const e=new F.BH;return bL(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function Rre(n,t){WG("update",t,n._path,!1);const e=new F.BH;return function gre(n,t,e,r){Jv(n,"update",{path:t.toString(),value:e});let i=!0;const o=m1(n),c={};if(os(e,(d,f)=>{i=!1,c[d]=GG(Nr(t,d),Vr(f),n.serverSyncTree_,o)}),i)ss("update() called with empty data.  Don't do anything."),Sp(0,r,"ok",void 0);else{const d=vA(n),f=function jne(n,t,e,r){!function ine(n,t,e,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:r,visible:!0}),n.visibleWrites=YF(n.visibleWrites,t,e),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r);const i=nr.fromObject(e);return Yv(n,new Wv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,t,c,d);yA(n.eventQueue_,f),n.server_.merge(t.toString(),e,(y,w)=>{const E="ok"===y;E||Ls("update at "+t+" failed: "+y);const A=Dp(n.serverSyncTree_,d,!E),k=A.length>0?Qv(n,t):t;Na(n.eventQueue_,k,A),Sp(0,r,y,w)}),os(e,y=>{const w=TL(n,Nr(t,y));Qv(n,w)}),Na(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function Ore(n){n=(0,F.m9)(n);const t=new SL(()=>{}),e=new _1(t);return function pre(n,t,e){const r=function qne(n,t){const e=t._path;let r=null;n.syncPointTree_.foreachOnPath(e,(y,w)=>{const E=mo(y,e);r=r||Tp(w,E)});let i=n.syncPointTree_.get(e);i?r=r||Tp(i,wn()):(i=new OG,n.syncPointTree_=n.syncPointTree_.set(e,i));const o=null!=r,c=o?new wp(r,!0,!1):null;return function Nne(n){return iA(n.viewCache_)}(MG(i,t,sA(n.pendingWriteTree_,t._path),o?c.getNode():Jt.EMPTY_NODE,o))}(n.serverSyncTree_,t);return null!=r?Promise.resolve(r):n.server_.get(t).then(i=>{const o=Vr(i).withIndex(t._queryParams.getIndex());let c;if(oL(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())c=l1(n.serverSyncTree_,t._path,o);else{const d=c1(n.serverSyncTree_,t);c=BG(n.serverSyncTree_,t._path,o,d)}return Na(n.eventQueue_,t._path,c),hA(n.serverSyncTree_,t,e,null,!0),o},i=>(Jv(n,"get for query "+(0,F.Pz)(t)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,e).then(r=>new e_(r,new wl(n._repo,n._path),n._queryParams.getIndex()))}class _1{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const r=e._queryParams.getIndex();return new aZ("value",this,new e_(t.snapshotNode,new wl(e._repo,e._path),r))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new lZ(this,t,e):null}matches(t){return t instanceof _1&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class EA{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new lZ(this,t,e):null}createEvent(t,e){(0,F.hu)(null!=t.childName,"Child events should have a childName.");const r=t_(new wl(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new aZ(t.type,this,new e_(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof EA&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function y1(n,t,e,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const f=e,y=(w,E)=>{wL(n._repo,n,d),f(w,E)};y.userCallback=e.userCallback,y.context=e.context,e=y}const c=new SL(e,o||void 0),d="value"===t?new _1(c):new EA(t,c);return function bre(n,t,e){let r;r=".info"===on(t._path)?oL(n.infoSyncTree_,t,e):oL(n.serverSyncTree_,t,e),YG(n.eventQueue_,t._path,r)}(n._repo,n,d),()=>wL(n._repo,n,d)}function AL(n,t,e,r){return y1(n,"value",t,e,r)}function hZ(n,t,e,r){return y1(n,"child_added",t,e,r)}function fZ(n,t,e,r){return y1(n,"child_changed",t,e,r)}function pZ(n,t,e,r){return y1(n,"child_moved",t,e,r)}function gZ(n,t,e,r){return y1(n,"child_removed",t,e,r)}function mZ(n,t,e){let r=null;const i=e?new SL(e):null;"value"===t?r=new _1(i):t&&(r=new EA(t,i)),wL(n._repo,n,r)}class Dc{}class _Z extends Dc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Gu("endAt",this._value,t._path,!0);const e=$F(t._queryParams,this._value,this._key);if(TA(e),Ip(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $o(t._repo,t._path,e,t._orderByCalled)}}class Pre extends Dc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Gu("endBefore",this._value,t._path,!1);const e=function Zte(n,t,e){let r,i;return n.index_===$u?("string"==typeof t&&(t=dG(t)),i=$F(n,t,e)):(r=null==e?bh:dG(e),i=$F(n,t,r)),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(TA(e),Ip(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $o(t._repo,t._path,e,t._orderByCalled)}}class yZ extends Dc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Gu("startAt",this._value,t._path,!0);const e=HF(t._queryParams,this._value,this._key);if(TA(e),Ip(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new $o(t._repo,t._path,e,t._orderByCalled)}}class Ure extends Dc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Gu("startAfter",this._value,t._path,!1);const e=function Gte(n,t,e){let r;if(n.index_===$u)"string"==typeof t&&(t=uG(t)),r=HF(n,t,e);else{let i;i=null==e?Hu:uG(e),r=HF(n,t,i)}return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(TA(e),Ip(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new $o(t._repo,t._path,e,t._orderByCalled)}}class Vre extends Dc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new $o(t._repo,t._path,function Hte(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class Hre extends Dc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new $o(t._repo,t._path,function $te(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class Gre extends Dc{constructor(t){super(),this._path=t}_apply(t){CA(t,"orderByChild");const e=new On(this._path);if(an(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new UF(e),i=XI(t._queryParams,r);return Ip(i),new $o(t._repo,t._path,i,!0)}}class qre extends Dc{_apply(t){CA(t,"orderByKey");const e=XI(t._queryParams,$u);return Ip(e),new $o(t._repo,t._path,e,!0)}}class Wre extends Dc{_apply(t){CA(t,"orderByPriority");const e=XI(t._queryParams,tr);return Ip(e),new $o(t._repo,t._path,e,!0)}}class Yre extends Dc{_apply(t){CA(t,"orderByValue");const e=XI(t._queryParams,BF);return Ip(e),new $o(t._repo,t._path,e,!0)}}class Qre extends Dc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Gu("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new _Z(this._value,this._key)._apply(new yZ(this._value,this._key)._apply(t))}}function Sc(n,...t){let e=(0,F.m9)(n);for(const r of t)e=r._apply(e);return e}(function One(n){(0,F.hu)(!cA,"__referenceConstructor has already been defined"),cA=n})(wl),function Une(n){(0,F.hu)(!dA,"__referenceConstructor has already been defined"),dA=n}(wl);const eie="FIREBASE_DATABASE_EMULATOR_HOST",NL={};let vZ=!1;function bZ(n,t,e,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||ju("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ss("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,y,c=DL(o,i),d=c.repoInfo;typeof process<"u"&&process.env&&(y=process.env[eie]),y?(f=!0,o=`http://${y}?ns=${d.namespace}`,c=DL(o,i),d=c.repoInfo):f=!c.repoInfo.secure;const w=i&&f?new YC(YC.OWNER):new zee(n.name,n.options,t);KG("Invalid Firebase Database URL",c),an(c.path)||ju("Database URL must point to the root of a Firebase Database (not including a child path).");const E=function rie(n,t,e,r){let i=NL[t.name];i||(i={},NL[t.name]=i);let o=i[n.toURLString()];return o&&ju("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new dre(n,vZ,e,r),i[n.toURLString()]=o,o}(d,n,w,new qee(n.name,e));return new sie(E,n)}class sie{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function hre(n,t,e){if(n.stats_=NF(n.repoInfo_),n.forceRestClient_||Zee())n.server_=new eA(n.repoInfo_,(r,i,o,c)=>{eZ(n,r,i,o,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>tZ(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Km(n.repoInfo_,t,(r,i,o,c)=>{eZ(n,r,i,o,c)},r=>{tZ(n,r)},r=>{!function fre(n,t){os(t,(e,r)=>{vL(n,e,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Yee(n,t){const e=n.toString();return AF[e]||(AF[e]=t()),AF[e]}(n.repoInfo_,()=>new Jte(n.stats_,n.server_)),n.infoData_=new qte,n.infoSyncTree_=new UG({startListening:(r,i,o,c)=>{let d=[];const f=n.infoData_.getNode(r._path);return f.isEmpty()||(d=l1(n.infoSyncTree_,r._path,f),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),vL(n,"connected",!1),n.serverSyncTree_=new UG({startListening:(r,i,o,c)=>(n.server_.listen(r,o,i,(d,f)=>{const y=c(d,f);Na(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wl(this._repo,wn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function nie(n,t){const e=NL[t];(!e||e[n.key]!==n)&&ju(`Database ${t}(${n.repoInfo_}) has already been deleted.`),rZ(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&ju("Cannot call "+t+" on a deleted database.")}}function wZ(){V6.IS_TRANSPORT_INITIALIZED&&Ls("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function oie(){wZ(),vp.forceDisallow()}function aie(){wZ(),Hv.forceDisallow(),vp.forceAllow()}function die(n,t){b6(n,t)}const fie={".sv":"timestamp"};class mie{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Km.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Km.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function hie(n){g6(so.SDK_VERSION),(0,so._registerComponent)(new yc.wA("database",(t,{instanceIdentifier:e})=>bZ(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,so.registerVersion)(f6,"0.13.5",n),(0,so.registerVersion)(f6,"0.13.5","esm2017")}();const bie=new vc.Yd("@firebase/database-compat"),CZ=function(n){bie.warn("FIREBASE WARNING: "+n)};class Tie{constructor(t){this._delegate=t}cancel(t){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),r=>t(r)),e}remove(t){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),r=>t(r)),e}set(t,e){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",e,!0);const r=this._delegate.set(t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(t,e);return r&&i.then(()=>r(null),o=>r(o)),i}update(t,e){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let o=0;o<t.length;++o)i[""+o]=t[o];t=i,CZ("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",e,!0);const r=this._delegate.update(t);return e&&r.then(()=>e(null),i=>e(i)),r}}class Eie{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ap{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),g1("DataSnapshot.child","path",t,!1),new Ap(this._database,this._delegate.child(t))}hasChild(t){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),g1("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Ap(this._database,e)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new xa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class bs{constructor(t,e){this.database=t,this._delegate=e}on(t,e,r,i){var o;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",e,!1);const c=bs.getCancelAndContextArgs_("Query.on",r,i),d=(y,w)=>{e.call(c.context,new Ap(this.database,y),w)};d.userCallback=e,d.context=c.context;const f=null===(o=c.cancel)||void 0===o?void 0:o.bind(c.context);switch(t){case"value":return AL(this._delegate,d,f),e;case"child_added":return hZ(this._delegate,d,f),e;case"child_removed":return gZ(this._delegate,d,f),e;case"child_changed":return fZ(this._delegate,d,f),e;case"child_moved":return pZ(this._delegate,d,f),e;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,F.Wj)("Query.off","callback",e,!0),(0,F.lb)("Query.off","context",r,!0),e){const i=()=>{};i.userCallback=e,i.context=r,mZ(this._delegate,t,i)}else mZ(this._delegate,t)}get(){return Ore(this._delegate).then(t=>new Ap(this.database,t))}once(t,e,r,i){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",e,!0);const o=bs.getCancelAndContextArgs_("Query.once",r,i),c=new F.BH,d=(y,w)=>{const E=new Ap(this.database,y);e&&e.call(o.context,E,w),c.resolve(E)};d.userCallback=e,d.context=o.context;const f=y=>{o.cancel&&o.cancel.call(o.context,y),c.reject(y)};switch(t){case"value":AL(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":hZ(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":gZ(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":fZ(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":pZ(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new bs(this.database,Sc(this._delegate,function jre(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Vre(n)}(t)))}limitToLast(t){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new bs(this.database,Sc(this._delegate,function $re(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Hre(n)}(t)))}orderByChild(t){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new bs(this.database,Sc(this._delegate,function Zre(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return g1("orderByChild","path",n,!1),new Gre(n)}(t)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new bs(this.database,Sc(this._delegate,function zre(){return new qre}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new bs(this.database,Sc(this._delegate,function Kre(){return new Wre}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new bs(this.database,Sc(this._delegate,function Jre(){return new Yre}()))}startAt(t=null,e){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new bs(this.database,Sc(this._delegate,function Lre(n=null,t){return p1("startAt","key",t,!0),new yZ(n,t)}(t,e)))}startAfter(t=null,e){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new bs(this.database,Sc(this._delegate,function Bre(n,t){return p1("startAfter","key",t,!0),new Ure(n,t)}(t,e)))}endAt(t=null,e){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new bs(this.database,Sc(this._delegate,function Mre(n,t){return p1("endAt","key",t,!0),new _Z(n,t)}(t,e)))}endBefore(t=null,e){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new bs(this.database,Sc(this._delegate,function Fre(n,t){return p1("endBefore","key",t,!0),new Pre(n,t)}(t,e)))}equalTo(t,e){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new bs(this.database,Sc(this._delegate,function Xre(n,t){return p1("equalTo","key",t,!0),new Qre(n,t)}(t,e)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof bs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,r){const i={cancel:void 0,context:void 0};if(e&&r)i.cancel=e,(0,F.Wj)(t,"cancel",i.cancel,!0),i.context=r,(0,F.lb)(t,"context",i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error((0,F.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=e}return i}get ref(){return new xa(this.database,new wl(this._delegate._repo,this._delegate._path))}}class xa extends bs{constructor(t,e){super(t,new $o(e._repo,e._path,new QI,!1)),this.database=t,this._delegate=e}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new xa(this.database,t_(this._delegate,t))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new xa(this.database,t):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new xa(this.database,this._delegate.root)}set(t,e){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",e,!0);const r=IL(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}update(t,e){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let o=0;o<t.length;++o)i[""+o]=t[o];t=i,CZ("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}bl("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",e,!0);const r=Rre(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function kre(n,t,e){if(bl("setWithPriority",n._path),Gu("setWithPriority",t,n._path,!1),yL("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return bL(n._repo,n._path,t,e,r.wrapCallback(()=>{})),r.promise}(this._delegate,t,e);return r&&i.then(()=>r(null),o=>r(o)),i}remove(t){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",t,!0);const e=function Nre(n){return bl("remove",n._path),IL(n,null)}(this._delegate);return t&&e.then(()=>t(null),r=>t(r)),e}transaction(t,e,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,F.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,r){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function _ie(n,t,e){var r;if(n=(0,F.m9)(n),bl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=e?.applyLocally)||void 0===r||r,o=new F.BH,d=AL(n,()=>{});return function Cre(n,t,e,r,i,o){Jv(n,"transaction on "+t);const c={path:t,update:e,onComplete:r,status:null,order:_6(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=CL(n,t,void 0);c.currentInputSnapshot=d;const f=c.update(d.val());if(void 0===f)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{f1("transaction failed: Data returned ",f,c.path),c.status=0;const y=gA(n.transactionQueueTree_,t),w=Xm(y)||[];let E;w.push(c),gL(y,w),"object"==typeof f&&null!==f&&(0,F.r3)(f,".priority")?(E=(0,F.DV)(f,".priority"),(0,F.hu)(h1(E),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):E=(fA(n.serverSyncTree_,t)||Jt.EMPTY_NODE).getPriority().val();const A=m1(n),k=Vr(f,E),M=hL(k,d,A);c.currentOutputSnapshotRaw=k,c.currentOutputSnapshotResolved=M,c.currentWriteId=vA(n);const V=sL(n.serverSyncTree_,t,M,c.currentWriteId,c.applyLocally);Na(n.eventQueue_,t,V),bA(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(f,y,w)=>{let E=null;f?o.reject(f):(E=new e_(w,new wl(n._repo,n._path),tr),o.resolve(new mie(y,E)))},d,i),o.promise}(this._delegate,t,{applyLocally:r}).then(o=>new Eie(o.committed,new Ap(this.database,o.snapshot)));return e&&i.then(o=>e(null,o.committed,o.snapshot),o=>e(o,!1,null)),i}setPriority(t,e){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",e,!0);const r=function xre(n,t){n=(0,F.m9)(n),bl("setPriority",n._path),yL("setPriority",t,!1);const e=new F.BH;return bL(n._repo,Nr(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}push(t,e){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",e,!0);const r=function Are(n,t){n=(0,F.m9)(n),bl("push",n._path),Gu("push",t,n._path,!0);const e=XG(n._repo),r=Ute(e),i=t_(n,r),o=t_(n,r);let c;return c=null!=t?IL(o,t).then(()=>o):Promise.resolve(o),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,t),i=r.then(c=>new xa(this.database,c));e&&i.then(()=>e(null),c=>e(c));const o=new xa(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return bl("Reference.onDisconnect",this._delegate._path),new Tie(new cZ(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class v1{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:oie,forceLongPolling:aie}}useEmulator(t,e,r={}){!function lie(n,t,e,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ju("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ju('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new YC(YC.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);o=new YC(c)}!function tie(n,t,e,r){n.repoInfo_=new SF(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,t,e,o)}(this._delegate,t,e,r)}ref(t){if((0,F.Dv)("database.ref",0,1,arguments.length),t instanceof xa){const e=dZ(this._delegate,t.toString());return new xa(this,e)}{const e=uZ(this._delegate,t);return new xa(this,e)}}refFromURL(t){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=dZ(this._delegate,t);return new xa(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function cie(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),rZ(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function uie(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function wre(n){n.persistentConnection_&&n.persistentConnection_.resume(QG)}(n._repo)}(this._delegate)}}v1.ServerValue={TIMESTAMP:function pie(){return fie}(),increment:n=>function gie(n){return{".sv":{increment:n}}}(n)};var Sie=Object.freeze({__proto__:null,initStandalone:function Die({app:n,url:t,version:e,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){g6(e);const c=new yc.zt("auth-internal",new yc.H0("database-standalone"));return c.setComponent(new yc.wA("auth-internal",()=>r,"PRIVATE")),{instance:new v1(bZ(n,c,void 0,t,o),n),namespace:i}}});const Iie=v1.ServerValue;function TZ(n){return null==n}function EZ(n){return"function"==typeof n.set}function DZ(n,t){return EZ(t)?t:n.ref(t)}function SZ(n,t){if(function Nie(n){return"string"==typeof n}(n))return t.stringCase();if(EZ(n))return t.firebaseCase();if(function xie(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function b1(n,t,e="on",r=Yg.z){return new bn.y(i=>{let o=null;return o=n[e](t,(c,d)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:d})}),"once"===e&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===e?{unsubscribe(){null!=o&&n.off(t,o)}}:{unsubscribe(){}}}).pipe((0,S.U)(i=>{const{snapshot:o,prevKey:c}=i;let d=null;return o.exists()&&(d=o.key),{type:t,payload:o,prevKey:c,key:d}}),(0,gD.B)())}function IZ(n,t){const e=n.length;for(let r=0;r<e;r++)if(n[r].payload.key===t)return r;return-1}function Oie(n,t){const{payload:e,prevKey:r,key:i}=t,o=IZ(n,i),c=function Rie(n,t){if(TZ(t))return 0;{const e=IZ(n,t);return-1===e?n.length:e+1}}(n,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(f=>{const y={payload:f,type:"value",prevKey:d,key:f.key};return d=f.key,n=[...n,y],!1})}return n;case"child_added":if(o>-1){const d=n[o-1];(d&&d.key||null)!==r&&(n=n.filter(f=>f.payload.key!==e.key)).splice(c,0,t)}else{if(null==r)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===i?t:d);case"child_moved":if(o>-1){const d=n.splice(o,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function AZ(n){return(TZ(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function NZ(n,t,e){return function kie(n,t,e){return b1(n,"value","once",e).pipe(Ln(r=>{const i=[Fe(r)];return t.forEach(o=>i.push(b1(n,o,"on",e))),(0,By.T)(...i).pipe(ua(Oie,[]))}),th())}(n,t=AZ(t),e)}function xZ(n,t,e){const r=(t=AZ(t)).map(i=>b1(n,i,"on",e));return(0,By.T)(...r)}function kZ(n,t){return function(r,i){return SZ(r,{stringCase:()=>n.child(r)[t](i),firebaseCase:()=>r[t](i),snapshotCase:()=>r.ref[t](i)})}}function Lie(n){return function(e){return e?SZ(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function RZ(n,t){return function(){return b1(n,"value","on",t)}}!function Aie(n){n.INTERNAL.registerComponent(new yc.wA("database-compat",(t,{instanceIdentifier:e})=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:e});return new v1(i,r)},"PUBLIC").setServiceProps({Reference:xa,Query:bs,Database:v1,DataSnapshot:Ap,enableLogging:die,INTERNAL:Sie,ServerValue:Iie}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.5")}(BR.Z);const Vie=new s.OlP("angularfire2.realtimeDatabaseURL"),jie=new s.OlP("angularfire2.database.use-emulator");let Hie=(()=>{class n{constructor(e,r,i,o,c,d,f,y,w,E,A,k,M,V,W){this.schedulers=d;const ne=f,he=(0,Bi.on)(e,c,r);y&&rF(he,c,w,A,k,M,E,V),this.database=(0,Bi.cc)(`${he.name}.database.${i}`,"AngularFireDatabase",he.name,()=>{const Ie=c.runOutsideAngular(()=>he.database(i||void 0));return ne&&Ie.useEmulator(...ne),Ie},[ne])}list(e,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>DZ(this.database,e));let o=i;return r&&(o=r(i)),function Uie(n,t){const e=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:kZ(r,"update"),set:kZ(r,"set"),push:i=>r.push(i),remove:Lie(r),snapshotChanges:i=>NZ(n,i,e).pipe(Nn.iC),stateChanges:i=>xZ(n,i,e).pipe(Nn.iC),auditTrail:i=>function Mie(n,t,e){return function Fie(n,t,e){return function Pie(n,t){return b1(n,"value","on",t).pipe((0,S.U)(e=>{let r;return e.payload.forEach(i=>(r=i.key,!1)),{data:e,lastKeyToLoad:r}}))}(n,e).pipe(zD(t),(0,S.U)(([i,o])=>{const c=i.lastKeyToLoad,d=o.map(f=>f.key);return{actions:o,lastKeyToLoad:c,loadedKeys:d}}),function Pee(n){return(0,In.e)((t,e)=>{let r=!1,i=0;t.subscribe((0,ve.x)(e,o=>(r||(r=!n(o,i++)))&&e.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,S.U)(i=>i.actions))}(n,xZ(n,t).pipe(ua((i,o)=>[...i,o],[])),e)}(n,i,e).pipe(Nn.iC),valueChanges:(i,o)=>NZ(n,i,e).pipe((0,S.U)(d=>d.map(f=>o&&o.idField?Object.assign(Object.assign({},f.payload.val()),{[o.idField]:f.key}):f.payload.val())),Nn.iC)}}(o,this)}object(e){return function Bie(n,t){return{query:n,snapshotChanges:()=>RZ(n,t.schedulers.outsideAngular)().pipe(Nn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>RZ(n,t.schedulers.outsideAngular)().pipe(Nn.iC,(0,S.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>DZ(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Bi.Dh),s.LFG(Bi.xv,8),s.LFG(Vie,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(Nn.HU),s.LFG(jie,8),s.LFG(iF,8),s.LFG(JP,8),s.LFG(QP,8),s.LFG(XP,8),s.LFG(eF,8),s.LFG(tF,8),s.LFG(nF,8),s.LFG(jC,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$ie=(()=>{class n{constructor(){YP.Z.registerVersion("angularfire",Nn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[Hie]}),n})(),Gie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=s.oAB({type:n,bootstrap:[bW]});static#n=this.\u0275inj=s.cJS({providers:[yB,...UQ,...BQ,...VQ,...jQ,...HQ,...$Q],imports:[tl,ax,JE,Qx,dk,nT,RD.forRoot(),vW,Bi.hO.initializeApp(GQ_firebase),$ie,LQ,Mee,j2.forRoot(),kz]})}return n})();jh().bootstrapModule(Gie).catch(n=>console.error(n))},5867:(mt,Ae,U)=>{U.d(Ae,{C6:()=>s.getApps,Mq:()=>s.getApp});var s=U(9681);(0,s.registerVersion)("firebase","9.9.3","app")},127:(mt,Ae,U)=>{U.d(Ae,{Z:()=>s.Z});var s=U(3942);s.Z.registerVersion("firebase","9.9.3","app-compat")},1451:(mt,Ae,U)=>{U.r(Ae);var s=U(5861),te=U(3942),L=U(2090),le=U(9681),oe=U(7582),ie=U(1877),Ce=U(4859);const _e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ee_EMAIL_SIGNIN="EMAIL_SIGNIN",ee_PASSWORD_RESET="PASSWORD_RESET",ee_RECOVER_EMAIL="RECOVER_EMAIL",ee_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",ee_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",ee_VERIFY_EMAIL="VERIFY_EMAIL";const Je=function Ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ut=function ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},be=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Re=new ie.Yd("@firebase/auth");function $e(v,...g){Re.logLevel<=ie.in.ERROR&&Re.error(`Auth (${le.SDK_VERSION}): ${v}`,...g)}function xe(v,...g){throw Ve(v,...g)}function Se(v,...g){return Ve(v,...g)}function Me(v,g,_){const C=Object.assign(Object.assign({},ut()),{[g]:_});return new L.LL("auth","Firebase",C).create(g,{appName:v.name})}function qe(v,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&xe(v,"argument-error"),Me(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(v,...g){if("string"!=typeof v){const _=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=v.name),v._errorFactory.create(_,...C)}return be.create(v,...g)}function G(v,g,..._){if(!v)throw Ve(g,..._)}function Ee(v){const g="INTERNAL ASSERTION FAILED: "+v;throw $e(g),new Error(g)}function We(v,g){v||Ee(g)}const tt=new Map;function _t(v){We(v instanceof Function,"Expected a class definition");let g=tt.get(v);return g?(We(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,tt.set(v,g),g)}function xr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function rr(){return"http:"===as()||"https:"===as()}function as(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class fe{constructor(g,_){this.shortDelay=g,this.longDelay=_,We(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function ae(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(rr()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function se(v,g){We(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Ge{static initialize(g,_,C){this.fetchImpl=g,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const He={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ct=new fe(3e4,6e4);function Qe(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function Kt(v,g,_,C){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,s.Z)(function*(v,g,_,C,x={}){return Yt(v,x,(0,s.Z)(function*(){let P={},Y={};C&&("GET"===g?Y=C:P={body:JSON.stringify(C)});const ue=(0,L.xO)(Object.assign({key:v.config.apiKey},Y)).slice(1),Ue=yield v._getAdditionalHeaders();return Ue["Content-Type"]="application/json",v.languageCode&&(Ue["X-Firebase-Locale"]=v.languageCode),Ge.fetch()(kr(v,v.config.apiHost,_,ue),Object.assign({method:g,headers:Ue,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Yt(v,g,_){return ln.apply(this,arguments)}function ln(){return(ln=(0,s.Z)(function*(v,g,_){v._canInitEmulator=!1;const C=Object.assign(Object.assign({},He),g);try{const x=new Pn(v),P=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const Y=yield P.json();if("needConfirmation"in Y)throw Gn(v,"account-exists-with-different-credential",Y);if(P.ok&&!("errorMessage"in Y))return Y;{const ue=P.ok?Y.errorMessage:Y.error.message,[Ue,ot]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw Gn(v,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Ue)throw Gn(v,"email-already-in-use",Y);if("USER_DISABLED"===Ue)throw Gn(v,"user-disabled",Y);const At=C[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(ot)throw Me(v,At,ot);xe(v,At)}}catch(x){if(x instanceof L.ZR)throw x;xe(v,"network-request-failed")}})).apply(this,arguments)}function nn(v,g,_,C){return pr.apply(this,arguments)}function pr(){return(pr=(0,s.Z)(function*(v,g,_,C,x={}){const P=yield Kt(v,g,_,C,x);return"mfaPendingCredential"in P&&xe(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function kr(v,g,_,C){const x=`${g}${_}?${C}`;return v.config.emulator?se(v.config,x):`${v.config.apiScheme}://${x}`}class Pn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Se(this.auth,"network-request-failed")),Ct.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gn(v,g,_){const C={appName:v.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const x=Se(v,g,C);return x.customData._tokenResponse=_,x}function Fn(){return(Fn=(0,s.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function ls(){return(ls=(0,s.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Bn(){return(Bn=(0,s.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Xr(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Tn(){return(Tn=(0,s.Z)(function*(v,g=!1){const _=(0,L.m9)(v),C=yield _.getIdToken(g),x=xt(C);G(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const P="object"==typeof x.firebase?x.firebase:void 0,Y=P?.sign_in_provider;return{claims:x,token:C,authTime:Xr(Tt(x.auth_time)),issuedAtTime:Xr(Tt(x.iat)),expirationTime:Xr(Tt(x.exp)),signInProvider:Y||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function Tt(v){return 1e3*Number(v)}function xt(v){var g;const[_,C,x]=v.split(".");if(void 0===_||void 0===C||void 0===x)return $e("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,L.tV)(C);return P?JSON.parse(P):($e("Failed to decode base64 JWT payload"),null)}catch(P){return $e("Caught error parsing JWT payload as JSON",null===(g=P)||void 0===g?void 0:g.toString()),null}}function Kn(v,g){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,s.Z)(function*(v,g,_=!1){if(_)return g;try{return yield g}catch(C){throw C instanceof L.ZR&&function Vs({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(C)&&v.auth.currentUser===v&&(yield v.auth.signOut()),C}})).apply(this,arguments)}class $r{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,s.Z)(function*(){yield _.iteration()}),C)}iteration(){var g=this;return(0,s.Z)(function*(){var _;try{yield g.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null===(_=C)||void 0===_?void 0:_.code)&&g.schedule(!0))}g.schedule()})()}}class Ra{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xr(this.lastLoginAt),this.creationTime=Xr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function hn(v){return Ii.apply(this,arguments)}function Ii(){return Ii=(0,s.Z)(function*(v){var g;const _=v.auth,C=yield v.getIdToken(),x=yield Kn(v,function Bs(v,g){return Bn.apply(this,arguments)}(_,{idToken:C}));G(x?.users.length,_,"internal-error");const P=x.users[0];v._notifyReloadListener(P);const Y=null!==(g=P.providerUserInfo)&&void 0!==g&&g.length?function H(v){return v.map(g=>{var{providerId:_}=g,C=(0,oe._T)(g,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}(P.providerUserInfo):[],ue=function $(v,g){return[...v.filter(C=>!g.some(x=>x.providerId===C.providerId)),...g]}(v.providerData,Y),At=!!v.isAnonymous&&!(v.email&&P.passwordHash||ue?.length),Et={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:ue,metadata:new Ra(P.createdAt,P.lastLoginAt),isAnonymous:At};Object.assign(v,Et)}),Ii.apply(this,arguments)}function Q(){return(Q=(0,s.Z)(function*(v){const g=(0,L.m9)(v);yield hn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function K(){return(K=(0,s.Z)(function*(v,g){const _=yield Yt(v,{},(0,s.Z)(function*(){const C=(0,L.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:P}=v.config,Y=kr(v,x,"/v1/token",`key=${P}`),ue=yield v._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",Ge.fetch()(Y,{method:"POST",headers:ue,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){G(g.idToken,"internal-error"),G(typeof g.idToken<"u","internal-error"),G(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function cs(v){const g=xt(v);return G(g,"internal-error"),G(typeof g.exp<"u","internal-error"),G(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var C=this;return(0,s.Z)(function*(){return G(!C.accessToken||C.refreshToken,g,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var C=this;return(0,s.Z)(function*(){const{accessToken:x,refreshToken:P,expiresIn:Y}=yield function z(v,g){return K.apply(this,arguments)}(g,_);C.updateTokensAndExpiration(x,P,Number(Y))})()}updateTokensAndExpiration(g,_,C){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,_){const{refreshToken:C,accessToken:x,expirationTime:P}=_,Y=new Ne;return C&&(G("string"==typeof C,"internal-error",{appName:g}),Y.refreshToken=C),x&&(G("string"==typeof x,"internal-error",{appName:g}),Y.accessToken=x),P&&(G("number"==typeof P,"internal-error",{appName:g}),Y.expirationTime=P),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ne,this.toJSON())}_performRefresh(){return Ee("not implemented")}}function Ye(v,g){G("string"==typeof v||typeof v>"u","internal-error",{appName:g})}class vt{constructor(g){var{uid:_,auth:C,stsTokenManager:x}=g,P=(0,oe._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $r(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Ra(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,s.Z)(function*(){const C=yield Kn(_,_.stsTokenManager.getToken(_.auth,g));return G(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(g){return function yn(v){return Tn.apply(this,arguments)}(this,g)}reload(){return function Xt(v){return Q.apply(this,arguments)}(this)}_assign(g){this!==g&&(G(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new vt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var C=this;return(0,s.Z)(function*(){let x=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),x=!0),_&&(yield hn(C)),yield C.auth._persistUserIfCurrent(C),x&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,s.Z)(function*(){const _=yield g.getIdToken();return yield Kn(g,function Si(v,g){return Fn.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var C,x,P,Y,ue,Ue,ot,At;const Et=null!==(C=_.displayName)&&void 0!==C?C:void 0,Lr=null!==(x=_.email)&&void 0!==x?x:void 0,bi=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,Od=null!==(Y=_.photoURL)&&void 0!==Y?Y:void 0,lg=null!==(ue=_.tenantId)&&void 0!==ue?ue:void 0,gu=null!==(Ue=_._redirectEventId)&&void 0!==Ue?Ue:void 0,cg=null!==(ot=_.createdAt)&&void 0!==ot?ot:void 0,pf=null!==(At=_.lastLoginAt)&&void 0!==At?At:void 0,{uid:gf,emailVerified:ec,isAnonymous:ks,providerData:tc,stsTokenManager:nc}=_;G(gf&&nc,g,"internal-error");const E_=Ne.fromJSON(this.name,nc);G("string"==typeof gf,g,"internal-error"),Ye(Et,g.name),Ye(Lr,g.name),G("boolean"==typeof ec,g,"internal-error"),G("boolean"==typeof ks,g,"internal-error"),Ye(bi,g.name),Ye(Od,g.name),Ye(lg,g.name),Ye(gu,g.name),Ye(cg,g.name),Ye(pf,g.name);const mf=new vt({uid:gf,auth:g,email:Lr,emailVerified:ec,displayName:Et,isAnonymous:ks,photoURL:Od,phoneNumber:bi,tenantId:lg,stsTokenManager:E_,createdAt:cg,lastLoginAt:pf});return tc&&Array.isArray(tc)&&(mf.providerData=tc.map(D_=>Object.assign({},D_))),gu&&(mf._redirectEventId=gu),mf}static _fromIdTokenResponse(g,_,C=!1){return(0,s.Z)(function*(){const x=new Ne;x.updateFromServerResponse(_);const P=new vt({uid:_.localId,auth:g,stsTokenManager:x,isAnonymous:C});return yield hn(P),P})()}}const fn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,s.Z)(function*(){return!0})()}_set(_,C){var x=this;return(0,s.Z)(function*(){x.storage[_]=C})()}_get(_){var C=this;return(0,s.Z)(function*(){const x=C.storage[_];return void 0===x?null:x})()}_remove(_){var C=this;return(0,s.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return v.type="NONE",v})();function Dn(v,g,_){return`firebase:${v}:${g}:${_}`}class Ut{constructor(g,_,C){this.persistence=g,this.auth=_,this.userKey=C;const{config:x,name:P}=this.auth;this.fullUserKey=Dn(this.userKey,x.apiKey,P),this.fullPersistenceKey=Dn("persistence",x.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,s.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?vt._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,s.Z)(function*(){if(_.persistence===g)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,C="authUser"){return(0,s.Z)(function*(){if(!_.length)return new Ut(_t(fn),g,C);const x=(yield Promise.all(_.map(function(){var ot=(0,s.Z)(function*(At){if(yield At._isAvailable())return At});return function(At){return ot.apply(this,arguments)}}()))).filter(ot=>ot);let P=x[0]||_t(fn);const Y=Dn(C,g.config.apiKey,g.name);let ue=null;for(const ot of _)try{const At=yield ot._get(Y);if(At){const Et=vt._fromJSON(g,At);ot!==P&&(ue=Et),P=ot;break}}catch{}const Ue=x.filter(ot=>ot._shouldAllowMigration);return P._shouldAllowMigration&&Ue.length?(P=Ue[0],ue&&(yield P._set(Y,ue.toJSON())),yield Promise.all(_.map(function(){var ot=(0,s.Z)(function*(At){if(At!==P)try{yield At._remove(Y)}catch{}});return function(At){return ot.apply(this,arguments)}}())),new Ut(P,g,C)):new Ut(P,g,C)})()}}function Yn(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ac(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Rr(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Oa(g))return"Blackberry";if(Gr(g))return"Webos";if(en(g))return"Safari";if((g.includes("chrome/")||yo(g))&&!g.includes("edge/"))return"Chrome";if(Cs(g))return"Android";{const C=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function Rr(v=(0,L.z$)()){return/firefox\//i.test(v)}function en(v=(0,L.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function yo(v=(0,L.z$)()){return/crios\//i.test(v)}function Ac(v=(0,L.z$)()){return/iemobile/i.test(v)}function Cs(v=(0,L.z$)()){return/android/i.test(v)}function Oa(v=(0,L.z$)()){return/blackberry/i.test(v)}function Gr(v=(0,L.z$)()){return/webos/i.test(v)}function Ts(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function xp(v=(0,L.z$)()){return Ts(v)||Cs(v)||Gr(v)||Oa(v)||/windows phone/i.test(v)||Ac(v)}function Pa(v,g=[]){let _;switch(v){case"Browser":_=Yn((0,L.z$)());break;case"Worker":_=`${Yn((0,L.z$)())}-${v}`;break;default:_=v}const C=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${le.SDK_VERSION}/${C}`}class Ch{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const C=P=>new Promise((Y,ue)=>{try{Y(g(P))}catch(Ue){ue(Ue)}});C.onAbort=_,this.queue.push(C);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,s.Z)(function*(){var C;if(_.auth.currentUser===g)return;const x=[];try{for(const P of _.queue)yield P(g),P.onAbort&&x.push(P.onAbort)}catch(P){x.reverse();for(const Y of x)try{Y()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=P)||void 0===C?void 0:C.message})}})()}}class Th{constructor(g,_,C){this.app=g,this.heartbeatServiceProvider=_,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wu(this),this.idTokenSubscription=new Wu(this),this.beforeStateQueue=new Ch(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=be,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(g,_){var C=this;return _&&(this._popupRedirectResolver=_t(_)),this._initializationPromise=this.queue((0,s.Z)(function*(){var x,P;if(!C._deleted&&(C.persistenceManager=yield Ut.create(C,g),!C._deleted)){if(null!==(x=C._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(P=C.currentUser)||void 0===P?void 0:P.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,s.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,s.Z)(function*(){var C;const x=yield _.assertedPersistence.getCurrentUser();let P=x,Y=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ue=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,Ue=P?._redirectEventId,ot=yield _.tryRedirectSignIn(g);(!ue||ue===Ue)&&ot?.user&&(P=ot.user,Y=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(Y)try{yield _.beforeStateQueue.runMiddleware(P)}catch(ue){P=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ue))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return G(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(g){var _=this;return(0,s.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,s.Z)(function*(){var C;try{yield hn(g)}catch(x){if("auth/network-request-failed"!==(null===(C=x)||void 0===C?void 0:C.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function pe(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,s.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,s.Z)(function*(){const C=g?(0,L.m9)(g):null;return C&&G(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(g,_=!1){var C=this;return(0,s.Z)(function*(){if(!C._deleted)return g&&G(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,s.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,s.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,s.Z)(function*(){yield _.assertedPersistence.setPersistence(_t(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new L.LL("auth","Firebase",g())}onAuthStateChanged(g,_,C){return this.registerStateListener(this.authStateSubscription,g,_,C)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,C){return this.registerStateListener(this.idTokenSubscription,g,_,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var C=this;return(0,s.Z)(function*(){const x=yield C.getOrInitRedirectPersistenceManager(_);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,s.Z)(function*(){if(!_.redirectPersistenceManager){const C=g&&_t(g)||_._popupRedirectResolver;G(C,_,"argument-error"),_.redirectPersistenceManager=yield Ut.create(_,[_t(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,s.Z)(function*(){var C,x;return _._isInitialized&&(yield _.queue((0,s.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===g?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,s.Z)(function*(){if(g===_.currentUser)return _.queue((0,s.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,C,x){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return G(Y,this,"internal-error"),Y.then(()=>P(this.currentUser)),"function"==typeof _?g.addObserver(_,C,x):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,s.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Pa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,s.Z)(function*(){var _;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(C["X-Firebase-Client"]=x),C})()}}function qn(v){return(0,L.m9)(v)}class Wu{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,L.ne)(_=>this.observer=_)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ir(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function js(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class Zo{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Ee("not implemented")}_getIdTokenResponse(g){return Ee("not implemented")}_linkToIdToken(g,_){return Ee("not implemented")}_getReauthenticationResolver(g){return Ee("not implemented")}}function ti(v,g){return qo.apply(this,arguments)}function qo(){return(qo=(0,s.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:resetPassword",Qe(v,g))})).apply(this,arguments)}function Gi(v,g){return st.apply(this,arguments)}function st(){return(st=(0,s.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function kn(){return(kn=(0,s.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:update",Qe(v,g))})).apply(this,arguments)}function Hs(){return(Hs=(0,s.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signInWithPassword",Qe(v,g))})).apply(this,arguments)}function sr(v,g){return or.apply(this,arguments)}function or(){return(or=(0,s.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:sendOobCode",Qe(v,g))})).apply(this,arguments)}function Fa(){return(Fa=(0,s.Z)(function*(v,g){return sr(v,g)})).apply(this,arguments)}function Zt(){return(Zt=(0,s.Z)(function*(v,g){return sr(v,g)})).apply(this,arguments)}function vo(){return(vo=(0,s.Z)(function*(v,g){return sr(v,g)})).apply(this,arguments)}function us(){return(us=(0,s.Z)(function*(v,g){return sr(v,g)})).apply(this,arguments)}function La(){return(La=(0,s.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signInWithEmailLink",Qe(v,g))})).apply(this,arguments)}function Zi(){return(Zi=(0,s.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signInWithEmailLink",Qe(v,g))})).apply(this,arguments)}class $s extends Zo{constructor(g,_,C,x=null){super("password",C),this._email=g,this._password=_,this._tenantId=x}static _fromEmailAndPassword(g,_){return new $s(g,_,"password")}static _fromEmailAndCode(g,_,C=null){return new $s(g,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,s.Z)(function*(){switch(_.signInMethod){case"password":return function gi(v,g){return Hs.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ni(v,g){return La.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:xe(g,"internal-error")}})()}_linkToIdToken(g,_){var C=this;return(0,s.Z)(function*(){switch(C.signInMethod){case"password":return Gi(g,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function zo(v,g){return Zi.apply(this,arguments)}(g,{idToken:_,email:C._email,oobCode:C._password});default:xe(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function mi(v,g){return vn.apply(this,arguments)}function vn(){return(vn=(0,s.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signInWithIdp",Qe(v,g))})).apply(this,arguments)}class qi extends Zo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new qi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):xe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:x}=_,P=(0,oe._T)(_,["providerId","signInMethod"]);if(!C||!x)return null;const Y=new qi(C,x);return Y.idToken=P.idToken||void 0,Y.accessToken=P.accessToken||void 0,Y.secret=P.secret,Y.nonce=P.nonce,Y.pendingToken=P.pendingToken||null,Y}_getIdTokenResponse(g){return mi(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,mi(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,mi(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,L.xO)(_)}return g}}function Ua(){return(Ua=(0,s.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:sendVerificationCode",Qe(v,g))})).apply(this,arguments)}function ri(){return(ri=(0,s.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signInWithPhoneNumber",Qe(v,g))})).apply(this,arguments)}function Dh(){return(Dh=(0,s.Z)(function*(v,g){const _=yield nn(v,"POST","/v1/accounts:signInWithPhoneNumber",Qe(v,g));if(_.temporaryProof)throw Gn(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Ai={USER_NOT_FOUND:"user-not-found"};function Cl(){return(Cl=(0,s.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signInWithPhoneNumber",Qe(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Ai)})).apply(this,arguments)}class ds extends Zo{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new ds({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new ds({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Wo(v,g){return ri.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function ii(v,g){return Dh.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function zi(v,g){return Cl.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:C,verificationCode:x}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:C,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:P}=g;return C||_||x||P?new ds({verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:P}):null}}class Tl{constructor(g){var _,C,x,P,Y,ue;const Ue=(0,L.zd)((0,L.pd)(g)),ot=null!==(_=Ue.apiKey)&&void 0!==_?_:null,At=null!==(C=Ue.oobCode)&&void 0!==C?C:null,Et=function Ju(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Ue.mode)&&void 0!==x?x:null);G(ot&&At&&Et,"argument-error"),this.apiKey=ot,this.operation=Et,this.code=At,this.continueUrl=null!==(P=Ue.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Y=Ue.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(ue=Ue.tenantId)&&void 0!==ue?ue:null}static parseLink(g){const _=function Ni(v){const g=(0,L.zd)((0,L.pd)(v)).link,_=g?(0,L.zd)((0,L.pd)(g)).deep_link_id:null,C=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(C?(0,L.zd)((0,L.pd)(C)).link:null)||C||_||g||v}(g);try{return new Tl(_)}catch{return null}}}let Qu=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,C){return $s._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const x=Tl.parseLink(C);return G(x,"argument-error"),$s._fromEmailAndCode(_,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Gs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ba extends Gs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class El extends Ba{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return G("providerId"in _&&"signInMethod"in _,"argument-error"),qi._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return G(g.idToken||g.accessToken,"argument-error"),qi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return El.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return El.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:x,pendingToken:P,nonce:Y,providerId:ue}=g;if(!C&&!x&&!_&&!P||!ue)return null;try{return new El(ue)._credential({idToken:_,accessToken:C,nonce:Y,pendingToken:P})}catch{return null}}}let Xu=(()=>{class v extends Ba{constructor(){super("facebook.com")}static credential(_){return qi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Rp=(()=>{class v extends Ba{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return qi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:x}=_;if(!C&&!x)return null;try{return v.credential(C,x)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Op=(()=>{class v extends Ba{constructor(){super("github.com")}static credential(_){return qi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Va extends Zo{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return mi(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,mi(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,mi(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:x,pendingToken:P}=_;return C&&x&&P&&C===x?new Va(C,P):null}static _create(g,_){return new Va(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ds extends Gs{constructor(g){G(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Ds.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Ds.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Va.fromJSON(g);return G(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:C}=g;if(!_||!C)return null;try{return Va._create(C,_)}catch{return null}}}let a_=(()=>{class v extends Ba{constructor(){super("twitter.com")}static credential(_,C){return qi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:x}=_;if(!C||!x)return null;try{return v.credential(C,x)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Zr(v,g){return ed.apply(this,arguments)}function ed(){return(ed=(0,s.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signUp",Qe(v,g))})).apply(this,arguments)}class _i{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,C,x=!1){return(0,s.Z)(function*(){const P=yield vt._fromIdTokenResponse(g,C,x),Y=td(C);return new _i({user:P,providerId:Y,_tokenResponse:C,operationType:_})})()}static _forOperation(g,_,C){return(0,s.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const x=td(C);return new _i({user:g,providerId:x,_tokenResponse:C,operationType:_})})()}}function td(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function bo(){return(bo=(0,s.Z)(function*(v){var g;const _=qn(v);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new _i({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield Zr(_,{returnSecureToken:!0}),x=yield _i._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Nc extends L.ZR{constructor(g,_,C,x){var P;super(_.code,_.message),this.operationType=C,this.user=x,Object.setPrototypeOf(this,Nc.prototype),this.customData={appName:g.name,tenantId:null!==(P=g.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,_,C,x){return new Nc(g,_,C,x)}}function Yo(v,g,_,C){return("reauthenticate"===g?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Nc._fromErrorAndOperation(v,P,g,C):P})}function Jo(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function ja(){return ja=(0,s.Z)(function*(v,g){const _=(0,L.m9)(v);yield Qo(!0,_,g);const{providerUserInfo:C}=yield function yt(v,g){return ls.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),x=Jo(C||[]);return _.providerData=_.providerData.filter(P=>x.has(P.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),ja.apply(this,arguments)}function kc(v,g){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,s.Z)(function*(v,g,_=!1){const C=yield Kn(v,g._linkToIdToken(v.auth,yield v.getIdToken()),_);return _i._forOperation(v,"link",C)})).apply(this,arguments)}function Qo(v,g,_){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,s.Z)(function*(v,g,_){yield hn(g);const x=!1===v?"provider-already-linked":"no-such-provider";G(Jo(g.providerData).has(_)===v,g.auth,x)})).apply(this,arguments)}function nd(v,g){return $a.apply(this,arguments)}function $a(){return($a=(0,s.Z)(function*(v,g,_=!1){var C;const{auth:x}=v,P="reauthenticate";try{const Y=yield Kn(v,Yo(x,P,g,v),_);G(Y.idToken,x,"internal-error");const ue=xt(Y.idToken);G(ue,x,"internal-error");const{sub:Ue}=ue;return G(v.uid===Ue,x,"user-mismatch"),_i._forOperation(v,P,Y)}catch(Y){throw"auth/user-not-found"===(null===(C=Y)||void 0===C?void 0:C.code)&&xe(x,"user-mismatch"),Y}})).apply(this,arguments)}function Ga(v,g){return xi.apply(this,arguments)}function xi(){return(xi=(0,s.Z)(function*(v,g,_=!1){const C="signIn",x=yield Yo(v,C,g),P=yield _i._fromIdTokenResponse(v,C,x);return _||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function zn(v,g){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,s.Z)(function*(v,g){return Ga(qn(v),g)})).apply(this,arguments)}function Jn(v,g){return Za.apply(this,arguments)}function Za(){return(Za=(0,s.Z)(function*(v,g){const _=(0,L.m9)(v);return yield Qo(!1,_,g.providerId),kc(_,g)})).apply(this,arguments)}function Xo(v,g){return ar.apply(this,arguments)}function ar(){return(ar=(0,s.Z)(function*(v,g){return nd((0,L.m9)(v),g)})).apply(this,arguments)}function qa(){return(qa=(0,s.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signInWithCustomToken",Qe(v,g))})).apply(this,arguments)}function mr(){return mr=(0,s.Z)(function*(v,g){const _=qn(v),C=yield function rd(v,g){return qa.apply(this,arguments)}(_,{token:g,returnSecureToken:!0}),x=yield _i._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(x.user),x}),mr.apply(this,arguments)}class Sl{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?za._fromServerResponse(g,_):xe(g,"internal-error")}}class za extends Sl{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new za(_)}}function Oc(v,g,_){var C;G((null===(C=_.url)||void 0===C?void 0:C.length)>0,v,"invalid-continue-uri"),G(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(G(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(G(_.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Il(){return Il=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v),x={requestType:"PASSWORD_RESET",email:g};_&&Oc(C,x,_),yield function gr(v,g){return Zt.apply(this,arguments)}(C,x)}),Il.apply(this,arguments)}function Pt(){return(Pt=(0,s.Z)(function*(v,g,_){yield ti((0,L.m9)(v),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Ih(){return Ih=(0,s.Z)(function*(v,g){yield function Vt(v,g){return kn.apply(this,arguments)}((0,L.m9)(v),{oobCode:g})}),Ih.apply(this,arguments)}function Pc(v,g){return id.apply(this,arguments)}function id(){return(id=(0,s.Z)(function*(v,g){const _=(0,L.m9)(v),C=yield ti(_,{oobCode:g}),x=C.requestType;switch(G(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(C.mfaInfo,_,"internal-error");default:G(C.email,_,"internal-error")}let P=null;return C.mfaInfo&&(P=Sl._fromServerResponse(qn(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:P},operation:x}})).apply(this,arguments)}function Fc(){return(Fc=(0,s.Z)(function*(v,g){const{data:_}=yield Pc((0,L.m9)(v),g);return _.email})).apply(this,arguments)}function od(){return(od=(0,s.Z)(function*(v,g,_){const C=qn(v),x=yield Zr(C,{returnSecureToken:!0,email:g,password:_}),P=yield _i._fromIdTokenResponse(C,"signIn",x);return yield C._updateCurrentUser(P.user),P})).apply(this,arguments)}function ad(){return ad=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v),x={requestType:"EMAIL_SIGNIN",email:g};G(_.handleCodeInApp,C,"argument-error"),_&&Oc(C,x,_),yield function Ku(v,g){return vo.apply(this,arguments)}(C,x)}),ad.apply(this,arguments)}function Nl(){return(Nl=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v),x=Qu.credentialWithLink(g,_||xr());return G(x._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),zn(C,x)})).apply(this,arguments)}function ki(){return(ki=(0,s.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:createAuthUri",Qe(v,g))})).apply(this,arguments)}function Bc(){return Bc=(0,s.Z)(function*(v,g){const C={identifier:g,continueUri:rr()?xr():"http://localhost"},{signinMethods:x}=yield function Lc(v,g){return ki.apply(this,arguments)}((0,L.m9)(v),C);return x||[]}),Bc.apply(this,arguments)}function ld(){return ld=(0,s.Z)(function*(v,g){const _=(0,L.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&Oc(_.auth,x,g);const{email:P}=yield function Vn(v,g){return Fa.apply(this,arguments)}(_.auth,x);P!==v.email&&(yield v.reload())}),ld.apply(this,arguments)}function _r(){return _r=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};_&&Oc(C.auth,P,_);const{email:Y}=yield function Yu(v,g){return us.apply(this,arguments)}(C.auth,P);Y!==v.email&&(yield v.reload())}),_r.apply(this,arguments)}function wo(){return(wo=(0,s.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ss(){return Ss=(0,s.Z)(function*(v,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const C=(0,L.m9)(v),P={idToken:yield C.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},Y=yield Kn(C,function Ri(v,g){return wo.apply(this,arguments)}(C.auth,P));C.displayName=Y.displayName||null,C.photoURL=Y.photoUrl||null;const ue=C.providerData.find(({providerId:Ue})=>"password"===Ue);ue&&(ue.displayName=C.displayName,ue.photoURL=C.photoURL),yield C._updateTokensIfNecessary(Y)}),Ss.apply(this,arguments)}function kh(v,g,_){return cd.apply(this,arguments)}function cd(){return(cd=(0,s.Z)(function*(v,g,_){const{auth:C}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(P.email=g),_&&(P.password=_);const Y=yield Kn(v,Gi(C,P));yield v._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class qs{constructor(g,_,C={}){this.isNewUser=g,this.providerId=_,this.profile=C}}class Rh extends qs{constructor(g,_,C,x){super(g,_,C),this.username=x}}class dd extends qs{constructor(g,_){super(g,"facebook.com",_)}}class Oh extends Rh{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Pp extends qs{constructor(g,_){super(g,"google.com",_)}}class jc extends Rh{constructor(g,_,C){super(g,"twitter.com",_,C)}}function Fp(v){const{user:g,_tokenResponse:_}=v;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function ud(v){var g,_;if(!v)return null;const{providerId:C}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!C&&v?.idToken){const Y=null===(_=null===(g=xt(v.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(Y)return new qs(P,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!C)return null;switch(C){case"facebook.com":return new dd(P,x);case"github.com":return new Oh(P,x);case"google.com":return new Pp(P,x);case"twitter.com":return new jc(P,x,v.screenName||null);case"custom":case"anonymous":return new qs(P,null);default:return new qs(P,C,x)}}(_)}class Ka{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Ka("enroll",g)}static _fromMfaPendingCredential(g){return new Ka("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,C;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Ka._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(C=g.multiFactorSession)&&void 0!==C&&C.idToken)return Ka._fromIdtoken(g.multiFactorSession.idToken)}return null}}class hd{constructor(g,_,C){this.session=g,this.hints=_,this.signInResolver=C}static _fromError(g,_){const C=qn(g),x=_.customData._serverResponse,P=(x.mfaInfo||[]).map(ue=>Sl._fromServerResponse(C,ue));G(x.mfaPendingCredential,C,"internal-error");const Y=Ka._fromMfaPendingCredential(x.mfaPendingCredential);return new hd(Y,P,function(){var ue=(0,s.Z)(function*(Ue){const ot=yield Ue._process(C,Y);delete x.mfaInfo,delete x.mfaPendingCredential;const At=Object.assign(Object.assign({},x),{idToken:ot.idToken,refreshToken:ot.refreshToken});switch(_.operationType){case"signIn":const Et=yield _i._fromIdTokenResponse(C,_.operationType,At);return yield C._updateCurrentUser(Et.user),Et;case"reauthenticate":return G(_.user,C,"internal-error"),_i._forOperation(_.user,_.operationType,At);default:xe(C,"internal-error")}});return function(Ue){return ue.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,s.Z)(function*(){return _.signInResolver(g)})()}}class kl{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>Sl._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new kl(g)}getSession(){var g=this;return(0,s.Z)(function*(){return Ka._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var C=this;return(0,s.Z)(function*(){const x=g,P=yield C.getSession(),Y=yield Kn(C.user,x._process(C.user.auth,P,_));return yield C.user._updateTokensIfNecessary(Y),C.user.reload()})()}unenroll(g){var _=this;return(0,s.Z)(function*(){var C;const x="string"==typeof g?g:g.uid,P=yield _.user.getIdToken(),Y=yield Kn(_.user,function u_(v,g){return Kt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Qe(v,g))}(_.user.auth,{idToken:P,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ue})=>ue!==x),yield _.user._updateTokensIfNecessary(Y);try{yield _.user.reload()}catch(ue){if("auth/user-token-expired"!==(null===(C=ue)||void 0===C?void 0:C.code))throw ue}})()}}const na=new WeakMap,Co="__sak";class Rl{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Co,"1"),this.storage.removeItem(Co),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Hc=(()=>{class v extends Rl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ol(){const v=(0,L.z$)();return en(v)||Ts(v)}()&&function zu(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=xp(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const x=this.storage.getItem(C),P=this.localCache[C];x!==P&&_(C,P,x)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((ue,Ue,ot)=>{this.notifyListeners(ue,ot)});const x=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(x);if(_.newValue!==ue)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!C)return}const P=()=>{const ue=this.storage.getItem(x);!C&&this.localCache[x]===ue||this.notifyListeners(x,ue)},Y=this.storage.getItem(x);!function Np(){return(0,L.w1)()&&10===document.documentMode}()||Y===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var x=()=>super._set,P=this;return(0,s.Z)(function*(){yield x().call(P,_,C),P.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,x=this;return(0,s.Z)(function*(){const P=yield C().call(x,_);return x.localCache[_]=JSON.stringify(P),P})()}_remove(_){var C=()=>super._remove,x=this;return(0,s.Z)(function*(){yield C().call(x,_),delete x.localCache[_]})()}}return v.type="LOCAL",v})(),ra=(()=>{class v extends Rl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return v.type="SESSION",v})();let Up=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(P=>P.isListeningto(_));if(C)return C;const x=new v(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,s.Z)(function*(){const x=_,{eventId:P,eventType:Y,data:ue}=x.data,Ue=C.handlersMap[Y];if(!Ue?.size)return;x.ports[0].postMessage({status:"ack",eventId:P,eventType:Y});const ot=Array.from(Ue).map(function(){var Et=(0,s.Z)(function*(Lr){return Lr(x.origin,ue)});return function(Lr){return Et.apply(this,arguments)}}()),At=yield function Lh(v){return Promise.all(v.map(function(){var g=(0,s.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return g.apply(this,arguments)}}()))}(ot);x.ports[0].postMessage({status:"done",eventId:P,eventType:Y,response:At})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function ia(v="",g=10){let _="";for(let C=0;C<g;C++)_+=Math.floor(10*Math.random());return v+_}class Ml{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,C=50){var x=this;return(0,s.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Y,ue;return new Promise((Ue,ot)=>{const At=ia("",20);P.port1.start();const Et=setTimeout(()=>{ot(new Error("unsupported_event"))},C);ue={messageChannel:P,onMessage(Lr){const bi=Lr;if(bi.data.eventId===At)switch(bi.data.status){case"ack":clearTimeout(Et),Y=setTimeout(()=>{ot(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Ue(bi.data.response);break;default:clearTimeout(Et),clearTimeout(Y),ot(new Error("invalid_response"))}}},x.handlers.add(ue),P.port1.addEventListener("message",ue.onMessage),x.target.postMessage({eventType:g,eventId:At,data:_},[P.port2])}).finally(()=>{ue&&x.removeMessageHandler(ue)})})()}}function jn(){return window}function zs(){return typeof jn().WorkerGlobalScope<"u"&&"function"==typeof jn().importScripts}function Ja(){return(Ja=(0,s.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const $c="firebaseLocalStorageDb",Gc=1,Eo="firebaseLocalStorage",Qa="fbase_key";class Xa{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Ll(v,g){return v.transaction([Eo],g?"readwrite":"readonly").objectStore(Eo)}function Zc(){const v=indexedDB.open($c,Gc);return new Promise((g,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const C=v.result;try{C.createObjectStore(Eo,{keyPath:Qa})}catch(x){_(x)}}),v.addEventListener("success",(0,s.Z)(function*(){const C=v.result;C.objectStoreNames.contains(Eo)?g(C):(C.close(),yield function Ul(){const v=indexedDB.deleteDatabase($c);return new Xa(v).toPromise()}(),g(yield Zc()))}))})}function Wr(v,g,_){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,s.Z)(function*(v,g,_){const C=Ll(v,!0).put({[Qa]:g,value:_});return new Xa(C).toPromise()})).apply(this,arguments)}function Do(){return(Do=(0,s.Z)(function*(v,g){const _=Ll(v,!1).get(g),C=yield new Xa(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Vl(v,g){const _=Ll(v,!0).delete(g);return new Xa(_).toPromise()}const sa=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,s.Z)(function*(){return _.db||(_.db=yield Zc()),_.db})()}_withRetries(_){var C=this;return(0,s.Z)(function*(){let x=0;for(;;)try{const P=yield C._openDb();return yield _(P)}catch(P){if(x++>3)throw P;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,s.Z)(function*(){return zs()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,s.Z)(function*(){_.receiver=Up._getInstance(function Fl(){return zs()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,s.Z)(function*(x,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(x,P){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,s.Z)(function*(x,P){return["keyChanged"]});return function(x,P){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,s.Z)(function*(){var C,x;if(_.activeServiceWorker=yield function Ws(){return Ja.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Ml(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);P&&null!==(C=P[0])&&void 0!==C&&C.fulfilled&&null!==(x=P[0])&&void 0!==x&&x.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,s.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function pd(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,s.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Zc();return yield Wr(_,Co,"1"),yield Vl(_,Co),!0}catch{}return!1})()}_withPendingWrite(_){var C=this;return(0,s.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var x=this;return(0,s.Z)(function*(){return x._withPendingWrite((0,s.Z)(function*(){return yield x._withRetries(P=>Wr(P,_,C)),x.localCache[_]=C,x.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,s.Z)(function*(){const x=yield C._withRetries(P=>function el(v,g){return Do.apply(this,arguments)}(P,_));return C.localCache[_]=x,x})()}_remove(_){var C=this;return(0,s.Z)(function*(){return C._withPendingWrite((0,s.Z)(function*(){return yield C._withRetries(x=>Vl(x,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,s.Z)(function*(){const C=yield _._withRetries(Y=>{const ue=Ll(Y,!1).getAll();return new Xa(ue).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const x=[],P=new Set;for(const{fbase_key:Y,value:ue}of C)P.add(Y),JSON.stringify(_.localCache[Y])!==JSON.stringify(ue)&&(_.notifyListeners(Y,ue),x.push(Y));for(const Y of Object.keys(_.localCache))_.localCache[Y]&&!P.has(Y)&&(_.notifyListeners(Y,null),x.push(Y));return x})()}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,s.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function zc(){return(zc=(0,s.Z)(function*(v){return(yield Kt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function As(v){return new Promise((g,_)=>{const C=document.createElement("script");C.setAttribute("src",v),C.onload=g,C.onerror=x=>{const P=Se("internal-error");P.customData=x,_(P)},C.type="text/javascript",C.charset="UTF-8",function oa(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(C)})}function Bh(v){return`__${v}${Math.floor(1e6*Math.random())}`}const hs=1e12;class d_{constructor(g){this.auth=g,this.counter=hs,this._widgets=new Map}render(g,_){const C=this.counter;return this._widgets.set(C,new Vh(g,this.auth.name,_||{})),this.counter++,C}reset(g){var _;const C=g||hs;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(g){var _;return(null===(_=this._widgets.get(g||hs))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,s.Z)(function*(){var C;return null===(C=_._widgets.get(g||hs))||void 0===C||C.execute(),""})()}}class Vh{constructor(g,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;G(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Kc(v){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<v;C++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const jh=Bh("rcb"),md=new fe(3e4,6e4);class Ys{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=jn().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return G(function tl(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(jn().grecaptcha):new Promise((C,x)=>{const P=jn().setTimeout(()=>{x(Se(g,"network-request-failed"))},md.get());jn()[jh]=()=>{jn().clearTimeout(P),delete jn()[jh];const ue=jn().grecaptcha;if(!ue)return void x(Se(g,"internal-error"));const Ue=ue.render;ue.render=(ot,At)=>{const Et=Ue(ot,At);return this.counter++,Et},this.hostLanguage=_,C(ue)},As(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:jh,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),x(Se(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=jn().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Jc{load(g){return(0,s.Z)(function*(){return new d_(g)})()}clearedOneInstance(){}}const Hh="recaptcha",Bp={theme:"light",type:"image"};class $l{constructor(g,_=Object.assign({},Bp),C){this.parameters=_,this.type=Hh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qn(C),this.isInvisible="invisible"===this.parameters.size,G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;G(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Jc:new Ys,this.validateStartingState()}verify(){var g=this;return(0,s.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(_)||new Promise(P=>{const Y=ue=>{ue&&(g.tokenChangeListeners.delete(Y),P(ue))};g.tokenChangeListeners.add(Y),g.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof g)g(_);else if("string"==typeof g){const C=jn()[g];"function"==typeof C&&C(_)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,s.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,s.Z)(function*(){G(rr()&&!zs(),g.auth,"internal-error"),yield function Vp(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Is(v){return zc.apply(this,arguments)}(g.auth);G(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _d{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=ds._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function yd(){return(yd=(0,s.Z)(function*(v,g,_){const C=qn(v),x=yield $h(C,g,(0,L.m9)(_));return new _d(x,P=>zn(C,P))})).apply(this,arguments)}function Qc(){return(Qc=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v);yield Qo(!1,C,"phone");const x=yield $h(C.auth,g,(0,L.m9)(_));return new _d(x,P=>Jn(C,P))})).apply(this,arguments)}function Hp(){return(Hp=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v),x=yield $h(C.auth,g,(0,L.m9)(_));return new _d(x,P=>Xo(C,P))})).apply(this,arguments)}function $h(v,g,_){return $p.apply(this,arguments)}function $p(){return $p=(0,s.Z)(function*(v,g,_){var C;const x=yield _.verify();try{let P;if(G("string"==typeof x,v,"argument-error"),G(_.type===Hh,v,"argument-error"),P="string"==typeof g?{phoneNumber:g}:g,"session"in P){const Y=P.session;if("phoneNumber"in P)return G("enroll"===Y.type,v,"internal-error"),(yield function Lp(v,g){return Kt(v,"POST","/v2/accounts/mfaEnrollment:start",Qe(v,g))}(v,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{G("signin"===Y.type,v,"internal-error");const ue=(null===(C=P.multiFactorHint)||void 0===C?void 0:C.uid)||P.multiFactorUid;return G(ue,v,"missing-multi-factor-info"),(yield function Hl(v,g){return Kt(v,"POST","/v2/accounts/mfaSignIn:start",Qe(v,g))}(v,{mfaPendingCredential:Y.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function Eh(v,g){return Ua.apply(this,arguments)}(v,{phoneNumber:P.phoneNumber,recaptchaToken:x});return Y}}finally{_._reset()}}),$p.apply(this,arguments)}function Gp(){return(Gp=(0,s.Z)(function*(v,g){yield kc((0,L.m9)(v),g)})).apply(this,arguments)}let vd=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=qn(_)}verifyPhoneNumber(_,C){return $h(this.auth,_,(0,L.m9)(C))}static credential(_,C){return ds._fromVerification(_,C)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:x}=_;return C&&x?ds._fromTokenResponse(C,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Sn(v,g){return g?_t(g):(G(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class eu extends Zo{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return mi(g,this._buildIdpRequest())}_linkToIdToken(g,_){return mi(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return mi(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function tu(v){return Ga(v.auth,new eu(v),v.bypassAuthState)}function bd(v){const{auth:g,user:_}=v;return G(_,g,"internal-error"),nd(_,new eu(v),v.bypassAuthState)}function Oi(v){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,s.Z)(function*(v){const{auth:g,user:_}=v;return G(_,g,"internal-error"),kc(_,new eu(v),v.bypassAuthState)})).apply(this,arguments)}class nu{constructor(g,_,C,x,P=!1){this.auth=g,this.resolver=C,this.user=x,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,s.Z)(function*(C,x){g.pendingPromise={resolve:C,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(P){g.reject(P)}});return function(C,x){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,s.Z)(function*(){const{urlResponse:C,sessionId:x,postBody:P,tenantId:Y,error:ue,type:Ue}=g;if(ue)return void _.reject(ue);const ot={auth:_.auth,requestUri:C,sessionId:x,tenantId:Y||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ue)(ot))}catch(At){_.reject(At)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return tu;case"linkViaPopup":case"linkViaRedirect":return Oi;case"reauthViaPopup":case"reauthViaRedirect":return bd;default:xe(this.auth,"internal-error")}}resolve(g){We(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){We(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gl=new fe(2e3,1e4);function ru(){return(ru=(0,s.Z)(function*(v,g,_){const C=qn(v);qe(v,g,Gs);const x=Sn(C,_);return new Bt(C,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function Zh(){return(Zh=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v);qe(C.auth,g,Gs);const x=Sn(C.auth,_);return new Bt(C.auth,"reauthViaPopup",g,x,C).executeNotNull()})).apply(this,arguments)}function vi(){return(vi=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v);qe(C.auth,g,Gs);const x=Sn(C.auth,_);return new Bt(C.auth,"linkViaPopup",g,x,C).executeNotNull()})).apply(this,arguments)}let Bt=(()=>{class v extends nu{constructor(_,C,x,P,Y){super(_,C,P,Y),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,s.Z)(function*(){const C=yield _.execute();return G(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,s.Z)(function*(){We(1===_.filter.length,"Popup operations only handle one event");const C=ia();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Se(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Se(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,x;this.pollId=null!==(x=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Se(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Gl.get())};_()}}return v.currentPopupAction=null,v})();const yr="pendingRedirect",Fe=new Map;class cn extends nu{constructor(g,_,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,s.Z)(function*(){let C=Fe.get(_.auth._key());if(!C){try{const P=(yield function vr(v,g){return Js.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;C=()=>Promise.resolve(P)}catch(x){C=()=>Promise.reject(x)}Fe.set(_.auth._key(),C)}return _.bypassAuthState||Fe.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,C=this;return(0,s.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(C,g);if("unknown"!==g.type){if(g.eventId){const x=yield C.auth._redirectUserForId(g.eventId);if(x)return C.user=x,_().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,s.Z)(function*(){})()}cleanUp(){}}function Js(){return(Js=(0,s.Z)(function*(v,g){const _=ql(g),C=Zl(v);if(!(yield C._isAvailable()))return!1;const x="true"===(yield C._get(_));return yield C._remove(_),x})).apply(this,arguments)}function rl(v,g){return bn.apply(this,arguments)}function bn(){return(bn=(0,s.Z)(function*(v,g){return Zl(v)._set(ql(g),"true")})).apply(this,arguments)}function qh(v,g){Fe.set(v._key(),g)}function Zl(v){return _t(v._redirectPersistence)}function ql(v){return Dn(yr,v.config.apiKey,v.name)}function iu(v,g,_){return function su(v,g,_){return I.apply(this,arguments)}(v,g,_)}function I(){return(I=(0,s.Z)(function*(v,g,_){const C=qn(v);qe(v,g,Gs);const x=Sn(C,_);return yield rl(x,C),x._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function S(v,g,_){return function R(v,g,_){return j.apply(this,arguments)}(v,g,_)}function j(){return(j=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v);qe(C.auth,g,Gs);const x=Sn(C.auth,_);yield rl(x,C.auth);const P=yield wt(C);return x._openRedirect(C.auth,g,"reauthViaRedirect",P)})).apply(this,arguments)}function X(v,g,_){return function ce(v,g,_){return ve.apply(this,arguments)}(v,g,_)}function ve(){return(ve=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v);qe(C.auth,g,Gs);const x=Sn(C.auth,_);yield Qo(!1,C,g.providerId),yield rl(x,C.auth);const P=yield wt(C);return x._openRedirect(C.auth,g,"linkViaRedirect",P)})).apply(this,arguments)}function bt(){return(bt=(0,s.Z)(function*(v,g){return yield qn(v)._initializationPromise,It(v,g,!1)})).apply(this,arguments)}function It(v,g){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,s.Z)(function*(v,g,_=!1){const C=qn(v),x=Sn(C,g),Y=yield new cn(C,x,_).execute();return Y&&!_&&(delete Y.user._redirectEventId,yield C._persistUserIfCurrent(Y.user),yield C._setRedirectUser(null,g)),Y})).apply(this,arguments)}function wt(v){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,s.Z)(function*(v){const g=ia(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class si{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(_=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function xs(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aa(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var C;if(g.error&&!aa(g)){const x=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Se(this.auth,x))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const C=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(il(g))}saveEventToCache(g){this.cachedEventUids.add(il(g)),this.lastProcessedEventTime=Date.now()}}function il(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function aa({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===g?.code}function So(v){return lr.apply(this,arguments)}function lr(){return(lr=(0,s.Z)(function*(v,g={}){return Kt(v,"GET","/v1/projects",g)})).apply(this,arguments)}const Qs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,In=/^https?/;function qp(){return(qp=(0,s.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield So(v);for(const _ of g)try{if(Ln(_))return}catch{}xe(v,"unauthorized-domain")})).apply(this,arguments)}function Ln(v){const g=xr(),{protocol:_,hostname:C}=new URL(g);if(v.startsWith("chrome-extension://")){const Y=new URL(v);return""===Y.hostname&&""===C?"chrome-extension:"===_&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&Y.hostname===C}if(!In.test(_))return!1;if(Qs.test(v))return C===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(C)}const oi=new fe(3e4,6e4);function la(){const v=jn().___jsl;if(v?.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let Qn=null;const r0=new fe(5e3,15e3),Wp="__/auth/iframe",ca="emulator/auth/iframe",Wl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ai=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kl(v){const g=v.config;G(g.authDomain,v,"auth-domain-config-required");const _=g.emulator?se(g,ca):`https://${v.config.authDomain}/${Wp}`,C={apiKey:g.apiKey,appName:v.name,v:le.SDK_VERSION},x=ai.get(v.config.apiHost);x&&(C.eid=x);const P=v._getFrameworks();return P.length&&(C.fw=P.join(",")),`${_}?${(0,L.xO)(C).slice(1)}`}function ua(){return ua=(0,s.Z)(function*(v){const g=yield function zp(v){return Qn=Qn||function Pr(v){return new Promise((g,_)=>{var C,x,P;function Y(){la(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{la(),_(Se(v,"network-request-failed"))},timeout:oi.get()})}if(null!==(x=null===(C=jn().gapi)||void 0===C?void 0:C.iframes)&&void 0!==x&&x.Iframe)g(gapi.iframes.getContext());else{if(null===(P=jn().gapi)||void 0===P||!P.load){const ue=Bh("iframefcb");return jn()[ue]=()=>{gapi.load?Y():_(Se(v,"network-request-failed"))},As(`https://apis.google.com/js/api.js?onload=${ue}`).catch(Ue=>_(Ue))}Y()}}).catch(g=>{throw Qn=null,g})}(v),Qn}(v),_=jn().gapi;return G(_,v,"internal-error"),g.open({where:document.body,url:Kl(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wl,dontclear:!0},C=>new Promise(function(){var x=(0,s.Z)(function*(P,Y){yield C.restyle({setHideOnLeave:!1});const ue=Se(v,"network-request-failed"),Ue=jn().setTimeout(()=>{Y(ue)},r0.get());function ot(){jn().clearTimeout(Ue),P(C)}C.ping(ot).then(ot,()=>{Y(ue)})});return function(P,Y){return x.apply(this,arguments)}}()))}),ua.apply(this,arguments)}const zh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wh=500,p_=600,Kh="_blank",Yh="http://localhost";class St{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ou="__/auth/handler",g_="emulator/auth/handler";function Cd(v,g,_,C,x,P){G(v.config.authDomain,v,"auth-domain-config-required"),G(v.config.apiKey,v,"invalid-api-key");const Y={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:C,v:le.SDK_VERSION,eventId:x};if(g instanceof Gs){g.setDefaultLanguage(v.languageCode),Y.providerId=g.providerId||"",(0,L.xb)(g.getCustomParameters())||(Y.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Ue,ot]of Object.entries(P||{}))Y[Ue]=ot}if(g instanceof Ba){const Ue=g.getScopes().filter(ot=>""!==ot);Ue.length>0&&(Y.scopes=Ue.join(","))}v.tenantId&&(Y.tid=v.tenantId);const ue=Y;for(const Ue of Object.keys(ue))void 0===ue[Ue]&&delete ue[Ue];return`${function Io({config:v}){return v.emulator?se(v,g_):`https://${v.authDomain}/${ou}`}(v)}?${(0,L.xO)(ue).slice(1)}`}const Jh="webStorageSupport",Qh=class m_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ra,this._completeRedirectFn=It,this._overrideRedirectResult=qh}_openPopup(g,_,C,x){var P=this;return(0,s.Z)(function*(){var Y;We(null===(Y=P.eventManagers[g._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const ue=Cd(g,_,C,xr(),x);return function wd(v,g,_,C=Wh,x=p_){const P=Math.max((window.screen.availHeight-x)/2,0).toString(),Y=Math.max((window.screen.availWidth-C)/2,0).toString();let ue="";const Ue=Object.assign(Object.assign({},zh),{width:C.toString(),height:x.toString(),top:P,left:Y}),ot=(0,L.z$)().toLowerCase();_&&(ue=yo(ot)?Kh:_),Rr(ot)&&(g=g||Yh,Ue.scrollbars="yes");const At=Object.entries(Ue).reduce((Lr,[bi,Od])=>`${Lr}${bi}=${Od},`,"");if(function Ma(v=(0,L.z$)()){var g;return Ts(v)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(ot)&&"_self"!==ue)return function s0(v,g){const _=document.createElement("a");_.href=v,_.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(g||"",ue),new St(null);const Et=window.open(g||"",ue,At);G(Et,v,"popup-blocked");try{Et.focus()}catch{}return new St(Et)}(g,ue,ia())})()}_openRedirect(g,_,C,x){var P=this;return(0,s.Z)(function*(){return yield P._originValidation(g),function Pl(v){jn().location.href=v}(Cd(g,_,C,xr(),x)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:x,promise:P}=this.eventManagers[_];return x?Promise.resolve(x):(We(P,"If manager is not set, promise should be"),P)}const C=this.initAndGetManager(g);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(g){var _=this;return(0,s.Z)(function*(){const C=yield function w1(v){return ua.apply(this,arguments)}(g),x=new si(g);return C.register("authEvent",P=>(G(P?.authEvent,g,"invalid-auth-event"),{status:x.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:x},_.iframes[g._key()]=C,x})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Jh,{type:Jh},x=>{var P;const Y=null===(P=x?.[0])||void 0===P?void 0:P[Jh];void 0!==Y&&_(!!Y),xe(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function zl(v){return qp.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return xp()||en()||Ts()}};class C1{constructor(g){this.factorId=g}_process(g,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,C);case"signin":return this._finalizeSignIn(g,_.credential);default:return Ee("unexpected MultiFactorSessionType")}}}class Fr extends C1{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Fr(g)}_finalizeEnroll(g,_,C){return function c_(v,g){return Kt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Qe(v,g))}(g,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Uh(v,g){return Kt(v,"POST","/v2/accounts/mfaSignIn:finalize",Qe(v,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let cr=(()=>{class v{constructor(){}static assertion(_){return Fr._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var Yl="@firebase/auth";class Xh{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,s.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(C=>{var x;g((null===(x=C)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);_&&(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function sl(){return window}!function Td(v){(0,le._registerComponent)(new Ce.wA("auth",(g,{options:_})=>{const C=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:P,authDomain:Y}=C.options;return((ue,Ue)=>{G(P&&!P.includes(":"),"invalid-api-key",{appName:ue.name}),G(!Y?.includes(":"),"argument-error",{appName:ue.name});const ot={apiKey:P,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pa(v)},At=new Th(ue,Ue,ot);return function xn(v,g){const _=g?.persistence||[],C=(Array.isArray(_)?_:[_]).map(_t);g?.errorMap&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(C,g?.popupRedirectResolver)}(At,_),At})(C,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,C)=>{g.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new Ce.wA("auth-internal",g=>{const _=qn(g.getProvider("auth").getImmediate());return new Xh(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(Yl,"0.20.5",function li(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,le.registerVersion)(Yl,"0.20.5","esm2017")}("Browser");const y_=2e3;function au(){return au=(0,s.Z)(function*(v,g,_){var C;const{BuildInfo:x}=sl();We(g.sessionId,"AuthEvent did not contain a session ID");const P=yield function Jl(v){return Ed.apply(this,arguments)}(g.sessionId),Y={};return Ts()?Y.ibi=x.packageName:Cs()?Y.apn=x.packageName:xe(v,"operation-not-supported-in-this-environment"),x.displayName&&(Y.appDisplayName=x.displayName),Y.sessionId=P,Cd(v,_,g.type,void 0,null!==(C=g.eventId)&&void 0!==C?C:void 0,Y)}),au.apply(this,arguments)}function qt(){return(qt=(0,s.Z)(function*(v){const{BuildInfo:g}=sl(),_={};Ts()?_.iosBundleId=g.packageName:Cs()?_.androidPackageName=g.packageName:xe(v,"operation-not-supported-in-this-environment"),yield So(v,_)})).apply(this,arguments)}function ha(){return(ha=(0,s.Z)(function*(v,g,_){const{cordova:C}=sl();let x=()=>{};try{yield new Promise((P,Y)=>{let ue=null;function Ue(){var Et;P();const Lr=null===(Et=C.plugins.browsertab)||void 0===Et?void 0:Et.close;"function"==typeof Lr&&Lr(),"function"==typeof _?.close&&_.close()}function ot(){ue||(ue=window.setTimeout(()=>{Y(Se(v,"redirect-cancelled-by-user"))},y_))}function At(){"visible"===document?.visibilityState&&ot()}g.addPassiveListener(Ue),document.addEventListener("resume",ot,!1),Cs()&&document.addEventListener("visibilitychange",At,!1),x=()=>{g.removePassiveListener(Ue),document.removeEventListener("resume",ot,!1),document.removeEventListener("visibilitychange",At,!1),ue&&window.clearTimeout(ue)}})}finally{x()}})).apply(this,arguments)}function Ed(){return(Ed=(0,s.Z)(function*(v){const g=function Dd(v){if(We(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),_=new Uint8Array(g);for(let C=0;C<v.length;C++)_[C]=v.charCodeAt(C);return _}(v),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const ef=20;class Sd extends si{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,s.Z)(function*(){yield g.initPromise})()}}function Qp(v){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,s.Z)(function*(v){const g=yield nf()._get(Id(v));return g&&(yield nf()._remove(Id(v))),g})).apply(this,arguments)}function Xp(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<ef;_++){const C=Math.floor(Math.random()*g.length);v.push(g.charAt(C))}return v.join("")}function nf(){return _t(Hc)}function Id(v){return Dn("authEvent",v.config.apiKey,v.name)}function Ql(v){if(!v?.includes("?"))return{};const[g,..._]=v.split("?");return(0,L.zd)(_.join("?"))}const d0=class u0{constructor(){this._redirectPersistence=ra,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=It,this._overrideRedirectResult=qh}_initialize(g){var _=this;return(0,s.Z)(function*(){const C=g._key();let x=_.eventManagers.get(C);return x||(x=new Sd(g),_.eventManagers.set(C,x),_.attachCallbackListeners(g,x)),x})()}_openPopup(g){xe(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,C,x){var P=this;return(0,s.Z)(function*(){!function Jp(v){var g,_,C,x,P,Y,ue,Ue,ot,At;const Et=sl();G("function"==typeof(null===(g=Et?.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof(null===(_=Et?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G("function"==typeof(null===(P=null===(x=null===(C=Et?.cordova)||void 0===C?void 0:C.plugins)||void 0===x?void 0:x.browsertab)||void 0===P?void 0:P.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(Ue=null===(ue=null===(Y=Et?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Ue?void 0:Ue.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(At=null===(ot=Et?.cordova)||void 0===ot?void 0:ot.InAppBrowser)||void 0===At?void 0:At.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Y=yield P._initialize(g);yield Y.initialized(),Y.resetRedirect(),function Zp(){Fe.clear()}(),yield P._originValidation(g);const ue=function tf(v,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:Xp(),postBody:null,tenantId:v.tenantId,error:Se(v,"no-auth-event")}}(g,C,x);yield function cu(v,g){return nf()._set(Id(v),g)}(g,ue);const Ue=yield function Yp(v,g,_){return au.apply(this,arguments)}(g,ue,_),ot=yield function lu(v){const{cordova:g}=sl();return new Promise(_=>{g.plugins.browsertab.isAvailable(C=>{let x=null;C?g.plugins.browsertab.openUrl(v):x=g.InAppBrowser.open(v,function s_(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(x)})})}(Ue);return function o0(v,g,_){return ha.apply(this,arguments)}(g,Y,ot)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function da(v){return qt.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:C,handleOpenURL:x,BuildInfo:P}=sl(),Y=setTimeout((0,s.Z)(function*(){yield Qp(g),_.onEvent(eg())}),500),ue=function(){var At=(0,s.Z)(function*(Et){clearTimeout(Y);const Lr=yield Qp(g);let bi=null;Lr&&Et?.url&&(bi=function uu(v,g){var _,C;const x=function l0(v){const g=Ql(v),_=g.link?decodeURIComponent(g.link):void 0,C=Ql(_).link,x=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Ql(x).link||x||C||_||v}(g);if(x.includes("/__/auth/callback")){const P=Ql(x),Y=P.firebaseError?function a0(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,ue=null===(C=null===(_=Y?.code)||void 0===_?void 0:_.split("auth/"))||void 0===C?void 0:C[1],Ue=ue?Se(ue):null;return Ue?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:x,postBody:null}}return null}(Lr,Et.url)),_.onEvent(bi||eg())});return function(Lr){return At.apply(this,arguments)}}();typeof C<"u"&&"function"==typeof C.subscribe&&C.subscribe(null,ue);const Ue=x,ot=`${P.packageName.toLowerCase()}://`;sl().handleOpenURL=function(){var At=(0,s.Z)(function*(Et){if(Et.toLowerCase().startsWith(ot)&&ue({url:Et}),"function"==typeof Ue)try{Ue(Et)}catch(Lr){console.error(Lr)}});return function(Et){return At.apply(this,arguments)}}()}};function eg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Se("no-auth-event")}}const h0=1e3;function Xs(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function v_(v=(0,L.z$)()){return!("file:"!==Xs()&&"ionic:"!==Xs()&&"capacitor:"!==Xs()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nd(){try{const v=self.localStorage,g=ia();if(v)return v.setItem(g,"1"),v.removeItem(g),!function Ad(v=(0,L.z$)()){return function ng(){return(0,L.w1)()&&11===document?.documentMode}()||function b_(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch{return eo()&&(0,L.hl)()}return!1}function eo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function af(){return(function sf(){return"http:"===Xs()||"https:"===Xs()}()||(0,L.ru)()||v_())&&!function ol(){return(0,L.b$)()||(0,L.UG)()}()&&Nd()&&!eo()}function lf(){return v_()&&typeof document<"u"}function fa(){return(fa=(0,s.Z)(function*(){return!!lf()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},h0);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const Ki={LOCAL:"local",NONE:"none",SESSION:"session"},pa=G,xd="persistence";function No(v){return kd.apply(this,arguments)}function kd(){return(kd=(0,s.Z)(function*(v){yield v._initializationPromise;const g=hu(),_=Dn(xd,v.config.apiKey,v.name);g&&g.setItem(_,v._getPersistence())})).apply(this,arguments)}function hu(){var v;try{return(null===(v=function ig(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const w_=G;class xo{constructor(){this.browserResolver=_t(Qh),this.cordovaResolver=_t(d0),this.underlyingResolver=null,this._redirectPersistence=ra,this._completeRedirectFn=It,this._overrideRedirectResult=qh}_initialize(g){var _=this;return(0,s.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,C,x){var P=this;return(0,s.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(g,_,C,x)})()}_openRedirect(g,_,C,x){var P=this;return(0,s.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(g,_,C,x)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return lf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return w_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,s.Z)(function*(){if(g.underlyingResolver)return;const _=yield function rg(){return fa.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function fu(v){return v.unwrap()}function sg(v){return pu(v)}function pu(v){const{_tokenResponse:g}=v instanceof L.ZR?v.customData:v;if(!g)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return vd.credentialFromResult(v);const _=g.providerId;if(!_||_===_e.PASSWORD)return null;let C;switch(_){case _e.GOOGLE:C=Rp;break;case _e.FACEBOOK:C=Xu;break;case _e.GITHUB:C=Op;break;case _e.TWITTER:C=a_;break;default:const{oauthIdToken:x,oauthAccessToken:P,oauthTokenSecret:Y,pendingToken:ue,nonce:Ue}=g;return P||Y||x||ue?ue?_.startsWith("saml.")?Va._create(_,ue):qi._fromParams({providerId:_,signInMethod:_,pendingToken:ue,idToken:x,accessToken:P}):new El(_).credential({idToken:x,accessToken:P,rawNonce:Ue}):null}return v instanceof L.ZR?C.credentialFromError(v):C.credentialFromResult(v)}function wr(v,g){return g.catch(_=>{throw _ instanceof L.ZR&&function al(v,g){var _,C;const x=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(C=g)||void 0===C?void 0:C.code))g.resolver=new f0(v,function zr(v,g){var _;const C=(0,L.m9)(v),x=g;return G(g.customData.operationType,C,"argument-error"),G(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),hd._fromError(C,x)}(v,g));else if(x){const P=pu(g),Y=g;P&&(Y.credential=P,Y.tenantId=x.tenantId||void 0,Y.email=x.email||void 0,Y.phoneNumber=x.phoneNumber||void 0)}}(v,_),_}).then(_=>{const x=_.user;return{operationType:_.operationType,credential:sg(_),additionalUserInfo:Fp(_),user:ga.getOrCreate(x)}})}function Xl(v,g){return ll.apply(this,arguments)}function ll(){return(ll=(0,s.Z)(function*(v,g){const _=yield g;return{verificationId:_.verificationId,confirm:C=>wr(v,_.confirm(C))}})).apply(this,arguments)}class f0{constructor(g,_){this.resolver=_,this.auth=function ko(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return wr(fu(this.auth),this.resolver.resolveSignIn(g))}}class ga{constructor(g){this._delegate=g,this.multiFactor=function fd(v){const g=(0,L.m9)(v);return na.has(g)||na.set(g,kl._fromUser(g)),na.get(g)}(g)}static getOrCreate(g){return ga.USER_MAP.has(g)||ga.USER_MAP.set(g,new ga(g)),ga.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,s.Z)(function*(){return wr(_.auth,Jn(_._delegate,g))})()}linkWithPhoneNumber(g,_){var C=this;return(0,s.Z)(function*(){return Xl(C.auth,function h_(v,g,_){return Qc.apply(this,arguments)}(C._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,s.Z)(function*(){return wr(_.auth,function f_(v,g,_){return vi.apply(this,arguments)}(_._delegate,g,xo))})()}linkWithRedirect(g){var _=this;return(0,s.Z)(function*(){return yield No(qn(_.auth)),X(_._delegate,g,xo)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,s.Z)(function*(){return wr(_.auth,Xo(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return Xl(this.auth,function jp(v,g,_){return Hp.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return wr(this.auth,function Gh(v,g,_){return Zh.apply(this,arguments)}(this._delegate,g,xo))}reauthenticateWithRedirect(g){var _=this;return(0,s.Z)(function*(){return yield No(qn(_.auth)),S(_._delegate,g,xo)})()}sendEmailVerification(g){return function Nh(v,g){return ld.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,s.Z)(function*(){return yield function xc(v,g){return ja.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function xh(v,g){return kh((0,L.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function xl(v,g){return kh((0,L.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Xc(v,g){return Gp.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function ta(v,g){return Ss.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function Vc(v,g,_){return _r.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ga.USER_MAP=new WeakMap;const uf=G;let C_=(()=>{class v{constructor(_,C){if(this.app=_,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=_.options;uf(x,"invalid-api-key",{appName:_.name}),uf(x,"invalid-api-key",{appName:_.name});const P=typeof window<"u"?xo:void 0;this._delegate=C.initialize({options:{persistence:p0(x,_.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Je),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ga.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,C){!function dn(v,g,_){const C=qn(v);G(C._canInitEmulator,C,"emulator-config-failed"),G(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const x=!!_?.disableWarnings,P=ir(g),{host:Y,port:ue}=function Or(v){const g=ir(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(C);if(x){const P=x[1];return{host:P,port:js(C.substr(P.length+1))}}{const[P,Y]=C.split(":");return{host:P,port:js(Y)}}}(g);C.config.emulator={url:`${P}//${Y}${null===ue?"":`:${ue}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:Y,port:ue,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function ei(){function v(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,C)}applyActionCode(_){return function Mc(v,g){return Ih.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Pc(this._delegate,_)}confirmPasswordReset(_,C){return function Al(v,g,_){return Pt.apply(this,arguments)}(this._delegate,_,C)}createUserWithEmailAndPassword(_,C){var x=this;return(0,s.Z)(function*(){return wr(x._delegate,function Mp(v,g,_){return od.apply(this,arguments)}(x._delegate,_,C))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Uc(v,g){return Bc.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Ah(v,g){return"EMAIL_SIGNIN"===Tl.parseLink(g)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,s.Z)(function*(){uf(af(),_._delegate,"operation-not-supported-in-this-environment");const C=yield function et(v,g){return bt.apply(this,arguments)}(_._delegate,xo);return C?wr(_._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function tg(v,g){qn(v)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,C,x){const{next:P,error:Y,complete:ue}=df(_,C,x);return this._delegate.onAuthStateChanged(P,Y,ue)}onIdTokenChanged(_,C,x){const{next:P,error:Y,complete:ue}=df(_,C,x);return this._delegate.onIdTokenChanged(P,Y,ue)}sendSignInLinkToEmail(_,C){return function sn(v,g,_){return ad.apply(this,arguments)}(this._delegate,_,C)}sendPasswordResetEmail(_,C){return function Zs(v,g,_){return Il.apply(this,arguments)}(this._delegate,_,C||void 0)}setPersistence(_){var C=this;return(0,s.Z)(function*(){let x;switch(function cf(v,g){pa(Object.values(Ki).includes(g),v,"invalid-persistence-type"),(0,L.b$)()?pa(g!==Ki.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?pa(g===Ki.NONE,v,"unsupported-persistence-type"):eo()?pa(g===Ki.NONE||g===Ki.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):pa(g===Ki.NONE||Nd(),v,"unsupported-persistence-type")}(C._delegate,_),_){case Ki.SESSION:x=ra;break;case Ki.LOCAL:x=(yield _t(sa)._isAvailable())?sa:Hc;break;case Ki.NONE:x=fn;break;default:return xe("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return wr(this._delegate,function Sh(v){return bo.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return wr(this._delegate,zn(this._delegate,_))}signInWithCustomToken(_){return wr(this._delegate,function ea(v,g){return mr.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,C){return wr(this._delegate,function we(v,g,_){return zn((0,L.m9)(v),Qu.credential(g,_))}(this._delegate,_,C))}signInWithEmailLink(_,C){return wr(this._delegate,function qr(v,g,_){return Nl.apply(this,arguments)}(this._delegate,_,C))}signInWithPhoneNumber(_,C){return Xl(this._delegate,function rn(v,g,_){return yd.apply(this,arguments)}(this._delegate,_,C))}signInWithPopup(_){var C=this;return(0,s.Z)(function*(){return uf(af(),C._delegate,"operation-not-supported-in-this-environment"),wr(C._delegate,function nl(v,g,_){return ru.apply(this,arguments)}(C._delegate,_,xo))})()}signInWithRedirect(_){var C=this;return(0,s.Z)(function*(){return uf(af(),C._delegate,"operation-not-supported-in-this-environment"),yield No(C._delegate),iu(C._delegate,_,xo)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function sd(v,g){return Fc.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Ki,v})();function df(v,g,_){let C=v;"function"!=typeof v&&({next:C,error:g,complete:_}=v);const x=C;return{next:Y=>x(Y&&ga.getOrCreate(Y)),error:g,complete:_}}function p0(v,g){const _=function Rd(v,g){const _=hu();if(!_)return[];const C=Dn(xd,v,g);switch(_.getItem(C)){case Ki.NONE:return[fn];case Ki.LOCAL:return[sa,ra];case Ki.SESSION:return[ra];default:return[]}}(v,g);if(typeof self<"u"&&!_.includes(sa)&&_.push(sa),typeof window<"u")for(const C of[Hc,ra])_.includes(C)||_.push(C);return _.includes(fn)||_.push(fn),_}class hf{constructor(){this.providerId="phone",this._delegate=new vd(fu(te.Z.auth()))}static credential(g,_){return vd.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}hf.PHONE_SIGN_IN_METHOD=vd.PHONE_SIGN_IN_METHOD,hf.PROVIDER_ID=vd.PROVIDER_ID;const ff=G;class og{constructor(g,_,C=te.Z.app()){var x;ff(null===(x=C.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new $l(g,_,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ag(v){v.INTERNAL.registerComponent(new Ce.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),C=g.getProvider("auth");return new C_(_,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ee_EMAIL_SIGNIN,PASSWORD_RESET:ee_PASSWORD_RESET,RECOVER_EMAIL:ee_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ee_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ee_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ee_VERIFY_EMAIL}},EmailAuthProvider:Qu,FacebookAuthProvider:Xu,GithubAuthProvider:Op,GoogleAuthProvider:Rp,OAuthProvider:El,SAMLAuthProvider:Ds,PhoneAuthProvider:hf,PhoneMultiFactorGenerator:cr,RecaptchaVerifier:og,TwitterAuthProvider:a_,Auth:C_,AuthCredential:Zo,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.18")}(te.Z)},9751:(mt,Ae,U)=>{U.d(Ae,{y:()=>ye});var s=U(930),te=U(727),L=U(8822),le=U(9635),oe=U(2416),ie=U(576),Ce=U(2806);let ye=(()=>{class ee{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const Je=new ee;return Je.source=this,Je.operator=ke,Je}subscribe(ke,Je,ut){const be=function Z(ee){return ee&&ee instanceof s.Lv||function q(ee){return ee&&(0,ie.m)(ee.next)&&(0,ie.m)(ee.error)&&(0,ie.m)(ee.complete)}(ee)&&(0,te.Nn)(ee)}(ke)?ke:new s.Hp(ke,Je,ut);return(0,Ce.x)(()=>{const{operator:Oe,source:Re}=this;be.add(Oe?Oe.call(be,Re):Re?this._subscribe(be):this._trySubscribe(be))}),be}_trySubscribe(ke){try{return this._subscribe(ke)}catch(Je){ke.error(Je)}}forEach(ke,Je){return new(Je=_e(Je))((ut,be)=>{const Oe=new s.Hp({next:Re=>{try{ke(Re)}catch($e){be($e),Oe.unsubscribe()}},error:be,complete:ut});this.subscribe(Oe)})}_subscribe(ke){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(ke)}[L.L](){return this}pipe(...ke){return(0,le.U)(ke)(this)}toPromise(ke){return new(ke=_e(ke))((Je,ut)=>{let be;this.subscribe(Oe=>be=Oe,Oe=>ut(Oe),()=>Je(be))})}}return ee.create=Ke=>new ee(Ke),ee})();function _e(ee){var Ke;return null!==(Ke=ee??oe.v.Promise)&&void 0!==Ke?Ke:Promise}},7579:(mt,Ae,U)=>{U.d(Ae,{x:()=>Ce});var s=U(9751),te=U(727);const le=(0,U(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=U(8737),ie=U(2806);let Ce=(()=>{class _e extends s.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Z){const ee=new ye(this,this);return ee.operator=Z,ee}_throwIfClosed(){if(this.closed)throw new le}next(Z){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(Z)}})}error(Z){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Z;const{observers:ee}=this;for(;ee.length;)ee.shift().error(Z)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Z}=this;for(;Z.length;)Z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Z;return(null===(Z=this.observers)||void 0===Z?void 0:Z.length)>0}_trySubscribe(Z){return this._throwIfClosed(),super._trySubscribe(Z)}_subscribe(Z){return this._throwIfClosed(),this._checkFinalizedStatuses(Z),this._innerSubscribe(Z)}_innerSubscribe(Z){const{hasError:ee,isStopped:Ke,observers:ke}=this;return ee||Ke?te.Lc:(this.currentObservers=null,ke.push(Z),new te.w0(()=>{this.currentObservers=null,(0,oe.P)(ke,Z)}))}_checkFinalizedStatuses(Z){const{hasError:ee,thrownError:Ke,isStopped:ke}=this;ee?Z.error(Ke):ke&&Z.complete()}asObservable(){const Z=new s.y;return Z.source=this,Z}}return _e.create=(q,Z)=>new ye(q,Z),_e})();class ye extends Ce{constructor(q,Z){super(),this.destination=q,this.source=Z}next(q){var Z,ee;null===(ee=null===(Z=this.destination)||void 0===Z?void 0:Z.next)||void 0===ee||ee.call(Z,q)}error(q){var Z,ee;null===(ee=null===(Z=this.destination)||void 0===Z?void 0:Z.error)||void 0===ee||ee.call(Z,q)}complete(){var q,Z;null===(Z=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===Z||Z.call(q)}_subscribe(q){var Z,ee;return null!==(ee=null===(Z=this.source)||void 0===Z?void 0:Z.subscribe(q))&&void 0!==ee?ee:te.Lc}}},930:(mt,Ae,U)=>{U.d(Ae,{Hp:()=>ut,Lv:()=>ee});var s=U(576),te=U(727),L=U(2416),le=U(7849),oe=U(5032);const ie=_e("C",void 0,void 0);function _e(xe,Se,Me){return{kind:xe,value:Se,error:Me}}var q=U(3410),Z=U(2806);class ee extends te.w0{constructor(Se){super(),this.isStopped=!1,Se?(this.destination=Se,(0,te.Nn)(Se)&&Se.add(this)):this.destination=$e}static create(Se,Me,qe){return new ut(Se,Me,qe)}next(Se){this.isStopped?Re(function ye(xe){return _e("N",xe,void 0)}(Se),this):this._next(Se)}error(Se){this.isStopped?Re(function Ce(xe){return _e("E",void 0,xe)}(Se),this):(this.isStopped=!0,this._error(Se))}complete(){this.isStopped?Re(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Se){this.destination.next(Se)}_error(Se){try{this.destination.error(Se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function ke(xe,Se){return Ke.call(xe,Se)}class Je{constructor(Se){this.partialObserver=Se}next(Se){const{partialObserver:Me}=this;if(Me.next)try{Me.next(Se)}catch(qe){be(qe)}}error(Se){const{partialObserver:Me}=this;if(Me.error)try{Me.error(Se)}catch(qe){be(qe)}else be(Se)}complete(){const{partialObserver:Se}=this;if(Se.complete)try{Se.complete()}catch(Me){be(Me)}}}class ut extends ee{constructor(Se,Me,qe){let Ve;if(super(),(0,s.m)(Se)||!Se)Ve={next:Se??void 0,error:Me??void 0,complete:qe??void 0};else{let G;this&&L.v.useDeprecatedNextContext?(G=Object.create(Se),G.unsubscribe=()=>this.unsubscribe(),Ve={next:Se.next&&ke(Se.next,G),error:Se.error&&ke(Se.error,G),complete:Se.complete&&ke(Se.complete,G)}):Ve=Se}this.destination=new Je(Ve)}}function be(xe){L.v.useDeprecatedSynchronousErrorHandling?(0,Z.O)(xe):(0,le.h)(xe)}function Re(xe,Se){const{onStoppedNotification:Me}=L.v;Me&&q.z.setTimeout(()=>Me(xe,Se))}const $e={closed:!0,next:oe.Z,error:function Oe(xe){throw xe},complete:oe.Z}},727:(mt,Ae,U)=>{U.d(Ae,{Lc:()=>ie,w0:()=>oe,Nn:()=>Ce});var s=U(576);const L=(0,U(3888).d)(_e=>function(Z){_e(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((ee,Ke)=>`${Ke+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z});var le=U(8737);class oe{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:Z}=this;if(Z)if(this._parentage=null,Array.isArray(Z))for(const ke of Z)ke.remove(this);else Z.remove(this);const{initialTeardown:ee}=this;if((0,s.m)(ee))try{ee()}catch(ke){q=ke instanceof L?ke.errors:[ke]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const ke of Ke)try{ye(ke)}catch(Je){q=q??[],Je instanceof L?q=[...q,...Je.errors]:q.push(Je)}}if(q)throw new L(q)}}add(q){var Z;if(q&&q!==this)if(this.closed)ye(q);else{if(q instanceof oe){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(Z=this._finalizers)&&void 0!==Z?Z:[]).push(q)}}_hasParent(q){const{_parentage:Z}=this;return Z===q||Array.isArray(Z)&&Z.includes(q)}_addParent(q){const{_parentage:Z}=this;this._parentage=Array.isArray(Z)?(Z.push(q),Z):Z?[Z,q]:q}_removeParent(q){const{_parentage:Z}=this;Z===q?this._parentage=null:Array.isArray(Z)&&(0,le.P)(Z,q)}remove(q){const{_finalizers:Z}=this;Z&&(0,le.P)(Z,q),q instanceof oe&&q._removeParent(this)}}oe.EMPTY=(()=>{const _e=new oe;return _e.closed=!0,_e})();const ie=oe.EMPTY;function Ce(_e){return _e instanceof oe||_e&&"closed"in _e&&(0,s.m)(_e.remove)&&(0,s.m)(_e.add)&&(0,s.m)(_e.unsubscribe)}function ye(_e){(0,s.m)(_e)?_e():_e.unsubscribe()}},2416:(mt,Ae,U)=>{U.d(Ae,{v:()=>s});const s={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(mt,Ae,U)=>{U.d(Ae,{E:()=>te});const te=new(U(9751).y)(oe=>oe.complete())},8996:(mt,Ae,U)=>{U.d(Ae,{D:()=>Se});var s=U(8421),te=U(5363),L=U(9468),ie=U(9751),ye=U(2202),_e=U(576),q=U(9672);function ee(Me,qe){if(!Me)throw new Error("Iterable cannot be null");return new ie.y(Ve=>{(0,q.f)(Ve,qe,()=>{const G=Me[Symbol.asyncIterator]();(0,q.f)(Ve,qe,()=>{G.next().then(Ee=>{Ee.done?Ve.complete():Ve.next(Ee.value)})},0,!0)})})}var Ke=U(3670),ke=U(8239),Je=U(1144),ut=U(6495),be=U(2206),Oe=U(4532),Re=U(3260);function Se(Me,qe){return qe?function xe(Me,qe){if(null!=Me){if((0,Ke.c)(Me))return function le(Me,qe){return(0,s.Xf)(Me).pipe((0,L.R)(qe),(0,te.Q)(qe))}(Me,qe);if((0,Je.z)(Me))return function Ce(Me,qe){return new ie.y(Ve=>{let G=0;return qe.schedule(function(){G===Me.length?Ve.complete():(Ve.next(Me[G++]),Ve.closed||this.schedule())})})}(Me,qe);if((0,ke.t)(Me))return function oe(Me,qe){return(0,s.Xf)(Me).pipe((0,L.R)(qe),(0,te.Q)(qe))}(Me,qe);if((0,be.D)(Me))return ee(Me,qe);if((0,ut.T)(Me))return function Z(Me,qe){return new ie.y(Ve=>{let G;return(0,q.f)(Ve,qe,()=>{G=Me[ye.h](),(0,q.f)(Ve,qe,()=>{let Ee,We;try{({value:Ee,done:We}=G.next())}catch(tt){return void Ve.error(tt)}We?Ve.complete():Ve.next(Ee)},0,!0)}),()=>(0,_e.m)(G?.return)&&G.return()})}(Me,qe);if((0,Re.L)(Me))return function $e(Me,qe){return ee((0,Re.Q)(Me),qe)}(Me,qe)}throw(0,Oe.z)(Me)}(Me,qe):(0,s.Xf)(Me)}},8421:(mt,Ae,U)=>{U.d(Ae,{Xf:()=>Ke});var s=U(7582),te=U(1144),L=U(8239),le=U(9751),oe=U(3670),ie=U(2206),Ce=U(4532),ye=U(6495),_e=U(3260),q=U(576),Z=U(7849),ee=U(8822);function Ke(xe){if(xe instanceof le.y)return xe;if(null!=xe){if((0,oe.c)(xe))return function ke(xe){return new le.y(Se=>{const Me=xe[ee.L]();if((0,q.m)(Me.subscribe))return Me.subscribe(Se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,te.z)(xe))return function Je(xe){return new le.y(Se=>{for(let Me=0;Me<xe.length&&!Se.closed;Me++)Se.next(xe[Me]);Se.complete()})}(xe);if((0,L.t)(xe))return function ut(xe){return new le.y(Se=>{xe.then(Me=>{Se.closed||(Se.next(Me),Se.complete())},Me=>Se.error(Me)).then(null,Z.h)})}(xe);if((0,ie.D)(xe))return Oe(xe);if((0,ye.T)(xe))return function be(xe){return new le.y(Se=>{for(const Me of xe)if(Se.next(Me),Se.closed)return;Se.complete()})}(xe);if((0,_e.L)(xe))return function Re(xe){return Oe((0,_e.Q)(xe))}(xe)}throw(0,Ce.z)(xe)}function Oe(xe){return new le.y(Se=>{(function $e(xe,Se){var Me,qe,Ve,G;return(0,s.mG)(this,void 0,void 0,function*(){try{for(Me=(0,s.KL)(xe);!(qe=yield Me.next()).done;)if(Se.next(qe.value),Se.closed)return}catch(Ee){Ve={error:Ee}}finally{try{qe&&!qe.done&&(G=Me.return)&&(yield G.call(Me))}finally{if(Ve)throw Ve.error}}Se.complete()})})(xe,Se).catch(Me=>Se.error(Me))})}},6451:(mt,Ae,U)=>{U.d(Ae,{T:()=>ie});var s=U(8189),te=U(8421),L=U(515),le=U(3269),oe=U(8996);function ie(...Ce){const ye=(0,le.yG)(Ce),_e=(0,le._6)(Ce,1/0),q=Ce;return q.length?1===q.length?(0,te.Xf)(q[0]):(0,s.J)(_e)((0,oe.D)(q,ye)):L.E}},5403:(mt,Ae,U)=>{U.d(Ae,{x:()=>te});var s=U(930);function te(le,oe,ie,Ce,ye){return new L(le,oe,ie,Ce,ye)}class L extends s.Lv{constructor(oe,ie,Ce,ye,_e,q){super(oe),this.onFinalize=_e,this.shouldUnsubscribe=q,this._next=ie?function(Z){try{ie(Z)}catch(ee){oe.error(ee)}}:super._next,this._error=ye?function(Z){try{ye(Z)}catch(ee){oe.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(Z){oe.error(Z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(mt,Ae,U)=>{U.d(Ae,{U:()=>L});var s=U(4482),te=U(5403);function L(le,oe){return(0,s.e)((ie,Ce)=>{let ye=0;ie.subscribe((0,te.x)(Ce,_e=>{Ce.next(le.call(oe,_e,ye++))}))})}},8189:(mt,Ae,U)=>{U.d(Ae,{J:()=>L});var s=U(5577),te=U(4671);function L(le=1/0){return(0,s.z)(te.y,le)}},5577:(mt,Ae,U)=>{U.d(Ae,{z:()=>ye});var s=U(4004),te=U(8421),L=U(4482),le=U(9672),oe=U(5403),Ce=U(576);function ye(_e,q,Z=1/0){return(0,Ce.m)(q)?ye((ee,Ke)=>(0,s.U)((ke,Je)=>q(ee,ke,Ke,Je))((0,te.Xf)(_e(ee,Ke))),Z):("number"==typeof q&&(Z=q),(0,L.e)((ee,Ke)=>function ie(_e,q,Z,ee,Ke,ke,Je,ut){const be=[];let Oe=0,Re=0,$e=!1;const xe=()=>{$e&&!be.length&&!Oe&&q.complete()},Se=qe=>Oe<ee?Me(qe):be.push(qe),Me=qe=>{ke&&q.next(qe),Oe++;let Ve=!1;(0,te.Xf)(Z(qe,Re++)).subscribe((0,oe.x)(q,G=>{Ke?.(G),ke?Se(G):q.next(G)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(Oe--;be.length&&Oe<ee;){const G=be.shift();Je?(0,le.f)(q,Je,()=>Me(G)):Me(G)}xe()}catch(G){q.error(G)}}))};return _e.subscribe((0,oe.x)(q,Se,()=>{$e=!0,xe()})),()=>{ut?.()}}(ee,Ke,_e,Z)))}},5363:(mt,Ae,U)=>{U.d(Ae,{Q:()=>le});var s=U(9672),te=U(4482),L=U(5403);function le(oe,ie=0){return(0,te.e)((Ce,ye)=>{Ce.subscribe((0,L.x)(ye,_e=>(0,s.f)(ye,oe,()=>ye.next(_e),ie),()=>(0,s.f)(ye,oe,()=>ye.complete(),ie),_e=>(0,s.f)(ye,oe,()=>ye.error(_e),ie)))})}},3099:(mt,Ae,U)=>{U.d(Ae,{B:()=>oe});var s=U(8421),te=U(7579),L=U(930),le=U(4482);function oe(Ce={}){const{connector:ye=(()=>new te.x),resetOnError:_e=!0,resetOnComplete:q=!0,resetOnRefCountZero:Z=!0}=Ce;return ee=>{let Ke,ke,Je,ut=0,be=!1,Oe=!1;const Re=()=>{ke?.unsubscribe(),ke=void 0},$e=()=>{Re(),Ke=Je=void 0,be=Oe=!1},xe=()=>{const Se=Ke;$e(),Se?.unsubscribe()};return(0,le.e)((Se,Me)=>{ut++,!Oe&&!be&&Re();const qe=Je=Je??ye();Me.add(()=>{ut--,0===ut&&!Oe&&!be&&(ke=ie(xe,Z))}),qe.subscribe(Me),!Ke&&ut>0&&(Ke=new L.Hp({next:Ve=>qe.next(Ve),error:Ve=>{Oe=!0,Re(),ke=ie($e,_e,Ve),qe.error(Ve)},complete:()=>{be=!0,Re(),ke=ie($e,q),qe.complete()}}),(0,s.Xf)(Se).subscribe(Ke))})(ee)}}function ie(Ce,ye,..._e){if(!0===ye)return void Ce();if(!1===ye)return;const q=new L.Hp({next:()=>{q.unsubscribe(),Ce()}});return(0,s.Xf)(ye(..._e)).subscribe(q)}},9468:(mt,Ae,U)=>{U.d(Ae,{R:()=>te});var s=U(4482);function te(L,le=0){return(0,s.e)((oe,ie)=>{ie.add(L.schedule(()=>oe.subscribe(ie),le))})}},8505:(mt,Ae,U)=>{U.d(Ae,{b:()=>oe});var s=U(576),te=U(4482),L=U(5403),le=U(4671);function oe(ie,Ce,ye){const _e=(0,s.m)(ie)||Ce||ye?{next:ie,error:Ce,complete:ye}:ie;return _e?(0,te.e)((q,Z)=>{var ee;null===(ee=_e.subscribe)||void 0===ee||ee.call(_e);let Ke=!0;q.subscribe((0,L.x)(Z,ke=>{var Je;null===(Je=_e.next)||void 0===Je||Je.call(_e,ke),Z.next(ke)},()=>{var ke;Ke=!1,null===(ke=_e.complete)||void 0===ke||ke.call(_e),Z.complete()},ke=>{var Je;Ke=!1,null===(Je=_e.error)||void 0===Je||Je.call(_e,ke),Z.error(ke)},()=>{var ke,Je;Ke&&(null===(ke=_e.unsubscribe)||void 0===ke||ke.call(_e)),null===(Je=_e.finalize)||void 0===Je||Je.call(_e)}))}):le.y}},4408:(mt,Ae,U)=>{U.d(Ae,{o:()=>oe});var s=U(727);class te extends s.w0{constructor(Ce,ye){super()}schedule(Ce,ye=0){return this}}const L={setInterval(ie,Ce,...ye){const{delegate:_e}=L;return _e?.setInterval?_e.setInterval(ie,Ce,...ye):setInterval(ie,Ce,...ye)},clearInterval(ie){const{delegate:Ce}=L;return(Ce?.clearInterval||clearInterval)(ie)},delegate:void 0};var le=U(8737);class oe extends te{constructor(Ce,ye){super(Ce,ye),this.scheduler=Ce,this.work=ye,this.pending=!1}schedule(Ce,ye=0){var _e;if(this.closed)return this;this.state=Ce;const q=this.id,Z=this.scheduler;return null!=q&&(this.id=this.recycleAsyncId(Z,q,ye)),this.pending=!0,this.delay=ye,this.id=null!==(_e=this.id)&&void 0!==_e?_e:this.requestAsyncId(Z,this.id,ye),this}requestAsyncId(Ce,ye,_e=0){return L.setInterval(Ce.flush.bind(Ce,this),_e)}recycleAsyncId(Ce,ye,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return ye;null!=ye&&L.clearInterval(ye)}execute(Ce,ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(Ce,ye);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ce,ye){let q,_e=!1;try{this.work(Ce)}catch(Z){_e=!0,q=Z||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:Ce,scheduler:ye}=this,{actions:_e}=ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(_e,this),null!=Ce&&(this.id=this.recycleAsyncId(ye,Ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(mt,Ae,U)=>{U.d(Ae,{v:()=>L});var s=U(6063);class te{constructor(oe,ie=te.now){this.schedulerActionCtor=oe,this.now=ie}schedule(oe,ie=0,Ce){return new this.schedulerActionCtor(this,oe).schedule(Ce,ie)}}te.now=s.l.now;class L extends te{constructor(oe,ie=te.now){super(oe,ie),this.actions=[],this._active=!1}flush(oe){const{actions:ie}=this;if(this._active)return void ie.push(oe);let Ce;this._active=!0;do{if(Ce=oe.execute(oe.state,oe.delay))break}while(oe=ie.shift());if(this._active=!1,Ce){for(;oe=ie.shift();)oe.unsubscribe();throw Ce}}}},4986:(mt,Ae,U)=>{U.d(Ae,{P:()=>le,z:()=>L});var s=U(4408);const L=new(U(7565).v)(s.o),le=L},6063:(mt,Ae,U)=>{U.d(Ae,{l:()=>s});const s={now:()=>(s.delegate||Date).now(),delegate:void 0}},3410:(mt,Ae,U)=>{U.d(Ae,{z:()=>s});const s={setTimeout(te,L,...le){const{delegate:oe}=s;return oe?.setTimeout?oe.setTimeout(te,L,...le):setTimeout(te,L,...le)},clearTimeout(te){const{delegate:L}=s;return(L?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(mt,Ae,U)=>{U.d(Ae,{h:()=>te});const te=function s(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(mt,Ae,U)=>{U.d(Ae,{L:()=>s});const s="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(mt,Ae,U)=>{U.d(Ae,{_6:()=>ie,jO:()=>le,yG:()=>oe});var s=U(576),te=U(3532);function L(Ce){return Ce[Ce.length-1]}function le(Ce){return(0,s.m)(L(Ce))?Ce.pop():void 0}function oe(Ce){return(0,te.K)(L(Ce))?Ce.pop():void 0}function ie(Ce,ye){return"number"==typeof L(Ce)?Ce.pop():ye}},8737:(mt,Ae,U)=>{function s(te,L){if(te){const le=te.indexOf(L);0<=le&&te.splice(le,1)}}U.d(Ae,{P:()=>s})},3888:(mt,Ae,U)=>{function s(te){const le=te(oe=>{Error.call(oe),oe.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}U.d(Ae,{d:()=>s})},2806:(mt,Ae,U)=>{U.d(Ae,{O:()=>le,x:()=>L});var s=U(2416);let te=null;function L(oe){if(s.v.useDeprecatedSynchronousErrorHandling){const ie=!te;if(ie&&(te={errorThrown:!1,error:null}),oe(),ie){const{errorThrown:Ce,error:ye}=te;if(te=null,Ce)throw ye}}else oe()}function le(oe){s.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=oe)}},9672:(mt,Ae,U)=>{function s(te,L,le,oe=0,ie=!1){const Ce=L.schedule(function(){le(),ie?te.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(te.add(Ce),!ie)return Ce}U.d(Ae,{f:()=>s})},4671:(mt,Ae,U)=>{function s(te){return te}U.d(Ae,{y:()=>s})},1144:(mt,Ae,U)=>{U.d(Ae,{z:()=>s});const s=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(mt,Ae,U)=>{U.d(Ae,{D:()=>te});var s=U(576);function te(L){return Symbol.asyncIterator&&(0,s.m)(L?.[Symbol.asyncIterator])}},576:(mt,Ae,U)=>{function s(te){return"function"==typeof te}U.d(Ae,{m:()=>s})},3670:(mt,Ae,U)=>{U.d(Ae,{c:()=>L});var s=U(8822),te=U(576);function L(le){return(0,te.m)(le[s.L])}},6495:(mt,Ae,U)=>{U.d(Ae,{T:()=>L});var s=U(2202),te=U(576);function L(le){return(0,te.m)(le?.[s.h])}},8239:(mt,Ae,U)=>{U.d(Ae,{t:()=>te});var s=U(576);function te(L){return(0,s.m)(L?.then)}},3260:(mt,Ae,U)=>{U.d(Ae,{L:()=>le,Q:()=>L});var s=U(7582),te=U(576);function L(oe){return(0,s.FC)(this,arguments,function*(){const Ce=oe.getReader();try{for(;;){const{value:ye,done:_e}=yield(0,s.qq)(Ce.read());if(_e)return yield(0,s.qq)(void 0);yield yield(0,s.qq)(ye)}}finally{Ce.releaseLock()}})}function le(oe){return(0,te.m)(oe?.getReader)}},3532:(mt,Ae,U)=>{U.d(Ae,{K:()=>te});var s=U(576);function te(L){return L&&(0,s.m)(L.schedule)}},4482:(mt,Ae,U)=>{U.d(Ae,{A:()=>te,e:()=>L});var s=U(576);function te(le){return(0,s.m)(le?.lift)}function L(le){return oe=>{if(te(oe))return oe.lift(function(ie){try{return le(ie,this)}catch(Ce){this.error(Ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(mt,Ae,U)=>{function s(){}U.d(Ae,{Z:()=>s})},9635:(mt,Ae,U)=>{U.d(Ae,{U:()=>L,z:()=>te});var s=U(4671);function te(...le){return L(le)}function L(le){return 0===le.length?s.y:1===le.length?le[0]:function(ie){return le.reduce((Ce,ye)=>ye(Ce),ie)}}},7849:(mt,Ae,U)=>{U.d(Ae,{h:()=>L});var s=U(2416),te=U(3410);function L(le){te.z.setTimeout(()=>{const{onUnhandledError:oe}=s.v;if(!oe)throw le;oe(le)})}},4532:(mt,Ae,U)=>{function s(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Ae,{z:()=>s})},4650:(mt,Ae,U)=>{U.d(Ae,{$8M:()=>Yc,$WT:()=>js,$Z:()=>rT,AFp:()=>lw,ALo:()=>Kb,AaK:()=>ye,AsE:()=>fy,BQk:()=>ty,CHM:()=>ad,CRH:()=>ew,CZH:()=>jy,CqO:()=>bu,D6c:()=>Kf,EJc:()=>$y,EiD:()=>xA,EpF:()=>FT,F$t:()=>iy,F4k:()=>LT,FYo:()=>N0,FiY:()=>su,Gf:()=>Py,GfV:()=>F1,Gpc:()=>Z,Hsn:()=>HT,Ikx:()=>py,JOm:()=>St,JVY:()=>At,JZr:()=>ut,KtG:()=>Ah,L6k:()=>Et,LAX:()=>bi,LFG:()=>$,LMc:()=>Yy,Lbi:()=>vD,Lck:()=>Vx,MAs:()=>RT,MGl:()=>Lf,MMx:()=>Hb,MR2:()=>MA,NdJ:()=>kg,OlP:()=>rn,Oqu:()=>dy,P3R:()=>I1,PXZ:()=>Pk,Q6J:()=>Mf,QGY:()=>tb,QbO:()=>bk,Qsj:()=>HA,QtT:()=>Lx,R0b:()=>hi,RDi:()=>p0,Rgc:()=>Ry,SBq:()=>Cf,SDv:()=>Fx,Sil:()=>bD,Suo:()=>zg,TTD:()=>xc,TgZ:()=>Ng,Tol:()=>ub,Udp:()=>lb,VKq:()=>Zb,W1O:()=>iD,WLB:()=>Su,X6Q:()=>$k,XFs:()=>yt,Xpm:()=>Ma,Xts:()=>v0,Y36:()=>If,YKP:()=>Vb,YNc:()=>kT,Yjl:()=>Wu,Yz7:()=>Qe,Z0I:()=>ln,ZZ4:()=>Cw,_Bn:()=>Bb,_UZ:()=>xg,_Vd:()=>wf,_c5:()=>jD,_uU:()=>Pg,aQg:()=>Wy,c2e:()=>wk,cJS:()=>Dt,cg1:()=>_y,d8E:()=>gy,dDg:()=>R2,dqk:()=>yn,eBb:()=>Lr,eFA:()=>AD,eJc:()=>oD,ekj:()=>cb,eoX:()=>xk,f3M:()=>z,g9A:()=>yD,h0i:()=>jf,hGG:()=>sh,hij:()=>hy,iGM:()=>My,ifc:()=>Yn,ip1:()=>Li,jDz:()=>PE,kEZ:()=>HE,kL8:()=>yE,lG2:()=>qn,lcZ:()=>Yx,lqb:()=>Pd,lri:()=>Ak,mCW:()=>ec,n5z:()=>Vh,oAB:()=>Pa,oJD:()=>E1,oxw:()=>jT,pB0:()=>Od,pQV:()=>RE,q3G:()=>ur,q4F:()=>L1,qLn:()=>gg,qOj:()=>K_,qZA:()=>X_,qzn:()=>Ue,rWj:()=>Nk,s9C:()=>Ff,sBO:()=>Gk,s_b:()=>Fo,soG:()=>Hy,tb:()=>Rk,tp0:()=>S,uIk:()=>jd,vHH:()=>be,vpe:()=>hc,wAp:()=>Nt,xp6:()=>W1,ynx:()=>ey,z2F:()=>gn,z3N:()=>ue,zSh:()=>mu,zs3:()=>Ef});var s=U(7579),te=U(727),L=U(9751),le=U(6451),oe=U(3099);function ie(a){for(let l in a)if(a[l]===ie)return l;throw Error("Could not find renamed property on target object.")}function Ce(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function ye(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(ye).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function _e(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const q=ie({__forward_ref__:ie});function Z(a){return a.__forward_ref__=Z,a.toString=function(){return ye(this())},a}function ee(a){return Ke(a)?a():a}function Ke(a){return"function"==typeof a&&a.hasOwnProperty(q)&&a.__forward_ref__===Z}function ke(a){return a&&!!a.\u0275providers}const ut="https://g.co/ng/security#xss";class be extends Error{constructor(l,u){super(Oe(l,u)),this.code=l}}function Oe(a,l){return`NG0${Math.abs(a)}${l?": "+l.trim():""}`}function Re(a){return"string"==typeof a?a:null==a?"":String(a)}function qe(a,l){throw new be(-201,!1)}function se(a,l,u,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${u} ${h} ${l} <=Actual]`))}function Qe(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Dt(a){return{providers:a.providers||[],imports:a.imports||[]}}function Yt(a){return nn(a,Pn)||nn(a,Si)}function ln(a){return null!==Yt(a)}function nn(a,l){return a.hasOwnProperty(l)?a[l]:null}function kr(a){return a&&(a.hasOwnProperty(Gn)||a.hasOwnProperty(Fn))?a[Gn]:null}const Pn=ie({\u0275prov:ie}),Gn=ie({\u0275inj:ie}),Si=ie({ngInjectableDef:ie}),Fn=ie({ngInjectorDef:ie});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let ls;function Bn(a){const l=ls;return ls=a,l}function Xr(a,l,u){const h=Yt(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&yt.Optional?null:void 0!==l?l:void qe(ye(a))}const yn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),cs={},Kn="__NG_DI_FLAG__",Zn="ngTempTokenPath",Vs="ngTokenPath",$r=/\n/gm,Ra="\u0275",hn="__source";let Ii;function Xt(a){const l=Ii;return Ii=a,l}function Q(a,l=yt.Default){if(void 0===Ii)throw new be(-203,!1);return null===Ii?Xr(a,void 0,l):Ii.get(a,l&yt.Optional?null:void 0,l)}function $(a,l=yt.Default){return(function Bs(){return ls}()||Q)(ee(a),l)}function z(a,l=yt.Default){return $(a,K(l))}function K(a){return typeof a>"u"||"number"==typeof a?a:0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)}function Ne(a){const l=[];for(let u=0;u<a.length;u++){const h=ee(a[u]);if(Array.isArray(h)){if(0===h.length)throw new be(900,!1);let p,m=yt.Default;for(let b=0;b<h.length;b++){const T=h[b],D=vt(T);"number"==typeof D?-1===D?p=T.token:m|=D:p=T}l.push($(p,m))}else l.push($(h))}return l}function Ye(a,l){return a[Kn]=l,a.prototype[Kn]=l,a}function vt(a){return a[Kn]}function Dn(a){return{toString:a}.toString()}var Ut=(()=>((Ut=Ut||{})[Ut.OnPush=0]="OnPush",Ut[Ut.Default=1]="Default",Ut))(),Yn=(()=>{return(a=Yn||(Yn={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Yn;var a})();const Rr={},en=[],yo=ie({\u0275cmp:ie}),Ac=ie({\u0275dir:ie}),Cs=ie({\u0275pipe:ie}),Oa=ie({\u0275mod:ie}),Gr=ie({\u0275fac:ie}),Ts=ie({__NG_ELEMENT_ID__:ie});let s_=0;function Ma(a){return Dn(()=>{const l=Zo(a),u={...l,decls:a.decls,vars:a.vars,template:a.template,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,onPush:a.changeDetection===Ut.OnPush,directiveDefs:null,pipeDefs:null,dependencies:l.standalone&&a.dependencies||null,getStandaloneInjector:null,data:a.data||{},encapsulation:a.encapsulation||Yn.Emulated,id:"c"+s_++,styles:a.styles||en,_:null,schemas:a.schemas||null,tView:null};ti(u);const h=a.dependencies;return u.directiveDefs=qo(h,!1),u.pipeDefs=qo(h,!0),u})}function xp(a){return dn(a)||ir(a)}function zu(a){return null!==a}function Pa(a){return Dn(()=>({type:a.type,bootstrap:a.bootstrap||en,declarations:a.declarations||en,imports:a.imports||en,exports:a.exports||en,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function Th(a,l){if(null==a)return Rr;const u={};for(const h in a)if(a.hasOwnProperty(h)){let p=a[h],m=p;Array.isArray(p)&&(m=p[1],p=p[0]),u[p]=h,l&&(l[p]=m)}return u}function qn(a){return Dn(()=>{const l=Zo(a);return ti(l),l})}function Wu(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function dn(a){return a[yo]||null}function ir(a){return a[Ac]||null}function Or(a){return a[Cs]||null}function js(a){const l=dn(a)||ir(a)||Or(a);return null!==l&&l.standalone}function ei(a,l){const u=a[Oa]||null;if(!u&&!0===l)throw new Error(`Type ${ye(a)} does not have '\u0275mod' property.`);return u}function Zo(a){const l={};return{type:a.type,providersResolver:null,factory:null,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:l,exportAs:a.exportAs||null,standalone:!0===a.standalone,selectors:a.selectors||en,viewQuery:a.viewQuery||null,features:a.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Th(a.inputs,l),outputs:Th(a.outputs)}}function ti(a){a.features?.forEach(l=>l(a))}function qo(a,l){if(!a)return null;const u=l?Or:xp;return()=>("function"==typeof a?a():a).map(h=>u(h)).filter(zu)}const Gi=0,st=1,Vt=2,kn=3,gi=4,Hs=5,sr=6,or=7,Vn=8,Fa=9,gr=10,Zt=11,Ku=12,vo=13,Yu=14,us=15,ni=16,La=17,zo=18,Zi=19,$s=20,mi=21,vn=22,qi=1,Eh=2,Ua=7,Wo=8,ri=9,ii=10;function Ai(a){return Array.isArray(a)&&"object"==typeof a[qi]}function zi(a){return Array.isArray(a)&&!0===a[qi]}function Cl(a){return 0!=(4&a.flags)}function ds(a){return a.componentOffset>-1}function Ju(a){return 1==(1&a.flags)}function Ni(a){return!!a.template}function Tl(a){return 0!=(256&a[Vt])}function Yo(a,l){return a.hasOwnProperty(Gr)?a[Gr]:null}class Jo{constructor(l,u,h){this.previousValue=l,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function xc(){return ja}function ja(a){return a.type.prototype.ngOnChanges&&(a.setInput=Ha),kc}function kc(){const a=Dl(this),l=a?.current;if(l){const u=a.previous;if(u===Rr)a.previous=l;else for(let h in l)u[h]=l[h];a.current=null,this.ngOnChanges(l)}}function Ha(a,l,u,h){const p=this.declaredInputs[u],m=Dl(a)||function nd(a,l){return a[Qo]=l}(a,{previous:Rr,current:null}),b=m.current||(m.current={}),T=m.previous,D=T[p];b[p]=new Jo(D&&D.currentValue,l,T===Rr),a[h]=l}xc.ngInherit=!0;const Qo="__ngSimpleChanges__";function Dl(a){return a[Qo]||null}const xi=function(a,l,u){};function Jn(a){for(;Array.isArray(a);)a=a[Gi];return a}function Xo(a,l){return Jn(l[a])}function ar(a,l){return Jn(l[a.index])}function qa(a,l){return a.data[l]}function ea(a,l){return a[l]}function mr(a,l){const u=l[a];return Ai(u)?u:u[Gi]}function za(a){return 64==(64&a[Vt])}function Zs(a,l){return null==l?null:a[l]}function Il(a){a[zo]=0}function Al(a,l){a[Hs]+=l;let u=a,h=a[kn];for(;null!==h&&(1===l&&1===u[Hs]||-1===l&&0===u[Hs]);)h[Hs]+=l,u=h,h=h[kn]}const Pt={lFrame:e0(null),bindingsEnabled:!0};function Fc(){return Pt.bindingsEnabled}function we(){return Pt.lFrame.lView}function sn(){return Pt.lFrame.tView}function ad(a){return Pt.lFrame.contextLView=a,a[Vn]}function Ah(a){return Pt.lFrame.contextLView=null,a}function qr(){let a=Nl();for(;null!==a&&64===a.type;)a=a.parent;return a}function Nl(){return Pt.lFrame.currentTNode}function Lc(){const a=Pt.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}function ki(a,l){const u=Pt.lFrame;u.currentTNode=a,u.isParent=l}function Uc(){return Pt.lFrame.isParent}function Bc(){Pt.lFrame.isParent=!1}function _r(){const a=Pt.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Ri(){return Pt.lFrame.bindingIndex}function ta(){return Pt.lFrame.bindingIndex++}function Ss(a){const l=Pt.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function xl(a){Pt.lFrame.inI18n=a}function kh(a,l){const u=Pt.lFrame;u.bindingIndex=u.bindingRootIndex=a,ud(l)}function ud(a){Pt.lFrame.currentDirectiveIndex=a}function qs(a){const l=Pt.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function Rh(){return Pt.lFrame.currentQueryIndex}function dd(a){Pt.lFrame.currentQueryIndex=a}function Oh(a){const l=a[st];return 2===l.type?l.declTNode:1===l.type?a[sr]:null}function Pp(a,l,u){if(u&yt.SkipSelf){let p=l,m=a;for(;!(p=p.parent,null!==p||u&yt.Host||(p=Oh(m),null===p||(m=m[us],10&p.type))););if(null===p)return!1;l=p,a=m}const h=Pt.lFrame=Fp();return h.currentTNode=l,h.lView=a,!0}function jc(a){const l=Fp(),u=a[st];Pt.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function Fp(){const a=Pt.lFrame,l=null===a?null:a.child;return null===l?e0(a):l}function e0(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function t0(){const a=Pt.lFrame;return Pt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Mh=t0;function l_(){const a=t0();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function yi(){return Pt.lFrame.selectedIndex}function Wa(a){Pt.lFrame.selectedIndex=a}function Rn(){const a=Pt.lFrame;return qa(a.tView,a.selectedIndex)}function kl(a,l){for(let u=l.directiveStart,h=l.directiveEnd;u<h;u++){const m=a.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:T,ngAfterViewInit:D,ngAfterViewChecked:N,ngOnDestroy:O}=m;b&&(a.contentHooks??(a.contentHooks=[])).push(-u,b),T&&((a.contentHooks??(a.contentHooks=[])).push(u,T),(a.contentCheckHooks??(a.contentCheckHooks=[])).push(u,T)),D&&(a.viewHooks??(a.viewHooks=[])).push(-u,D),N&&((a.viewHooks??(a.viewHooks=[])).push(u,N),(a.viewCheckHooks??(a.viewCheckHooks=[])).push(u,N)),null!=O&&(a.destroyHooks??(a.destroyHooks=[])).push(u,O)}}function na(a,l,u){Rl(a,l,3,u)}function fd(a,l,u,h){(3&a[Vt])===u&&Rl(a,l,u,h)}function Co(a,l){let u=a[Vt];(3&u)===l&&(u&=2047,u+=1,a[Vt]=u)}function Rl(a,l,u,h){const m=h??-1,b=l.length-1;let T=0;for(let D=void 0!==h?65535&a[zo]:0;D<b;D++)if("number"==typeof l[D+1]){if(T=l[D],null!=h&&T>=h)break}else l[D]<0&&(a[zo]+=65536),(T<m||-1==m)&&(Ol(a,u,l,D),a[zo]=(4294901760&a[zo])+D+2),D++}function Ol(a,l,u,h){const p=u[h]<0,m=u[h+1],T=a[p?-u[h]:u[h]];if(p){if(a[Vt]>>11<a[zo]>>16&&(3&a[Vt])===l){a[Vt]+=2048,xi(4,T,m);try{m.call(T)}finally{xi(5,T,m)}}}else{xi(4,T,m);try{m.call(T)}finally{xi(5,T,m)}}}const Ya=-1;class To{constructor(l,u,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function jn(a,l,u){let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const m=u[h++],b=u[h++],T=u[h++];a.setAttribute(l,b,T,m)}else{const m=p,b=u[++h];zs(m)?a.setProperty(l,m,b):a.setAttribute(l,m,b),h++}}return h}function Pl(a){return 3===a||4===a||6===a}function zs(a){return 64===a.charCodeAt(0)}function Ws(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let h=0;h<l.length;h++){const p=l[h];"number"==typeof p?u=p:0===u||Ja(a,u,p,null,-1===u||2===u?l[++h]:null)}}return a}function Ja(a,l,u,h,p){let m=0,b=a.length;if(-1===l)b=-1;else for(;m<a.length;){const T=a[m++];if("number"==typeof T){if(T===l){b=-1;break}if(T>l){b=m-1;break}}}for(;m<a.length;){const T=a[m];if("number"==typeof T)break;if(T===u){if(null===h)return void(null!==p&&(a[m+1]=p));if(h===a[m+1])return void(a[m+2]=p)}m++,null!==h&&m++,null!==p&&m++}-1!==b&&(a.splice(b,0,l),m=b+1),a.splice(m++,0,u),null!==h&&a.splice(m++,0,h),null!==p&&a.splice(m++,0,p)}function pd(a){return a!==Ya}function Fl(a){return 32767&a}function Gc(a,l){let u=function $c(a){return a>>16}(a),h=l;for(;u>0;)h=h[us],u--;return h}let Eo=!0;function Qa(a){const l=Eo;return Eo=a,l}const Ll=255,Ul=5;let Zc=0;const Wr={};function el(a,l){const u=Vl(a,l);if(-1!==u)return u;const h=l[st];h.firstCreatePass&&(a.injectorIndex=l.length,Do(h.data,a),Do(l,null),Do(h.blueprint,null));const p=qc(a,l),m=a.injectorIndex;if(pd(p)){const b=Fl(p),T=Gc(p,l),D=T[st].data;for(let N=0;N<8;N++)l[m+N]=T[b+N]|D[b+N]}return l[m+8]=p,m}function Do(a,l){a.push(0,0,0,0,0,0,0,0,l)}function Vl(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function qc(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,h=null,p=l;for(;null!==p;){if(h=md(p),null===h)return Ya;if(u++,p=p[us],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return Ya}function jl(a,l,u){!function Bl(a,l,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Ts)&&(h=u[Ts]),null==h&&(h=u[Ts]=Zc++);const p=h&Ll;l.data[a+(p>>Ul)]|=1<<p}(a,l,u)}function sa(a,l,u){if(u&yt.Optional||void 0!==a)return a;qe()}function Hl(a,l,u,h){if(u&yt.Optional&&void 0===h&&(h=null),!(u&(yt.Self|yt.Host))){const p=a[Fa],m=Bn(void 0);try{return p?p.get(l,h,u&yt.Optional):Xr(l,h,u&yt.Optional)}finally{Bn(m)}}return sa(h,0,u)}function Uh(a,l,u,h=yt.Default,p){if(null!==a){if(1024&l[Vt]){const b=function jh(a,l,u,h,p){let m=a,b=l;for(;null!==m&&null!==b&&1024&b[Vt]&&!(256&b[Vt]);){const T=Is(m,b,u,h|yt.Self,Wr);if(T!==Wr)return T;let D=m.parent;if(!D){const N=b[mi];if(N){const O=N.get(u,Wr,h);if(O!==Wr)return O}D=md(b),b=b[us]}m=D}return p}(a,l,u,h,Wr);if(b!==Wr)return b}const m=Is(a,l,u,h,Wr);if(m!==Wr)return m}return Hl(l,u,h,p)}function Is(a,l,u,h,p){const m=function Bh(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(Ts)?a[Ts]:void 0;return"number"==typeof l?l>=0?l&Ll:d_:l}(u);if("function"==typeof m){if(!Pp(l,a,h))return h&yt.Host?sa(p,0,h):Hl(l,u,h,p);try{const b=m(h);if(null!=b||h&yt.Optional)return b;qe()}finally{Mh()}}else if("number"==typeof m){let b=null,T=Vl(a,l),D=Ya,N=h&yt.Host?l[ni][sr]:null;for((-1===T||h&yt.SkipSelf)&&(D=-1===T?qc(a,l):l[T+8],D!==Ya&&Ks(h,!1)?(b=l[st],T=Fl(D),l=Gc(D,l)):T=-1);-1!==T;){const O=l[st];if(Wc(m,T,O.data)){const B=zc(T,l,u,b,h,N);if(B!==Wr)return B}D=l[T+8],D!==Ya&&Ks(h,l[st].data[T+8]===N)&&Wc(m,T,l)?(b=O,T=Fl(D),l=Gc(D,l)):T=-1}}return p}function zc(a,l,u,h,p,m){const b=l[st],T=b.data[a+8],O=oa(T,b,u,null==h?ds(T)&&Eo:h!=b&&0!=(3&T.type),p&yt.Host&&m===T);return null!==O?As(l,b,O,T):Wr}function oa(a,l,u,h,p){const m=a.providerIndexes,b=l.data,T=1048575&m,D=a.directiveStart,O=m>>20,J=p?T+O:a.directiveEnd;for(let re=h?T:T+O;re<J;re++){const De=b[re];if(re<D&&u===De||re>=D&&De.type===u)return re}if(p){const re=b[D];if(re&&Ni(re)&&re.type===u)return D}return null}function As(a,l,u,h){let p=a[u];const m=l.data;if(function Wi(a){return a instanceof To}(p)){const b=p;b.resolving&&function xe(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new be(-200,`Circular dependency in DI detected for ${a}${u}`)}(function $e(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():Re(a)}(m[u]));const T=Qa(b.canSeeViewProviders);b.resolving=!0;const D=b.injectImpl?Bn(b.injectImpl):null;Pp(a,h,yt.Default);try{p=a[u]=b.factory(void 0,m,a,h),l.firstCreatePass&&u>=h.directiveStart&&function u_(a,l,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:m}=l.type.prototype;if(h){const b=ja(l);(u.preOrderHooks??(u.preOrderHooks=[])).push(a,b),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(a,b)}p&&(u.preOrderHooks??(u.preOrderHooks=[])).push(0-a,p),m&&((u.preOrderHooks??(u.preOrderHooks=[])).push(a,m),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(a,m))}(u,m[u],l)}finally{null!==D&&Bn(D),Qa(T),b.resolving=!1,Mh()}}return p}function Wc(a,l,u){return!!(u[l+(a>>Ul)]&1<<a)}function Ks(a,l){return!(a&yt.Self||a&yt.Host&&l)}class hs{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,h){return Uh(this._tNode,this._lView,l,K(h),u)}}function d_(){return new hs(qr(),we())}function Vh(a){return Dn(()=>{const l=a.prototype.constructor,u=l[Gr]||Kc(l),h=Object.prototype;let p=Object.getPrototypeOf(a.prototype).constructor;for(;p&&p!==h;){const m=p[Gr]||Kc(p);if(m&&m!==u)return m;p=Object.getPrototypeOf(p)}return m=>new m})}function Kc(a){return Ke(a)?()=>{const l=Kc(ee(a));return l&&l()}:Yo(a)}function md(a){const l=a[st],u=l.type;return 2===u?l.declTNode:1===u?a[sr]:null}function Yc(a){return function gd(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const m=u[p];if(Pl(m))break;if(0===m)p+=2;else if("number"==typeof m)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(m===l)return u[p+1];p+=2}}}return null}(qr(),a)}const tl="__parameters__";function $l(a,l,u){return Dn(()=>{const h=function Bp(a){return function(...u){if(a){const h=a(...u);for(const p in h)this[p]=h[p]}}}(l);function p(...m){if(this instanceof p)return h.apply(this,m),this;const b=new p(...m);return T.annotation=b,T;function T(D,N,O){const B=D.hasOwnProperty(tl)?D[tl]:Object.defineProperty(D,tl,{value:[]})[tl];for(;B.length<=O;)B.push(null);return(B[O]=B[O]||[]).push(b),D}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=a,p.annotationCls=p,p})}class rn{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Qe({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ns(a,l){a.forEach(u=>Array.isArray(u)?Ns(u,l):l(u))}function nu(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function Gl(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function nl(a,l){const u=[];for(let h=0;h<a;h++)u.push(l);return u}function vi(a,l,u){let h=yr(a,l);return h>=0?a[1|h]=u:(h=~h,function Zh(a,l,u,h){let p=a.length;if(p==l)a.push(u,h);else if(1===p)a.push(h,a[0]),a[0]=u;else{for(p--,a.push(a[p-1],a[p]);p>l;)a[p]=a[p-2],p--;a[l]=u,a[l+1]=h}}(a,h,l,u)),h}function Bt(a,l){const u=yr(a,l);if(u>=0)return a[1|u]}function yr(a,l){return function cn(a,l,u){let h=0,p=a.length>>u;for(;p!==h;){const m=h+(p-h>>1),b=a[m<<u];if(l===b)return m<<u;b>l?p=m:h=m+1}return~(p<<u)}(a,l,1)}const su=Ye($l("Optional"),8),S=Ye($l("SkipSelf"),4);var St=(()=>((St=St||{})[St.Important=1]="Important",St[St.DashCase=2]="DashCase",St))();const wd=/^>|^->|<!--|-->|--!>|<!-$/g,s0=/(<|>)/,ou="\u200b$1\u200b";const Cd=new Map;let Io=0;const Xh="__ngContext__";function li(a,l){Ai(l)?(a[Xh]=l[$s],function m_(a){Cd.set(a[$s],a)}(l)):a[Xh]=l}let Jp;function Jl(a,l){return Jp(a,l)}function Dd(a){const l=a[kn];return zi(l)?l[kn]:l}function tf(a){return Qp(a[vo])}function cu(a){return Qp(a[gi])}function Qp(a){for(;null!==a&&!zi(a);)a=a[gi];return a}function Ao(a,l,u,h,p){if(null!=h){let m,b=!1;zi(h)?m=h:Ai(h)&&(b=!0,h=h[Gi]);const T=Jn(h);0===a&&null!==u?null==p?ng(l,u,T):ol(l,u,T,p||null,!0):1===a&&null!==u?ol(l,u,T,p||null,!0):2===a?kd(l,T,b):3===a&&l.destroyNode(T),null!=m&&function fu(a,l,u,h,p){const m=u[Ua];m!==Jn(u)&&Ao(l,a,h,m,p);for(let T=ii;T<u.length;T++){const D=u[T];hu(D[st],D,a,l,h,m)}}(l,a,m,u,p)}}function uu(a,l){return a.createText(l)}function Xp(a,l,u){a.setValue(l,u)}function nf(a,l){return a.createComment(function g_(a){return a.replace(wd,l=>l.replace(s0,ou))}(l))}function Id(a,l,u){return a.createElement(l,u)}function eg(a,l){const u=a[ri],h=u.indexOf(l),p=l[kn];512&l[Vt]&&(l[Vt]&=-513,Al(p,-1)),u.splice(h,1)}function tg(a,l){if(a.length<=ii)return;const u=ii+l,h=a[u];if(h){const p=h[La];null!==p&&p!==a&&eg(p,h),l>0&&(a[u-1][gi]=h[gi]);const m=Gl(a,ii+l);!function a0(a,l){hu(a,l,l[Zt],2,null,null),l[Gi]=null,l[sr]=null}(h[st],h);const b=m[Zi];null!==b&&b.detachView(m[st]),h[kn]=null,h[gi]=null,h[Vt]&=-65}return h}function rf(a,l){if(!(128&l[Vt])){const u=l[Zt];u.destroyNode&&hu(a,l,u,3,null,null),function c0(a){let l=a[vo];if(!l)return du(a[st],a);for(;l;){let u=null;if(Ai(l))u=l[vo];else{const h=l[ii];h&&(u=h)}if(!u){for(;l&&!l[gi]&&l!==a;)Ai(l)&&du(l[st],l),l=l[kn];null===l&&(l=a),Ai(l)&&du(l[st],l),u=l&&l[gi]}l=u}}(l)}}function du(a,l){if(!(128&l[Vt])){l[Vt]&=-65,l[Vt]|=128,function Xs(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let h=0;h<u.length;h+=2){const p=l[u[h]];if(!(p instanceof To)){const m=u[h+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const T=p[m[b]],D=m[b+1];xi(4,T,D);try{D.call(T)}finally{xi(5,T,D)}}else{xi(4,p,m);try{m.call(p)}finally{xi(5,p,m)}}}}}(a,l),function h0(a,l){const u=a.cleanup,h=l[or];let p=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const b=u[m+3];b>=0?h[p=b]():h[p=-b].unsubscribe(),m+=2}else{const b=h[p=u[m+1]];u[m].call(b)}if(null!==h){for(let m=p+1;m<h.length;m++)(0,h[m])();l[or]=null}}(a,l),1===l[st].type&&l[Zt].destroy();const u=l[La];if(null!==u&&zi(l[kn])){u!==l[kn]&&eg(u,l);const h=l[Zi];null!==h&&h.detachView(a)}!function C1(a){Cd.delete(a[$s])}(l)}}function sf(a,l,u){return v_(a,l.parent,u)}function v_(a,l,u){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return u[Gi];{const{componentOffset:p}=h;if(p>-1){const{encapsulation:m}=a.data[h.directiveStart+p];if(m===Yn.None||m===Yn.Emulated)return null}return ar(h,u)}}function ol(a,l,u,h,p){a.insertBefore(l,u,h,p)}function ng(a,l,u){a.appendChild(l,u)}function b_(a,l,u,h,p){null!==h?ol(a,l,u,h,p):ng(a,l,u)}function eo(a,l){return a.parentNode(l)}function lf(a,l,u){return fa(a,l,u)}function rg(a,l,u){return 40&a.type?ar(a,u):null}let ig,wr,df,ff,fa=rg;function Ki(a,l){fa=a,ig=l}function pa(a,l,u,h){const p=sf(a,h,l),m=l[Zt],T=lf(h.parent||l[sr],h,l);if(null!=p)if(Array.isArray(u))for(let D=0;D<u.length;D++)b_(m,p,u[D],T,!1);else b_(m,p,u,T,!1);void 0!==ig&&ig(m,h,l,u,p)}function xd(a,l){if(null!==l){const u=l.type;if(3&u)return ar(l,a);if(4&u)return No(-1,a[l.index]);if(8&u){const h=l.child;if(null!==h)return xd(a,h);{const p=a[l.index];return zi(p)?No(-1,p):Jn(p)}}if(32&u)return Jl(l,a)()||Jn(a[l.index]);{const h=cf(a,l);return null!==h?Array.isArray(h)?h[0]:xd(Dd(a[ni]),h):xd(a,l.next)}}return null}function cf(a,l){return null!==l?a[ni][sr].projection[l.projection]:null}function No(a,l){const u=ii+a+1;if(u<l.length){const h=l[u],p=h[st].firstChild;if(null!==p)return xd(h,p)}return l[Ua]}function kd(a,l,u){const h=eo(a,l);h&&function Ad(a,l,u,h){a.removeChild(l,u,h)}(a,h,l,u)}function Rd(a,l,u,h,p,m,b){for(;null!=u;){const T=h[u.index],D=u.type;if(b&&0===l&&(T&&li(Jn(T),h),u.flags|=2),32!=(32&u.flags))if(8&D)Rd(a,l,u.child,h,p,m,!1),Ao(l,a,p,T,m);else if(32&D){const N=Jl(u,h);let O;for(;O=N();)Ao(l,a,p,O,m);Ao(l,a,p,T,m)}else 16&D?xo(a,l,h,u,p,m):Ao(l,a,p,T,m);u=b?u.projectionNext:u.next}}function hu(a,l,u,h,p,m){Rd(u,h,a.firstChild,l,p,m,!1)}function xo(a,l,u,h,p,m){const b=u[ni],D=b[sr].projection[h.projection];if(Array.isArray(D))for(let N=0;N<D.length;N++)Ao(l,a,p,D[N],m);else Rd(a,l,D,b[kn],p,m,!0)}function al(a,l,u){""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u)}function pu(a,l,u){const{mergedAttrs:h,classes:p,styles:m}=u;null!==h&&jn(a,l,h),null!==p&&al(a,l,p),null!==m&&function sg(a,l,u){a.setAttribute(l,"style",u)}(a,l,m)}function ll(a){return function Xl(){if(void 0===wr&&(wr=null,yn.trustedTypes))try{wr=yn.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return wr}()?.createHTML(a)||a}function p0(a){df=a}function hf(){return void 0!==df?df:typeof document<"u"?document:void 0}function og(){if(void 0===ff&&(ff=null,yn.trustedTypes))try{ff=yn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return ff}function T_(a){return og()?.createHTML(a)||a}function v(a){return og()?.createScriptURL(a)||a}class g{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ut})`}}class _ extends g{getTypeName(){return"HTML"}}class C extends g{getTypeName(){return"Style"}}class x extends g{getTypeName(){return"Script"}}class P extends g{getTypeName(){return"URL"}}class Y extends g{getTypeName(){return"ResourceURL"}}function ue(a){return a instanceof g?a.changingThisBreaksApplicationSecurity:a}function Ue(a,l){const u=function ot(a){return a instanceof g&&a.getTypeName()||null}(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see ${ut})`)}return u===l}function At(a){return new _(a)}function Et(a){return new C(a)}function Lr(a){return new x(a)}function bi(a){return new P(a)}function Od(a){return new Y(a)}function lg(a){const l=new cg(a);return function pf(){try{return!!(new window.DOMParser).parseFromString(ll(""),"text/html")}catch{return!1}}()?new gu(l):l}class gu{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(ll(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch{return null}}}class cg{constructor(l){this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(l){const u=this.inertDocument.createElement("template");return u.innerHTML=ll(l),u}}const gf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ec(a){return(a=String(a)).match(gf)?a:"unsafe:"+a}function ks(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function tc(...a){const l={};for(const u of a)for(const h in u)u.hasOwnProperty(h)&&(l[h]=!0);return l}const nc=ks("area,br,col,hr,img,wbr"),E_=ks("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),mf=ks("rp,rt"),S_=tc(nc,tc(E_,ks("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),tc(mf,ks("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tc(mf,E_)),I_=ks("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ug=tc(I_,ks("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ks("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),N_=ks("script,style,template");class AA{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let p=this.checkClobberedElement(u,u.nextSibling);if(p){u=p;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!S_.hasOwnProperty(u))return this.sanitizedSomething=!0,!N_.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=l.attributes;for(let p=0;p<h.length;p++){const m=h.item(p),b=m.name,T=b.toLowerCase();if(!ug.hasOwnProperty(T)){this.sanitizedSomething=!0;continue}let D=m.value;I_[T]&&(D=ec(D)),this.buf.push(" ",b,'="',m0(D),'"')}return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();S_.hasOwnProperty(u)&&!nc.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(m0(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const NA=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g0=/([^\#-~ |!])/g;function m0(a){return a.replace(/&/g,"&amp;").replace(NA,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(g0,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let _0;function xA(a,l){let u=null;try{_0=_0||lg(a);let h=l?String(l):"";u=_0.getInertBodyElement(h);let p=5,m=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=m,m=u.innerHTML,u=_0.getInertBodyElement(h)}while(h!==m);return ll((new AA).sanitizeChildren(T1(u)||u))}finally{if(u){const h=T1(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function T1(a){return"content"in a&&function RL(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var ur=(()=>((ur=ur||{})[ur.NONE=0]="NONE",ur[ur.HTML=1]="HTML",ur[ur.STYLE=2]="STYLE",ur[ur.SCRIPT=3]="SCRIPT",ur[ur.URL=4]="URL",ur[ur.RESOURCE_URL=5]="RESOURCE_URL",ur))();function E1(a){const l=hg();return l?T_(l.sanitize(ur.HTML,a)||""):Ue(a,"HTML")?T_(ue(a)):xA(hf(),Re(a))}function D1(a){const l=hg();return l?l.sanitize(ur.URL,a)||"":Ue(a,"URL")?ue(a):ec(Re(a))}function x_(a){const l=hg();if(l)return v(l.sanitize(ur.RESOURCE_URL,a)||"");if(Ue(a,"ResourceURL"))return v(ue(a));throw new be(904,!1)}function I1(a,l,u){return function RA(a,l){return"src"===l&&("embed"===a||"frame"===a||"iframe"===a||"media"===a||"script"===a)||"href"===l&&("base"===a||"link"===a)?x_:D1}(l,u)(a)}function hg(){const a=we();return a&&a[Ku]}const v0=new rn("ENVIRONMENT_INITIALIZER"),Md=new rn("INJECTOR",-1),_f=new rn("INJECTOR_DEF_TYPES");class A1{get(l,u=cs){if(u===cs){const h=new Error(`NullInjectorError: No provider for ${ye(l)}!`);throw h.name="NullInjectorError",h}return u}}function MA(a){return{\u0275providers:a}}function fg(...a){return{\u0275providers:yf(0,a),\u0275fromNgModule:!0}}function yf(a,...l){const u=[],h=new Set;let p;return Ns(l,m=>{const b=m;b0(b,u,[],h)&&(p||(p=[]),p.push(b))}),void 0!==p&&N1(p,u),u}function N1(a,l){for(let u=0;u<a.length;u++){const{providers:p}=a[u];w0(p,m=>{l.push(m)})}}function b0(a,l,u,h){if(!(a=ee(a)))return!1;let p=null,m=kr(a);const b=!m&&dn(a);if(m||b){if(b&&!b.standalone)return!1;p=a}else{const D=a.ngModule;if(m=kr(D),!m)return!1;p=D}const T=h.has(p);if(b){if(T)return!1;if(h.add(p),b.dependencies){const D="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const N of D)b0(N,l,u,h)}}else{if(!m)return!1;{if(null!=m.imports&&!T){let N;h.add(p);try{Ns(m.imports,O=>{b0(O,l,u,h)&&(N||(N=[]),N.push(O))})}finally{}void 0!==N&&N1(N,l)}if(!T){const N=Yo(p)||(()=>new p);l.push({provide:p,useFactory:N,deps:en},{provide:_f,useValue:p,multi:!0},{provide:v0,useValue:()=>$(p),multi:!0})}const D=m.providers;null==D||T||w0(D,O=>{l.push(O)})}}return p!==a&&void 0!==a.providers}function w0(a,l){for(let u of a)ke(u)&&(u=u.\u0275providers),Array.isArray(u)?w0(u,l):l(u)}const PA=ie({provide:String,useValue:ie});function C0(a){return null!==a&&"object"==typeof a&&PA in a}function rc(a){return"function"==typeof a}const mu=new rn("Set Injector scope."),R_={},LA={};let T0;function O_(){return void 0===T0&&(T0=new A1),T0}class Pd{}class k1 extends Pd{get destroyed(){return this._destroyed}constructor(l,u,h,p){super(),this.parent=u,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bf(l,b=>this.processProvider(b)),this.records.set(Md,vf(void 0,this)),p.has("environment")&&this.records.set(Pd,vf(void 0,this));const m=this.records.get(mu);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(_f.multi,en,yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const u=Xt(this),h=Bn(void 0);try{return l()}finally{Xt(u),Bn(h)}}get(l,u=cs,h=yt.Default){this.assertNotDestroyed(),h=K(h);const p=Xt(this),m=Bn(void 0);try{if(!(h&yt.SkipSelf)){let T=this.records.get(l);if(void 0===T){const D=function I0(a){return"function"==typeof a||"object"==typeof a&&a instanceof rn}(l)&&Yt(l);T=D&&this.injectableDefInScope(D)?vf(E0(l),R_):null,this.records.set(l,T)}if(null!=T)return this.hydrate(l,T)}return(h&yt.Self?O_():this.parent).get(l,u=h&yt.Optional&&u===cs?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[Zn]=b[Zn]||[]).unshift(ye(l)),p)throw b;return function En(a,l,u,h){const p=a[Zn];throw l[hn]&&p.unshift(l[hn]),a.message=function fn(a,l,u,h=null){a=a&&"\n"===a.charAt(0)&&a.charAt(1)==Ra?a.slice(2):a;let p=ye(l);if(Array.isArray(l))p=l.map(ye).join(" -> ");else if("object"==typeof l){let m=[];for(let b in l)if(l.hasOwnProperty(b)){let T=l[b];m.push(b+":"+("string"==typeof T?JSON.stringify(T):ye(T)))}p=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${a.replace($r,"\n  ")}`}("\n"+a.message,p,u,h),a[Vs]=p,a[Zn]=null,a}(b,l,"R3InjectorError",this.source)}throw b}finally{Bn(m),Xt(p)}}resolveInjectorInitializers(){const l=Xt(this),u=Bn(void 0);try{const h=this.get(v0.multi,en,yt.Self);for(const p of h)p()}finally{Xt(l),Bn(u)}}toString(){const l=[],u=this.records;for(const h of u.keys())l.push(ye(h));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(l){let u=rc(l=ee(l))?l:ee(l&&l.provide);const h=function BA(a){return C0(a)?vf(void 0,a.useValue):vf(D0(a),R_)}(l);if(rc(l)||!0!==l.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=vf(void 0,R_,!0),p.factory=()=>Ne(p.multi),this.records.set(u,p)),u=l,p.multi.push(l)}this.records.set(u,h)}hydrate(l,u){return u.value===R_&&(u.value=LA,u.value=u.factory()),"object"==typeof u.value&&u.value&&function R1(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=ee(l.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function E0(a){const l=Yt(a),u=null!==l?l.factory:Yo(a);if(null!==u)return u;if(a instanceof rn)throw new be(204,!1);if(a instanceof Function)return function UA(a){const l=a.length;if(l>0)throw nl(l,"?"),new be(204,!1);const u=function pr(a){return a&&(a[Pn]||a[Si])||null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new be(204,!1)}function D0(a,l,u){let h;if(rc(a)){const p=ee(a);return Yo(p)||E0(p)}if(C0(a))h=()=>ee(a.useValue);else if(function x1(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...Ne(a.deps||[]));else if(function FA(a){return!(!a||!a.useExisting)}(a))h=()=>$(ee(a.useExisting));else{const p=ee(a&&(a.useClass||a.provide));if(!function S0(a){return!!a.deps}(a))return Yo(p)||E0(p);h=()=>new p(...Ne(a.deps))}return h}function vf(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function bf(a,l){for(const u of a)Array.isArray(u)?bf(u,l):u&&ke(u)?bf(u.\u0275providers,l):l(u)}class VA{}class O1{}class P1{resolveComponentFactory(l){throw function jA(a){const l=Error(`No component factory found for ${ye(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let wf=(()=>{class a{}return a.NULL=new P1,a})();function M_(){return ic(qr(),we())}function ic(a,l){return new Cf(ar(a,l))}let Cf=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=M_,a})();function pg(a){return a instanceof Cf?a.nativeElement:a}class N0{}let HA=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function $A(){const a=we(),u=mr(qr().index,a);return(Ai(u)?u:a)[Zt]}(),a})(),GA=(()=>{class a{}return a.\u0275prov=Qe({token:a,providedIn:"root",factory:()=>null}),a})();class F1{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const L1=new F1("15.2.10"),P_={},x0="ngOriginalError";function k0(a){return a[x0]}class gg{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l);this._console.error("ERROR",l),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&k0(l);for(;u&&k0(u);)u=k0(u);return u||null}}function cl(a){return a instanceof Function?a():a}function $1(a,l,u){let h=a.length;for(;;){const p=a.indexOf(l,u);if(-1===p)return p;if(0===p||a.charCodeAt(p-1)<=32){const m=l.length;if(p+m===h||a.charCodeAt(p+m)<=32)return p}u=p+1}}const R0="ng-template";function O0(a,l,u){let h=0,p=!0;for(;h<a.length;){let m=a[h++];if("string"==typeof m&&p){const b=a[h++];if(u&&"class"===m&&-1!==$1(b.toLowerCase(),l,0))return!0}else{if(1===m){for(;h<a.length&&"string"==typeof(m=a[h++]);)if(m.toLowerCase()===l)return!0;return!1}"number"==typeof m&&(p=!1)}}return!1}function M0(a){return 4===a.type&&a.value!==R0}function Tf(a,l,u){return l===(4!==a.type||u?a.value:R0)}function P0(a,l,u){let h=4;const p=a.attrs||[],m=function Z1(a){for(let l=0;l<a.length;l++)if(Pl(a[l]))return l;return a.length}(p);let b=!1;for(let T=0;T<l.length;T++){const D=l[T];if("number"!=typeof D){if(!b)if(4&h){if(h=2|1&h,""!==D&&!Tf(a,D,u)||""===D&&1===l.length){if(ma(h))return!1;b=!0}}else{const N=8&h?D:l[++T];if(8&h&&null!==a.attrs){if(!O0(a.attrs,N,u)){if(ma(h))return!1;b=!0}continue}const B=G1(8&h?"class":D,p,M0(a),u);if(-1===B){if(ma(h))return!1;b=!0;continue}if(""!==N){let J;J=B>m?"":p[B+1].toLowerCase();const re=8&h?J:null;if(re&&-1!==$1(re,N,0)||2&h&&N!==J){if(ma(h))return!1;b=!0}}}}else{if(!b&&!ma(h)&&!ma(D))return!1;if(b&&ma(D))continue;b=!1,h=D|1&h}}return ma(h)||b}function ma(a){return 0==(1&a)}function G1(a,l,u,h){if(null===l)return-1;let p=0;if(h||!u){let m=!1;for(;p<l.length;){const b=l[p];if(b===a)return p;if(3===b||6===b)m=!0;else{if(1===b||2===b){let T=l[++p];for(;"string"==typeof T;)T=l[++p];continue}if(4===b)break;if(0===b){p+=4;continue}}p+=m?1:2}return-1}return function q1(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const h=a[u];if("number"==typeof h)return-1;if(h===l)return u;u++}return-1}(l,a)}function _g(a,l,u=!1){for(let h=0;h<l.length;h++)if(P0(a,l[h],u))return!0;return!1}function JA(a,l){e:for(let u=0;u<l.length;u++){const h=l[u];if(a.length===h.length){for(let p=0;p<a.length;p++)if(a[p]!==h[p])continue e;return!0}}return!1}function z1(a,l){return a?":not("+l.trim()+")":l}function QA(a){let l=a[0],u=1,h=2,p="",m=!1;for(;u<a.length;){let b=a[u];if("string"==typeof b)if(2&h){const T=a[++u];p+="["+b+(T.length>0?'="'+T+'"':"")+"]"}else 8&h?p+="."+b:4&h&&(p+=" "+b);else""!==p&&!ma(b)&&(l+=z1(m,p),p=""),h=b,m=m||!ma(h);u++}return""!==p&&(l+=z1(m,p)),l}const jt={};function W1(a){K1(sn(),we(),yi()+a,!1)}function K1(a,l,u,h){if(!h)if(3==(3&l[Vt])){const m=a.preOrderCheckHooks;null!==m&&na(l,m,u)}else{const m=a.preOrderHooks;null!==m&&fd(l,m,0,u)}Wa(u)}function J1(a,l=null,u=null,h){const p=L0(a,l,u,h);return p.resolveInjectorInitializers(),p}function L0(a,l=null,u=null,h,p=new Set){const m=[u||en,fg(a)];return h=h||("object"==typeof a?void 0:ye(a)),new k1(m,l||O_(),h||null,p)}let Ef=(()=>{class a{static create(u,h){if(Array.isArray(u))return J1({name:""},h,u,"");{const p=u.name??"";return J1({name:p},u.parent,u.providers,p)}}}return a.THROW_IF_NOT_FOUND=cs,a.NULL=new A1,a.\u0275prov=Qe({token:a,providedIn:"any",factory:()=>$(Md)}),a.__NG_ELEMENT_ID__=-1,a})();function If(a,l=yt.Default){const u=we();return null===u?$(a,l):Uh(qr(),u,ee(a),l)}function rT(){throw new Error("invalid")}function iT(a,l){const u=a.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const m=u[h+1];if(-1!==m){const b=a.data[m];dd(u[h]),b.contentQueries(2,l[m],m)}}}function B_(a,l,u,h,p,m,b,T,D,N,O){const B=l.blueprint.slice();return B[Gi]=p,B[Vt]=76|h,(null!==O||a&&1024&a[Vt])&&(B[Vt]|=1024),Il(B),B[kn]=B[us]=a,B[Vn]=u,B[gr]=b||a&&a[gr],B[Zt]=T||a&&a[Zt],B[Ku]=D||a&&a[Ku]||null,B[Fa]=N||a&&a[Fa]||null,B[sr]=m,B[$s]=function Jh(){return Io++}(),B[mi]=O,B[ni]=2==l.type?a[ni]:B,B}function wg(a,l,u,h,p){let m=a.data[l];if(null===m)m=V_(a,l,u,h,p),function xh(){return Pt.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=u,m.value=h,m.attrs=p;const b=Lc();m.injectorIndex=null===b?-1:b.injectorIndex}return ki(m,!0),m}function V_(a,l,u,h,p){const m=Nl(),b=Uc(),D=a.data[l]=function GL(a,l,u,h,p,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,u,l,h,p);return null===a.firstChild&&(a.firstChild=D),null!==m&&(b?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D,D.prev=m)),D}function Cg(a,l,u,h){if(0===u)return-1;const p=l.length;for(let m=0;m<u;m++)l.push(h),a.blueprint.push(h),a.data.push(null);return p}function _a(a,l,u){jc(l);try{const h=a.viewQuery;null!==h&&W0(1,h,u);const p=a.template;null!==p&&H0(a,l,p,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&iT(a,l),a.staticViewQueries&&W0(2,a.viewQuery,u);const m=a.components;null!==m&&function sT(a,l){for(let u=0;u<l.length;u++)MN(a,l[u])}(l,m)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{l[Vt]&=-5,l_()}}function j_(a,l,u,h){const p=l[Vt];if(128!=(128&p)){jc(l);try{Il(l),function wo(a){return Pt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&H0(a,l,u,2,h);const b=3==(3&p);if(b){const N=a.preOrderCheckHooks;null!==N&&na(l,N,null)}else{const N=a.preOrderHooks;null!==N&&fd(l,N,0,null),Co(l,0)}if(function RN(a){for(let l=tf(a);null!==l;l=cu(l)){if(!l[Eh])continue;const u=l[ri];for(let h=0;h<u.length;h++){const p=u[h];512&p[Vt]||Al(p[kn],1),p[Vt]|=512}}}(l),function kN(a){for(let l=tf(a);null!==l;l=cu(l))for(let u=ii;u<l.length;u++){const h=l[u],p=h[st];za(h)&&j_(p,h,p.template,h[Vn])}}(l),null!==a.contentQueries&&iT(a,l),b){const N=a.contentCheckHooks;null!==N&&na(l,N)}else{const N=a.contentHooks;null!==N&&fd(l,N,1),Co(l,1)}!function pN(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const p=u[h];if(p<0)Wa(~p);else{const m=p,b=u[++h],T=u[++h];kh(b,m),T(2,l[m])}}}finally{Wa(-1)}}(a,l);const T=a.components;null!==T&&function gN(a,l){for(let u=0;u<l.length;u++)ON(a,l[u])}(l,T);const D=a.viewQuery;if(null!==D&&W0(2,D,h),b){const N=a.viewCheckHooks;null!==N&&na(l,N)}else{const N=a.viewHooks;null!==N&&fd(l,N,2),Co(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[Vt]&=-41,512&l[Vt]&&(l[Vt]&=-513,Al(l[kn],-1))}finally{l_()}}}function H0(a,l,u,h,p){const m=yi(),b=2&h;try{Wa(-1),b&&l.length>vn&&K1(a,l,vn,!1),xi(b?2:0,p),u(h,p)}finally{Wa(m),xi(b?3:1,p)}}function oT(a,l,u){if(Cl(l)){const p=l.directiveEnd;for(let m=l.directiveStart;m<p;m++){const b=a.data[m];b.contentQueries&&b.contentQueries(1,u[m],m)}}}function H_(a,l,u){Fc()&&(function CN(a,l,u,h){const p=u.directiveStart,m=u.directiveEnd;ds(u)&&function AN(a,l,u){const h=ar(l,a),p=$_(u),m=a[gr],b=G_(a,B_(a,p,null,u.onPush?32:16,h,l,m,m.createRenderer(h,u),null,null,null));a[l.index]=b}(l,u,a.data[p+u.componentOffset]),a.firstCreatePass||el(u,l),li(h,l);const b=u.initialInputs;for(let T=p;T<m;T++){const D=a.data[T],N=As(l,a,T,u);li(N,l),null!==b&&NN(0,T-p,N,D,0,b),Ni(D)&&(mr(u.index,l)[Vn]=As(l,a,T,u))}}(a,l,u,ar(u,l)),64==(64&u.flags)&&dT(a,l,u))}function Ld(a,l,u=ar){const h=l.localNames;if(null!==h){let p=l.index+1;for(let m=0;m<h.length;m+=2){const b=h[m+1],T=-1===b?u(l,a):a[b];a[p++]=T}}}function $_(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=aT(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function aT(a,l,u,h,p,m,b,T,D,N){const O=vn+h,B=O+p,J=function lT(a,l){const u=[];for(let h=0;h<l;h++)u.push(h<a?null:jt);return u}(O,B),re="function"==typeof N?N():N;return J[st]={type:a,blueprint:J,template:u,queries:null,viewQuery:T,declTNode:l,data:J.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:D,consts:re,incompleteFirstPass:!1}}function mN(a,l,u,h){const p=fT(l);null===u?p.push(h):(p.push(u),a.firstCreatePass&&pT(a).push(h,p.length-1))}function _N(a,l,u,h){for(let p in a)if(a.hasOwnProperty(p)){u=null===u?{}:u;const m=a[p];null===h?yN(u,l,p,m):h.hasOwnProperty(p)&&yN(u,l,h[p],m)}return u}function yN(a,l,u,h){a.hasOwnProperty(u)?a[u].push(l,h):a[u]=[l,h]}function Rs(a,l,u,h,p,m,b,T){const D=ar(l,u);let O,N=l.inputs;!T&&null!=N&&(O=N[h])?(K0(a,u,O,h,p),ds(l)&&function $0(a,l){const u=mr(l,a);16&u[Vt]||(u[Vt]|=32)}(u,l.index)):3&l.type&&(h=function Tg(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),p=null!=b?b(p,l.value||"",h):p,m.setProperty(D,h,p))}function G0(a,l,u,h){if(Fc()){const p=null===h?null:{"":-1},m=function EN(a,l){const u=a.directiveRegistry;let h=null,p=null;if(u)for(let m=0;m<u.length;m++){const b=u[m];if(_g(l,b.selectors,!1))if(h||(h=[]),Ni(b))if(null!==b.findHostDirectiveDefs){const T=[];p=p||new Map,b.findHostDirectiveDefs(b,T,p),h.unshift(...T,b),Z0(a,l,T.length)}else h.unshift(b),Z0(a,l,0);else p=p||new Map,b.findHostDirectiveDefs?.(b,h,p),h.push(b)}return null===h?null:[h,p]}(a,u);let b,T;null===m?b=T=null:[b,T]=m,null!==b&&uT(a,l,u,b,p,T),p&&function DN(a,l,u){if(l){const h=a.localNames=[];for(let p=0;p<l.length;p+=2){const m=u[l[p+1]];if(null==m)throw new be(-301,!1);h.push(l[p],m)}}}(u,h,p)}u.mergedAttrs=Ws(u.mergedAttrs,u.attrs)}function uT(a,l,u,h,p,m){for(let N=0;N<h.length;N++)jl(el(u,l),a,h[N].type);!function SN(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}(u,a.data.length,h.length);for(let N=0;N<h.length;N++){const O=h[N];O.providersResolver&&O.providersResolver(O)}let b=!1,T=!1,D=Cg(a,l,h.length,null);for(let N=0;N<h.length;N++){const O=h[N];u.mergedAttrs=Ws(u.mergedAttrs,O.hostAttrs),IN(a,u,l,D,O),qL(D,O,p),null!==O.contentQueries&&(u.flags|=4),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(u.flags|=64);const B=O.type.prototype;!b&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((a.preOrderHooks??(a.preOrderHooks=[])).push(u.index),b=!0),!T&&(B.ngOnChanges||B.ngDoCheck)&&((a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(u.index),T=!0),D++}!function cT(a,l,u){const p=l.directiveEnd,m=a.data,b=l.attrs,T=[];let D=null,N=null;for(let O=l.directiveStart;O<p;O++){const B=m[O],J=u?u.get(B):null,De=J?J.outputs:null;D=_N(B.inputs,O,D,J?J.inputs:null),N=_N(B.outputs,O,N,De);const ze=null===D||null===b||M0(l)?null:xN(D,O,b);T.push(ze)}null!==D&&(D.hasOwnProperty("class")&&(l.flags|=8),D.hasOwnProperty("style")&&(l.flags|=16)),l.initialInputs=T,l.inputs=D,l.outputs=N}(a,u,m)}function dT(a,l,u){const h=u.directiveStart,p=u.directiveEnd,m=u.index,b=function cd(){return Pt.lFrame.currentDirectiveIndex}();try{Wa(m);for(let T=h;T<p;T++){const D=a.data[T],N=l[T];ud(T),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&TN(D,N)}}finally{Wa(-1),ud(b)}}function TN(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function Z0(a,l,u){l.componentOffset=u,(a.components??(a.components=[])).push(l.index)}function qL(a,l,u){if(u){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)u[l.exportAs[h]]=a;Ni(l)&&(u[""]=a)}}function IN(a,l,u,h,p){a.data[h]=p;const m=p.factory||(p.factory=Yo(p.type)),b=new To(m,Ni(p),If);a.blueprint[h]=b,u[h]=b,function bN(a,l,u,h,p){const m=p.hostBindings;if(m){let b=a.hostBindingOpCodes;null===b&&(b=a.hostBindingOpCodes=[]);const T=~l.index;(function wN(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(b)!=T&&b.push(T),b.push(u,h,m)}}(a,l,h,Cg(a,u,p.hostVars,jt),p)}function q0(a,l,u,h,p,m,b){if(null==m)a.removeAttribute(l,p,u);else{const T=null==b?Re(m):b(m,h||"",p);a.setAttribute(l,p,T,u)}}function NN(a,l,u,h,p,m){const b=m[l];if(null!==b){const T=h.setInput;for(let D=0;D<b.length;){const N=b[D++],O=b[D++],B=b[D++];null!==T?h.setInput(u,B,N,O):u[O]=B}}}function xN(a,l,u){let h=null,p=0;for(;p<u.length;){const m=u[p];if(0!==m)if(5!==m){if("number"==typeof m)break;if(a.hasOwnProperty(m)){null===h&&(h=[]);const b=a[m];for(let T=0;T<b.length;T+=2)if(b[T]===l){h.push(m,b[T+1],u[p+1]);break}}p+=2}else p+=2;else p+=4}return h}function hT(a,l,u,h){return[a,!0,!1,l,null,0,h,u,null,null]}function ON(a,l){const u=mr(l,a);if(za(u)){const h=u[st];48&u[Vt]?j_(h,u,h.template,u[Vn]):u[Hs]>0&&z0(u)}}function z0(a){for(let h=tf(a);null!==h;h=cu(h))for(let p=ii;p<h.length;p++){const m=h[p];if(za(m))if(512&m[Vt]){const b=m[st];j_(b,m,b.template,m[Vn])}else m[Hs]>0&&z0(m)}const u=a[st].components;if(null!==u)for(let h=0;h<u.length;h++){const p=mr(u[h],a);za(p)&&p[Hs]>0&&z0(p)}}function MN(a,l){const u=mr(l,a),h=u[st];(function PN(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(h,u),_a(h,u,u[Vn])}function G_(a,l){return a[vo]?a[Yu][gi]=l:a[vo]=l,a[Yu]=l,l}function Z_(a){for(;a;){a[Vt]|=32;const l=Dd(a);if(Tl(a)&&!l)return a;a=l}return null}function q_(a,l,u,h=!0){const p=l[gr];p.begin&&p.begin();try{j_(a,l,a.template,u)}catch(b){throw h&&gT(l,b),b}finally{p.end&&p.end()}}function W0(a,l,u){dd(0),l(a,u)}function fT(a){return a[or]||(a[or]=[])}function pT(a){return a.cleanup||(a.cleanup=[])}function gT(a,l){const u=a[Fa],h=u?u.get(gg,null):null;h&&h.handleError(l)}function K0(a,l,u,h,p){for(let m=0;m<u.length;){const b=u[m++],T=u[m++],D=l[b],N=a.data[b];null!==N.setInput?N.setInput(D,p,h,T):D[T]=p}}function sc(a,l,u){const h=Xo(l,a);Xp(a[Zt],h,u)}function Af(a,l,u){let h=u?a.styles:null,p=u?a.classes:null,m=0;if(null!==l)for(let b=0;b<l.length;b++){const T=l[b];"number"==typeof T?m=T:1==m?p=_e(p,T):2==m&&(h=_e(h,T+": "+l[++b]+";"))}u?a.styles=h:a.stylesWithoutHost=h,u?a.classes=p:a.classesWithoutHost=p}function ya(a,l,u,h,p=!1){for(;null!==u;){const m=l[u.index];if(null!==m&&h.push(Jn(m)),zi(m))for(let T=ii;T<m.length;T++){const D=m[T],N=D[st].firstChild;null!==N&&ya(D[st],D,N,h)}const b=u.type;if(8&b)ya(a,l,u.child,h);else if(32&b){const T=Jl(u,l);let D;for(;D=T();)h.push(D)}else if(16&b){const T=cf(l,u);if(Array.isArray(T))h.push(...T);else{const D=Dd(l[ni]);ya(D[st],D,T,h,!0)}}u=p?u.projectionNext:u.next}return h}class Nf{get rootNodes(){const l=this._lView,u=l[st];return ya(u,l,u.firstChild,[])}constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vn]}set context(l){this._lView[Vn]=l}get destroyed(){return 128==(128&this._lView[Vt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[kn];if(zi(l)){const u=l[Wo],h=u?u.indexOf(this):-1;h>-1&&(tg(l,h),Gl(u,h))}this._attachedToViewContainer=!1}rf(this._lView[st],this._lView)}onDestroy(l){mN(this._lView[st],this._lView,null,l)}markForCheck(){Z_(this._cdRefInjectingView||this._lView)}detach(){this._lView[Vt]&=-65}reattach(){this._lView[Vt]|=64}detectChanges(){q_(this._lView[st],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ql(a,l){hu(a,l,l[Zt],2,null,null)}(this._lView[st],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=l}}class Y0 extends Nf{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;q_(l[st],l,l[Vn],!1)}checkNoChanges(){}get context(){return null}}class z_ extends wf{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=dn(l);return new Ud(u,this.ngModule)}}function W_(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class mT{constructor(l,u){this.injector=l,this.parentInjector=u}get(l,u,h){h=K(h);const p=this.injector.get(l,P_,h);return p!==P_||u===P_?p:this.parentInjector.get(l,u,h)}}class Ud extends O1{get inputs(){return W_(this.componentDef.inputs)}get outputs(){return W_(this.componentDef.outputs)}constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function XA(a){return a.map(QA).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}create(l,u,h,p){let m=(p=p||this.ngModule)instanceof Pd?p:p?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const b=m?new mT(l,m):l,T=b.get(N0,null);if(null===T)throw new be(407,!1);const D=b.get(GA,null),N=T.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",B=h?function $L(a,l,u){return a.selectRootElement(l,u===Yn.ShadowDom)}(N,h,this.componentDef.encapsulation):Id(N,O,function to(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(O)),J=this.componentDef.onPush?288:272,re=aT(0,null,null,1,0,null,null,null,null,null),De=B_(null,re,null,J,null,null,T,N,D,b,null);let ze,rt;jc(De);try{const ht=this.componentDef;let Ot,Le=null;ht.findHostDirectiveDefs?(Ot=[],Le=new Map,ht.findHostDirectiveDefs(ht,Ot,Le),Ot.push(ht)):Ot=[ht];const $t=function J0(a,l){const u=a[st],h=vn;return a[h]=l,wg(u,h,2,"#host",null)}(De,B),hr=function KL(a,l,u,h,p,m,b,T){const D=p[st];!function UN(a,l,u,h){for(const p of a)l.mergedAttrs=Ws(l.mergedAttrs,p.hostAttrs);null!==l.mergedAttrs&&(Af(l,l.mergedAttrs,!0),null!==u&&pu(h,u,l))}(h,a,l,b);const N=m.createRenderer(l,u),O=B_(p,$_(u),null,u.onPush?32:16,p[a.index],a,m,N,T||null,null,null);return D.firstCreatePass&&Z0(D,a,h.length-1),G_(p,O),p[a.index]=O}($t,B,ht,Ot,De,T,N);rt=qa(re,vn),B&&function yT(a,l,u,h){if(h)jn(a,u,["ng-version",L1.full]);else{const{attrs:p,classes:m}=function eN(a){const l=[],u=[];let h=1,p=2;for(;h<a.length;){let m=a[h];if("string"==typeof m)2===p?""!==m&&l.push(m,a[++h]):8===p&&u.push(m);else{if(!ma(p))break;p=m}h++}return{attrs:l,classes:u}}(l.selectors[0]);p&&jn(a,u,p),m&&m.length>0&&al(a,u,m.join(" "))}}(N,ht,B,h),void 0!==u&&function BN(a,l,u){const h=a.projection=[];for(let p=0;p<l.length;p++){const m=u[p];h.push(null!=m?Array.from(m):null)}}(rt,this.ngContentSelectors,u),ze=function Bd(a,l,u,h,p,m){const b=qr(),T=p[st],D=ar(b,p);uT(T,p,b,u,null,h);for(let O=0;O<u.length;O++)li(As(p,T,b.directiveStart+O,b),p);dT(T,p,b),D&&li(D,p);const N=As(p,T,b.directiveStart+b.componentOffset,b);if(a[Vn]=p[Vn]=N,null!==m)for(const O of m)O(N,l);return oT(T,b,a),N}(hr,ht,Ot,Le,De,[YL]),_a(re,De,null)}finally{l_()}return new _T(this.componentType,ze,ic(rt,De),De,rt)}}class _T extends VA{constructor(l,u,h,p,m){super(),this.location=h,this._rootLView=p,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new Y0(p),this.componentType=l}setInput(l,u){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[l])){const m=this._rootLView;K0(m[st],m,p,l,u),Z_(mr(this._tNode.index,m))}}get injector(){return new hs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function YL(){const a=qr();kl(we()[st],a)}function K_(a){let l=function vT(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const h=[a];for(;l;){let p;if(Ni(a))p=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new be(903,!1);p=l.\u0275dir}if(p){if(u){h.push(p);const b=a;b.inputs=wT(a.inputs),b.declaredInputs=wT(a.declaredInputs),b.outputs=wT(a.outputs);const T=p.hostBindings;T&&VN(a,T);const D=p.viewQuery,N=p.contentQueries;if(D&&CT(a,D),N&&Q0(a,N),Ce(a.inputs,p.inputs),Ce(a.declaredInputs,p.declaredInputs),Ce(a.outputs,p.outputs),Ni(p)&&p.data.animation){const O=a.data;O.animation=(O.animation||[]).concat(p.data.animation)}}const m=p.features;if(m)for(let b=0;b<m.length;b++){const T=m[b];T&&T.ngInherit&&T(a),T===K_&&(u=!1)}}l=Object.getPrototypeOf(l)}!function bT(a){let l=0,u=null;for(let h=a.length-1;h>=0;h--){const p=a[h];p.hostVars=l+=p.hostVars,p.hostAttrs=Ws(p.hostAttrs,u=Ws(u,p.hostAttrs))}}(h)}function wT(a){return a===Rr?{}:a===en?[]:a}function CT(a,l){const u=a.viewQuery;a.viewQuery=u?(h,p)=>{l(h,p),u(h,p)}:l}function Q0(a,l){const u=a.contentQueries;a.contentQueries=u?(h,p,m)=>{l(h,p,m),u(h,p,m)}:l}function VN(a,l){const u=a.hostBindings;a.hostBindings=u?(h,p)=>{l(h,p),u(h,p)}:l}function Vd(a){return!!J_(a)&&(Array.isArray(a)||!(a instanceof Map)&&Symbol.iterator in a)}function J_(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function va(a,l,u){return a[l]=u}function Mi(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function _u(a,l,u,h){const p=Mi(a,l,u);return Mi(a,l+1,h)||p}function jd(a,l,u,h){const p=we();return Mi(p,ta(),l)&&(sn(),function ul(a,l,u,h,p,m){const b=ar(a,l);q0(l[Zt],b,m,a.value,u,h,p)}(Rn(),p,a,l,u,h)),jd}function yu(a,l,u,h){return Mi(a,ta(),u)?l+Re(u)+h:jt}function kT(a,l,u,h,p,m,b,T){const D=we(),N=sn(),O=a+vn,B=N.firstCreatePass?function Q_(a,l,u,h,p,m,b,T,D){const N=l.consts,O=wg(l,a,4,b||null,Zs(N,T));G0(l,u,O,Zs(N,D)),kl(l,O);const B=O.tView=aT(2,O,h,p,m,l.directiveRegistry,l.pipeRegistry,null,l.schemas,N);return null!==l.queries&&(l.queries.template(l,O),B.queries=l.queries.embeddedTView(O)),O}(O,N,D,l,u,h,p,m,b):N.data[O];ki(B,!1);const J=D[Zt].createComment("");pa(N,D,J,B),li(J,D),G_(D,D[O]=hT(J,D,J,B)),Ju(B)&&H_(N,D,B),null!=b&&Ld(D,B,T)}function RT(a){return ea(function Nh(){return Pt.lFrame.contextLView}(),vn+a)}function Mf(a,l,u){const h=we();return Mi(h,ta(),l)&&Rs(sn(),Rn(),h,a,l,h[Zt],u,!1),Mf}function Pf(a,l,u,h,p){const b=p?"class":"style";K0(a,u,l.inputs[b],b,h)}function Ng(a,l,u,h){const p=we(),m=sn(),b=vn+a,T=p[Zt],D=m.firstCreatePass?function OT(a,l,u,h,p,m){const b=l.consts,D=wg(l,a,2,h,Zs(b,p));return G0(l,u,D,Zs(b,m)),null!==D.attrs&&Af(D,D.attrs,!1),null!==D.mergedAttrs&&Af(D,D.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,D),D}(b,m,p,l,u,h):m.data[b],N=p[b]=Id(T,l,function c_(){return Pt.lFrame.currentNamespace}()),O=Ju(D);return ki(D,!0),pu(T,N,D),32!=(32&D.flags)&&pa(m,p,N,D),0===function Pc(){return Pt.lFrame.elementDepthCount}()&&li(N,p),function id(){Pt.lFrame.elementDepthCount++}(),O&&(H_(m,p,D),oT(m,D,p)),null!==h&&Ld(p,D),Ng}function X_(){let a=qr();Uc()?Bc():(a=a.parent,ki(a,!1));const l=a;!function sd(){Pt.lFrame.elementDepthCount--}();const u=sn();return u.firstCreatePass&&(kl(u,a),Cl(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function Lh(a){return 0!=(8&a.flags)}(l)&&Pf(u,l,we(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Up(a){return 0!=(16&a.flags)}(l)&&Pf(u,l,we(),l.stylesWithoutHost,!1),X_}function xg(a,l,u,h){return Ng(a,l,u,h),X_(),xg}function ey(a,l,u){const h=we(),p=sn(),m=a+vn,b=p.firstCreatePass?function MT(a,l,u,h,p){const m=l.consts,b=Zs(m,h),T=wg(l,a,8,"ng-container",b);return null!==b&&Af(T,b,!0),G0(l,u,T,Zs(m,p)),null!==l.queries&&l.queries.elementStart(l,T),T}(m,p,h,l,u):p.data[m];ki(b,!0);const T=h[m]=h[Zt].createComment("");return pa(p,h,T,b),li(T,h),Ju(b)&&(H_(p,h,b),oT(p,b,h)),null!=u&&Ld(h,b),ey}function ty(){let a=qr();const l=sn();return Uc()?Bc():(a=a.parent,ki(a,!1)),l.firstCreatePass&&(kl(l,a),Cl(a)&&l.queries.elementEnd(a)),ty}function FT(){return we()}function tb(a){return!!a&&"function"==typeof a.then}function LT(a){return!!a&&"function"==typeof a.subscribe}const bu=LT;function kg(a,l,u,h){const p=we(),m=sn(),b=qr();return function UT(a,l,u,h,p,m,b){const T=Ju(h),N=a.firstCreatePass&&pT(a),O=l[Vn],B=fT(l);let J=!0;if(3&h.type||b){const ze=ar(h,l),rt=b?b(ze):ze,ht=B.length,Ot=b?$t=>b(Jn($t[h.index])):h.index;let Le=null;if(!b&&T&&(Le=function ry(a,l,u,h){const p=a.cleanup;if(null!=p)for(let m=0;m<p.length-1;m+=2){const b=p[m];if(b===u&&p[m+1]===h){const T=l[or],D=p[m+2];return T.length>D?T[D]:null}"string"==typeof b&&(m+=2)}return null}(a,l,p,h.index)),null!==Le)(Le.__ngLastListenerFn__||Le).__ngNextListenerFn__=m,Le.__ngLastListenerFn__=m,J=!1;else{m=VT(h,l,O,m,!1);const $t=u.listen(rt,p,m);B.push(m,$t),N&&N.push(p,Ot,ht,ht+1)}}else m=VT(h,l,O,m,!1);const re=h.outputs;let De;if(J&&null!==re&&(De=re[p])){const ze=De.length;if(ze)for(let rt=0;rt<ze;rt+=2){const hr=l[De[rt]][De[rt+1]].subscribe(m),Xn=B.length;B.push(m,hr),N&&N.push(p,h.index,Xn,-(Xn+1))}}}(m,p,p[Zt],b,a,l,h),kg}function BT(a,l,u,h){try{return xi(6,l,u),!1!==u(h)}catch(p){return gT(a,p),!1}finally{xi(7,l,u)}}function VT(a,l,u,h,p){return function m(b){if(b===Function)return h;Z_(a.componentOffset>-1?mr(a.index,l):l);let D=BT(l,u,h,b),N=m.__ngNextListenerFn__;for(;N;)D=BT(l,u,N,b)&&D,N=N.__ngNextListenerFn__;return p&&!1===D&&(b.preventDefault(),b.returnValue=!1),D}}function jT(a=1){return function n0(a){return(Pt.lFrame.contextLView=function Ph(a,l){for(;a>0;)l=l[us],a--;return l}(a,Pt.lFrame.contextLView))[Vn]}(a)}function qN(a,l){let u=null;const h=function F_(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(!(1&u))return l[u+1]}return null}(a);for(let p=0;p<l.length;p++){const m=l[p];if("*"!==m){if(null===h?_g(a,m,!0):JA(h,m))return p}else u=p}return u}function iy(a){const l=we()[ni][sr];if(!l.projection){const h=l.projection=nl(a?a.length:1,null),p=h.slice();let m=l.child;for(;null!==m;){const b=a?qN(m,a):0;null!==b&&(p[b]?p[b].projectionNext=m:h[b]=m,p[b]=m),m=m.next}}}function HT(a,l=0,u){const h=we(),p=sn(),m=wg(p,vn+a,16,null,u||null);null===m.projection&&(m.projection=l),Bc(),32!=(32&m.flags)&&function w_(a,l,u){xo(l[Zt],0,l,u,sf(a,u,l),lf(u.parent||l[sr],u,l))}(p,h,m)}function Ff(a,l,u){return Lf(a,"",l,"",u),Ff}function Lf(a,l,u,h,p){const m=we(),b=yu(m,l,u,h);return b!==jt&&Rs(sn(),Rn(),m,a,b,m[Zt],p,!1),Lf}function oy(a,l){return a<<17|l<<2}function ac(a){return a>>17&32767}function zT(a){return 2|a}function $d(a){return(131068&a)>>2}function ib(a,l){return-131069&a|l<<2}function sb(a){return 1|a}function KT(a,l,u,h,p){const m=a[u+1],b=null===l;let T=h?ac(m):$d(m),D=!1;for(;0!==T&&(!1===D||b);){const O=a[T+1];YT(a[T],l)&&(D=!0,a[T+1]=h?sb(O):zT(O)),T=h?ac(O):$d(O)}D&&(a[u+1]=h?zT(m):sb(m))}function YT(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&yr(a,l)>=0}const ci={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ay(a){return a.substring(ci.key,ci.keyEnd)}function JT(a,l){const u=ci.textEnd;return u===l?-1:(l=ci.keyEnd=function ab(a,l,u){for(;l<u&&a.charCodeAt(l)>32;)l++;return l}(a,ci.key=l,u),Pi(a,l,u))}function Pi(a,l,u){for(;l<u&&a.charCodeAt(l)<=32;)l++;return l}function lb(a,l,u){return Po(a,l,u,!1),lb}function cb(a,l){return Po(a,l,null,!0),cb}function ub(a){!function Tr(a,l,u,h){const p=sn(),m=Ss(2);p.firstUpdatePass&&tE(p,null,m,h);const b=we();if(u!==jt&&Mi(b,m,u)){const T=p.data[yi()];if(db(T,h)&&!Gd(p,m)){let D=h?T.classesWithoutHost:T.stylesWithoutHost;null!==D&&(u=_e(D,u||"")),Pf(p,T,b,u,h)}else!function iE(a,l,u,h,p,m,b,T){p===jt&&(p=en);let D=0,N=0,O=0<p.length?p[0]:null,B=0<m.length?m[0]:null;for(;null!==O||null!==B;){const J=D<p.length?p[D+1]:void 0,re=N<m.length?m[N+1]:void 0;let ze,De=null;O===B?(D+=2,N+=2,J!==re&&(De=B,ze=re)):null===B||null!==O&&O<B?(D+=2,De=O):(N+=2,De=B,ze=re),null!==De&&sE(a,l,u,h,De,ze,b,T),O=D<p.length?p[D]:null,B=N<m.length?m[N]:null}}(p,T,b,b[Zt],b[m+1],b[m+1]=function ix(a,l,u){if(null==u||""===u)return en;const h=[],p=ue(u);if(Array.isArray(p))for(let m=0;m<p.length;m++)a(h,p[m],!0);else if("object"==typeof p)for(const m in p)p.hasOwnProperty(m)&&a(h,m,p[m]);else"string"==typeof p&&l(h,p);return h}(a,l,u),h,m)}}(sx,ba,a,!0)}function ba(a,l){for(let u=function QN(a){return function QT(a){ci.key=0,ci.keyEnd=0,ci.value=0,ci.valueEnd=0,ci.textEnd=a.length}(a),JT(a,Pi(a,0,ci.textEnd))}(l);u>=0;u=JT(l,u))vi(a,ay(l),!0)}function Po(a,l,u,h){const p=we(),m=sn(),b=Ss(2);m.firstUpdatePass&&tE(m,a,b,h),l!==jt&&Mi(p,b,l)&&sE(m,m.data[yi()],p,p[Zt],a,p[b+1]=function ox(a,l){return null==a||""===a||("string"==typeof l?a+=l:"object"==typeof a&&(a=ye(ue(a)))),a}(l,u),h,b)}function Gd(a,l){return l>=a.expandoStartIndex}function tE(a,l,u,h){const p=a.data;if(null===p[u+1]){const m=p[yi()],b=Gd(a,u);db(m,h)&&null===l&&!b&&(l=!1),l=function nx(a,l,u,h){const p=qs(a);let m=h?l.residualClasses:l.residualStyles;if(null===p)0===(h?l.classBindings:l.styleBindings)&&(u=Mg(u=Uf(null,a,l,u,h),l.attrs,h),m=null);else{const b=l.directiveStylingLast;if(-1===b||a[b]!==p)if(u=Uf(p,a,l,u,h),null===m){let D=function nE(a,l,u){const h=u?l.classBindings:l.styleBindings;if(0!==$d(h))return a[ac(h)]}(a,l,h);void 0!==D&&Array.isArray(D)&&(D=Uf(null,a,l,D[1],h),D=Mg(D,l.attrs,h),function rx(a,l,u,h){a[ac(u?l.classBindings:l.styleBindings)]=h}(a,l,h,D))}else m=function rE(a,l,u){let h;const p=l.directiveEnd;for(let m=1+l.directiveStylingLast;m<p;m++)h=Mg(h,a[m].hostAttrs,u);return Mg(h,l.attrs,u)}(a,l,h)}return void 0!==m&&(h?l.residualClasses=m:l.residualStyles=m),u}(p,m,l,h),function WT(a,l,u,h,p,m){let b=m?l.classBindings:l.styleBindings,T=ac(b),D=$d(b);a[h]=u;let O,N=!1;if(Array.isArray(u)?(O=u[1],(null===O||yr(u,O)>0)&&(N=!0)):O=u,p)if(0!==D){const J=ac(a[T+1]);a[h+1]=oy(J,T),0!==J&&(a[J+1]=ib(a[J+1],h)),a[T+1]=function qT(a,l){return 131071&a|l<<17}(a[T+1],h)}else a[h+1]=oy(T,0),0!==T&&(a[T+1]=ib(a[T+1],h)),T=h;else a[h+1]=oy(D,0),0===T?T=h:a[D+1]=ib(a[D+1],h),D=h;N&&(a[h+1]=zT(a[h+1])),KT(a,O,h,!0),KT(a,O,h,!1),function YN(a,l,u,h,p){const m=p?a.residualClasses:a.residualStyles;null!=m&&"string"==typeof l&&yr(m,l)>=0&&(u[h+1]=sb(u[h+1]))}(l,O,a,h,m),b=oy(T,D),m?l.classBindings=b:l.styleBindings=b}(p,m,l,u,b,h)}}function Uf(a,l,u,h,p){let m=null;const b=u.directiveEnd;let T=u.directiveStylingLast;for(-1===T?T=u.directiveStart:T++;T<b&&(m=l[T],h=Mg(h,m.hostAttrs,p),m!==a);)T++;return null!==a&&(u.directiveStylingLast=T),h}function Mg(a,l,u){const h=u?1:2;let p=-1;if(null!==l)for(let m=0;m<l.length;m++){const b=l[m];"number"==typeof b?p=b:p===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),vi(a,b,!!u||l[++m]))}return void 0===a?null:a}function sx(a,l,u){const h=String(l);""!==h&&!h.includes(" ")&&vi(a,h,u)}function sE(a,l,u,h,p,m,b,T){if(!(3&l.type))return;const D=a.data,N=D[T+1],O=function KN(a){return 1==(1&a)}(N)?oE(D,l,u,p,$d(N),b):void 0;uy(O)||(uy(m)||function rb(a){return 2==(2&a)}(N)&&(m=oE(D,null,u,p,T,b)),function ko(a,l,u,h,p){if(l)p?a.addClass(u,h):a.removeClass(u,h);else{let m=-1===h.indexOf("-")?void 0:St.DashCase;null==p?a.removeStyle(u,h,m):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),m|=St.Important),a.setStyle(u,h,p,m))}}(h,b,Xo(yi(),u),p,m))}function oE(a,l,u,h,p,m){const b=null===l;let T;for(;p>0;){const D=a[p],N=Array.isArray(D),O=N?D[1]:D,B=null===O;let J=u[p+1];J===jt&&(J=B?en:void 0);let re=B?Bt(J,h):O===h?J:void 0;if(N&&!uy(re)&&(re=Bt(D,h)),uy(re)&&(T=re,b))return T;const De=a[p+1];p=b?ac(De):$d(De)}if(null!==l){let D=m?l.residualClasses:l.residualStyles;null!=D&&(T=Bt(D,h))}return T}function uy(a){return void 0!==a}function db(a,l){return 0!=(a.flags&(l?8:16))}function Pg(a,l=""){const u=we(),h=sn(),p=a+vn,m=h.firstCreatePass?wg(h,p,1,l,null):h.data[p],b=u[p]=uu(u[Zt],l);pa(h,u,b,m),ki(m,!1)}function dy(a){return hy("",a,""),dy}function hy(a,l,u){const h=we(),p=yu(h,a,l,u);return p!==jt&&sc(h,yi(),p),hy}function fy(a,l,u,h,p){const m=we(),b=function Hd(a,l,u,h,p,m){const T=_u(a,Ri(),u,p);return Ss(2),T?l+Re(u)+h+Re(p)+m:jt}(m,a,l,u,h,p);return b!==jt&&sc(m,yi(),b),fy}function py(a,l,u){const h=we();return Mi(h,ta(),l)&&Rs(sn(),Rn(),h,a,l,h[Zt],u,!0),py}function gy(a,l,u){const h=we();if(Mi(h,ta(),l)){const m=sn(),b=Rn();Rs(m,b,h,a,l,function FN(a,l,u){return(null===a||Ni(a))&&(u=function Za(a){for(;Array.isArray(a);){if("object"==typeof a[qi])return a;a=a[Gi]}return null}(u[l.index])),u[Zt]}(qs(m.data),b,h),u,!0)}return gy}const Cu=void 0;var my=["en",[["a","p"],["AM","PM"],Cu],[["AM","PM"],Cu,Cu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cu,"{1} 'at' {0}",Cu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _E(a){const u=Math.floor(Math.abs(a)),h=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let qd={};function _y(a){const l=function vE(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=vb(l);if(u)return u;const h=l.split("-")[0];if(u=vb(h),u)return u;if("en"===h)return my;throw new be(701,!1)}function yE(a){return _y(a)[Nt.PluralCase]}function vb(a){return a in qd||(qd[a]=yn.ng&&yn.ng.common&&yn.ng.common.locales&&yn.ng.common.locales[a]),qd[a]}var Nt=(()=>((Nt=Nt||{})[Nt.LocaleId=0]="LocaleId",Nt[Nt.DayPeriodsFormat=1]="DayPeriodsFormat",Nt[Nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Nt[Nt.DaysFormat=3]="DaysFormat",Nt[Nt.DaysStandalone=4]="DaysStandalone",Nt[Nt.MonthsFormat=5]="MonthsFormat",Nt[Nt.MonthsStandalone=6]="MonthsStandalone",Nt[Nt.Eras=7]="Eras",Nt[Nt.FirstDayOfWeek=8]="FirstDayOfWeek",Nt[Nt.WeekendRange=9]="WeekendRange",Nt[Nt.DateFormat=10]="DateFormat",Nt[Nt.TimeFormat=11]="TimeFormat",Nt[Nt.DateTimeFormat=12]="DateTimeFormat",Nt[Nt.NumberSymbols=13]="NumberSymbols",Nt[Nt.NumberFormats=14]="NumberFormats",Nt[Nt.CurrencyCode=15]="CurrencyCode",Nt[Nt.CurrencySymbol=16]="CurrencySymbol",Nt[Nt.CurrencyName=17]="CurrencyName",Nt[Nt.Currencies=18]="Currencies",Nt[Nt.Directionality=19]="Directionality",Nt[Nt.PluralCase=20]="PluralCase",Nt[Nt.ExtraData=21]="ExtraData",Nt))();const bb=["zero","one","two","few","many"],zd="en-US",Bf={marker:"element"},Wd={marker:"ICU"};var dr=(()=>((dr=dr||{})[dr.SHIFT=2]="SHIFT",dr[dr.APPEND_EAGERLY=1]="APPEND_EAGERLY",dr[dr.COMMENT=2]="COMMENT",dr))();let wb=zd;function Yi(a){(function fe(a,l){null==a&&se(l,a,null,"!=")})(a,"Expected localeId to be defined"),"string"==typeof a&&(wb=a.toLowerCase().replace(/_/g,"-"))}function Cb(a,l,u){const h=l.insertBeforeIndex,p=Array.isArray(h)?h[0]:h;return null===p?rg(a,0,u):Jn(u[p])}function yx(a,l,u,h,p){const m=l.insertBeforeIndex;if(Array.isArray(m)){let b=h,T=null;if(3&l.type||(T=b,b=p),null!==b&&-1===l.componentOffset)for(let D=1;D<m.length;D++)ol(a,b,u[m[D]],T,!1)}}function vx(a,l){if(a.push(l),a.length>1)for(let u=a.length-2;u>=0;u--){const h=a[u];Eu(h)||Kd(h,l)&&null===Tb(h)&&yy(h,l.index)}}function Eu(a){return!(64&a.type)}function Kd(a,l){return Eu(l)||a.index>l.index}function Tb(a){const l=a.insertBeforeIndex;return Array.isArray(l)?l[0]:l}function yy(a,l){const u=a.insertBeforeIndex;Array.isArray(u)?u[0]=l:(Ki(Cb,yx),a.insertBeforeIndex=l)}function Fg(a,l){const u=a.data[l];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function r2(a,l,u){const h=V_(a,u,64,null,null);return vx(l,h),h}function Db(a,l){const u=l[a.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function wx(a){return a>>>17}function Cx(a){return(131070&a)>>>1}let vy=0,Lg=0;function TE(a,l,u,h){const p=u[Zt];let b,m=null;for(let T=0;T<l.length;T++){const D=l[T];if("string"==typeof D){const N=l[++T];null===u[N]&&(u[N]=uu(p,D))}else if("number"==typeof D)switch(1&D){case 0:const N=wx(D);let O,B;if(null===m&&(m=N,b=eo(p,h)),N===m?(O=h,B=b):(O=null,B=Jn(u[N])),null!==B){const ze=Cx(D);ol(p,B,u[ze],O,!1);const ht=Fg(a,ze);if(null!==ht&&"object"==typeof ht){const Ot=Db(ht,u);null!==Ot&&TE(a,ht.create[Ot],u,u[ht.anchorIdx])}}break;case 1:const re=l[++T],De=l[++T];q0(p,Xo(D>>>1,u),null,null,re,De,null)}else switch(D){case Wd:const N=l[++T],O=l[++T];null===u[O]&&li(u[O]=nf(p,N),u);break;case Bf:const B=l[++T],J=l[++T];null===u[J]&&li(u[J]=Id(p,B,null),u)}}}function by(a,l,u,h,p){for(let m=0;m<u.length;m++){const b=u[m],T=u[++m];if(b&p){let D="";for(let N=m+1;N<=m+T;N++){const O=u[N];if("string"==typeof O)D+=O;else if("number"==typeof O)if(O<0)D+=Re(l[h-O]);else{const B=O>>>2;switch(3&O){case 1:const J=u[++N],re=u[++N],De=a.data[B];"string"==typeof De?q0(l[Zt],l[B],null,De,J,D,re):Rs(a,De,l,J,D,l[Zt],re,!1);break;case 0:const ze=l[B];null!==ze&&Xp(l[Zt],ze,D);break;case 2:wy(a,Fg(a,B),l,D);break;case 3:Vf(a,Fg(a,B),h,l)}}}}else{const D=u[m+1];if(D>0&&3==(3&D)){const O=Fg(a,D>>>2);l[O.currentCaseLViewIndex]<0&&Vf(a,O,h,l)}}m+=T}}function Vf(a,l,u,h){let p=h[l.currentCaseLViewIndex];if(null!==p){let m=vy;p<0&&(p=h[l.currentCaseLViewIndex]=~p,m=-1),by(a,h,l.update[p],u,m)}}function wy(a,l,u,h){const p=function Ug(a,l){let u=a.cases.indexOf(l);if(-1===u)switch(a.type){case 1:{const h=function bE(a,l){const u=yE(l)(parseInt(a,10)),h=bb[u];return void 0!==h?h:"other"}(l,function Tu(){return wb}());u=a.cases.indexOf(h),-1===u&&"other"!==h&&(u=a.cases.indexOf("other"));break}case 0:u=a.cases.indexOf("other")}return-1===u?null:u}(l,h);if(Db(l,u)!==p&&(Yd(a,l,u),u[l.currentCaseLViewIndex]=null===p?null:~p,null!==p)){const b=u[l.anchorIdx];b&&TE(a,l.create[p],u,b)}}function Yd(a,l,u){let h=Db(l,u);if(null!==h){const p=l.remove[h];for(let m=0;m<p.length;m++){const b=p[m];if(b>0){const T=Xo(b,u);null!==T&&kd(u[Zt],T)}else Yd(a,Fg(a,~b),u)}}}function Sb(){const a=[];let u,h,l=-1;function m(T,D){l=0;const N=Db(T,D);h=null!==N?T.remove[N]:en}function b(){if(l<h.length){const T=h[l++];return T>0?u[T]:(a.push(l,h),m(u[st].data[~T],u),b())}return 0===a.length?null:(h=a.pop(),l=a.pop(),b())}return function p(T,D){for(u=D;a.length;)a.pop();return m(T.value,D),b}}const Bg=/\ufffd(\d+):?\d*\ufffd/gi,Ji=/\ufffd(\d+)\ufffd/,Sx=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Cy="\ufffd",Ix=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,l2=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Jd=/\uE500/g;function Hg(a,l,u,h,p,m,b){const T=Cg(a,h,1,null);let D=T<<dr.SHIFT,N=Lc();l===N&&(N=null),null===N&&(D|=dr.APPEND_EAGERLY),b&&(D|=dr.COMMENT,function Ed(a){void 0===Jp&&(Jp=a())}(Sb)),p.push(D,null===m?"":m);const O=V_(a,T,b?32:1,null===m?"":m,null);vx(u,O);const B=O.index;return ki(O,!1),null!==N&&l!==N&&function bx(a,l){let u=a.insertBeforeIndex;null===u?(Ki(Cb,yx),u=a.insertBeforeIndex=[null,l]):(function tt(a,l,u){a!=l&&se(u,a,l,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(l))}(N,B),O}function Ty(a,l,u,h,p,m,b){const T=b.match(Bg),D=Hg(a,l,u,m,h,T?null:b,!1);T&&Qd(p,b,D.index,null,0,null)}function Qd(a,l,u,h,p,m){const b=a.length,T=b+1;a.push(null,null);const D=b+2,N=l.split(Bg);let O=0;for(let B=0;B<N.length;B++){const J=N[B];if(1&B){const re=p+parseInt(J,10);a.push(-1-re),O|=SE(re)}else""!==J&&a.push(J)}return a.push(u<<2|(h?1:0)),h&&a.push(h,m),a[b]=O,a[T]=a.length-D,O}function SE(a){return 1<<Math.min(a,31)}function xb(a){let l,m,u="",h=0,p=!1;for(;null!==(l=Ix.exec(a));)p?l[0]===`${Cy}/*${m}${Cy}`&&(h=l.index,p=!1):(u+=a.substring(h,l.index+l[0].length),m=l[1],p=!0);return u+=a.slice(h),u}function kb(a,l,u,h,p,m){let b=0;const T={type:p.type,currentCaseLViewIndex:Cg(a,l,1,null),anchorIdx:m,cases:[],create:[],remove:[],update:[]};(function Rb(a,l,u){a.push(SE(l.mainBinding),2,-1-l.mainBinding,u<<2|2)})(u,p,m),function Eb(a,l,u){const h=a.data[l];null===h?a.data[l]=u:h.value=u}(a,m,T);const D=p.values;for(let N=0;N<D.length;N++){const O=D[N],B=[];for(let J=0;J<O.length;J++){const re=O[J];if("string"!=typeof re){const De=B.push(re)-1;O[J]=`\x3c!--\ufffd${De}\ufffd--\x3e`}}b=Rx(a,T,l,u,h,p.cases[N],O.join(""),B)|b}b&&function Mx(a,l,u){a.push(l,1,u<<2|3)}(u,b,m)}function kx(a){const l=[],u=[];let h=1,p=0;const m=IE(a=a.replace(Sx,function(b,T,D){return h="select"===D?0:1,p=parseInt(T.slice(1),10),""}));for(let b=0;b<m.length;){let T=m[b++].trim();1===h&&(T=T.replace(/\s*(?:=)?(\w+)\s*/,"$1")),T.length&&l.push(T);const D=IE(m[b++]);l.length>u.length&&u.push(D)}return{type:h,mainBinding:p,cases:l,values:u}}function IE(a){if(!a)return[];let l=0;const u=[],h=[],p=/[{}]/g;let m;for(p.lastIndex=0;m=p.exec(a);){const T=m.index;if("}"==m[0]){if(u.pop(),0==u.length){const D=a.substring(l,T);Sx.test(D)?h.push(kx(D)):h.push(D),l=T+1}}else{if(0==u.length){const D=a.substring(l,T);h.push(D),l=T+1}u.push("{")}}const b=a.substring(l);return h.push(b),h}function Rx(a,l,u,h,p,m,b,T){const D=[],N=[],O=[];l.cases.push(m),l.create.push(D),l.remove.push(N),l.update.push(O);const J=lg(hf()).getInertBodyElement(b),re=T1(J)||J;return re?Dy(a,l,u,h,D,N,O,re,p,T,0):0}function Dy(a,l,u,h,p,m,b,T,D,N,O){let B=0,J=T.firstChild;for(;J;){const re=Cg(a,u,1,null);switch(J.nodeType){case Node.ELEMENT_NODE:const De=J,ze=De.tagName.toLowerCase();if(S_.hasOwnProperty(ze)){Sy(p,Bf,ze,D,re),a.data[re]=ze;const Le=De.attributes;for(let $t=0;$t<Le.length;$t++){const hr=Le.item($t),Xn=hr.name.toLowerCase();hr.value.match(Bg)?ug.hasOwnProperty(Xn)&&Qd(b,hr.value,re,hr.name,0,I_[Xn]?ec:null):Ob(p,re,hr)}B=Dy(a,l,u,h,p,m,b,J,re,N,O+1)|B,Ox(m,re,O)}break;case Node.TEXT_NODE:const rt=J.textContent||"",ht=rt.match(Bg);Sy(p,null,ht?"":rt,D,re),Ox(m,re,O),ht&&(B=Qd(b,rt,re,null,0,null)|B);break;case Node.COMMENT_NODE:const Ot=Ji.exec(J.textContent||"");if(Ot){const $t=N[parseInt(Ot[1],10)];Sy(p,Wd,"",D,re),kb(a,u,h,D,$t,re),c2(m,re,O)}}J=J.nextSibling}return B}function Ox(a,l,u){0===u&&a.push(l)}function c2(a,l,u){0===u&&(a.push(~l),a.push(l))}function Sy(a,l,u,h,p){null!==l&&a.push(l),a.push(u,p,function s2(a,l,u){return a|l<<17|u<<1}(0,h,p))}function Ob(a,l,u){a.push(l<<1|1,u.name,u.value)}function kE(a,l,u=-1){const h=sn(),p=we(),m=vn+a,b=Zs(h.consts,l),T=Lc();h.firstCreatePass&&function jg(a,l,u,h,p,m){const b=Lc(),T=[],D=[],N=[[]];p=function xx(a,l){if(function Nx(a){return-1===a}(l))return xb(a);{const u=a.indexOf(`:${l}${Cy}`)+2+l.toString().length,h=a.search(new RegExp(`${Cy}\\/\\*\\d+:${l}${Cy}`));return xb(a.substring(u,h))}}(p,m);const O=function Vg(a){return a.replace(Jd," ")}(p).split(l2);for(let B=0;B<O.length;B++){let J=O[B];if(1&B){const re=47===J.charCodeAt(0),ze=(J.charCodeAt(re?1:0),vn+Number.parseInt(J.substring(re?2:1)));if(re)N.shift(),ki(Lc(),!1);else{const rt=r2(a,N[0],ze);N.unshift([]),ki(rt,!0)}}else{const re=IE(J);for(let De=0;De<re.length;De++){let ze=re[De];if(1&De){const rt=ze;if("object"!=typeof rt)throw new Error(`Unable to parse ICU expression in "${p}" message.`);kb(a,u,D,l,rt,Hg(a,b,N[0],u,T,"",!0).index)}else""!==ze&&Ty(a,b,N[0],T,D,u,ze)}}}a.data[h]={create:T,update:D}}(h,null===T?0:T.index,p,m,b,u);const D=h.data[m],O=v_(h,T===p[sr]?null:T,p);(function Dx(a,l,u,h){const p=a[Zt];for(let m=0;m<l.length;m++){const b=l[m++],T=l[m],N=(b&dr.APPEND_EAGERLY)===dr.APPEND_EAGERLY,O=b>>>dr.SHIFT;let B=a[O];null===B&&(B=a[O]=(b&dr.COMMENT)===dr.COMMENT?p.createComment(T):uu(p,T)),N&&null!==u&&ol(p,u,B,h,!1)}})(p,D.create,O,T&&8&T.type?p[T.index]:null),xl(!0)}function Fx(a,l,u){kE(a,l,u),function Pb(){xl(!1)}()}function RE(a){return function CE(a){a&&(vy|=1<<Math.min(Lg,31)),Lg++}(Mi(we(),ta(),a)),RE}function Lx(a){!function Ex(a,l,u){if(Lg>0){const h=a.data[u];by(a,l,Array.isArray(h)?h:h.update,Ri()-Lg-1,vy)}vy=0,Lg=0}(sn(),we(),a+vn)}function Fb(a,l,u,h,p){if(a=ee(a),Array.isArray(a))for(let m=0;m<a.length;m++)Fb(a[m],l,u,h,p);else{const m=sn(),b=we();let T=rc(a)?a:ee(a.provide),D=D0(a);const N=qr(),O=1048575&N.providerIndexes,B=N.directiveStart,J=N.providerIndexes>>20;if(rc(a)||!a.multi){const re=new To(D,p,If),De=uc(T,l,p?O:O+J,B);-1===De?(jl(el(N,b),m,T),Iy(m,a,l.length),l.push(T),N.directiveStart++,N.directiveEnd++,p&&(N.providerIndexes+=1048576),u.push(re),b.push(re)):(u[De]=re,b[De]=re)}else{const re=uc(T,l,O+J,B),De=uc(T,l,O,O+J),rt=De>=0&&u[De];if(p&&!rt||!p&&!(re>=0&&u[re])){jl(el(N,b),m,T);const ht=function f2(a,l,u,h,p){const m=new To(a,u,If);return m.multi=[],m.index=l,m.componentProviders=0,Lb(m,p,h&&!u),m}(p?Gg:Bx,u.length,p,h,D);!p&&rt&&(u[De].providerFactory=ht),Iy(m,a,l.length,0),l.push(T),N.directiveStart++,N.directiveEnd++,p&&(N.providerIndexes+=1048576),u.push(ht),b.push(ht)}else Iy(m,a,re>-1?re:De,Lb(u[p?De:re],D,!p&&h));!p&&h&&rt&&u[De].componentProviders++}}}function Iy(a,l,u,h){const p=rc(l),m=function k_(a){return!!a.useClass}(l);if(p||m){const D=(m?ee(l.useClass):l).prototype.ngOnDestroy;if(D){const N=a.destroyHooks||(a.destroyHooks=[]);if(!p&&l.multi){const O=N.indexOf(u);-1===O?N.push(u,[h,D]):N[O+1].push(h,D)}else N.push(u,D)}}}function Lb(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function uc(a,l,u,h){for(let p=u;p<h;p++)if(l[p]===a)return p;return-1}function Bx(a,l,u,h){return Ub(this.multi,[])}function Gg(a,l,u,h){const p=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,T=As(u,u[st],this.providerFactory.index,h);m=T.slice(0,b),Ub(p,m);for(let D=b;D<T.length;D++)m.push(T[D])}else m=[],Ub(p,m);return m}function Ub(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function Bb(a,l=[]){return u=>{u.providersResolver=(h,p)=>function OE(a,l,u){const h=sn();if(h.firstCreatePass){const p=Ni(a);Fb(u,h.data,h.blueprint,p,!0),Fb(l,h.data,h.blueprint,p,!1)}}(h,p?p(a):a,l)}}class jf{}class Vb{}function Vx(a,l){return new Ay(a,l??null)}class Ay extends jf{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new z_(this);const h=ei(l);this._bootstrapComponents=cl(h.bootstrap),this._r3Injector=L0(l,u,[{provide:jf,useValue:this},{provide:wf,useValue:this.componentFactoryResolver}],ye(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class jb extends Vb{constructor(l){super(),this.moduleType=l}create(l){return new Ay(this.moduleType,l)}}class ME extends jf{constructor(l,u,h){super(),this.componentFactoryResolver=new z_(this),this.instance=null;const p=new k1([...l,{provide:jf,useValue:this},{provide:wf,useValue:this.componentFactoryResolver}],u||O_(),h,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function Hb(a,l,u=null){return new ME(a,l,u).injector}let dc=(()=>{class a{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=yf(0,u.type),p=h.length>0?Hb([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,p)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=Qe({token:a,providedIn:"environment",factory:()=>new a($(Pd))}),a})();function PE(a){a.getStandaloneInjector=l=>l.get(dc).getOrCreateStandaloneInjector(a)}function Zb(a,l,u,h){return ZE(we(),_r(),a,l,u,h)}function Su(a,l,u,h,p){return function zb(a,l,u,h,p,m,b){const T=l+u;return _u(a,T,p,m)?va(a,T+2,b?h.call(b,p,m):h(p,m)):Hf(a,T+2)}(we(),_r(),a,l,u,h,p)}function HE(a,l,u,h,p,m){return function qE(a,l,u,h,p,m,b,T){const D=l+u;return function no(a,l,u,h,p){const m=_u(a,l,u,h);return Mi(a,l+2,p)||m}(a,D,p,m,b)?va(a,D+3,T?h.call(T,p,m,b):h(p,m,b)):Hf(a,D+3)}(we(),_r(),a,l,u,h,p,m)}function Hf(a,l){const u=a[l];return u===jt?void 0:u}function ZE(a,l,u,h,p,m){const b=l+u;return Mi(a,b,p)?va(a,b+1,m?h.call(m,p):h(p)):Hf(a,b+1)}function Kb(a,l){const u=sn();let h;const p=a+vn;u.firstCreatePass?(h=function Wx(a,l){if(l)for(let u=l.length-1;u>=0;u--){const h=l[u];if(a===h.name)return h}}(l,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks??(u.destroyHooks=[])).push(p,h.onDestroy)):h=u.data[p];const m=h.factory||(h.factory=Yo(h.type)),b=Bn(If);try{const T=Qa(!1),D=m();return Qa(T),function ZN(a,l,u,h){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=h}(u,we(),p,D),D}finally{Bn(b)}}function Yx(a,l,u){const h=a+vn,p=we(),m=ea(p,h);return function ky(a,l){return a[st].data[l].pure}(p,h)?ZE(p,_r(),l,m.transform,u,m):m.transform(u)}function KE(a){return l=>{setTimeout(a,void 0,l)}}const hc=class m2 extends s.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,h){let p=l,m=u||(()=>null),b=h;if(l&&"object"==typeof l){const D=l;p=D.next?.bind(D),m=D.error?.bind(D),b=D.complete?.bind(D)}this.__isAsync&&(m=KE(m),p&&(p=KE(p)),b&&(b=KE(b)));const T=super.subscribe({next:p,error:m,complete:b});return l instanceof te.w0&&l.add(T),T}};function _2(){return this._results[Symbol.iterator]()}class YE{get changes(){return this._changes||(this._changes=new hc)}constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=YE.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=_2)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const h=this;h.dirty=!1;const p=function Oi(a){return a.flat(Number.POSITIVE_INFINITY)}(l);(this._changesDetected=!function bd(a,l,u){if(a.length!==l.length)return!1;for(let h=0;h<a.length;h++){let p=a[h],m=l[h];if(u&&(p=u(p),m=u(m)),m!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ry=(()=>{class a{}return a.__NG_ELEMENT_ID__=Oy,a})();const JE=Ry,Qx=class extends JE{constructor(l,u,h){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(l,u){const h=this._declarationTContainer.tView,p=B_(this._declarationLView,h,l,16,null,h.declTNode,null,null,null,null,u||null);p[La]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[Zi];return null!==b&&(p[Zi]=b.createEmbeddedView(h)),_a(h,p,l),new Nf(p)}};function Oy(){return $f(qr(),we())}function $f(a,l){return 4&a.type?new Qx(l,a,ic(a,l)):null}let Fo=(()=>{class a{}return a.__NG_ELEMENT_ID__=y2,a})();function y2(){return Jb(qr(),we())}const Xx=Fo,QE=class extends Xx{constructor(l,u,h){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=h}get element(){return ic(this._hostTNode,this._hostLView)}get injector(){return new hs(this._hostTNode,this._hostLView)}get parentInjector(){const l=qc(this._hostTNode,this._hostLView);if(pd(l)){const u=Gc(l,this._hostLView),h=Fl(l);return new hs(u[st].data[h+8],u)}return new hs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=XE(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-ii}createEmbeddedView(l,u,h){let p,m;"number"==typeof h?p=h:null!=h&&(p=h.index,m=h.injector);const b=l.createEmbeddedView(u||{},m);return this.insert(b,p),b}createComponent(l,u,h,p,m){const b=l&&!function tu(a){return"function"==typeof a}(l);let T;if(b)T=u;else{const B=u||{};T=B.index,h=B.injector,p=B.projectableNodes,m=B.environmentInjector||B.ngModuleRef}const D=b?l:new Ud(dn(l)),N=h||this.parentInjector;if(!m&&null==D.ngModule){const J=(b?N:this.parentInjector).get(Pd,null);J&&(m=J)}const O=D.create(N,p,void 0,m);return this.insert(O.hostView,T),O}insert(l,u){const h=l._lView,p=h[st];if(function Oc(a){return zi(a[kn])}(h)){const O=this.indexOf(l);if(-1!==O)this.detach(O);else{const B=h[kn],J=new QE(B,B[sr],B[kn]);J.detach(J.indexOf(l))}}const m=this._adjustIndex(u),b=this._lContainer;!function u0(a,l,u,h){const p=ii+h,m=u.length;h>0&&(u[p-1][gi]=l),h<m-ii?(l[gi]=u[p],nu(u,ii+h,l)):(u.push(l),l[gi]=null),l[kn]=u;const b=l[La];null!==b&&u!==b&&function d0(a,l){const u=a[ri];l[ni]!==l[kn][kn][ni]&&(a[Eh]=!0),null===u?a[ri]=[l]:u.push(l)}(b,l);const T=l[Zi];null!==T&&T.insertView(a),l[Vt]|=64}(p,h,b,m);const T=No(m,b),D=h[Zt],N=eo(D,b[Ua]);return null!==N&&function l0(a,l,u,h,p,m){h[Gi]=p,h[sr]=l,hu(a,h,u,1,p,m)}(p,b[sr],D,h,N,T),l.attachToViewContainerRef(),nu(Yb(b),m,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=XE(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),h=tg(this._lContainer,u);h&&(Gl(Yb(this._lContainer),u),rf(h[st],h))}detach(l){const u=this._adjustIndex(l,-1),h=tg(this._lContainer,u);return h&&null!=Gl(Yb(this._lContainer),u)?new Nf(h):null}_adjustIndex(l,u=0){return l??this.length+u}};function XE(a){return a[Wo]}function Yb(a){return a[Wo]||(a[Wo]=[])}function Jb(a,l){let u;const h=l[a.index];if(zi(h))u=h;else{let p;if(8&a.type)p=Jn(h);else{const m=l[Zt];p=m.createComment("");const b=ar(a,l);ol(m,eo(m,b),p,function af(a,l){return a.nextSibling(l)}(m,b),!1)}l[a.index]=u=hT(h,l,p,a),G_(l,u)}return new QE(u,a,l)}class Gf{constructor(l){this.queryList=l,this.matches=null}clone(){return new Gf(this.queryList)}setDirty(){this.queryList.setDirty()}}class pl{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const h=null!==l.contentQueries?l.contentQueries[0]:u.length,p=[];for(let m=0;m<h;m++){const b=u.getByIndex(m);p.push(this.queries[b.indexInDeclarationView].clone())}return new pl(p)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==rD(l,u).matches&&this.queries[u].setDirty()}}class ek{constructor(l,u,h=null){this.predicate=l,this.flags=u,this.read=h}}class Qb{constructor(l=[]){this.queries=l}elementStart(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(l,p);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new Qb(u):null}template(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Xb{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new Xb(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const m=h[p];this.matchTNodeWithReadOption(l,u,eD(u,m)),this.matchTNodeWithReadOption(l,u,oa(u,l,m,!1,!1))}else h===Ry?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,oa(u,l,h,!1,!1))}matchTNodeWithReadOption(l,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===Cf||p===Fo||p===Ry&&4&u.type)this.addMatch(u.index,-2);else{const m=oa(u,l,p,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function eD(a,l){const u=a.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===l)return u[h+1];return null}function nD(a,l,u,h){return-1===u?function tD(a,l){return 11&a.type?ic(a,l):4&a.type?$f(a,l):null}(l,a):-2===u?function tk(a,l,u){return u===Cf?ic(l,a):u===Ry?$f(l,a):u===Fo?Jb(l,a):void 0}(a,l,h):As(a,a[st],u,l)}function Zf(a,l,u,h){const p=l[Zi].queries[h];if(null===p.matches){const m=a.data,b=u.matches,T=[];for(let D=0;D<b.length;D+=2){const N=b[D];T.push(N<0?null:nD(l,m[N],b[D+1],u.metadata.read))}p.matches=T}return p.matches}function Er(a,l,u,h){const p=a.queries.getByIndex(u),m=p.matches;if(null!==m){const b=Zf(a,l,p,u);for(let T=0;T<m.length;T+=2){const D=m[T];if(D>0)h.push(b[T/2]);else{const N=m[T+1],O=l[-D];for(let B=ii;B<O.length;B++){const J=O[B];J[La]===J[kn]&&Er(J[st],J,N,h)}if(null!==O[ri]){const B=O[ri];for(let J=0;J<B.length;J++){const re=B[J];Er(re[st],re,N,h)}}}}}return h}function My(a){const l=we(),u=sn(),h=Rh();dd(h+1);const p=rD(u,h);if(a.dirty&&function Sl(a){return 4==(4&a[Vt])}(l)===(2==(2&p.metadata.flags))){if(null===p.matches)a.reset([]);else{const m=p.crossesNgTemplate?Er(u,l,h,[]):Zf(u,l,p,h);a.reset(m,pg),a.notifyOnChanges()}return!0}return!1}function Py(a,l,u){const h=sn();h.firstCreatePass&&(rw(h,new ek(a,l,u),-1),2==(2&l)&&(h.staticViewQueries=!0)),nw(h,we(),l)}function zg(a,l,u,h){const p=sn();if(p.firstCreatePass){const m=qr();rw(p,new ek(l,u,h),m.index),function nk(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(p,a),2==(2&u)&&(p.staticContentQueries=!0)}nw(p,we(),u)}function ew(){return function tw(a,l){return a[Zi].queries[l].queryList}(we(),Rh())}function nw(a,l,u){const h=new YE(4==(4&u));mN(a,l,h,h.destroy),null===l[Zi]&&(l[Zi]=new pl),l[Zi].queries.push(new Gf(h))}function rw(a,l,u){null===a.queries&&(a.queries=new Qb),a.queries.track(new Xb(l,u))}function rD(a,l){return a.queries.getByIndex(l)}function iD(a,l){return $f(a,l)}function oD(a){return!!ei(a)}function Vy(...a){}const Li=new rn("Application Initializer");let jy=(()=>{class a{constructor(u){this.appInits=u,this.resolve=Vy,this.reject=Vy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const m=this.appInits[p]();if(tb(m))u.push(m);else if(bu(m)){const b=new Promise((T,D)=>{m.subscribe({complete:T,error:D})});u.push(b)}}Promise.all(u).then(()=>{h()}).catch(p=>{this.reject(p)}),0===u.length&&h(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)($(Li,8))},a.\u0275prov=Qe({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const lw=new rn("AppId",{providedIn:"root",factory:function _D(){return`${cw()}${cw()}${cw()}`}});function cw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yD=new rn("Platform Initializer"),vD=new rn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),bk=new rn("AnimationModuleType");let wk=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Qe({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const Hy=new rn("LocaleId",{providedIn:"root",factory:()=>z(Hy,yt.Optional|yt.SkipSelf)||function Ck(){return typeof $localize<"u"&&$localize.locale||zd}()}),$y=new rn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ek{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let bD=(()=>{class a{compileModuleSync(u){return new jb(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=cl(ei(u).declarations).reduce((b,T)=>{const D=dn(T);return D&&b.push(new Ud(D)),b},[]);return new Ek(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Qe({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Iu=(()=>Promise.resolve(0))();function nh(a){typeof Zone>"u"?Iu.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class hi{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hc(!1),this.onMicrotaskEmpty=new hc(!1),this.onStable=new hc(!1),this.onError=new hc(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function CD(){let a=yn.requestAnimationFrame,l=yn.cancelAnimationFrame;if(typeof Zone<"u"&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function Rt(a){const l=()=>{!function TD(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(yn,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,ED(a),a.isCheckStableRunning=!0,pw(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),ED(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,m,b,T)=>{try{return Sk(a),u.invokeTask(p,m,b,T)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||a.shouldCoalesceRunChangeDetection)&&l(),Ik(a)}},onInvoke:(u,h,p,m,b,T,D)=>{try{return Sk(a),u.invoke(p,m,b,T,D)}finally{a.shouldCoalesceRunChangeDetection&&l(),Ik(a)}},onHasTask:(u,h,p,m)=>{u.hasTask(p,m),h===p&&("microTask"==m.change?(a._hasPendingMicrotasks=m.microTask,ED(a),pw(a)):"macroTask"==m.change&&(a.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,p,m)=>(u.handleError(p,m),a.runOutsideAngular(()=>a.onError.emit(m)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hi.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(hi.isInAngularZone())throw new be(909,!1)}run(l,u,h){return this._inner.run(l,u,h)}runTask(l,u,h,p){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+p,l,fw,Vy,Vy);try{return m.runTask(b,u,h)}finally{m.cancelTask(b)}}runGuarded(l,u,h){return this._inner.runGuarded(l,u,h)}runOutsideAngular(l){return this._outer.run(l)}}const fw={};function pw(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function ED(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function Sk(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function Ik(a){a._nesting--,pw(a)}class k2{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hc,this.onMicrotaskEmpty=new hc,this.onStable=new hc,this.onError=new hc}run(l,u,h){return l.apply(u,h)}runGuarded(l,u,h){return l.apply(u,h)}runOutsideAngular(l){return l()}runTask(l,u,h,p){return l.apply(u,h)}}const Ak=new rn(""),Nk=new rn("");let gw,R2=(()=>{class a{constructor(u,h,p){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,gw||(function kk(a){gw=a}(p),p.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hi.assertNotInAngularZone(),nh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())nh(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,p){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:p})}whenStable(u,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,p){return[]}}return a.\u0275fac=function(u){return new(u||a)($(hi),$(xk),$(Nk))},a.\u0275prov=Qe({token:a,factory:a.\u0275fac}),a})(),xk=(()=>{class a{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return gw?.findTestabilityInTree(this,u,h)??null}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Qe({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const fc=!1;let gl=null;const DD=new rn("AllowMultipleToken"),SD=new rn("PlatformDestroyListeners"),Rk=new rn("appBootstrapListener");class Pk{constructor(l,u){this.name=l,this.token=u}}function AD(a,l,u=[]){const h=`Platform: ${l}`,p=new rn(h);return(m=[])=>{let b=kD();if(!b||b.injector.get(DD,!1)){const T=[...u,...m,{provide:p,useValue:!0}];a?a(T):function Fk(a){if(gl&&!gl.get(DD,!1))throw new be(400,!1);gl=a;const l=a.get(Bk);(function ID(a){const l=a.get(yD,null);l&&l.forEach(u=>u())})(a)}(function Uk(a=[],l){return Ef.create({name:l,providers:[{provide:mu,useValue:"platform"},{provide:SD,useValue:new Set([()=>gl=null])},...a]})}(T,h))}return function ND(a){const l=kD();if(!l)throw new be(401,!1);return l}()}}function kD(){return gl?.get(Bk)??null}let Bk=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const p=function jk(a,l){let u;return u="noop"===a?new k2:("zone.js"===a?void 0:a)||new hi(l),u}(h?.ngZone,function Vk(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(h)),m=[{provide:hi,useValue:p}];return p.run(()=>{const b=Ef.create({providers:m,parent:this.injector,name:u.moduleType.name}),T=u.create(b),D=T.injector.get(gg,null);if(!D)throw new be(402,!1);return p.runOutsideAngular(()=>{const N=p.onError.subscribe({next:O=>{D.handleError(O)}});T.onDestroy(()=>{Wf(this._modules,T),N.unsubscribe()})}),function RD(a,l,u){try{const h=u();return tb(h)?h.catch(p=>{throw l.runOutsideAngular(()=>a.handleError(p)),p}):h}catch(h){throw l.runOutsideAngular(()=>a.handleError(h)),h}}(D,p,()=>{const N=T.injector.get(jy);return N.runInitializers(),N.donePromise.then(()=>(Yi(T.injector.get(Hy,zd)||zd),this._moduleDoBootstrap(T),T))})})}bootstrapModule(u,h=[]){const p=mw({},h);return function Ok(a,l,u){const h=new jb(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,p))}_moduleDoBootstrap(u){const h=u.injector.get(gn);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new be(-403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(SD,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)($(Ef))},a.\u0275prov=Qe({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function mw(a,l){return Array.isArray(l)?l.reduce(mw,a):{...a,...l}}let gn=(()=>{class a{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,h,p){this._zone=u,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new L.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),b=new L.y(T=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{hi.assertNotInAngularZone(),nh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{hi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{D.unsubscribe(),N.unsubscribe()}});this.isStable=(0,le.T)(m,b.pipe((0,oe.B)()))}bootstrap(u,h){const p=u instanceof O1;if(!this._injector.get(jy).done){!p&&js(u);throw new be(405,fc)}let b;b=p?u:this._injector.get(wf).resolveComponentFactory(u),this.componentTypes.push(b.componentType);const T=function Mk(a){return a.isBoundToModule}(b)?void 0:this._injector.get(jf),N=b.create(Ef.NULL,[],h||b.selector,T),O=N.location.nativeElement,B=N.injector.get(Ak,null);return B?.registerApplication(O),N.onDestroy(()=>{this.detachView(N.hostView),Wf(this.components,N),B?.unregisterApplication(O)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;Wf(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const h=this._injector.get(Rk,[]);h.push(...this._bootstrapListeners),h.forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Wf(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new be(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(u){return new(u||a)($(hi),$(Pd),$(gg))},a.\u0275prov=Qe({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Wf(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}function $k(){return!1}let Gk=(()=>{class a{}return a.__NG_ELEMENT_ID__=Zk,a})();function Zk(a){return function qk(a,l,u){if(ds(a)&&!u){const h=mr(a.index,l);return new Nf(h,h)}return 47&a.type?new Nf(l[ni],l):null}(qr(),we(),16==(16&a))}class Wk{constructor(){}supports(l){return Vd(l)}create(l){return new Kk(l)}}const ih=(a,l)=>l;class Kk{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||ih}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,h=this._removalsHead,p=0,m=null;for(;u||h;){const b=!h||u&&u.currentIndex<UD(h,p,m)?u:h,T=UD(b,p,m),D=b.currentIndex;if(b===h)p--,h=h._nextRemoved;else if(u=u._next,null==b.previousIndex)p++;else{m||(m=[]);const N=T-p,O=D-p;if(N!=O){for(let J=0;J<N;J++){const re=J<m.length?m[J]:m[J]=0,De=re+J;O<=De&&De<N&&(m[J]=re+1)}m[b.previousIndex]=O-N}}T!==D&&l(b,T,D)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Vd(l))throw new be(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let p,m,b,u=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let T=0;T<this.length;T++)m=l[T],b=this._trackByFn(T,m),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,m,b,T)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,b,T),h=!0),u=u._next}else p=0,function Sg(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[Symbol.iterator]();let h;for(;!(h=u.next()).done;)l(h.value)}}(l,T=>{b=this._trackByFn(p,T),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,T,b,p)),Object.is(u.item,T)||this._addIdentityChange(u,T)):(u=this._mismatch(u,T,b,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,h,p){let m;return null===l?m=this._itTail:(m=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,m,p)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,m,p)):l=this._addAfter(new Yk(u,h),m,p),l}_verifyReinsertion(l,u,h,p){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?l=this._reinsertAfter(m,l._prev,p):l.currentIndex!=p&&(l.currentIndex=p,this._addToMoves(l,p)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const p=l._prevRemoved,m=l._nextRemoved;return null===p?this._removalsHead=m:p._nextRemoved=m,null===m?this._removalsTail=p:m._prevRemoved=p,this._insertAfter(l,u,h),this._addToMoves(l,h),l}_moveAfter(l,u,h){return this._unlink(l),this._insertAfter(l,u,h),this._addToMoves(l,h),l}_addAfter(l,u,h){return this._insertAfter(l,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,h){const p=null===u?this._itHead:u._next;return l._next=p,l._prev=u,null===p?this._itTail=l:p._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new LD),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,h=l._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new LD),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class Yk{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Jk{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const u=l._prevDup,h=l._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class LD{constructor(){this.map=new Map}put(l){const u=l.trackById;let h=this.map.get(u);h||(h=new Jk,this.map.set(u,h)),h.add(l)}get(l,u){const p=this.map.get(l);return p?p.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function UD(a,l,u){const h=a.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+l+p}class BD{constructor(){}supports(l){return l instanceof Map||J_(l)}create(){return new H2}}class H2{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||J_(l)))throw new be(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const h=l._prev;return u._next=l,u._prev=h,l._prev=u,h&&(h._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const p=this._records.get(l);this._maybeAddToChanges(p,u);const m=p._prev,b=p._next;return m&&(m._next=b),b&&(b._prev=m),p._next=null,p._prev=null,p}const h=new VD(l);return this._records.set(l,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(h=>u(l[h],h))}}class VD{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Xg(){return new Cw([new Wk])}let Cw=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(null!=h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||Xg()),deps:[[a,new S,new su]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(null!=h)return h;throw new be(901,!1)}}return a.\u0275prov=Qe({token:a,providedIn:"root",factory:Xg}),a})();function Ci(){return new Wy([new BD])}let Wy=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||Ci()),deps:[[a,new S,new su]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(h)return h;throw new be(901,!1)}}return a.\u0275prov=Qe({token:a,providedIn:"root",factory:Ci}),a})();const jD=AD(null,"core",[]);let sh=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)($(gn))},a.\u0275mod=Pa({type:a}),a.\u0275inj=Dt({}),a})();function Kf(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}function Yy(a,l){const u=dn(a),h=l.elementInjector||O_();return new Ud(u).create(h,l.projectableNodes,l.hostElement,l.environmentInjector)}},3942:(mt,Ae,U)=>{U.d(Ae,{Z:()=>Je});var s=U(2090),te=U(4859),L=U(9681),le=U(1877);class oe{constructor(be,Oe){this._delegate=be,this.firebase=Oe,(0,L._addComponent)(be,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this._delegate.automaticDataCollectionEnabled=be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(be=>{this._delegate.checkDestroyed(),be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(be,Oe=L._DEFAULT_ENTRY_NAME){var Re;this._delegate.checkDestroyed();const $e=this._delegate.container.getProvider(be);return!$e.isInitialized()&&"EXPLICIT"===(null===(Re=$e.getComponent())||void 0===Re?void 0:Re.instantiationMode)&&$e.initialize(),$e.getImmediate({identifier:Oe})}_removeServiceInstance(be,Oe=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(be).clearInstance(Oe)}_addComponent(be){(0,L._addComponent)(this._delegate,be)}_addOrOverwriteComponent(be){(0,L._addOrOverwriteComponent)(this._delegate,be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new s.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function _e(){const ut=function ye(ut){const be={},Oe={__esModule:!0,initializeApp:function xe(Ve,G={}){const Ee=L.initializeApp(Ve,G);if((0,s.r3)(be,Ee.name))return be[Ee.name];const We=new ut(Ee,Oe);return be[Ee.name]=We,We},app:$e,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Me(Ve){const G=Ve.name,Ee=G.replace("-compat","");if(L._registerComponent(Ve)&&"PUBLIC"===Ve.type){const We=(tt=$e())=>{if("function"!=typeof tt[Ee])throw Ce.create("invalid-app-argument",{appName:G});return tt[Ee]()};void 0!==Ve.serviceProps&&(0,s.ZB)(We,Ve.serviceProps),Oe[Ee]=We,ut.prototype[Ee]=function(...tt){return this._getService.bind(this,G).apply(this,Ve.multipleInstances?tt:[])}}return"PUBLIC"===Ve.type?Oe[Ee]:null},removeApp:function Re(Ve){delete be[Ve]},useAsService:function qe(Ve,G){return"serverAuth"===G?null:G},modularAPIs:L}};function $e(Ve){if(!(0,s.r3)(be,Ve=Ve||L._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:Ve});return be[Ve]}return Oe.default=Oe,Object.defineProperty(Oe,"apps",{get:function Se(){return Object.keys(be).map(Ve=>be[Ve])}}),$e.App=ut,Oe}(oe);return ut.INTERNAL=Object.assign(Object.assign({},ut.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function be(Oe){(0,s.ZB)(ut,Oe)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),ut}(),Z=new le.Yd("@firebase/app-compat");if((0,s.jU)()&&void 0!==self.firebase){Z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ut=self.firebase.SDK_VERSION;ut&&ut.indexOf("LITE")>=0&&Z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=q;!function ke(ut){(0,L.registerVersion)("@firebase/app-compat","0.1.32",ut)}()},9681:(mt,Ae,U)=>{U.r(Ae),U.d(Ae,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>pr,_DEFAULT_ENTRY_NAME:()=>ae,_addComponent:()=>Ge,_addOrOverwriteComponent:()=>He,_apps:()=>fe,_clearComponents:()=>Dt,_components:()=>se,_getProvider:()=>Qe,_registerComponent:()=>Ct,_removeServiceInstance:()=>Kt,deleteApp:()=>Si,getApp:()=>Pn,getApps:()=>Gn,initializeApp:()=>kr,onLog:()=>ls,registerVersion:()=>yt,setLogLevel:()=>Bs});var s=U(5861),te=U(4859),L=U(1877),le=U(2090),oe=U(8766);class ie{constructor(z){this.container=z}getPlatformInfoString(){return this.container.getProviders().map(K=>{if(function Ce(H){return"VERSION"===H.getComponent()?.type}(K)){const Ne=K.getImmediate();return`${Ne.library}/${Ne.version}`}return null}).filter(K=>K).join(" ")}}const ye="@firebase/app",q=new L.Yd("@firebase/app"),ae="[DEFAULT]",pe={[ye]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fe=new Map,se=new Map;function Ge(H,z){try{H.container.addComponent(z)}catch(K){q.debug(`Component ${z.name} failed to register with FirebaseApp ${H.name}`,K)}}function He(H,z){H.container.addOrOverwriteComponent(z)}function Ct(H){const z=H.name;if(se.has(z))return q.debug(`There were multiple attempts to register component ${z}.`),!1;se.set(z,H);for(const K of fe.values())Ge(K,H);return!0}function Qe(H,z){const K=H.container.getProvider("heartbeat").getImmediate({optional:!0});return K&&K.triggerHeartbeat(),H.container.getProvider(z)}function Kt(H,z,K=ae){Qe(H,z).clearInstance(K)}function Dt(){se.clear()}const ln=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class nn{constructor(z,K,Ne){this._isDeleted=!1,this._options=Object.assign({},z),this._config=Object.assign({},K),this._name=K.name,this._automaticDataCollectionEnabled=K.automaticDataCollectionEnabled,this._container=Ne,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(z){this.checkDestroyed(),this._automaticDataCollectionEnabled=z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(z){this._isDeleted=z}checkDestroyed(){if(this.isDeleted)throw ln.create("app-deleted",{appName:this._name})}}const pr="9.9.3";function kr(H,z={}){"object"!=typeof z&&(z={name:z});const K=Object.assign({name:ae,automaticDataCollectionEnabled:!1},z),Ne=K.name;if("string"!=typeof Ne||!Ne)throw ln.create("bad-app-name",{appName:String(Ne)});const Ye=fe.get(Ne);if(Ye){if((0,le.vZ)(H,Ye.options)&&(0,le.vZ)(K,Ye.config))return Ye;throw ln.create("duplicate-app",{appName:Ne})}const vt=new te.H0(Ne);for(const fn of se.values())vt.addComponent(fn);const En=new nn(H,K,vt);return fe.set(Ne,En),En}function Pn(H=ae){const z=fe.get(H);if(!z)throw ln.create("no-app",{appName:H});return z}function Gn(){return Array.from(fe.values())}function Si(H){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,s.Z)(function*(H){const z=H.name;fe.has(z)&&(fe.delete(z),yield Promise.all(H.container.getProviders().map(K=>K.delete())),H.isDeleted=!0)})).apply(this,arguments)}function yt(H,z,K){var Ne;let Ye=null!==(Ne=pe[H])&&void 0!==Ne?Ne:H;K&&(Ye+=`-${K}`);const vt=Ye.match(/\s|\//),En=z.match(/\s|\//);if(vt||En){const fn=[`Unable to register library "${Ye}" with version "${z}":`];return vt&&fn.push(`library name "${Ye}" contains illegal characters (whitespace or "/")`),vt&&En&&fn.push("and"),En&&fn.push(`version name "${z}" contains illegal characters (whitespace or "/")`),void q.warn(fn.join(" "))}Ct(new te.wA(`${Ye}-version`,()=>({library:Ye,version:z}),"VERSION"))}function ls(H,z){if(null!==H&&"function"!=typeof H)throw ln.create("invalid-log-argument");(0,L.Am)(H,z)}function Bs(H){(0,L.Ub)(H)}const Bn="firebase-heartbeat-database",Xr=1,$i="firebase-heartbeat-store";let yn=null;function Tn(){return yn||(yn=(0,oe.X3)(Bn,Xr,{upgrade:(H,z)=>{0===z&&H.createObjectStore($i)}}).catch(H=>{throw ln.create("idb-open",{originalErrorMessage:H.message})})),yn}function xt(){return(xt=(0,s.Z)(function*(H){var z;try{return(yield Tn()).transaction($i).objectStore($i).get(Zn(H))}catch(K){if(K instanceof le.ZR)q.warn(K.message);else{const Ne=ln.create("idb-get",{originalErrorMessage:null===(z=K)||void 0===z?void 0:z.message});q.warn(Ne.message)}}})).apply(this,arguments)}function cs(H,z){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,s.Z)(function*(H,z){var K;try{const Ye=(yield Tn()).transaction($i,"readwrite");return yield Ye.objectStore($i).put(z,Zn(H)),Ye.done}catch(Ne){if(Ne instanceof le.ZR)q.warn(Ne.message);else{const Ye=ln.create("idb-set",{originalErrorMessage:null===(K=Ne)||void 0===K?void 0:K.message});q.warn(Ye.message)}}})).apply(this,arguments)}function Zn(H){return`${H.name}!${H.options.appId}`}class Ra{constructor(z){this.container=z,this._heartbeatsCache=null;const K=this.container.getProvider("app").getImmediate();this._storage=new Xt(K),this._heartbeatsCachePromise=this._storage.read().then(Ne=>(this._heartbeatsCache=Ne,Ne))}triggerHeartbeat(){var z=this;return(0,s.Z)(function*(){const Ne=z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ye=hn();if(null===z._heartbeatsCache&&(z._heartbeatsCache=yield z._heartbeatsCachePromise),z._heartbeatsCache.lastSentHeartbeatDate!==Ye&&!z._heartbeatsCache.heartbeats.some(vt=>vt.date===Ye))return z._heartbeatsCache.heartbeats.push({date:Ye,agent:Ne}),z._heartbeatsCache.heartbeats=z._heartbeatsCache.heartbeats.filter(vt=>{const En=new Date(vt.date).valueOf();return Date.now()-En<=2592e6}),z._storage.overwrite(z._heartbeatsCache)})()}getHeartbeatsHeader(){var z=this;return(0,s.Z)(function*(){if(null===z._heartbeatsCache&&(yield z._heartbeatsCachePromise),null===z._heartbeatsCache||0===z._heartbeatsCache.heartbeats.length)return"";const K=hn(),{heartbeatsToSend:Ne,unsentEntries:Ye}=function Ii(H,z=1024){const K=[];let Ne=H.slice();for(const Ye of H){const vt=K.find(En=>En.agent===Ye.agent);if(vt){if(vt.dates.push(Ye.date),Q(K)>z){vt.dates.pop();break}}else if(K.push({agent:Ye.agent,dates:[Ye.date]}),Q(K)>z){K.pop();break}Ne=Ne.slice(1)}return{heartbeatsToSend:K,unsentEntries:Ne}}(z._heartbeatsCache.heartbeats),vt=(0,le.L)(JSON.stringify({version:2,heartbeats:Ne}));return z._heartbeatsCache.lastSentHeartbeatDate=K,Ye.length>0?(z._heartbeatsCache.heartbeats=Ye,yield z._storage.overwrite(z._heartbeatsCache)):(z._heartbeatsCache.heartbeats=[],z._storage.overwrite(z._heartbeatsCache)),vt})()}}function hn(){return(new Date).toISOString().substring(0,10)}class Xt{constructor(z){this.app=z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,s.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var z=this;return(0,s.Z)(function*(){return(yield z._canUseIndexedDBPromise)&&(yield function Tt(H){return xt.apply(this,arguments)}(z.app))||{heartbeats:[]}})()}overwrite(z){var K=this;return(0,s.Z)(function*(){var Ne;if(yield K._canUseIndexedDBPromise){const vt=yield K.read();return cs(K.app,{lastSentHeartbeatDate:null!==(Ne=z.lastSentHeartbeatDate)&&void 0!==Ne?Ne:vt.lastSentHeartbeatDate,heartbeats:z.heartbeats})}})()}add(z){var K=this;return(0,s.Z)(function*(){var Ne;if(yield K._canUseIndexedDBPromise){const vt=yield K.read();return cs(K.app,{lastSentHeartbeatDate:null!==(Ne=z.lastSentHeartbeatDate)&&void 0!==Ne?Ne:vt.lastSentHeartbeatDate,heartbeats:[...vt.heartbeats,...z.heartbeats]})}})()}}function Q(H){return(0,le.L)(JSON.stringify({version:2,heartbeats:H})).length}!function $(H){Ct(new te.wA("platform-logger",z=>new ie(z),"PRIVATE")),Ct(new te.wA("heartbeat",z=>new Ra(z),"PRIVATE")),yt(ye,"0.7.31",H),yt(ye,"0.7.31","esm2017"),yt("fire-js","")}("")},4859:(mt,Ae,U)=>{U.d(Ae,{H0:()=>ye,wA:()=>L,zt:()=>oe});var s=U(5861),te=U(2090);class L{constructor(q,Z,ee){this.name=q,this.instanceFactory=Z,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const le="[DEFAULT]";class oe{constructor(q,Z){this.name=q,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const Z=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(Z)){const ee=new te.BH;if(this.instancesDeferred.set(Z,ee),this.isInitialized(Z)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:Z});Ke&&ee.resolve(Ke)}catch{}}return this.instancesDeferred.get(Z).promise}getImmediate(q){var Z;const ee=this.normalizeInstanceIdentifier(q?.identifier),Ke=null!==(Z=q?.optional)&&void 0!==Z&&Z;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(ke){if(Ke)return null;throw ke}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function Ce(_e){return"EAGER"===_e.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[Z,ee]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(Z);try{const ke=this.getOrInitializeService({instanceIdentifier:Ke});ee.resolve(ke)}catch{}}}}clearInstance(q=le){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,s.Z)(function*(){const Z=Array.from(q.instances.values());yield Promise.all([...Z.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...Z.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=le){return this.instances.has(q)}getOptions(q=le){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:Z={}}=q,ee=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:ee,options:Z});for(const[ke,Je]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(ke)&&Je.resolve(Ke);return Ke}onInit(q,Z){var ee;const Ke=this.normalizeInstanceIdentifier(Z),ke=null!==(ee=this.onInitCallbacks.get(Ke))&&void 0!==ee?ee:new Set;ke.add(q),this.onInitCallbacks.set(Ke,ke);const Je=this.instances.get(Ke);return Je&&q(Je,Ke),()=>{ke.delete(q)}}invokeOnInitCallbacks(q,Z){const ee=this.onInitCallbacks.get(Z);if(ee)for(const Ke of ee)try{Ke(q,Z)}catch{}}getOrInitializeService({instanceIdentifier:q,options:Z={}}){let ee=this.instances.get(q);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=q,_e===le?void 0:_e),options:Z}),this.instances.set(q,ee),this.instancesOptions.set(q,Z),this.invokeOnInitCallbacks(ee,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,ee)}catch{}var _e;return ee||null}normalizeInstanceIdentifier(q=le){return this.component?this.component.multipleInstances?q:le:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ye{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const Z=this.getProvider(q.name);if(Z.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);Z.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const Z=new oe(q,this);return this.providers.set(q,Z),Z}getProviders(){return Array.from(this.providers.values())}}},1877:(mt,Ae,U)=>{U.d(Ae,{Am:()=>_e,Ub:()=>ye,Yd:()=>Ce,in:()=>te});const s=[];var te=(()=>{return(q=te||(te={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",te;var q})();const L={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},le=te.INFO,oe={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},ie=(q,Z,...ee)=>{if(Z<q.logLevel)return;const Ke=(new Date).toISOString(),ke=oe[Z];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[ke](`[${Ke}]  ${q.name}:`,...ee)};class Ce{constructor(Z){this.name=Z,this._logLevel=le,this._logHandler=ie,this._userLogHandler=null,s.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in te))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?L[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...Z),this._logHandler(this,te.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...Z),this._logHandler(this,te.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,te.INFO,...Z),this._logHandler(this,te.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,te.WARN,...Z),this._logHandler(this,te.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...Z),this._logHandler(this,te.ERROR,...Z)}}function ye(q){s.forEach(Z=>{Z.setLogLevel(q)})}function _e(q,Z){for(const ee of s){let Ke=null;Z&&Z.level&&(Ke=L[Z.level]),ee.userLogHandler=null===q?null:(ke,Je,...ut)=>{const be=ut.map(Oe=>{if(null==Oe)return null;if("string"==typeof Oe)return Oe;if("number"==typeof Oe||"boolean"==typeof Oe)return Oe.toString();if(Oe instanceof Error)return Oe.message;try{return JSON.stringify(Oe)}catch{return null}}).filter(Oe=>Oe).join(" ");Je>=(Ke??ke.logLevel)&&q({level:te[Je].toLowerCase(),message:be,args:ut,type:ke.name})}}}},8766:(mt,Ae,U)=>{U.d(Ae,{Lj:()=>xe,X3:()=>$e});var s=U(5861);const te=(G,Ee)=>Ee.some(We=>G instanceof We);let L,le;const Ce=new WeakMap,ye=new WeakMap,_e=new WeakMap,q=new WeakMap,Z=new WeakMap;let ke={get(G,Ee,We){if(G instanceof IDBTransaction){if("done"===Ee)return ye.get(G);if("objectStoreNames"===Ee)return G.objectStoreNames||_e.get(G);if("store"===Ee)return We.objectStoreNames[1]?void 0:We.objectStore(We.objectStoreNames[0])}return Oe(G[Ee])},set:(G,Ee,We)=>(G[Ee]=We,!0),has:(G,Ee)=>G instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in G};function be(G){return"function"==typeof G?function ut(G){return G!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(G)?function(...Ee){return G.apply(Re(this),Ee),Oe(Ce.get(this))}:function(...Ee){return Oe(G.apply(Re(this),Ee))}:function(Ee,...We){const tt=G.call(Re(this),Ee,...We);return _e.set(tt,Ee.sort?Ee.sort():[Ee]),Oe(tt)}}(G):(G instanceof IDBTransaction&&function Ke(G){if(ye.has(G))return;const Ee=new Promise((We,tt)=>{const _t=()=>{G.removeEventListener("complete",nt),G.removeEventListener("error",xn),G.removeEventListener("abort",xn)},nt=()=>{We(),_t()},xn=()=>{tt(G.error||new DOMException("AbortError","AbortError")),_t()};G.addEventListener("complete",nt),G.addEventListener("error",xn),G.addEventListener("abort",xn)});ye.set(G,Ee)}(G),te(G,function oe(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(G,ke):G)}function Oe(G){if(G instanceof IDBRequest)return function ee(G){const Ee=new Promise((We,tt)=>{const _t=()=>{G.removeEventListener("success",nt),G.removeEventListener("error",xn)},nt=()=>{We(Oe(G.result)),_t()},xn=()=>{tt(G.error),_t()};G.addEventListener("success",nt),G.addEventListener("error",xn)});return Ee.then(We=>{We instanceof IDBCursor&&Ce.set(We,G)}).catch(()=>{}),Z.set(Ee,G),Ee}(G);if(q.has(G))return q.get(G);const Ee=be(G);return Ee!==G&&(q.set(G,Ee),Z.set(Ee,G)),Ee}const Re=G=>Z.get(G);function $e(G,Ee,{blocked:We,upgrade:tt,blocking:_t,terminated:nt}={}){const xn=indexedDB.open(G,Ee),xr=Oe(xn);return tt&&xn.addEventListener("upgradeneeded",rr=>{tt(Oe(xn.result),rr.oldVersion,rr.newVersion,Oe(xn.transaction))}),We&&xn.addEventListener("blocked",()=>We()),xr.then(rr=>{nt&&rr.addEventListener("close",()=>nt()),_t&&rr.addEventListener("versionchange",()=>_t())}).catch(()=>{}),xr}function xe(G,{blocked:Ee}={}){const We=indexedDB.deleteDatabase(G);return Ee&&We.addEventListener("blocked",()=>Ee()),Oe(We).then(()=>{})}const Se=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],qe=new Map;function Ve(G,Ee){if(!(G instanceof IDBDatabase)||Ee in G||"string"!=typeof Ee)return;if(qe.get(Ee))return qe.get(Ee);const We=Ee.replace(/FromIndex$/,""),tt=Ee!==We,_t=Me.includes(We);if(!(We in(tt?IDBIndex:IDBObjectStore).prototype)||!_t&&!Se.includes(We))return;const nt=function(){var xn=(0,s.Z)(function*(xr,...rr){const as=this.transaction(xr,_t?"readwrite":"readonly");let ae=as.store;return tt&&(ae=ae.index(rr.shift())),(yield Promise.all([ae[We](...rr),_t&&as.done]))[0]});return function(rr){return xn.apply(this,arguments)}}();return qe.set(Ee,nt),nt}!function Je(G){ke=G(ke)}(G=>({...G,get:(Ee,We,tt)=>Ve(Ee,We)||G.get(Ee,We,tt),has:(Ee,We)=>!!Ve(Ee,We)||G.has(Ee,We)}))},5861:(mt,Ae,U)=>{function s(L,le,oe,ie,Ce,ye,_e){try{var q=L[ye](_e),Z=q.value}catch(ee){return void oe(ee)}q.done?le(Z):Promise.resolve(Z).then(ie,Ce)}function te(L){return function(){var le=this,oe=arguments;return new Promise(function(ie,Ce){var ye=L.apply(le,oe);function _e(Z){s(ye,ie,Ce,_e,q,"next",Z)}function q(Z){s(ye,ie,Ce,_e,q,"throw",Z)}_e(void 0)})}}U.d(Ae,{Z:()=>te})},7582:(mt,Ae,U)=>{function le(ae,pe){var fe={};for(var se in ae)Object.prototype.hasOwnProperty.call(ae,se)&&pe.indexOf(se)<0&&(fe[se]=ae[se]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var Ge=0;for(se=Object.getOwnPropertySymbols(ae);Ge<se.length;Ge++)pe.indexOf(se[Ge])<0&&Object.prototype.propertyIsEnumerable.call(ae,se[Ge])&&(fe[se[Ge]]=ae[se[Ge]])}return fe}function ee(ae,pe,fe,se){return new(fe||(fe=Promise))(function(He,Ct){function Qe(Yt){try{Dt(se.next(Yt))}catch(ln){Ct(ln)}}function Kt(Yt){try{Dt(se.throw(Yt))}catch(ln){Ct(ln)}}function Dt(Yt){Yt.done?He(Yt.value):function Ge(He){return He instanceof fe?He:new fe(function(Ct){Ct(He)})}(Yt.value).then(Qe,Kt)}Dt((se=se.apply(ae,pe||[])).next())})}function xe(ae){return this instanceof xe?(this.v=ae,this):new xe(ae)}function Se(ae,pe,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ge,se=fe.apply(ae,pe||[]),He=[];return Ge={},Ct("next"),Ct("throw"),Ct("return"),Ge[Symbol.asyncIterator]=function(){return this},Ge;function Ct(nn){se[nn]&&(Ge[nn]=function(pr){return new Promise(function(kr,Pn){He.push([nn,pr,kr,Pn])>1||Qe(nn,pr)})})}function Qe(nn,pr){try{!function Kt(nn){nn.value instanceof xe?Promise.resolve(nn.value.v).then(Dt,Yt):ln(He[0][2],nn)}(se[nn](pr))}catch(kr){ln(He[0][3],kr)}}function Dt(nn){Qe("next",nn)}function Yt(nn){Qe("throw",nn)}function ln(nn,pr){nn(pr),He.shift(),He.length&&Qe(He[0][0],He[0][1])}}function qe(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,pe=ae[Symbol.asyncIterator];return pe?pe.call(ae):(ae=function ut(ae){var pe="function"==typeof Symbol&&Symbol.iterator,fe=pe&&ae[pe],se=0;if(fe)return fe.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&se>=ae.length&&(ae=void 0),{value:ae&&ae[se++],done:!ae}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),fe={},se("next"),se("throw"),se("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function se(He){fe[He]=ae[He]&&function(Ct){return new Promise(function(Qe,Kt){!function Ge(He,Ct,Qe,Kt){Promise.resolve(Kt).then(function(Dt){He({value:Dt,done:Qe})},Ct)}(Qe,Kt,(Ct=ae[He](Ct)).done,Ct.value)})}}}U.d(Ae,{FC:()=>Se,KL:()=>qe,_T:()=>le,mG:()=>ee,qq:()=>xe}),"function"==typeof SuppressedError&&SuppressedError}},mt=>{mt(mt.s=7937)}]);