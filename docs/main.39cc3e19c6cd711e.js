"use strict";(self.webpackChunkangular_clean_architecture_serverless=self.webpackChunkangular_clean_architecture_serverless||[]).push([[179],{2011:(mt,Ae,U)=>{U.d(Ae,{Dh:()=>ye,GT:()=>ie,cc:()=>ke,hO:()=>Ke,on:()=>z,pX:()=>oe,xv:()=>_e});var o=U(4650),te=U(127),L=U(5813);mt=U.hmd(mt);const le=["ngOnDestroy"],oe=(Me,Oe,$e,xe={})=>new Proxy(Me,{get:(Se,Pe)=>$e.runOutsideAngular(()=>{var Ze;if(Me[Pe])return!(null===(Ze=xe?.spy)||void 0===Ze)&&Ze.get&&xe.spy.get(Pe,Me[Pe]),Me[Pe];if(le.indexOf(Pe)>-1)return()=>{};const Ve=Oe.toPromise().then(G=>{const De=G&&G[Pe];return"function"==typeof De?De.bind(G):De&&De.then?De.then(We=>$e.run(()=>We)):$e.run(()=>De)});return new Proxy(()=>{},{get:(G,De)=>Ve[De],apply:(G,De,We)=>Ve.then(et=>{var _t;const tt=et&&et(...We);return!(null===(_t=xe?.spy)||void 0===_t)&&_t.apply&&xe.spy.apply(Pe,We,tt),tt})})})}),ie=(Me,Oe)=>{Oe.forEach($e=>{Object.getOwnPropertyNames($e.prototype||$e).forEach(xe=>{Object.defineProperty(Me.prototype,xe,Object.getOwnPropertyDescriptor($e.prototype||$e,xe))})})};class Ce{constructor(Oe){return Oe}}const ye=new o.OlP("angularfire2.app.options"),_e=new o.OlP("angularfire2.app.name");function z(Me,Oe,$e){const Se="object"==typeof $e&&$e||{};Se.name=Se.name||"string"==typeof $e&&$e||"[DEFAULT]";const Ze=te.Z.apps.filter(Ve=>Ve&&Ve.name===Se.name)[0]||Oe.runOutsideAngular(()=>te.Z.initializeApp(Me,Se));try{JSON.stringify(Me)!==JSON.stringify(Ze.options)&&q("error",`${Ze.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ce(Ze)}const q=(Me,...Oe)=>{(0,o.X6Q)()&&typeof console<"u"&&console[Me](...Oe)},ee={provide:Ce,useFactory:z,deps:[ye,o.R0b,[new o.FiY,_e]]};let Ke=(()=>{class Me{constructor($e){te.Z.registerVersion("angularfire",L.q4.full,"core"),te.Z.registerVersion("angularfire",L.q4.full,"app-compat"),te.Z.registerVersion("angular",o.q4F.full,$e.toString())}static initializeApp($e,xe){return{ngModule:Me,providers:[{provide:ye,useValue:$e},{provide:_e,useValue:xe}]}}}return Me.\u0275fac=function($e){return new($e||Me)(o.LFG(o.Lbi))},Me.\u0275mod=o.oAB({type:Me}),Me.\u0275inj=o.cJS({providers:[ee]}),Me})();function ke(Me,Oe,$e,xe,Se){const[,Pe,Ze]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===Me)||[];if(Pe)return function Qe(Me,Oe){try{return Me.toString()===Oe.toString()}catch{return Me===Oe}}(Se,Ze)||(be("error",`${Oe} was already initialized on the ${$e} Firebase App with different settings.${ut?" You may need to reload as Firebase is not HMR aware.":""}`),be("warn",{is:Se,was:Ze})),Pe;{const Ve=xe();return globalThis.\u0275AngularfireInstanceCache.push([Me,Ve,Se]),Ve}}const ut=!!mt.hot,be=(Me,...Oe)=>{(0,o.X6Q)()&&typeof console<"u"&&console[Me](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(mt,Ae,U)=>{U.d(Ae,{q4:()=>eu,iC:()=>ql,fc:()=>Hp,HU:()=>_r,vb:()=>Ht,JM:()=>yi});var o=U(4650),te=U(5867),L=U(5861),le=U(9681),oe=U(2090),ie=U(4859),Ce=U(1877),ye=U(8766);const _e="@firebase/installations",z="0.5.12",q=1e4,ee=`w:${z}`,Ke="FIS_v2",ke="https://firebaseinstallations.googleapis.com/v1",Qe=36e5,Oe=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $e(I){return I instanceof oe.ZR&&I.code.includes("request-failed")}function xe({projectId:I}){return`${ke}/projects/${I}/installations`}function Se(I){return{token:I.token,requestStatus:2,expiresIn:et(I.expiresIn),creationTime:Date.now()}}function Pe(I,S){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,L.Z)(function*(I,S){const j=(yield S.json()).error;return Oe.create("request-failed",{requestName:I,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function Ve({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function De(I){return We.apply(this,arguments)}function We(){return(We=(0,L.Z)(function*(I){const S=yield I();return S.status>=500&&S.status<600?I():S})).apply(this,arguments)}function et(I){return Number(I.replace("s","000"))}function An(){return(An=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:S},{fid:O}){const j=xe(I),X=Ve(I),ce=S.getImmediate({optional:!0});if(ce){const It=yield ce.getHeartbeatsHeader();It&&X.append("x-firebase-client",It)}const Xe={method:"POST",headers:X,body:JSON.stringify({fid:O,authVersion:Ke,appId:I.appId,sdkVersion:ee})},bt=yield De(()=>fetch(j,Xe));if(bt.ok){const It=yield bt.json();return{fid:It.fid||O,registrationStatus:2,refreshToken:It.refreshToken,authToken:Se(It.authToken)}}throw yield Pe("Create Installation",bt)})).apply(this,arguments)}function Ar(I){return new Promise(S=>{setTimeout(S,I)})}const os=/^[cdef][\w-]{21}$/,ae="";function pe(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const O=function fe(I){return function nr(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return os.test(O)?O:ae}catch{return ae}}function se(I){return`${I.appName}!${I.appId}`}const Ge=new Map;function He(I,S){const O=se(I);Kt(O,S),function Dt(I,S){const O=function ln(){return!Yt&&"BroadcastChannel"in self&&(Yt=new BroadcastChannel("[Firebase] FID Change"),Yt.onmessage=I=>{Kt(I.data.key,I.data.fid)}),Yt}();O&&O.postMessage({key:I,fid:S}),function nn(){0===Ge.size&&Yt&&(Yt.close(),Yt=null)}()}(O,S)}function Kt(I,S){const O=Ge.get(I);if(O)for(const j of O)j(S)}let Yt=null;const hr="firebase-installations-database",Nr=1,Rn="firebase-installations-store";let $n=null;function Di(){return $n||($n=(0,ye.X3)(hr,Nr,{upgrade:(I,S)=>{0===S&&I.createObjectStore(Rn)}})),$n}function Mn(I,S){return yt.apply(this,arguments)}function yt(){return(yt=(0,L.Z)(function*(I,S){const O=se(I),X=(yield Di()).transaction(Rn,"readwrite"),ce=X.objectStore(Rn),ve=yield ce.get(O);return yield ce.put(S,O),yield X.done,(!ve||ve.fid!==S.fid)&&He(I,S.fid),S})).apply(this,arguments)}function as(I){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,L.Z)(function*(I){const S=se(I),j=(yield Di()).transaction(Rn,"readwrite");yield j.objectStore(Rn).delete(S),yield j.done})).apply(this,arguments)}function Un(I,S){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,L.Z)(function*(I,S){const O=se(I),X=(yield Di()).transaction(Rn,"readwrite"),ce=X.objectStore(Rn),ve=yield ce.get(O),Xe=S(ve);return void 0===Xe?yield ce.delete(O):yield ce.put(Xe,O),yield X.done,Xe&&(!ve||ve.fid!==Xe.fid)&&He(I,Xe.fid),Xe})).apply(this,arguments)}function Hi(I){return _n.apply(this,arguments)}function _n(){return _n=(0,L.Z)(function*(I){let S;const O=yield Un(I.appConfig,j=>{const X=function Cn(I){return Hr(I||{fid:pe(),registrationStatus:0})}(j),ce=function Tt(I,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Oe.create("app-offline"))};const O={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},j=function xt(I,S){return ls.apply(this,arguments)}(I,O);return{installationEntry:O,registrationPromise:j}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Kn(I)}:{installationEntry:S}}(I,X);return S=ce.registrationPromise,ce.installationEntry});return O.fid===ae?{installationEntry:yield S}:{installationEntry:O,registrationPromise:S}}),_n.apply(this,arguments)}function ls(){return ls=(0,L.Z)(function*(I,S){try{const O=yield function tt(I,S){return An.apply(this,arguments)}(I,S);return Mn(I.appConfig,O)}catch(O){throw $e(O)&&409===O.customData.serverCode?yield as(I.appConfig):yield Mn(I.appConfig,{fid:S.fid,registrationStatus:0}),O}}),ls.apply(this,arguments)}function Kn(I){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,L.Z)(function*(I){let S=yield Vs(I.appConfig);for(;1===S.registrationStatus;)yield Ar(100),S=yield Vs(I.appConfig);if(0===S.registrationStatus){const{installationEntry:O,registrationPromise:j}=yield Hi(I);return j||O}return S})).apply(this,arguments)}function Vs(I){return Un(I,S=>{if(!S)throw Oe.create("installation-not-found");return Hr(S)})}function Hr(I){return function Oa(I){return 1===I.registrationStatus&&I.registrationTime+q<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Si(){return(Si=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:S},O){const j=function Xt(I,{fid:S}){return`${xe(I)}/${S}/authTokens:generate`}(I,O),X=function G(I,{refreshToken:S}){const O=Ve(I);return O.append("Authorization",function _t(I){return`${Ke} ${I}`}(S)),O}(I,O),ce=S.getImmediate({optional:!0});if(ce){const It=yield ce.getHeartbeatsHeader();It&&X.append("x-firebase-client",It)}const Xe={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:ee,appId:I.appId}})},bt=yield De(()=>fetch(j,Xe));if(bt.ok)return Se(yield bt.json());throw yield Pe("Generate Auth Token",bt)})).apply(this,arguments)}function J(I){return $.apply(this,arguments)}function $(){return $=(0,L.Z)(function*(I,S=!1){let O;const j=yield Un(I.appConfig,ce=>{if(!vt(ce))throw Oe.create("not-registered");const ve=ce.authToken;if(!S&&function Tn(I){return 2===I.requestStatus&&!function fn(I){const S=Date.now();return S<I.creationTime||I.creationTime+I.expiresIn<S+Qe}(I)}(ve))return ce;if(1===ve.requestStatus)return O=function H(I,S){return Z.apply(this,arguments)}(I,S),ce;{if(!navigator.onLine)throw Oe.create("app-offline");const Xe=function En(I){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:S})}(ce);return O=function Ne(I,S){return Ye.apply(this,arguments)}(I,Xe),Xe}});return O?yield O:j.authToken}),$.apply(this,arguments)}function Z(){return(Z=(0,L.Z)(function*(I,S){let O=yield K(I.appConfig);for(;1===O.authToken.requestStatus;)yield Ar(100),O=yield K(I.appConfig);const j=O.authToken;return 0===j.requestStatus?J(I,S):j})).apply(this,arguments)}function K(I){return Un(I,S=>{if(!vt(S))throw Oe.create("not-registered");return function Ut(I){return 1===I.requestStatus&&I.requestTime+q<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Ye(){return Ye=(0,L.Z)(function*(I,S){try{const O=yield function hn(I,S){return Si.apply(this,arguments)}(I,S),j=Object.assign(Object.assign({},S),{authToken:O});return yield Mn(I.appConfig,j),O}catch(O){if(!$e(O)||401!==O.customData.serverCode&&404!==O.customData.serverCode){const j=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Mn(I.appConfig,j)}else yield as(I.appConfig);throw O}}),Ye.apply(this,arguments)}function vt(I){return void 0!==I&&2===I.registrationStatus}function xr(){return(xr=(0,L.Z)(function*(I){const S=I,{installationEntry:O,registrationPromise:j}=yield Hi(S);return j?j.catch(console.error):J(S).catch(console.error),O.fid})).apply(this,arguments)}function yo(){return yo=(0,L.Z)(function*(I,S=!1){const O=I;return yield function Ic(I){return bs.apply(this,arguments)}(O),(yield J(O,S)).token}),yo.apply(this,arguments)}function bs(){return(bs=(0,L.Z)(function*(I){const{registrationPromise:S}=yield Hi(I);S&&(yield S)})).apply(this,arguments)}function Pa(I){return Oe.create("missing-app-config-values",{valueName:I})}const wh="installations",qn=I=>{const S=I.getProvider("app").getImmediate(),O=function Zu(I){if(!I||!I.options)throw Pa("App Configuration");if(!I.name)throw Pa("App Name");const S=["projectId","apiKey","appId"];for(const O of S)if(!I.options[O])throw Pa(O);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(S);return{app:S,appConfig:O,heartbeatServiceProvider:(0,le._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Wu=I=>{const S=I.getProvider("app").getImmediate(),O=(0,le._getProvider)(S,wh).getImmediate();return{getId:()=>function Yn(I){return xr.apply(this,arguments)}(O),getToken:X=>function en(I){return yo.apply(this,arguments)}(O,X)}};(function dn(){(0,le._registerComponent)(new ie.wA(wh,qn,"PUBLIC")),(0,le._registerComponent)(new ie.wA("installations-internal",Wu,"PRIVATE"))})(),(0,le.registerVersion)(_e,z),(0,le.registerVersion)(_e,z,"esm2017");const rr="@firebase/remote-config",ei=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Zo{constructor(S,O,j,X){this.client=S,this.storage=O,this.storageCache=j,this.logger=X}isCachedDataFresh(S,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-O,X=j<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${X}.`),X}fetch(S){var O=this;return(0,L.Z)(function*(){const[j,X]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(X&&O.isCachedDataFresh(S.cacheMaxAgeMillis,j))return X;S.eTag=X&&X.eTag;const ce=yield O.client.fetch(S),ve=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ce.status&&ve.push(O.storage.setLastSuccessfulFetchResponse(ce)),yield Promise.all(ve),ce})()}}function Gi(I=navigator){return I.languages&&I.languages[0]||I.language}class $s{constructor(S,O,j,X,ce,ve){this.firebaseInstallations=S,this.sdkVersion=O,this.namespace=j,this.projectId=X,this.apiKey=ce,this.appId=ve}fetch(S){var O=this;return(0,L.Z)(function*(){var j,X,ce;const[ve,Xe]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),It=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,Pt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},wt={sdk_version:O.sdkVersion,app_instance_id:ve,app_instance_id_token:Xe,app_id:O.appId,language_code:Gi()},Or={method:"POST",headers:Pt,body:JSON.stringify(wt)},yr=fetch(It,Or),ii=new Promise((Js,Sn)=>{S.signal.addEventListener(()=>{const Zl=new Error("The operation was aborted.");Zl.name="AbortError",Sn(Zl)})});let il;try{yield Promise.race([yr,ii]),il=yield yr}catch(Js){let Sn="fetch-client-network";throw"AbortError"===(null===(j=Js)||void 0===j?void 0:j.name)&&(Sn="fetch-timeout"),ei.create(Sn,{originalErrorMessage:null===(X=Js)||void 0===X?void 0:X.message})}let aa=il.status;const As=il.headers.get("ETag")||void 0;let So,ar;if(200===il.status){let Js;try{Js=yield il.json()}catch(Sn){throw ei.create("fetch-client-parse",{originalErrorMessage:null===(ce=Sn)||void 0===ce?void 0:ce.message})}So=Js.entries,ar=Js.state}if("INSTANCE_STATE_UNSPECIFIED"===ar?aa=500:"NO_CHANGE"===ar?aa=304:("NO_TEMPLATE"===ar||"EMPTY_CONFIG"===ar)&&(So={}),304!==aa&&200!==aa)throw ei.create("fetch-status",{httpStatus:aa});return{status:aa,eTag:As,config:So}})()}}class Cs{constructor(S,O){this.client=S,this.storage=O}fetch(S){var O=this;return(0,L.Z)(function*(){const j=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(S,j)})()}attemptFetch(S,{throttleEndTimeMillis:O,backoffCount:j}){var X=this;return(0,L.Z)(function*(){yield function gi(I,S){return new Promise((O,j)=>{const X=Math.max(S-Date.now(),0),ce=setTimeout(O,X);I.addEventListener(()=>{clearTimeout(ce),j(ei.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,O);try{const ce=yield X.client.fetch(S);return yield X.storage.deleteThrottleMetadata(),ce}catch(ce){if(!function yn(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ce))throw ce;const ve={throttleEndTimeMillis:Date.now()+(0,oe.$s)(j),backoffCount:j+1};return yield X.storage.setThrottleMetadata(ve),X.attemptFetch(S,ve)}})()}}class Ua{constructor(S,O,j,X,ce){this.app=S,this._client=O,this._storageCache=j,this._storage=X,this._logger=ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Wo(I,S){var O;const j=I.target.error||void 0;return ei.create(S,{originalErrorMessage:j&&(null===(O=j)||void 0===O?void 0:O.message)})}const ni="app_namespace_store";class zi{constructor(S,O,j,X=function Ii(){return new Promise((I,S)=>{var O;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=X=>{S(Wo(X,"storage-open"))},j.onsuccess=X=>{I(X.target.result)},j.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(ni,{keyPath:"compositeKey"})}}catch(j){S(ei.create("storage-open",{originalErrorMessage:null===(O=j)||void 0===O?void 0:O.message}))}})}()){this.appId=S,this.appName=O,this.namespace=j,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var O=this;return(0,L.Z)(function*(){const j=yield O.openDbPromise;return new Promise((X,ce)=>{var ve;const bt=j.transaction([ni],"readonly").objectStore(ni),It=O.createCompositeKey(S);try{const Pt=bt.get(It);Pt.onerror=wt=>{ce(Wo(wt,"storage-get"))},Pt.onsuccess=wt=>{const Or=wt.target.result;X(Or?Or.value:void 0)}}catch(Pt){ce(ei.create("storage-get",{originalErrorMessage:null===(ve=Pt)||void 0===ve?void 0:ve.message}))}})})()}set(S,O){var j=this;return(0,L.Z)(function*(){const X=yield j.openDbPromise;return new Promise((ce,ve)=>{var Xe;const It=X.transaction([ni],"readwrite").objectStore(ni),Pt=j.createCompositeKey(S);try{const wt=It.put({compositeKey:Pt,value:O});wt.onerror=Or=>{ve(Wo(Or,"storage-set"))},wt.onsuccess=()=>{ce()}}catch(wt){ve(ei.create("storage-set",{originalErrorMessage:null===(Xe=wt)||void 0===Xe?void 0:Xe.message}))}})})()}delete(S){var O=this;return(0,L.Z)(function*(){const j=yield O.openDbPromise;return new Promise((X,ce)=>{var ve;const bt=j.transaction([ni],"readwrite").objectStore(ni),It=O.createCompositeKey(S);try{const Pt=bt.delete(It);Pt.onerror=wt=>{ce(Wo(wt,"storage-delete"))},Pt.onsuccess=()=>{X()}}catch(Pt){ce(ei.create("storage-delete",{originalErrorMessage:null===(ve=Pt)||void 0===ve?void 0:ve.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Cl{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,L.Z)(function*(){const O=S.storage.getLastFetchStatus(),j=S.storage.getLastSuccessfulFetchTimestampMillis(),X=S.storage.getActiveConfig(),ce=yield O;ce&&(S.lastFetchStatus=ce);const ve=yield j;ve&&(S.lastSuccessfulFetchTimestampMillis=ve);const Xe=yield X;Xe&&(S.activeConfig=Xe)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Tl(){return Ap.apply(this,arguments)}function Ap(){return(Ap=(0,L.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function us(){(0,le._registerComponent)(new ie.wA("remote-config",function I(S,{instanceIdentifier:O}){const j=S.getProvider("app").getImmediate(),X=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ei.create("registration-window");if(!(0,oe.hl)())throw ei.create("indexed-db-unavailable");const{projectId:ce,apiKey:ve,appId:Xe}=j.options;if(!ce)throw ei.create("registration-project-id");if(!ve)throw ei.create("registration-api-key");if(!Xe)throw ei.create("registration-app-id");const bt=new zi(Xe,j.name,O=O||"firebase"),It=new Cl(bt),Pt=new Ce.Yd(rr);Pt.logLevel=Ce.in.ERROR;const wt=new $s(X,le.SDK_VERSION,O,ce,ve,Xe),Or=new Cs(wt,bt),yr=new Zo(Or,bt,It,Pt),ii=new Ua(j,yr,It,bt,Pt);return function Bn(I){const S=(0,oe.m9)(I);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(ii),ii},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(rr,"0.3.11"),(0,le.registerVersion)(rr,"0.3.11","esm2017")}();const Ju="/firebase-messaging-sw.js",Gs="/firebase-cloud-messaging-push-scope",Ba="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",El="https://fcmregistrations.googleapis.com/v1",Xu="google.c.a.c_id",Np="google.c.a.c_l",xp="google.c.a.ts",t_="google.c.a.e";var Ko=(()=>{return(I=Ko||(Ko={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Ko;var I})();function Ts(I){const S=new Uint8Array(I);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function n_(I){const O=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(O),X=new Uint8Array(j.length);for(let ce=0;ce<j.length;++ce)X[ce]=j.charCodeAt(ce);return X}const Gr="fcm_token_details_db",ed=5,mi="fcm_token_object_Store";function Dh(){return Dh=(0,L.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ce=>ce.name).includes(Gr))return null;let S=null;return(yield(0,ye.X3)(Gr,ed,{upgrade:(j=(0,L.Z)(function*(X,ce,ve,Xe){var bt;if(ce<2||!X.objectStoreNames.contains(mi))return;const It=Xe.objectStore(mi),Pt=yield It.index("fcmSenderId").get(I);if(yield It.clear(),Pt)if(2===ce){const wt=Pt;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;S={token:wt.fcmToken,createTime:null!==(bt=wt.createTime)&&void 0!==bt?bt:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:Ts(wt.vapidKey)}}}else if(3===ce){const wt=Pt;S={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Ts(wt.auth),p256dh:Ts(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Ts(wt.vapidKey)}}}else if(4===ce){const wt=Pt;S={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Ts(wt.auth),p256dh:Ts(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Ts(wt.vapidKey)}}}}),function(ce,ve,Xe,bt){return j.apply(this,arguments)})})).close(),yield(0,ye.Lj)(Gr),yield(0,ye.Lj)("fcm_vapid_details_db"),yield(0,ye.Lj)("undefined"),function bo(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:S}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}(S)?S:null;var j}),Dh.apply(this,arguments)}const Ac="firebase-messaging-database",Yo=1,Qo="firebase-messaging-store";let Nc=null;function ja(){return Nc||(Nc=(0,ye.X3)(Ac,Yo,{upgrade:(I,S)=>{0===S&&I.createObjectStore(Qo)}})),Nc}function xc(I){return Ha.apply(this,arguments)}function Ha(){return Ha=(0,L.Z)(function*(I){const S=Ga(I),j=yield(yield ja()).transaction(Qo).objectStore(Qo).get(S);if(j)return j;{const X=yield function td(I){return Dh.apply(this,arguments)}(I.appConfig.senderId);if(X)return yield Jo(I,X),X}}),Ha.apply(this,arguments)}function Jo(I,S){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,L.Z)(function*(I,S){const O=Ga(I),X=(yield ja()).transaction(Qo,"readwrite");return yield X.objectStore(Qo).put(S,O),yield X.done,S})).apply(this,arguments)}function $a(){return($a=(0,L.Z)(function*(I){const S=Ga(I),j=(yield ja()).transaction(Qo,"readwrite");yield j.objectStore(Qo).delete(S),yield j.done})).apply(this,arguments)}function Ga({appConfig:I}){return I.appId}const zn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function kc(I,S){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,L.Z)(function*(I,S){var O;const j=yield ea(I),X=Sl(S),ce={method:"POST",headers:j,body:JSON.stringify(X)};let ve;try{ve=yield(yield fetch(za(I.appConfig),ce)).json()}catch(Xe){throw zn.create("token-subscribe-failed",{errorInfo:null===(O=Xe)||void 0===O?void 0:O.toString()})}if(ve.error)throw zn.create("token-subscribe-failed",{errorInfo:ve.error.message});if(!ve.token)throw zn.create("token-subscribe-no-token");return ve.token})).apply(this,arguments)}function Xo(){return(Xo=(0,L.Z)(function*(I,S){var O;const j=yield ea(I),X=Sl(S.subscriptionOptions),ce={method:"PATCH",headers:j,body:JSON.stringify(X)};let ve;try{ve=yield(yield fetch(`${za(I.appConfig)}/${S.token}`,ce)).json()}catch(Xe){throw zn.create("token-update-failed",{errorInfo:null===(O=Xe)||void 0===O?void 0:O.toString()})}if(ve.error)throw zn.create("token-update-failed",{errorInfo:ve.error.message});if(!ve.token)throw zn.create("token-update-no-token");return ve.token})).apply(this,arguments)}function or(I,S){return rd.apply(this,arguments)}function rd(){return(rd=(0,L.Z)(function*(I,S){var O;const X={method:"DELETE",headers:yield ea(I)};try{const ve=yield(yield fetch(`${za(I.appConfig)}/${S}`,X)).json();if(ve.error)throw zn.create("token-unsubscribe-failed",{errorInfo:ve.error.message})}catch(ce){throw zn.create("token-unsubscribe-failed",{errorInfo:null===(O=ce)||void 0===O?void 0:O.toString()})}})).apply(this,arguments)}function za({projectId:I}){return`${El}/projects/${I}/registrations`}function ea(I){return pr.apply(this,arguments)}function pr(){return(pr=(0,L.Z)(function*({appConfig:I,installations:S}){const O=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${O}`})})).apply(this,arguments)}function Sl({p256dh:I,auth:S,endpoint:O,vapidKey:j}){const X={web:{endpoint:O,auth:S,p256dh:I}};return j!==Ba&&(X.web.applicationPubKey=j),X}const Za=6048e5;function qs(){return qs=(0,L.Z)(function*(I){const S=yield function id(I,S){return sd.apply(this,arguments)}(I.swRegistration,I.vapidKey),O={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:S.endpoint,auth:Ts(S.getKey("auth")),p256dh:Ts(S.getKey("p256dh"))},j=yield xc(I.firebaseDependencies);if(j){if(function Pc(I,S){return S.vapidKey===I.vapidKey&&S.endpoint===I.endpoint&&S.auth===I.auth&&S.p256dh===I.p256dh}(j.subscriptionOptions,O))return Date.now()>=j.createTime+Za?function Mt(I,S){return Rc.apply(this,arguments)}(I,{token:j.token,createTime:Date.now(),subscriptionOptions:O}):j.token;try{yield or(I.firebaseDependencies,j.token)}catch(X){console.warn(X)}return Sh(I.firebaseDependencies,O)}return Sh(I.firebaseDependencies,O)}),qs.apply(this,arguments)}function Al(){return Al=(0,L.Z)(function*(I){const S=yield xc(I.firebaseDependencies);S&&(yield or(I.firebaseDependencies,S.token),yield function nd(I){return $a.apply(this,arguments)}(I.firebaseDependencies));const O=yield I.swRegistration.pushManager.getSubscription();return!O||O.unsubscribe()}),Al.apply(this,arguments)}function Rc(){return Rc=(0,L.Z)(function*(I,S){try{const O=yield function qa(I,S){return Xo.apply(this,arguments)}(I.firebaseDependencies,S),j=Object.assign(Object.assign({},S),{token:O,createTime:Date.now()});return yield Jo(I.firebaseDependencies,j),O}catch(O){throw yield function Il(I){return Al.apply(this,arguments)}(I),O}}),Rc.apply(this,arguments)}function Sh(I,S){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,L.Z)(function*(I,S){const j={token:yield kc(I,S),createTime:Date.now(),subscriptionOptions:S};return yield Jo(I,j),j.token})).apply(this,arguments)}function sd(){return(sd=(0,L.Z)(function*(I,S){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n_(S)})})).apply(this,arguments)}function kp(I){const S={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function od(I,S){if(!S.notification)return;I.notification={};const O=S.notification.title;O&&(I.notification.title=O);const j=S.notification.body;j&&(I.notification.body=j);const X=S.notification.image;X&&(I.notification.image=X)}(S,I),function we(I,S){S.data&&(I.data=S.data)}(S,I),function sn(I,S){var O,j,X,ce,ve;if(!(S.fcmOptions||null!==(O=S.notification)&&void 0!==O&&O.click_action))return;I.fcmOptions={};const Xe=null!==(X=null===(j=S.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==X?X:null===(ce=S.notification)||void 0===ce?void 0:ce.click_action;Xe&&(I.fcmOptions.link=Xe);const bt=null===(ve=S.fcmOptions)||void 0===ve?void 0:ve.analytics_label;bt&&(I.fcmOptions.analyticsLabel=bt)}(S,I),S}function Ih(I,S){const O=[];for(let j=0;j<I.length;j++)O.push(I.charAt(j)),j<S.length&&O.push(S.charAt(j));return O.join("")}function Nl(I){return zn.create("missing-app-config-values",{valueName:I})}Ih("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ih("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Fc{constructor(S,O,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function qr(I){if(!I||!I.options)throw Nl("App Configuration Object");if(!I.name)throw Nl("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:O}=I;for(const j of S)if(!O[j])throw Nl(j);return{appName:I.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:X,installations:O,analyticsProvider:j}}_delete(){return Promise.resolve()}}function xi(I){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,L.Z)(function*(I){var S;try{I.swRegistration=yield navigator.serviceWorker.register(Ju,{scope:Gs}),I.swRegistration.update().catch(()=>{})}catch(O){throw zn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=O)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function Ah(){return(Ah=(0,L.Z)(function*(I,S){if(!S&&!I.swRegistration&&(yield xi(I)),S||!I.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw zn.create("invalid-sw-registration");I.swRegistration=S}})).apply(this,arguments)}function Bc(){return(Bc=(0,L.Z)(function*(I,S){S?I.vapidKey=S:I.vapidKey||(I.vapidKey=Ba)})).apply(this,arguments)}function ki(){return ki=(0,L.Z)(function*(I,S){if(!navigator)throw zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw zn.create("permission-blocked");return yield function ld(I,S){return Bc.apply(this,arguments)}(I,S?.vapidKey),yield function Uc(I,S){return Ah.apply(this,arguments)}(I,S?.serviceWorkerRegistration),function Oc(I){return qs.apply(this,arguments)}(I)}),ki.apply(this,arguments)}function ta(){return(ta=(0,L.Z)(function*(I,S,O){const j=function Es(I){switch(I){case Ko.NOTIFICATION_CLICKED:return"notification_open";case Ko.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(S);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:O[Xu],message_name:O[Np],message_time:O[xp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function xl(){return xl=(0,L.Z)(function*(I,S){const O=S.data;if(!O.isFirebaseMessaging)return;I.onMessageHandler&&O.messageType===Ko.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(kp(O)):I.onMessageHandler.next(kp(O)));const j=O.data;(function ad(I){return"object"==typeof I&&!!I&&Xu in I})(j)&&"1"===j[t_]&&(yield function wo(I,S,O){return ta.apply(this,arguments)}(I,O.messageType,j))}),xl.apply(this,arguments)}const xh="@firebase/messaging",ud=I=>{const S=new Fc(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>function Nh(I,S){return xl.apply(this,arguments)}(S,O)),S},zs=I=>{const S=I.getProvider("messaging").getImmediate();return{getToken:j=>function gr(I,S){return ki.apply(this,arguments)}(S,j)}};function dd(){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,L.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function kh(){(0,le._registerComponent)(new ie.wA("messaging",ud,"PUBLIC")),(0,le._registerComponent)(new ie.wA("messaging-internal",zs,"PRIVATE")),(0,le.registerVersion)(xh,"0.9.16"),(0,le.registerVersion)(xh,"0.9.16","esm2017")}();const Mh="analytics",_i="firebase_id",Wa="origin",xn=6e4,Ka="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hd="https://www.googletagmanager.com/gtag/js",zr=new Ce.Yd("@firebase/analytics");function Mp(I){return Promise.all(I.map(S=>S.catch(O=>O)))}function na(){return(na=(0,L.Z)(function*(I,S,O,j,X,ce){const ve=j[X];try{if(ve)yield S[ve];else{const bt=(yield Mp(O)).find(It=>It.measurementId===X);bt&&(yield S[bt.appId])}}catch(Xe){zr.error(Xe)}I("config",X,ce)})).apply(this,arguments)}function Co(){return(Co=(0,L.Z)(function*(I,S,O,j,X){try{let ce=[];if(X&&X.send_to){let ve=X.send_to;Array.isArray(ve)||(ve=[ve]);const Xe=yield Mp(O);for(const bt of ve){const It=Xe.find(wt=>wt.measurementId===bt),Pt=It&&S[It.appId];if(!Pt){ce=[];break}ce.push(Pt)}}0===ce.length&&(ce=Object.values(S)),yield Promise.all(ce),I("event",j,X||{})}catch(ce){zr.error(ce)}})).apply(this,arguments)}const Zi=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),jc=30,Fh=new class ra{constructor(S={},O=1e3){this.throttleMetadata=S,this.intervalMillis=O}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,O){this.throttleMetadata[S]=O}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Pp(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Ml(){return(Ml=(0,L.Z)(function*(I){var S;const{appId:O,apiKey:j}=I,X={method:"GET",headers:Pp(j)},ce=Ka.replace("{app-id}",O),ve=yield fetch(ce,X);if(200!==ve.status&&304!==ve.status){let Xe="";try{const bt=yield ve.json();null!==(S=bt.error)&&void 0!==S&&S.message&&(Xe=bt.error.message)}catch{}throw Zi.create("config-fetch-failed",{httpStatus:ve.status,responseMessage:Xe})}return ve.json()})).apply(this,arguments)}function Pl(){return(Pl=(0,L.Z)(function*(I,S=Fh,O){const{appId:j,apiKey:X,measurementId:ce}=I.options;if(!j)throw Zi.create("no-app-id");if(!X){if(ce)return{measurementId:ce,appId:j};throw Zi.create("no-api-key")}const ve=S.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xe=new Fl;return setTimeout((0,L.Z)(function*(){Xe.abort()}),void 0!==O?O:xn),Zs({appId:j,apiKey:X,measurementId:ce},ve,Xe,S)})).apply(this,arguments)}function Zs(I,S,O){return Ws.apply(this,arguments)}function Ws(){return Ws=(0,L.Z)(function*(I,{throttleEndTimeMillis:S,backoffCount:O},j,X=Fh){var ce,ve;const{appId:Xe,measurementId:bt}=I;try{yield function Qa(I,S){return new Promise((O,j)=>{const X=Math.max(S-Date.now(),0),ce=setTimeout(O,X);I.addEventListener(()=>{clearTimeout(ce),j(Zi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(j,S)}catch(It){if(bt)return zr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${null===(ce=It)||void 0===ce?void 0:ce.message}]`),{appId:Xe,measurementId:bt};throw It}try{const It=yield function ia(I){return Ml.apply(this,arguments)}(I);return X.deleteThrottleMetadata(Xe),It}catch(It){const Pt=It;if(!function pd(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}(Pt)){if(X.deleteThrottleMetadata(Xe),bt)return zr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${bt} provided in the "measurementId" field in the local Firebase config. [${Pt?.message}]`),{appId:Xe,measurementId:bt};throw It}const wt=503===Number(null===(ve=Pt?.customData)||void 0===ve?void 0:ve.httpStatus)?(0,oe.$s)(O,X.intervalMillis,jc):(0,oe.$s)(O,X.intervalMillis),Or={throttleEndTimeMillis:Date.now()+wt,backoffCount:O+1};return X.setThrottleMetadata(Xe,Or),zr.debug(`Calling attemptFetch again in ${wt} millis`),Zs(I,Or,j,X)}}),Ws.apply(this,arguments)}class Fl{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Hc,Do;function Eo(){return(Eo=(0,L.Z)(function*(I,S,O,j,X){if(X&&X.global)I("event",O,j);else{const ce=yield S;I("event",O,Object.assign(Object.assign({},j),{send_to:ce}))}})).apply(this,arguments)}function gd(){return(gd=(0,L.Z)(function*(){var I;if(!(0,oe.hl)())return zr.warn(Zi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(S){return zr.warn(Zi.create("indexeddb-unavailable",{errorInfo:null===(I=S)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function Hl(){return Hl=(0,L.Z)(function*(I,S,O,j,X,ce,ve){var Xe;const bt=function Vn(I){return Pl.apply(this,arguments)}(I);bt.then(yr=>{O[yr.measurementId]=yr.appId,I.options.measurementId&&yr.measurementId!==I.options.measurementId&&zr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${yr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(yr=>zr.error(yr)),S.push(bt);const It=function jl(){return gd.apply(this,arguments)}().then(yr=>{if(yr)return j.getId()}),[Pt,wt]=yield Promise.all([bt,It]);(function Ya(){const I=window.document.getElementsByTagName("script");for(const S of Object.values(I))if(S.src&&S.src.includes(hd))return S;return null})()||function i_(I,S){const O=document.createElement("script");O.src=`${hd}?l=${I}&id=${S}`,O.async=!0,document.head.appendChild(O)}(ce,Pt.measurementId),Do&&(X("consent","default",Do),function Vl(I){Do=I}(void 0)),X("js",new Date);const Or=null!==(Xe=ve?.config)&&void 0!==Xe?Xe:{};return Or[Wa]="firebase",Or.update=!0,null!=wt&&(Or[_i]=wt),X("config",Pt.measurementId,Or),Hc&&(X("set",Hc),function qc(I){Hc=I}(void 0)),Pt.measurementId}),Hl.apply(this,arguments)}class Lh{constructor(S){this.app=S}_delete(){return delete Ds[this.app.options.appId],Promise.resolve()}}let Ds={},zc=[];const oa={};let Zc,Ks,Ss="dataLayer",Uh="gtag",ds=!1;function Wc(I,S,O){!function Bh(){const I=[];if((0,oe.ru)()&&I.push("This is a browser extension environment."),(0,oe.zI)()||I.push("Cookies are not available."),I.length>0){const S=I.map((j,X)=>`(${X+1}) ${j}`).join(" "),O=Zi.create("invalid-analytics-context",{errorInfo:S});zr.warn(O.message)}}();const j=I.options.appId;if(!j)throw Zi.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Zi.create("no-api-key");zr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ds[j])throw Zi.create("already-exists",{id:j});if(!ds){!function s_(I){let S=[];Array.isArray(window[I])?S=window[I]:window[I]=S}(Ss);const{wrappedGtag:ce,gtagCore:ve}=function Rl(I,S,O,j,X){let ce=function(...ve){window[j].push(arguments)};return window[X]&&"function"==typeof window[X]&&(ce=window[X]),window[X]=function Ol(I,S,O,j){function ce(){return ce=(0,L.Z)(function*(ve,Xe,bt){try{"event"===ve?yield function fd(I,S,O,j,X){return Co.apply(this,arguments)}(I,S,O,Xe,bt):"config"===ve?yield function kl(I,S,O,j,X,ce){return na.apply(this,arguments)}(I,S,O,j,Xe,bt):"consent"===ve?I("consent","update",bt):I("set",Xe)}catch(It){zr.error(It)}}),ce.apply(this,arguments)}return function X(ve,Xe,bt){return ce.apply(this,arguments)}}(ce,I,S,O),{gtagCore:ce,wrappedGtag:window[X]}}(Ds,zc,oa,Ss,Uh);Ks=ce,Zc=ve,ds=!0}return Ds[j]=function sa(I,S,O,j,X,ce,ve){return Hl.apply(this,arguments)}(I,zc,oa,S,Zc,Ss,O),new Lh(I)}function Kc(){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,L.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const rn="@firebase/analytics";!function a_(){(0,le._registerComponent)(new ie.wA(Mh,(S,{options:O})=>Wc(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,le._registerComponent)(new ie.wA("analytics-internal",function I(S){try{const O=S.getProvider(Mh).getImmediate();return{logEvent:(j,X,ce)=>function Lp(I,S,O,j){I=(0,oe.m9)(I),function $c(I,S,O,j,X){return Eo.apply(this,arguments)}(Ks,Ds[I.app.options.appId],S,O,j).catch(X=>zr.error(X))}(O,j,X,ce)}}catch(O){throw Zi.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,le.registerVersion)(rn,"0.8.0"),(0,le.registerVersion)(rn,"0.8.0","esm2017")}();var Qc=U(4408),Bp=U(7565);const Vp=new class Hh extends Bp.v{}(class Up extends Qc.o{constructor(S,O){super(S,O),this.scheduler=S,this.work=O}schedule(S,O=0){return O>0?super.schedule(S,O):(this.delay=O,this.state=S,this.scheduler.flush(this),this)}execute(S,O){return O>0||this.closed?super.execute(S,O):this._execute(S,O)}requestAsyncId(S,O,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(S,O,j):(S.flush(this),0)}});var jp=U(4986),vd=U(8505),Dn=U(5363),Xc=U(9468);const eu=new o.GfV("7.6.1"),bd="__angularfire_symbol__analyticsIsSupportedValue",Oi="__angularfire_symbol__analyticsIsSupported",Is="__angularfire_symbol__remoteConfigIsSupportedValue",tu="__angularfire_symbol__remoteConfigIsSupported",Gl="__angularfire_symbol__messagingIsSupportedValue",nl="__angularfire_symbol__messagingIsSupported";function yi(I,S,O){if(S){if(1===S.length)return S[0];const ce=S.filter(ve=>ve.app===O);if(1===ce.length)return ce[0]}return O.container.getProvider(I).getImmediate({optional:!0})}globalThis[Oi]||(globalThis[Oi]=Kc().then(I=>globalThis[bd]=I).catch(()=>globalThis[bd]=!1)),globalThis[nl]||(globalThis[nl]=dd().then(I=>globalThis[Gl]=I).catch(()=>globalThis[Gl]=!1)),globalThis[tu]||(globalThis[tu]=Tl().then(I=>globalThis[Is]=I).catch(()=>globalThis[Is]=!1));const Ht=(I,S)=>{const O=S?[S]:(0,te.C6)(),j=[];return O.forEach(X=>{X.container.getProvider(I).instances.forEach(ve=>{j.includes(ve)||j.push(ve)})}),j};function mr(){}class Re{constructor(S,O=Vp){this.zone=S,this.delegate=O}now(){return this.delegate.now()}schedule(S,O,j){const X=this.zone;return this.delegate.schedule(function(ve){X.runGuarded(()=>{S.apply(this,[ve])})},O,j)}}class cn{constructor(S){this.zone=S,this.task=null}call(S,O){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",mr,{},mr,mr)),O.pipe((0,vd.b)({next:j,complete:j,error:j})).subscribe(S).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _r=(()=>{class I{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new Re(Zone.current)),this.insideAngular=O.run(()=>new Re(Zone.current,jp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(O){return new(O||I)(o.LFG(o.R0b))},I.\u0275prov=o.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Qs(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Hp(I){return I.pipe((0,Dn.Q)(Qs().outsideAngular))}function ql(I){return Qs(),function zl(I){return function(O){return(O=O.lift(new cn(I.ngZone))).pipe((0,Xc.R)(I.outsideAngular),(0,Dn.Q)(I.insideAngular))}}(Qs())(I)}},2090:(mt,Ae,U)=>{U.d(Ae,{$s:()=>Oa,BH:()=>Ke,DV:()=>Je,Dv:()=>Un,G6:()=>Ve,GJ:()=>He,L:()=>ye,LL:()=>An,Mn:()=>Pe,Pz:()=>ae,Sg:()=>ke,UG:()=>be,UI:()=>Dt,US:()=>ie,Wj:()=>_n,Yr:()=>Ze,ZB:()=>q,ZR:()=>tt,b$:()=>$e,cI:()=>os,d:()=>xe,dS:()=>Tt,eu:()=>De,g5:()=>L,gK:()=>Jr,gQ:()=>$n,h$:()=>Ce,hl:()=>G,hu:()=>te,jU:()=>Me,lb:()=>Cn,m9:()=>Xt,ne:()=>Di,p$:()=>z,pd:()=>Rn,r3:()=>Ct,ru:()=>Oe,tV:()=>_e,uI:()=>ut,ug:()=>xt,vZ:()=>Yt,w1:()=>Se,w9:()=>Ge,xO:()=>hr,xb:()=>Kt,z$:()=>Qe,zI:()=>We,zd:()=>Nr});const o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},te=function(J,$){if(!J)throw L($)},L=function(J){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+J)},le=function(J){const $=[];let H=0;for(let Z=0;Z<J.length;Z++){let K=J.charCodeAt(Z);K<128?$[H++]=K:K<2048?($[H++]=K>>6|192,$[H++]=63&K|128):55296==(64512&K)&&Z+1<J.length&&56320==(64512&J.charCodeAt(Z+1))?(K=65536+((1023&K)<<10)+(1023&J.charCodeAt(++Z)),$[H++]=K>>18|240,$[H++]=K>>12&63|128,$[H++]=K>>6&63|128,$[H++]=63&K|128):($[H++]=K>>12|224,$[H++]=K>>6&63|128,$[H++]=63&K|128)}return $},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(J,$){if(!Array.isArray(J))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,Z=[];for(let K=0;K<J.length;K+=3){const Ne=J[K],Ye=K+1<J.length,vt=Ye?J[K+1]:0,Tn=K+2<J.length,fn=Tn?J[K+2]:0;let Yn=(15&vt)<<2|fn>>6,xr=63&fn;Tn||(xr=64,Ye||(Yn=64)),Z.push(H[Ne>>2],H[(3&Ne)<<4|vt>>4],H[Yn],H[xr])}return Z.join("")},encodeString(J,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(J):this.encodeByteArray(le(J),$)},decodeString(J,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(J):function(J){const $=[];let H=0,Z=0;for(;H<J.length;){const K=J[H++];if(K<128)$[Z++]=String.fromCharCode(K);else if(K>191&&K<224){const Ne=J[H++];$[Z++]=String.fromCharCode((31&K)<<6|63&Ne)}else if(K>239&&K<365){const Tn=((7&K)<<18|(63&J[H++])<<12|(63&J[H++])<<6|63&J[H++])-65536;$[Z++]=String.fromCharCode(55296+(Tn>>10)),$[Z++]=String.fromCharCode(56320+(1023&Tn))}else{const Ne=J[H++],Ye=J[H++];$[Z++]=String.fromCharCode((15&K)<<12|(63&Ne)<<6|63&Ye)}}return $.join("")}(this.decodeStringToByteArray(J,$))},decodeStringToByteArray(J,$){this.init_();const H=$?this.charToByteMapWebSafe_:this.charToByteMap_,Z=[];for(let K=0;K<J.length;){const Ne=H[J.charAt(K++)],vt=K<J.length?H[J.charAt(K)]:0;++K;const fn=K<J.length?H[J.charAt(K)]:64;++K;const Ut=K<J.length?H[J.charAt(K)]:64;if(++K,null==Ne||null==vt||null==fn||null==Ut)throw Error();Z.push(Ne<<2|vt>>4),64!==fn&&(Z.push(vt<<4&240|fn>>2),64!==Ut&&Z.push(fn<<6&192|Ut))}return Z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let J=0;J<this.ENCODED_VALS.length;J++)this.byteToCharMap_[J]=this.ENCODED_VALS.charAt(J),this.charToByteMap_[this.byteToCharMap_[J]]=J,this.byteToCharMapWebSafe_[J]=this.ENCODED_VALS_WEBSAFE.charAt(J),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[J]]=J,J>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(J)]=J,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(J)]=J)}}},Ce=function(J){const $=le(J);return ie.encodeByteArray($,!0)},ye=function(J){return Ce(J).replace(/\./g,"")},_e=function(J){try{return ie.decodeString(J,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function z(J){return q(void 0,J)}function q(J,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===J&&(J={});break;case Array:J=[];break;default:return $}for(const H in $)!$.hasOwnProperty(H)||!ee(H)||(J[H]=q(J[H],$[H]));return J}function ee(J){return"__proto__"!==J}class Ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,H)=>{this.resolve=$,this.reject=H})}wrapCallback($){return(H,Z)=>{H?this.reject(H):this.resolve(Z),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(H):$(H,Z))}}}function ke(J,$){if(J.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Z=$||"demo-project",K=J.iat||0,Ne=J.sub||J.user_id;if(!Ne)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ye=Object.assign({iss:`https://securetoken.google.com/${Z}`,aud:Z,iat:K,exp:K+3600,auth_time:K,sub:Ne,user_id:Ne,firebase:{sign_in_provider:"custom",identities:{}}},J);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(Ye)),""].join(".")}function Qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ut(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Me(){return"object"==typeof self&&self.self===self}function Oe(){const J="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof J&&void 0!==J.id}function $e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xe(){return Qe().indexOf("Electron/")>=0}function Se(){const J=Qe();return J.indexOf("MSIE ")>=0||J.indexOf("Trident/")>=0}function Pe(){return Qe().indexOf("MSAppHost/")>=0}function Ze(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN}function Ve(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G(){return"object"==typeof indexedDB}function De(){return new Promise((J,$)=>{try{let H=!0;const Z="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(Z);K.onsuccess=()=>{K.result.close(),H||self.indexedDB.deleteDatabase(Z),J(!0)},K.onupgradeneeded=()=>{H=!1},K.onerror=()=>{var Ne;$((null===(Ne=K.error)||void 0===Ne?void 0:Ne.message)||"")}}catch(H){$(H)}})}function We(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class tt extends Error{constructor($,H,Z){super(H),this.code=$,this.customData=Z,this.name="FirebaseError",Object.setPrototypeOf(this,tt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,An.prototype.create)}}class An{constructor($,H,Z){this.service=$,this.serviceName=H,this.errors=Z}create($,...H){const Z=H[0]||{},K=`${this.service}/${$}`,Ne=this.errors[$],Ye=Ne?function Ar(J,$){return J.replace(nr,(H,Z)=>{const K=$[Z];return null!=K?String(K):`<${Z}?>`})}(Ne,Z):"Error";return new tt(K,`${this.serviceName}: ${Ye} (${K}).`,Z)}}const nr=/\{\$([^}]+)}/g;function os(J){return JSON.parse(J)}function ae(J){return JSON.stringify(J)}const pe=function(J){let $={},H={},Z={},K="";try{const Ne=J.split(".");$=os(_e(Ne[0])||""),H=os(_e(Ne[1])||""),K=Ne[2],Z=H.d||{},delete H.d}catch{}return{header:$,claims:H,data:Z,signature:K}},Ge=function(J){const H=pe(J).claims;return!!H&&"object"==typeof H&&H.hasOwnProperty("iat")},He=function(J){const $=pe(J).claims;return"object"==typeof $&&!0===$.admin};function Ct(J,$){return Object.prototype.hasOwnProperty.call(J,$)}function Je(J,$){if(Object.prototype.hasOwnProperty.call(J,$))return J[$]}function Kt(J){for(const $ in J)if(Object.prototype.hasOwnProperty.call(J,$))return!1;return!0}function Dt(J,$,H){const Z={};for(const K in J)Object.prototype.hasOwnProperty.call(J,K)&&(Z[K]=$.call(H,J[K],K,J));return Z}function Yt(J,$){if(J===$)return!0;const H=Object.keys(J),Z=Object.keys($);for(const K of H){if(!Z.includes(K))return!1;const Ne=J[K],Ye=$[K];if(ln(Ne)&&ln(Ye)){if(!Yt(Ne,Ye))return!1}else if(Ne!==Ye)return!1}for(const K of Z)if(!H.includes(K))return!1;return!0}function ln(J){return null!==J&&"object"==typeof J}function hr(J){const $=[];for(const[H,Z]of Object.entries(J))Array.isArray(Z)?Z.forEach(K=>{$.push(encodeURIComponent(H)+"="+encodeURIComponent(K))}):$.push(encodeURIComponent(H)+"="+encodeURIComponent(Z));return $.length?"&"+$.join("&"):""}function Nr(J){const $={};return J.replace(/^\?/,"").split("&").forEach(Z=>{if(Z){const[K,Ne]=Z.split("=");$[decodeURIComponent(K)]=decodeURIComponent(Ne)}}),$}function Rn(J){const $=J.indexOf("?");if(!$)return"";const H=J.indexOf("#",$);return J.substring($,H>0?H:void 0)}class $n{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,H){H||(H=0);const Z=this.W_;if("string"==typeof $)for(let Ut=0;Ut<16;Ut++)Z[Ut]=$.charCodeAt(H)<<24|$.charCodeAt(H+1)<<16|$.charCodeAt(H+2)<<8|$.charCodeAt(H+3),H+=4;else for(let Ut=0;Ut<16;Ut++)Z[Ut]=$[H]<<24|$[H+1]<<16|$[H+2]<<8|$[H+3],H+=4;for(let Ut=16;Ut<80;Ut++){const Yn=Z[Ut-3]^Z[Ut-8]^Z[Ut-14]^Z[Ut-16];Z[Ut]=4294967295&(Yn<<1|Yn>>>31)}let fn,En,K=this.chain_[0],Ne=this.chain_[1],Ye=this.chain_[2],vt=this.chain_[3],Tn=this.chain_[4];for(let Ut=0;Ut<80;Ut++){Ut<40?Ut<20?(fn=vt^Ne&(Ye^vt),En=1518500249):(fn=Ne^Ye^vt,En=1859775393):Ut<60?(fn=Ne&Ye|vt&(Ne|Ye),En=2400959708):(fn=Ne^Ye^vt,En=3395469782);const Yn=(K<<5|K>>>27)+fn+Tn+En+Z[Ut]&4294967295;Tn=vt,vt=Ye,Ye=4294967295&(Ne<<30|Ne>>>2),Ne=K,K=Yn}this.chain_[0]=this.chain_[0]+K&4294967295,this.chain_[1]=this.chain_[1]+Ne&4294967295,this.chain_[2]=this.chain_[2]+Ye&4294967295,this.chain_[3]=this.chain_[3]+vt&4294967295,this.chain_[4]=this.chain_[4]+Tn&4294967295}update($,H){if(null==$)return;void 0===H&&(H=$.length);const Z=H-this.blockSize;let K=0;const Ne=this.buf_;let Ye=this.inbuf_;for(;K<H;){if(0===Ye)for(;K<=Z;)this.compress_($,K),K+=this.blockSize;if("string"==typeof $){for(;K<H;)if(Ne[Ye]=$.charCodeAt(K),++Ye,++K,Ye===this.blockSize){this.compress_(Ne),Ye=0;break}}else for(;K<H;)if(Ne[Ye]=$[K],++Ye,++K,Ye===this.blockSize){this.compress_(Ne),Ye=0;break}}this.inbuf_=Ye,this.total_+=H}digest(){const $=[];let H=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let K=this.blockSize-1;K>=56;K--)this.buf_[K]=255&H,H/=256;this.compress_(this.buf_);let Z=0;for(let K=0;K<5;K++)for(let Ne=24;Ne>=0;Ne-=8)$[Z]=this.chain_[K]>>Ne&255,++Z;return $}}function Di(J,$){const H=new Mn(J,$);return H.subscribe.bind(H)}class Mn{constructor($,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{$(this)}).catch(Z=>{this.error(Z)})}next($){this.forEachObserver(H=>{H.next($)})}error($){this.forEachObserver(H=>{H.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,H,Z){let K;if(void 0===$&&void 0===H&&void 0===Z)throw new Error("Missing Observer.");K=function as(J,$){if("object"!=typeof J||null===J)return!1;for(const H of $)if(H in J&&"function"==typeof J[H])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:H,complete:Z},void 0===K.next&&(K.next=Bs),void 0===K.error&&(K.error=Bs),void 0===K.complete&&(K.complete=Bs);const Ne=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),Ne}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,$)}sendOne($,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{H(this.observers[$])}catch(Z){typeof console<"u"&&console.error&&console.error(Z)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bs(){}const Un=function(J,$,H,Z){let K;if(Z<$?K="at least "+$:Z>H&&(K=0===H?"none":"no more than "+H),K)throw new Error(J+" failed: Was called with "+Z+(1===Z?" argument.":" arguments.")+" Expects "+K+".")};function Jr(J,$){return`${J} failed: ${$} argument `}function _n(J,$,H,Z){if((!Z||H)&&"function"!=typeof H)throw new Error(Jr(J,$)+"must be a valid function.")}function Cn(J,$,H,Z){if((!Z||H)&&("object"!=typeof H||null===H))throw new Error(Jr(J,$)+"must be a valid context object.")}const Tt=function(J){const $=[];let H=0;for(let Z=0;Z<J.length;Z++){let K=J.charCodeAt(Z);if(K>=55296&&K<=56319){const Ne=K-55296;Z++,te(Z<J.length,"Surrogate pair missing trail surrogate."),K=65536+(Ne<<10)+(J.charCodeAt(Z)-56320)}K<128?$[H++]=K:K<2048?($[H++]=K>>6|192,$[H++]=63&K|128):K<65536?($[H++]=K>>12|224,$[H++]=K>>6&63|128,$[H++]=63&K|128):($[H++]=K>>18|240,$[H++]=K>>12&63|128,$[H++]=K>>6&63|128,$[H++]=63&K|128)}return $},xt=function(J){let $=0;for(let H=0;H<J.length;H++){const Z=J.charCodeAt(H);Z<128?$++:Z<2048?$+=2:Z>=55296&&Z<=56319?($+=4,H++):$+=3}return $},Kn=1e3,Gn=2,Vs=144e5,Hr=.5;function Oa(J,$=Kn,H=Gn){const Z=$*Math.pow(H,J),K=Math.round(Hr*Z*(Math.random()-.5)*2);return Math.min(Vs,Z+K)}function Xt(J){return J&&J._delegate?J._delegate:J}},9200:(mt,Ae,U)=>{var o=U(4650);let te=null;function L(){return te}class oe{}const ie=new o.OlP("DocumentToken");let Ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function ye(){return(0,o.LFG)(z)}()},providedIn:"platform"}),n})();const _e=new o.OlP("Location Initialized");let z=(()=>{class n extends Ce{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){q()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){q()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ie))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function ee(){return new z((0,o.LFG)(ie))}()},providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function Ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Qe(n){return n&&"?"!==n[0]?"?"+n:n}let ut=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(Me)},providedIn:"root"}),n})();const be=new o.OlP("appBaseHref");let Me=(()=>{class n extends ut{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,o.f3M)(ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const c=this.prepareExternalUrl(i+Qe(s));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){const c=this.prepareExternalUrl(i+Qe(s));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Ce),o.LFG(be,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oe=(()=>{class n extends ut{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let c=this.prepareExternalUrl(i+Qe(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,s){let c=this.prepareExternalUrl(i+Qe(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Ce),o.LFG(be,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n{constructor(t){this._subject=new o.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ze(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(ke(Pe(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qe(r))}normalize(t){return n.stripTrailingSlash(function Se(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Pe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Qe,n.joinWithSlash=Ke,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(o.LFG(ut))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function xe(){return new $e((0,o.LFG)(ut))}()},providedIn:"root"}),n})();function Pe(n){return n.replace(/\/index.html$/,"")}function zo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}const $i=/\s+/,it=[];let Bt=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=it,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split($i):it}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split($i):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split($i).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.ZZ4),o.Y36(o.aQg),o.Y36(o.SBq),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ir{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let sr=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ir(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===s?void 0:s);else if(null!==s){const d=r.get(s);r.move(d,c),Bn(d,i)}});for(let i=0,s=r.length;i<s;i++){const d=r.get(i).context;d.index=i,d.count=s,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Bn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Bn(n,e){n.context.$implicit=e.item}let fr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Gt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ku("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ku("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Gt{constructor(){this.$implicit=null,this.ngIf=null}}function Ku(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(e)}'.`)}function Cs(n,e){return new o.vHH(2100,!1)}class qi{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Th{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Ua=new Th,Wo=new qi;let ni=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,o.QGY)(t))return Ua;if((0,o.F4k)(t))return Wo;throw Cs()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.sBO,16))},n.\u0275pipe=o.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),zi=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw Cs();return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=o.Yjl({name:"uppercase",type:n,pure:!0,standalone:!0}),n})(),Gr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const ed="browser",mi="server";function bo(n){return n===ed}function Ac(n){return n===mi}let ja=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new xc((0,o.LFG)(ie),window)}),n})();class xc{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Jo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const c=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ha(this.window.history)||Ha(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ha(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class nd{}class Co extends oe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ol extends Co{static makeCurrent(){!function le(n){te||(te=n)}(new Ol)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ya(){return Rl=Rl||document.querySelector("base"),Rl?Rl.getAttribute("href"):null}();return null==t?null:function Zi(n){To=To||document.createElement("a"),To.setAttribute("href",n);const e=To.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Rl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return zo(document.cookie,e)}}let To,Rl=null;const jc=new o.OlP("TRANSITION_ID"),ra=[{provide:o.ip1,useFactory:function Ph(n,e,t){return()=>{t.get(o.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[jc,ie,o.zs3],multi:!0}];let Pp=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const ia=new o.OlP("EventManagerPlugins");let Ml=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const c=i[s];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ia),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Vn{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Pl=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let s=i.get(t)??0;return s+=r,s>0?i.set(t,s):i.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Zs=(()=>{class n extends Pl{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(s=>s.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ie))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Ws={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Qa=/%COMP%/g,Ja=new o.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ul(n,e){return e.flat(100).map(t=>t.replace(Qa,n))}function Gc(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Zr=(()=>{class n{constructor(t,r,i,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new Bl(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof gd?i.applyToHost(t):i instanceof jl&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const c=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestory;switch(r.encapsulation){case o.ifc.Emulated:s=new gd(c,d,r,this.appId,f);break;case o.ifc.ShadowDom:return new qc(c,d,t,r);default:s=new jl(c,d,r,f)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Ml),o.LFG(Zs),o.LFG(o.AFp),o.LFG(Ja))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Bl{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ws[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Vl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Vl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Ws[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ws[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(o.JOm.DashCase|o.JOm.Important)?e.style.setProperty(t,r,i&o.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&o.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Gc(r)):this.eventManager.addEventListener(e,t,Gc(r))}}function Vl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class qc extends Bl{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Ul(i.id,i.styles);for(const c of s){const d=document.createElement("style");d.textContent=c,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class jl extends Bl{constructor(e,t,r,i,s=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Ul(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class gd extends jl{constructor(e,t,r,i,s){const c=i+"-"+r.id;super(e,t,r,s,c),this.contentAttr=function Xa(n){return"_ngcontent-%COMP%".replace(Qa,n)}(c),this.hostAttr=function Ll(n){return"_nghost-%COMP%".replace(Qa,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let sa=(()=>{class n extends Vn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ie))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Hl=["alt","control","meta","shift"],Lh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ds={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let zc=(()=>{class n extends Vn{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,s.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let c="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),c="code."),Hl.forEach(y=>{const w=r.indexOf(y);w>-1&&(r.splice(w,1),c+=y+".")}),c+=s,0!=r.length||0===s.length)return null;const f={};return f.domEventName=i,f.fullKey=c,f}static matchEventFullKeyCode(t,r){let i=Lh[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Hl.forEach(c=>{c!==i&&(0,Ds[c])(t)&&(s+=c+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ie))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Vh=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:ed},{provide:o.g9A,useValue:function ds(){Ol.makeCurrent()},multi:!0},{provide:ie,useFactory:function Bh(){return(0,o.RDi)(document),document},deps:[]}]),md=new o.OlP(""),Kc=[{provide:o.rWj,useClass:class Fh{addToWindow(e){o.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},o.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(r=>{const i=o.dqk.getAllAngularTestabilities();let s=i.length,c=!1;const d=function(f){c=c||f,s--,0==s&&r(c)};i.forEach(function(f){f.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:o.lri,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]}],Ys=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function o_(){return new o.qLn},deps:[]},{provide:ia,useClass:sa,multi:!0,deps:[ie,o.R0b,o.Lbi]},{provide:ia,useClass:zc,multi:!0,deps:[ie]},{provide:Zr,useClass:Zr,deps:[Ml,Zs,o.AFp,Ja]},{provide:o.FYo,useExisting:Zr},{provide:Pl,useExisting:Zs},{provide:Zs,useClass:Zs,deps:[ie]},{provide:Ml,useClass:Ml,deps:[ia,o.R0b]},{provide:nd,useClass:Pp,deps:[]},[]];let tl=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:o.AFp,useValue:t.appId},{provide:jc,useExisting:o.AFp},ra]}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(md,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[...Ys,...Kc],imports:[Gr,o.hGG]}),n})(),Lp=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ie))},n.\u0275prov=o.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function $l(){return new Lp((0,o.LFG)(ie))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let $h=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):o.LFG(l_),r},providedIn:"root"}),n})(),l_=(()=>{class n extends $h{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case o.q3G.NONE:return r;case o.q3G.HTML:return(0,o.qzn)(r,"HTML")?(0,o.z3N)(r):(0,o.EiD)(this._doc,String(r)).toString();case o.q3G.STYLE:return(0,o.qzn)(r,"Style")?(0,o.z3N)(r):r;case o.q3G.SCRIPT:if((0,o.qzn)(r,"Script"))return(0,o.z3N)(r);throw new Error("unsafe value used in a script context");case o.q3G.URL:return(0,o.qzn)(r,"URL")?(0,o.z3N)(r):(0,o.mCW)(String(r));case o.q3G.RESOURCE_URL:if((0,o.qzn)(r,"ResourceURL"))return(0,o.z3N)(r);throw new Error(`unsafe value used in a resource URL context (see ${o.JZr})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${o.JZr})`)}}bypassSecurityTrustHtml(t){return(0,o.JVY)(t)}bypassSecurityTrustStyle(t){return(0,o.L6k)(t)}bypassSecurityTrustScript(t){return(0,o.eBb)(t)}bypassSecurityTrustUrl(t){return(0,o.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,o.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ie))},n.\u0275prov=o.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Gh(n){return new l_(n.get(ie))}(o.LFG(o.zs3)),r},providedIn:"root"}),n})();var Ht=U(8996),mr=U(3269);function Re(...n){const e=(0,mr.yG)(n);return(0,Ht.D)(n,e)}var cn=U(7579);class _r extends cn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const rl=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var vn=U(9751);const{isArray:Hp}=Array,{getPrototypeOf:qh,prototype:ql,keys:zl}=Object;function ru(n){if(1===n.length){const e=n[0];if(Hp(e))return{args:e,keys:null};if(function iu(n){return n&&"object"==typeof n&&qh(n)===ql}(e)){const t=zl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var I=U(4671),S=U(4004);const{isArray:O}=Array;function X(n){return(0,S.U)(e=>function j(n,e){return O(e)?n(...e):n(e)}(n,e))}function ce(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var ve=U(5403),Xe=U(9672);function bt(...n){const e=(0,mr.yG)(n),t=(0,mr.jO)(n),{args:r,keys:i}=ru(n);if(0===r.length)return(0,Ht.D)([],e);const s=new vn.y(function It(n,e,t=I.y){return r=>{Pt(e,()=>{const{length:i}=n,s=new Array(i);let c=i,d=i;for(let f=0;f<i;f++)Pt(e,()=>{const y=(0,Ht.D)(n[f],e);let w=!1;y.subscribe((0,ve.x)(r,E=>{s[f]=E,w||(w=!0,d--),d||r.next(t(s.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>ce(i,c):I.y));return t?s.pipe(X(t)):s}function Pt(n,e,t){n?(0,Xe.f)(t,n,e):e()}var wt=U(8189);function yr(...n){return function Or(){return(0,wt.J)(1)}()((0,Ht.D)(n,(0,mr.yG)(n)))}var ii=U(8421);function il(n){return new vn.y(e=>{(0,ii.Xf)(n()).subscribe(e)})}var aa=U(9635),As=U(576);function So(n,e){const t=(0,As.m)(n)?n:()=>n,r=i=>i.error(t());return new vn.y(e?i=>e.schedule(r,0,i):r)}var ar=U(515),Js=U(727),Sn=U(4482);function Zl(){return(0,Sn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ve.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class $p extends vn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Sn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Js.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ve.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Js.w0.EMPTY)}return e}refCount(){return Zl()(this)}}function Pn(n,e){return(0,Sn.e)((t,r)=>{let i=null,s=0,c=!1;const d=()=>c&&!i&&r.complete();t.subscribe((0,ve.x)(r,f=>{i?.unsubscribe();let y=0;const w=s++;(0,ii.Xf)(n(f,w)).subscribe(i=(0,ve.x)(r,E=>r.next(e?e(f,E,w,y++):E),()=>{i=null,d()}))},()=>{c=!0,d()}))})}function si(n){return n<=0?()=>ar.E:(0,Sn.e)((e,t)=>{let r=0;e.subscribe((0,ve.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function la(...n){const e=(0,mr.yG)(n);return(0,Sn.e)((t,r)=>{(e?yr(n,t,e):yr(n,t)).subscribe(r)})}function Rr(n,e){return(0,Sn.e)((t,r)=>{let i=0;t.subscribe((0,ve.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var Jn=U(5577);function Gp(n){return(0,Sn.e)((e,t)=>{let r=!1;e.subscribe((0,ve.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Qv(n=qp){return(0,Sn.e)((e,t)=>{let r=!1;e.subscribe((0,ve.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function qp(){return new rl}function ca(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Rr((i,s)=>n(i,s,r)):I.y,si(1),t?Gp(e):Qv(()=>new rl))}function Wl(n,e){return(0,As.m)(e)?(0,Jn.z)(n,e,1):(0,Jn.z)(n,1)}var oi=U(8505);function Kl(n){return(0,Sn.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,ve.x)(t,void 0,void 0,c=>{s=(0,ii.Xf)(n(c,Kl(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function ua(n,e){return(0,Sn.e)(function yT(n,e,t,r,i){return(s,c)=>{let d=t,f=e,y=0;s.subscribe((0,ve.x)(c,w=>{const E=y++;f=d?n(f,w,E):(d=!0,w),r&&c.next(f)},i&&(()=>{d&&c.next(f),c.complete()})))}}(n,e,arguments.length>=2,!0))}function zh(n){return n<=0?()=>ar.E:(0,Sn.e)((e,t)=>{let r=[];e.subscribe((0,ve.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Zh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Rr((i,s)=>n(i,s,r)):I.y,zh(1),t?Gp(e):Qv(()=>new rl))}function Wh(n){return(0,S.U)(()=>n)}function Kh(n){return(0,Sn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const St="primary",wd=Symbol("RouteTitle");class Jv{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function su(n){return new Jv(n)}function u_(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const c=r[s],d=n[s];if(c.startsWith(":"))i[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Io(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Yh(n[i],e[i]))return!1;return!0}function Yh(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function d_(n){return Array.prototype.concat.apply([],n)}function Qh(n){return n.length>0?n[n.length-1]:null}function Mr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function lr(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,Ht.D)(Promise.resolve(n)):Re(n)}const Yl=!1,zp={exact:function h_(n,e,t){if(!ha(n.segments,e.segments)||!ou(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!h_(n.children[r],e.children[r],t))return!1;return!0},subset:f_},Jh={exact:function Td(n,e){return Io(n,e)},subset:function sl(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Yh(n[t],e[t]))},ignored:()=>!0};function ai(n,e,t){return zp[t.paths](n.root,e.root,t.matrixParams)&&Jh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function f_(n,e,t){return Zp(n,e,e.segments,t)}function Zp(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ha(i,t)||e.hasChildren()||!ou(i,t,r))}if(n.segments.length===t.length){if(!ha(n.segments,t)||!ou(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!f_(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ha(n.segments,i)&&ou(n.segments,i,r)&&n.children[St])&&Zp(n.children[St],e,s,r)}}function ou(n,e,t){return e.every((r,i)=>Jh[t](n[i].parameters,r.parameters))}class da{constructor(e=new zt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=su(this.queryParams)),this._queryParamMap}toString(){return Dd.serialize(this)}}class zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Mr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xh(this)}}class au{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=su(this.parameters)),this._parameterMap}toString(){return tf(this)}}function ha(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ql=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return new Ed},providedIn:"root"}),n})();class Ed{parse(e){const t=new Jp(e);return new da(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Sd(e.root,!0)}`,r=function e0(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${lu(t)}=${lu(i)}`).join("&"):`${lu(t)}=${lu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Kp(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Dd=new Ed;function Xh(n){return n.segments.map(e=>tf(e)).join("/")}function Sd(n,e){if(!n.hasChildren())return Xh(n);if(e){const t=n.children[St]?Sd(n.children[St],!1):"",r=[];return Mr(n.children,(i,s)=>{s!==St&&r.push(`${s}:${Sd(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Wp(n,e){let t=[];return Mr(n.children,(r,i)=>{i===St&&(t=t.concat(e(r,i)))}),Mr(n.children,(r,i)=>{i!==St&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===St?[Sd(n.children[St],!1)]:[`${i}:${Sd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[St]?`${Xh(n)}/${t[0]}`:`${Xh(n)}/(${t.join("//")})`}}function ef(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lu(n){return ef(n).replace(/%3B/gi,";")}function Ao(n){return ef(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cu(n){return decodeURIComponent(n)}function Yp(n){return cu(n.replace(/\+/g,"%20"))}function tf(n){return`${Ao(n.path)}${function Id(n){return Object.keys(n).map(e=>`;${Ao(e)}=${Ao(n[e])}`).join("")}(n.parameters)}`}const t0=/^[^\/()?;=#]+/;function Jl(n){const e=n.match(t0);return e?e[0]:""}const n0=/^[^=?&#]+/,s0=/^[^&#]+/;class Jp{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zt([],{}):new zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[St]=new zt(e,t)),r}parseSegment(){const e=Jl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new o.vHH(4009,Yl);return this.capture(e),new au(cu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Jl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Jl(this.remaining);i&&(r=i,this.capture(r))}e[cu(t)]=cu(r)}parseQueryParam(e){const t=function r0(n){const e=n.match(n0);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Qp(n){const e=n.match(s0);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Yp(t),s=Yp(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Jl(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new o.vHH(4010,Yl);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=St);const c=this.parseChildren();t[s]=1===Object.keys(c).length?c[St]:new zt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new o.vHH(4011,Yl)}}function nf(n){return n.segments.length>0?new zt([],{[St]:n}):n}function uu(n){const e={};for(const r of Object.keys(n.children)){const s=uu(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function o0(n){if(1===n.numberOfChildren&&n.children[St]){const e=n.children[St];return new zt(n.segments.concat(e.segments),e.children)}return n}(new zt(n.segments,e))}function Xs(n){return n instanceof da}const rf=!1;function g_(n,e,t,r,i){if(0===t.length)return eo(e.root,e.root,e.root,r,i);const s=function eg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new af(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Mr(s.outlets,(f,y)=>{d[y]="string"==typeof f?f.split("/"):f}),[...i,{outlets:d}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===c?(s.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,s]},[]);return new af(t,e,r)}(t);return s.toRoot()?eo(e.root,e.root,new zt([],{}),r,i):function c(f){const y=function Wi(n,e,t,r){if(n.isAbsolute)return new fa(e.root,!0,0);if(-1===r)return new fa(t,t===e.root,0);return function pa(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new o.vHH(4005,rf&&"Invalid number of '../'");i=r.segments.length}return new fa(r,!1,i-s)}(t,r+(Ad(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,f),w=y.processChildren?No(y.segmentGroup,y.index,s.commands):lf(y.segmentGroup,y.index,s.commands);return eo(e.root,y.segmentGroup,w,r,i)}(n.snapshot?._lastPathIndex)}function Ad(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Nd(n){return"object"==typeof n&&null!=n&&n.outlets}function eo(n,e,t,r,i){let c,s={};r&&Mr(r,(f,y)=>{s[y]=Array.isArray(f)?f.map(w=>`${w}`):`${f}`}),c=n===e?t:sf(n,e,t);const d=nf(uu(c));return new da(d,s,i)}function sf(n,e,t){const r={};return Mr(n.children,(i,s)=>{r[s]=i===e?t:sf(i,e,t)}),new zt(n.segments,r)}class af{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ad(r[0]))throw new o.vHH(4003,rf&&"Root segment cannot have matrix parameters");const i=r.find(Nd);if(i&&i!==Qh(r))throw new o.vHH(4004,rf&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fa{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function lf(n,e,t){if(n||(n=new zt([],{})),0===n.segments.length&&n.hasChildren())return No(n,e,t);const r=function kd(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const c=n.segments[i],d=t[r];if(Nd(d))break;const f=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===f)break;if(f&&y&&"object"==typeof y&&void 0===y.outlets){if(!xo(f,y,c))return s;r+=2}else{if(!xo(f,{},c))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new zt(n.segments.slice(0,r.pathIndex),{});return s.children[St]=new zt(n.segments.slice(r.pathIndex),n.children),No(s,0,i)}return r.match&&0===i.length?new zt(n.segments,{}):r.match&&!n.hasChildren()?Od(n,e,t):r.match?No(n,0,i):Od(n,e,t)}function No(n,e,t){if(0===t.length)return new zt(n.segments,{});{const r=function xd(n){return Nd(n[0])?n[0].outlets:{[St]:n}}(t),i={};if(!r[St]&&n.children[St]&&1===n.numberOfChildren&&0===n.children[St].segments.length){const s=No(n.children[St],e,t);return new zt(n.segments,s.children)}return Mr(r,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[c]=lf(n.children[c],e,s))}),Mr(n.children,(s,c)=>{void 0===r[c]&&(i[c]=s)}),new zt(n.segments,i)}}function Od(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Nd(s)){const f=du(s.outlets);return new zt(r,f)}if(0===i&&Ad(t[0])){r.push(new au(n.segments[e].path,m_(t[0]))),i++;continue}const c=Nd(s)?s.outlets[St]:`${s}`,d=i<t.length-1?t[i+1]:null;c&&d&&Ad(d)?(r.push(new au(c,m_(d))),i+=2):(r.push(new au(c,{})),i++)}return new zt(r,{})}function du(n){const e={};return Mr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Od(new zt([],{}),0,t))}),e}function m_(n){const e={};return Mr(n,(t,r)=>e[r]=`${t}`),e}function xo(n,e,t){return n==t.path&&Io(e,t.parameters)}const hu="imperative";class ko{constructor(e,t){this.id=e,this.url=t}}class ng extends ko{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class al extends ko{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fu extends ko{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vr extends ko{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Xl extends ko{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ll extends ko{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class a0 extends ko{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ga extends ko{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cf extends ko{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class __ extends ko{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uf{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class l0{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class df{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hf{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rg{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class y_{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ig{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let _=(()=>{class n{createUrlTree(t,r,i,s,c,d){return g_(t||r.root,i,s,c,d)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(e){return _.\u0275fac(e)},providedIn:"root"}),n})();class P{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Y(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Y(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ue(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ue(e,this._root).map(t=>t.value)}}function Y(n,e){if(n===e.value)return e;for(const t of e.children){const r=Y(n,t);if(r)return r}return null}function ue(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ue(n,t);if(r.length)return r.unshift(e),r}return[]}class Ue{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function st(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class At extends P{constructor(e,t){super(e),this.snapshot=t,ff(this,e)}toString(){return this.snapshot.toString()}}function Et(n,e){const t=function Pr(n,e){const c=new pu([],{},{},"",{},St,e,null,n.root,-1,{});return new og("",new Ue(c,[]))}(n,e),r=new _r([new au("",{})]),i=new _r({}),s=new _r({}),c=new _r({}),d=new _r(""),f=new vi(r,i,c,d,s,St,e,t.root);return f.snapshot=t.root,new At(new Ue(f,[]),t)}class vi{constructor(e,t,r,i,s,c,d,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=d,this.title=this.data?.pipe((0,S.U)(y=>y[wd]))??Re(void 0),this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,S.U)(e=>su(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,S.U)(e=>su(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Rd(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function sg(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class pu{get title(){return this.data?.[wd]}constructor(e,t,r,i,s,c,d,f,y,w,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=d,this.routeConfig=f,this._urlSegment=y,this._lastPathIndex=w,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=su(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=su(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class og extends P{constructor(e,t){super(t),this.url=e,ff(this,t)}toString(){return pf(this._root)}}function ff(n,e){e.value._routerState=n,e.children.forEach(t=>ff(n,t))}function pf(n){const e=n.children.length>0?` { ${n.children.map(pf).join(", ")} } `:"";return`${n.value}${e}`}function ec(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Io(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Io(e.params,t.params)||n.params.next(t.params),function Cd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Io(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Io(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ns(n,e){const t=Io(n.params,e.params)&&function Xv(n,e){return ha(n,e)&&n.every((t,r)=>Io(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ns(n.parent,e.parent))}function nc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function v_(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return nc(n,r,i);return nc(n,r)})}(n,e,t);return new Ue(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(d=>nc(n,d)),c}}const r=function gf(n){return new vi(new _r(n.url),new _r(n.params),new _r(n.queryParams),new _r(n.fragment),new _r(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>nc(n,s));return new Ue(r,i)}}const b_="ngNavigationCancelingError";function wA(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Xs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=CA(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function CA(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[b_]=!0,r.cancellationCode=e,t&&(r.url=t),r}function w_(n){return C_(n)&&Xs(n.url)}function C_(n){return n&&n[b_]}class EL{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new T_,this.attachRef=null}}let T_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new EL,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ag=!1;let E_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=St,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.parentContexts=(0,o.f3M)(T_),this.location=(0,o.f3M)(o.s_b),this.changeDetector=(0,o.f3M)(o.sBO),this.environmentInjector=(0,o.f3M)(o.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new o.vHH(4012,ag);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new o.vHH(4012,ag);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new o.vHH(4012,ag);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new o.vHH(4013,ag);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,f=new TA(t,d,i.injector);if(r&&function EA(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(c);this.activated=i.createComponent(y,i.length,f)}else this.activated=i.createComponent(c,{index:i.length,injector:f,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[o.TTD]}),n})();class TA{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===vi?this.route:e===T_?this.childContexts:this.parent.get(e,t)}}let c0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[o.jDz],decls:1,vars:0,template:function(t,r){1&t&&o._UZ(0,"router-outlet")},dependencies:[E_],encapsulation:2}),n})();function u0(n,e){return n.providers&&!n._injector&&(n._injector=(0,o.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function D_(n){const e=n.children&&n.children.map(D_),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==St&&(t.component=c0),t}function Oo(n){return n.outlet||St}function TT(n,e){const t=n.filter(r=>Oo(r)===e);return t.push(...n.filter(r=>Oo(r)!==e)),t}function lg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ET{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ec(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=st(t);e.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,i[c],r),delete i[c]}),Mr(i,(s,c)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=st(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);if(r&&r.outlet){const c=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=st(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=st(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new y_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new hf(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(ec(i),i===s)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),ec(d.route.value),this.activateChildRoutes(e,null,c.children)}else{const d=lg(i.snapshot),f=d?.get(o._Vd)??null;c.attachRef=null,c.route=i,c.resolver=f,c.injector=d,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class AA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class h0{constructor(e,t){this.component=e,this.route=t}}function cg(n,e,t){const r=n._root;return mf(r,e?e._root:null,t,[r.value])}function Md(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,o.Z0I)(n)?e.get(n):n:r}function mf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=st(e);return n.children.forEach(c=>{(function DT(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const f=function NA(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ha(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ha(n.url,e.url)||!Io(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ns(n,e)||!Io(n.queryParams,e.queryParams);default:return!Ns(n,e)}}(c,s,s.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new AA(r)):(s.data=c.data,s._resolvedData=c._resolvedData),mf(n,e,s.component?d?d.children:null:t,r,i),f&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new h0(d.outlet.component,c))}else c&&ug(e,d,i),i.canActivateChecks.push(new AA(r)),mf(n,null,s.component?d?d.children:null:t,r,i)})(c,s[c.value.outlet],t,r.concat([c.value]),i),delete s[c.value.outlet]}),Mr(s,(c,d)=>ug(c,t.getContext(d),i)),i}function ug(n,e,t){const r=st(n),i=n.value;Mr(r,(s,c)=>{ug(s,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new h0(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function _f(n){return"function"==typeof n}function rc(n){return n instanceof rl||"EmptyError"===n?.name}const S_=Symbol("INITIAL_VALUE");function gu(){return Pn(n=>bt(n.map(e=>e.pipe(si(1),la(S_)))).pipe((0,S.U)(e=>{for(const t of e)if(!0!==t){if(t===S_)return S_;if(!1===t||t instanceof da)return t}return!0}),Rr(e=>e!==S_),si(1)))}function v0(n){return(0,aa.z)((0,oi.b)(e=>{if(Xs(e))throw wA(0,e)}),(0,S.U)(e=>!0===e))}const b0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function NT(n,e,t,r,i){const s=w0(n,e,t);return s.matched?function yf(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Re(i.map(c=>{const d=Md(c,n);return lr(function m0(n){return n&&_f(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(gu(),v0()):Re(!0)}(r=u0(e,r),e,t).pipe((0,S.U)(c=>!0===c?s:{...b0})):Re(s)}function w0(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...b0}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||u_)(t,n,e);if(!i)return{...b0};const s={};Mr(i.posParams,(d,f)=>{s[f]=d.path});const c=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function vf(n,e,t,r){if(t.length>0&&function FA(n,e,t){return t.some(r=>C0(n,e,r)&&Oo(r)!==St)}(n,t,r)){const s=new zt(e,function xT(n,e,t,r){const i={};i[St]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Oo(s)!==St){const c=new zt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Oo(s)]=c}return i}(n,e,r,new zt(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function kT(n,e,t){return t.some(r=>C0(n,e,r))}(n,t,r)){const s=new zt(n.segments,function PA(n,e,t,r,i){const s={};for(const c of r)if(C0(n,t,c)&&!i[Oo(c)]){const d=new zt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,s[Oo(c)]=d}return{...i,...s}}(n,e,t,r,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const i=new zt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function C0(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function OT(n,e,t,r){return!!(Oo(n)===r||r!==St&&C0(e,t,n))&&("**"===n.path||w0(e,n,t).matched)}function bf(n,e,t){return 0===e.length&&!n.children[t]}const N_=!1;class ic{constructor(e){this.segmentGroup=e||null}}class wf{constructor(e){this.urlTree=e}}function dg(n){return So(new ic(n))}function T0(n){return So(new wf(n))}class RT{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=vf(this.urlTree.root,[],[],this.config).segmentGroup,t=new zt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,St).pipe((0,S.U)(s=>this.createUrlTree(uu(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Kl(s=>{if(s instanceof wf)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof ic?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,St).pipe((0,S.U)(i=>this.createUrlTree(uu(i),e.queryParams,e.fragment))).pipe(Kl(i=>{throw i instanceof ic?this.noMatchError(i):i}))}noMatchError(e){return new o.vHH(4002,N_)}createUrlTree(e,t,r){const i=nf(e);return new da(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,S.U)(s=>new zt([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Ht.D)(i).pipe(Wl(s=>{const c=r.children[s],d=TT(t,s);return this.expandSegmentGroup(e,d,c,s).pipe((0,S.U)(f=>({segment:f,outlet:s})))}),ua((s,c)=>(s[c.outlet]=c.segment,s),{}),Zh())}expandSegment(e,t,r,i,s,c){return(0,Ht.D)(r).pipe(Wl(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,s,c).pipe(Kl(y=>{if(y instanceof ic)return Re(null);throw y}))),ca(d=>!!d),Kl((d,f)=>{if(rc(d))return bf(t,i,s)?Re(new zt([],{})):dg(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,s,c,d){return OT(i,t,s,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c):dg(t):dg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?T0(s):this.lineralizeSegments(r,s).pipe((0,Jn.z)(c=>{const d=new zt(c,{});return this.expandSegment(e,d,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,c){const{matched:d,consumedSegments:f,remainingSegments:y,positionalParamSegments:w}=w0(t,i,s);if(!d)return dg(t);const E=this.applyRedirectCommands(f,i.redirectTo,w);return i.redirectTo.startsWith("/")?T0(E):this.lineralizeSegments(i,E).pipe((0,Jn.z)(A=>this.expandSegment(e,t,r,A.concat(y),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=u0(r,e),r.loadChildren?(r._loadedRoutes?Re({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,S.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new zt(i,{})))):Re(new zt(i,{}))):NT(t,r,i,e).pipe(Pn(({matched:c,consumedSegments:d,remainingSegments:f})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Jn.z)(w=>{const E=w.injector??e,A=w.routes,{segmentGroup:k,slicedSegments:M}=vf(t,d,f,A),V=new zt(k.segments,k.children);if(0===M.length&&V.hasChildren())return this.expandChildren(E,A,V).pipe((0,S.U)(Ie=>new zt(d,Ie)));if(0===A.length&&0===M.length)return Re(new zt(d,{}));const W=Oo(r)===s;return this.expandSegment(E,V,A,M,W?St:s,!0).pipe((0,S.U)(he=>new zt(d.concat(he.segments),he.children)))})):dg(t)))}getChildConfig(e,t,r){return t.children?Re({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Re({routes:t._loadedRoutes,injector:t._loadedInjector}):function MA(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Re(!0):Re(i.map(c=>{const d=Md(c,n);return lr(function p0(n){return n&&_f(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(gu(),v0())}(e,t,r).pipe((0,Jn.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,oi.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function UA(n){return So(CA(N_,3))}())):Re({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Re(r);if(i.numberOfChildren>1||!i.children[St])return e.redirectTo,So(new o.vHH(4e3,N_));i=i.children[St]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new da(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Mr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[s]=t[d]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let c={};return Mr(t.children,(d,f)=>{c[f]=this.createSegmentGroup(e,d,r,i)}),new zt(s,c)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new o.vHH(4001,N_);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class E0{}class hg{constructor(e,t,r,i,s,c,d){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=c,this.urlSerializer=d}recognize(){const e=vf(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,St).pipe((0,S.U)(t=>{if(null===t)return null;const r=new pu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},St,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ue(r,t),s=new og(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=Rd(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Ht.D)(Object.keys(r.children)).pipe(Wl(i=>{const s=r.children[i],c=TT(t,i);return this.processSegmentGroup(e,c,s,i)}),ua((i,s)=>i&&s?(i.push(...s),i):null),function c_(n,e=!1){return(0,Sn.e)((t,r)=>{let i=0;t.subscribe((0,ve.x)(r,s=>{const c=n(s,i++);(c||e)&&r.next(s),!c&&r.complete()}))})}(i=>null!==i),Gp(null),Zh(),(0,S.U)(i=>{if(null===i)return null;const s=PT(i);return function jA(n){n.sort((e,t)=>e.value.outlet===St?-1:t.value.outlet===St?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,Ht.D)(t).pipe(Wl(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,s)),ca(c=>!!c),Kl(c=>{if(rc(c))return bf(r,i,s)?Re([]):Re(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!OT(t,r,i,s))return Re(null);let c;if("**"===t.path){const d=i.length>0?Qh(i).parameters:{},f=LT(r)+i.length;c=Re({snapshot:new pu(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,cl(t),Oo(t),t.component??t._loadedComponent??null,t,FT(r),f,UT(t)),consumedSegments:[],remainingSegments:[]})}else c=NT(r,t,i,e).pipe((0,S.U)(({matched:d,consumedSegments:f,remainingSegments:y,parameters:w})=>{if(!d)return null;const E=LT(r)+f.length;return{snapshot:new pu(f,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,cl(t),Oo(t),t.component??t._loadedComponent??null,t,FT(r),E,UT(t)),consumedSegments:f,remainingSegments:y}}));return c.pipe(Pn(d=>{if(null===d)return Re(null);const{snapshot:f,consumedSegments:y,remainingSegments:w}=d;e=t._injector??e;const E=t._loadedInjector??e,A=function HA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:k,slicedSegments:M}=vf(r,y,w,A.filter(W=>void 0===W.redirectTo));if(0===M.length&&k.hasChildren())return this.processChildren(E,A,k).pipe((0,S.U)(W=>null===W?null:[new Ue(f,W)]));if(0===A.length&&0===M.length)return Re([new Ue(f,[])]);const V=Oo(t)===s;return this.processSegment(E,A,k,M,V?St:s).pipe((0,S.U)(W=>null===W?null:[new Ue(f,W)]))}))}}function $A(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function PT(n){const e=[],t=new Set;for(const r of n){if(!$A(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=PT(r.children);e.push(new Ue(r.value,i))}return e.filter(r=>!t.has(r))}function FT(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function LT(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function cl(n){return n.data||{}}function UT(n){return n.resolve||{}}function S0(n){return"string"==typeof n.title||null===n.title}function I0(n){return Pn(e=>{const t=n(e);return t?(0,Ht.D)(t).pipe((0,S.U)(()=>e)):Re(e)})}const Cf=new o.OlP("ROUTES");let N0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,o.f3M)(o.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Re(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=lr(t.loadComponent()).pipe((0,S.U)(jT),(0,oi.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Kh(()=>{this.componentLoaders.delete(t)})),i=new $p(r,()=>new cn.x).pipe(Zl());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Re({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,S.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let f,y,w=!1;Array.isArray(d)?y=d:(f=d.create(t).injector,y=d_(f.get(Cf,[],o.XFs.Self|o.XFs.Optional)));return{routes:y.map(D_),injector:f}}),Kh(()=>{this.childrenLoaders.delete(r)})),c=new $p(s,()=>new cn.x).pipe(Zl());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return lr(t()).pipe((0,S.U)(jT),(0,Jn.z)(r=>r instanceof o.YKP||Array.isArray(r)?Re(r):(0,Ht.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jT(n){return function ma(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let k_=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new cn.x,this.configLoader=(0,o.f3M)(N0),this.environmentInjector=(0,o.f3M)(o.lqb),this.urlSerializer=(0,o.f3M)(Ql),this.rootContexts=(0,o.f3M)(T_),this.navigationId=0,this.afterPreactivation=()=>Re(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new l0(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new uf(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new _r({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:hu,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Rr(r=>0!==r.id),(0,S.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Pn(r=>{let i=!1,s=!1;return Re(r).pipe((0,oi.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Pn(c=>{const d=t.browserUrlTree.toString(),f=!t.navigated||c.extractedUrl.toString()!==d||d!==t.currentUrlTree.toString();if(!f&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const w="";return this.events.next(new vr(c.id,t.serializeUrl(r.rawUrl),w,0)),t.rawUrlTree=c.rawUrl,c.resolve(null),ar.E}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return HT(c.source)&&(t.browserUrlTree=c.extractedUrl),Re(c).pipe(Pn(w=>{const E=this.transitions?.getValue();return this.events.next(new ng(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),E!==this.transitions?.getValue()?ar.E:Promise.resolve(w)}),function MT(n,e,t,r){return Pn(i=>function BA(n,e,t,r,i){return new RT(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,S.U)(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,oi.b)(w=>{this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},r.urlAfterRedirects=w.urlAfterRedirects}),function qA(n,e,t,r,i){return(0,Jn.z)(s=>function D0(n,e,t,r,i,s,c="emptyOnly"){return new hg(n,e,t,r,i,c,s).recognize().pipe(Pn(d=>null===d?function VA(n){return new vn.y(e=>e.error(n))}(new E0):Re(d)))}(n,e,t,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe((0,S.U)(c=>({...s,targetSnapshot:c}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,oi.b)(w=>{if(r.targetSnapshot=w.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!w.extras.skipLocationChange){const A=t.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);t.setBrowserUrl(A,w)}t.browserUrlTree=w.urlAfterRedirects}const E=new ll(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(E)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:w,extractedUrl:E,source:A,restoredState:k,extras:M}=c,V=new ng(w,this.urlSerializer.serialize(E),A,k);this.events.next(V);const W=Et(E,this.rootComponentType).snapshot;return Re(r={...c,targetSnapshot:W,urlAfterRedirects:E,extras:{...M,skipLocationChange:!1,replaceUrl:!1}})}{const w="";return this.events.next(new vr(c.id,t.serializeUrl(r.extractedUrl),w,1)),t.rawUrlTree=c.rawUrl,c.resolve(null),ar.E}}),(0,oi.b)(c=>{const d=new a0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),(0,S.U)(c=>r={...c,guards:cg(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function I_(n,e){return(0,Jn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:c}}=t;return 0===c.length&&0===s.length?Re({...t,guardsResult:!0}):function OA(n,e,t,r){return(0,Ht.D)(n).pipe((0,Jn.z)(i=>function RA(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Re(s.map(d=>{const f=lg(e)??i,y=Md(d,f);return lr(function xA(n){return n&&_f(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):f.runInContext(()=>y(n,e,t,r))).pipe(ca())})).pipe(gu()):Re(!0)}(i.component,i.route,t,e,r)),ca(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Jn.z)(d=>d&&function ST(n){return"boolean"==typeof n}(d)?function _0(n,e,t,r){return(0,Ht.D)(e).pipe(Wl(i=>yr(function Pd(n,e){return null!==n&&e&&e(new df(n)),Re(!0)}(i.route.parent,r),function A_(n,e){return null!==n&&e&&e(new rg(n)),Re(!0)}(i.route,r),function y0(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(c=>function f0(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>il(()=>Re(c.guards.map(f=>{const y=lg(c.node)??t,w=Md(f,y);return lr(function g0(n){return n&&_f(n.canActivateChild)}(w)?w.canActivateChild(r,n):y.runInContext(()=>w(r,n))).pipe(ca())})).pipe(gu())));return Re(s).pipe(gu())}(n,i.path,t),function AT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Re(!0);const i=r.map(s=>il(()=>{const c=lg(e)??t,d=Md(s,c);return lr(function SL(n){return n&&_f(n.canActivate)}(d)?d.canActivate(e,n):c.runInContext(()=>d(e,n))).pipe(ca())}));return Re(i).pipe(gu())}(n,i.route,t))),ca(i=>!0!==i,!0))}(r,s,n,e):Re(d)),(0,S.U)(d=>({...t,guardsResult:d})))})}(this.environmentInjector,c=>this.events.next(c)),(0,oi.b)(c=>{if(r.guardsResult=c.guardsResult,Xs(c.guardsResult))throw wA(0,c.guardsResult);const d=new ga(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),Rr(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),I0(c=>{if(c.guards.canActivateChecks.length)return Re(c).pipe((0,oi.b)(d=>{const f=new cf(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Pn(d=>{let f=!1;return Re(d).pipe(function IL(n,e){return(0,Jn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Re(t);let s=0;return(0,Ht.D)(i).pipe(Wl(c=>function AL(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!S0(i)&&(s[wd]=i.title),function BT(n,e,t,r){const i=function NL(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Re({});const s={};return(0,Ht.D)(i).pipe((0,Jn.z)(c=>function VT(n,e,t,r){const i=lg(e)??r,s=Md(n,i);return lr(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[c],e,t,r).pipe(ca(),(0,oi.b)(d=>{s[c]=d}))),zh(1),Wh(s),Kl(c=>rc(c)?ar.E:So(c)))}(s,n,e,r).pipe((0,S.U)(c=>(n._resolvedData=c,n.data=Rd(n,t).resolve,i&&S0(i)&&(n.data[wd]=i.title),null)))}(c.route,r,n,e)),(0,oi.b)(()=>s++),zh(1),(0,Jn.z)(c=>s===i.length?Re(t):ar.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,oi.b)({next:()=>f=!0,complete:()=>{f||(t.restoreHistory(d),this.cancelNavigationTransition(d,"",2))}}))}),(0,oi.b)(d=>{const f=new __(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),I0(c=>{const d=f=>{const y=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(f.routeConfig).pipe((0,oi.b)(w=>{f.component=w}),(0,S.U)(()=>{})));for(const w of f.children)y.push(...d(w));return y};return bt(d(c.targetSnapshot.root)).pipe(Gp(),si(1))}),I0(()=>this.afterPreactivation()),(0,S.U)(c=>{const d=function tc(n,e,t){const r=nc(n,e._root,t?t._root:void 0);return new At(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:d}}),(0,oi.b)(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,S.U)(r=>(new ET(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c)),si(1),(0,oi.b)({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new al(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),Kh(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Kl(c=>{if(s=!0,C_(c)){w_(c)||(t.navigated=!0,t.restoreHistory(r,!0));const d=new fu(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(d),w_(c)){const f=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),y={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||HT(r.source)};t.scheduleNavigation(f,hu,null,y,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const d=new Xl(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(d);try{r.resolve(t.errorHandler(c))}catch(f){r.reject(f)}}return ar.E}))}))}cancelNavigationTransition(t,r,i){const s=new fu(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function HT(n){return n!==hu}let $T=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===St);return r}getResolvedTitleForRoute(t){return t.data[wd]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(zA)},providedIn:"root"}),n})(),zA=(()=>{class n extends $T{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Lp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),GT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(WA)},providedIn:"root"}),n})();class ZA{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let WA=(()=>{class n extends ZA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vt=new o.OlP("",{providedIn:"root",factory:()=>({})});let qT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(zT)},providedIn:"root"}),n})(),zT=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function YA(n){throw n}function QA(n,e,t){return e.parse("/")}const ZT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let br=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,o.f3M)(o.c2e),this.isNgZoneEnabled=!1,this.options=(0,o.f3M)(Vt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||YA,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||QA,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,o.f3M)(qT),this.routeReuseStrategy=(0,o.f3M)(GT),this.urlCreationStrategy=(0,o.f3M)(x),this.titleStrategy=(0,o.f3M)($T),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=d_((0,o.f3M)(Cf,{optional:!0})??[]),this.navigationTransitions=(0,o.f3M)(k_),this.urlSerializer=(0,o.f3M)(Ql),this.location=(0,o.f3M)($e),this.isNgZoneEnabled=(0,o.f3M)(o.R0b)instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new da,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Et(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),hu,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const f={...i};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(s.state=f)}const d=this.parseUrl(t);this.scheduleNavigation(d,r,c,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(D_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:c,queryParamsHandling:d,preserveFragment:f}=r,y=f?this.currentUrlTree.fragment:c;let w=null;switch(d){case"merge":w={...this.currentUrlTree.queryParams,...s};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}return null!==w&&(w=this.removeEmptyProps(w)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,w,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Xs(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,hu,null,r)}navigate(t,r={skipLocationChange:!1}){return function XA(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new o.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...ZT}:!1===r?{...JA}:r,Xs(t))return ai(this.currentUrlTree,t,i);const s=this.parseUrl(t);return ai(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,c){if(this.disposed)return Promise.resolve(!1);let d,f,y,w;return c?(d=c.resolve,f=c.reject,y=c.promise):y=new Promise((E,A)=>{d=E,f=A}),w="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:w,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:d,reject:f,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(E=>Promise.reject(E))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class k0{}let O0=(()=>{class n{constructor(t,r,i,s,c){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Rr(t=>t instanceof al),Wl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,o.MMx)(s.providers,t,`Route: ${s.path}`));const c=s._injector??t,d=s._loadedInjector??c;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(c,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,Ht.D)(i).pipe((0,wt.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Re(null);const s=i.pipe((0,Jn.z)(c=>null===c?Re(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Ht.D)([s,c]).pipe((0,wt.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(br),o.LFG(o.Sil),o.LFG(o.lqb),o.LFG(k0),o.LFG(N0))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gg=new o.OlP("");let KT=(()=>{class n{constructor(t,r,i,s,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ng?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof al&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ig&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ig(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();var Ro=(()=>((Ro=Ro||{})[Ro.COMPLETE=0]="COMPLETE",Ro[Ro.FAILED=1]="FAILED",Ro[Ro.REDIRECTING=2]="REDIRECTING",Ro))();const mg=!1;function Fd(n,e){return{\u0275kind:n,\u0275providers:e}}const M0=new o.OlP("",{providedIn:"root",factory:()=>!1});function _g(){const n=(0,o.f3M)(o.zs3);return e=>{const t=n.get(o.z2F);if(e!==t.components[0])return;const r=n.get(br),i=n.get(YT);1===n.get(R_)&&r.initialNavigation(),n.get(QT,null,o.XFs.Optional)?.setUpPreloading(),n.get(gg,null,o.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const YT=new o.OlP(mg?"bootstrap done indicator":"",{factory:()=>new cn.x}),R_=new o.OlP(mg?"initial navigation":"",{providedIn:"root",factory:()=>1});function rN(){let n=[];return n=mg?[{provide:o.Xts,multi:!0,useFactory:()=>{const e=(0,o.f3M)(br);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function v(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Fd(1,n)}const QT=new o.OlP(mg?"router preloader":"");function iN(n){return Fd(0,[{provide:QT,useExisting:O0},{provide:k0,useExisting:n}])}const Df=!1,aN=new o.OlP(Df?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),P0=[$e,{provide:Ql,useClass:Ed},br,T_,{provide:vi,useFactory:function R0(n){return n.routerState.root},deps:[br]},N0,Df?{provide:M0,useValue:!0}:[]];function lN(){return new o.PXZ("Router",br)}let XT=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[P0,Df&&r?.enableTracing?rN().\u0275providers:[],{provide:Cf,multi:!0,useValue:t},{provide:aN,useFactory:tE,deps:[[br,new o.FiY,new o.tp0]]},{provide:Vt,useValue:r||{}},r?.useHash?{provide:ut,useClass:Oe}:{provide:ut,useClass:Me},{provide:gg,useFactory:()=>{const n=(0,o.f3M)(ja),e=(0,o.f3M)(o.R0b),t=(0,o.f3M)(Vt),r=(0,o.f3M)(k_),i=(0,o.f3M)(Ql);return t.scrollOffset&&n.setOffset(t.scrollOffset),new KT(i,r,n,e,t)}},r?.preloadingStrategy?iN(r.preloadingStrategy).\u0275providers:[],{provide:o.PXZ,multi:!0,useFactory:lN},r?.initialNavigation?uN(r):[],[{provide:nE,useFactory:_g},{provide:o.tb,multi:!0,useExisting:nE}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Cf,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(aN,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[c0]}),n})();function tE(n){if(Df&&n)throw new o.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function uN(n){return["disabled"===n.initialNavigation?Fd(3,[{provide:o.ip1,multi:!0,useFactory:()=>{const e=(0,o.f3M)(br);return()=>{e.setUpLocationChangeListener()}}},{provide:R_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Fd(2,[{provide:R_,useValue:0},{provide:o.ip1,multi:!0,deps:[o.zs3],useFactory:e=>{const t=e.get(_e,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(br),s=e.get(YT);(function OL(n,e){n.events.pipe(Rr(t=>t instanceof al||t instanceof fu||t instanceof Xl||t instanceof vr),(0,S.U)(t=>t instanceof al||t instanceof vr?Ro.COMPLETE:t instanceof fu&&(0===t.code||1===t.code)?Ro.REDIRECTING:Ro.FAILED),Rr(t=>t!==Ro.REDIRECTING),si(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(k_).afterPreactivation=()=>(r(!0),s.closed?Re(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const nE=new o.OlP(Df?"Router Initializer":"");class P_{}class vg{}const _a="*";function F_(n,e){return{type:7,name:n,definitions:e,options:{}}}function F0(n,e=null){return{type:4,styles:e,timings:n}}function L_(n,e=null){return{type:2,steps:n,options:e}}function Ld(n){return{type:6,styles:n,offset:null}}function U_(n,e,t){return{type:0,name:n,styles:e,options:t}}function sE(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function oE(n){Promise.resolve().then(n)}class bg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){oE(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class xs{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?oE(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==s&&this._onFinish()}),c.onDestroy(()=>{++r==s&&this._onDestroy()}),c.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const L0="!";function pN(n){return new o.vHH(3e3,!1)}function sc(){return typeof window<"u"&&typeof window.document<"u"}function If(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ya(n){switch(n.length){case 0:return new bg;case 1:return n[0];default:return new xs(n)}}function Af(n,e,t,r,i=new Map,s=new Map){const c=[],d=[];let f=-1,y=null;if(r.forEach(w=>{const E=w.get("offset"),A=E==f,k=A&&y||new Map;w.forEach((M,V)=>{let W=V,ne=M;if("offset"!==V)switch(W=e.normalizePropertyName(W,c),ne){case L0:ne=i.get(V);break;case _a:ne=s.get(V);break;default:ne=e.normalizeStyleValue(V,W,ne,c)}k.set(W,ne)}),A||d.push(k),y=k,f=E}),c.length)throw function NN(n){return new o.vHH(3502,!1)}();return d}function G0(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&H_(t,"start",n)));break;case"done":n.onDone(()=>r(t&&H_(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&H_(t,"destroy",n)))}}function H_(n,e,t){const s=$_(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(s._data=c),s}function $_(n,e,t,r,i="",s=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!c}}function to(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function fE(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let Ud=(n,e)=>!1,pE=(n,e,t)=>[],ON=null;function q0(n){const e=n.parentNode||n.host;return e===ON?null:e}(If()||typeof Element<"u")&&(sc()?(ON=(()=>document.documentElement)(),Ud=(n,e)=>{for(;e;){if(e===n)return!0;e=q0(e)}return!1}):Ud=(n,e)=>n.contains(e),pE=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Bd=null,gE=!1;const G_=Ud,_E=pE;let vE=(()=>{class n{validateStyleProperty(t){return function MN(n){Bd||(Bd=function mE(){return typeof document<"u"?document.body:null}()||{},gE=!!Bd.style&&"WebkitAppearance"in Bd.style);let e=!0;return Bd.style&&!function RN(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Bd.style,!e&&gE&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Bd.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return G_(t,r)}getParentElement(t){return q0(t)}query(t,r,i){return _E(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,c,d=[],f){return new bg(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),z0=(()=>{class n{}return n.NOOP=new vE,n})();const PN=1e3,Z0="ng-enter",q_="ng-leave",wg="ng-trigger",Cg=".ng-trigger",wE="ng-animating",CE=".ng-animating";function dl(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:TE(parseFloat(e[1]),e[2])}function TE(n,e){return"s"===e?n*PN:n}function Vd(n,e,t){return n.hasOwnProperty("duration")?n:function LN(n,e,t){let i,s=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(pN()),{duration:0,delay:0,easing:""};i=TE(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(s=TE(parseFloat(f),d[4]));const y=d[5];y&&(c=y)}else i=n;if(!t){let d=!1,f=e.length;i<0&&(e.push(function U0(){return new o.vHH(3100,!1)}()),d=!0),s<0&&(e.push(function aE(){return new o.vHH(3101,!1)}()),d=!0),d&&e.splice(f,0,pN())}return{duration:i,delay:s,easing:c}}(n,e,t)}function Tg(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function z_(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Mo(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function Ri(n,e,t){return t?e+":"+t+";":""}function mu(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=Ri(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Ri(0,kf(t),n.style[t]));n.setAttribute("style",e)}function no(n,e,t){n.style&&(e.forEach((r,i)=>{const s=yu(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),If()&&mu(n))}function bi(n,e){n.style&&(e.forEach((t,r)=>{const i=yu(r);n.style[i]=""}),If()&&mu(n))}function jd(n){return Array.isArray(n)?1==n.length?n[0]:L_(n):n}const _u=new RegExp("{{\\s*(.+?)\\s*}}","g");function Hd(n){let e=[];if("string"==typeof n){let t;for(;t=_u.exec(n);)e.push(t[1]);_u.lastIndex=0}return e}function hl(n,e,t){const r=n.toString(),i=r.replace(_u,(s,c)=>{let d=e[c];return null==d&&(t.push(function mN(n){return new o.vHH(3003,!1)}()),d=""),d.toString()});return i==r?n:i}function oc(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const xf=/-+([a-z0-9])/g;function yu(n){return n.replace(xf,(...e)=>e[1].toUpperCase())}function kf(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ks(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function _N(n){return new o.vHH(3004,!1)}()}}function W0(n,e){return window.getComputedStyle(n)[e]}const Z_="*";function AE(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function VN(n,e,t){if(":"==n[0]){const f=function NE(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function SN(n){return new o.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof f)return void e.push(f);n=f}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function cE(n){return new o.vHH(3015,!1)}()),e;const i=r[1],s=r[2],c=r[3];e.push(xE(i,c));"<"==s[0]&&!(i==Z_&&c==Z_)&&e.push(xE(c,i))}(r,t,e)):t.push(n),t}const Rf=new Set(["true","1"]),Mf=new Set(["false","0"]);function xE(n,e){const t=Rf.has(n)||Mf.has(n),r=Rf.has(e)||Mf.has(e);return(i,s)=>{let c=n==Z_||n==i,d=e==Z_||e==s;return!c&&t&&"boolean"==typeof i&&(c=i?Rf.has(n):Mf.has(n)),!d&&r&&"boolean"==typeof s&&(d=s?Rf.has(e):Mf.has(e)),c&&d}}const W_=new RegExp("s*:selfs*,?","g");function Ig(n,e,t,r){return new K_(n).build(e,t,r)}class K_{constructor(e){this._driver=e}build(e,t,r){const i=new RE(t);return this._resetContextStyleTimingState(i),ks(this,jd(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function yN(){return new o.vHH(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const f=d,y=f.name;y.toString().split(/\s*,\s*/).forEach(w=>{f.name=w,s.push(this.visitState(f,t))}),f.name=y}else if(1==d.type){const f=this.visitTransition(d,t);r+=f.queryCount,i+=f.depCount,c.push(f)}else t.errors.push(function vN(){return new o.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,c=i||{};r.styles.forEach(d=>{d instanceof Map&&d.forEach(f=>{Hd(f).forEach(y=>{c.hasOwnProperty(y)||s.add(y)})})}),s.size&&(oc(s.values()),t.errors.push(function B0(n,e){return new o.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ks(this,jd(e.animation),t);return{type:1,matchers:AE(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:vu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ks(this,r,t)),options:vu(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(c=>{t.currentTime=r;const d=ks(this,c,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:s,options:vu(e.options)}}visitAnimate(e,t){const r=function ME(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Ag(Vd(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Ag(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=Vd(t,e);return Ag(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Ld({});if(5==s.type)i=this.visitKeyframes(s,t);else{let c=e.styles,d=!1;if(!c){d=!0;const y={};r.easing&&(y.easing=r.easing),c=Ld(y)}t.currentTime+=r.duration+r.delay;const f=this.visitStyle(c,t);f.isEmptyStep=d,i=f}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of i)"string"==typeof d?d===_a?r.push(d):t.errors.push(new o.vHH(3002,!1)):r.push(z_(d));let s=!1,c=null;return r.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(c=d.get("easing"),d.delete("easing")),!s))for(let f of d.values())if(f.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((d,f)=>{const y=t.collectedStyles.get(t.currentQuerySelector),w=y.get(f);let E=!0;w&&(s!=i&&s>=w.startTime&&i<=w.endTime&&(t.errors.push(function wN(n,e,t,r,i){return new o.vHH(3010,!1)}()),E=!1),s=w.startTime),E&&y.set(f,{startTime:s,endTime:i}),t.options&&function Nf(n,e,t){const r=e.params||{},i=Hd(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function gN(n){return new o.vHH(3001,!1)}())})}(d,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function CN(){return new o.vHH(3011,!1)}()),r;let s=0;const c=[];let d=!1,f=!1,y=0;const w=e.steps.map(ne=>{const he=this._makeStyleAst(ne,t);let Ie=null!=he.offset?he.offset:function K0(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(he.styles),me=0;return null!=Ie&&(s++,me=he.offset=Ie),f=f||me<0||me>1,d=d||me<y,y=me,c.push(me),he});f&&t.errors.push(function TN(){return new o.vHH(3012,!1)}()),d&&t.errors.push(function ul(){return new o.vHH(3200,!1)}());const E=e.steps.length;let A=0;s>0&&s<E?t.errors.push(function V0(){return new o.vHH(3202,!1)}()):0==s&&(A=1/(E-1));const k=E-1,M=t.currentTime,V=t.currentAnimateTimings,W=V.duration;return w.forEach((ne,he)=>{const Ie=A>0?he==k?1:A*he:c[he],me=Ie*W;t.currentTime=M+V.delay+me,V.duration=me,this._validateStyleAst(ne,t),ne.offset=Ie,r.styles.push(ne)}),r}visitReference(e,t){return{type:8,animation:ks(this,jd(e.animation),t),options:vu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:vu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:vu(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,c]=function Y_(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(W_,"")),n=n.replace(/@\*/g,Cg).replace(/@\w+/g,t=>Cg+"-"+t.slice(1)).replace(/:animating/g,CE),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,to(t.collectedStyles,t.currentQuerySelector,new Map);const d=ks(this,jd(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:d,originalSelector:e.selector,options:vu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function EN(){return new o.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Vd(e.timings,t.errors,!0);return{type:12,animation:ks(this,jd(e.animation),t),timings:r,options:null}}}class RE{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function vu(n){return n?(n=Tg(n)).params&&(n.params=function OE(n){return n?Tg(n):null}(n.params)):n={},n}function Ag(n,e,t){return{duration:n,delay:e,easing:t}}function Q_(n,e,t,r,i,s,c=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:c,subTimeline:d}}class J_{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const LE=new RegExp(":enter","g"),jN=new RegExp(":leave","g");function X_(n,e,t,r,i,s=new Map,c=new Map,d,f,y=[]){return(new BE).buildKeyframes(n,e,t,r,i,s,c,d,f,y)}class BE{buildKeyframes(e,t,r,i,s,c,d,f,y,w=[]){y=y||new J_;const E=new Ff(e,t,y,i,s,w,[]);E.options=f;const A=f.delay?dl(f.delay):0;E.currentTimeline.delayNextStep(A),E.currentTimeline.setStyles([c],null,E.errors,f),ks(this,r,E);const k=E.timelines.filter(M=>M.containsAnimation());if(k.length&&d.size){let M;for(let V=k.length-1;V>=0;V--){const W=k[V];if(W.element===t){M=W;break}}M&&!M.allowOnlyTimelineStyles()&&M.setStyles([d],null,E.errors,f)}return k.length?k.map(M=>M.buildKeyframes()):[Q_(t,[],[],[],0,A,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);s!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const c="number"==typeof s?s:dl(hl(s,i?.params??{},t.errors));r.delayNextStep(c)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const c=null!=r.duration?dl(r.duration):null,d=null!=r.delay?dl(r.delay):null;return 0!==c&&e.forEach(f=>{const y=t.appendInstructionToTimeline(f,c,d);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ks(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Pf);const c=dl(s.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>ks(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?dl(e.options.delay):0;e.steps.forEach(c=>{const d=t.createSubContext(e.options);s&&d.delayNextStep(s),ks(this,c,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Vd(t.params?hl(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(f=>{d.forwardTime((f.offset||0)*s),d.setStyles(f.styles,f.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?dl(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Pf);let c=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let f=null;d.forEach((y,w)=>{t.currentQueryIndex=w;const E=t.createSubContext(e.options,y);s&&E.delayNextStep(s),y===t.element&&(f=E.currentTimeline),ks(this,e.animation,E),E.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,E.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),f&&(t.currentTimeline.mergeTimelineCollectedStyles(f),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,c=Math.abs(s.duration),d=c*(t.currentQueryTotal-1);let f=c*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":f=d-f;break;case"full":f=r.currentStaggerTime}const w=t.currentTimeline;f&&w.delayNextStep(f);const E=w.currentTime;ks(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-E+(i.startTime-r.currentTimeline.startTime)}}const Pf={};class Ff{constructor(e,t,r,i,s,c,d,f){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Pf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new Ng(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=dl(r.duration)),null!=r.delay&&(i.delay=dl(r.delay));const s=r.params;if(s){let c=i.params;c||(c=this.options.params={}),Object.keys(s).forEach(d=>{(!t||!c.hasOwnProperty(d))&&(c[d]=hl(s[d],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new Ff(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Pf,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new VE(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,c){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(LE,"."+this._enterClassName)).replace(jN,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!s&&0==d.length&&c.push(function DN(n){return new o.vHH(3014,!1)}()),d}}class Ng{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Ng(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||_a),this._currentKeyframe.set(t,_a);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},c=function jE(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,_a)}else Mo(i,t)}),t}(e,this._globalTimelineStyles);for(let[d,f]of c){const y=hl(f,s,r);this._pendingStyles.set(d,y),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??_a),this._updateStyle(d,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,f)=>{const y=Mo(d,new Map,this._backFill);y.forEach((w,E)=>{w===L0?e.add(E):w===_a&&t.add(E)}),r||y.set("offset",f/this.duration),i.push(y)});const s=e.size?oc(e.values()):[],c=t.size?oc(t.values()):[];if(r){const d=i[0],f=new Map(d);d.set("offset",0),f.set("offset",1),i=[d,f]}return Q_(this.element,i,s,c,this.duration,this.startTime,this.easing,!1)}}class VE extends Ng{constructor(e,t,r,i,s,c,d=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],c=r+t,d=t/c,f=Mo(e[0]);f.set("offset",0),s.push(f);const y=Mo(e[0]);y.set("offset",Y0(d)),s.push(y);const w=e.length-1;for(let E=1;E<=w;E++){let A=Mo(e[E]);const k=A.get("offset");A.set("offset",Y0((t+k*r)/c)),s.push(A)}r=c,t=0,i="",e=s}return Q_(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Y0(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class ey{}const HE=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class ty extends ey{normalizePropertyName(e,t){return yu(e)}normalizeStyleValue(e,t,r,i){let s="";const c=r.toString().trim();if(HE.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function lE(n,e){return new o.vHH(3005,!1)}())}return c+s}}function ac(n,e,t,r,i,s,c,d,f,y,w,E,A){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:c,timelines:d,queriedElements:f,preStyleProps:y,postStyleProps:w,totalTime:E,errors:A}}const Q0={};class $E{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function $d(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,c,d,f,y,w){const E=[],A=this.ast.options&&this.ast.options.params||Q0,M=this.buildStyles(r,d&&d.params||Q0,E),V=f&&f.params||Q0,W=this.buildStyles(i,V,E),ne=new Set,he=new Map,Ie=new Map,me="void"===i,Le={params:J0(V,A),delay:this.ast.options?.delay},je=w?[]:X_(e,t,this.ast.animation,s,c,M,W,Le,y,E);let ct=0;if(je.forEach(wn=>{ct=Math.max(wn.duration+wn.delay,ct)}),E.length)return ac(t,this._triggerName,r,i,me,M,W,[],[],he,Ie,ct,E);je.forEach(wn=>{const Ln=wn.element,Vi=to(he,Ln,new Set);wn.preStyleProps.forEach(Vr=>Vi.add(Vr));const vs=to(Ie,Ln,new Set);wn.postStyleProps.forEach(Vr=>vs.add(Vr)),Ln!==t&&ne.add(Ln)});const Lt=oc(ne.values());return ac(t,this._triggerName,r,i,me,M,W,je,Lt,he,Ie,ct)}}function J0(n,e){const t=Tg(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class GN{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Tg(this.defaultParams);return Object.keys(e).forEach(s=>{const c=e[s];null!==c&&(i[s]=c)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((c,d)=>{c&&(c=hl(c,i,t));const f=this.normalizer.normalizePropertyName(d,t);c=this.normalizer.normalizeStyleValue(d,f,c,t),r.set(d,c)})}),r}}class qL{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new GN(i.style,i.options&&i.options.params||{},r))}),qE(this.states,"true","1"),qE(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new $E(e,i,this.states))}),this.fallbackTransition=function zL(n,e,t){return new $E(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function qE(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const qN=new J_;class zE{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],i=[],s=Ig(this._driver,t,r,i);if(r.length)throw function xN(n){return new o.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=Af(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let c;const d=new Map;if(s?(c=X_(this._driver,t,s,Z0,q_,new Map,new Map,r,qN,i),c.forEach(w=>{const E=to(d,w.element,new Map);w.postStyleProps.forEach(A=>E.set(A,null))})):(i.push(function B_(){return new o.vHH(3300,!1)}()),c=[]),i.length)throw function V_(n){return new o.vHH(3504,!1)}();d.forEach((w,E)=>{w.forEach((A,k)=>{w.set(k,this._driver.computeStyle(E,k,_a))})});const y=ya(c.map(w=>{const E=d.get(w.element);return this._buildPlayer(w,new Map,E)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function j_(n){return new o.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=$_(t,"","","");return G0(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const ZE="ng-animate-queued",ny="ng-animate-disabled",WN=[],eb={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},KE={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Mi="__ng_removed";class tb{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function rb(n){return n??null}(r?e.value:e),r){const s=Tg(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const xg="void",ry=new tb(xg);class KN{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,wr(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function VL(n,e){return new o.vHH(3302,!1)}();if(null==r||0==r.length)throw function H0(n){return new o.vHH(3303,!1)}();if(!function YN(n){return"start"==n||"done"==n}(r))throw function jL(n,e){return new o.vHH(3400,!1)}();const s=to(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};s.push(c);const d=to(this._engine.statesByElement,e,new Map);return d.has(t)||(wr(e,wg),wr(e,wg+"-"+t),d.set(t,ry)),()=>{this._engine.afterFlush(()=>{const f=s.indexOf(c);f>=0&&s.splice(f,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function uE(n){return new o.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),c=new QE(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(wr(e,wg),wr(e,wg+"-"+t),this._engine.statesByElement.set(e,d=new Map));let f=d.get(t);const y=new tb(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&f&&y.absorbOptions(f.options),d.set(t,y),f||(f=ry),y.value!==xg&&f.value===y.value){if(!function JN(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(f.params,y.params)){const V=[],W=s.matchStyles(f.value,f.params,V),ne=s.matchStyles(y.value,y.params,V);V.length?this._engine.reportError(V):this._engine.afterFlush(()=>{bi(e,W),no(e,ne)})}return}const A=to(this._engine.playersByElement,e,[]);A.forEach(V=>{V.namespaceId==this.id&&V.triggerName==t&&V.queued&&V.destroy()});let k=s.matchTransition(f.value,y.value,e,y.params),M=!1;if(!k){if(!i)return;k=s.fallbackTransition,M=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:k,fromState:f,toState:y,player:c,isFallbackTransition:M}),M||(wr(e,ZE),c.onStart(()=>{Gd(e,ZE)})),c.onDone(()=>{let V=this.players.indexOf(c);V>=0&&this.players.splice(V,1);const W=this._engine.playersByElement.get(e);if(W){let ne=W.indexOf(c);ne>=0&&W.splice(ne,1)}}),this.players.push(c),A.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Cg,!0);r.forEach(i=>{if(i[Mi])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),c=new Map;if(s){const d=[];if(s.forEach((f,y)=>{if(c.set(y,f.value),this._triggers.has(y)){const w=this.trigger(e,y,xg,i);w&&d.push(w)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&ya(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const c=s.name;if(i.has(c))return;i.add(c);const f=this._triggers.get(c).fallbackTransition,y=r.get(c)||ry,w=new tb(xg),E=new QE(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:f,fromState:y,toState:w,player:E,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Mi];(!s||s===eb)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){wr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,c=this._elementListeners.get(s);c&&c.forEach(d=>{if(d.name==r.triggerName){const f=$_(s,r.triggerName,r.fromState.value,r.toState.value);f._data=e,G0(r.player,d.phase,f,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class YE{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new KN(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,d=this.driver.getParentElement(t);for(;d;){const f=i.get(d);if(f){const y=r.indexOf(f);r.splice(y+1,0,e),c=!0;break}d=this.driver.getParentElement(d)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(ro(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!ro(t))return;const s=t[Mi];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),wr(e,ny)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Gd(e,ny))}removeNode(e,t,r,i){if(ro(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Mi]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return ro(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Cg,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,CE,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ya(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Mi];if(t&&t.setForRemoval){if(e[Mi]=eb,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(ny)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)wr(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?ya(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function dE(n){return new o.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new J_,i=[],s=new Map,c=[],d=new Map,f=new Map,y=new Map,w=new Set;this.disabledNodes.forEach(at=>{w.add(at);const gt=this.driver.query(at,".ng-animate-queued",!0);for(let Rt=0;Rt<gt.length;Rt++)w.add(gt[Rt])});const E=this.bodyNode,A=Array.from(this.statesByElement.keys()),k=Po(A,this.collectedEnterElements),M=new Map;let V=0;k.forEach((at,gt)=>{const Rt=Z0+V++;M.set(gt,Rt),at.forEach(tn=>wr(tn,Rt))});const W=[],ne=new Set,he=new Set;for(let at=0;at<this.collectedLeaveElements.length;at++){const gt=this.collectedLeaveElements[at],Rt=gt[Mi];Rt&&Rt.setForRemoval&&(W.push(gt),ne.add(gt),Rt.hasAnimation?this.driver.query(gt,".ng-star-inserted",!0).forEach(tn=>ne.add(tn)):he.add(gt))}const Ie=new Map,me=Po(A,Array.from(ne));me.forEach((at,gt)=>{const Rt=q_+V++;Ie.set(gt,Rt),at.forEach(tn=>wr(tn,Rt))}),e.push(()=>{k.forEach((at,gt)=>{const Rt=M.get(gt);at.forEach(tn=>Gd(tn,Rt))}),me.forEach((at,gt)=>{const Rt=Ie.get(gt);at.forEach(tn=>Gd(tn,Rt))}),W.forEach(at=>{this.processLeaveNode(at)})});const Le=[],je=[];for(let at=this._namespaceList.length-1;at>=0;at--)this._namespaceList[at].drainQueuedTransitions(t).forEach(Rt=>{const tn=Rt.player,jr=Rt.element;if(Le.push(tn),this.collectedEnterElements.length){const fi=jr[Mi];if(fi&&fi.setForMove){if(fi.previousTriggersValues&&fi.previousTriggersValues.has(Rt.triggerName)){const _o=fi.previousTriggersValues.get(Rt.triggerName),Us=this.statesByElement.get(Rt.element);if(Us&&Us.has(Rt.triggerName)){const Zv=Us.get(Rt.triggerName);Zv.value=_o,Us.set(Rt.triggerName,Zv)}}return void tn.destroy()}}const Go=!E||!this.driver.containsElement(E,jr),ji=Ie.get(jr),ka=M.get(jr),On=this._buildInstruction(Rt,r,ka,ji,Go);if(On.errors&&On.errors.length)return void je.push(On);if(Go)return tn.onStart(()=>bi(jr,On.fromStyles)),tn.onDestroy(()=>no(jr,On.toStyles)),void i.push(tn);if(Rt.isFallbackTransition)return tn.onStart(()=>bi(jr,On.fromStyles)),tn.onDestroy(()=>no(jr,On.toStyles)),void i.push(tn);const Sc=[];On.timelines.forEach(fi=>{fi.stretchStartingKeyframe=!0,this.disabledNodes.has(fi.element)||Sc.push(fi)}),On.timelines=Sc,r.append(jr,On.timelines),c.push({instruction:On,player:tn,element:jr}),On.queriedElements.forEach(fi=>to(d,fi,[]).push(tn)),On.preStyleProps.forEach((fi,_o)=>{if(fi.size){let Us=f.get(_o);Us||f.set(_o,Us=new Set),fi.forEach((Zv,Jm)=>Us.add(Jm))}}),On.postStyleProps.forEach((fi,_o)=>{let Us=y.get(_o);Us||y.set(_o,Us=new Set),fi.forEach((Zv,Jm)=>Us.add(Jm))})});if(je.length){const at=[];je.forEach(gt=>{at.push(function hE(n,e){return new o.vHH(3505,!1)}())}),Le.forEach(gt=>gt.destroy()),this.reportError(at)}const ct=new Map,Lt=new Map;c.forEach(at=>{const gt=at.element;r.has(gt)&&(Lt.set(gt,gt),this._beforeAnimationBuild(at.player.namespaceId,at.instruction,ct))}),i.forEach(at=>{const gt=at.element;this._getPreviousPlayers(gt,!1,at.namespaceId,at.triggerName,null).forEach(tn=>{to(ct,gt,[]).push(tn),tn.destroy()})});const wn=W.filter(at=>e1(at,f,y)),Ln=new Map;ba(Ln,this.driver,he,y,_a).forEach(at=>{e1(at,f,y)&&wn.push(at)});const vs=new Map;k.forEach((at,gt)=>{ba(vs,this.driver,new Set(at),f,L0)}),wn.forEach(at=>{const gt=Ln.get(at),Rt=vs.get(at);Ln.set(at,new Map([...Array.from(gt?.entries()??[]),...Array.from(Rt?.entries()??[])]))});const Vr=[],qu=[],zu={};c.forEach(at=>{const{element:gt,player:Rt,instruction:tn}=at;if(r.has(gt)){if(w.has(gt))return Rt.onDestroy(()=>no(gt,tn.toStyles)),Rt.disabled=!0,Rt.overrideTotalTime(tn.totalTime),void i.push(Rt);let jr=zu;if(Lt.size>1){let ji=gt;const ka=[];for(;ji=ji.parentNode;){const On=Lt.get(ji);if(On){jr=On;break}ka.push(ji)}ka.forEach(On=>Lt.set(On,jr))}const Go=this._buildAnimation(Rt.namespaceId,tn,ct,s,vs,Ln);if(Rt.setRealPlayer(Go),jr===zu)Vr.push(Rt);else{const ji=this.playersByElement.get(jr);ji&&ji.length&&(Rt.parentPlayer=ya(ji)),i.push(Rt)}}else bi(gt,tn.fromStyles),Rt.onDestroy(()=>no(gt,tn.toStyles)),qu.push(Rt),w.has(gt)&&i.push(Rt)}),qu.forEach(at=>{const gt=s.get(at.element);if(gt&&gt.length){const Rt=ya(gt);at.setRealPlayer(Rt)}}),i.forEach(at=>{at.parentPlayer?at.syncPlayerEvents(at.parentPlayer):at.destroy()});for(let at=0;at<W.length;at++){const gt=W[at],Rt=gt[Mi];if(Gd(gt,q_),Rt&&Rt.hasAnimation)continue;let tn=[];if(d.size){let Go=d.get(gt);Go&&Go.length&&tn.push(...Go);let ji=this.driver.query(gt,CE,!0);for(let ka=0;ka<ji.length;ka++){let On=d.get(ji[ka]);On&&On.length&&tn.push(...On)}}const jr=tn.filter(Go=>!Go.destroyed);jr.length?JE(this,gt,jr):this.processLeaveNode(gt)}return W.length=0,Vr.forEach(at=>{this.players.push(at),at.onDone(()=>{at.destroy();const gt=this.players.indexOf(at);this.players.splice(gt,1)}),at.play()}),Vr}elementContainsData(e,t){let r=!1;const i=t[Mi];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let c=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(c=d)}else{const d=this.playersByElement.get(e);if(d){const f=!s||s==xg;d.forEach(y=>{y.queued||!f&&y.triggerName!=i||c.push(y)})}}return(r||i)&&(c=c.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),c}_beforeAnimationBuild(e,t,r){const s=t.element,c=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const f of t.timelines){const y=f.element,w=y!==s,E=to(r,y,[]);this._getPreviousPlayers(y,w,c,d,t.toState).forEach(k=>{const M=k.getRealPlayer();M.beforeDestroy&&M.beforeDestroy(),k.destroy(),E.push(k)})}bi(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,c){const d=t.triggerName,f=t.element,y=[],w=new Set,E=new Set,A=t.timelines.map(M=>{const V=M.element;w.add(V);const W=V[Mi];if(W&&W.removedBeforeQueried)return new bg(M.duration,M.delay);const ne=V!==f,he=function QN(n){const e=[];return XE(n,e),e}((r.get(V)||WN).map(ct=>ct.getRealPlayer())).filter(ct=>!!ct.element&&ct.element===V),Ie=s.get(V),me=c.get(V),Le=Af(0,this._normalizer,0,M.keyframes,Ie,me),je=this._buildPlayer(M,Le,he);if(M.subTimeline&&i&&E.add(V),ne){const ct=new QE(e,d,V);ct.setRealPlayer(je),y.push(ct)}return je});y.forEach(M=>{to(this.playersByQueriedElement,M.element,[]).push(M),M.onDone(()=>function nb(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,M.element,M))}),w.forEach(M=>wr(M,wE));const k=ya(A);return k.onDestroy(()=>{w.forEach(M=>Gd(M,wE)),no(f,t.toStyles)}),E.forEach(M=>{to(i,M,[]).push(k)}),k}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new bg(e.duration,e.delay)}}class QE{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new bg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>G0(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){to(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function ro(n){return n&&1===n.nodeType}function ib(n,e){const t=n.style.display;return n.style.display=e??"none",t}function ba(n,e,t,r,i){const s=[];t.forEach(f=>s.push(ib(f)));const c=[];r.forEach((f,y)=>{const w=new Map;f.forEach(E=>{const A=e.computeStyle(y,E,i);w.set(E,A),(!A||0==A.length)&&(y[Mi]=KE,c.push(y))}),n.set(y,w)});let d=0;return t.forEach(f=>ib(f,s[d++])),c}function Po(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const r=1,i=new Set(e),s=new Map;function c(d){if(!d)return r;let f=s.get(d);if(f)return f;const y=d.parentNode;return f=t.has(y)?y:i.has(y)?r:c(y),s.set(d,f),f}return e.forEach(d=>{const f=c(d);f!==r&&t.get(f).push(d)}),t}function wr(n,e){n.classList?.add(e)}function Gd(n,e){n.classList?.remove(e)}function JE(n,e,t){ya(t).onDone(()=>n.processLeaveNode(e))}function XE(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof xs?XE(r.players,e):e.push(r)}}function e1(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class Lf{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new YE(e,t,r),this._timelineEngine=new zE(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const c=e+"-"+i;let d=this._triggerCache[c];if(!d){const f=[],y=[],w=Ig(this._driver,s,f,y);if(f.length)throw function j0(n,e){return new o.vHH(3404,!1)}();d=function X0(n,e,t){return new qL(n,e,t)}(i,w,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,c]=fE(r);this._timelineEngine.command(s,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[c,d]=fE(r);return this._timelineEngine.listen(c,t,d,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let XN=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&no(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(no(this._element,this._initialStyles),this._endStyles&&(no(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(bi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(bi(this._element,this._endStyles),this._endStyles=null),no(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function iy(n){let e=null;return n.forEach((t,r)=>{(function ex(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class t1{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:W0(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class n1{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return G_(e,t)}getParentElement(e){return q0(e)}query(e,t,r){return _E(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,c=[]){const f={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(f.easing=s);const y=new Map,w=c.filter(k=>k instanceof t1);(function Of(n,e){return 0===n||0===e})(r,i)&&w.forEach(k=>{k.currentSnapshot.forEach((M,V)=>y.set(V,M))});let E=function UN(n){return n.length?n[0]instanceof Map?n:n.map(e=>z_(e)):[]}(t).map(k=>Mo(k));E=function EE(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,c)=>{r.has(c)||i.push(c),r.set(c,s)}),i.length)for(let s=1;s<e.length;s++){let c=e[s];i.forEach(d=>c.set(d,W0(n,d)))}}return e}(e,E,y);const A=function kg(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=iy(e[0]),e.length>1&&(r=iy(e[e.length-1]))):e instanceof Map&&(t=iy(e)),t||r?new XN(n,t,r):null}(e,E);return new t1(e,E,f,A)}}let r1=(()=>{class n extends P_{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?L_(t):t;return sb(this._renderer,null,r,"register",[i]),new sy(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.FYo),o.LFG(ie))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class sy extends vg{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new tx(this._id,e,t||{},this._renderer)}}class tx{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return sb(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function sb(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const oy="@.disabled";let ay=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,c)=>{const d=c?.parentNode(s);d&&c.removeChild(d,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let w=this._rendererCache.get(s);return w||(w=new ly("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,w)),w}const c=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const f=w=>{Array.isArray(w)?w.forEach(f):this.engine.registerTrigger(c,d,t,w.name,w)};return r.data.animation.forEach(f),new i1(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,d]=s;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.FYo),o.LFG(Lf),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class ly{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==oy?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class i1 extends ly{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==oy?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function s1(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),c="";return"@"!=s.charAt(0)&&([s,c]=function o1(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let a1=(()=>{class n extends Lf{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ie),o.LFG(z0),o.LFG(ey),o.LFG(o.z2F))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const ob=[{provide:P_,useClass:r1},{provide:ey,useFactory:function l1(){return new ty}},{provide:Lf,useClass:a1},{provide:o.FYo,useFactory:function c1(n,e,t){return new ay(n,e,t)},deps:[Zr,Lf,o.R0b]}],ab=[{provide:z0,useFactory:()=>new n1},{provide:o.QbO,useValue:"BrowserAnimations"},...ob],u1=[{provide:z0,useClass:vE},{provide:o.QbO,useValue:"NoopAnimations"},...ob];let nx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?u1:ab}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:ab,imports:[tl]}),n})(),d1=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),qd=(()=>{class n extends d1{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const fl=new o.OlP("NgValueAccessor"),sx={provide:fl,useExisting:(0,o.Gpc)(()=>lc),multi:!0},ax=new o.OlP("CompositionEventMode");let lc=(()=>{class n extends d1{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ox(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(ax,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&o.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[o._Bn([sx]),o.qOj]}),n})();const lx=!1;function bu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function lb(n){return null!=n&&"number"==typeof n.length}const Pi=new o.OlP("NgValidators"),cc=new o.OlP("NgAsyncValidators"),f1=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Zn{static min(e){return function cb(n){return e=>{if(bu(e.value)||bu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function ub(n){return e=>{if(bu(e.value)||bu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function db(n){return bu(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function hb(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function cy(n){return bu(n.value)||f1.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function uy(n){return e=>bu(e.value)||!lb(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function wu(n){return e=>lb(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function p1(n){if(!n)return dy;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(bu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return dx(e)}static composeAsync(e){return m1(e)}}function dy(n){return null}function zd(n){return null!=n}function cx(n){const e=(0,o.QGY)(n)?(0,Ht.D)(n):n;if(lx&&!(0,o.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new o.vHH(-1101,t)}return e}function hy(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function ux(n,e){return e.map(t=>t(n))}function fb(n){return n.map(e=>function g1(n){return!n.validate}(e)?e:t=>e.validate(t))}function dx(n){if(!n)return null;const e=n.filter(zd);return 0==e.length?null:function(t){return hy(ux(t,e))}}function Nt(n){return null!=n?dx(fb(n)):null}function m1(n){if(!n)return null;const e=n.filter(zd);return 0==e.length?null:function(t){return function rx(...n){const e=(0,mr.jO)(n),{args:t,keys:r}=ru(n),i=new vn.y(s=>{const{length:c}=t;if(!c)return void s.complete();const d=new Array(c);let f=c,y=c;for(let w=0;w<c;w++){let E=!1;(0,ii.Xf)(t[w]).subscribe((0,ve.x)(s,A=>{E||(E=!0,y--),d[w]=A},()=>f--,void 0,()=>{(!f||!E)&&(y||s.next(r?ce(r,d):d),s.complete())}))}});return e?i.pipe(X(e)):i}(ux(t,e).map(cx)).pipe((0,S.U)(hy))}}function pb(n){return null!=n?m1(fb(n)):null}function _1(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Zd(n){return n._rawValidators}function y1(n){return n._rawAsyncValidators}function Uf(n){return n?Array.isArray(n)?n:[n]:[]}function Wd(n,e){return Array.isArray(n)?n.includes(e):n===e}function ur(n,e){const t=Uf(e);return Uf(n).forEach(i=>{Wd(t,i)||t.push(i)}),t}function hx(n,e){return Uf(e).filter(t=>!Wd(n,t))}class gb{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Nt(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=pb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ki extends gb{get formDirective(){return null}get path(){return null}}class Cu extends gb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class mb{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Tu=(()=>{class n extends mb{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Cu,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&o.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[o.qOj]}),n})(),Kd=(()=>{class n extends mb{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Ki,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&o.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[o.qOj]}),n})();function v1(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const gy=!1,Bf="VALID",my="INVALID",Yd="PENDING",Pg="DISABLED";function bb(n){return(wb(n)?n.validators:n)||null}function w1(n,e){return(wb(e)?e.asyncValidators:n)||null}function wb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class C1{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Bf}get invalid(){return this.status===my}get pending(){return this.status==Yd}get disabled(){return this.status===Pg}get enabled(){return this.status!==Pg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ur(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ur(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hx(e,this._rawAsyncValidators))}hasValidator(e){return Wd(this._rawValidators,e)}hasAsyncValidator(e){return Wd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Yd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Pg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Bf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bf||this.status===Yd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pg:Bf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Yd,this._hasOwnPendingAsyncValidator=!0;const t=cx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?Pg:this.errors?my:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yd)?Yd:this._anyControlsHaveStatus(my)?my:Bf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){wb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function JL(n){return Array.isArray(n)?Nt(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function XL(n){return Array.isArray(n)?pb(n):n||null}(this._rawAsyncValidators)}}class Os extends C1{constructor(e,t,r){super(bb(t),w1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Fg(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new o.vHH(1002,gy?function b1(n,e){return`Must supply a value for form control ${v1(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function Cb(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new o.vHH(1e3,gy?function vx(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new o.vHH(1001,gy?function bx(n,e){return`Cannot find form control ${v1(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Qd=new o.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Lg}),Lg="always";function Ug(n,e,t=Lg){Jd(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function T1(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Eb(n,e)})}(n,e),function Dx(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Ex(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Eb(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Tx(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Bg(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),vy(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function yy(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Jd(n,e){const t=Zd(n);null!==e.validator?n.setValidators(_1(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=y1(n);null!==e.asyncValidator?n.setAsyncValidators(_1(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();yy(e._rawValidators,i),yy(e._rawAsyncValidators,i)}function vy(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Zd(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(c=>c!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=y1(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(c=>c!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return yy(e._rawValidators,r),yy(e._rawAsyncValidators,r),t}function Eb(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function S1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function I1(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const lt=class extends C1{constructor(e=null,t,r){super(bb(t),w1(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wb(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=I1(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){S1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){S1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){I1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let uc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Mx={provide:fl,useExisting:(0,o.Gpc)(()=>jg),multi:!0};let jg=(()=>{class n extends qd{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&o.NdJ("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[o._Bn([Mx]),o.qOj]}),n})(),Rb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const Ty=new o.OlP("NgModelWithFormControlWarning"),Fb={provide:Ki,useExisting:(0,o.Gpc)(()=>dc)};let dc=(()=>{class n extends Ki{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new o.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(vy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Ug(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Bg(t.control||null,t,!1),function D1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function wy(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Bg(r||null,t),(n=>n instanceof lt)(i)&&(Ug(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Db(n,e){Jd(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Sx(n,e){return vy(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Jd(this.form,this),this._oldForm&&vy(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Pi,10),o.Y36(cc,10),o.Y36(Qd,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&o.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([Fb]),o.qOj,o.TTD]}),n})();const M1={provide:Cu,useExisting:(0,o.Gpc)(()=>Eu)};let Eu=(()=>{class n extends Cu{set isDisabled(t){}constructor(t,r,i,s,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new o.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Ib(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===lc?t=s:function Nx(n){return Object.getPrototypeOf(n.constructor)===qd}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){this._added||this._setUpControl(),function Sb(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Tb(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(o.Y36(Ki,13),o.Y36(Pi,10),o.Y36(cc,10),o.Y36(fl,10),o.Y36(Ty,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[o._Bn([M1]),o.qOj,o.TTD]}),n})();const Lx={provide:fl,useExisting:(0,o.Gpc)(()=>Du),multi:!0};function P1(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Du=(()=>{class n extends qd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=P1(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Ux(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&o.NdJ("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([Lx]),o.qOj]}),n})(),Dy=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(P1(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(Du,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const F1={provide:fl,useExisting:(0,o.Gpc)(()=>Ub),multi:!0};function L1(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Ub=(()=>{class n extends qd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,c)=>{s._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const c=s;for(let d=0;d<c.length;d++){const y=this._getOptionValue(c[d].value);i.push(y)}}else{const c=r.options;for(let d=0;d<c.length;d++){const f=c[d];if(f.selected){const y=this._getOptionValue(f.value);i.push(y)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Bx(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&o.NdJ("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([F1]),o.qOj]}),n})(),$g=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(L1(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(L1(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(Ub,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),q1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Rb]}),n})(),W1=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Qd,useValue:t.callSetDisabledState??Lg}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[q1]}),n})(),Zx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ty,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Qd,useValue:t.callSetDisabledState??Lg}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[q1]}),n})();class Ay{}class Hf{}class Fo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let i;if(i="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(s=>s.toString()),i.length>0){const s=t.toLowerCase();this.headers.set(s,i),this.maybeSetNormalizedName(t,s)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Fo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Fo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Fo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let c=this.headers.get(t);if(!c)return;c=c.filter(d=>-1===s.indexOf(d)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Wx{encodeKey(e){return qb(e)}encodeValue(e){return qb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Y1=/%(\d[a-f0-9])/gi,Gb={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function qb(n){return encodeURIComponent(n).replace(Y1,(e,t)=>Gb[t]??e)}function $f(n){return`${n}`}class pl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Wx,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function K1(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[c,d]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],f=t.get(c)||[];f.push(d),t.set(c,f)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map($f):[$f(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new pl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push($f(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf($f(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class zb{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Q1(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function J1(n){return typeof Blob<"u"&&n instanceof Blob}function X1(n){return typeof FormData<"u"&&n instanceof FormData}class Gf{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Zb(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Fo),this.context||(this.context=new zb),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+c}}else this.params=new pl,this.urlWithParams=t}serializeBody(){return null===this.body?null:Q1(this.body)||J1(this.body)||X1(this.body)||function Yx(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof pl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||X1(this.body)?null:J1(this.body)?this.body.type||null:Q1(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof pl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,d=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let f=e.headers||this.headers,y=e.params||this.params;const w=e.context??this.context;return void 0!==e.setHeaders&&(f=Object.keys(e.setHeaders).reduce((E,A)=>E.set(A,e.setHeaders[A]),f)),e.setParams&&(y=Object.keys(e.setParams).reduce((E,A)=>E.set(A,e.setParams[A]),y)),new Gf(t,r,s,{params:y,headers:f,context:w,reportProgress:d,responseType:i,withCredentials:c})}}var Cr=(()=>((Cr=Cr||{})[Cr.Sent=0]="Sent",Cr[Cr.UploadProgress=1]="UploadProgress",Cr[Cr.ResponseHeader=2]="ResponseHeader",Cr[Cr.DownloadProgress=3]="DownloadProgress",Cr[Cr.Response=4]="Response",Cr[Cr.User=5]="User",Cr))();class Ny{constructor(e,t=200,r="OK"){this.headers=e.headers||new Fo,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class xy extends Ny{constructor(e={}){super(e),this.type=Cr.ResponseHeader}clone(e={}){return new xy({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Gg extends Ny{constructor(e={}){super(e),this.type=Cr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Gg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Wb extends Ny{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Kb(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Yb=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Gf)s=t;else{let f,y;f=i.headers instanceof Fo?i.headers:new Fo(i.headers),i.params&&(y=i.params instanceof pl?i.params:new pl({fromObject:i.params})),s=new Gf(t,r,void 0!==i.body?i.body:null,{headers:f,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=Re(s).pipe(Wl(f=>this.handler.handle(f)));if(t instanceof Gf||"events"===i.observe)return c;const d=c.pipe(Rr(f=>f instanceof Gg));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,S.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe((0,S.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe((0,S.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return d.pipe((0,S.U)(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new pl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Kb(i,r))}post(t,r,i={}){return this.request("POST",t,Kb(i,r))}put(t,r,i={}){return this.request("PUT",t,Kb(i,r))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Ay))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Qb(n,e){return e(n)}function Qx(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const tD=new o.OlP("HTTP_INTERCEPTORS"),ci=new o.OlP("HTTP_INTERCEPTOR_FNS");function qf(){let n=null;return(e,t)=>(null===n&&(n=((0,o.f3M)(tD,{optional:!0})??[]).reduceRight(Qx,Qb)),n(e,t))}let nD=(()=>{class n extends Ay{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(ci)));this.chain=r.reduceRight((i,s)=>function eD(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(i,s,this.injector),Qb)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Hf),o.LFG(o.lqb))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const ek=/^\)\]\}',?\n/;let Oy=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new vn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((k,M)=>i.setRequestHeader(k,M.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const k=t.detectContentTypeHeader();null!==k&&i.setRequestHeader("Content-Type",k)}if(t.responseType){const k=t.responseType.toLowerCase();i.responseType="json"!==k?k:"text"}const s=t.serializeBody();let c=null;const d=()=>{if(null!==c)return c;const k=i.statusText||"OK",M=new Fo(i.getAllResponseHeaders()),V=function tk(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new xy({headers:M,status:i.status,statusText:k,url:V}),c},f=()=>{let{headers:k,status:M,statusText:V,url:W}=d(),ne=null;204!==M&&(ne=typeof i.response>"u"?i.responseText:i.response),0===M&&(M=ne?200:0);let he=M>=200&&M<300;if("json"===t.responseType&&"string"==typeof ne){const Ie=ne;ne=ne.replace(ek,"");try{ne=""!==ne?JSON.parse(ne):null}catch(me){ne=Ie,he&&(he=!1,ne={error:me,text:ne})}}he?(r.next(new Gg({body:ne,headers:k,status:M,statusText:V,url:W||void 0})),r.complete()):r.error(new Wb({error:ne,headers:k,status:M,statusText:V,url:W||void 0}))},y=k=>{const{url:M}=d(),V=new Wb({error:k,status:i.status||0,statusText:i.statusText||"Unknown Error",url:M||void 0});r.error(V)};let w=!1;const E=k=>{w||(r.next(d()),w=!0);let M={type:Cr.DownloadProgress,loaded:k.loaded};k.lengthComputable&&(M.total=k.total),"text"===t.responseType&&i.responseText&&(M.partialText=i.responseText),r.next(M)},A=k=>{let M={type:Cr.UploadProgress,loaded:k.loaded};k.lengthComputable&&(M.total=k.total),r.next(M)};return i.addEventListener("load",f),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),t.reportProgress&&(i.addEventListener("progress",E),null!==s&&i.upload&&i.upload.addEventListener("progress",A)),i.send(s),r.next({type:Cr.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",f),i.removeEventListener("timeout",y),t.reportProgress&&(i.removeEventListener("progress",E),null!==s&&i.upload&&i.upload.removeEventListener("progress",A)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(nd))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Ry=new o.OlP("XSRF_ENABLED"),qg=new o.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),nk=new o.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class ew{}let rk=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=zo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ie),o.LFG(o.Lbi),o.LFG(qg))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function aD(n,e){const t=n.url.toLowerCase();if(!(0,o.f3M)(Ry)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,o.f3M)(ew).getToken(),i=(0,o.f3M)(nk);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Fr=(()=>((Fr=Fr||{})[Fr.Interceptors=0]="Interceptors",Fr[Fr.LegacyInterceptors=1]="LegacyInterceptors",Fr[Fr.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Fr[Fr.NoXsrfProtection=3]="NoXsrfProtection",Fr[Fr.JsonpSupport=4]="JsonpSupport",Fr[Fr.RequestsMadeViaParent=5]="RequestsMadeViaParent",Fr))();function Xd(n,e){return{\u0275kind:n,\u0275providers:e}}function tw(...n){const e=[Yb,Oy,nD,{provide:Ay,useExisting:nD},{provide:Hf,useExisting:Oy},{provide:ci,useValue:aD,multi:!0},{provide:Ry,useValue:!0},{provide:ew,useClass:rk}];for(const t of n)e.push(...t.\u0275providers);return(0,o.MR2)(e)}const lD=new o.OlP("LEGACY_INTERCEPTOR_FN");let ok=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[tw(Xd(Fr.LegacyInterceptors,[{provide:lD,useFactory:qf},{provide:ci,useExisting:lD,multi:!0}]))]}),n})();var My=U(6451),Zg=U(4986),cD=U(3532);function Wg(n=0,e,t=Zg.P){let r=-1;return null!=e&&((0,cD.K)(e)?t=e:r=e),new vn.y(i=>{let s=function ck(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function eh(n,e=I.y){return n=n??uD,(0,Sn.e)((t,r)=>{let i,s=!0;t.subscribe((0,ve.x)(r,c=>{const d=e(c);(s||!n(i,d))&&(s=!1,i=d,r.next(c))}))})}function uD(n,e){return n===e}var dD=U(6063);class uk extends cn.x{constructor(e=1/0,t=1/0,r=dD.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:c}=this;t||(r.push(e),!i&&r.push(s.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let c=0;c<s.length&&!e.closed;c+=r?1:2)e.next(s[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const c=t.now();let d=0;for(let f=1;f<r.length&&r[f]<=c;f+=2)d=f;d&&r.splice(0,d+1)}}}var hD=U(3099);function fD(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,hD.B)({connector:()=>new uk(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}var Kg=U(5032);function ui(n){return(0,Sn.e)((e,t)=>{(0,ii.Xf)(n).subscribe((0,ve.x)(t,()=>t.complete(),Kg.Z)),!t.closed&&e.subscribe(t)})}let zf={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const hk=/[&<>"']/,v2=new RegExp(hk.source,"g"),fk=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,b2=new RegExp(fk.source,"g"),Py={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pk=n=>Py[n];function Fi(n,e){if(e){if(hk.test(n))return n.replace(v2,pk)}else if(fk.test(n))return n.replace(b2,pk);return n}const Fy=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function nw(n){return n.replace(Fy,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const pD=/(^|[^\[])\^/g;function jn(n,e){n="string"==typeof n?n:n.source,e=e||"";const t={replace:(r,i)=>(i=(i=i.source||i).replace(pD,"$1"),n=n.replace(r,i),t),getRegex:()=>new RegExp(n,e)};return t}const rw=/[^\w:]/g,gD=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function mD(n,e,t){if(n){let r;try{r=decodeURIComponent(nw(t)).replace(rw,"").toLowerCase()}catch{return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}e&&!gD.test(t)&&(t=function Ly(n,e){iw[" "+n]||(iw[" "+n]=gk.test(n)?n+"/":sw(n,"/",!0));const t=-1===(n=iw[" "+n]).indexOf(":");return"//"===e.substring(0,2)?t?e:n.replace(mk,"$1")+e:"/"===e.charAt(0)?t?e:n.replace(_k,"$1")+e:n+e}(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const iw={},gk=/^[^:]+:\/*[^/]*$/,mk=/^([^:]+:)[\s\S]*$/,_k=/^([^:]+:\/*[^/]*)[\s\S]*$/,Uy={exec:function(){}};function yk(n,e){const r=n.replace(/\|/g,(s,c,d)=>{let f=!1,y=c;for(;--y>=0&&"\\"===d[y];)f=!f;return f?"|":" |"}).split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function sw(n,e,t){const r=n.length;if(0===r)return"";let i=0;for(;i<r;){const s=n.charAt(r-i-1);if(s!==e||t){if(s===e||!t)break;i++}else i++}return n.slice(0,r-i)}function _D(n,e){if(e<1)return"";let t="";for(;e>1;)1&e&&(t+=n),e>>=1,n+=n;return t+n}function yD(n,e,t,r){const i=e.href,s=e.title?Fi(e.title):null,c=n[1].replace(/\\([\[\]])/g,"$1");if("!"!==n[0].charAt(0)){r.state.inLink=!0;const d={type:"link",raw:t,href:i,title:s,text:c,tokens:r.inlineTokens(c)};return r.state.inLink=!1,d}return{type:"image",raw:t,href:i,title:s,text:Fi(c)}}class ow{constructor(e){this.options=e||zf}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:sw(r,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=function C2(n,e){const t=n.match(/^(\s+)(?:```)/);if(null===t)return e;const r=t[1];return e.split("\n").map(i=>{const s=i.match(/^\s+/);if(null===s)return i;const[c]=s;return c.length>=r.length?i.slice(r.length):i}).join("\n")}(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=sw(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const r=t[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r,i,s,c,d,f,y,w,E,A,k,M,V=t[1].trim();const W=V.length>1,ne={type:"list",raw:"",ordered:W,start:W?+V.slice(0,-1):"",loose:!1,items:[]};V=W?`\\d{1,9}\\${V.slice(-1)}`:`\\${V}`,this.options.pedantic&&(V=W?V:"[*+-]");const he=new RegExp(`^( {0,3}${V})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;e&&(M=!1,(t=he.exec(e))&&!this.rules.block.hr.test(e));){if(r=t[0],e=e.substring(r.length),w=t[2].split("\n",1)[0].replace(/^\t+/,me=>" ".repeat(3*me.length)),E=e.split("\n",1)[0],this.options.pedantic?(c=2,k=w.trimLeft()):(c=t[2].search(/[^ ]/),c=c>4?1:c,k=w.slice(c),c+=t[1].length),f=!1,!w&&/^ *$/.test(E)&&(r+=E+"\n",e=e.substring(E.length+1),M=!0),!M){const me=new RegExp(`^ {0,${Math.min(3,c-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),Le=new RegExp(`^ {0,${Math.min(3,c-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),je=new RegExp(`^ {0,${Math.min(3,c-1)}}(?:\`\`\`|~~~)`),ct=new RegExp(`^ {0,${Math.min(3,c-1)}}#`);for(;e&&(A=e.split("\n",1)[0],E=A,this.options.pedantic&&(E=E.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(je.test(E)||ct.test(E)||me.test(E)||Le.test(e)));){if(E.search(/[^ ]/)>=c||!E.trim())k+="\n"+E.slice(c);else{if(f||w.search(/[^ ]/)>=4||je.test(w)||ct.test(w)||Le.test(w))break;k+="\n"+E}!f&&!E.trim()&&(f=!0),r+=A+"\n",e=e.substring(A.length+1),w=E.slice(c)}}ne.loose||(y?ne.loose=!0:/\n *\n *$/.test(r)&&(y=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(k),i&&(s="[ ] "!==i[0],k=k.replace(/^\[[ xX]\] +/,""))),ne.items.push({type:"list_item",raw:r,task:!!i,checked:s,loose:!1,text:k}),ne.raw+=r}ne.items[ne.items.length-1].raw=r.trimRight(),ne.items[ne.items.length-1].text=k.trimRight(),ne.raw=ne.raw.trimRight();const Ie=ne.items.length;for(d=0;d<Ie;d++)if(this.lexer.state.top=!1,ne.items[d].tokens=this.lexer.blockTokens(ne.items[d].text,[]),!ne.loose){const me=ne.items[d].tokens.filter(je=>"space"===je.type),Le=me.length>0&&me.some(je=>/\n.*\n/.test(je.raw));ne.loose=Le}if(ne.loose)for(d=0;d<Ie;d++)ne.items[d].loose=!0;return ne}}html(e){const t=this.rules.block.html.exec(e);if(t){const r={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(t[0]):Fi(t[0]);r.type="paragraph",r.text=i,r.tokens=this.lexer.inline(i)}return r}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(t){const r={type:"table",header:yk(t[1]).map(i=>({text:i})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(r.header.length===r.align.length){r.raw=t[0];let s,c,d,f,i=r.align.length;for(s=0;s<i;s++)r.align[s]=/^ *-+: *$/.test(r.align[s])?"right":/^ *:-+: *$/.test(r.align[s])?"center":/^ *:-+ *$/.test(r.align[s])?"left":null;for(i=r.rows.length,s=0;s<i;s++)r.rows[s]=yk(r.rows[s],r.header.length).map(y=>({text:y}));for(i=r.header.length,c=0;c<i;c++)r.header[c].tokens=this.lexer.inline(r.header[c].text);for(i=r.rows.length,c=0;c<i;c++)for(f=r.rows[c],d=0;d<f.length;d++)f[d].tokens=this.lexer.inline(f[d].text);return r}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Fi(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):Fi(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const c=sw(r.slice(0,-1),"\\");if((r.length-c.length)%2==0)return}else{const c=function w2(n,e){if(-1===n.indexOf(e[1]))return-1;const t=n.length;let r=0,i=0;for(;i<t;i++)if("\\"===n[i])i++;else if(n[i]===e[0])r++;else if(n[i]===e[1]&&(r--,r<0))return i;return-1}(t[2],"()");if(c>-1){const f=(0===t[0].indexOf("!")?5:4)+t[1].length+c;t[2]=t[2].substring(0,c),t[0]=t[0].substring(0,f).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const c=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);c&&(i=c[1],s=c[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(i=this.options.pedantic&&!/>$/.test(r)?i.slice(1):i.slice(1,-1)),yD(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return yD(r,i,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;const s=i[1]||i[2]||"";if(!s||s&&(""===r||this.rules.inline.punctuation.exec(r))){const c=i[0].length-1;let d,f,y=c,w=0;const E="*"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(E.lastIndex=0,t=t.slice(-1*e.length+c);null!=(i=E.exec(t));){if(d=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!d)continue;if(f=d.length,i[3]||i[4]){y+=f;continue}if((i[5]||i[6])&&c%3&&!((c+f)%3)){w+=f;continue}if(y-=f,y>0)continue;f=Math.min(f,f+y+w);const A=e.slice(0,c+i.index+(i[0].length-d.length)+f);if(Math.min(c,f)%2){const M=A.slice(1,-1);return{type:"em",raw:A,text:M,tokens:this.lexer.inlineTokens(M)}}const k=A.slice(2,-2);return{type:"strong",raw:A,text:k,tokens:this.lexer.inlineTokens(k)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=Fi(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const r=this.rules.inline.autolink.exec(e);if(r){let i,s;return"@"===r[2]?(i=Fi(this.options.mangle?t(r[1]):r[1]),s="mailto:"+i):(i=Fi(r[1]),s=i),{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}url(e,t){let r;if(r=this.rules.inline.url.exec(e)){let i,s;if("@"===r[2])i=Fi(this.options.mangle?t(r[0]):r[0]),s="mailto:"+i;else{let c;do{c=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0]}while(c!==r[0]);i=Fi(r[0]),s="www."===r[1]?"http://"+r[0]:r[0]}return{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,t){const r=this.rules.inline.text.exec(e);if(r){let i;return i=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):Fi(r[0]):r[0]:Fi(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:i}}}}const kt={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Uy,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};kt.def=jn(kt.def).replace("label",kt._label).replace("title",kt._title).getRegex(),kt.bullet=/(?:[*+-]|\d{1,9}[.)])/,kt.listItemStart=jn(/^( *)(bull) */).replace("bull",kt.bullet).getRegex(),kt.list=jn(kt.list).replace(/bull/g,kt.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+kt.def.source+")").getRegex(),kt._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",kt._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,kt.html=jn(kt.html,"i").replace("comment",kt._comment).replace("tag",kt._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),kt.paragraph=jn(kt._paragraph).replace("hr",kt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kt._tag).getRegex(),kt.blockquote=jn(kt.blockquote).replace("paragraph",kt.paragraph).getRegex(),kt.normal={...kt},kt.gfm={...kt.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},kt.gfm.table=jn(kt.gfm.table).replace("hr",kt.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kt._tag).getRegex(),kt.gfm.paragraph=jn(kt._paragraph).replace("hr",kt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",kt.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kt._tag).getRegex(),kt.pedantic={...kt.normal,html:jn("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",kt._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Uy,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:jn(kt.normal._paragraph).replace("hr",kt.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",kt.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const dt={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Uy,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Uy,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function T2(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function Lo(n){let t,r,e="";const i=n.length;for(t=0;t<i;t++)r=n.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),e+="&#"+r+";";return e}dt._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",dt.punctuation=jn(dt.punctuation).replace(/punctuation/g,dt._punctuation).getRegex(),dt.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,dt.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,dt._comment=jn(kt._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),dt.emStrong.lDelim=jn(dt.emStrong.lDelim).replace(/punct/g,dt._punctuation).getRegex(),dt.emStrong.rDelimAst=jn(dt.emStrong.rDelimAst,"g").replace(/punct/g,dt._punctuation).getRegex(),dt.emStrong.rDelimUnd=jn(dt.emStrong.rDelimUnd,"g").replace(/punct/g,dt._punctuation).getRegex(),dt._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,dt._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,dt._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,dt.autolink=jn(dt.autolink).replace("scheme",dt._scheme).replace("email",dt._email).getRegex(),dt._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,dt.tag=jn(dt.tag).replace("comment",dt._comment).replace("attribute",dt._attribute).getRegex(),dt._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,dt._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,dt._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,dt.link=jn(dt.link).replace("label",dt._label).replace("href",dt._href).replace("title",dt._title).getRegex(),dt.reflink=jn(dt.reflink).replace("label",dt._label).replace("ref",kt._label).getRegex(),dt.nolink=jn(dt.nolink).replace("ref",kt._label).getRegex(),dt.reflinkSearch=jn(dt.reflinkSearch,"g").replace("reflink",dt.reflink).replace("nolink",dt.nolink).getRegex(),dt.normal={...dt},dt.pedantic={...dt.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:jn(/^!?\[(label)\]\((.*?)\)/).replace("label",dt._label).getRegex(),reflink:jn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",dt._label).getRegex()},dt.gfm={...dt.normal,escape:jn(dt.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},dt.gfm.url=jn(dt.gfm.url,"i").replace("email",dt.gfm._extended_email).getRegex(),dt.breaks={...dt.gfm,br:jn(dt.br).replace("{2,}","*").getRegex(),text:jn(dt.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class Iu{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||zf,this.options.tokenizer=this.options.tokenizer||new ow,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:kt.normal,inline:dt.normal};this.options.pedantic?(t.block=kt.pedantic,t.inline=dt.pedantic):this.options.gfm&&(t.block=kt.gfm,t.inline=this.options.breaks?dt.breaks:dt.gfm),this.tokenizer.rules=t}static get rules(){return{block:kt,inline:dt}}static lex(e,t){return new Iu(t).lex(e)}static lexInline(e,t){return new Iu(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let r,i,s,c;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(d,f,y)=>f+"    ".repeat(y.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(d=>!!(r=d.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),1===r.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?t.push(r):(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(i.raw+="\n"+r.raw,i.text+="\n"+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let d=1/0;const f=e.slice(1);let y;this.options.extensions.startBlock.forEach(function(w){y=w.call({lexer:this},f),"number"==typeof y&&y>=0&&(d=Math.min(d,y))}),d<1/0&&d>=0&&(s=e.substring(0,d+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],c&&"paragraph"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),c=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&"text"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,d,f,y,c=e;if(this.tokens.links){const w=Object.keys(this.tokens.links);if(w.length>0)for(;null!=(d=this.tokenizer.rules.inline.reflinkSearch.exec(c));)w.includes(d[0].slice(d[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,d.index)+"["+_D("a",d[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(d=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,d.index)+"["+_D("a",d[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(d=this.tokenizer.rules.inline.escapedEmSt.exec(c));)c=c.slice(0,d.index+d[0].length-2)+"++"+c.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(f||(y=""),f=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(w=>!!(r=w.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,c,y)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e,Lo)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e,Lo))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let w=1/0;const E=e.slice(1);let A;this.options.extensions.startInline.forEach(function(k){A=k.call({lexer:this},E),"number"==typeof A&&A>=0&&(w=Math.min(w,A))}),w<1/0&&w>=0&&(s=e.substring(0,w+1))}if(r=this.tokenizer.inlineText(s,T2)){e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(y=r.raw.slice(-1)),f=!0,i=t[t.length-1],i&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){const w="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(w);break}throw new Error(w)}}return t}}class th{constructor(e){this.options=e||zf}code(e,t,r){const i=(t||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(e,i);null!=s&&s!==e&&(r=!0,e=s)}return e=e.replace(/\n$/,"")+"\n",i?'<pre><code class="'+this.options.langPrefix+Fi(i)+'">'+(r?e:Fi(e,!0))+"</code></pre>\n":"<pre><code>"+(r?e:Fi(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,t,r,i){return this.options.headerIds?`<h${t} id="${this.options.headerPrefix+i.slug(r)}">${e}</h${t}>\n`:`<h${t}>${e}</h${t}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,r){const i=t?"ol":"ul";return"<"+i+(t&&1!==r?' start="'+r+'"':"")+">\n"+e+"</"+i+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){if(null===(e=mD(this.options.sanitize,this.options.baseUrl,e)))return r;let i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+r+"</a>",i}image(e,t,r){if(null===(e=mD(this.options.sanitize,this.options.baseUrl,e)))return r;let i=`<img src="${e}" alt="${r}"`;return t&&(i+=` title="${t}"`),i+=this.options.xhtml?"/>":">",i}text(e){return e}}class vD{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class bk{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let r=e,i=0;if(this.seen.hasOwnProperty(r)){i=this.seen[e];do{i++,r=e+"-"+i}while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=i,this.seen[r]=0),r}slug(e,t={}){const r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)}}class di{constructor(e){this.options=e||zf,this.options.renderer=this.options.renderer||new th,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new vD,this.slugger=new bk}static parse(e,t){return new di(t).parse(e)}static parseInline(e,t){return new di(t).parseInline(e)}parse(e,t=!0){let i,s,c,d,f,y,w,E,A,k,M,V,W,ne,he,Ie,me,Le,je,r="";const ct=e.length;for(i=0;i<ct;i++)if(k=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[k.type]&&(je=this.options.extensions.renderers[k.type].call({parser:this},k),!1!==je||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(k.type)))r+=je||"";else switch(k.type){case"space":continue;case"hr":r+=this.renderer.hr();continue;case"heading":r+=this.renderer.heading(this.parseInline(k.tokens),k.depth,nw(this.parseInline(k.tokens,this.textRenderer)),this.slugger);continue;case"code":r+=this.renderer.code(k.text,k.lang,k.escaped);continue;case"table":for(E="",w="",d=k.header.length,s=0;s<d;s++)w+=this.renderer.tablecell(this.parseInline(k.header[s].tokens),{header:!0,align:k.align[s]});for(E+=this.renderer.tablerow(w),A="",d=k.rows.length,s=0;s<d;s++){for(y=k.rows[s],w="",f=y.length,c=0;c<f;c++)w+=this.renderer.tablecell(this.parseInline(y[c].tokens),{header:!1,align:k.align[c]});A+=this.renderer.tablerow(w)}r+=this.renderer.table(E,A);continue;case"blockquote":A=this.parse(k.tokens),r+=this.renderer.blockquote(A);continue;case"list":for(M=k.ordered,V=k.start,W=k.loose,d=k.items.length,A="",s=0;s<d;s++)he=k.items[s],Ie=he.checked,me=he.task,ne="",he.task&&(Le=this.renderer.checkbox(Ie),W?he.tokens.length>0&&"paragraph"===he.tokens[0].type?(he.tokens[0].text=Le+" "+he.tokens[0].text,he.tokens[0].tokens&&he.tokens[0].tokens.length>0&&"text"===he.tokens[0].tokens[0].type&&(he.tokens[0].tokens[0].text=Le+" "+he.tokens[0].tokens[0].text)):he.tokens.unshift({type:"text",text:Le}):ne+=Le),ne+=this.parse(he.tokens,W),A+=this.renderer.listitem(ne,me,Ie);r+=this.renderer.list(A,M,V);continue;case"html":r+=this.renderer.html(k.text);continue;case"paragraph":r+=this.renderer.paragraph(this.parseInline(k.tokens));continue;case"text":for(A=k.tokens?this.parseInline(k.tokens):k.text;i+1<ct&&"text"===e[i+1].type;)k=e[++i],A+="\n"+(k.tokens?this.parseInline(k.tokens):k.text);r+=t?this.renderer.paragraph(A):A;continue;default:{const Lt='Token with "'+k.type+'" type was not found.';if(this.options.silent)return void console.error(Lt);throw new Error(Lt)}}return r}parseInline(e,t){t=t||this.renderer;let i,s,c,r="";const d=e.length;for(i=0;i<d;i++)if(s=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(c=this.options.extensions.renderers[s.type].call({parser:this},s),!1!==c||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)))r+=c||"";else switch(s.type){case"escape":case"text":r+=t.text(s.text);break;case"html":r+=t.html(s.text);break;case"link":r+=t.link(s.href,s.title,this.parseInline(s.tokens,t));break;case"image":r+=t.image(s.href,s.title,s.text);break;case"strong":r+=t.strong(this.parseInline(s.tokens,t));break;case"em":r+=t.em(this.parseInline(s.tokens,t));break;case"codespan":r+=t.codespan(s.text);break;case"br":r+=t.br();break;case"del":r+=t.del(this.parseInline(s.tokens,t));break;default:{const f='Token with "'+s.type+'" type was not found.';if(this.options.silent)return void console.error(f);throw new Error(f)}}return r}}class aw{constructor(e){this.options=e||zf}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}function bD(n,e){return(t,r,i)=>{"function"==typeof r&&(i=r,r=null);const s={...r},c=function lw(n,e,t){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",n){const i="<p>An error occurred:</p><pre>"+Fi(r.message+"",!0)+"</pre>";return e?Promise.resolve(i):t?void t(null,i):i}if(e)return Promise.reject(r);if(!t)throw r;t(r)}}((r={...Ot.defaults,...s}).silent,r.async,i);if(typeof t>"u"||null===t)return c(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(function vk(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(r),r.hooks&&(r.hooks.options=r),i){const d=r.highlight;let f;try{r.hooks&&(t=r.hooks.preprocess(t)),f=n(t,r)}catch(E){return c(E)}const y=function(E){let A;if(!E)try{r.walkTokens&&Ot.walkTokens(f,r.walkTokens),A=e(f,r),r.hooks&&(A=r.hooks.postprocess(A))}catch(k){E=k}return r.highlight=d,E?c(E):i(null,A)};if(!d||d.length<3||(delete r.highlight,!f.length))return y();let w=0;return Ot.walkTokens(f,function(E){"code"===E.type&&(w++,setTimeout(()=>{d(E.text,E.lang,function(A,k){if(A)return y(A);null!=k&&k!==E.text&&(E.text=k,E.escaped=!0),w--,0===w&&y()})},0))}),void(0===w&&y())}if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(t):t).then(d=>n(d,r)).then(d=>r.walkTokens?Promise.all(Ot.walkTokens(d,r.walkTokens)).then(()=>d):d).then(d=>e(d,r)).then(d=>r.hooks?r.hooks.postprocess(d):d).catch(c);try{r.hooks&&(t=r.hooks.preprocess(t));const d=n(t,r);r.walkTokens&&Ot.walkTokens(d,r.walkTokens);let f=e(d,r);return r.hooks&&(f=r.hooks.postprocess(f)),f}catch(d){return c(d)}}}function Ot(n,e,t){return bD(Iu.lex,di.parse)(n,e,t)}Ot.options=Ot.setOptions=function(n){return function y2(n){zf=n}(Ot.defaults={...Ot.defaults,...n}),Ot},Ot.getDefaults=function dk(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},Ot.defaults=zf,Ot.use=function(...n){const e=Ot.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(t=>{const r={...t};if(r.async=Ot.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){const s=e.renderers[i.name];e.renderers[i.name]=s?function(...c){let d=i.renderer.apply(this,c);return!1===d&&(d=s.apply(this,c)),d}:i.renderer}if(i.tokenizer){if(!i.level||"block"!==i.level&&"inline"!==i.level)throw new Error("extension level must be 'block' or 'inline'");e[i.level]?e[i.level].unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&("block"===i.level?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:"inline"===i.level&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),t.renderer){const i=Ot.defaults.renderer||new th;for(const s in t.renderer){const c=i[s];i[s]=(...d)=>{let f=t.renderer[s].apply(i,d);return!1===f&&(f=c.apply(i,d)),f}}r.renderer=i}if(t.tokenizer){const i=Ot.defaults.tokenizer||new ow;for(const s in t.tokenizer){const c=i[s];i[s]=(...d)=>{let f=t.tokenizer[s].apply(i,d);return!1===f&&(f=c.apply(i,d)),f}}r.tokenizer=i}if(t.hooks){const i=Ot.defaults.hooks||new aw;for(const s in t.hooks){const c=i[s];i[s]=aw.passThroughHooks.has(s)?d=>{if(Ot.defaults.async)return Promise.resolve(t.hooks[s].call(i,d)).then(y=>c.call(i,y));const f=t.hooks[s].call(i,d);return c.call(i,f)}:(...d)=>{let f=t.hooks[s].apply(i,d);return!1===f&&(f=c.apply(i,d)),f}}r.hooks=i}if(t.walkTokens){const i=Ot.defaults.walkTokens;r.walkTokens=function(s){let c=[];return c.push(t.walkTokens.call(this,s)),i&&(c=c.concat(i.call(this,s))),c}}Ot.setOptions(r)})},Ot.walkTokens=function(n,e){let t=[];for(const r of n)switch(t=t.concat(e.call(Ot,r)),r.type){case"table":for(const i of r.header)t=t.concat(Ot.walkTokens(i.tokens,e));for(const i of r.rows)for(const s of i)t=t.concat(Ot.walkTokens(s.tokens,e));break;case"list":t=t.concat(Ot.walkTokens(r.items,e));break;default:Ot.defaults.extensions&&Ot.defaults.extensions.childTokens&&Ot.defaults.extensions.childTokens[r.type]?Ot.defaults.extensions.childTokens[r.type].forEach(function(i){t=t.concat(Ot.walkTokens(r[i],e))}):r.tokens&&(t=t.concat(Ot.walkTokens(r.tokens,e)))}return t},Ot.parseInline=bD(Iu.lexInline,di.parseInline),Ot.Parser=di,Ot.parser=di.parse,Ot.Renderer=th,Ot.TextRenderer=vD,Ot.Lexer=Iu,Ot.lexer=Iu.lex,Ot.Tokenizer=ow,Ot.Slugger=bk,Ot.Hooks=aw,Ot.parse=Ot;let gl=(()=>{class n{constructor(){this._buttonClick$=new cn.x,this.copied$=this._buttonClick$.pipe(Pn(()=>(0,My.T)(Re(!0),Wg(3e3).pipe(Wh(!1)))),eh(),fD(1)),this.copiedText$=this.copied$.pipe(la(!1),(0,S.U)(t=>t?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(t,r){1&t&&(o.TgZ(0,"button",0),o.NdJ("click",function(){return r.onCopyToClipboardClick()}),o.ALo(1,"async"),o._uU(2),o.ALo(3,"async"),o.qZA()),2&t&&(o.ekj("copied",o.lcZ(1,3,r.copied$)),o.xp6(2),o.Oqu(o.lcZ(3,5,r.copiedText$)))},dependencies:[ni],encapsulation:2,changeDetection:0}),n})();class CD{}class Nk{}const SD=new o.OlP("SECURITY_CONTEXT");let ID=(()=>{class n{constructor(t,r,i,s,c,d){this.platform=t,this.securityContext=r,this.http=i,this.clipboardOptions=s,this.sanitizer=d,this.DEFAULT_MARKED_OPTIONS={renderer:new th},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new cn.x,this.reload$=this._reload$.asObservable(),this.options=c}get options(){return this._options}set options(t){this._options={...this.DEFAULT_MARKED_OPTIONS,...t}}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}parse(t,r=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:i,inline:s,emoji:c,mermaid:d,disableSanitizer:f}=r,y={...this.options,...r.markedOptions};d&&(this.renderer=this.extendRenderer(y.renderer||new th));const w=this.trimIndentation(t),E=i?this.decodeHtml(w):w,A=c?this.parseEmoji(E):E,k=this.parseMarked(A,y,s);return(f?k:this.sanitizer.sanitize(this.securityContext,k))||""}render(t,r=this.DEFAULT_RENDER_OPTIONS,i){const{clipboard:s,clipboardOptions:c,katex:d,katexOptions:f,mermaid:y,mermaidOptions:w}=r;s&&this.renderClipboard(t,i,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...c}),d&&this.renderKatex(t,{...this.DEFAULT_KATEX_OPTIONS,...f}),y&&this.renderMermaid(t,{...this.DEFAULT_MERMAID_OPTIONS,...w}),this.highlight(t)}reload(){this._reload$.next()}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe((0,S.U)(r=>this.handleExtension(t,r)))}highlight(t){if(!bo(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;t||(t=document);const r=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,i=>i.classList.add("language-none")),Prism.highlightAllUnder(t)}decodeHtml(t){if(!bo(this.platform))return t;const r=document.createElement("textarea");return r.innerHTML=t,r.value}extendRenderer(t){const r=t;if(!0===r.\u0275NgxMarkdownRendererExtended)return t;const i=t.code;return t.code=function(s,c,d){return"mermaid"===c?`<div class="mermaid">${s}</div>`:i.call(this,s,c,d)},r.\u0275NgxMarkdownRendererExtended=!0,t}handleExtension(t,r){const i=t.lastIndexOf("://"),s=i>-1?t.substring(i+4):t,c=s.lastIndexOf("/"),d=c>-1?s.substring(c+1).split("?")[0]:"",f=d.lastIndexOf("."),y=f>-1?d.substring(f+1):"";return y&&"md"!==y?"```"+y+"\n"+r+"\n```":r}parseMarked(t,r,i=!1){return i?Ot.parseInline(t,r):Ot.parse(t,r)}parseEmoji(t){if(!bo(this.platform))return t;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}renderKatex(t,r){if(bo(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(t,r)}}renderClipboard(t,r,i){if(!bo(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!r)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:s,buttonTemplate:c}=i,d=t.querySelectorAll("pre");for(let f=0;f<d.length;f++){const y=d.item(f),w=document.createElement("div");w.style.position="relative",y.parentNode.insertBefore(w,y),w.appendChild(y);const E=document.createElement("div");let A,k;E.style.position="absolute",E.style.top=".5em",E.style.right=".5em",E.style.opacity="0",E.style.transition="opacity 250ms ease-out",w.insertAdjacentElement("beforeend",E),y.onmouseover=()=>E.style.opacity="1",y.onmouseout=()=>E.style.opacity="0",A=s?r.createComponent(s).hostView:c?r.createEmbeddedView(c):r.createComponent(gl).hostView,A.rootNodes.forEach(M=>{M.onmouseover=()=>E.style.opacity="1",E.appendChild(M),k=new ClipboardJS(M,{text:()=>y.innerText})}),A.onDestroy(()=>k.destroy())}}renderMermaid(t,r=this.DEFAULT_MERMAID_OPTIONS){if(!bo(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const i=t.querySelectorAll(".mermaid");0!==i.length&&(mermaid.initialize(r),mermaid.init(i))}trimIndentation(t){if(!t)return"";let r;return t.split("\n").map(i=>{let s=r;return i.length>0&&(s=isNaN(s)?i.search(/\S|$/):Math.min(i.search(/\S|$/),s)),isNaN(r)&&(r=s),s?i.substring(s):i}).join("\n")}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.Lbi),o.LFG(SD),o.LFG(Yb,8),o.LFG(CD,8),o.LFG(Nk,8),o.LFG($h))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),ND=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[ID,t&&t.loader||[],t&&t.clipboardOptions||[],t&&t.markedOptions||[],{provide:SD,useValue:t&&null!=t.sanitize?t.sanitize:o.q3G.HTML}]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Gr]}),n})();var uw;!function(n){let e;var i;let t,r;(i=e=n.SecurityLevel||(n.SecurityLevel={})).Strict="strict",i.Loose="loose",i.Antiscript="antiscript",i.Sandbox="sandbox",function(i){i.Base="base",i.Forest="forest",i.Dark="dark",i.Default="default",i.Neutral="neutral"}(t=n.Theme||(n.Theme={})),function(i){i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"}(r=n.LogLevel||(n.LogLevel={}))}(uw||(uw={}));let Zf=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const dw=["toast-component",""];function Lk(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",5),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.remove())}),o.TgZ(1,"span",6),o._uU(2,"\xd7"),o.qZA()()}}function Uk(n,e){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const t=o.oxw(2);o.xp6(1),o.hij("[",t.duplicatesCount+1,"]")}}function I2(n,e){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.YNc(2,Uk,2,1,"ng-container",4),o.qZA()),2&n){const t=o.oxw();o.Tol(t.options.titleClass),o.uIk("aria-label",t.title),o.xp6(1),o.hij(" ",t.title," "),o.xp6(1),o.Q6J("ngIf",t.duplicatesCount)}}function A2(n,e){if(1&n&&o._UZ(0,"div",7),2&n){const t=o.oxw();o.Tol(t.options.messageClass),o.Q6J("innerHTML",t.message,o.oJD)}}function N2(n,e){if(1&n&&(o.TgZ(0,"div",8),o._uU(1),o.qZA()),2&n){const t=o.oxw();o.Tol(t.options.messageClass),o.uIk("aria-label",t.message),o.xp6(1),o.hij(" ",t.message," ")}}function xD(n,e){if(1&n&&(o.TgZ(0,"div"),o._UZ(1,"div",9),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Udp("width",t.width+"%")}}class R2{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Hk{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class Vy{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new cn.x;_activate=new cn.x;_manualClose=new cn.x;_resetTimeout=new cn.x;_countDuplicate=new cn.x;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class jy{toastId;config;message;title;toastType;toastRef;_onTap=new cn.x;_onAction=new cn.x;constructor(e,t,r,i,s,c){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=s,this.toastRef=c,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const hw=new o.OlP("ToastConfig");class nh extends Hk{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let OD=(()=>{class n{_document=(0,o.f3M)(ie);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class fw{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let pw=(()=>{class n{_overlayContainer=(0,o.f3M)(OD);_componentFactoryResolver=(0,o.f3M)(o._Vd);_appRef=(0,o.f3M)(o.z2F);_document=(0,o.f3M)(ie);_paneElements=new Map;create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new nh(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new fw(this._createPortalHost(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Au=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,r,i,s,c){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=c,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},s=""){return this._preBuildNotification(s,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,s){const{includeTitleDuplicates:c}=this.toastrConfig;for(const d of this.toasts)if((!c||c&&d.title===t)&&d.message===r)return d.toastRef.onDuplicate(i,s),d;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,s)):this._buildNotification(t,r,i,s)}_buildNotification(t,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=r;let d=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(d=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const f=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let y=r;r&&s.enableHtml&&(y=this.sanitizer.sanitize(o.q3G.HTML,r));const w=new Vy(f),E=new jy(this.index,s,y,i,t,w),k=o.zs3.create({providers:[{provide:jy,useValue:E}],parent:this._injector}),M=new R2(s.toastComponent,k),V=f.attach(M,s.newestOnTop);w.componentInstance=V.instance;const W={toastId:this.index,title:i||"",message:r||"",toastRef:w,onShown:w.afterActivate(),onHidden:w.afterClosed(),onTap:E.onTap(),onAction:E.onAction(),portal:V};return d||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{W.toastRef.activate()})),this.toasts.push(W),W}static \u0275fac=function(r){return new(r||n)(o.LFG(hw),o.LFG(pw),o.LFG(o.zs3),o.LFG($h),o.LFG(o.R0b))};static \u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const gw={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if("inactive"===this.state.value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(r){return new(r||n)(o.Y36(Au),o.Y36(jy),o.Y36(o.R0b))};static \u0275cmp=o.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){1&r&&o.NdJ("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),2&r&&(o.d8E("@flyInOut",i.state),o.Tol(i.toastClasses),o.Udp("display",i.displayStyle))},standalone:!0,features:[o.jDz],attrs:dw,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){1&r&&(o.YNc(0,Lk,3,0,"button",0),o.YNc(1,I2,3,5,"div",1),o.YNc(2,A2,1,3,"div",2),o.YNc(3,N2,2,4,"div",3),o.YNc(4,xD,2,2,"div",4)),2&r&&(o.Q6J("ngIf",i.options.closeButton),o.xp6(1),o.Q6J("ngIf",i.title),o.xp6(1),o.Q6J("ngIf",i.message&&i.options.enableHtml),o.xp6(1),o.Q6J("ngIf",i.message&&!i.options.enableHtml),o.xp6(1),o.Q6J("ngIf",i.options.progressBar))},dependencies:[fr],encapsulation:2,data:{animation:[F_("flyInOut",[U_("inactive",Ld({opacity:0})),U_("active",Ld({opacity:1})),U_("removed",Ld({opacity:0})),sE("inactive => active",F0("{{ easeTime }}ms {{ easing }}")),sE("active => removed",F0("{{ easeTime }}ms {{ easing }}"))])]}})}return n})()},Hy=(n={})=>(0,o.MR2)([{provide:hw,useValue:{default:gw,config:n}}]);let M2=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[Hy(t)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=o.oAB({type:n});static \u0275inj=o.cJS({})}return n})(),rh=(()=>{class n{constructor(){}add(t,r){localStorage.setItem(t,JSON.stringify(r))}update(t,r){localStorage.getItem(t)&&this.delete(t),this.add(t,r)}get(t){const r=localStorage.getItem(t);return r?JSON.parse(r):null}getLoggedAccount(){return this.get("logged_account")}delete(t){localStorage.removeItem(t)}clear(){localStorage.clear()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gk(n,e){1&n&&(o.TgZ(0,"small",22),o._uU(1," Please enter email address.! "),o.qZA())}function qk(n,e){1&n&&(o.TgZ(0,"small",22),o._uU(1," Email address not well formed.! "),o.qZA())}let zk=(()=>{class n{constructor(t,r,i,s){this.accountInteractor=t,this.router=r,this.toastr=i,this.localStorageService=s,this.loginForm=new Os({email:new lt("",[Zn.required,Zn.email]),password:new lt("",[Zn.required])})}ngOnInit(){this.localStorageService.clear()}onSubmit(){this.loginForm.valid?this.accountInteractor.login({username:this.loginForm.value.email,password:this.loginForm.value.password}).subscribe({next:t=>{t&&t.success?(this.localStorageService.add("logged_account",t.data),this.router.navigate(["/dashboard"])):this.toastr.error("Account not found","Error")},error:t=>{this.toastr.error(t.message(),"Error")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Error")}static#e=this.\u0275fac=function(r){return new(r||n)(o.Y36(Zf),o.Y36(br),o.Y36(Au),o.Y36(rh))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-login"]],decls:34,vars:4,consts:[[1,"main-wrapper","account-wrapper"],[1,"account-page"],[1,"account-center"],[1,"account-box"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],[1,"account-logo"],["href",""],["src","assets/images/logo.png","alt",""],[1,"form-group"],["for","loginUsername"],["type","email","formControlName","email","placeholder","Enter email","id","loginUsername",1,"form-control"],["class","form-text text-muted",4,"ngIf"],["for","loginPassword"],["type","password","formControlName","password","placeholder","Password","id","loginPassword",1,"form-control"],[1,"form-group","text-right"],[1,"form-group","text-center"],["type","submit",1,"btn","btn-primary","account-btn",2,"background-color","#042c44","color","#fcbc1f",3,"disabled"],[1,"text-center","register-link"],[1,"m-t-50"],["width","50","src","assets/images/akkodis.png","alt","akkodis",1,""],[2,"font-size","xx-small"],[1,"text-danger"],[1,"form-text","text-muted"]],template:function(r,i){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(5,"div",5)(6,"a",6),o._UZ(7,"img",7),o.qZA()(),o.TgZ(8,"div",8)(9,"label",9),o._uU(10,"Email"),o.qZA(),o._UZ(11,"input",10),o.YNc(12,Gk,2,0,"small",11),o.YNc(13,qk,2,0,"small",11),o.qZA(),o.TgZ(14,"div",8)(15,"label",12),o._uU(16,"Password"),o.qZA(),o._UZ(17,"input",13),o.qZA(),o.TgZ(18,"div",14)(19,"a",6),o._uU(20,"Forgot your password?"),o.qZA()(),o.TgZ(21,"div",15)(22,"button",16),o._uU(23," Login "),o.qZA()(),o.TgZ(24,"div",17),o._uU(25," Don\u2019t have an account? "),o.TgZ(26,"a",6),o._uU(27,"Register Now"),o.qZA()(),o.TgZ(28,"div",18),o._UZ(29,"img",19),o.TgZ(30,"span",20),o._uU(31,"Version : "),o.TgZ(32,"b",21),o._uU(33," 0.1.0"),o.qZA()()()()()()()()),2&r&&(o.xp6(4),o.Q6J("formGroup",i.loginForm),o.xp6(8),o.Q6J("ngIf",i.loginForm.controls.email.touched&&(null==i.loginForm.controls.email.errors?null:i.loginForm.controls.email.errors.required)),o.xp6(1),o.Q6J("ngIf",i.loginForm.controls.email.touched&&(null==i.loginForm.controls.email.errors?null:i.loginForm.controls.email.errors.email)),o.xp6(9),o.Q6J("disabled",!i.loginForm.valid))},dependencies:[fr,uc,lc,Tu,Kd,dc,Eu],encapsulation:2})}return n})(),MD=(()=>{class n{constructor(t,r){this.localStorageService=t,this.router=r,this.showSideBar=!0,this.loggedAccount=t.getLoggedAccount()}onClickBars(){this.showSideBar=!this.showSideBar}onClickLogo(){this.router.navigate(["dashboard"])}static#e=this.\u0275fac=function(r){return new(r||n)(o.Y36(rh),o.Y36(br))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-header"]],decls:17,vars:2,consts:[[1,"header"],[1,"header-left"],[1,"logo","pointer",3,"click"],["src","assets/images/logo.png","width","35","height","35","alt",""],["id","toggle_btn","href","javascript:void(0);",3,"click"],[1,"fa","fa-bars"],["id","mobile_btn","href","#sidebar",1,"mobile_btn","float-left"],[1,"nav","user-menu","float-right"],[1,"nav-item","dropdown"],["href","#","data-toggle","dropdown",1,"dropdown-toggle","nav-link","user-link"],[1,"user-img"],["src","assets/images/user.jpg","width","24","alt","Admin",1,"rounded-circle"]],template:function(r,i){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"a",2),o.NdJ("click",function(){return i.onClickLogo()}),o._UZ(3,"img",3),o.TgZ(4,"span"),o._uU(5,"EstiMate"),o.qZA()()(),o.TgZ(6,"a",4),o.NdJ("click",function(){return i.onClickBars()}),o._UZ(7,"i",5),o.qZA(),o.TgZ(8,"a",6),o._UZ(9,"i",5),o.qZA(),o.TgZ(10,"ul",7)(11,"li",8)(12,"a",9)(13,"span",10),o._UZ(14,"img",11),o.qZA(),o.TgZ(15,"span"),o._uU(16),o.qZA()()()()()),2&r&&(o.xp6(16),o.AsE("",i.loggedAccount.firstname," ",i.loggedAccount.lastname,""))}})}return n})(),PD=(()=>{class n{constructor(t,r){this.router=t,this.localStorageService=r,this.menu="dashboard"}onClickMenu(t){this.menu=t,this.router.navigate([t])}onClickSignOut(){this.localStorageService.clear(),this.router.navigate(["login"])}static#e=this.\u0275fac=function(r){return new(r||n)(o.Y36(br),o.Y36(rh))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-sidebar"]],decls:36,vars:4,consts:[["id","sidebar",1,"sidebar"],[1,"sidebar-inner","slimscroll"],["id","sidebar-menu",1,"sidebar-menu"],[1,"menu-title"],[1,"pointer",3,"ngClass"],[3,"click"],[1,"fa","fa-dashboard"],[1,"fa","fa-user-md"],[1,"fa","fa-users"],[1,"fa","fa-cog"],[1,"pointer",2,"background-color","yellow"],[1,"fa","fa-sign-out"],[1,"pointer","m-3"],["width","50","src","assets/images/akkodis.png","alt","akkodis",1,""],[2,"font-size","xx-small"],[1,"text-danger"]],template:function(r,i){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul"),o._UZ(4,"li",3),o.TgZ(5,"li",4)(6,"a",5),o.NdJ("click",function(){return i.onClickMenu("dashboard")}),o._UZ(7,"i",6),o.TgZ(8,"span"),o._uU(9,"Projects"),o.qZA()()(),o.TgZ(10,"li",4)(11,"a",5),o.NdJ("click",function(){return i.onClickMenu("clients")}),o._UZ(12,"i",7),o.TgZ(13,"span"),o._uU(14,"Clients"),o.qZA()()(),o.TgZ(15,"li",4)(16,"a",5),o.NdJ("click",function(){return i.onClickMenu("accounts")}),o._UZ(17,"i",8),o.TgZ(18,"span"),o._uU(19,"Accounts"),o.qZA()()(),o.TgZ(20,"li",4)(21,"a",5),o.NdJ("click",function(){return i.onClickMenu("settings")}),o._UZ(22,"i",9),o.TgZ(23,"span"),o._uU(24,"Settings"),o.qZA()()(),o.TgZ(25,"li",10)(26,"a",5),o.NdJ("click",function(){return i.onClickSignOut()}),o._UZ(27,"i",11),o.TgZ(28,"span"),o._uU(29,"Sign out"),o.qZA()()(),o.TgZ(30,"li",12),o._UZ(31,"img",13),o.TgZ(32,"span",14),o._uU(33,"Version : "),o.TgZ(34,"b",15),o._uU(35," 0.1.0"),o.qZA()()()()()()()),2&r&&(o.xp6(5),o.Q6J("ngClass","dashboard"==i.menu?"active":""),o.xp6(5),o.Q6J("ngClass","clients"==i.menu?"active":""),o.xp6(5),o.Q6J("ngClass","accounts"==i.menu?"active":""),o.xp6(5),o.Q6J("ngClass","settings"==i.menu?"active":""))},dependencies:[Bt]})}return n})(),FD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-auth"]],decls:6,vars:0,consts:[[1,"page-wrapper","sm-responsive"],[1,"content"]],template:function(r,i){1&r&&(o.TgZ(0,"div"),o._UZ(1,"app-header")(2,"app-sidebar"),o.TgZ(3,"div",0)(4,"div",1),o._UZ(5,"router-outlet"),o.qZA()()())},dependencies:[E_,MD,PD]})}return n})();const LD={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Yg;const mw=new Uint8Array(16);function F2(){if(!Yg&&(Yg=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Yg))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yg(mw)}const wi=[];for(let n=0;n<256;++n)wi.push((n+256).toString(16).slice(1));const Gy=function B2(n,e,t){if(LD.randomUUID&&!e&&!n)return LD.randomUUID();const r=(n=n||{}).random||(n.rng||F2)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=r[i];return e}return function $y(n,e=0){return wi[n[e+0]]+wi[n[e+1]]+wi[n[e+2]]+wi[n[e+3]]+"-"+wi[n[e+4]]+wi[n[e+5]]+"-"+wi[n[e+6]]+wi[n[e+7]]+"-"+wi[n[e+8]]+wi[n[e+9]]+"-"+wi[n[e+10]]+wi[n[e+11]]+wi[n[e+12]]+wi[n[e+13]]+wi[n[e+14]]+wi[n[e+15]]}(r)};let UD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class ih{constructor(e,t,r){this.success=e,this.message=t,this.data=r}}class Wf{toEntities(e){return e.map(t=>this.toEntity(t))}fromEntities(e){return e.map(t=>this.fromEntity(t))}toResponse(e){return e?new ih(!0,"",this.fromEntity(e)):new ih(!1,"Not found",{})}toFirstResponse(e){return e&&e.length>0?new ih(!0,"",this.fromEntity(e[0])):new ih(!1,"Not found",{})}toResponses(e){return e&&e.length>0?new ih(!0,"",this.fromEntities(e)):new ih(!1,"Not found",[])}toEmptyResponse(){return new ih(!0,"",{})}}class V2 extends Wf{toEntity(e){return{id:e.id,createdAt:e.createdAt,updatedAt:new Date,deleted:!1,title:e.title,duration:e.duration,description:e.description,margin:e.margin,client:e.client,riskProvision:e.riskProvision}}fromEntity(e){return{id:e.id,createdAt:e.createdAt,title:e.title,duration:e.duration,description:e.description,margin:e.margin,client:e.client,riskProvision:e.riskProvision}}fromRequest(e){return{updatedAt:new Date,deleted:!1,title:e.title,duration:e.duration,description:e.description,margin:e.margin,client:e.client,riskProvision:e.riskProvision}}}class Qg{}let BD=(()=>{class n extends Qg{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}();static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VD=(()=>{class n{constructor(t){this.repository=t}execute(t){return this.repository.create(t)}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(BD))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_w=(()=>{class n{constructor(t){this.repository=t}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(BD))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jD=(()=>{class n extends UD{constructor(t,r){super(),this.createProjectUseCase=t,this.fetchProjectsUseCase=r,this.mapper=new V2}create(t){let r=this.mapper.fromRequest(t);return r.id=Gy(),r.createdAt=new Date,this.createProjectUseCase.execute(r).pipe((0,S.U)(i=>this.mapper.toResponse(i)))}delete(t){return Re()}fetchAll(){return this.fetchProjectsUseCase.execute().pipe((0,S.U)(t=>this.mapper.toResponses(t)))}fetchOne(t){return Re()}update(t,r){return Re()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(VD),o.LFG(_w))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yw=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function j2(n,e){if(1&n&&(o.TgZ(0,"b"),o._uU(1),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Oqu(t.projects.length)}}function H2(n,e){1&n&&o._UZ(0,"option",46),2&n&&o.Q6J("value",e.$implicit.companyName)}function Zk(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"img",47),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.onSubmit())}),o.qZA()}}function $2(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"tr",48),o.NdJ("click",function(){const s=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.onClickAddResources(s))}),o.TgZ(1,"td",48),o.NdJ("click",function(){const s=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.onClickProject(s))}),o.TgZ(2,"h2"),o._uU(3),o.qZA()(),o.TgZ(4,"td",48),o.NdJ("click",function(){const s=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.onClickProject(s))}),o._uU(5),o.qZA(),o.TgZ(6,"td",48),o.NdJ("click",function(){const s=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.onClickProject(s))}),o._uU(7),o.qZA(),o.TgZ(8,"td",48),o.NdJ("click",function(){const s=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.onClickProject(s))}),o._uU(9),o.qZA(),o.TgZ(10,"td"),o._UZ(11,"img",49)(12,"img",50),o.qZA()()}if(2&n){const t=e.$implicit,r=o.oxw();let i;o.xp6(3),o.Oqu(t.title),o.xp6(2),o.Oqu(null==(i=r.getClient(t.client))?null:i.companyName),o.xp6(2),o.Oqu(t.duration),o.xp6(2),o.Oqu(t.description)}}function a(n,e){1&n&&(o.TgZ(0,"small",51),o._uU(1," Please enter the title of the project. "),o.qZA())}function l(n,e){if(1&n&&(o.TgZ(0,"option",52),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t.id),o.xp6(1),o.Oqu(t.companyName)}}let u=(()=>{class n{constructor(t,r,i,s,c){this.projectInteractor=t,this.clientInteractor=r,this.localStorageService=i,this.router=s,this.toastr=c,this.projects=[],this.clients=[],this.options=["aaa","bbb","eee"],this.projectForm=new Os({title:new lt("",[Zn.required]),client:new lt("",[Zn.required]),description:new lt(""),duration:new lt("")})}ngOnInit(){this.fetchClients(),this.fetchProjects()}fetchClients(){this.clientInteractor.fetchAll().subscribe({next:t=>{t&&t.success&&(this.clients=t.data)},error:t=>{},complete:()=>{}})}fetchProjects(){this.projectInteractor.fetchAll().subscribe({next:t=>{t&&t.success&&(this.projects=t.data)},error:t=>{},complete:()=>{}})}getClient(t){return this.clients.find(r=>r.id===t)}getClientByCompanyName(t){return this.clients.find(r=>r.companyName===t)}onSubmit(){if(this.projectForm.valid){let t={title:this.projectForm.value.title,duration:this.projectForm.value.duration,description:this.projectForm.value.description,client:this.projectForm.value.client,margin:18},r=this.getClientByCompanyName(t.client);r?(t.client=r.id,this.saveProject(t)):this.saveClient({companyName:t.client,email:"",address:"",phoneNumber:"",logo:""},t)}else this.toastr.error("Some inputs are incorrect","Error")}saveProject(t){this.projectInteractor.create(t).subscribe({next:r=>{this.toastr.success("project successfully saved","Success"),this.projectForm.reset(),this.fetchProjects()},error:r=>{this.toastr.error("Error occurred while saving the project","Error")},complete:()=>{}})}saveClient(t,r){this.clientInteractor.create(t).subscribe({next:i=>{r.client=i.data?.id,this.saveProject(r)},error:i=>{this.toastr.error("Error occurred while saving the client","Error")},complete:()=>{}})}onClickProject(t){this.projectForm.setValue({title:t.title,duration:t.duration,description:t.description,client:t.client})}onClickAddResources(t){this.localStorageService.add("project",t),this.router.navigate(["/resources"])}static#e=this.\u0275fac=function(r){return new(r||n)(o.Y36(jD),o.Y36(yw),o.Y36(rh),o.Y36(br),o.Y36(Au))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-dashboard"]],decls:90,vars:12,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],[4,"ngIf"],["href","","data-bs-toggle","modal","data-bs-target","#addProjectModal",1,"btn","btn-outline-primary","float-right"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],[1,"text-right"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["type","text","formControlName","title","placeholder","Title of the project","id","title"],["autocomplete","off","autofocus","","formControlName","client","placeholder","Select client","list","options"],["id","options"],[3,"value",4,"ngFor","ngForOf"],["type","number","formControlName","duration","placeholder","Duration","id","duration"],["type","text","formControlName","description","placeholder","Description","id","description"],["class","aspect-square","src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["id","addProjectModal","tabindex","-1","aria-labelledby","addProjectModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","addProjectModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","row"],[1,"col-12"],[1,"form-group"],["for","projectTitle"],["type","text","formControlName","title","placeholder","Title","id","projectTitle",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],[1,"col-9"],["for","projectClient"],["formControlName","client","id","projectClient",1,"form-control"],["value","","disabled",""],["style","color: black;",3,"ngValue",4,"ngFor","ngForOf"],[1,"col-3"],["for","projectDuration"],["type","number","formControlName","duration","placeholder","Duration","id","projectDuration",1,"form-control"],["for","projectDescription"],["id","projectDescription","name","w3review","formControlName","description","rows","4","placeholder","description of the project",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],[3,"value"],["src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],[3,"click"],["src","assets/images/duplicate.png","alt","duplicate","data-bs-toggle","tooltip","data-bs-placement","top","title","duplicate",1,"aspect-square","action"],["src","assets/images/delete.png","alt","delete","data-bs-toggle","tooltip","data-bs-placement","top","title","delete",1,"aspect-square","action"],[1,"form-text","text-muted","text-danger"],[2,"color","black",3,"ngValue"]],template:function(r,i){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),o.YNc(5,j2,2,1,"b",5),o._uU(6," Projects"),o.qZA(),o.TgZ(7,"a",6),o._uU(8,"Add"),o.qZA()(),o.TgZ(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead")(13,"tr")(14,"th"),o._uU(15,"Title"),o.TgZ(16,"span",10),o._uU(17,"*"),o.qZA()(),o.TgZ(18,"th"),o._uU(19,"Client"),o.TgZ(20,"span",10),o._uU(21,"*"),o.qZA()(),o.TgZ(22,"th"),o._uU(23,"Duration (months)"),o.qZA(),o.TgZ(24,"th"),o._uU(25,"Description"),o.qZA(),o.TgZ(26,"th",11),o._uU(27,"Actions"),o.qZA()()(),o.TgZ(28,"tbody")(29,"tr")(30,"td")(31,"form",12),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(32,"input",13),o.qZA()(),o.TgZ(33,"td")(34,"form",12),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(35,"input",14),o.TgZ(36,"datalist",15),o.YNc(37,H2,1,1,"option",16),o.qZA()()(),o.TgZ(38,"td")(39,"form",12),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(40,"input",17),o.qZA()(),o.TgZ(41,"td")(42,"form",12),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(43,"input",18),o.qZA()(),o.TgZ(44,"td"),o.YNc(45,Zk,1,0,"img",19),o.qZA()(),o.YNc(46,$2,13,4,"tr",20),o.qZA()()()()()()(),o.TgZ(47,"div",21)(48,"div",22)(49,"div",23)(50,"div",24)(51,"h1",25),o._uU(52,"Add new project"),o.qZA(),o._UZ(53,"button",26),o.qZA(),o.TgZ(54,"form",12),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(55,"div",27)(56,"div",28)(57,"div",29)(58,"label",30),o._uU(59,"Title"),o.TgZ(60,"span",10),o._uU(61,"*"),o.qZA()(),o._UZ(62,"input",31),o.YNc(63,a,2,0,"small",32),o.qZA()(),o.TgZ(64,"div",33)(65,"div",29)(66,"label",34),o._uU(67,"Client"),o.TgZ(68,"span",10),o._uU(69,"*"),o.qZA()(),o._UZ(70,"br"),o.TgZ(71,"select",35)(72,"option",36),o._uU(73,"Select client"),o.qZA(),o.YNc(74,l,2,2,"option",37),o.qZA()()(),o.TgZ(75,"div",38)(76,"div",29)(77,"label",39),o._uU(78,"Duration (months)"),o.qZA(),o._UZ(79,"input",40),o.qZA()(),o.TgZ(80,"div",28)(81,"label",41),o._uU(82,"Description"),o.qZA(),o.TgZ(83,"textarea",42),o._uU(84,"                        "),o.qZA()()()(),o.TgZ(85,"div",43)(86,"button",44),o._uU(87,"Close"),o.qZA(),o.TgZ(88,"button",45),o.NdJ("click",function(){return i.onSubmit()}),o._uU(89,"Save "),o.qZA()()()()()),2&r&&(o.xp6(5),o.Q6J("ngIf",i.projects),o.xp6(26),o.Q6J("formGroup",i.projectForm),o.xp6(3),o.Q6J("formGroup",i.projectForm),o.xp6(3),o.Q6J("ngForOf",i.clients),o.xp6(2),o.Q6J("formGroup",i.projectForm),o.xp6(3),o.Q6J("formGroup",i.projectForm),o.xp6(3),o.Q6J("ngIf",i.projectForm.valid),o.xp6(1),o.Q6J("ngForOf",i.projects),o.xp6(8),o.Q6J("formGroup",i.projectForm),o.xp6(9),o.Q6J("ngIf",i.projectForm.controls.title.touched&&(null==i.projectForm.controls.title.errors?null:i.projectForm.controls.title.errors.required)),o.xp6(11),o.Q6J("ngForOf",i.clients),o.xp6(14),o.Q6J("disabled",!i.projectForm.valid))},dependencies:[sr,fr,uc,Dy,$g,lc,jg,Du,Tu,Kd,dc,Eu],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})(),h=(()=>{class n{constructor(t){this.router=t}canActivate(t){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(br))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var p=U(1144);const m=["addListener","removeListener"],b=["addEventListener","removeEventListener"],T=["on","off"];function D(n,e,t,r){if((0,As.m)(t)&&(r=t,t=void 0),r)return D(n,e,t).pipe(X(r));const[i,s]=function Q(n){return(0,As.m)(n.addEventListener)&&(0,As.m)(n.removeEventListener)}(n)?b.map(c=>d=>n[c](e,d,t)):function R(n){return(0,As.m)(n.addListener)&&(0,As.m)(n.removeListener)}(n)?m.map(N(n,e)):function B(n){return(0,As.m)(n.on)&&(0,As.m)(n.off)}(n)?T.map(N(n,e)):[];if(!i&&(0,p.z)(n))return(0,Jn.z)(c=>D(c,e,t))((0,ii.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new vn.y(c=>{const d=(...f)=>c.next(1<f.length?f:f[0]);return i(d),()=>s(d)})}function N(n,e){return t=>r=>n[t](e,r)}const{isArray:re}=Array;function Ee(n){return 1===n.length&&re(n[0])?n[0]:n}function Fe(...n){const e=(0,mr.jO)(n),t=Ee(n);return t.length?new vn.y(r=>{let i=t.map(()=>[]),s=t.map(()=>!1);r.add(()=>{i=s=null});for(let c=0;!r.closed&&c<t.length;c++)(0,ii.Xf)(t[c]).subscribe((0,ve.x)(r,d=>{if(i[c].push(d),i.every(f=>f.length)){const f=i.map(y=>y.shift());r.next(e?e(...f):f),i.some((y,w)=>!y.length&&s[w])&&r.complete()}},()=>{s[c]=!0,!i[c].length&&r.complete()}));return()=>{i=s=null}}):ar.E}function Fn(...n){const e=(0,mr.jO)(n);return(0,Sn.e)((t,r)=>{const i=n.length,s=new Array(i);let c=n.map(()=>!1),d=!1;for(let f=0;f<i;f++)(0,ii.Xf)(n[f]).subscribe((0,ve.x)(r,y=>{s[f]=y,!d&&!c[f]&&(c[f]=!0,(d=c.every(I.y))&&(c=null))},Kg.Z));t.subscribe((0,ve.x)(r,f=>{if(d){const y=[f,...s];r.next(e?e(...y):y)}}))})}new vn.y(Kg.Z),Math,Math,Math;const tZ=["*"],vZ=["dialog"];function oO(n){return"string"==typeof n}function em(n){return null!=n}function Ky(n){return(n||document.body).getBoundingClientRect()}const aU={animation:!0,transitionTimerDelayMs:5},f4=()=>{},{transitionTimerDelayMs:p4}=aU,Dw=new Map,io=(n,e,t,r)=>{let i=r.context||{};const s=Dw.get(e);if(s)switch(r.runningTransition){case"continue":return ar.E;case"stop":n.run(()=>s.transition$.complete()),i=Object.assign(s.context,i),Dw.delete(e)}const c=t(e,r.animation,i)||f4;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>c()),Re(void 0).pipe(function d4(n){return e=>new vn.y(t=>e.subscribe({next:c=>n.run(()=>t.next(c)),error:c=>n.run(()=>t.error(c)),complete:()=>n.run(()=>t.complete())}))}(n));const d=new cn.x,f=new cn.x,y=d.pipe(function qt(...n){return e=>yr(e,Re(...n))}(!0));Dw.set(e,{transition$:d,complete:()=>{f.next(),f.complete()},context:i});const w=function h4(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const E=D(e,"transitionend").pipe(ui(y),Rr(({target:k})=>k===e));(function ze(...n){return 1===(n=Ee(n)).length?(0,ii.Xf)(n[0]):new vn.y(function nt(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,ii.Xf)(n[r]).subscribe((0,ve.x)(e,i=>{if(t){for(let s=0;s<t.length;s++)s!==r&&t[s].unsubscribe();t=null}e.next(i)})))}}(n))})(Wg(w+p4).pipe(ui(y)),E,f).pipe(ui(y)).subscribe(()=>{Dw.delete(e),n.run(()=>{c(),d.next(),d.complete()})})}),d.asObservable()};let ZD=(()=>{class n{constructor(){this.animation=aU.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Gr]}),n})(),pU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Gr]}),n})(),_U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Gr]}),n})(),yU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();var Li=(()=>{return(n=Li||(Li={}))[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",Li;var n})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const bU=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function wU(n){const e=Array.from(n.querySelectorAll(bU)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let NU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Gr,W1]}),n})(),RU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();class im{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}let r8=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(si(1)).subscribe(()=>{io(this._zone,this._el.nativeElement,(t,r)=>{r&&Ky(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return io(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,r){2&t&&(o.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),o.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class MU{close(e){}dismiss(e){}}class i8{constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new cn.x,this._dismissed=new cn.x,this._hidden=new cn.x,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,c)=>{this._resolve=s,this._reject=c}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ui(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ui(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function oU(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Re(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Fe(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var sm=(()=>{return(n=sm||(sm={}))[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",sm;var n})();let s8=(()=>{class n{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new cn.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new o.vpe,this.shown=new cn.x,this.hidden=new cn.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":oO(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(si(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},c=Fe(io(this._zone,t,()=>t.classList.remove("show"),r),io(this._zone,this._dialogEl.nativeElement,()=>{},r));return c.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),c}_show(){const t={animation:this.animation,runningTransition:"continue"};Fe(io(this._zone,this._elRef.nativeElement,(s,c)=>{c&&Ky(s),s.classList.add("show")},t),io(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{D(t,"keydown").pipe(ui(this._closed$),Rr(i=>i.which===Li.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(sm.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;D(this._dialogEl.nativeElement,"mousedown").pipe(ui(this._closed$),(0,oi.b)(()=>r=!1),Pn(()=>D(t,"mouseup").pipe(ui(this._closed$),si(1))),Rr(({target:i})=>t===i)).subscribe(()=>{r=!0}),D(t,"click").pipe(ui(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(sm.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=wU(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&io(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(ie),o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&o.Gf(vZ,7),2&t){let i;o.iGM(i=o.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(o.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),o.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),o.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:tZ,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(o.F$t(),o.TgZ(0,"div",0,1)(2,"div",2),o.Hsn(3),o.qZA()()),2&t&&o.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),o8=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:s,paddingRight:c}=i;if(t>0){const d=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${d+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=c),i.overflow=s}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ie))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),a8=(()=>{class n{constructor(t,r,i,s,c,d){this._applicationRef=t,this._injector=r,this._document=i,this._scrollBar=s,this._rendererFactory=c,this._ngZone=d,this._activeWindowCmptHasChanged=new cn.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new o.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const f=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const i=D(e,"focusin").pipe(ui(t),(0,S.U)(s=>s.target));D(e,"keydown").pipe(ui(t),Rr(s=>s.which===Li.Tab),Fn(i)).subscribe(([s,c])=>{const[d,f]=wU(e);(c===d||c===e)&&s.shiftKey&&(f.focus(),s.preventDefault()),c===f&&!s.shiftKey&&(d.focus(),s.preventDefault())}),r&&D(e,"click").pipe(ui(t),Fn(i),(0,S.U)(s=>s[1])).subscribe(s=>s.focus())})})(0,f.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(f.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i){const s=i.container instanceof HTMLElement?i.container:em(i.container)?this._document.querySelector(i.container):this._document.body,c=this._rendererFactory.createRenderer(null,null);if(!s)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const d=new MU,f=this._getContentRef(i.injector||t,r,d,i);let y=!1!==i.backdrop?this._attachBackdrop(s):void 0,w=this._attachWindowComponent(s,f.nodes),E=new i8(w,f,y,i.beforeDismiss);return this._registerModalRef(E),this._registerWindowCmpt(w),E.hidden.pipe(si(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(c.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),d.close=A=>{E.close(A)},d.dismiss=A=>{E.dismiss(A)},this._applyWindowOptions(w.instance,i),1===this._modalRefs.length&&c.addClass(this._document.body,"modal-open"),y&&y.instance&&(this._applyBackdropOptions(y.instance,i),y.changeDetectorRef.detectChanges()),w.changeDetectorRef.detectChanges(),E}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let r=(0,o.LMc)(r8,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_attachWindowComponent(t,r){let i=(0,o.LMc)(s8,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_applyWindowOptions(t,r){this._windowAttributes.forEach(i=>{em(r[i])&&(t[i]=r[i])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(i=>{em(r[i])&&(t[i]=r[i])})}_getContentRef(t,r,i,s){return r?r instanceof o.Rgc?this._createFromTemplateRef(r,i):oO(r)?this._createFromString(r):this._createFromComponent(t,r,i,s):new im([])}_createFromTemplateRef(t,r){const s=t.createEmbeddedView({$implicit:r,close(c){r.close(c)},dismiss(c){r.dismiss(c)}});return this._applicationRef.attachView(s),new im([s.rootNodes],s)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new im([[r]])}_createFromComponent(t,r,i,s){const c=o.zs3.create({providers:[{provide:MU,useValue:i}],parent:t}),d=(0,o.LMc)(r,{environmentInjector:this._applicationRef.injector,elementInjector:c}),f=d.location.nativeElement;return s.scrollable&&f.classList.add("component-host-scrollable"),this._applicationRef.attachView(d.hostView),new im([[f]],d.hostView,d)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.z2F),o.LFG(o.zs3),o.LFG(ie),o.LFG(o8),o.LFG(o.FYo),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),l8=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ZD))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PU=(()=>{class n{constructor(t,r,i){this._injector=t,this._modalStack=r,this._config=i}open(t,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.zs3),o.LFG(a8),o.LFG(l8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[PU]}),n})(),VU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Gr]}),n})(),WU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Gr]}),n})(),YU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Gr]}),n})(),QU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Gr]}),n})(),JU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Gr]}),n})(),XU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Gr]}),n})(),eB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Gr]}),n})(),tB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();new o.OlP("live announcer delay",{providedIn:"root",factory:function w8(){return 100}});let nB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Gr]}),n})(),rB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const C8=[fU,pU,_U,yU,NU,RU,FU,VU,rB,WU,YU,QU,JU,XU,eB,tB,nB];let T8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[C8,fU,pU,_U,yU,NU,RU,FU,VU,rB,WU,YU,QU,JU,XU,eB,tB,nB]}),n})();function E8(n,e){if(1&n&&(o.TgZ(0,"b"),o._uU(1),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Oqu(t.clients.length)}}function D8(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"img",29),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.onSubmit())}),o.qZA()}}function S8(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"tr")(1,"td",30),o.NdJ("click",function(){const s=o.CHM(t).$implicit,c=o.oxw(),d=o.MAs(58);return o.KtG(c.openEditClientModal(s,d))}),o.TgZ(2,"div",0)(3,"div",31),o._UZ(4,"img",32),o.qZA(),o.TgZ(5,"div",33)(6,"h2"),o._uU(7),o.qZA()()()(),o.TgZ(8,"td",30),o.NdJ("click",function(){const s=o.CHM(t).$implicit,c=o.oxw(),d=o.MAs(58);return o.KtG(c.openEditClientModal(s,d))}),o._uU(9),o.qZA(),o.TgZ(10,"td",30),o.NdJ("click",function(){const s=o.CHM(t).$implicit,c=o.oxw(),d=o.MAs(58);return o.KtG(c.openEditClientModal(s,d))}),o._uU(11),o.qZA(),o.TgZ(12,"td",30),o.NdJ("click",function(){const s=o.CHM(t).$implicit,c=o.oxw(),d=o.MAs(58);return o.KtG(c.openEditClientModal(s,d))}),o._uU(13),o.qZA(),o.TgZ(14,"td")(15,"img",34),o.NdJ("click",function(){const s=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.onClickClientToBeDeleted(s))}),o.qZA()()()}if(2&n){const t=e.$implicit;o.xp6(7),o.Oqu(t.companyName),o.xp6(2),o.Oqu(t.email),o.xp6(2),o.Oqu(t.phoneNumber),o.xp6(2),o.Oqu(t.address)}}function I8(n,e){1&n&&(o.TgZ(0,"small",50),o._uU(1," Please enter company name.! "),o.qZA())}function A8(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",21)(1,"h4",35),o._uU(2,"Edit client"),o.qZA(),o.TgZ(3,"button",36),o.NdJ("click",function(){const s=o.CHM(t).$implicit;return o.KtG(s.dismiss("Cross click"))}),o.qZA()(),o.TgZ(4,"div",24)(5,"form",11),o.NdJ("ngSubmit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.onSubmit())}),o.TgZ(6,"div",0)(7,"div",33)(8,"div",37)(9,"label",38),o._uU(10,"Company name"),o.TgZ(11,"span",10),o._uU(12,"*"),o.qZA()(),o._UZ(13,"input",39),o.YNc(14,I8,2,0,"small",40),o.qZA(),o.TgZ(15,"div"),o._UZ(16,"img",41),o.qZA()(),o.TgZ(17,"div",33)(18,"div",37)(19,"label",42),o._uU(20,"Email"),o.qZA(),o._UZ(21,"input",43),o.qZA(),o.TgZ(22,"div",37)(23,"label",44),o._uU(24,"Phone number"),o.qZA(),o._UZ(25,"input",45),o.qZA(),o.TgZ(26,"div",37)(27,"label",46),o._uU(28,"Address"),o.qZA(),o._UZ(29,"input",47),o.qZA()()()()(),o.TgZ(30,"div",25)(31,"button",48),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.onClickEditClientModalClose())}),o._uU(32,"Close"),o.qZA(),o.TgZ(33,"button",49),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.onSubmit())}),o._uU(34,"Save "),o.qZA()()}if(2&n){const t=o.oxw();o.xp6(5),o.Q6J("formGroup",t.clientForm),o.xp6(9),o.Q6J("ngIf",t.clientForm.controls.companyName.touched&&(null==t.clientForm.controls.companyName.errors?null:t.clientForm.controls.companyName.errors.required)),o.xp6(19),o.Q6J("disabled",!t.clientForm.valid)}}let N8=(()=>{class n{constructor(t,r,i,s,c){this.clientInteractor=t,this.router=r,this.toastr=i,this.modalService=s,this.localStorageService=c,this.clients=[],this.closeResult="",this.clientForm=new Os({companyName:new lt("",[Zn.required]),email:new lt(""),address:new lt(""),phoneNumber:new lt("")})}ngOnInit(){this.fetchClients()}fetchClients(){this.clientInteractor.fetchAll().subscribe({next:t=>{t&&t.success&&(this.clients=t.data)},error:t=>{},complete:()=>{}})}onSubmit(){if(this.clientForm.valid){let t={companyName:this.clientForm.value.companyName,email:this.clientForm.value.email,address:this.clientForm.value.address,phoneNumber:this.clientForm.value.phoneNumber,logo:""};this.selectedClient&&this.selectedClient.id?this.clientInteractor.update(this.selectedClient.id,t).subscribe({next:r=>{this.selectedClient=void 0,this.clientForm.reset(),this.editClientModalReference.dismiss(),this.toastr.success("client successfully updated","Update client"),this.fetchClients()},error:r=>{this.toastr.error("Error occurred while updating the client","Update client")},complete:()=>{}}):this.clientInteractor.create(t).subscribe({next:r=>{this.clientForm.reset(),this.editClientModalReference.dismiss(),this.toastr.success("client successfully saved","Add client"),this.fetchClients()},error:r=>{this.toastr.error("Error occurred while saving the client","Add client")},complete:()=>{}})}else this.toastr.error("Some inputs are incorrect","Edit client")}onClickDeleteClient(){let t=this.localStorageService.get("client");t&&t.id?this.clientInteractor.delete(t.id).subscribe({next:r=>{this.localStorageService.delete("client"),this.toastr.success("Client deleted successfully","Delete client")},error:r=>{this.localStorageService.delete("client"),this.toastr.error("Error occurred while deleting the client","Delete client")},complete:()=>{}}):(this.localStorageService.delete("client"),this.toastr.error("Client not found","Delete client"))}onClickClientToBeDeleted(t){this.localStorageService.add("client",t)}onClickDismiss(){this.localStorageService.delete("client")}openEditClientModal(t,r){this.selectedClient=t,this.clientForm=new Os({companyName:new lt(t.companyName,[Zn.required]),email:new lt(t.email),phoneNumber:new lt(t.phoneNumber),address:new lt(t.address),logo:new lt(t.logo)}),this.open(r)}open(t){this.editClientModalReference=this.modalService.open(t,{ariaLabelledBy:"modal-basic-title",size:"lg"}),this.editClientModalReference.result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(t){switch(t){case sm.ESC:return"by pressing ESC";case sm.BACKDROP_CLICK:return"by clicking on a backdrop";default:return`with: ${t}`}}onClickEditClientModalClose(){this.clientForm.reset(),this.editClientModalReference.dismiss()}static#e=this.\u0275fac=function(r){return new(r||n)(o.Y36(yw),o.Y36(br),o.Y36(Au),o.Y36(PU),o.Y36(rh))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-clients"]],decls:59,vars:7,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],[4,"ngIf"],[1,"btn","btn-outline-primary","float-right",3,"click"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["type","text","formControlName","companyName","placeholder","Company name","id","companyName"],["type","text","formControlName","email","placeholder","Email","id","email"],["type","tel","formControlName","phoneNumber","placeholder","Phone number","id","phoneNumber"],["type","text","formControlName","address","placeholder","Address","id","address"],["class","aspect-square","src","assets/images/save.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["id","clientDeleteModal","tabindex","-1","aria-labelledby","clientDeleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","clientDeleteModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],["editClientModal",""],["src","assets/images/save.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],[3,"click"],[1,"col-5","col-sm-5","col-md-4","col-lg-3","col-xl-3"],["width","28","height","28","src","assets/images/user.jpg","alt","",1,"aspect-square"],[1,"col"],["src","assets/images/delete.png","data-bs-target","#clientDeleteModal","alt","delete","data-bs-toggle","modal","data-bs-placement","top","title","delete",1,"aspect-square","action",3,"click"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"form-group"],["for","clientCompanyName"],["type","companyName","formControlName","companyName","placeholder","Company name","id","clientCompanyName",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],["src","assets/images/user.jpg"],["for","clientEmail"],["type","email","formControlName","email","placeholder","Email","id","clientEmail",1,"form-control"],["for","clientPhoneNumber"],["type","tel","formControlName","phoneNumber","placeholder","Phone number","id","clientPhoneNumber",1,"form-control"],["for","clientAddress"],["type","tel","formControlName","address","placeholder","Address","id","clientAddress",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"form-text","text-muted","text-danger"]],template:function(r,i){if(1&r){const s=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),o.YNc(5,E8,2,1,"b",5),o._uU(6," Clients "),o.qZA(),o.TgZ(7,"button",6),o.NdJ("click",function(){o.CHM(s);const d=o.MAs(58);return o.KtG(i.open(d))}),o._uU(8,"Add "),o.qZA()(),o.TgZ(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead")(13,"tr")(14,"th"),o._uU(15,"Company name"),o.TgZ(16,"span",10),o._uU(17,"*"),o.qZA()(),o.TgZ(18,"th"),o._uU(19,"Email"),o.qZA(),o.TgZ(20,"th"),o._uU(21,"Phone number"),o.qZA(),o.TgZ(22,"th"),o._uU(23,"Address"),o.qZA(),o._UZ(24,"th"),o.qZA()(),o.TgZ(25,"tbody")(26,"tr")(27,"td")(28,"form",11),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(29,"input",12),o.qZA()(),o.TgZ(30,"td")(31,"form",11),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(32,"input",13),o.qZA()(),o.TgZ(33,"td")(34,"form",11),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(35,"input",14),o.qZA()(),o.TgZ(36,"td")(37,"form",11),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(38,"input",15),o.qZA()(),o.TgZ(39,"td"),o.YNc(40,D8,1,0,"img",16),o.qZA()(),o.YNc(41,S8,16,4,"tr",17),o.qZA()()()()()()(),o.TgZ(42,"div",18)(43,"div",19)(44,"div",20)(45,"div",21)(46,"h5",22),o._uU(47,"Delete client"),o.qZA(),o._UZ(48,"button",23),o.qZA(),o.TgZ(49,"div",24)(50,"b"),o._uU(51,"Do you really want to delete this client?"),o.qZA()(),o.TgZ(52,"div",25)(53,"button",26),o.NdJ("click",function(){return i.onClickDismiss()}),o._uU(54,"Close "),o.qZA(),o.TgZ(55,"button",27),o.NdJ("click",function(){return i.onClickDeleteClient()}),o._uU(56," Confirm "),o.qZA()()()()(),o.YNc(57,A8,35,3,"ng-template",null,28,o.W1O)}2&r&&(o.xp6(5),o.Q6J("ngIf",i.clients),o.xp6(23),o.Q6J("formGroup",i.clientForm),o.xp6(3),o.Q6J("formGroup",i.clientForm),o.xp6(3),o.Q6J("formGroup",i.clientForm),o.xp6(3),o.Q6J("formGroup",i.clientForm),o.xp6(3),o.Q6J("ngIf",i.clientForm.valid),o.xp6(1),o.Q6J("ngForOf",i.clients))},dependencies:[sr,fr,uc,lc,Tu,Kd,dc,Eu],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})();var om=(()=>{return(n=om||(om={})).AED="AED",n.USD="USD",n.EUR="EUR",om;var n})();let iB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class x8 extends Wf{toEntity(e){return{id:e.id,createdAt:e.createdAt,updatedAt:new Date,deleted:!1,currency1:e.currency1,currency2:e.currency2,rate:e.rate,code:e.currency1+e.currency2}}fromEntity(e){return{id:e.id,createdAt:e.createdAt,currency1:e.currency1,currency2:e.currency2,rate:e.rate}}fromRequest(e){return{updatedAt:new Date,deleted:!1,currency1:e.currency1,currency2:e.currency2,rate:e.rate,code:e.currency1+e.currency2}}}let mO=(()=>{class n extends Qg{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}();static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_O=(()=>{class n{constructor(t){this.repository=t}execute(t){return this.repository.create(t)}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(mO))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yO=(()=>{class n{constructor(t){this.repository=t}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(mO))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sB=(()=>{class n extends iB{constructor(t,r){super(),this.createCurrencyExchangeUseCase=t,this.fetchCurrencyExchangesUseCase=r,this.mapper=new x8}create(t){let r=this.mapper.fromRequest(t);return r.id=Gy(),r.createdAt=new Date,this.createCurrencyExchangeUseCase.execute(r).pipe((0,S.U)(i=>this.mapper.toResponse(i)))}delete(t){return Re()}fetchAll(){return this.fetchCurrencyExchangesUseCase.execute().pipe((0,S.U)(t=>this.mapper.toResponses(t)))}fetchOne(t){return Re()}update(t,r){return Re()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(_O),o.LFG(yO))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class k8 extends Wf{toEntity(e){return{id:e.id,createdAt:e.createdAt,updatedAt:new Date,deleted:!1,totalCalendarDays:e.totalCalendarDays,weekends:e.weekends,paidLeave:e.paidLeave,publicHolidays:e.publicHolidays}}fromEntity(e){return{id:e.id,createdAt:e.createdAt,totalCalendarDays:e.totalCalendarDays,weekends:e.weekends,paidLeave:e.paidLeave,publicHolidays:e.publicHolidays,billableWorkingDays:e.totalCalendarDays??365-e.weekends??104-e.paidLeave??0-e.publicHolidays??0}}fromRequest(e){return{updatedAt:new Date,deleted:!1,totalCalendarDays:e.totalCalendarDays,weekends:e.weekends,paidLeave:e.paidLeave,publicHolidays:e.publicHolidays}}}let aB=(()=>{class n extends Qg{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}();static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vO=(()=>{class n{constructor(t){this.repository=t}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(aB))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lB=(()=>{class n extends oB{constructor(t){super(),this.fetchWorkingDaysUseCase=t,this.mapper=new k8}fetch(){return this.fetchWorkingDaysUseCase.execute().pipe((0,S.U)(t=>this.mapper.toFirstResponse(t)))}update(t,r){return Re()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(vO))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function O8(n,e){if(1&n&&(o.TgZ(0,"option",30),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function R8(n,e){if(1&n&&(o.TgZ(0,"option",30),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function M8(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"img",31),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.onSubmitCurrency())}),o.qZA()}}function P8(n,e){if(1&n&&(o.TgZ(0,"tr")(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._UZ(8,"img",32),o.qZA()()),2&n){const t=e.$implicit;o.xp6(2),o.Oqu(t.currency1),o.xp6(2),o.Oqu(t.currency2),o.xp6(2),o.Oqu(t.rate)}}function F8(n,e){if(1&n&&(o.TgZ(0,"b"),o._uU(1),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Oqu(t.calculateBillableWorkingDays())}}function L8(n,e){if(1&n&&(o.TgZ(0,"option",33),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}let U8=(()=>{class n{constructor(t,r,i){this.currencyExchangeInteractor=t,this.workingDaysInteractor=r,this.toastr=i,this.languages=["English"],this.currencies=[],this.currencyExchanges=[],this.currencies=Object.values(om),this.currencyForm=new Os({currency1:new lt("",[Zn.required]),currency2:new lt("",[Zn.required]),rate:new lt("",[Zn.required])}),this.workingDaysForm=new Os({totalCalendarDays:new lt("",[Zn.required]),weekends:new lt("",[Zn.required]),paidLeave:new lt("",[Zn.required]),publicHolidays:new lt("",[Zn.required])}),this.languageForm=new Os({language:new lt(this.languages[0],[Zn.required])})}ngOnInit(){this.fetchCurrencyExchanges(),this.fetchWorkingDays()}fetchWorkingDays(){this.workingDaysInteractor.fetch().subscribe({next:t=>{t&&t.success&&(this.workingDaysResponse=t.data,this.workingDaysForm.setValue({totalCalendarDays:this.workingDaysResponse.totalCalendarDays,weekends:this.workingDaysResponse.weekends,paidLeave:this.workingDaysResponse.paidLeave,publicHolidays:this.workingDaysResponse.publicHolidays}))},error:t=>{},complete:()=>{}})}calculateBillableWorkingDays(){return this.workingDaysResponse.totalCalendarDays-this.workingDaysResponse.weekends-this.workingDaysResponse.paidLeave-this.workingDaysResponse.publicHolidays}fetchCurrencyExchanges(){this.currencyExchangeInteractor.fetchAll().subscribe({next:t=>{t&&t.success&&(this.currencyExchanges=t.data)},error:t=>{},complete:()=>{}})}onSubmitCurrency(){this.currencyForm.valid?this.currencyExchangeInteractor.create({currency1:this.currencyForm.value.currency1,currency2:this.currencyForm.value.currency2,rate:this.currencyForm.value.rate}).subscribe({next:r=>{this.toastr.success("currency exchange successfully saved","Success"),this.fetchCurrencyExchanges(),this.currencyForm.reset()},error:r=>{this.toastr.error("Error occurred while saving the currency exchange","Error")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Error")}onSubmitWorkingDays(){this.workingDaysForm.valid?this.workingDaysInteractor.update(this.workingDaysResponse.id,{totalCalendarDays:this.workingDaysForm.value.totalCalendarDays,weekends:this.workingDaysForm.value.weekends,paidLeave:this.workingDaysForm.value.paidLeave,publicHolidays:this.workingDaysForm.value.publicHolidays}).subscribe({next:r=>{this.toastr.success("working days successfully saved","Success"),this.fetchCurrencyExchanges(),this.currencyForm.reset()},error:r=>{this.toastr.error("Error occurred while saving working days","Error")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Error")}onSubmitLanguage(){}static#e=this.\u0275fac=function(r){return new(r||n)(o.Y36(sB),o.Y36(lB),o.Y36(Au))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-settings"]],decls:109,vars:14,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],["href","","data-bs-toggle","modal","data-bs-target","#addClientModal",1,"btn","btn-outline-primary","float-right"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["formControlName","currency1",2,"color","black"],["value","","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","currency2",2,"color","black"],["type","number","formControlName","rate","placeholder","Rate","id","rate"],["class","aspect-square","src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["href","",1,"btn","btn-outline-success","float-right",3,"click"],["type","number","formControlName","totalCalendarDays","placeholder","Total calendar days","id","totalCalendarDays"],["type","number","formControlName","weekends","placeholder","Weekends","id","weekends"],["type","number","formControlName","paidLeave","placeholder","Paid leave","id","paidLeave"],["type","number","formControlName","publicHolidays","placeholder","Public holidays","id","publicHolidays"],["href","",1,"btn","btn-outline-success","float-right"],[1,"card-block","m-3"],[1,"form-group"],["for","language"],["formControlName","language","id","language",1,"form-control"],["style","color: black;",3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],["src","assets/images/delete.png","alt","delete","data-bs-toggle","tooltip","data-bs-placement","top","title","delete",1,"aspect-square","action"],[2,"color","black",3,"ngValue"]],template:function(r,i){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),o._UZ(5,"b"),o._uU(6," Currencies "),o.qZA(),o.TgZ(7,"a",5),o._uU(8,"Add"),o.qZA()(),o.TgZ(9,"div",6)(10,"div",7)(11,"table",8)(12,"thead")(13,"tr")(14,"th"),o._uU(15,"Currency 1"),o.TgZ(16,"span",9),o._uU(17,"*"),o.qZA()(),o.TgZ(18,"th"),o._uU(19,"Currency 2"),o.TgZ(20,"span",9),o._uU(21,"*"),o.qZA()(),o.TgZ(22,"th"),o._uU(23,"Rate"),o.TgZ(24,"span",9),o._uU(25,"*"),o.qZA()(),o._UZ(26,"th"),o.qZA()(),o.TgZ(27,"tbody")(28,"tr")(29,"td")(30,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmitCurrency()}),o.TgZ(31,"select",11)(32,"option",12),o._uU(33,"Select currency"),o.qZA(),o.YNc(34,O8,2,2,"option",13),o.qZA()()(),o.TgZ(35,"td")(36,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmitCurrency()}),o.TgZ(37,"select",14)(38,"option",12),o._uU(39,"Select currency"),o.qZA(),o.YNc(40,R8,2,2,"option",13),o.qZA()()(),o.TgZ(41,"td")(42,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmitCurrency()}),o._UZ(43,"input",15),o.qZA()(),o.TgZ(44,"td"),o.YNc(45,M8,1,0,"img",16),o.qZA()(),o.YNc(46,P8,9,3,"tr",17),o.qZA()()()()()()(),o.TgZ(47,"div",0)(48,"div",1)(49,"div",2)(50,"div",3)(51,"h4",4),o._UZ(52,"b"),o._uU(53," Billable working days : "),o.YNc(54,F8,2,1,"b",18),o.qZA(),o.TgZ(55,"a",19),o.NdJ("click",function(){return i.onSubmitWorkingDays()}),o._uU(56,"Save"),o.qZA()(),o.TgZ(57,"div",6)(58,"div",7)(59,"table",8)(60,"thead")(61,"tr")(62,"th"),o._uU(63,"Type of days"),o.qZA(),o.TgZ(64,"th"),o._uU(65,"Value"),o.qZA()()(),o.TgZ(66,"tbody")(67,"tr")(68,"td"),o._uU(69," Total calendar days "),o.qZA(),o.TgZ(70,"td")(71,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),o._UZ(72,"input",20),o.qZA()()(),o.TgZ(73,"tr")(74,"td"),o._uU(75," Weekends "),o.qZA(),o.TgZ(76,"td")(77,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),o._UZ(78,"input",21),o.qZA()()(),o.TgZ(79,"tr")(80,"td"),o._uU(81," Paid leave "),o.qZA(),o.TgZ(82,"td")(83,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),o._UZ(84,"input",22),o.qZA()()(),o.TgZ(85,"tr")(86,"td"),o._uU(87," Public holidays "),o.qZA(),o.TgZ(88,"td")(89,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),o._UZ(90,"input",23),o.qZA()()()()()()()()()(),o.TgZ(91,"div",0)(92,"div",1)(93,"div",2)(94,"div",3)(95,"h4",4),o._UZ(96,"b"),o._uU(97," Languages"),o.qZA(),o.TgZ(98,"a",24),o._uU(99,"Save"),o.qZA()(),o.TgZ(100,"div",25)(101,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmitLanguage()}),o.TgZ(102,"div",26)(103,"label",27),o._uU(104,"Language"),o.qZA(),o.TgZ(105,"select",28)(106,"option",12),o._uU(107,"Select language"),o.qZA(),o.YNc(108,L8,2,2,"option",29),o.qZA()()()()()()()),2&r&&(o.xp6(30),o.Q6J("formGroup",i.currencyForm),o.xp6(4),o.Q6J("ngForOf",i.currencies),o.xp6(2),o.Q6J("formGroup",i.currencyForm),o.xp6(4),o.Q6J("ngForOf",i.currencies),o.xp6(2),o.Q6J("formGroup",i.currencyForm),o.xp6(3),o.Q6J("ngIf",i.currencyForm.valid),o.xp6(1),o.Q6J("ngForOf",i.currencyExchanges),o.xp6(8),o.Q6J("ngIf",i.workingDaysResponse),o.xp6(17),o.Q6J("formGroup",i.workingDaysForm),o.xp6(6),o.Q6J("formGroup",i.workingDaysForm),o.xp6(6),o.Q6J("formGroup",i.workingDaysForm),o.xp6(6),o.Q6J("formGroup",i.workingDaysForm),o.xp6(12),o.Q6J("formGroup",i.languageForm),o.xp6(7),o.Q6J("ngForOf",i.languages))},dependencies:[sr,fr,uc,Dy,$g,lc,jg,Du,Tu,Kd,dc,Eu],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})();var tS=(()=>{return(n=tS||(tS={})).EOD="EOD",n.WORK_PACKAGE="WORK PACKAGE",tS;var n})(),Rs=(()=>{return(n=Rs||(Rs={})).Annually="ANNUALLY",n.Monthly="MONTHLY",n.Weekly="WEEKLY",n.Daily="DAILY",n.Hourly="HOURLY",Rs;var n})();class B8 extends Wf{toEntity(e){return{id:e.id,createdAt:e.createdAt,updatedAt:new Date,deleted:!1,companyName:e.companyName,email:e.email,phoneNumber:e.phoneNumber,address:e.address,logo:e.logo}}fromEntity(e){return{id:e.id,createdAt:e.createdAt,companyName:e.companyName,email:e.email,phoneNumber:e.phoneNumber,address:e.address,logo:e.logo}}fromRequest(e){return{updatedAt:new Date,deleted:!1,companyName:e.companyName,email:e.email,phoneNumber:e.phoneNumber,address:e.address,logo:e.logo}}}let Nw=(()=>{class n extends Qg{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}();static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bO=(()=>{class n{constructor(t){this.repository=t}execute(t){return this.repository.create(t)}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(Nw))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wO=(()=>{class n{constructor(t){this.repository=t}execute(t){return this.repository.delete(t)}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(Nw))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CO=(()=>{class n{constructor(t){this.repository=t}execute(t){return this.repository.update(t.id,t.request)}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(Nw))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TO=(()=>{class n{constructor(t){this.repository=t}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(Nw))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cB=(()=>{class n extends yw{constructor(t,r,i,s){super(),this.createClientUseCase=t,this.deleteClientUseCase=r,this.updateClientUseCase=i,this.fetchClientsUseCase=s,this.mapper=new B8}create(t){let r=this.mapper.fromRequest(t);return r.id=Gy(),r.createdAt=new Date,this.createClientUseCase.execute(r).pipe((0,S.U)(i=>this.mapper.toResponse(i)))}delete(t){return this.deleteClientUseCase.execute(t),Re(this.mapper.toEmptyResponse())}fetchAll(){return this.fetchClientsUseCase.execute().pipe((0,S.U)(t=>this.mapper.toResponses(t)))}fetchOne(t){return Re()}update(t,r){return this.updateClientUseCase.execute({id:t,request:r}),Re(this.mapper.toEmptyResponse())}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(bO),o.LFG(wO),o.LFG(CO),o.LFG(TO))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const am_resource_insurance="ANNUALLY AED 790",am_resource_flightTicket="ANNUALLY AED 2500",am_resource_workPermit="ANNUALLY AED 6500",am_resource_office="DAILY AED 19",am_resource_generalSupportPackage="DAILY AED 15",am_resource_laptopWorkstation="ANNUALLY AED 5000",am_resource_licenses="ANNUALLY AED 400";class V8 extends Wf{toEntity(e){return{id:e.id,createdAt:e.createdAt,updatedAt:new Date,deleted:!1,jobTitle:e.jobTitle,resourceType:e.resourceType,workload:e.workload,project:e.project,basicSalary:e.basicSalary,allowance:e.allowance,gratuity:e.gratuity,insurance:e.insurance,flightTicket:e.flightTicket,workPermit:e.workPermit,office:e.office,generalSupportPackage:e.generalSupportPackage,laptopWorkstation:e.laptopWorkstation,licenses:e.licenses}}fromEntity(e){return{id:e.id,createdAt:e.createdAt,jobTitle:e.jobTitle,resourceType:e.resourceType,workload:e.workload,project:e.project,basicSalary:e.basicSalary,allowance:e.allowance,gratuity:e.gratuity,insurance:e.insurance,flightTicket:e.flightTicket,workPermit:e.workPermit,office:e.office,generalSupportPackage:e.generalSupportPackage,laptopWorkstation:e.laptopWorkstation,licenses:e.licenses}}fromRequest(e){return{updatedAt:new Date,deleted:!1,jobTitle:e.jobTitle,resourceType:e.resourceType,workload:e.workload,project:e.project,basicSalary:e.basicSalary,allowance:e.allowance,gratuity:e.gratuity,insurance:e.insurance??am_resource_insurance,flightTicket:e.flightTicket??am_resource_flightTicket,workPermit:e.workPermit??am_resource_workPermit,office:e.office??am_resource_office,generalSupportPackage:e.generalSupportPackage??am_resource_generalSupportPackage,laptopWorkstation:e.laptopWorkstation??am_resource_laptopWorkstation,licenses:e.licenses??am_resource_licenses}}}let nS=(()=>{class n extends Qg{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}();static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),EO=(()=>{class n{constructor(t){this.repository=t}execute(t){return this.repository.create(t)}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(nS))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),DO=(()=>{class n{constructor(t){this.repository=t}execute(t){return this.repository.fetchByProject(t)}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(nS))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SO=(()=>{class n{constructor(t){this.repository=t}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(nS))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dB=(()=>{class n extends uB{constructor(t,r,i){super(),this.createResourceUseCase=t,this.fetchProjectResourcesUseCase=r,this.fetchResourcesUseCase=i,this.mapper=new V8}create(t){let r=this.mapper.fromRequest(t);return r.id=Gy(),r.createdAt=new Date,this.createResourceUseCase.execute(r).pipe((0,S.U)(i=>this.mapper.toResponse(i)))}delete(t){return Re()}fetchAll(){return this.fetchResourcesUseCase.execute().pipe((0,S.U)(t=>this.mapper.toResponses(t)))}fetchByProject(t){return this.fetchProjectResourcesUseCase.execute(t).pipe((0,S.U)(r=>this.mapper.toResponses(r)))}fetchOne(t){return Re()}update(t,r){return Re()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(EO),o.LFG(DO),o.LFG(SO))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function j8(n,e){1&n&&(o.TgZ(0,"small",89),o._uU(1," Please enter project title "),o.qZA())}function H8(n,e){if(1&n&&(o.TgZ(0,"option",90),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t.id),o.xp6(1),o.Oqu(t.companyName)}}function $8(n,e){if(1&n&&(o.TgZ(0,"b"),o._uU(1),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Oqu(t.resources.length)}}function G8(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function q8(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function z8(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function Z8(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"img",92),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.onSubmit())}),o.qZA()}}function W8(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function K8(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function Y8(n,e){if(1&n&&(o.TgZ(0,"select",93),o.YNc(1,K8,2,2,"option",35),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.periods)}}function Q8(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function J8(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function X8(n,e){if(1&n&&(o.TgZ(0,"select",94),o.YNc(1,J8,2,2,"option",35),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.periods)}}function eW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function tW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function nW(n,e){if(1&n&&(o.TgZ(0,"select",95),o.YNc(1,tW,2,2,"option",35),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.periods)}}function rW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function iW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function sW(n,e){if(1&n&&(o.TgZ(0,"select",96),o.YNc(1,iW,2,2,"option",35),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.periods)}}function oW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function aW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function lW(n,e){if(1&n&&(o.TgZ(0,"select",97),o.YNc(1,aW,2,2,"option",35),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.periods)}}function cW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function uW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function dW(n,e){if(1&n&&(o.TgZ(0,"select",98),o.YNc(1,uW,2,2,"option",35),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.periods)}}function hW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function fW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function pW(n,e){if(1&n&&(o.TgZ(0,"select",99),o.YNc(1,fW,2,2,"option",35),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.periods)}}function gW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function mW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function _W(n,e){if(1&n&&(o.TgZ(0,"select",100),o.YNc(1,mW,2,2,"option",35),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.periods)}}function yW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function vW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function bW(n,e){if(1&n&&(o.TgZ(0,"select",101),o.YNc(1,vW,2,2,"option",35),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.periods)}}function wW(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"tr")(1,"td")(2,"h2"),o._uU(3),o.qZA()(),o.TgZ(4,"td"),o._uU(5),o.qZA(),o.TgZ(6,"td"),o._uU(7),o.qZA(),o.TgZ(8,"td"),o._uU(9),o.qZA(),o.TgZ(10,"td"),o._UZ(11,"img",102),o.TgZ(12,"img",103),o.NdJ("click",function(){const s=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.onClickResourceToBeDeleted(s))}),o.qZA()(),o.TgZ(13,"td"),o._uU(14),o.qZA(),o.TgZ(15,"td"),o._uU(16),o.qZA(),o.TgZ(17,"td"),o._uU(18),o.qZA(),o.TgZ(19,"td"),o._uU(20),o.qZA(),o.TgZ(21,"td"),o._uU(22),o.qZA(),o.TgZ(23,"td"),o._uU(24),o.qZA(),o.TgZ(25,"td"),o._uU(26),o.qZA(),o.TgZ(27,"td"),o._uU(28),o.qZA(),o.TgZ(29,"td"),o._uU(30),o.qZA()()}if(2&n){const t=e.$implicit;o.xp6(3),o.Oqu(t.jobTitle),o.xp6(2),o.Oqu(t.basicSalary),o.xp6(2),o.Oqu(t.resourceType),o.xp6(2),o.Oqu(t.workload),o.xp6(5),o.Oqu(t.allowance),o.xp6(2),o.Oqu(t.gratuity),o.xp6(2),o.Oqu(t.insurance),o.xp6(2),o.Oqu(t.flightTicket),o.xp6(2),o.Oqu(t.workPermit),o.xp6(2),o.Oqu(t.office),o.xp6(2),o.Oqu(t.generalSupportPackage),o.xp6(2),o.Oqu(t.laptopWorkstation),o.xp6(2),o.Oqu(t.licenses)}}function CW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function TW(n,e){if(1&n&&(o.TgZ(0,"option",91),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function EW(n,e){if(1&n&&(o.TgZ(0,"th"),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.xp6(1),o.Oqu(t)}}function DW(n,e){if(1&n&&(o.TgZ(0,"td")(1,"h2"),o._uU(2),o.qZA()()),2&n){const t=e.$implicit,r=o.oxw().$implicit,i=o.oxw();o.xp6(2),o.Oqu(i.calculateCurrencyPeriodCost(t,r))}}function SW(n,e){if(1&n&&(o.TgZ(0,"tr")(1,"td")(2,"h2"),o._uU(3),o.qZA()(),o.YNc(4,DW,3,1,"td",68),o.qZA()),2&n){const t=e.$implicit,r=o.oxw();o.xp6(3),o.Oqu(t),o.xp6(1),o.Q6J("ngForOf",r.displayCurrencies)}}function IW(n,e){if(1&n&&(o.TgZ(0,"th"),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.xp6(1),o.Oqu(t)}}function AW(n,e){if(1&n&&(o.TgZ(0,"td")(1,"h2"),o._uU(2),o.qZA()()),2&n){const t=e.$implicit,r=o.oxw().$implicit,i=o.oxw();o.xp6(2),o.Oqu(i.calculateCurrencyPeriodPrice(t,r))}}function NW(n,e){if(1&n&&(o.TgZ(0,"tr")(1,"td")(2,"h2"),o._uU(3),o.qZA()(),o.YNc(4,AW,3,1,"td",68),o.qZA()),2&n){const t=e.$implicit,r=o.oxw();o.xp6(3),o.Oqu(t),o.xp6(1),o.Q6J("ngForOf",r.displayCurrencies)}}let xW=(()=>{class n{constructor(t,r,i,s,c,d){this.localStorageService=t,this.toastr=r,this.router=i,this.clientInteractor=s,this.projectInteractor=c,this.resourceInteractor=d,this.clients=[],this.resources=[],this.resourceTypes=[],this.currencies=[],this.periods=[],this.displayCurrencies=[],this.displayPeriods=[],this.project=t.get("project"),this.periods=Object.values(Rs),this.resourceTypes=Object.values(tS),this.currencies=Object.values(om),this.displayCurrencies.push(om.AED),this.displayPeriods.push(Rs.Annually),this.resourceForm=new Os({jobTitle:new lt("",[Zn.required]),basicSalaryPeriod:new lt("MONTHLY"),basicSalaryCurrency:new lt("AED"),basicSalary:new lt("",[Zn.required]),resourceType:new lt("",[Zn.required]),workload:new lt("1"),allowancePeriod:new lt("MONTHLY"),allowanceCurrency:new lt("AED"),allowance:new lt(""),gratuityPeriod:new lt("ANNUALLY"),gratuityCurrency:new lt("AED"),gratuity:new lt(""),insurancePeriod:new lt("ANNUALLY"),insuranceCurrency:new lt("AED"),insurance:new lt("790"),flightTicketPeriod:new lt("ANNUALLY"),flightTicketCurrency:new lt("AED"),flightTicket:new lt("2500"),workPermitPeriod:new lt("ANNUALLY"),workPermitCurrency:new lt("AED"),workPermit:new lt("6500"),officePeriod:new lt("DAILY"),officeCurrency:new lt("AED"),office:new lt("19"),generalSupportPackagePeriod:new lt("DAILY"),generalSupportPackageCurrency:new lt("AED"),generalSupportPackage:new lt("15"),laptopWorkstationPeriod:new lt("ANNUALLY"),laptopWorkstationCurrency:new lt("AED"),laptopWorkstation:new lt("5000"),licensesPeriod:new lt("ANNUALLY"),licensesCurrency:new lt("AED"),licenses:new lt("400")}),this.projectForm=new Os({title:new lt(this.project.title,[Zn.required]),client:new lt(this.project.client,[Zn.required]),description:new lt(this.project.description),duration:new lt(this.project.duration),margin:new lt(this.project.margin),riskProvision:new lt(this.project.riskProvision)}),this.displayForm=new Os({period:new lt(Rs.Annually),currency:new lt(om.AED)})}ngOnInit(){this.fetchClients(),this.fetchResources(this.project.id),console.log(Number(1256348.25697831).toLocaleString("en",{minimumFractionDigits:2,maximumFractionDigits:2}))}fetchClients(){this.clientInteractor.fetchAll().subscribe({next:t=>{t&&t.success&&(this.clients=t.data)},error:t=>{},complete:()=>{}})}fetchResources(t){this.resourceInteractor.fetchByProject(t).subscribe({next:r=>{r&&r.success&&(this.resources=r.data)},error:r=>{},complete:()=>{}})}splitAmount(t){return t.split(" ")}calculateAttributeAnnualCost(t){let r=0,i=this.splitAmount(t);switch(i[0]){case Rs.Annually:r=+i[2];break;case Rs.Monthly:r=12*+i[2];break;case Rs.Weekly:r=52*+i[2];break;case Rs.Daily:r=228*+i[2];break;case Rs.Hourly:r=52*+i[2]*48}return r}calculateTotalAnnualCost(){let t=0;return this.resources.forEach(r=>{t+=this.calculateAttributeAnnualCost(r.basicSalary),t+=this.calculateAttributeAnnualCost(r.allowance),t+=this.calculateAttributeAnnualCost(r.gratuity),t+=this.calculateAttributeAnnualCost(r.insurance),t+=this.calculateAttributeAnnualCost(r.flightTicket),t+=this.calculateAttributeAnnualCost(r.workPermit),t+=this.calculateAttributeAnnualCost(r.office),t+=this.calculateAttributeAnnualCost(r.generalSupportPackage),t+=this.calculateAttributeAnnualCost(r.laptopWorkstation),t+=this.calculateAttributeAnnualCost(r.licenses)}),t}calculateByCurrencyAndPeriod(t,r,i){switch(i){case Rs.Annually:break;case Rs.Monthly:t/=12;break;case Rs.Weekly:t/=52;break;case Rs.Daily:t/=228;break;case Rs.Hourly:t/=2496}return t}calculateCurrencyPeriodCost(t,r){return this.calculateByCurrencyAndPeriod(this.calculateTotalAnnualCost(),t,r)}calculateTotalAnnualPrice(){return(1+this.project.margin/100)*(1+this.project.riskProvision/100)*this.calculateTotalAnnualCost()}calculateCurrencyPeriodPrice(t,r){return this.calculateByCurrencyAndPeriod(this.calculateTotalAnnualPrice(),t,r)}onSubmit(){this.resourceInteractor.create({jobTitle:this.resourceForm.value.jobTitle,resourceType:this.resourceForm.value.resourceType,workload:this.resourceForm.value.workload,project:this.project.id,basicSalary:this.resourceForm.value.basicSalaryPeriod+" "+this.resourceForm.value.basicSalaryCurrency+" "+this.resourceForm.value.basicSalary,allowance:this.resourceForm.value.allowancePeriod+" "+this.resourceForm.value.allowanceCurrency+" "+this.resourceForm.value.allowance,gratuity:this.resourceForm.value.gratuityPeriod+" "+this.resourceForm.value.gratuityCurrency+" "+this.resourceForm.value.gratuity,insurance:this.resourceForm.value.insurancePeriod+" "+this.resourceForm.value.insuranceCurrency+" "+this.resourceForm.value.insurance,flightTicket:this.resourceForm.value.flightTicketPeriod+" "+this.resourceForm.value.flightTicketCurrency+" "+this.resourceForm.value.flightTicket,workPermit:this.resourceForm.value.workPermitPeriod+" "+this.resourceForm.value.workPermitCurrency+" "+this.resourceForm.value.workPermit,office:this.resourceForm.value.officePeriod+" "+this.resourceForm.value.officeCurrency+" "+this.resourceForm.value.office,generalSupportPackage:this.resourceForm.value.generalSupportPackagePeriod+" "+this.resourceForm.value.generalSupportPackageCurrency+" "+this.resourceForm.value.generalSupportPackage,laptopWorkstation:this.resourceForm.value.laptopWorkstationPeriod+" "+this.resourceForm.value.laptopWorkstationCurrency+" "+this.resourceForm.value.laptopWorkstation,licenses:this.resourceForm.value.licensesPeriod+" "+this.resourceForm.value.licensesCurrency+" "+this.resourceForm.value.licenses}).subscribe({next:r=>{this.toastr.success("project successfully saved","Success"),this.fetchResources(this.project.id)},error:r=>{this.toastr.error("Error occurred while saving the project","Error")},complete:()=>{}})}onChangeBasicSalary(){this.inputs={jobTitle:this.resourceForm.value.jobTitle,basicSalaryPeriod:this.resourceForm.value.basicSalaryPeriod,basicSalaryCurrency:this.resourceForm.value.basicSalaryCurrency,basicSalary:this.resourceForm.value.basicSalary,resourceType:this.resourceForm.value.resourceType,workload:this.resourceForm.value.workload,allowancePeriod:this.resourceForm.value.allowancePeriod,allowanceCurrency:this.resourceForm.value.allowanceCurrency,allowance:this.resourceForm.value.basicSalary,gratuityPeriod:this.resourceForm.value.gratuityPeriod,gratuityCurrency:this.resourceForm.value.gratuityCurrency,gratuity:this.resourceForm.value.basicSalary,insurancePeriod:this.resourceForm.value.insurancePeriod,insuranceCurrency:this.resourceForm.value.insuranceCurrency,insurance:this.resourceForm.value.insurance,flightTicketPeriod:this.resourceForm.value.flightTicketPeriod,flightTicketCurrency:this.resourceForm.value.flightTicketCurrency,flightTicket:this.resourceForm.value.flightTicket,workPermitPeriod:this.resourceForm.value.workPermitPeriod,workPermitCurrency:this.resourceForm.value.workPermitCurrency,workPermit:this.resourceForm.value.workPermit,officePeriod:this.resourceForm.value.officePeriod,officeCurrency:this.resourceForm.value.officeCurrency,office:this.resourceForm.value.office,generalSupportPackagePeriod:this.resourceForm.value.generalSupportPackagePeriod,generalSupportPackageCurrency:this.resourceForm.value.generalSupportPackageCurrency,generalSupportPackage:this.resourceForm.value.generalSupportPackage,laptopWorkstationPeriod:this.resourceForm.value.laptopWorkstationPeriod,laptopWorkstationCurrency:this.resourceForm.value.laptopWorkstationCurrency,laptopWorkstation:this.resourceForm.value.laptopWorkstation,licensesPeriod:this.resourceForm.value.licensesPeriod,licensesCurrency:this.resourceForm.value.licensesCurrency,licenses:this.resourceForm.value.licenses},this.resourceForm.setValue(this.inputs)}onChangePeriod(){let t={period:this.displayForm.value.period,currency:this.displayForm.value.currency},r=this.displayPeriods.indexOf(t.period);r>-1?this.displayPeriods.splice(r,1):this.displayPeriods.push(t.period)}onChangeCurrency(){let t={period:this.displayForm.value.period,currency:this.displayForm.value.currency},r=this.displayCurrencies.indexOf(t.currency);r>-1?this.displayCurrencies.splice(r,1):this.displayCurrencies.push(t.currency)}fetchProject(){this.projectInteractor.fetchOne(this.project.id).subscribe({next:t=>{t&&t.success&&(this.project=t.data)},error:t=>{},complete:()=>{}})}onSubmitProject(){if(this.projectForm.valid){let t={title:this.projectForm.value.title,duration:this.projectForm.value.duration,description:this.projectForm.value.description,client:this.projectForm.value.client,margin:this.projectForm.value.margin,riskProvision:this.projectForm.value.riskProvision};console.log(t),this.projectInteractor.update(this.project.id,t).subscribe({next:r=>{this.fetchProject(),this.toastr.success("project successfully updated","Success")},error:r=>{this.toastr.error("Error occurred while updating the project","Error")},complete:()=>{}})}else this.toastr.error("Some inputs are incorrect","Error")}onSubmitDisplay(){}onClickBack(){this.router.navigate(["dashboard"])}onClickDeleteResource(){console.log(this.localStorageService.get("resource"))}onClickResourceToBeDeleted(t){this.localStorageService.add("resource",t)}onClickDismissResource(){this.localStorageService.delete("resource")}static#e=this.\u0275fac=function(r){return new(r||n)(o.Y36(rh),o.Y36(Au),o.Y36(br),o.Y36(cB),o.Y36(jD),o.Y36(dB))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-resources"]],decls:230,vars:52,consts:[[1,"card"],[1,"card-header"],[1,"row"],[1,"col-2","pointer",3,"click"],["src","assets/images/arrow-left.png",1,"float-left"],[1,"col"],[1,"card-title"],[1,"col-2"],["href","",1,"btn","btn-outline-success","float-right",3,"click"],[1,"card-block"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],[1,"row","m-3"],[1,"col-12","form-group"],["for","title"],[2,"color","red"],["type","text","formControlName","title","placeholder","Project title","id","title",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],[1,"col-9","form-group"],["for","client"],["formControlName","client","id","client",1,"form-control"],["value","","disabled",""],["style","color: black;",3,"ngValue",4,"ngFor","ngForOf"],[1,"col-3","form-group"],["for","duration"],["type","number","formControlName","duration","placeholder","Duration","id","duration",1,"form-control"],["for","description"],["type","number","formControlName","description","placeholder","Description","id","description",1,"form-control"],[1,"col-12"],[1,"card-title","d-inline-block"],[4,"ngIf"],["href","","data-bs-toggle","modal","data-bs-target","#addProjectModal",1,"btn","btn-outline-primary","float-right"],[1,"table-responsive","scrollmenu","m-3"],[1,"table","mb-0","new-patient-table","table-hover"],["type","text","formControlName","jobTitle","placeholder","Title of the resource","id","jobTitle"],["formControlName","basicSalaryCurrency",3,"change"],[3,"ngValue",4,"ngFor","ngForOf"],["type","number","formControlName","basicSalary","placeholder","basic salary","id","basicSalary",3,"change"],["formControlName","basicSalaryPeriod",3,"change"],["formControlName","resourceType"],["type","number","formControlName","workload","placeholder","Workload","id","workload"],["class","aspect-square","src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],["formControlName","allowanceCurrency",2,"color","black"],["type","number","formControlName","allowance","placeholder","allowance","id","allowance"],["formControlName","allowancePeriod",4,"ngIf"],["formControlName","gratuityCurrency",2,"color","black"],["type","number","formControlName","gratuity","placeholder","gratuity","id","gratuity"],["formControlName","gratuityPeriod",4,"ngIf"],["formControlName","insuranceCurrency",2,"color","black"],["type","number","formControlName","insurance","placeholder","insurance","id","insurance"],["formControlName","insurancePeriod",4,"ngIf"],["formControlName","flightTicketCurrency",2,"color","black"],["type","number","formControlName","flightTicket","placeholder","flightTicket","id","flightTicket"],["formControlName","flightTicketPeriod",4,"ngIf"],["formControlName","workPermitCurrency",2,"color","black"],["type","number","formControlName","workPermit","placeholder","workPermit","id","workPermit"],["formControlName","workPermitPeriod",4,"ngIf"],["formControlName","officeCurrency",2,"color","black"],["type","number","formControlName","office","placeholder","office","id","office"],["formControlName","officePeriod",4,"ngIf"],["formControlName","generalSupportPackageCurrency",2,"color","black"],["type","number","formControlName","generalSupportPackage","placeholder","generalSupportPackage","id","generalSupportPackage"],["formControlName","generalSupportPackagePeriod",4,"ngIf"],["formControlName","laptopWorkstationCurrency",2,"color","black"],["type","number","formControlName","laptopWorkstation","placeholder","laptopWorkstation","id","laptopWorkstation"],["formControlName","laptopWorkstationPeriod",4,"ngIf"],["formControlName","licensesCurrency",2,"color","black"],["type","number","formControlName","licenses","placeholder","licenses","id","licenses"],["formControlName","licensesPeriod",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-6"],["for","period"],["formControlName","period","id","period",1,"form-control",3,"change"],["for","currency"],["formControlName","currency","id","currency",1,"form-control",3,"change"],[1,"row","m-2"],["for","margin"],["type","number","formControlName","margin","placeholder","margin","id","margin",1,"form-control"],["for","riskProvision"],["type","number","formControlName","riskProvision","placeholder","Risk provision","id","riskProvision",1,"form-control"],["id","resourceDeleteModal","tabindex","-1","aria-labelledby","resourceDeleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","resourceDeleteModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"form-text","text-muted","text-danger"],[2,"color","black",3,"ngValue"],[3,"ngValue"],["src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],["formControlName","allowancePeriod"],["formControlName","gratuityPeriod"],["formControlName","insurancePeriod"],["formControlName","flightTicketPeriod"],["formControlName","workPermitPeriod"],["formControlName","officePeriod"],["formControlName","generalSupportPackagePeriod"],["formControlName","laptopWorkstationPeriod"],["formControlName","licensesPeriod"],["src","assets/images/duplicate.png","alt","duplicate","data-bs-toggle","tooltip","data-bs-placement","top","title","duplicate",1,"aspect-square","action"],["src","assets/images/delete.png","data-bs-target","#resourceDeleteModal","alt","delete","data-bs-toggle","modal","data-bs-placement","top","title","delete",1,"aspect-square","action",3,"click"]],template:function(r,i){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),o.NdJ("click",function(){return i.onClickBack()}),o._UZ(4,"img",4),o.qZA(),o.TgZ(5,"div",5)(6,"h4",6)(7,"b"),o._uU(8),o.ALo(9,"uppercase"),o.qZA()()(),o.TgZ(10,"div",7)(11,"a",8),o.NdJ("click",function(){return i.onSubmitProject()}),o._uU(12,"Save"),o.qZA()()()(),o.TgZ(13,"div",9)(14,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmitProject()}),o.TgZ(15,"div",11)(16,"div",12)(17,"label",13),o._uU(18,"Project title"),o.TgZ(19,"span",14),o._uU(20,"*"),o.qZA()(),o._UZ(21,"input",15),o.YNc(22,j8,2,0,"small",16),o.qZA(),o.TgZ(23,"div",17)(24,"label",18),o._uU(25,"Client"),o.TgZ(26,"span",14),o._uU(27,"*"),o.qZA()(),o.TgZ(28,"select",19)(29,"option",20),o._uU(30,"Select client"),o.qZA(),o.YNc(31,H8,2,2,"option",21),o.qZA()(),o.TgZ(32,"div",22)(33,"label",23),o._uU(34,"Duration(Months)"),o.qZA(),o._UZ(35,"input",24),o.qZA(),o.TgZ(36,"div",12)(37,"label",25),o._uU(38,"Description"),o.qZA(),o.TgZ(39,"textarea",26),o._uU(40,"            "),o.qZA()()()()()(),o.TgZ(41,"div",2)(42,"div",27)(43,"div",0)(44,"div",1)(45,"h4",28),o.YNc(46,$8,2,1,"b",29),o._uU(47," Resources "),o.qZA(),o.TgZ(48,"a",30),o._uU(49,"Add"),o.qZA()(),o.TgZ(50,"div",9)(51,"div",31)(52,"table",32)(53,"thead")(54,"tr")(55,"th"),o._uU(56,"Job title"),o.TgZ(57,"span",14),o._uU(58,"*"),o.qZA()(),o.TgZ(59,"th"),o._uU(60,"Basic salary"),o.TgZ(61,"span",14),o._uU(62,"*"),o.qZA()(),o.TgZ(63,"th"),o._uU(64,"Resource type"),o.TgZ(65,"span",14),o._uU(66,"*"),o.qZA()(),o.TgZ(67,"th"),o._uU(68,"Workload"),o.qZA(),o.TgZ(69,"th"),o._uU(70,"Actions"),o.qZA(),o.TgZ(71,"th"),o._uU(72,"Allowance"),o.qZA(),o.TgZ(73,"th"),o._uU(74,"Gratuity"),o.qZA(),o.TgZ(75,"th"),o._uU(76,"Insurance"),o.qZA(),o.TgZ(77,"th"),o._uU(78,"Flight ticket"),o.qZA(),o.TgZ(79,"th"),o._uU(80,"Work permit"),o.qZA(),o.TgZ(81,"th"),o._uU(82,"Office"),o.qZA(),o.TgZ(83,"th"),o._uU(84,"General support package"),o.qZA(),o.TgZ(85,"th"),o._uU(86,"Laptop workstation"),o.qZA(),o.TgZ(87,"th"),o._uU(88,"Licenses"),o.qZA()()(),o.TgZ(89,"tbody")(90,"tr")(91,"td")(92,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(93,"input",33),o.qZA()(),o.TgZ(94,"td")(95,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(96,"select",34),o.NdJ("change",function(){return i.onChangeBasicSalary()}),o.YNc(97,G8,2,2,"option",35),o.qZA(),o.TgZ(98,"input",36),o.NdJ("change",function(){return i.onChangeBasicSalary()}),o.qZA(),o.TgZ(99,"select",37),o.NdJ("change",function(){return i.onChangeBasicSalary()}),o.YNc(100,q8,2,2,"option",35),o.qZA()()(),o.TgZ(101,"td")(102,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(103,"select",38)(104,"option",20),o._uU(105,"Select resource type"),o.qZA(),o.YNc(106,z8,2,2,"option",35),o.qZA()()(),o.TgZ(107,"td")(108,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(109,"input",39),o.qZA()(),o.TgZ(110,"td"),o.YNc(111,Z8,1,0,"img",40),o.qZA(),o.TgZ(112,"td")(113,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(114,"select",41),o.YNc(115,W8,2,2,"option",35),o.qZA(),o._UZ(116,"input",42),o.YNc(117,Y8,2,1,"select",43),o.qZA()(),o.TgZ(118,"td")(119,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(120,"select",44),o.YNc(121,Q8,2,2,"option",35),o.qZA(),o._UZ(122,"input",45),o.YNc(123,X8,2,1,"select",46),o.qZA()(),o.TgZ(124,"td")(125,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(126,"select",47),o.YNc(127,eW,2,2,"option",35),o.qZA(),o._UZ(128,"input",48),o.YNc(129,nW,2,1,"select",49),o.qZA()(),o.TgZ(130,"td")(131,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(132,"select",50),o.YNc(133,rW,2,2,"option",35),o.qZA(),o._UZ(134,"input",51),o.YNc(135,sW,2,1,"select",52),o.qZA()(),o.TgZ(136,"td")(137,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(138,"select",53),o.YNc(139,oW,2,2,"option",35),o.qZA(),o._UZ(140,"input",54),o.YNc(141,lW,2,1,"select",55),o.qZA()(),o.TgZ(142,"td")(143,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(144,"select",56),o.YNc(145,cW,2,2,"option",35),o.qZA(),o._UZ(146,"input",57),o.YNc(147,dW,2,1,"select",58),o.qZA()(),o.TgZ(148,"td")(149,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(150,"select",59),o.YNc(151,hW,2,2,"option",35),o.qZA(),o._UZ(152,"input",60),o.YNc(153,pW,2,1,"select",61),o.qZA()(),o.TgZ(154,"td")(155,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(156,"select",62),o.YNc(157,gW,2,2,"option",35),o.qZA(),o._UZ(158,"input",63),o.YNc(159,_W,2,1,"select",64),o.qZA()(),o.TgZ(160,"td")(161,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(162,"select",65),o.YNc(163,yW,2,2,"option",35),o.qZA(),o._UZ(164,"input",66),o.YNc(165,bW,2,1,"select",67),o.qZA()()(),o.YNc(166,wW,31,13,"tr",68),o.qZA()()()()()()(),o.TgZ(167,"div",2)(168,"div",27)(169,"div",0)(170,"div",1)(171,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmitDisplay()}),o.TgZ(172,"div",2)(173,"div",69)(174,"label",70),o._uU(175,"Period"),o.qZA(),o.TgZ(176,"select",71),o.NdJ("change",function(){return i.onChangePeriod()}),o.YNc(177,CW,2,2,"option",35),o.qZA()(),o.TgZ(178,"div",5)(179,"label",72),o._uU(180,"Currency"),o.qZA(),o.TgZ(181,"select",73),o.NdJ("change",function(){return i.onChangeCurrency()}),o.YNc(182,TW,2,2,"option",35),o.qZA()()()()(),o.TgZ(183,"div",9)(184,"div",31)(185,"table",32)(186,"thead")(187,"tr")(188,"th")(189,"h4"),o._uU(190,"Costs"),o.qZA()(),o.YNc(191,EW,2,1,"th",68),o.qZA()(),o.TgZ(192,"tbody"),o.YNc(193,SW,5,2,"tr",68),o.qZA()()(),o.TgZ(194,"div",74)(195,"div",5)(196,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmitProject()}),o.TgZ(197,"label",75),o._uU(198,"Margin (%)"),o.qZA(),o._UZ(199,"input",76),o.qZA()(),o.TgZ(200,"div",5)(201,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmitProject()}),o.TgZ(202,"label",77),o._uU(203,"Risk provision (%)"),o.qZA(),o._UZ(204,"input",78),o.qZA()()(),o.TgZ(205,"div",31)(206,"table",32)(207,"thead")(208,"tr")(209,"th")(210,"h4"),o._uU(211,"Prices"),o.qZA()(),o.YNc(212,IW,2,1,"th",68),o.qZA()(),o.TgZ(213,"tbody"),o.YNc(214,NW,5,2,"tr",68),o.qZA()()()()()()(),o.TgZ(215,"div",79)(216,"div",80)(217,"div",81)(218,"div",82)(219,"h5",83),o._uU(220,"Delete resource"),o.qZA(),o._UZ(221,"button",84),o.qZA(),o.TgZ(222,"div",85)(223,"b"),o._uU(224,"Do you really want to delete this resource?"),o.qZA()(),o.TgZ(225,"div",86)(226,"button",87),o.NdJ("click",function(){return i.onClickDismissResource()}),o._uU(227,"Close "),o.qZA(),o.TgZ(228,"button",88),o.NdJ("click",function(){return i.onClickDeleteResource()}),o._uU(229," Confirm "),o.qZA()()()()()),2&r&&(o.xp6(8),o.Oqu(o.lcZ(9,50,i.project.title)),o.xp6(6),o.Q6J("formGroup",i.projectForm),o.xp6(8),o.Q6J("ngIf",i.projectForm.controls.title.touched&&(null==i.projectForm.controls.title.errors?null:i.projectForm.controls.title.errors.required)),o.xp6(9),o.Q6J("ngForOf",i.clients),o.xp6(15),o.Q6J("ngIf",i.resources),o.xp6(46),o.Q6J("formGroup",i.resourceForm),o.xp6(3),o.Q6J("formGroup",i.resourceForm),o.xp6(2),o.Q6J("ngForOf",i.currencies),o.xp6(3),o.Q6J("ngForOf",i.periods),o.xp6(2),o.Q6J("formGroup",i.resourceForm),o.xp6(4),o.Q6J("ngForOf",i.resourceTypes),o.xp6(2),o.Q6J("formGroup",i.resourceForm),o.xp6(3),o.Q6J("ngIf",i.resourceForm.valid),o.xp6(2),o.Q6J("formGroup",i.resourceForm),o.xp6(2),o.Q6J("ngForOf",i.currencies),o.xp6(2),o.Q6J("ngIf",i.periods.length>0),o.xp6(2),o.Q6J("formGroup",i.resourceForm),o.xp6(2),o.Q6J("ngForOf",i.currencies),o.xp6(2),o.Q6J("ngIf",i.periods.length>0),o.xp6(2),o.Q6J("formGroup",i.resourceForm),o.xp6(2),o.Q6J("ngForOf",i.currencies),o.xp6(2),o.Q6J("ngIf",i.periods.length>0),o.xp6(2),o.Q6J("formGroup",i.resourceForm),o.xp6(2),o.Q6J("ngForOf",i.currencies),o.xp6(2),o.Q6J("ngIf",i.periods.length>0),o.xp6(2),o.Q6J("formGroup",i.resourceForm),o.xp6(2),o.Q6J("ngForOf",i.currencies),o.xp6(2),o.Q6J("ngIf",i.periods.length>0),o.xp6(2),o.Q6J("formGroup",i.resourceForm),o.xp6(2),o.Q6J("ngForOf",i.currencies),o.xp6(2),o.Q6J("ngIf",i.periods.length>0),o.xp6(2),o.Q6J("formGroup",i.resourceForm),o.xp6(2),o.Q6J("ngForOf",i.currencies),o.xp6(2),o.Q6J("ngIf",i.periods.length>0),o.xp6(2),o.Q6J("formGroup",i.resourceForm),o.xp6(2),o.Q6J("ngForOf",i.currencies),o.xp6(2),o.Q6J("ngIf",i.periods.length>0),o.xp6(2),o.Q6J("formGroup",i.resourceForm),o.xp6(2),o.Q6J("ngForOf",i.currencies),o.xp6(2),o.Q6J("ngIf",i.periods.length>0),o.xp6(1),o.Q6J("ngForOf",i.resources),o.xp6(5),o.Q6J("formGroup",i.displayForm),o.xp6(6),o.Q6J("ngForOf",i.periods),o.xp6(5),o.Q6J("ngForOf",i.currencies),o.xp6(9),o.Q6J("ngForOf",i.displayCurrencies),o.xp6(2),o.Q6J("ngForOf",i.displayPeriods),o.xp6(3),o.Q6J("formGroup",i.projectForm),o.xp6(5),o.Q6J("formGroup",i.projectForm),o.xp6(11),o.Q6J("ngForOf",i.displayCurrencies),o.xp6(2),o.Q6J("ngForOf",i.displayPeriods))},dependencies:[sr,fr,uc,Dy,$g,lc,jg,Du,Tu,Kd,dc,Eu,zi],styles:["div.scrollmenu[_ngcontent-%COMP%]{background-color:#333;overflow:auto;white-space:nowrap}div.scrollmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;color:#fff;text-align:center;padding:14px;text-decoration:none}tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid lightgray;border-collapse:collapse}"]})}return n})();var rS=(()=>{return(n=rS||(rS={})).Admin="ADMIN",n.Business="BUSINESS MANAGER",n.Financial="FINANCIAL MANAGER",rS;var n})();class kW extends Wf{toEntity(e){return{id:e.id,createdAt:e.createdAt,updatedAt:new Date,deleted:!1,firstname:e.firstname,lastname:e.lastname,email:e.email,phoneNumber:e.phoneNumber,address:e.address,role:e.role,avatar:e.avatar}}fromEntity(e){return{id:e.id,createdAt:e.createdAt,firstname:e.firstname,lastname:e.lastname,email:e.email,phoneNumber:e.phoneNumber,address:e.address,role:e.role,avatar:e.avatar}}fromRequest(e){return{updatedAt:new Date,deleted:!1,firstname:e.firstname,lastname:e.lastname,email:e.email,phoneNumber:e.phoneNumber,address:e.address,role:e.role,avatar:e.avatar}}}let xw=(()=>{class n extends Qg{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}();static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IO=(()=>{class n{constructor(t){this.accountRepository=t}execute(t){return this.accountRepository.fetch(t)}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(xw))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),AO=(()=>{class n{constructor(t){this.accountRepository=t}execute(){return this.accountRepository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(xw))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),NO=(()=>{class n{constructor(t){this.accountRepository=t}execute(t){return this.accountRepository.login(t)}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(xw))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xO=(()=>{class n{constructor(t){this.accountRepository=t}execute(t){return this.accountRepository.create(t)}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(xw))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hB=(()=>{class n extends Zf{constructor(t,r,i,s){super(),this.fetchAccountUseCase=t,this.fetchAccountsUseCase=r,this.loginAccountUseCase=i,this.createAccountUseCase=s,this.mapper=new kW}create(t){let r=this.mapper.fromRequest(t);return r.id=Gy(),r.password="Password1",r.createdAt=new Date,this.createAccountUseCase.execute(r).pipe((0,S.U)(i=>this.mapper.toResponse(i)))}delete(t){return Re()}fetchAll(){return this.fetchAccountsUseCase.execute().pipe((0,S.U)(t=>this.mapper.toResponses(t)))}fetchOne(t){return this.fetchAccountUseCase.execute(t).pipe((0,S.U)(r=>this.mapper.toResponse(r)))}login(t){return this.loginAccountUseCase.execute(t).pipe((0,S.U)(r=>this.mapper.toFirstResponse(r)))}update(t,r){return Re()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(IO),o.LFG(AO),o.LFG(NO),o.LFG(xO))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OW(n,e){if(1&n&&(o.TgZ(0,"option",47),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}function RW(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"img",48),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.onSubmit())}),o.qZA()}}function MW(n,e){if(1&n&&(o.TgZ(0,"tr")(1,"td")(2,"div",0)(3,"div",49),o._UZ(4,"img",50),o.qZA(),o.TgZ(5,"div",28)(6,"h2"),o._uU(7),o.qZA()()()(),o.TgZ(8,"td"),o._uU(9),o.qZA(),o.TgZ(10,"td"),o._uU(11),o.qZA(),o.TgZ(12,"td"),o._uU(13),o.qZA(),o.TgZ(14,"td"),o._uU(15),o.qZA(),o.TgZ(16,"td"),o._uU(17),o.qZA(),o.TgZ(18,"td"),o._UZ(19,"img",51),o.qZA()()),2&n){const t=e.$implicit;o.xp6(7),o.Oqu(t.firstname),o.xp6(2),o.Oqu(t.lastname),o.xp6(2),o.Oqu(t.email),o.xp6(2),o.Oqu(t.role),o.xp6(2),o.Oqu(t.phoneNumber),o.xp6(2),o.Oqu(t.address)}}function PW(n,e){1&n&&(o.TgZ(0,"small",52),o._uU(1," Please enter firstname! "),o.qZA())}function FW(n,e){1&n&&(o.TgZ(0,"small",52),o._uU(1," Please enter lastname! "),o.qZA())}function LW(n,e){if(1&n&&(o.TgZ(0,"option",47),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.Oqu(t)}}const UW=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:zk},{path:"",component:FD,canActivate:[h],children:[{path:"dashboard",component:u},{path:"resources",component:xW},{path:"clients",component:N8},{path:"accounts",component:(()=>{class n{constructor(t,r,i,s){this.accountInteractor=t,this.router=r,this.toastr=i,this.localStorageService=s,this.accounts=[],this.roles=[],this.roles=Object.values(rS),this.accountForm=new Os({firstname:new lt("",[Zn.required]),lastname:new lt("",[Zn.required]),email:new lt("",[Zn.required]),address:new lt(""),phoneNumber:new lt(""),avatar:new lt(""),role:new lt("",[Zn.required])})}ngOnInit(){this.fetchAccounts()}fetchAccounts(){this.accountInteractor.fetchAll().subscribe({next:t=>{this.accounts=t.data},error:t=>{},complete:()=>{}})}onSubmit(){this.accountForm.valid?this.accountInteractor.create({firstname:this.accountForm.value.firstname,lastname:this.accountForm.value.lastname,email:this.accountForm.value.email,address:this.accountForm.value.address,phoneNumber:this.accountForm.value.phoneNumber,role:this.accountForm.value.role,avatar:""}).subscribe({next:r=>{this.toastr.success("account successfully saved","Success"),this.fetchAccounts()},error:r=>{this.toastr.error("Error occurred while saving account","Error")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Error")}static#e=this.\u0275fac=function(r){return new(r||n)(o.Y36(hB),o.Y36(br),o.Y36(Au),o.Y36(rh))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-accounts"]],decls:117,vars:15,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],["href","","data-bs-toggle","modal","data-bs-target","#addClientModal",1,"btn","btn-outline-primary","float-right"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["type","text","formControlName","firstname","placeholder","Firstname"],["type","text","formControlName","lastname","placeholder","Lastname"],["type","text","formControlName","email","placeholder","Email"],["formControlName","role"],["value","","disabled",""],["style","color: black;",3,"ngValue",4,"ngFor","ngForOf"],["class","aspect-square","src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],["type","tel","formControlName","phoneNumber","placeholder","Phone number"],["type","text","formControlName","address","placeholder","Address"],[4,"ngFor","ngForOf"],["id","addClientModal","tabindex","-1","aria-labelledby","addClientModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","addClientModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","row"],[1,"col"],[1,"form-group"],["for","firstname"],["type","text","formControlName","firstname","placeholder","Firstname","id","firstname",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],["for","lastname"],["type","text","formControlName","lastname","placeholder","Lastname","id","lastname",1,"form-control"],["src","assets/images/user.jpg"],["for","role"],["formControlName","role","id","role",1,"form-control"],["for","email"],["type","email","formControlName","email","placeholder","Email","id","email",1,"form-control"],["for","phoneNumber"],["type","tel","formControlName","phoneNumber","placeholder","Phone number","id","phoneNumber",1,"form-control"],["for","address"],["type","tel","formControlName","address","placeholder","Address","id","address",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],[2,"color","black",3,"ngValue"],["src","assets/images/check.png","alt","check","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],[1,"col-5","col-sm-5","col-md-4","col-lg-3","col-xl-3"],["width","28","height","28","src","assets/images/user.jpg","alt","",1,"rounded-circle","m-r-5"],["src","assets/images/delete.png","alt","delete",1,"aspect-square","action"],[1,"form-text","text-muted","text-danger"]],template:function(r,i){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4)(5,"b"),o._uU(6),o.qZA(),o._uU(7," Accounts "),o.qZA(),o.TgZ(8,"a",5),o._uU(9,"Add"),o.qZA()(),o.TgZ(10,"div",6)(11,"div",7)(12,"table",8)(13,"thead")(14,"tr")(15,"th"),o._uU(16,"Firstname"),o.TgZ(17,"span",9),o._uU(18,"*"),o.qZA()(),o.TgZ(19,"th"),o._uU(20,"Lastname"),o.TgZ(21,"span",9),o._uU(22,"*"),o.qZA()(),o.TgZ(23,"th"),o._uU(24,"Email"),o.TgZ(25,"span",9),o._uU(26,"*"),o.qZA()(),o.TgZ(27,"th"),o._uU(28,"Role"),o.TgZ(29,"span",9),o._uU(30,"*"),o.qZA()(),o._UZ(31,"th"),o.TgZ(32,"th"),o._uU(33,"Phone number"),o.qZA(),o.TgZ(34,"th"),o._uU(35,"Address"),o.qZA()()(),o.TgZ(36,"tbody")(37,"tr")(38,"td")(39,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(40,"input",11),o.qZA()(),o.TgZ(41,"td")(42,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(43,"input",12),o.qZA()(),o.TgZ(44,"td")(45,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(46,"input",13),o.qZA()(),o.TgZ(47,"td")(48,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(49,"select",14)(50,"option",15),o._uU(51,"Select role"),o.qZA(),o.YNc(52,OW,2,2,"option",16),o.qZA()()(),o.TgZ(53,"td"),o.YNc(54,RW,1,0,"img",17),o.qZA(),o.TgZ(55,"td")(56,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(57,"input",18),o.qZA()(),o.TgZ(58,"td")(59,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(60,"input",19),o.qZA()()(),o.YNc(61,MW,20,6,"tr",20),o.qZA()()()()()()(),o.TgZ(62,"div",21)(63,"div",22)(64,"div",23)(65,"div",24)(66,"h1",25),o._uU(67,"Add new account"),o.qZA(),o._UZ(68,"button",26),o.qZA(),o.TgZ(69,"form",10),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(70,"div",27)(71,"div",28)(72,"div",29)(73,"label",30),o._uU(74,"Firstname"),o.TgZ(75,"span",9),o._uU(76,"*"),o.qZA()(),o._UZ(77,"input",31),o.YNc(78,PW,2,0,"small",32),o.qZA(),o.TgZ(79,"div",29)(80,"label",33),o._uU(81,"Lastname"),o.TgZ(82,"span",9),o._uU(83,"*"),o.qZA()(),o._UZ(84,"input",34),o.YNc(85,FW,2,0,"small",32),o.qZA(),o.TgZ(86,"div"),o._UZ(87,"img",35),o.qZA()(),o.TgZ(88,"div",28)(89,"div",29)(90,"label",36),o._uU(91,"Role"),o.TgZ(92,"span",9),o._uU(93,"*"),o.qZA()(),o.TgZ(94,"select",37)(95,"option",15),o._uU(96,"Select role"),o.qZA(),o.YNc(97,LW,2,2,"option",16),o.qZA()(),o.TgZ(98,"div",29)(99,"label",38),o._uU(100,"Email"),o.TgZ(101,"span",9),o._uU(102,"*"),o.qZA()(),o._UZ(103,"input",39),o.qZA(),o.TgZ(104,"div",29)(105,"label",40),o._uU(106,"Phone number"),o.qZA(),o._UZ(107,"input",41),o.qZA(),o.TgZ(108,"div",29)(109,"label",42),o._uU(110,"Address"),o.qZA(),o._UZ(111,"input",43),o.qZA()()()(),o.TgZ(112,"div",44)(113,"button",45),o._uU(114,"Close"),o.qZA(),o.TgZ(115,"button",46),o.NdJ("click",function(){return i.onSubmit()}),o._uU(116,"Save "),o.qZA()()()()()),2&r&&(o.xp6(6),o.Oqu(null==i.accounts?null:i.accounts.length),o.xp6(33),o.Q6J("formGroup",i.accountForm),o.xp6(3),o.Q6J("formGroup",i.accountForm),o.xp6(3),o.Q6J("formGroup",i.accountForm),o.xp6(3),o.Q6J("formGroup",i.accountForm),o.xp6(4),o.Q6J("ngForOf",i.roles),o.xp6(2),o.Q6J("ngIf",i.accountForm.valid),o.xp6(2),o.Q6J("formGroup",i.accountForm),o.xp6(3),o.Q6J("formGroup",i.accountForm),o.xp6(2),o.Q6J("ngForOf",i.accounts),o.xp6(8),o.Q6J("formGroup",i.accountForm),o.xp6(9),o.Q6J("ngIf",i.accountForm.controls.firstname.touched&&(null==i.accountForm.controls.firstname.errors?null:i.accountForm.controls.firstname.errors.required)),o.xp6(7),o.Q6J("ngIf",i.accountForm.controls.lastname.touched&&(null==i.accountForm.controls.lastname.errors?null:i.accountForm.controls.lastname.errors.required)),o.xp6(12),o.Q6J("ngForOf",i.roles),o.xp6(18),o.Q6J("disabled",!i.accountForm.valid))},dependencies:[sr,fr,uc,Dy,$g,lc,Du,Tu,Kd,dc,Eu],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})()},{path:"settings",component:U8}]}];let BW=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=o.oAB({type:n});static#n=this.\u0275inj=o.cJS({imports:[XT.forRoot(UW,{scrollPositionRestoration:"enabled"}),XT]})}return n})(),VW=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&o._UZ(0,"router-outlet")},dependencies:[E_],encapsulation:2})}return n})(),ah=(()=>{class n{static#e=this.ACCOUNTS="accounts";static#t=this.CLIENTS="clients";static#n=this.PROJECTS="projects";static#r=this.RESOURCES="resources";static#i=this.CURRENCY_EXCHANGE="currency-exchanges";static#s=this.WORKING_DAYS="working-days"}return n})();var In=U(5813);function kO(){return(0,Sn.e)((n,e)=>{let t,r=!1;n.subscribe((0,ve.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var ft,Ui=U(2011),OO=(U(1451),U(3942)),Te=U(5861),so=U(9681),_c=U(4859),yc=U(1877),F=U(2090),jW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lh={},RO=RO||{},Zt=jW||self;function iS(){}function MO(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function kw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var PO="closure_uid_"+(1e9*Math.random()>>>0),$W=0;function GW(n,e,t){return n.call.apply(n.bind,arguments)}function qW(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function hs(n,e,t){return(hs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?GW:qW).apply(null,arguments)}function sS(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function fs(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return e.prototype[i].apply(r,c)}}function Qf(){this.s=this.s,this.o=this.o}var ZW={};Qf.prototype.s=!1,Qf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function HW(n){return Object.prototype.hasOwnProperty.call(n,PO)&&n[PO]||(n[PO]=++$W)}(this);delete ZW[n]}},Qf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fB=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},pB=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function gB(n){return Array.prototype.concat.apply([],arguments)}function FO(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function oS(n){return/^[\s\xa0]*$/.test(n)}var ao,mB=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function oo(n,e){return-1!=n.indexOf(e)}function LO(n,e){return n<e?-1:n>e?1:0}e:{var _B=Zt.navigator;if(_B){var yB=_B.userAgent;if(yB){ao=yB;break e}}ao=""}function UO(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function vB(n){const e={};for(const t in n)e[t]=n[t];return e}var bB="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wB(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<bB.length;s++)t=bB[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function BO(n){return BO[" "](n),n}BO[" "]=iS;var aS,n,YW=oo(ao,"Opera"),Qy=oo(ao,"Trident")||oo(ao,"MSIE"),CB=oo(ao,"Edge"),VO=CB||Qy,TB=oo(ao,"Gecko")&&!(oo(ao.toLowerCase(),"webkit")&&!oo(ao,"Edge"))&&!(oo(ao,"Trident")||oo(ao,"MSIE"))&&!oo(ao,"Edge"),QW=oo(ao.toLowerCase(),"webkit")&&!oo(ao,"Edge");function EB(){var n=Zt.document;return n?n.documentMode:void 0}e:{var jO="",HO=(n=ao,TB?/rv:([^\);]+)(\)|;)/.exec(n):CB?/Edge\/([\d\.]+)/.exec(n):Qy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):QW?/WebKit\/(\S+)/.exec(n):YW?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(HO&&(jO=HO?HO[1]:""),Qy){var $O=EB();if(null!=$O&&$O>parseFloat(jO)){aS=String($O);break e}}aS=jO}var JW={};var e5=Zt.document&&Qy&&(EB()||parseInt(aS,10))||void 0,t5=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Zt.addEventListener("test",iS,e),Zt.removeEventListener("test",iS,e)}catch{}return n}();function Ms(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Ow(n,e){if(Ms.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(TB){e:{try{BO(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:n5[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ow.Z.h.call(this)}}Ms.prototype.h=function(){this.defaultPrevented=!0},fs(Ow,Ms);var n5={2:"touch",3:"pen",4:"mouse"};Ow.prototype.h=function(){Ow.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Rw="closure_listenable_"+(1e6*Math.random()|0),r5=0;function i5(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++r5,this.ca=this.fa=!1}function lS(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function cS(n){this.src=n,this.g={},this.h=0}function qO(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=fB(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(lS(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function zO(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}cS.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=zO(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new i5(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var ZO="closure_lm_"+(1e6*Math.random()|0),WO={};function SB(n,e,t,r,i){if(r&&r.once)return AB(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)SB(n,e[s],t,r,i);return null}return t=JO(t),n&&n[Rw]?n.N(e,t,kw(r)?!!r.capture:!!r,i):IB(n,e,t,!1,r,i)}function IB(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var c=kw(i)?!!i.capture:!!i,d=YO(n);if(d||(n[ZO]=d=new cS(n)),(t=d.add(e,t,r,c,s)).proxy)return t;if(r=function s5(){var e=o5;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)t5||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(xB(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function AB(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)AB(n,e[s],t,r,i);return null}return t=JO(t),n&&n[Rw]?n.O(e,t,kw(r)?!!r.capture:!!r,i):IB(n,e,t,!0,r,i)}function NB(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)NB(n,e[s],t,r,i);else r=kw(r)?!!r.capture:!!r,t=JO(t),n&&n[Rw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=zO(s=n.g[e],t,r,i))&&(lS(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=YO(n))&&(e=n.g[e.toString()],n=-1,e&&(n=zO(e,t,r,i)),(t=-1<n?e[n]:null)&&KO(t))}function KO(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Rw])qO(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(xB(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=YO(e))?(qO(t,n),0==t.h&&(t.src=null,e[ZO]=null)):lS(n)}}}function xB(n){return n in WO?WO[n]:WO[n]="on"+n}function o5(n,e){if(n.ca)n=!0;else{e=new Ow(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&KO(n),n=t.call(r,e)}return n}function YO(n){return(n=n[ZO])instanceof cS?n:null}var QO="__closure_events_fn_"+(1e9*Math.random()>>>0);function JO(n){return"function"==typeof n?n:(n[QO]||(n[QO]=function(e){return n.handleEvent(e)}),n[QO])}function Qi(){Qf.call(this),this.i=new cS(this),this.P=this,this.I=null}function ps(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ms(e,n);else if(e instanceof Ms)e.target=e.target||n;else{var i=e;wB(e=new Ms(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var c=e.g=t[s];i=uS(c,r,!0,e)&&i}if(i=uS(c=e.g=n,r,!0,e)&&i,i=uS(c,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=uS(c=e.g=t[s],r,!1,e)&&i}function uS(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var c=e[s];if(c&&!c.ca&&c.capture==t){var d=c.listener,f=c.ia||c.src;c.fa&&qO(n.i,c),i=!1!==d.call(f,r)&&i}}return i&&!r.defaultPrevented}fs(Qi,Qf),Qi.prototype[Rw]=!0,Qi.prototype.removeEventListener=function(n,e,t,r){NB(this,n,e,t,r)},Qi.prototype.M=function(){if(Qi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)lS(t[r]);delete n.g[e],n.h--}}this.I=null},Qi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Qi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var XO=Zt.JSON.stringify;function a5(){var n=OB;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var tR,kB=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new c5,n=>n.reset());class c5{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function u5(n){Zt.setTimeout(()=>{throw n},0)}function eR(n,e){tR||function d5(){var n=Zt.Promise.resolve(void 0);tR=function(){n.then(h5)}}(),nR||(tR(),nR=!0),OB.add(n,e)}var nR=!1,OB=new class l5{constructor(){this.h=this.g=null}add(e,t){const r=kB.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function h5(){for(var n;n=a5();){try{n.h.call(n.g)}catch(t){u5(t)}var e=kB;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}nR=!1}function dS(n,e){Qi.call(this),this.h=n||1,this.g=e||Zt,this.j=hs(this.kb,this),this.l=Date.now()}function rR(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function iR(n,e,t){if("function"==typeof n)t&&(n=hs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=hs(n.handleEvent,n)}return 2147483647<Number(e)?-1:Zt.setTimeout(n,e||0)}function RB(n){n.g=iR(()=>{n.g=null,n.i&&(n.i=!1,RB(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}fs(dS,Qi),(ft=dS.prototype).da=!1,ft.S=null,ft.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ps(this,"tick"),this.da&&(rR(this),this.start()))}},ft.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.M=function(){dS.Z.M.call(this),rR(this),delete this.g};class f5 extends Qf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:RB(this)}M(){super.M(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mw(n){Qf.call(this),this.h=n,this.g={}}fs(Mw,Qf);var MB=[];function PB(n,e,t,r){Array.isArray(t)||(t&&(MB[0]=t.toString()),t=MB);for(var i=0;i<t.length;i++){var s=SB(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function FB(n){UO(n.g,function(e,t){this.g.hasOwnProperty(t)&&KO(e)},n),n.g={}}function hS(){this.g=!0}function Jy(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _5(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<i.length;c++)i[c]=""}}}return XO(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Mw.prototype.M=function(){Mw.Z.M.call(this),FB(this)},Mw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hS.prototype.Aa=function(){this.g=!1},hS.prototype.info=function(){};var lm={},LB=null;function fS(){return LB=LB||new Qi}function UB(n){Ms.call(this,lm.Ma,n)}function Pw(n){const e=fS();ps(e,new UB(e,n))}function BB(n,e){Ms.call(this,lm.STAT_EVENT,n),this.stat=e}function lo(n){const e=fS();ps(e,new BB(e,n))}function VB(n,e){Ms.call(this,lm.Na,n),this.size=e}function Fw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){n()},e)}lm.Ma="serverreachability",fs(UB,Ms),lm.STAT_EVENT="statevent",fs(BB,Ms),lm.Na="timingevent",fs(VB,Ms);var pS={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},jB={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function sR(){}function $B(){}sR.prototype.h=null;var lR,Lw={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function oR(){Ms.call(this,"d")}function aR(){Ms.call(this,"c")}function gS(){}function Uw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Mw(this),this.P=y5,this.W=new dS(n=VO?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new GB}function GB(){this.i=null,this.g="",this.h=!1}fs(oR,Ms),fs(aR,Ms),fs(gS,sR),gS.prototype.g=function(){return new XMLHttpRequest},gS.prototype.i=function(){return{}},lR=new gS;var y5=45e3,cR={},mS={};function uR(n,e,t){n.K=1,n.v=wS(ch(e)),n.s=t,n.U=!0,qB(n,null)}function qB(n,e){n.F=Date.now(),Bw(n),n.A=ch(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),eV(t.h,"t",r),n.C=0,t=n.l.H,n.h=new GB,n.g=TV(n.l,t?e:null,!n.s),0<n.O&&(n.L=new f5(hs(n.Ia,n,n.g),n.O)),PB(n.V,n.g,"readystatechange",n.gb),e=n.H?vB(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Pw(1),function p5(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var c="",d=s.split("&"),f=0;f<d.length;f++){var y=d[f].split("=");if(1<y.length){var w=y[0];y=y[1];var E=w.split("_");c=2<=E.length&&"type"==E[1]?c+(w+"=")+y+"&":c+(w+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function zB(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function ZB(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=v5(n,t),i==mS){4==e&&(n.o=4,lo(14),r=!1),Jy(n.j,n.m,null,"[Incomplete Response]");break}if(i==cR){n.o=4,lo(15),Jy(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Jy(n.j,n.m,i,null),dR(n,i)}zB(n)&&i!=mS&&i!=cR&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,lo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),CR(e),e.L=!0,lo(11))):(Jy(n.j,n.m,t,"[Invalid Chunked Response]"),cm(n),Vw(n))}function v5(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?mS:(t=Number(e.substring(t,r)),isNaN(t)?cR:(r+=1)+t>e.length?mS:(e=e.substr(r,t),n.C=r+t,e))}function Bw(n){n.Y=Date.now()+n.P,WB(n,n.P)}function WB(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Fw(hs(n.eb,n),e)}function _S(n){n.B&&(Zt.clearTimeout(n.B),n.B=null)}function Vw(n){0==n.l.G||n.I||vV(n.l,n)}function cm(n){_S(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,rR(n.W),FB(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function dR(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||pR(t.i,n)))if(t.I=n.N,!n.J&&pR(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;IS(t),DS(t)}wR(t),lo(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Fw(hs(t.ab,t),6e3));if(1>=rV(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else hm(t,11)}else if((n.J||t.g==n)&&IS(t),!oS(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const w=y[3];null!=w&&(t.ma=w,t.h.info("VER="+t.ma));const E=y[4];null!=E&&(t.za=E,t.h.info("SVER="+t.za));const A=y[5];null!=A&&"number"==typeof A&&0<A&&(t.K=r=1.5*A,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const k=n.g;if(k){const M=k.g?k.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(M){var s=r.i;!s.g&&(oo(M,"spdy")||oo(M,"quic")||oo(M,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(gR(s,s.h),s.h=null))}if(r.D){const V=k.g?k.g.getResponseHeader("X-HTTP-Session-Id"):null;V&&(r.sa=V,Er(r.F,r.D,V))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=CV(r,r.H?r.la:null,r.W),c.J){iV(r.i,c);var d=c,f=r.K;f&&d.setTimeout(f),d.B&&(_S(d),Bw(d)),r.g=c}else _V(r);0<t.l.length&&SS(t)}else"stop"!=y[0]&&"close"!=y[0]||hm(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?hm(t,7):vR(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}Pw(4)}catch{}}function hR(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(MO(n)||"string"==typeof n)pB(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(MO(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function b5(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(MO(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function Xy(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Xy)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function fR(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];um(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)um(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function um(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ft=Uw.prototype).setTimeout=function(n){this.P=n},ft.gb=function(n){n=n.target;const e=this.L;e&&3==uh(n)?e.l():this.Ia(n)},ft.Ia=function(n){try{if(n==this.g)e:{const w=uh(this.g);var e=this.g.Da();const E=this.g.ba();if(!(3>w)&&(3!=w||VO||this.g&&(this.h.h||this.g.ga()||hV(this.g)))){this.I||4!=w||7==e||Pw(8==e||0>=E?3:2),_S(this);var t=this.g.ba();this.N=t;t:if(zB(this)){var r=hV(this.g);n="";var i=r.length,s=4==uh(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){cm(this),Vw(this);var c="";break t}this.h.i=new Zt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function g5(n,e,t,r,i,s,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.X,w,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oS(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,lo(12),cm(this),Vw(this);break e}Jy(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,dR(this,t)}this.U?(ZB(this,w,c),VO&&this.i&&3==w&&(PB(this.V,this.W,"tick",this.fb),this.W.start())):(Jy(this.j,this.m,c,null),dR(this,c)),4==w&&cm(this),this.i&&!this.I&&(4==w?vV(this.l,this):(this.i=!1,Bw(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,lo(12)):(this.o=0,lo(13)),cm(this),Vw(this)}}}catch{}},ft.fb=function(){if(this.g){var n=uh(this.g),e=this.g.ga();this.C<e.length&&(_S(this),ZB(this,n,e),this.i&&4!=n&&Bw(this))}},ft.cancel=function(){this.I=!0,cm(this)},ft.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function m5(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Pw(3),lo(17)),cm(this),this.o=2,Vw(this)):WB(this,this.Y-n)},(ft=Xy.prototype).R=function(){fR(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ft.T=function(){return fR(this),this.g.concat()},ft.get=function(n,e){return um(this.h,n)?this.h[n]:e},ft.set=function(n,e){um(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ft.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var KB=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function dm(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof dm){this.g=void 0!==e?e:n.g,yS(this,n.j),this.s=n.s,vS(this,n.i),bS(this,n.m),this.l=n.l,e=n.h;var t=new $w;t.i=e.i,e.g&&(t.g=new Xy(e.g),t.h=e.h),YB(this,t),this.o=n.o}else n&&(t=String(n).match(KB))?(this.g=!!e,yS(this,t[1]||"",!0),this.s=jw(t[2]||""),vS(this,t[3]||"",!0),bS(this,t[4]),this.l=jw(t[5]||"",!0),YB(this,t[6]||"",!0),this.o=jw(t[7]||"")):(this.g=!!e,this.h=new $w(null,this.g))}function ch(n){return new dm(n)}function yS(n,e,t){n.j=t?jw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function vS(n,e,t){n.i=t?jw(e,!0):e}function bS(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function YB(n,e,t){e instanceof $w?(n.h=e,function N5(n,e){e&&!n.j&&(Jf(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(JB(this,r),eV(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Hw(e,I5)),n.h=new $w(e,n.g))}function Er(n,e,t){n.h.set(e,t)}function wS(n){return Er(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function jw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Hw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,E5),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function E5(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}dm.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Hw(e,QB,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Hw(e,QB,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Hw(t,"/"==t.charAt(0)?S5:D5,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Hw(t,A5)),n.join("")};var QB=/[#\/\?@]/g,D5=/[#\?:]/g,S5=/[#\?]/g,I5=/[#\?@]/g,A5=/#/g;function $w(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Jf(n){n.g||(n.g=new Xy,n.h=0,n.i&&function w5(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function JB(n,e){Jf(n),e=ev(n,e),um(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,um((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&fR(n)))}function XB(n,e){return Jf(n),e=ev(n,e),um(n.g.h,e)}function eV(n,e,t){JB(n,e),0<t.length&&(n.i=null,n.g.set(ev(n,e),FO(t)),n.h+=t.length)}function ev(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}(ft=$w.prototype).add=function(n,e){Jf(this),this.i=null,n=ev(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){Jf(this),this.g.forEach(function(t,r){pB(t,function(i){n.call(e,i,r,this)},this)},this)},ft.T=function(){Jf(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},ft.R=function(n){Jf(this);var e=[];if("string"==typeof n)XB(this,n)&&(e=gB(e,this.g.get(ev(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=gB(e,n[t])}return e},ft.set=function(n,e){return Jf(this),this.i=null,XB(this,n=ev(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var c=i;""!==r[s]&&(c+="="+encodeURIComponent(String(r[s]))),n.push(c)}}return this.i=n.join("&")};var x5=class{constructor(n,e){this.h=n,this.g=e}};function tV(n){this.l=n||k5,n=Zt.PerformanceNavigationTiming?0<(n=Zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Zt.g&&Zt.g.Ea&&Zt.g.Ea()&&Zt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var k5=10;function nV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function rV(n){return n.h?1:n.g?n.g.size:0}function pR(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function gR(n,e){n.g?n.g.add(e):n.h=e}function iV(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function sV(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return FO(n.i)}function mR(){}function O5(){this.g=new mR}function R5(n,e,t){const r=t||"";try{hR(n,function(i,s){let c=i;kw(i)&&(c=XO(i)),e.push(r+s+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function CS(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Gw(n){this.l=n.$b||null,this.j=n.ib||!1}function TS(n,e){Qi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=_R,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tV.prototype.cancel=function(){if(this.i=sV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},mR.prototype.stringify=function(n){return Zt.JSON.stringify(n,void 0)},mR.prototype.parse=function(n){return Zt.JSON.parse(n,void 0)},fs(Gw,sR),Gw.prototype.g=function(){return new TS(this.l,this.j)},Gw.prototype.i=function(n){return function(){return n}}({}),fs(TS,Qi);var _R=0;function oV(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function qw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,zw(n)}function zw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=TS.prototype).open=function(n,e){if(this.readyState!=_R)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,zw(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Zt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qw(this)),this.readyState=_R},ft.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,zw(this)),this.g&&(this.readyState=3,zw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;oV(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ft.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?qw(this):zw(this),3==this.readyState&&oV(this)}},ft.Ua=function(n){this.g&&(this.response=this.responseText=n,qw(this))},ft.Ta=function(n){this.g&&(this.response=n,qw(this))},ft.ha=function(){this.g&&qw(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(TS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var P5=Zt.JSON.parse;function Ci(n){Qi.call(this),this.headers=new Xy,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=aV,this.K=this.L=!1}fs(Ci,Qi);var aV="",F5=/^https?$/i,L5=["POST","PUT"];function B5(n){return"content-type"==n.toLowerCase()}function lV(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,cV(n),ES(n)}function cV(n){n.D||(n.D=!0,ps(n,"complete"),ps(n,"error"))}function uV(n){if(n.h&&typeof RO<"u"&&(!n.C[1]||4!=uh(n)||2!=n.ba()))if(n.v&&4==uh(n))iR(n.Fa,0,n);else if(ps(n,"readystatechange"),4==uh(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(KB)[1]||null;if(!i&&Zt.self&&Zt.self.location){var s=Zt.self.location.protocol;i=s.substr(0,s.length-1)}r=!F5.test(i?i.toLowerCase():"")}t=r}if(t)ps(n,"complete"),ps(n,"success");else{n.m=6;try{var c=2<uh(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",cV(n)}}finally{ES(n)}}}function ES(n,e){if(n.g){dV(n);const t=n.g,r=n.C[0]?iS:null;n.g=null,n.C=null,e||ps(n,"ready");try{t.onreadystatechange=r}catch{}}}function dV(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Zt.clearTimeout(n.A),n.A=null)}function uh(n){return n.g?n.g.readyState:0}function hV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case aV:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function yR(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function V5(n){let e="";return UO(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Er(n,e,t))}function Zw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function fV(n){this.za=0,this.l=[],this.h=new hS,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Zw("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Zw("baseRetryDelayMs",5e3,n),this.$a=Zw("retryDelaySeedMs",1e4,n),this.Ya=Zw("forwardChannelMaxRetries",2,n),this.ra=Zw("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new tV(n&&n.concurrentRequestLimit),this.Ca=new O5,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function vR(n){if(pV(n),3==n.G){var e=n.V++,t=ch(n.F);Er(t,"SID",n.J),Er(t,"RID",e),Er(t,"TYPE","terminate"),Ww(n,t),(e=new Uw(n,n.h,e,void 0)).K=2,e.v=wS(ch(t)),t=!1,Zt.navigator&&Zt.navigator.sendBeacon&&(t=Zt.navigator.sendBeacon(e.v.toString(),"")),!t&&Zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=TV(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Bw(e)}wV(n)}function DS(n){n.g&&(CR(n),n.g.cancel(),n.g=null)}function pV(n){DS(n),n.u&&(Zt.clearTimeout(n.u),n.u=null),IS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Zt.clearTimeout(n.m),n.m=null)}function bR(n,e){n.l.push(new x5(n.Za++,e)),3==n.G&&SS(n)}function SS(n){nV(n.i)||n.m||(n.m=!0,eR(n.Ha,n),n.C=0)}function gV(n,e){var t;t=e?e.m:n.V++;const r=ch(n.F);Er(r,"SID",n.J),Er(r,"RID",t),Er(r,"AID",n.U),Ww(n,r),n.o&&n.s&&yR(r,n.o,n.s),t=new Uw(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=mV(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),gR(n.i,t),uR(t,r,e)}function Ww(n,e){n.j&&hR({},function(t,r){Er(e,r,t)})}function mV(n,e,t){t=Math.min(n.l.length,t);var r=n.j?hs(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const c=["count="+t];-1==s?0<t?(s=i[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let d=!0;for(let f=0;f<t;f++){let y=i[f].h;const w=i[f].g;if(y-=s,0>y)s=Math.max(0,i[f].h-100),d=!1;else try{R5(w,c,"req"+y+"_")}catch{r&&r(w)}}if(d){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function _V(n){n.g||n.u||(n.Y=1,eR(n.Ga,n),n.A=0)}function wR(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Fw(hs(n.Ga,n),bV(n,n.A)),n.A++,0))}function CR(n){null!=n.B&&(Zt.clearTimeout(n.B),n.B=null)}function yV(n){n.g=new Uw(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ch(n.oa);Er(e,"RID","rpc"),Er(e,"SID",n.J),Er(e,"CI",n.N?"0":"1"),Er(e,"AID",n.U),Ww(n,e),Er(e,"TYPE","xmlhttp"),n.o&&n.s&&yR(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=wS(ch(e)),t.s=null,t.U=!0,qB(t,n)}function IS(n){null!=n.v&&(Zt.clearTimeout(n.v),n.v=null)}function vV(n,e){var t=null;if(n.g==e){IS(n),CR(n),n.g=null;var r=2}else{if(!pR(n.i,e))return;t=e.D,iV(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ps(r=fS(),new VB(r,t,e,i)),SS(n)}else _V(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function j5(n,e){return!(rV(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Fw(hs(n.Ha,n,e),bV(n,n.C)),n.C++,0)))}(n,e)||2==r&&wR(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:hm(n,5);break;case 4:hm(n,10);break;case 3:hm(n,6);break;default:hm(n,2)}}function bV(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function hm(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=hs(n.jb,n);t||(t=new dm("//www.google.com/images/cleardot.gif"),Zt.location&&"http"==Zt.location.protocol||yS(t,"https"),wS(t)),function M5(n,e){const t=new hS;if(Zt.Image){const r=new Image;r.onload=sS(CS,t,r,"TestLoadImage: loaded",!0,e),r.onerror=sS(CS,t,r,"TestLoadImage: error",!1,e),r.onabort=sS(CS,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=sS(CS,t,r,"TestLoadImage: timeout",!1,e),Zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else lo(2);n.G=0,n.j&&n.j.va(e),wV(n),pV(n)}function wV(n){n.G=0,n.I=-1,n.j&&((0!=sV(n.i).length||0!=n.l.length)&&(n.i.i.length=0,FO(n.l),n.l.length=0),n.j.ua())}function CV(n,e,t){let r=function C5(n){return n instanceof dm?ch(n):new dm(n,void 0)}(t);if(""!=r.i)e&&vS(r,e+"."+r.i),bS(r,r.m);else{const i=Zt.location;r=function T5(n,e,t,r){var i=new dm(null,void 0);return n&&yS(i,n),e&&vS(i,e),t&&bS(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&UO(n.aa,function(i,s){Er(r,s,i)}),t=n.sa,(e=n.D)&&t&&Er(r,e,t),Er(r,"VER",n.ma),Ww(n,r),r}function TV(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ci(t&&n.Ba&&!n.qa?new Gw({ib:!0}):n.qa)).L=n.H,e}function EV(){}function AS(){if(Qy&&!(10<=Number(e5)))throw Error("Environmental error: no available transport.")}function Ea(n,e){Qi.call(this),this.g=new fV(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!oS(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!oS(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new tv(this)}function DV(n){oR.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function SV(){aR.call(this),this.status=1}function tv(n){this.g=n}(ft=Ci.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lR.g(),this.C=function HB(n){return n.h||(n.h=n.i())}(this.u?this.u:lR),this.g.onreadystatechange=hs(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void lV(this,s)}n=t||"";const i=new Xy(this.headers);r&&hR(r,function(s,c){i.set(c,s)}),r=function WW(n){e:{var e=B5;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Zt.FormData&&n instanceof Zt.FormData,!(0<=fB(L5,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,c){this.g.setRequestHeader(c,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{dV(this),0<this.B&&((this.K=function U5(n){return Qy&&function XW(){return function KW(n){var e=JW;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=mB(String(aS)).split("."),t=mB("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",s=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=LO(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||LO(0==i[2].length,0==s[2].length)||LO(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hs(this.pa,this)):this.A=iR(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){lV(this,s)}},ft.pa=function(){typeof RO<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ps(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ps(this,"complete"),ps(this,"abort"),ES(this))},ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ES(this,!0)),Ci.Z.M.call(this)},ft.Fa=function(){this.s||(this.F||this.v||this.l?uV(this):this.cb())},ft.cb=function(){uV(this)},ft.ba=function(){try{return 2<uh(this)?this.g.status:-1}catch{return-1}},ft.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),P5(e)}},ft.Da=function(){return this.m},ft.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=fV.prototype).ma=8,ft.G=1,ft.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},ft.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Uw(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=vB(s),wB(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=mV(this,i,e),Er(t=ch(this.F),"RID",n),Er(t,"CVER",22),this.D&&Er(t,"X-HTTP-Session-Id",this.D),Ww(this,t),this.o&&s&&yR(t,this.o,s),gR(this.i,i),this.Ra&&Er(t,"TYPE","init"),this.ja?(Er(t,"$req",e),Er(t,"SID","null"),i.$=!0,uR(i,t,null)):uR(i,t,e),this.G=2}}else 3==this.G&&(n?gV(this,n):0==this.l.length||nV(this.i)||gV(this))},ft.Ga=function(){if(this.u=null,yV(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Fw(hs(this.bb,this),n)}},ft.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,lo(10),DS(this),yV(this))},ft.ab=function(){null!=this.v&&(this.v=null,DS(this),wR(this),lo(19))},ft.jb=function(n){n?(this.h.info("Successfully pinged google.com"),lo(2)):(this.h.info("Failed to ping google.com"),lo(1))},(ft=EV.prototype).xa=function(){},ft.wa=function(){},ft.va=function(){},ft.ua=function(){},ft.Oa=function(){},AS.prototype.g=function(n,e){return new Ea(n,e)},fs(Ea,Qi),Ea.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),eR(hs(n.hb,n,e))),lo(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=CV(n,null,n.W),SS(n)},Ea.prototype.close=function(){vR(this.g)},Ea.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,bR(this.g,e)}else this.v?((e={}).__data__=XO(n),bR(this.g,e)):bR(this.g,n)},Ea.prototype.M=function(){this.g.j=null,delete this.j,vR(this.g),delete this.g,Ea.Z.M.call(this)},fs(DV,oR),fs(SV,aR),fs(tv,EV),tv.prototype.xa=function(){ps(this.g,"a")},tv.prototype.wa=function(n){ps(this.g,new DV(n))},tv.prototype.va=function(n){ps(this.g,new SV(n))},tv.prototype.ua=function(){ps(this.g,"b")},AS.prototype.createWebChannel=AS.prototype.g,Ea.prototype.send=Ea.prototype.u,Ea.prototype.open=Ea.prototype.m,Ea.prototype.close=Ea.prototype.close,pS.NO_ERROR=0,pS.TIMEOUT=8,pS.HTTP_ERROR=6,jB.COMPLETE="complete",$B.EventType=Lw,Lw.OPEN="a",Lw.CLOSE="b",Lw.ERROR="c",Lw.MESSAGE="d",Qi.prototype.listen=Qi.prototype.N,Ci.prototype.listenOnce=Ci.prototype.O,Ci.prototype.getLastError=Ci.prototype.La,Ci.prototype.getLastErrorCode=Ci.prototype.Da,Ci.prototype.getStatus=Ci.prototype.ba,Ci.prototype.getResponseJson=Ci.prototype.Qa,Ci.prototype.getResponseText=Ci.prototype.ga,Ci.prototype.send=Ci.prototype.ea;var H5=lh.createWebChannelTransport=function(){return new AS},$5=lh.getStatEventTarget=function(){return fS()},TR=lh.ErrorCode=pS,G5=lh.EventType=jB,q5=lh.Event=lm,IV=lh.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},z5=lh.FetchXmlHttpFactory=Gw,NS=lh.WebChannel=$B,Z5=lh.XhrIo=Ci;const AV="@firebase/firestore";class Ji{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ji.UNAUTHENTICATED=new Ji(null),Ji.GOOGLE_CREDENTIALS=new Ji("google-credentials-uid"),Ji.FIRST_PARTY=new Ji("first-party-uid"),Ji.MOCK_USER=new Ji("mock-user");let nv="9.9.2";const Xf=new yc.Yd("@firebase/firestore");function ER(){return Xf.logLevel}function qe(n,...e){if(Xf.logLevel<=yc.in.DEBUG){const t=e.map(DR);Xf.debug(`Firestore (${nv}): ${n}`,...t)}}function hi(n,...e){if(Xf.logLevel<=yc.in.ERROR){const t=e.map(DR);Xf.error(`Firestore (${nv}): ${n}`,...t)}}function fm(n,...e){if(Xf.logLevel<=yc.in.WARN){const t=e.map(DR);Xf.warn(`Firestore (${nv}): ${n}`,...t)}}function DR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function pt(n="Unexpected state"){const e=`FIRESTORE (${nv}) INTERNAL ASSERTION FAILED: `+n;throw hi(e),new Error(e)}function $t(n,e){n||pt()}function ot(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends F.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class NV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Y5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ji.UNAUTHENTICATED))}shutdown(){}}class Q5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class J5{constructor(e){this.t=e,this.currentUser=Ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let c=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Xi,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=c;e.enqueueRetryable((0,Te.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},f=y=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>f(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?f(y):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Xi)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($t("string"==typeof r.accessToken),new NV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $t(null===e||"string"==typeof e),new Ji(e)}}class X5{constructor(e,t,r){this.type="FirstParty",this.user=Ji.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class eK{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new X5(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ji.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tK{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=s=>{null!=s.error&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.p;return this.p=s.token,qe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($t("string"==typeof t.token),this.p=t.token,new xV(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nK(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class kV{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=nK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Wt(n,e){return n<e?-1:n>e?1:0}function rv(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function OV(n){return n+"\0"}class Dr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Be(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Be(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Be(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Dr.fromMillis(Date.now())}static fromDate(e){return Dr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Dr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class jt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new jt(e)}static min(){return new jt(new Dr(0,0))}static max(){return new jt(new Dr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Kw{constructor(e,t,r){void 0===t?t=0:t>e.length&&pt(),void 0===r?r=e.length-t:r>e.length-t&&pt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Kw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Kw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),c=t.get(i);if(s<c)return-1;if(s>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gn extends Kw{construct(e,t,r){return new gn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Be(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new gn(t)}static emptyPath(){return new gn([])}}const rK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wr extends Kw{construct(e,t,r){return new Wr(e,t,r)}static isValidIdentifier(e){return rK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Be(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Be(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Be(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===d?(c=!c,i++):"."!==d||c?(r+=d,i++):(s(),i++)}if(s(),c)throw new Be(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wr(t)}static emptyPath(){return new Wr([])}}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(gn.fromString(e))}static fromName(e){return new rt(gn.fromString(e).popFirst(5))}static empty(){return new rt(gn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return gn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new gn(e.slice()))}}class xS{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function SR(n){return n.fields.find(e=>2===e.kind)}function pm(n){return n.fields.filter(e=>2!==e.kind)}xS.UNKNOWN_ID=-1;class kS{constructor(e,t){this.fieldPath=e,this.kind=t}}class Yw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Yw(0,Da.min())}}function RV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=jt.fromTimestamp(1e9===r?new Dr(t+1,0):new Dr(t,r));return new Da(i,rt.empty(),e)}function MV(n){return new Da(n.readTime,n.key,-1)}class Da{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Da(jt.min(),rt.empty(),-1)}static max(){return new Da(jt.max(),rt.empty(),-1)}}function IR(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=rt.comparator(n.documentKey,e.documentKey),0!==t?t:Wt(n.largestBatchId,e.largestBatchId))}const PV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ep(n){return AR.apply(this,arguments)}function AR(){return AR=(0,Te.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==PV)throw n;qe("LocalStore","Unexpectedly lost primary lease")}),AR.apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,s=0,c=!1;e.forEach(d=>{++i,d.next(()=>{++s,c&&s===i&&t()},f=>r(f))}),c=!0,s===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const s=e.length,c=new Array(s);let d=0;for(let f=0;f<s;f++){const y=f;t(e[y]).next(w=>{c[y]=w,++d,d===s&&r(c)},w=>i(w))}})}static doWhile(e,t){return new de((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class OS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Xi,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Qw(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=NR(r.target.error);this.T.reject(new Qw(e,i))}}static open(e,t,r,i){try{return new OS(t,e.transaction(i,r))}catch(s){throw new Qw(t,s)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(qe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new aK(t)}}class vc{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===vc.v((0,F.z$)())&&hi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return qe("SimpleDb","Removing database:",e),gm(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,F.hl)())return!1;if(vc.S())return!0;const e=(0,F.z$)(),t=vc.v(e),r=0<t&&t<10,i=vc.D(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,Te.Z)(function*(){return t.db||(qe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=c=>{r(c.target.result)},s.onblocked=()=>{i(new Qw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const d=c.target.error;i("VersionError"===d.name?new Be(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Be(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Qw(e,d))},s.onupgradeneeded=c=>{qe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.P.M(c.target.result,s.transaction,c.oldVersion,t.version).next(()=>{qe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.O&&(t.db.onversionchange=r=>t.O(r)),t.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Te.Z)(function*(){const c="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.k(e);const f=OS.open(s.db,e,c?"readonly":"readwrite",r),y=i(f).next(w=>(f.R(),w)).catch(w=>(f.abort(w),de.reject(w))).toPromise();return y.catch(()=>{}),yield f.A,y}catch(f){const y=f,w="FirebaseError"!==y.name&&d<3;if(qe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",w),s.close(),!w)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class oK{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return gm(this.$.delete())}}class Qw extends Be{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function tp(n){return"IndexedDbTransactionError"===n.name}class aK{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(qe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(qe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),gm(r)}add(e){return qe("SimpleDb","ADD",this.store.name,e,e),gm(this.store.add(e))}get(e){return gm(this.store.get(e)).next(t=>(void 0===t&&(t=null),qe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return qe("SimpleDb","DELETE",this.store.name,e),gm(this.store.delete(e))}count(){return qe("SimpleDb","COUNT",this.store.name),gm(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(c,d)=>{s.push(d)}).next(()=>s)}{const i=this.store.getAll(r.range);return new de((s,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{s(d.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((i,s)=>{r.onerror=c=>{s(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}W(e,t){qe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(s,c,d)=>d.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new de((r,i)=>{t.onerror=s=>{const c=NR(s.target.error);i(c)},t.onsuccess=s=>{const c=s.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}G(e,t){const r=[];return new de((i,s)=>{e.onerror=c=>{s(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void i();const f=new oK(d),y=t(d.primaryKey,d.value,f);if(y instanceof de){const w=y.catch(E=>(f.done(),de.reject(E)));r.push(w)}f.isDone?i():null===f.U?d.continue():d.continue(f.U)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function gm(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=NR(r.target.error);t(i)}})}let LV=!1;function NR(n){const e=vc.v((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return LV||(LV=!0,setTimeout(()=>{throw r},0)),r}}return n}class lK{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;qe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Te.Z)(function*(){t.task=null;try{qe("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){tp(r)?qe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ep(r)}yield t.Z(1)}))}}class cK{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Te.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,s=!0;return de.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return qe("IndexBackiller",`Processing collection: ${c}`),this.nt(e,c,i).next(d=>{i-=d,r.add(c)});s=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.st(i,s)).next(d=>(qe("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}st(e,t){let r=e;return t.changes.forEach((i,s)=>{const c=MV(s);IR(c,r)>0&&(r=c)}),new Da(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Uo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function UV(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mm(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function BV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Uo.ot=-1;class Kr{constructor(e,t){this.comparator=e,this.root=t||gs.EMPTY}insert(e,t){return new Kr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gs.BLACK,null,null))}remove(e){return new Kr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new RS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new RS(this.root,e,this.comparator,!1)}getReverseIterator(){return new RS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new RS(this.root,e,this.comparator,!0)}}class RS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gs{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??gs.RED,this.left=i??gs.EMPTY,this.right=s??gs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new gs(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return gs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return gs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}gs.EMPTY=null,gs.RED=!0,gs.BLACK=!1,gs.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new gs(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hn{constructor(e){this.comparator=e,this.data=new Kr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new VV(this.data.getIterator())}getIteratorFrom(e){return new VV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hn(this.comparator);return t.data=e,t}}class VV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function iv(n){return n.hasNext()?n.getNext():void 0}class Sa{constructor(e){this.fields=e,e.sort(Wr.comparator)}static empty(){return new Sa([])}unionWith(e){let t=new Hn(Wr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Sa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rv(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Bi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Bi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Bi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bi.EMPTY_BYTE_STRING=new Bi("");const dK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function np(n){if($t(!!n),"string"==typeof n){let e=0;const t=dK.exec(n);if($t(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yr(n.seconds),nanos:Yr(n.nanos)}}function Yr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function _m(n){return"string"==typeof n?Bi.fromBase64String(n):Bi.fromUint8Array(n)}function xR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function jV(n){const e=n.mapValue.fields.__previous_value__;return xR(e)?jV(e):e}function Jw(n){const e=np(n.mapValue.fields.__local_write_time__.timestampValue);return new Dr(e.seconds,e.nanos)}class hK{constructor(e,t,r,i,s,c,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=f}}class dh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new dh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof dh&&e.projectId===this.projectId&&e.database===this.database}}function Xw(n){return null==n}function eC(n){return 0===n&&1/n==-1/0}function HV(n){return"number"==typeof n&&Number.isInteger(n)&&!eC(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const rp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},MS={nullValue:"NULL_VALUE"};function ym(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xR(n)?4:zV(n)?9007199254740991:10:pt()}function Ou(n,e){if(n===e)return!0;const t=ym(n);if(t!==ym(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jw(n).isEqual(Jw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=np(r.timestampValue),c=np(i.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,_m(n.bytesValue).isEqual(_m(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Yr(r.geoPointValue.latitude)===Yr(i.geoPointValue.latitude)&&Yr(r.geoPointValue.longitude)===Yr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Yr(r.integerValue)===Yr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Yr(r.doubleValue),c=Yr(i.doubleValue);return s===c?eC(s)===eC(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return rv(n.arrayValue.values||[],e.arrayValue.values||[],Ou);case 10:return function(r,i){const s=r.mapValue.fields||{},c=i.mapValue.fields||{};if(UV(s)!==UV(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===c[d]||!Ou(s[d],c[d])))return!1;return!0}(n,e);default:return pt()}var i}function tC(n,e){return void 0!==(n.values||[]).find(t=>Ou(t,e))}function ip(n,e){if(n===e)return 0;const t=ym(n),r=ym(e);if(t!==r)return Wt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const c=Yr(i.integerValue||i.doubleValue),d=Yr(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,e);case 3:return $V(n.timestampValue,e.timestampValue);case 4:return $V(Jw(n),Jw(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(i,s){const c=_m(i),d=_m(s);return c.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const c=i.split("/"),d=s.split("/");for(let f=0;f<c.length&&f<d.length;f++){const y=Wt(c[f],d[f]);if(0!==y)return y}return Wt(c.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const c=Wt(Yr(i.latitude),Yr(s.latitude));return 0!==c?c:Wt(Yr(i.longitude),Yr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const c=i.values||[],d=s.values||[];for(let f=0;f<c.length&&f<d.length;++f){const y=ip(c[f],d[f]);if(y)return y}return Wt(c.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===rp.mapValue&&s===rp.mapValue)return 0;if(i===rp.mapValue)return 1;if(s===rp.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),f=s.fields||{},y=Object.keys(f);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const E=Wt(d[w],y[w]);if(0!==E)return E;const A=ip(c[d[w]],f[y[w]]);if(0!==A)return A}return Wt(d.length,y.length)}(n.mapValue,e.mapValue);default:throw pt()}}function $V(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=np(n),r=np(e),i=Wt(t.seconds,r.seconds);return 0!==i?i:Wt(t.nanos,r.nanos)}function sv(n){return kR(n)}function kR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=np(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?_m(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const c of r.values||[])s?s=!1:i+=",",i+=kR(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",c=!0;for(const d of i)c?c=!1:s+=",",s+=`${d}:${kR(r.fields[d])}`;return s+"}"}(n.mapValue):pt();var e}function vm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function OR(n){return!!n&&"integerValue"in n}function nC(n){return!!n&&"arrayValue"in n}function GV(n){return!!n&&"nullValue"in n}function qV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function PS(n){return!!n&&"mapValue"in n}function rC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return mm(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=rC(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rC(n.arrayValue.values[t]);return e}return Object.assign({},n)}function zV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function fK(n){return"nullValue"in n?MS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vm(dh.empty(),rt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:pt()}function pK(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vm(dh.empty(),rt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?rp:pt()}function ZV(n,e){const t=ip(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function WV(n,e){const t=ip(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ms{constructor(e){this.value=e}static empty(){return new ms({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!PS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rC(t)}setAll(e){let t=Wr.emptyPath(),r={},i=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=d.popLast()}c?r[d.lastSegment()]=rC(c):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());PS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ou(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];PS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){mm(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ms(rC(this.value))}}function KV(n){const e=[];return mm(n.fields,(t,r)=>{const i=new Wr([t]);if(PS(r)){const s=KV(r.mapValue).fields;if(0===s.length)e.push(i);else for(const c of s)e.push(i.child(c))}else e.push(i)}),new Sa(e)}class Xn{constructor(e,t,r,i,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=c}static newInvalidDocument(e){return new Xn(e,0,jt.min(),jt.min(),ms.empty(),0)}static newFoundDocument(e,t,r){return new Xn(e,1,t,jt.min(),r,0)}static newNoDocument(e,t){return new Xn(e,2,t,jt.min(),ms.empty(),0)}static newUnknownDocument(e,t){return new Xn(e,3,t,jt.min(),ms.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ms.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gK{constructor(e,t=null,r=[],i=[],s=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=c,this.endAt=d,this.ut=null}}function YV(n,e=null,t=[],r=[],i=null,s=null,c=null){return new gK(n,e,t,r,i,s,c)}function bm(n){const e=ot(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+sv(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Xw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>sv(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>sv(r)).join(",")),e.ut=t}return e.ut}function iC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!EK(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ou(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tj(n.startAt,e.startAt)&&tj(n.endAt,e.endAt)}function FS(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function LS(n,e){return n.filters.filter(t=>t instanceof _s&&t.field.isEqual(e))}function QV(n,e,t){let r=MS,i=!0;for(const s of LS(n,e)){let c=MS,d=!0;switch(s.op){case"<":case"<=":c=fK(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,d=!1;break;case"!=":case"not-in":c=MS}ZV({value:r,inclusive:i},{value:c,inclusive:d})<0&&(r=c,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];ZV({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function JV(n,e,t){let r=rp,i=!0;for(const s of LS(n,e)){let c=rp,d=!0;switch(s.op){case">=":case">":c=pK(s.value),d=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,d=!1;break;case"!=":case"not-in":c=rp}WV({value:r,inclusive:i},{value:c,inclusive:d})>0&&(r=c,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];WV({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class _s extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new _K(e,t,r):"array-contains"===t?new bK(e,r):"in"===t?new wK(e,r):"not-in"===t?new CK(e,r):"array-contains-any"===t?new TK(e,r):new _s(e,t,r)}static ct(e,t,r){return"in"===t?new yK(e,r):new vK(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(ip(t,this.value)):null!==t&&ym(this.value)===ym(t)&&this.at(ip(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class _K extends _s{constructor(e,t,r){super(e,t,r),this.key=rt.fromName(r.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.at(t)}}class yK extends _s{constructor(e,t){super(e,"in",t),this.keys=XV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vK extends _s{constructor(e,t){super(e,"not-in",t),this.keys=XV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function XV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>rt.fromName(r.referenceValue))}class bK extends _s{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nC(t)&&tC(t.arrayValue,this.value)}}class wK extends _s{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&tC(this.value.arrayValue,t)}}class CK extends _s{constructor(e,t){super(e,"not-in",t)}matches(e){if(tC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!tC(this.value.arrayValue,t)}}class TK extends _s{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>tC(this.value.arrayValue,r))}}class sp{constructor(e,t){this.position=e,this.inclusive=t}}class ov{constructor(e,t="asc"){this.field=e,this.dir=t}}function EK(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function ej(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],c=n.position[i];if(r=s.field.isKeyField()?rt.comparator(rt.fromName(c.referenceValue),t.key):ip(c,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function tj(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ou(n.position[t],e.position[t]))return!1;return!0}class hh{constructor(e,t=null,r=[],i=[],s=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=f,this.lt=null,this.ft=null}}function nj(n,e,t,r,i,s,c,d){return new hh(n,e,t,r,i,s,c,d)}function av(n){return new hh(n)}function rj(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function RR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function MR(n){for(const e of n.filters)if(e.ht())return e.field;return null}function PR(n){return null!==n.collectionGroup}function lv(n){const e=ot(n);if(null===e.lt){e.lt=[];const t=MR(e),r=RR(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new ov(t)),e.lt.push(new ov(Wr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new ov(Wr.keyField(),s))}}}return e.lt}function Bo(n){const e=ot(n);if(!e.ft)if("F"===e.limitType)e.ft=YV(e.path,e.collectionGroup,lv(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of lv(e))t.push(new ov(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new sp(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new sp(e.startAt.position,e.startAt.inclusive):null;e.ft=YV(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function US(n,e,t){return new hh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sC(n,e){return iC(Bo(n),Bo(e))&&n.limitType===e.limitType}function ij(n){return`${bm(Bo(n))}|lt:${n.limitType}`}function FR(n){return`Query(target=${function mK(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${sv(r.value)}`;var r}).join(", ")}]`),Xw(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>sv(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>sv(t)).join(",")),`Target(${e})`}(Bo(n))}; limitType=${n.limitType})`}function LR(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):rt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,c){const d=ej(i,s,c);return i.inclusive?d<=0:d<0}(t.startAt,lv(t),r)||t.endAt&&!function(i,s,c){const d=ej(i,s,c);return i.inclusive?d>=0:d>0}(t.endAt,lv(t),r)));var t,r}function sj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oj(n){return(e,t)=>{let r=!1;for(const i of lv(n)){const s=DK(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function DK(n,e,t){const r=n.field.isKeyField()?rt.comparator(e.key,t.key):function(i,s,c){const d=s.data.field(i),f=c.data.field(i);return null!==d&&null!==f?ip(d,f):pt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pt()}}function aj(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eC(e)?"-0":e}}function lj(n){return{integerValue:""+n}}function cj(n,e){return HV(e)?lj(e):aj(n,e)}class BS{constructor(){this._=void 0}}function SK(n,e,t){return n instanceof cv?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof wm?dj(n,e):n instanceof Cm?hj(n,e):function(r,i){const s=uj(r,i),c=fj(s)+fj(r._t);return OR(s)&&OR(r._t)?lj(c):aj(r.wt,c)}(n,e)}function IK(n,e,t){return n instanceof wm?dj(n,e):n instanceof Cm?hj(n,e):t}function uj(n,e){return n instanceof uv?OR(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class cv extends BS{}class wm extends BS{constructor(e){super(),this.elements=e}}function dj(n,e){const t=pj(e);for(const r of n.elements)t.some(i=>Ou(i,r))||t.push(r);return{arrayValue:{values:t}}}class Cm extends BS{constructor(e){super(),this.elements=e}}function hj(n,e){let t=pj(e);for(const r of n.elements)t=t.filter(i=>!Ou(i,r));return{arrayValue:{values:t}}}class uv extends BS{constructor(e,t){super(),this.wt=e,this._t=t}}function fj(n){return Yr(n.integerValue||n.doubleValue)}function pj(n){return nC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class oC{constructor(e,t){this.field=e,this.transform=t}}class NK{constructor(e,t){this.version=e,this.transformResults=t}}class Ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function VS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class jS{}function gj(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new hv(n.key,Ur.none()):new dv(n.key,n.data,Ur.none());{const t=n.data,r=ms.empty();let i=new Hn(Wr.comparator);for(let s of e.fields)if(!i.has(s)){let c=t.field(s);null===c&&s.length>1&&(s=s.popLast(),c=t.field(s)),null===c?r.delete(s):r.set(s,c),i=i.add(s)}return new fh(n.key,r,new Sa(i.toArray()),Ur.none())}}function xK(n,e,t){n instanceof dv?function(r,i,s){const c=r.value.clone(),d=yj(r.fieldTransforms,i,s.transformResults);c.setAll(d),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof fh?function(r,i,s){if(!VS(r.precondition,i))return void i.convertToUnknownDocument(s.version);const c=yj(r.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(_j(r)),d.setAll(c),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function aC(n,e,t,r){return n instanceof dv?function(i,s,c,d){if(!VS(i.precondition,s))return c;const f=i.value.clone(),y=vj(i.fieldTransforms,d,s);return f.setAll(y),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof fh?function(i,s,c,d){if(!VS(i.precondition,s))return c;const f=vj(i.fieldTransforms,d,s),y=s.data;return y.setAll(_j(i)),y.setAll(f),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(w=>w.field))}(n,e,t,r):(c=t,VS(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function kK(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=uj(r.transform,i||null);null!=s&&(null===t&&(t=ms.empty()),t.set(r.field,s))}return t||null}function mj(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&rv(t,r,(i,s)=>function AK(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof wm&&r instanceof wm||t instanceof Cm&&r instanceof Cm?rv(t.elements,r.elements,Ou):t instanceof uv&&r instanceof uv?Ou(t._t,r._t):t instanceof cv&&r instanceof cv);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class dv extends jS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fh extends jS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function _j(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function yj(n,e,t){const r=new Map;$t(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],c=s.transform,d=e.data.field(s.field);r.set(s.field,IK(c,d,t[i]))}return r}function vj(n,e,t){const r=new Map;for(const i of n){const s=i.transform,c=t.data.field(i.field);r.set(i.field,SK(s,c,e))}return r}class hv extends jS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UR extends jS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class OK{constructor(e){this.count=e}}var Ti,mn;function bj(n){switch(n){default:return pt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function wj(n){if(void 0===n)return hi("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Ti.OK:return ge.OK;case Ti.CANCELLED:return ge.CANCELLED;case Ti.UNKNOWN:return ge.UNKNOWN;case Ti.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Ti.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Ti.INTERNAL:return ge.INTERNAL;case Ti.UNAVAILABLE:return ge.UNAVAILABLE;case Ti.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Ti.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Ti.NOT_FOUND:return ge.NOT_FOUND;case Ti.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Ti.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Ti.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Ti.ABORTED:return ge.ABORTED;case Ti.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Ti.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Ti.DATA_LOSS:return ge.DATA_LOSS;default:return pt()}}(mn=Ti||(Ti={}))[mn.OK=0]="OK",mn[mn.CANCELLED=1]="CANCELLED",mn[mn.UNKNOWN=2]="UNKNOWN",mn[mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mn[mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mn[mn.NOT_FOUND=5]="NOT_FOUND",mn[mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",mn[mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",mn[mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",mn[mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mn[mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mn[mn.ABORTED=10]="ABORTED",mn[mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",mn[mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",mn[mn.INTERNAL=13]="INTERNAL",mn[mn.UNAVAILABLE=14]="UNAVAILABLE",mn[mn.DATA_LOSS=15]="DATA_LOSS";class op{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mm(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return BV(this.inner)}size(){return this.innerSize}}const RK=new Kr(rt.comparator);function Vo(){return RK}const Cj=new Kr(rt.comparator);function lC(...n){let e=Cj;for(const t of n)e=e.insert(t.key,t);return e}function Tj(n){let e=Cj;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ru(){return cC()}function Ej(){return cC()}function cC(){return new op(n=>n.toString(),(n,e)=>n.isEqual(e))}const MK=new Kr(rt.comparator),PK=new Hn(rt.comparator);function Jt(...n){let e=PK;for(const t of n)e=e.add(t);return e}const FK=new Hn(Wt);function HS(){return FK}class uC{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,dC.createSynthesizedTargetChangeForCurrentChange(e,t)),new uC(jt.min(),r,HS(),Vo(),Jt())}}class dC{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new dC(Bi.EMPTY_BYTE_STRING,t,Jt(),Jt(),Jt())}}class $S{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class Dj{constructor(e,t){this.targetId=e,this.It=t}}class Sj{constructor(e,t,r=Bi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ij{constructor(){this.Tt=0,this.Et=Nj(),this.At=Bi.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Jt(),t=Jt(),r=Jt();return this.Et.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:pt()}}),new dC(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=Nj()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class LK{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=Vo(),this.Bt=Aj(),this.Lt=new Hn(Wt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:pt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const s=i.target;if(FS(s))if(0===r){const c=new rt(s.path);this.Kt(t,c,Xn.newNoDocument(c,jt.min()))}else $t(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((s,c)=>{const d=this.Ht(c);if(d){if(s.current&&FS(d.target)){const f=new rt(d.target.path);null!==this.$t.get(f)||this.Xt(c,f)||this.Kt(c,f,Xn.newNoDocument(f,e))}s.vt&&(t.set(c,s.St()),s.Dt())}});let r=Jt();this.Bt.forEach((s,c)=>{let d=!0;c.forEachWhile(f=>{const y=this.Ht(f);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.$t.forEach((s,c)=>c.setReadTime(e));const i=new uC(e,t,this.Lt,this.$t,r);return this.$t=Vo(),this.Bt=Aj(),this.Lt=new Hn(Wt),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Ij,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Hn(Wt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||qe("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new Ij),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function Aj(){return new Kr(rt.comparator)}function Nj(){return new Kr(rt.comparator)}const UK={asc:"ASCENDING",desc:"DESCENDING"},BK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class VK{constructor(e,t){this.databaseId=e,this.dt=t}}function hC(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xj(n,e){return n.dt?e.toBase64():e.toUint8Array()}function jK(n,e){return hC(n,e.toTimestamp())}function es(n){return $t(!!n),jt.fromTimestamp(function(e){const t=np(e);return new Dr(t.seconds,t.nanos)}(n))}function BR(n,e){return(t=n,new gn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function kj(n){const e=gn.fromString(n);return $t(Vj(e)),e}function fC(n,e){return BR(n.databaseId,e.path)}function Mu(n,e){const t=kj(e);if(t.get(1)!==n.databaseId.projectId)throw new Be(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Be(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(Rj(t))}function VR(n,e){return BR(n.databaseId,e)}function Oj(n){const e=kj(n);return 4===e.length?gn.emptyPath():Rj(e)}function pC(n){return new gn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Rj(n){return $t(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Mj(n,e,t){return{name:fC(n,e),fields:t.value.mapValue.fields}}function Pj(n,e,t){const r=Mu(n,e.name),i=es(e.updateTime),s=new ms({mapValue:{fields:e.fields}}),c=Xn.newFoundDocument(r,i,s);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function gC(n,e){let t;if(e instanceof dv)t={update:Mj(n,e.key,e.value)};else if(e instanceof hv)t={delete:fC(n,e.key)};else if(e instanceof fh)t={update:Mj(n,e.key,e.data),updateMask:YK(e.fieldMask)};else{if(!(e instanceof UR))return pt();t={verify:fC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const c=s.transform;if(c instanceof cv)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof wm)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Cm)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof uv)return{fieldPath:s.field.canonicalString(),increment:c._t};throw pt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:jK(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:pt()),t;var i}function jR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Ur.updateTime(es(i.updateTime)):void 0!==i.exists?Ur.exists(i.exists):Ur.none():Ur.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,c){let d=null;"setToServerValue"in c?($t("REQUEST_TIME"===c.setToServerValue),d=new cv):"appendMissingElements"in c?d=new wm(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new Cm(c.removeAllFromArray.values||[]):"increment"in c?d=new uv(s,c.increment):pt();const f=Wr.fromServerFormat(c.fieldPath);return new oC(f,d)}(n,i)):[];var i;if(e.update){const i=Mu(n,e.update.name),s=new ms({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Sa((e.updateMask.fieldPaths||[]).map(y=>Wr.fromServerFormat(y)));return new fh(i,s,c,t,r)}return new dv(i,s,t,r)}if(e.delete){const i=Mu(n,e.delete);return new hv(i,t)}if(e.verify){const i=Mu(n,e.verify);return new UR(i,t)}return pt()}function Fj(n,e){return{documents:[VR(n,e.path)]}}function Lj(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=VR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=VR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0===f.length)return;const y=f.map(w=>function(E){if("=="===E.op){if(qV(E.value))return{unaryFilter:{field:fv(E.field),op:"IS_NAN"}};if(GV(E.value))return{unaryFilter:{field:fv(E.field),op:"IS_NULL"}}}else if("!="===E.op){if(qV(E.value))return{unaryFilter:{field:fv(E.field),op:"IS_NOT_NAN"}};if(GV(E.value))return{unaryFilter:{field:fv(E.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fv(E.field),op:ZK(E.op),value:E.value}}}(w));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(f){if(0!==f.length)return f.map(y=>{return{field:fv((w=y).field),direction:zK(w.dir)};var w})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const c=(y=e.limit,n.dt||Xw(y)?y:{value:y});var y,d,f;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function Uj(n){let e=Oj(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){$t(1===r);const w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let s=[];t.where&&(s=Bj(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(w=>{return new ov(pv((E=w).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let d=null;t.limit&&(d=function(w){let E;return E="object"==typeof w?w.value:w,Xw(E)?null:E}(t.limit));let f=null;var w;t.startAt&&(f=new sp((w=t.startAt).values||[],!!w.before));let y=null;return t.endAt&&(y=function(w){return new sp(w.values||[],!w.before)}(t.endAt)),nj(e,i,c,s,d,"F",f,y)}function Bj(n){return n?void 0!==n.unaryFilter?[KK(n)]:void 0!==n.fieldFilter?[WK(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Bj(e)).reduce((e,t)=>e.concat(t)):pt():[]}function zK(n){return UK[n]}function ZK(n){return BK[n]}function fv(n){return{fieldPath:n.canonicalString()}}function pv(n){return Wr.fromServerFormat(n.fieldPath)}function WK(n){return _s.create(pv(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(n.fieldFilter.op),n.fieldFilter.value)}function KK(n){switch(n.unaryFilter.op){case"IS_NAN":const e=pv(n.unaryFilter.field);return _s.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=pv(n.unaryFilter.field);return _s.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=pv(n.unaryFilter.field);return _s.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=pv(n.unaryFilter.field);return _s.create(i,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}function YK(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Vj(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function co(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jj(e)),e=QK(n.get(t),e);return jj(e)}function QK(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function jj(n){return n+"\x01\x01"}function Pu(n){const e=n.length;if($t(e>=2),2===e)return $t("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),gn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const c=n.indexOf("\x01",s);switch((c<0||c>t)&&pt(),n.charAt(c+1)){case"\x01":const d=n.substring(s,c);let f;0===i.length?f=d:(i+=d,f=i,i=""),r.push(f);break;case"\x10":i+=n.substring(s,c),i+="\0";break;case"\x11":i+=n.substring(s,c+1);break;default:pt()}s=c+2}return new gn(r)}const Hj=["userId","batchId"];function GS(n,e){return[n,co(e)]}function $j(n,e,t){return[n,co(e),t]}const JK={},XK=["prefixPath","collectionGroup","readTime","documentId"],e7=["prefixPath","collectionGroup","documentId"],t7=["collectionGroup","readTime","prefixPath","documentId"],n7=["canonicalId","targetId"],r7=["targetId","path"],i7=["path","targetId"],s7=["collectionId","parent"],o7=["indexId","uid"],a7=["uid","sequenceNumber"],l7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],c7=["indexId","uid","orderedDocumentKey"],u7=["userId","collectionPath","documentId"],d7=["userId","collectionPath","largestBatchId"],h7=["userId","collectionGroup","largestBatchId"],Gj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],f7=[...Gj,"documentOverlays"],qj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zj=qj,p7=[...zj,"indexConfiguration","indexState","indexEntries"];class HR extends FV{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function ts(n,e){const t=ot(n);return vc.N(t.ee,e)}class $R{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&xK(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=aC(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=aC(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Ej();return this.mutations.forEach(i=>{const s=e.get(i.key),c=s.overlayedDocument;let d=this.applyToLocalView(c,s.mutatedFields);d=t.has(i.key)?null:d;const f=gj(c,d);null!==f&&r.set(i.key,f),c.isValidDocument()||c.convertToNoDocument(jt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jt())}isEqual(e){return this.batchId===e.batchId&&rv(this.mutations,e.mutations,(t,r)=>mj(t,r))&&rv(this.baseMutations,e.baseMutations,(t,r)=>mj(t,r))}}class GR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){$t(e.mutations.length===r.length);let i=MK;const s=e.mutations;for(let c=0;c<s.length;c++)i=i.insert(s[c].key,r[c].version);return new GR(e,t,r,i)}}class qR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ap{constructor(e,t,r,i,s=jt.min(),c=jt.min(),d=Bi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(e){return new ap(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ap(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ap(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Zj{constructor(e){this.ne=e}}function Wj(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:qS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:fC(i=n.ne,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:hC(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Tm(e.version)};else{if(!e.isUnknownDocument())return pt();r.unknownDocument={path:t.path.toArray(),version:Tm(e.version)}}var i,s;return r}function qS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Tm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Em(n){const e=new Dr(n.seconds,n.nanoseconds);return jt.fromTimestamp(e)}function Dm(n,e){const t=(e.baseMutations||[]).map(s=>jR(n.ne,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>jR(n.ne,s)),i=Dr.fromMillis(e.localWriteTimeMs);return new $R(e.batchId,i,t,r)}function mC(n){const e=Em(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Em(n.lastLimboFreeSnapshotVersion):jt.min();let r;var i;return void 0!==n.query.documents?($t(1===(i=n.query).documents.length),r=Bo(av(Oj(i.documents[0])))):r=Bo(Uj(n.query)),new ap(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Bi.fromBase64String(n.resumeToken))}function Kj(n,e){const t=Tm(e.snapshotVersion),r=Tm(e.lastLimboFreeSnapshotVersion);let i;i=FS(e.target)?Fj(n.ne,e.target):Lj(n.ne,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bm(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function zR(n){const e=Uj({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?US(e,e.limit,"L"):e}function ZR(n,e){return new qR(e.largestBatchId,jR(n.ne,e.overlayMutation))}function Yj(n,e){const t=e.path.lastSegment();return[n,co(e.path.popLast()),t]}function Qj(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Tm(r.readTime),documentKey:co(r.documentKey.path),largestBatchId:r.largestBatchId}}class m7{getBundleMetadata(e,t){return Jj(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Em(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Jj(e).put({bundleId:(r=t).id,createTime:Tm(es(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Xj(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:zR(i.bundledQuery),readTime:Em(i.readTime)};var i})}saveNamedQuery(e,t){return Xj(e).put({name:(r=t).name,readTime:Tm(es(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Jj(n){return ts(n,"bundles")}function Xj(n){return ts(n,"namedQueries")}class zS{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new zS(e,t.uid||"")}getOverlay(e,t){return _C(e).get(Yj(this.userId,t)).next(r=>r?ZR(this.wt,r):null)}getOverlays(e,t){const r=Ru();return de.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,c)=>{const d=new qR(t,c);i.push(this.ie(e,d))}),de.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(co(c.getCollectionPath())));const s=[];return i.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);s.push(_C(e).W("collectionPathOverlayIndex",d))}),de.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Ru(),s=co(t),c=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return _C(e).K("collectionPathOverlayIndex",c).next(d=>{for(const f of d){const y=ZR(this.wt,f);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Ru();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _C(e).J({index:"collectionGroupOverlayIndex",range:d},(f,y,w)=>{const E=ZR(this.wt,y);s.size()<i||E.largestBatchId===c?(s.set(E.getKey(),E),c=E.largestBatchId):w.done()}).next(()=>s)}ie(e,t){return _C(e).put(function(r,i,s){const[c,d,f]=Yj(i,s.mutation.key);return{userId:i,collectionPath:d,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:gC(r.ne,s.mutation)}}(this.wt,this.userId,t))}}function _C(n){return ts(n,"documentOverlays")}class Sm{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Yr(e.integerValue));else if("doubleValue"in e){const r=Yr(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),eC(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(_m(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?zV(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):pt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),rt.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function _7(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function eH(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=_7(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Sm.ye=new Sm;class y7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=eH(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=eH(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class v7{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class b7{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class yC{constructor(){this.Oe=new y7,this.Fe=new v7(this.Oe),this.$e=new b7(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class Im{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Im(this.indexId,this.documentKey,this.arrayValue,r)}}function Am(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=tH(n.arrayValue,e.arrayValue),0!==t?t:(t=tH(n.directionalValue,e.directionalValue),0!==t?t:rt.comparator(n.documentKey,e.documentKey)))}function tH(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class w7{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=SR(e);if(void 0!==t&&!this.Qe(t))return!1;const r=pm(e);let i=0,s=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const c=r[i];if(!this.je(this.Ke,c)||!this.We(this.Ue[s++],c))return!1;++i}for(;i<r.length;++i)if(s>=this.Ue.length||!this.We(this.Ue[s++],r[i]))return!1;return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class C7{constructor(){this.ze=new WR}addToCollectionParentIndex(e,t){return this.ze.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(Da.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(Da.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class WR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Hn(gn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Hn(gn.comparator)).toArray()}}const ZS=new Uint8Array(0);class T7{constructor(e,t){this.user=e,this.databaseId=t,this.He=new WR,this.Je=new op(r=>bm(r),(r,i)=>iC(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const s={collectionId:r,parent:co(i)};return nH(e).put(s)}return de.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[OV(t),""],!1,!0);return nH(e).K(i).next(s=>{for(const c of s){if(c.collectionId!==t)break;r.push(Pu(c.parent))}return r})}addFieldIndex(e,t){const r=WS(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;delete i.indexId;const s=r.add(i);if(t.indexState){const c=bC(e);return s.next(d=>{c.put(Qj(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=WS(e),i=bC(e),s=vC(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=vC(e);let i=!0;const s=new Map;return de.forEach(this.Ye(t),c=>this.Xe(e,c).next(d=>{i&&(i=!!d),s.set(c,d)})).next(()=>{if(i){let c=Jt();const d=[];return de.forEach(s,(f,y)=>{var w;qe("IndexedDbIndexManager",`Using index ${w=f,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(Ie=>`${Ie.fieldPath}:${Ie.kind}`).join(",")}`} to execute ${bm(t)}`);const E=function(Ie,me){const Le=SR(me);if(void 0===Le)return null;for(const je of LS(Ie,Le.fieldPath))switch(je.op){case"array-contains-any":return je.value.arrayValue.values||[];case"array-contains":return[je.value]}return null}(y,f),A=function(Ie,me){const Le=new Map;for(const je of pm(me))for(const ct of LS(Ie,je.fieldPath))switch(ct.op){case"==":case"in":Le.set(je.fieldPath.canonicalString(),ct.value);break;case"not-in":case"!=":return Le.set(je.fieldPath.canonicalString(),ct.value),Array.from(Le.values())}return null}(y,f),k=function(Ie,me){const Le=[];let je=!0;for(const ct of pm(me)){const Lt=0===ct.kind?QV(Ie,ct.fieldPath,Ie.startAt):JV(Ie,ct.fieldPath,Ie.startAt);Le.push(Lt.value),je&&(je=Lt.inclusive)}return new sp(Le,je)}(y,f),M=function(Ie,me){const Le=[];let je=!0;for(const ct of pm(me)){const Lt=0===ct.kind?JV(Ie,ct.fieldPath,Ie.endAt):QV(Ie,ct.fieldPath,Ie.endAt);Le.push(Lt.value),je&&(je=Lt.inclusive)}return new sp(Le,je)}(y,f),V=this.Ze(f,y,k),W=this.Ze(f,y,M),ne=this.tn(f,y,A),he=this.en(f.indexId,E,V,k.inclusive,W,M.inclusive,ne);return de.forEach(he,Ie=>r.j(Ie,t.limit).next(me=>{me.forEach(Le=>{const je=rt.fromSegments(Le.documentKey);c.has(je)||(c=c.add(je),d.push(je))})}))}).next(()=>d)}return de.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,s,c,d){const f=(null!=t?t.length:1)*Math.max(r.length,s.length),y=f/(null!=t?t.length:1),w=[];for(let E=0;E<f;++E){const A=t?this.nn(t[E/y]):ZS,k=this.sn(e,A,r[E%y],i),M=this.rn(e,A,s[E%y],c),V=d.map(W=>this.sn(e,A,W,!0));w.push(...this.createRange(k,M,V))}return w}sn(e,t,r,i){const s=new Im(e,rt.empty(),t,r);return i?s:s.Le()}rn(e,t,r,i){const s=new Im(e,rt.empty(),t,r);return i?s.Le():s}Xe(e,t){const r=new w7(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let c=null;for(const d of s)r.Ge(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;return de.forEach(this.Ye(t),i=>this.Xe(e,i).next(s=>{s?0!==r&&s.fields.length<function(c){let d=new Hn(Wr.comparator),f=!1;for(const y of c.filters){const w=y;w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?f=!0:d=d.add(w.field))}for(const y of c.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(f?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new yC;for(const i of pm(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const c=r.Be(i.kind);Sm.ye.re(s,c)}return r.Me()}nn(e){const t=new yC;return Sm.ye.re(e,t.Be(0)),t.Me()}un(e,t){const r=new yC;return Sm.ye.re(vm(this.databaseId,t),r.Be(function(i){const s=pm(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Me()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new yC);let s=0;for(const c of pm(e)){const d=r[s++];for(const f of i)if(this.cn(t,c.fieldPath)&&nC(d))i=this.an(i,c,d);else{const y=f.Be(c.kind);Sm.ye.re(d,y)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Me();return t}an(e,t,r){const i=[...e],s=[];for(const c of r.arrayValue.values||[])for(const d of i){const f=new yC;f.seed(d.Me()),Sm.ye.re(c,f.Be(t.kind)),s.push(f)}return s}cn(e,t){return!!e.filters.find(r=>r instanceof _s&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=WS(e),i=bC(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(s=>{const c=[];return de.forEach(s,d=>i.get([d.indexId,this.uid]).next(f=>{c.push(function(y,w){const E=w?new Yw(w.sequenceNumber,new Da(Em(w.readTime),new rt(Pu(w.documentKey)),w.largestBatchId)):Yw.empty(),A=y.fields.map(([k,M])=>new kS(Wr.fromServerFormat(k),M));return new xS(y.indexId,y.collectionGroup,A,E)}(d,f))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Wt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=WS(e),s=bC(e);return this.ln(e).next(c=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>de.forEach(d,f=>s.put(Qj(f.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(i,s)=>{const c=r.get(i.collectionGroup);return(c?de.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),de.forEach(d,f=>this.fn(e,i,f).next(y=>{const w=this.dn(s,f);return y.isEqual(w)?de.resolve():this._n(e,s,f,y,w)}))))})}wn(e,t,r,i){return vC(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return vC(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=vC(e);let s=new Hn(Am);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(c,d)=>{s=s.add(new Im(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}dn(e,t){let r=new Hn(Am);const i=this.on(t,e);if(null==i)return r;const s=SR(t);if(null!=s){const c=e.data.field(s.fieldPath);if(nC(c))for(const d of c.arrayValue.values||[])r=r.add(new Im(t.indexId,e.key,this.nn(d),i))}else r=r.add(new Im(t.indexId,e.key,ZS,i));return r}_n(e,t,r,i,s){qe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(d,f,y,w,E){const A=d.getIterator(),k=f.getIterator();let M=iv(A),V=iv(k);for(;M||V;){let W=!1,ne=!1;if(M&&V){const he=y(M,V);he<0?ne=!0:he>0&&(W=!0)}else null!=M?ne=!0:W=!0;W?(w(V),V=iv(k)):ne?(E(M),M=iv(A)):(M=iv(A),V=iv(k))}}(i,s,Am,d=>{c.push(this.wn(e,t,r,d))},d=>{c.push(this.mn(e,t,r,d))}),de.waitFor(c)}ln(e){let t=1;return bC(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>Am(c,d)).filter((c,d,f)=>!d||0!==Am(c,f[d-1]));const i=[];i.push(e);for(const c of r){const d=Am(c,e),f=Am(c,t);if(0===d)i[0]=e.Le();else if(d>0&&f<0)i.push(c),i.push(c.Le());else if(f>0)break}i.push(t);const s=[];for(let c=0;c<i.length;c+=2)s.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,ZS,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,ZS,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(rH)}getMinOffset(e,t){return de.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||pt())).next(rH)}}function nH(n){return ts(n,"collectionParents")}function vC(n){return ts(n,"indexEntries")}function WS(n){return ts(n,"indexConfiguration")}function bC(n){return ts(n,"indexState")}function rH(n){$t(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;IR(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Da(e.readTime,e.documentKey,t)}const iH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class jo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new jo(e,jo.DEFAULT_COLLECTION_PERCENTILE,jo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function sH(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],c=IDBKeyRange.only(t.batchId);let d=0;const f=r.J({range:c},(w,E,A)=>(d++,A.delete()));s.push(f.next(()=>{$t(1===d)}));const y=[];for(const w of t.mutations){const E=$j(e,w.key.path,t.batchId);s.push(i.delete(E)),y.push(w.key)}return de.waitFor(s).next(()=>y)}function KS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pt();e=n.noDocument}return JSON.stringify(e).length}jo.DEFAULT_COLLECTION_PERCENTILE=10,jo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jo.DEFAULT=new jo(41943040,jo.DEFAULT_COLLECTION_PERCENTILE,jo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jo.DISABLED=new jo(-1,0,0);class YS{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){$t(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new YS(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lp(e).J({index:"userMutationsIndex",range:r},(i,s,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=gv(e),c=lp(e);return c.add({}).next(d=>{$t("number"==typeof d);const f=new $R(d,t,r,i),y=function(A,k,M){const V=M.baseMutations.map(ne=>gC(A.ne,ne)),W=M.mutations.map(ne=>gC(A.ne,ne));return{userId:k,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:V,mutations:W}}(this.wt,this.userId,f),w=[];let E=new Hn((A,k)=>Wt(A.canonicalString(),k.canonicalString()));for(const A of i){const k=$j(this.userId,A.key.path,d);E=E.add(A.key.path.popLast()),w.push(c.put(y)),w.push(s.put(k,JK))}return E.forEach(A=>{w.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.gn[d]=f.keys()}),de.waitFor(w).next(()=>f)})}lookupMutationBatch(e,t){return lp(e).get(t).next(r=>r?($t(r.userId===this.userId),Dm(this.wt,r)):null)}yn(e,t){return this.gn[t]?de.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return lp(e).J({index:"userMutationsIndex",range:i},(c,d,f)=>{d.userId===this.userId&&($t(d.batchId>=r),s=Dm(this.wt,d)),f.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return lp(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,c)=>{r=s.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lp(e).K("userMutationsIndex",t).next(r=>r.map(i=>Dm(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=GS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return gv(e).J({range:i},(c,d,f)=>{const[y,w,E]=c,A=Pu(w);if(y===this.userId&&t.path.isEqual(A))return lp(e).get(E).next(k=>{if(!k)throw pt();$t(k.userId===this.userId),s.push(Dm(this.wt,k))});f.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Wt);const i=[];return t.forEach(s=>{const c=GS(this.userId,s.path),d=IDBKeyRange.lowerBound(c),f=gv(e).J({range:d},(y,w,E)=>{const[A,k,M]=y,V=Pu(k);A===this.userId&&s.path.isEqual(V)?r=r.add(M):E.done()});i.push(f)}),de.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=GS(this.userId,r),c=IDBKeyRange.lowerBound(s);let d=new Hn(Wt);return gv(e).J({range:c},(f,y,w)=>{const[E,A,k]=f,M=Pu(A);E===this.userId&&r.isPrefixOf(M)?M.length===i&&(d=d.add(k)):w.done()}).next(()=>this.pn(e,d))}pn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(lp(e).get(s).next(c=>{if(null===c)throw pt();$t(c.userId===this.userId),r.push(Dm(this.wt,c))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return sH(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return gv(e).J({range:r},(s,c,d)=>{if(s[0]===this.userId){const f=Pu(s[1]);i.push(f)}else d.done()}).next(()=>{$t(0===i.length)})})}containsKey(e,t){return oH(e,this.userId,t)}Tn(e){return aH(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function oH(n,e,t){const r=GS(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let c=!1;return gv(n).J({range:s,H:!0},(d,f,y)=>{const[w,E,A]=d;w===e&&E===i&&(c=!0),y.done()}).next(()=>c)}function lp(n){return ts(n,"mutations")}function gv(n){return ts(n,"documentMutations")}function aH(n){return ts(n,"mutationQueues")}class Nm{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Nm(0)}static Rn(){return new Nm(-1)}}class E7{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Nm(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>jt.fromTimestamp(new Dr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>mv(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>($t(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return mv(e).J((c,d)=>{const f=mC(d);f.sequenceNumber<=t&&null===r.get(f.targetId)&&(i++,s.push(this.removeTargetData(e,f)))}).next(()=>de.waitFor(s)).next(()=>i)}forEachTarget(e,t){return mv(e).J((r,i)=>{const s=mC(i);t(s)})}bn(e){return lH(e).get("targetGlobalKey").next(t=>($t(null!==t),t))}Pn(e,t){return lH(e).put("targetGlobalKey",t)}vn(e,t){return mv(e).put(Kj(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=bm(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return mv(e).J({range:i,index:"queryTargetsIndex"},(c,d,f)=>{const y=mC(d);iC(t,y.target)&&(s=y,f.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=cp(e);return t.forEach(c=>{const d=co(c.path);i.push(s.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,c))}),de.waitFor(i)}removeMatchingKeys(e,t,r){const i=cp(e);return de.forEach(t,s=>{const c=co(s.path);return de.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=cp(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=cp(e);let s=Jt();return i.J({range:r,H:!0},(c,d,f)=>{const y=Pu(c[1]),w=new rt(y);s=s.add(w)}).next(()=>s)}containsKey(e,t){const r=co(t.path),i=IDBKeyRange.bound([r],[OV(r)],!1,!0);let s=0;return cp(e).J({index:"documentTargetsIndex",H:!0,range:i},([c,d],f,y)=>{0!==c&&(s++,y.done())}).next(()=>s>0)}te(e,t){return mv(e).get(t).next(r=>r?mC(r):null)}}function mv(n){return ts(n,"targets")}function lH(n){return ts(n,"targetGlobal")}function cp(n){return ts(n,"targetDocuments")}function cH([n,e],[t,r]){const i=Wt(n,t);return 0===i?Wt(e,r):i}class D7{constructor(e){this.Sn=e,this.buffer=new Hn(cH),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();cH(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class S7{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;qe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Te.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){tp(r)?qe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ep(r)}yield t.kn(3e5)}))}}class I7{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.On(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(Uo.ot);const r=new D7(t);return this.Mn.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.Mn.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(iH)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iH):this.$n(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,t){let r,i,s,c,d,f,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,c=Date.now(),this.nthSequenceNumber(e,i))).next(E=>(r=E,d=Date.now(),this.removeTargets(e,r,t))).next(E=>(s=E,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(E=>(y=Date.now(),ER()<=yc.in.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-w}ms\n\tDetermined least recently used ${i} in `+(d-c)+`ms\n\tRemoved ${s} targets in `+(f-d)+`ms\n\tRemoved ${E} documents in `+(y-f)+`ms\nTotal Duration: ${y-w}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:E})))}}class A7{constructor(e,t){this.db=e,this.garbageCollector=new I7(this,t)}On(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return QS(e,r)}removeReference(e,t,r){return QS(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return QS(e,t)}Un(e,t){return function(r,i){let s=!1;return aH(r).Y(c=>oH(r,c,i).next(d=>(d&&(s=!0),de.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Ln(e,(c,d)=>{if(d<=t){const f=this.Un(e,c).next(y=>{if(!y)return s++,r.getEntry(e,c).next(()=>(r.removeEntry(c,jt.min()),cp(e).delete([0,co(c.path)])))});i.push(f)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return QS(e,t)}Ln(e,t){const r=cp(e);let i,s=Uo.ot;return r.J({index:"documentTargetsIndex"},([c,d],{path:f,sequenceNumber:y})=>{0===c?(s!==Uo.ot&&t(new rt(Pu(i)),s),s=y,i=f):s=Uo.ot}).next(()=>{s!==Uo.ot&&t(new rt(Pu(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function QS(n,e){return cp(n).put((r=n.currentSequenceNumber,{targetId:0,path:co(e.path),sequenceNumber:r}));var r}class uH{constructor(){this.changes=new op(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class N7{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return xm(e).put(r)}removeEntry(e,t,r){return xm(e).delete(function(i,s){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],qS(s),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Xn.newInvalidDocument(t);return xm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(wC(t))},(i,s)=>{r=this.Kn(t,s)}).next(()=>r)}Gn(e,t){let r={size:0,document:Xn.newInvalidDocument(t)};return xm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(wC(t))},(i,s)=>{r={document:this.Kn(t,s),size:KS(s)}}).next(()=>r)}getEntries(e,t){let r=Vo();return this.Qn(e,t,(i,s)=>{const c=this.Kn(i,s);r=r.insert(i,c)}).next(()=>r)}jn(e,t){let r=Vo(),i=new Kr(rt.comparator);return this.Qn(e,t,(s,c)=>{const d=this.Kn(s,c);r=r.insert(s,d),i=i.insert(s,KS(c))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return de.resolve();let i=new Hn(pH);t.forEach(f=>i=i.add(f));const s=IDBKeyRange.bound(wC(i.first()),wC(i.last())),c=i.getIterator();let d=c.getNext();return xm(e).J({index:"documentKeyIndex",range:s},(f,y,w)=>{const E=rt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&pH(d,E)<0;)r(d,null),d=c.getNext();d&&d.isEqual(E)&&(r(d,y),d=c.hasNext()?c.getNext():null),d?w.q(wC(d)):w.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),qS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xm(e).K(IDBKeyRange.bound(i,s,!0)).next(c=>{let d=Vo();for(const f of c){const y=this.Kn(rt.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,r,i){let s=Vo();const c=fH(t,r),d=fH(t,Da.max());return xm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(f,y,w)=>{const E=this.Kn(rt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(E.key,E),s.size===i&&w.done()}).next(()=>s)}newChangeBuffer(e){return new x7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return hH(e).get("remoteDocumentGlobalKey").next(t=>($t(!!t),t))}qn(e,t){return hH(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function g7(n,e){let t;if(e.document)t=Pj(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=rt.fromSegments(e.noDocument.path),i=Em(e.noDocument.readTime);t=Xn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pt();{const r=rt.fromSegments(e.unknownDocument.path),i=Em(e.unknownDocument.version);t=Xn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Dr(r[0],r[1]);return jt.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(jt.min()))return r}return Xn.newInvalidDocument(e)}}function dH(n){return new N7(n)}class x7 extends uH{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new op(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Hn((s,c)=>Wt(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const d=this.Hn.get(s);if(t.push(this.zn.removeEntry(e,s,d.readTime)),c.isValidDocument()){const f=Wj(this.zn.wt,c);i=i.add(s.path.popLast());const y=KS(f);r+=y-d.size,t.push(this.zn.addEntry(e,s,f))}else if(r-=d.size,this.trackRemovals){const f=Wj(this.zn.wt,c.convertToNoDocument(jt.min()));t.push(this.zn.addEntry(e,s,f))}}),i.forEach(s=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.zn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((s,c)=>{this.Hn.set(s,{size:c,readTime:r.get(s).readTime})}),r))}}function hH(n){return ts(n,"remoteDocumentGlobal")}function xm(n){return ts(n,"remoteDocumentsV14")}function wC(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fH(n,e){const t=e.documentKey.path.toArray();return[n,qS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function pH(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Wt(t[s],r[s]),i)return i;return i=Wt(t.length,r.length),i||(i=Wt(t[t.length-2],r[r.length-2]),i||Wt(t[t.length-1],r[r.length-1]))}class k7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class gH{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&aC(r.mutation,i,Sa.empty(),Dr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Jt()){const i=Ru();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let c=lC();return s.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Ru();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Jt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,i){let s=Vo();const c=cC(),d=cC();return t.forEach((f,y)=>{const w=r.get(y.key);i.has(y.key)&&(void 0===w||w.mutation instanceof fh)?s=s.insert(y.key,y):void 0!==w&&(c.set(y.key,w.mutation.getFieldMask()),aC(w.mutation,y,w.mutation.getFieldMask(),Dr.now()))}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((y,w)=>c.set(y,w)),t.forEach((y,w)=>{var E;return d.set(y,new k7(w,null!==(E=c.get(y))&&void 0!==E?E:null))}),d))}recalculateAndSaveOverlays(e,t){const r=cC();let i=new Kr((c,d)=>c-d),s=Jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(f=>{const y=t.get(f);if(null===y)return;let w=r.get(f)||Sa.empty();w=d.applyToLocalView(y,w),r.set(f,w);const E=(i.get(d.batchId)||Jt()).add(f);i=i.insert(d.batchId,E)})}).next(()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),y=f.key,w=f.value,E=Ej();w.forEach(A=>{if(!s.has(A)){const k=gj(t.get(A),r.get(A));null!==k&&E.set(A,k),s=s.add(A)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,E))}return de.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return rt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):PR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const c=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):de.resolve(Ru());let d=-1,f=s;return c.next(y=>de.forEach(y,(w,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),s.get(w)?de.resolve():this.getBaseDocument(e,w,E).next(A=>{f=f.insert(w,A)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,f,y,Jt())).next(w=>({batchId:d,changes:Tj(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rt(t)).next(r=>{let i=lC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=lC();return this.indexManager.getCollectionParents(e,i).next(c=>de.forEach(c,d=>{const f=(y=t,w=d.child(i),new hh(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,w;return this.getDocumentsMatchingCollectionQuery(e,f,r).next(y=>{y.forEach((w,E)=>{s=s.insert(w,E)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((d,f)=>{const y=f.getKey();null===i.get(y)&&(i=i.insert(y,Xn.newInvalidDocument(y)))});let c=lC();return i.forEach((d,f)=>{const y=s.get(d);void 0!==y&&aC(y.mutation,f,Sa.empty(),Dr.now()),LR(t,f)&&(c=c.insert(d,f))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):de.resolve(Xn.newInvalidDocument(t))}}class O7{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return de.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:es(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:zR(r.bundledQuery),readTime:es(r.readTime)}),de.resolve();var r}}class R7{constructor(){this.overlays=new Kr(rt.comparator),this.Xn=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ru();return de.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ie(e,t,s)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=Ru(),s=t.length+1,c=new rt(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,y=f.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&f.largestBatchId>r&&i.set(f.getKey(),f)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Kr((y,w)=>y-w);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let w=s.get(y.largestBatchId);null===w&&(w=Ru(),s=s.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const d=Ru(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((y,w)=>d.set(y,w)),!(d.size()>=i)););return de.resolve(d)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new qR(t,r));let s=this.Xn.get(t);void 0===s&&(s=Jt(),this.Xn.set(t,s)),this.Xn.set(t,s.add(r.key))}}class KR{constructor(){this.Zn=new Hn(ns.ts),this.es=new Hn(ns.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new ns(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new ns(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new rt(new gn([])),r=new ns(t,e),i=new ns(t,e+1),s=[];return this.es.forEachInRange([r,i],c=>{this.rs(c),s.push(c.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new rt(new gn([])),r=new ns(t,e),i=new ns(t,e+1);let s=Jt();return this.es.forEachInRange([r,i],c=>{s=s.add(c.key)}),s}containsKey(e){const t=new ns(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ns{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return rt.comparator(e.key,t.key)||Wt(e.ls,t.ls)}static ns(e,t){return Wt(e.ls,t.ls)||rt.comparator(e.key,t.key)}}class M7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Hn(ns.ts)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.fs;this.fs++;const c=new $R(s,t,r,i);this.mutationQueue.push(c);for(const d of i)this.ds=this.ds.add(new ns(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return de.resolve(c)}lookupMutationBatch(e,t){return de.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),s=i<0?0:i;return de.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ns(t,0),i=new ns(t,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([r,i],c=>{const d=this._s(c.ls);s.push(d)}),de.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Hn(Wt);return t.forEach(i=>{const s=new ns(i,0),c=new ns(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,c],d=>{r=r.add(d.ls)})}),de.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;rt.isDocumentKey(s)||(s=s.child(""));const c=new ns(new rt(s),0);let d=new Hn(Wt);return this.ds.forEachWhile(f=>{const y=f.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(f.ls)),!0)},c),de.resolve(this.gs(d))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){$t(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return de.forEach(t.mutations,i=>{const s=new ns(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new ns(t,0),i=this.ds.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class P7{constructor(e){this.ps=e,this.docs=new Kr(rt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,c=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():Xn.newInvalidDocument(t))}getEntries(e,t){let r=Vo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Xn.newInvalidDocument(i))}),de.resolve(r)}getAllFromCollection(e,t,r){let i=Vo();const s=new rt(t.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||IR(MV(f),r)<=0||(i=i.insert(f.key,f.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,t,r,i){pt()}Is(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new F7(this)}getSize(e){return de.resolve(this.size)}}class F7 extends uH{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class L7{constructor(e){this.persistence=e,this.Ts=new op(t=>bm(t),iC),this.lastRemoteSnapshotVersion=jt.min(),this.highestTargetId=0,this.Es=0,this.As=new KR,this.targetCount=0,this.Rs=Nm.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),de.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Nm(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.vn(t),de.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Ts.forEach((c,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Ts.delete(c),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),de.waitFor(s).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(c=>{s.push(i.markPotentiallyOrphaned(e,c))}),de.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.As.containsKey(t))}}class mH{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Uo(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new L7(this),this.indexManager=new C7,this.remoteDocumentCache=new P7(r=>this.referenceDelegate.Ss(r)),this.wt=new Zj(t),this.Ds=new O7(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new R7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new M7(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){qe("MemoryPersistence","Starting transaction:",e);const i=new U7(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(s=>this.referenceDelegate.xs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ns(e,t){return de.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class U7 extends FV{constructor(e){super(),this.currentSequenceNumber=e}}class JS{constructor(e){this.persistence=e,this.ks=new KR,this.Ms=null}static Os(e){return new JS(e)}get Fs(){if(this.Ms)return this.Ms;throw pt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),de.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Fs.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Fs,r=>{const i=rt.fromPath(r);return this.$s(e,i).next(s=>{s||t.removeEntry(i,jt.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return de.or([()=>de.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class B7{constructor(e){this.wt=e}M(e,t,r,i){const s=new OS("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hj,{unique:!0}),d.createObjectStore("documentMutations"),_H(e),function(d){d.createObjectStore("remoteDocuments")}(e));let c=de.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),_H(e)),c=c.next(()=>function(d){const f=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:jt.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(d,f){return f.store("mutations").K().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hj,{unique:!0});const w=f.store("mutations"),E=y.map(A=>w.put(A));return de.waitFor(E)})}(e,s))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Bs(s))),r<6&&i>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(s)))),r<7&&i>=7&&(c=c.next(()=>this.Us(s))),r<8&&i>=8&&(c=c.next(()=>this.qs(e,s))),r<9&&i>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Ks(s))),r<11&&i>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:u7});f.createIndex("collectionPathOverlayIndex",d7,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",h7,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:XK});f.createIndex("documentKeyIndex",e7),f.createIndex("collectionGroupIndex",t7)}(e)).next(()=>this.Gs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.Qs(e,s))),r<15&&i>=15&&(c=c.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:o7}).createIndex("sequenceNumberIndex",a7,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:l7}).createIndex("documentKeyIndex",c7,{unique:!1})}(e))),c}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=KS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>de.forEach(i,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",c).next(d=>de.forEach(d,f=>{$t(f.userId===s.userId);const y=Dm(this.wt,f);return sH(e,s.userId,y).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((c,d)=>{const f=new gn(c),y=[0,co(f)];s.push(t.get(y).next(w=>w?de.resolve():t.put({targetId:0,path:co(f),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(s))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:s7});const r=t.store("collectionParents"),i=new WR,s=c=>{if(i.add(c)){const d=c.lastSegment(),f=c.popLast();return r.put({collectionId:d,parent:co(f)})}};return t.store("remoteDocuments").J({H:!0},(c,d)=>{const f=new gn(c);return s(f.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([c,d,f],y)=>{const w=Pu(d);return s(w.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const s=mC(i),c=Kj(this.wt,s);return t.put(c)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,c)=>{const d=t.store("remoteDocumentsV14"),f=(y=c,y.document?new rt(gn.fromString(y.document.name).popFirst(5)):y.noDocument?rt.fromSegments(y.noDocument.path):y.unknownDocument?rt.fromSegments(y.unknownDocument.path):pt()).path.toArray();var y;const w={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(d.put(w))}).next(()=>de.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=dH(this.wt),s=new mH(JS.Os,this.wt.ne);return r.K().next(c=>{const d=new Map;return c.forEach(f=>{var y;let w=null!==(y=d.get(f.userId))&&void 0!==y?y:Jt();Dm(this.wt,f).keys().forEach(E=>w=w.add(E)),d.set(f.userId,w)}),de.forEach(d,(f,y)=>{const w=new Ji(y),E=zS.se(this.wt,w),A=s.getIndexManager(w),k=YS.se(w,this.wt,A,s.referenceDelegate);return new gH(i,k,E,A).recalculateAndSaveOverlaysForDocumentKeys(new HR(t,Uo.ot),f).next()})})}}function _H(n){n.createObjectStore("targetDocuments",{keyPath:r7}).createIndex("documentTargetsIndex",i7,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",n7,{unique:!0}),n.createObjectStore("targetGlobal")}const YR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class QR{constructor(e,t,r,i,s,c,d,f,y,w,E=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=s,this.window=c,this.document=d,this.Ws=y,this.zs=w,this.Hs=E,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=A=>Promise.resolve(),!QR.V())throw new Be(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new A7(this,i),this.ei=t+"main",this.wt=new Zj(f),this.ni=new vc(this.ei,this.Hs,new B7(this.wt)),this.Vs=new E7(this.referenceDelegate,this.wt),this.remoteDocumentCache=dH(this.wt),this.Ds=new m7,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===w&&hi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Be(ge.FAILED_PRECONDITION,YR);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Uo(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,Te.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Te.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Te.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>XS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(tp(e))return qe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return CC(e).get("owner").next(t=>de.resolve(this.di(t)))}_i(e){return XS(e).delete(this.clientId)}wi(){var e=this;return(0,Te.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ts(r,"clientMetadata");return i.K().next(s=>{const c=e.gi(s,18e5),d=s.filter(f=>-1===c.indexOf(f));return de.forEach(d,f=>i.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?de.resolve(!0):CC(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Be(ge.FAILED_PRECONDITION,YR);return!1}}return!(!this.networkEnabled||!this.inForeground)||XS(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&qe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Te.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new HR(t,Uo.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>XS(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return YS.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new T7(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return zS.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){qe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(c=this.Hs)?p7:14===c?zj:13===c?qj:12===c?f7:11===c?Gj:void pt();var c;let d;return this.ni.runTransaction(e,i,s,f=>(d=new HR(f,this.Ps?this.Ps.next():Uo.ot),"readwrite-primary"===t?this.ai(d).next(y=>!!y||this.hi(d)).next(y=>{if(!y)throw hi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Be(ge.FAILED_PRECONDITION,PV);return r(d)}).next(y=>this.fi(d).next(()=>y)):this.bi(d).next(()=>r(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}bi(e){return CC(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Be(ge.FAILED_PRECONDITION,YR)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return CC(e).put("owner",t)}static V(){return vc.V()}li(e){const t=CC(e);return t.get("owner").next(r=>this.di(r)?(qe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(hi(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return qe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return hi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){hi("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function CC(n){return ts(n,"owner")}function XS(n){return ts(n,"clientMetadata")}function JR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class XR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=Jt(),i=Jt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new XR(e,t.fromCache,r,i)}}class yH{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(s=>s||this.xi(e,t,i,r)).next(s=>s||this.Ni(e,t))}Ci(e,t){if(rj(t))return de.resolve(null);let r=Bo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=US(t,null,"F"),r=Bo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const c=Jt(...s);return this.Di.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const y=this.ki(t,d);return this.Mi(t,y,c,f.readTime)?this.Ci(e,US(t,null,"F")):this.Oi(e,y,t,f)}))})))}xi(e,t,r,i){return rj(t)||i.isEqual(jt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(s=>{const c=this.ki(t,s);return this.Mi(t,c,r,i)?this.Ni(e,t):(ER()<=yc.in.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),FR(t)),this.Oi(e,c,t,RV(i,-1)))})}ki(e,t){let r=new Hn(oj(e));return t.forEach((i,s)=>{LR(e,s)&&(r=r.add(s))}),r}Mi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ni(e,t){return ER()<=yc.in.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",FR(t)),this.Di.getDocumentsMatchingQuery(e,t,Da.min())}Oi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(c=>{s=s.insert(c.key,c)}),s))}}class V7{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new Kr(Wt),this.Bi=new op(s=>bm(s),iC),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gH(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function vH(n,e,t,r){return new V7(n,e,t,r)}function bH(n,e){return eM.apply(this,arguments)}function eM(){return eM=(0,Te.Z)(function*(n,e){const t=ot(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const c=[],d=[];let f=Jt();for(const y of i){c.push(y.batchId);for(const w of y.mutations)f=f.add(w.key)}for(const y of s){d.push(y.batchId);for(const w of y.mutations)f=f.add(w.key)}return t.localDocuments.getDocuments(r,f).next(y=>({Ki:y,removedBatchIds:c,addedBatchIds:d}))})})}),eM.apply(this,arguments)}function wH(n){const e=ot(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function CH(n,e,t){let r=Jt(),i=Jt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let c=Vo();return t.forEach((d,f)=>{const y=s.get(d);f.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(jt.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):qe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",f.version)}),{Gi:c,Qi:i}})}function $7(n,e){const t=ot(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _v(n,e){const t=ot(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(s=>s?(i=s,de.resolve(i)):t.Vs.allocateTargetId(r).next(c=>(i=new ap(e,c,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function yv(n,e,t){return tM.apply(this,arguments)}function tM(){return tM=(0,Te.Z)(function*(n,e,t){const r=ot(n),i=r.$i.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!tp(c))throw c;qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),tM.apply(this,arguments)}function eI(n,e,t){const r=ot(n);let i=jt.min(),s=Jt();return r.persistence.runTransaction("Execute query","readonly",c=>function(d,f,y){const w=ot(d),E=w.Bi.get(y);return void 0!==E?de.resolve(w.$i.get(E)):w.Vs.getTargetData(f,y)}(r,c,Bo(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(c,d.targetId).next(f=>{s=f})}).next(()=>r.Fi.getDocumentsMatchingQuery(c,e,t?i:jt.min(),t?s:Jt())).next(d=>(DH(r,sj(e),d),{documents:d,ji:s})))}function TH(n,e){const t=ot(n),r=ot(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.te(s,e).next(c=>c?c.target:null))}function EH(n,e){const t=ot(n),r=t.Li.get(e)||jt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,RV(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(DH(t,e,i),i))}function DH(n,e,t){let r=jt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Li.set(e,r)}function nM(){return nM=(0,Te.Z)(function*(n,e,t,r){const i=ot(n);let s=Jt(),c=Vo();for(const y of t){const w=e.Wi(y.metadata.name);y.document&&(s=s.add(w));const E=e.zi(y);E.setReadTime(e.Hi(y.metadata.readTime)),c=c.insert(w,E)}const d=i.Ui.newChangeBuffer({trackRemovals:!0}),f=yield _v(i,(y=r,Bo(av(gn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>CH(y,d,c).next(w=>(d.apply(y),w)).next(w=>i.Vs.removeMatchingKeysForTargetId(y,f.targetId).next(()=>i.Vs.addMatchingKeys(y,s,f.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,w.Gi,w.Qi)).next(()=>w.Gi)))}),nM.apply(this,arguments)}function q7(n,e){return rM.apply(this,arguments)}function rM(){return rM=(0,Te.Z)(function*(n,e,t=Jt()){const r=yield _v(n,Bo(zR(e.bundledQuery))),i=ot(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const c=es(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ds.saveNamedQuery(s,e);const d=r.withResumeToken(Bi.EMPTY_BYTE_STRING,c);return i.$i=i.$i.insert(d.targetId,d),i.Vs.updateTargetData(s,d).next(()=>i.Vs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Vs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(s,e))})}),rM.apply(this,arguments)}function SH(n,e){return`firestore_clients_${n}_${e}`}function IH(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function iM(n,e){return`firestore_targets_${n}_${e}`}class tI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let s,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(s=new Be(i.error.code,i.error.message))),c?new tI(e,t,i.state,s):(hi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class TC{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Be(r.error.code,r.error.message))),s?new TC(e,r.state,i):(hi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=HS();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=HV(r.activeTargetIds[c]),s=s.add(r.activeTargetIds[c]);return i?new nI(e,s):(hi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class sM{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new sM(t.clientId,t.onlineState):(hi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class oM{constructor(){this.activeTargetIds=HS()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aM{constructor(e,t,r,i,s){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Kr(Wt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=SH(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new oM),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Te.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const s=e.getItem(SH(e.persistenceKey,i));if(s){const c=nI.Ji(i,s);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(iM(this.persistenceKey,e));if(r){const i=TC.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(iM(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return qe("SharedClientState","READ",e,t),t}setItem(e,t){qe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){qe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(qe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void hi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Te.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(s){let c=Uo.ot;if(null!=s)try{const d=JSON.parse(s);$t("number"==typeof d),c=d}catch(d){hi("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(r.newValue);i!==Uo.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Nr(s)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new tI(this.currentUser,e,t,r),s=IH(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Yi())}pr(e){const t=IH(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=iM(this.persistenceKey,e),s=new TC(e,t,r);this.setItem(i,s.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return nI.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return tI.Ji(new Ji(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return TC.Ji(i,t)}wr(e){return sM.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Te.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);qe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),s=this.gr(r),c=[],d=[];return s.forEach(f=>{i.has(f)||c.push(f)}),i.forEach(f=>{s.has(f)||d.push(f)}),this.syncEngine.Or(c,d).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=HS();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class AH{constructor(){this.Fr=new oM,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new oM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class z7{Br(e){}shutdown(){}}class NH{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Z7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class W7{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class K7 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,s){const c=this.oo(e,t);qe("RestConnection","Sending: ",c,r);const d={};return this.uo(d,i,s),this.co(e,c,d,r).then(f=>(qe("RestConnection","Received: ",f),f),f=>{throw fm("RestConnection",`${e} failed with error: `,f,"url: ",c,"request:",r),f})}ao(e,t,r,i,s,c){return this.ro(e,t,r,i,s)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+nv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}oo(e,t){return`${this.so}/v1/${t}:${Z7[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((s,c)=>{const d=new Z5;d.listenOnce(G5.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case TR.NO_ERROR:const y=d.getResponseJson();qe("Connection","XHR received:",JSON.stringify(y)),s(y);break;case TR.TIMEOUT:qe("Connection",'RPC "'+e+'" timed out'),c(new Be(ge.DEADLINE_EXCEEDED,"Request time out"));break;case TR.HTTP_ERROR:const w=d.getStatus();if(qe("Connection",'RPC "'+e+'" failed with status:',w,"response text:",d.getResponseText()),w>0){const E=d.getResponseJson().error;if(E&&E.status&&E.message){const A=function(k){const M=k.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(M)>=0?M:ge.UNKNOWN}(E.status);c(new Be(A,E.message))}else c(new Be(ge.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Be(ge.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{qe("Connection",'RPC "'+e+'" completed.')}});const f=JSON.stringify(i);d.send(t,"POST",f,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=H5(),c=$5(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new z5({})),this.uo(d.initMessageHeaders,t,r),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const f=i.join("");qe("Connection","Creating WebChannel: "+f,d);const y=s.createWebChannel(f,d);let w=!1,E=!1;const A=new W7({jr:M=>{E?qe("Connection","Not sending because WebChannel is closed:",M):(w||(qe("Connection","Opening WebChannel transport."),y.open(),w=!0),qe("Connection","WebChannel sending:",M),y.send(M))},Wr:()=>y.close()}),k=(M,V,W)=>{M.listen(V,ne=>{try{W(ne)}catch(he){setTimeout(()=>{throw he},0)}})};return k(y,NS.EventType.OPEN,()=>{E||qe("Connection","WebChannel transport opened.")}),k(y,NS.EventType.CLOSE,()=>{E||(E=!0,qe("Connection","WebChannel transport closed"),A.eo())}),k(y,NS.EventType.ERROR,M=>{E||(E=!0,fm("Connection","WebChannel transport errored:",M),A.eo(new Be(ge.UNAVAILABLE,"The operation could not be completed")))}),k(y,NS.EventType.MESSAGE,M=>{var V;if(!E){const W=M.data[0];$t(!!W);const he=W.error||(null===(V=W[0])||void 0===V?void 0:V.error);if(he){qe("Connection","WebChannel received error:",he);const Ie=he.status;let me=function(je){const ct=Ti[je];if(void 0!==ct)return wj(ct)}(Ie),Le=he.message;void 0===me&&(me=ge.INTERNAL,Le="Unknown error status: "+Ie+" with message "+he.message),E=!0,A.eo(new Be(me,Le)),y.close()}else qe("Connection","WebChannel received:",W),A.no(W)}}),k(c,q5.STAT_EVENT,M=>{M.stat===IV.PROXY?qe("Connection","Detected buffering proxy"):M.stat===IV.NOPROXY&&qe("Connection","Detected no buffering proxy")}),setTimeout(()=>{A.Zr()},0),A}}function xH(){return typeof window<"u"?window:null}function rI(){return typeof document<"u"?document:null}function EC(n){return new VK(n,!0)}class lM{constructor(e,t,r=1e3,i=1.5,s=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class kH{constructor(e,t,r,i,s,c,d,f){this.js=e,this.Ao=r,this.Ro=i,this.bo=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new lM(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Te.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,Te.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,Te.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(hi(t.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Be(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,Te.Z)(function*(){e.state=0,e.start()}))}qo(e){return qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Y7 extends kH{constructor(e,t,r,i,s,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.wt=s}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function $K(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:pt(),i=e.targetChange.targetIds||[],s=function(f,y){return f.dt?($t(void 0===y||"string"==typeof y),Bi.fromBase64String(y||"")):($t(void 0===y||y instanceof Uint8Array),Bi.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(f){const y=void 0===f.code?ge.UNKNOWN:wj(f.code);return new Be(y,f.message||"")}(c);t=new Sj(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Mu(n,r.document.name),s=es(r.document.updateTime),c=new ms({mapValue:{fields:r.document.fields}}),d=Xn.newFoundDocument(i,s,c);t=new $S(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=Mu(n,r.document),s=r.readTime?es(r.readTime):jt.min(),c=Xn.newNoDocument(i,s);t=new $S([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Mu(n,r.document);t=new $S([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return pt();{const r=e.filter,s=new OK(r.count||0);t=new Dj(r.targetId,s)}}var f;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return jt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?jt.min():s.readTime?es(s.readTime):jt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=pC(this.wt),t.addTarget=function(i,s){let c;const d=s.target;return c=FS(d)?{documents:Fj(i,d)}:{query:Lj(i,d)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=xj(i,s.resumeToken):s.snapshotVersion.compareTo(jt.min())>0&&(c.readTime=hC(i,s.snapshotVersion.toTimestamp())),c}(this.wt,e);const r=function qK(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=pC(this.wt),t.removeTarget=e,this.Oo(t)}}class Q7 extends kH{constructor(e,t,r,i,s,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if($t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function GK(n,e){return n&&n.length>0?($t(void 0!==e),n.map(t=>function(r,i){let s=es(r.updateTime?r.updateTime:i);return s.isEqual(jt.min())&&(s=es(i)),new NK(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=es(e.commitTime);return this.listener.Jo(r,t)}return $t(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=pC(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>gC(this.wt,r))};this.Oo(t)}}class J7 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Be(ge.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Be(ge.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.bo.ao(e,t,r,s,c,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Be(ge.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class X7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(hi(t),this.su=!1):qe("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class eY{constructor(e,t,r,i,s){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(d=>{r.enqueueAndForget((0,Te.Z)(function*(){var f;up(c)&&(qe("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,Te.Z)(function*(y){const w=ot(y);w.lu.add(4),yield vv(w),w._u.set("Unknown"),w.lu.delete(4),yield DC(w)}),function(y){return f.apply(this,arguments)})(c))}))}),this._u=new X7(r,i)}}function DC(n){return cM.apply(this,arguments)}function cM(){return cM=(0,Te.Z)(function*(n){if(up(n))for(const e of n.fu)yield e(!0)}),cM.apply(this,arguments)}function vv(n){return uM.apply(this,arguments)}function uM(){return uM=(0,Te.Z)(function*(n){for(const e of n.fu)yield e(!1)}),uM.apply(this,arguments)}function iI(n,e){const t=ot(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),fM(t)?hM(t):wv(t).Co()&&dM(t,e))}function SC(n,e){const t=ot(n),r=wv(t);t.hu.delete(e),r.Co()&&OH(t,e),0===t.hu.size&&(r.Co()?r.ko():up(t)&&t._u.set("Unknown"))}function dM(n,e){n.wu.Nt(e.targetId),wv(n).Qo(e)}function OH(n,e){n.wu.Nt(e),wv(n).jo(e)}function hM(n){n.wu=new LK({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),wv(n).start(),n._u.iu()}function fM(n){return up(n)&&!wv(n).Do()&&n.hu.size>0}function up(n){return 0===ot(n).lu.size}function RH(n){n.wu=void 0}function tY(n){return pM.apply(this,arguments)}function pM(){return pM=(0,Te.Z)(function*(n){n.hu.forEach((e,t)=>{dM(n,e)})}),pM.apply(this,arguments)}function nY(n,e){return gM.apply(this,arguments)}function gM(){return gM=(0,Te.Z)(function*(n,e){RH(n),fM(n)?(n._u.uu(e),hM(n)):n._u.set("Unknown")}),gM.apply(this,arguments)}function rY(n,e,t){return mM.apply(this,arguments)}function mM(){return mM=(0,Te.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof Sj&&2===e.state&&e.cause)try{yield(r=(0,Te.Z)(function*(i,s){const c=s.cause;for(const d of s.targetIds)i.hu.has(d)&&(yield i.remoteSyncer.rejectListen(d,c),i.hu.delete(d),i.wu.removeTarget(d))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield sI(n,r)}else if(e instanceof $S?n.wu.Ut(e):e instanceof Dj?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(jt.min()))try{const r=yield wH(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const c=i.wu.Yt(s);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.hu.get(f);y&&i.hu.set(f,y.withResumeToken(d.resumeToken,s))}}),c.targetMismatches.forEach(d=>{const f=i.hu.get(d);if(!f)return;i.hu.set(d,f.withResumeToken(Bi.EMPTY_BYTE_STRING,f.snapshotVersion)),OH(i,d);const y=new ap(f.target,d,1,f.sequenceNumber);dM(i,y)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){qe("RemoteStore","Failed to raise snapshot:",r),yield sI(n,r)}var r}),mM.apply(this,arguments)}function sI(n,e,t){return _M.apply(this,arguments)}function _M(){return _M=(0,Te.Z)(function*(n,e,t){if(!tp(e))throw e;n.lu.add(1),yield vv(n),n._u.set("Offline"),t||(t=()=>wH(n.localStore)),n.asyncQueue.enqueueRetryable((0,Te.Z)(function*(){qe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield DC(n)}))}),_M.apply(this,arguments)}function MH(n,e){return e().catch(t=>sI(n,t,e))}function bv(n){return yM.apply(this,arguments)}function yM(){return yM=(0,Te.Z)(function*(n){const e=ot(n),t=dp(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;iY(e);)try{const i=yield $7(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,sY(e,i)}catch(i){yield sI(e,i)}PH(e)&&FH(e)}),yM.apply(this,arguments)}function iY(n){return up(n)&&n.au.length<10}function sY(n,e){n.au.push(e);const t=dp(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function PH(n){return up(n)&&!dp(n).Do()&&n.au.length>0}function FH(n){dp(n).start()}function oY(n){return vM.apply(this,arguments)}function vM(){return vM=(0,Te.Z)(function*(n){dp(n).Xo()}),vM.apply(this,arguments)}function aY(n){return bM.apply(this,arguments)}function bM(){return bM=(0,Te.Z)(function*(n){const e=dp(n);for(const t of n.au)e.Ho(t.mutations)}),bM.apply(this,arguments)}function lY(n,e,t){return wM.apply(this,arguments)}function wM(){return wM=(0,Te.Z)(function*(n,e,t){const r=n.au.shift(),i=GR.from(r,e,t);yield MH(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield bv(n)}),wM.apply(this,arguments)}function cY(n,e){return CM.apply(this,arguments)}function CM(){return CM=(0,Te.Z)(function*(n,e){var t;e&&dp(n).zo&&(yield(t=(0,Te.Z)(function*(r,i){if(bj(s=i.code)&&s!==ge.ABORTED){const c=r.au.shift();dp(r).No(),yield MH(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield bv(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),PH(n)&&FH(n)}),CM.apply(this,arguments)}function LH(n,e){return TM.apply(this,arguments)}function TM(){return TM=(0,Te.Z)(function*(n,e){const t=ot(n);t.asyncQueue.verifyOperationInProgress(),qe("RemoteStore","RemoteStore received new credentials");const r=up(t);t.lu.add(3),yield vv(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield DC(t)}),TM.apply(this,arguments)}function EM(n,e){return DM.apply(this,arguments)}function DM(){return DM=(0,Te.Z)(function*(n,e){const t=ot(n);e?(t.lu.delete(2),yield DC(t)):e||(t.lu.add(2),yield vv(t),t._u.set("Unknown"))}),DM.apply(this,arguments)}function wv(n){return n.mu||(n.mu=function(e,t,r){const i=ot(e);return i.tu(),new Y7(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:tY.bind(null,n),Jr:nY.bind(null,n),Go:rY.bind(null,n)}),n.fu.push(function(){var e=(0,Te.Z)(function*(t){t?(n.mu.No(),fM(n)?hM(n):n._u.set("Unknown")):(yield n.mu.stop(),RH(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function dp(n){return n.gu||(n.gu=function(e,t,r){const i=ot(e);return i.tu(),new Q7(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:oY.bind(null,n),Jr:cY.bind(null,n),Yo:aY.bind(null,n),Jo:lY.bind(null,n)}),n.fu.push(function(){var e=(0,Te.Z)(function*(t){t?(n.gu.No(),yield bv(n)):(yield n.gu.stop(),n.au.length>0&&(qe("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class SM{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,s){const c=Date.now()+r,d=new SM(e,t,c,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Be(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cv(n,e){if(hi("AsyncQueue",`${e}: ${n}`),tp(n))return new Be(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Tv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||rt.comparator(t.key,r.key):(t,r)=>rt.comparator(t.key,r.key),this.keyedMap=lC(),this.sortedSet=new Kr(this.comparator)}static emptySet(e){return new Tv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Tv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class UH{constructor(){this.yu=new Kr(rt.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):pt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ev{constructor(e,t,r,i,s,c,d,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new Ev(e,t,Tv.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class uY{constructor(){this.Iu=void 0,this.listeners=[]}}class dY{constructor(){this.queries=new op(e=>ij(e),sC),this.onlineState="Unknown",this.Tu=new Set}}function IM(n,e){return AM.apply(this,arguments)}function AM(){return AM=(0,Te.Z)(function*(n,e){const t=ot(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new uY),i)try{s.Iu=yield t.onListen(r)}catch(c){const d=Cv(c,`Initialization of query '${FR(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.Eu(t.onlineState),s.Iu&&e.Au(s.Iu)&&kM(t)}),AM.apply(this,arguments)}function NM(n,e){return xM.apply(this,arguments)}function xM(){return xM=(0,Te.Z)(function*(n,e){const t=ot(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const c=s.listeners.indexOf(e);c>=0&&(s.listeners.splice(c,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),xM.apply(this,arguments)}function hY(n,e){const t=ot(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const d of c.listeners)d.Au(i)&&(r=!0);c.Iu=i}}r&&kM(t)}function fY(n,e,t){const r=ot(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function kM(n){n.Tu.forEach(e=>{e.next()})}class OM{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ev(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Ev.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class pY{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class BH{constructor(e){this.wt=e}Wi(e){return Mu(this.wt,e)}zi(e){return e.metadata.exists?Pj(this.wt,e.document,!1):Xn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return es(e)}}class gY{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=VH(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=gn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new BH(this.wt);for(const i of e)if(i.metadata.queries){const s=r.Wi(i.metadata.name);for(const c of i.metadata.queries){const d=(t.get(c)||Jt()).add(s);t.set(c,d)}}return t}complete(){var e=this;return(0,Te.Z)(function*(){const t=yield function G7(n,e,t,r){return nM.apply(this,arguments)}(e.localStore,new BH(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield q7(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function VH(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class jH{constructor(e){this.key=e}}class HH{constructor(e){this.key=e}}class $H{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Jt(),this.mutatedKeys=Jt(),this.Lu=oj(e),this.Uu=new Tv(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new UH,i=t?t.Uu:this.Uu;let s=t?t.mutatedKeys:this.mutatedKeys,c=i,d=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,E)=>{const A=i.get(w),k=LR(this.query,E)?E:null,M=!!A&&this.mutatedKeys.has(A.key),V=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let W=!1;A&&k?A.data.isEqual(k.data)?M!==V&&(r.track({type:3,doc:k}),W=!0):this.Qu(A,k)||(r.track({type:2,doc:k}),W=!0,(f&&this.Lu(k,f)>0||y&&this.Lu(k,y)<0)&&(d=!0)):!A&&k?(r.track({type:0,doc:k}),W=!0):A&&!k&&(r.track({type:1,doc:A}),W=!0,(f||y)&&(d=!0)),W&&(k?(c=c.add(k),s=V?s.add(w):s.delete(w)):(c=c.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const w="F"===this.query.limitType?c.last():c.first();c=c.delete(w.key),s=s.delete(w.key),r.track({type:1,doc:w})}return{Uu:c,Gu:r,Mi:d,mutatedKeys:s}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((y,w)=>function(E,A){const k=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return k(E)-k(A)}(y.type,w.type)||this.Lu(y.doc,w.doc)),this.ju(r);const c=t?this.Wu():[],d=0===this.Bu.size&&this.current?1:0,f=d!==this.$u;return this.$u=d,0!==s.length||f?{snapshot:new Ev(this.query,e.Uu,i,s,e.mutatedKeys,0===d,f,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new UH,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Jt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new HH(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new jH(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Jt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Ev.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class mY{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _Y{constructor(e){this.key=e,this.Xu=!1}}class yY{constructor(e,t,r,i,s,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.Zu={},this.tc=new op(d=>ij(d),sC),this.ec=new Map,this.nc=new Set,this.sc=new Kr(rt.comparator),this.ic=new Map,this.rc=new KR,this.oc={},this.uc=new Map,this.cc=Nm.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function vY(n,e){return RM.apply(this,arguments)}function RM(){return RM=(0,Te.Z)(function*(n,e){const t=nP(n);let r,i;const s=t.tc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const c=yield _v(t.localStore,Bo(e));t.isPrimaryClient&&iI(t.remoteStore,c);const d=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield MM(t,e,r,"current"===d)}return i}),RM.apply(this,arguments)}function MM(n,e,t,r){return PM.apply(this,arguments)}function PM(){return PM=(0,Te.Z)(function*(n,e,t,r){n.hc=(w,E,A)=>{return(k=(0,Te.Z)(function*(M,V,W,ne){let he=V.view.Ku(W);he.Mi&&(he=yield eI(M.localStore,V.query,!1).then(({documents:Le})=>V.view.Ku(Le,he)));const Ie=ne&&ne.targetChanges.get(V.targetId),me=V.view.applyChanges(he,M.isPrimaryClient,Ie);return qM(M,V.targetId,me.zu),me.snapshot}),function(M,V,W,ne){return k.apply(this,arguments)})(n,w,E,A);var k};const i=yield eI(n.localStore,e,!0),s=new $H(e,i.ji),c=s.Ku(i.documents),d=dC.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),f=s.applyChanges(c,n.isPrimaryClient,d);qM(n,t,f.zu);const y=new mY(e,t,s);return n.tc.set(e,y),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),f.snapshot}),PM.apply(this,arguments)}function bY(n,e){return FM.apply(this,arguments)}function FM(){return FM=(0,Te.Z)(function*(n,e){const t=ot(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(s=>!sC(s,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield yv(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),SC(t.remoteStore,r.targetId),Dv(t,r.targetId)}).catch(ep))):(Dv(t,r.targetId),yield yv(t.localStore,r.targetId,!0))}),FM.apply(this,arguments)}function LM(){return LM=(0,Te.Z)(function*(n,e,t){const r=rP(n);try{const i=yield function(s,c){const d=ot(s),f=Dr.now(),y=c.reduce((A,k)=>A.add(k.key),Jt());let w,E;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let k=Vo(),M=Jt();return d.Ui.getEntries(A,y).next(V=>{k=V,k.forEach((W,ne)=>{ne.isValidDocument()||(M=M.add(W))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,k)).next(V=>{w=V;const W=[];for(const ne of c){const he=kK(ne,w.get(ne.key).overlayedDocument);null!=he&&W.push(new fh(ne.key,he,KV(he.value.mapValue),Ur.exists(!0)))}return d.mutationQueue.addMutationBatch(A,f,W,c)}).next(V=>{E=V;const W=V.applyToLocalDocumentSet(w,M);return d.documentOverlayCache.saveOverlays(A,V.batchId,W)})}).then(()=>({batchId:E.batchId,changes:Tj(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,d){let f=s.oc[s.currentUser.toKey()];f||(f=new Kr(Wt)),f=f.insert(c,d),s.oc[s.currentUser.toKey()]=f}(r,i.batchId,t),yield ph(r,i.changes),yield bv(r.remoteStore)}catch(i){const s=Cv(i,"Failed to persist write");t.reject(s)}}),LM.apply(this,arguments)}function GH(n,e){return UM.apply(this,arguments)}function UM(){return UM=(0,Te.Z)(function*(n,e){const t=ot(n);try{const r=yield function H7(n,e){const t=ot(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const d=[];e.targetChanges.forEach((w,E)=>{const A=i.get(E);if(!A)return;d.push(t.Vs.removeMatchingKeys(s,w.removedDocuments,E).next(()=>t.Vs.addMatchingKeys(s,w.addedDocuments,E)));let k=A.withSequenceNumber(s.currentSequenceNumber);var M,V,W;e.targetMismatches.has(E)?k=k.withResumeToken(Bi.EMPTY_BYTE_STRING,jt.min()).withLastLimboFreeSnapshotVersion(jt.min()):w.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(w.resumeToken,r)),i=i.insert(E,k),V=k,W=w,(0===(M=A).resumeToken.approximateByteSize()||V.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8||W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0)&&d.push(t.Vs.updateTargetData(s,k))});let f=Vo(),y=Jt();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,w))}),d.push(CH(s,c,e.documentUpdates).next(w=>{f=w.Gi,y=w.Qi})),!r.isEqual(jt.min())){const w=t.Vs.getLastRemoteSnapshotVersion(s).next(E=>t.Vs.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(w)}return de.waitFor(d).next(()=>c.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,f,y)).next(()=>f)}).then(s=>(t.$i=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const c=t.ic.get(s);c&&($t(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?$t(c.Xu):i.removedDocuments.size>0&&($t(c.Xu),c.Xu=!1))}),yield ph(t,r,e)}catch(r){yield ep(r)}}),UM.apply(this,arguments)}function qH(n,e,t){const r=ot(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((s,c)=>{const d=c.view.Eu(e);d.snapshot&&i.push(d.snapshot)}),function(s,c){const d=ot(s);d.onlineState=c;let f=!1;d.queries.forEach((y,w)=>{for(const E of w.listeners)E.Eu(c)&&(f=!0)}),f&&kM(d)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function CY(n,e,t){return BM.apply(this,arguments)}function BM(){return BM=(0,Te.Z)(function*(n,e,t){const r=ot(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),s=i&&i.key;if(s){let c=new Kr(rt.comparator);c=c.insert(s,Xn.newNoDocument(s,jt.min()));const d=Jt().add(s),f=new uC(jt.min(),new Map,new Hn(Wt),c,d);yield GH(r,f),r.sc=r.sc.remove(s),r.ic.delete(e),zM(r)}else yield yv(r.localStore,e,!1).then(()=>Dv(r,e,t)).catch(ep)}),BM.apply(this,arguments)}function TY(n,e){return VM.apply(this,arguments)}function VM(){return VM=(0,Te.Z)(function*(n,e){const t=ot(n),r=e.batch.batchId;try{const i=yield function j7(n,e){const t=ot(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Ui.newChangeBuffer({trackRemovals:!0});return function(c,d,f,y){const w=f.batch,E=w.keys();let A=de.resolve();return E.forEach(k=>{A=A.next(()=>y.getEntry(d,k)).next(M=>{const V=f.docVersions.get(k);$t(null!==V),M.version.compareTo(V)<0&&(w.applyToRemoteDocument(M,f),M.isValidDocument()&&(M.setReadTime(f.commitVersion),y.addEntry(M)))})}),A.next(()=>c.mutationQueue.removeMutationBatch(d,w))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=Jt();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);GM(t,r,null),$M(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ph(t,i)}catch(i){yield ep(i)}}),VM.apply(this,arguments)}function EY(n,e,t){return jM.apply(this,arguments)}function jM(){return jM=(0,Te.Z)(function*(n,e,t){const r=ot(n);try{const i=yield function(s,c){const d=ot(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let y;return d.mutationQueue.lookupMutationBatch(f,c).next(w=>($t(null!==w),y=w.keys(),d.mutationQueue.removeMutationBatch(f,w))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,y,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y)).next(()=>d.localDocuments.getDocuments(f,y))})}(r.localStore,e);GM(r,e,t),$M(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ph(r,i)}catch(i){yield ep(i)}}),jM.apply(this,arguments)}function HM(){return HM=(0,Te.Z)(function*(n,e){const t=ot(n);up(t.remoteStore)||qe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const c=ot(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=Cv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),HM.apply(this,arguments)}function $M(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function GM(n,e,t){const r=ot(n);let i=r.oc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function Dv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||zH(n,r)})}function zH(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(SC(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),zM(n))}function qM(n,e,t){for(const r of t)r instanceof jH?(n.rc.addReference(r.key,e),SY(n,r)):r instanceof HH?(qe("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||zH(n,r.key)):pt()}function SY(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(qe("SyncEngine","New document in limbo: "+t),n.nc.add(r),zM(n))}function zM(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new rt(gn.fromString(e)),r=n.cc.next();n.ic.set(r,new _Y(t)),n.sc=n.sc.insert(t,r),iI(n.remoteStore,new ap(Bo(av(t.path)),r,2,Uo.ot))}}function ph(n,e,t){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,Te.Z)(function*(n,e,t){const r=ot(n),i=[],s=[],c=[];var d;r.tc.isEmpty()||(r.tc.forEach((d,f)=>{c.push(r.hc(f,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,y.fromCache?"not-current":"current"),i.push(y);const w=XR.Vi(f.targetId,y);s.push(w)}}))}),yield Promise.all(c),r.Zu.Go(i),yield(d=(0,Te.Z)(function*(f,y){const w=ot(f);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>de.forEach(y,A=>de.forEach(A.Pi,k=>w.persistence.referenceDelegate.addReference(E,A.targetId,k)).next(()=>de.forEach(A.vi,k=>w.persistence.referenceDelegate.removeReference(E,A.targetId,k)))))}catch(E){if(!tp(E))throw E;qe("LocalStore","Failed to update sequence numbers: "+E)}for(const E of y){const A=E.targetId;if(!E.fromCache){const k=w.$i.get(A),V=k.withLastLimboFreeSnapshotVersion(k.snapshotVersion);w.$i=w.$i.insert(A,V)}}}),function(f,y){return d.apply(this,arguments)})(r.localStore,s))}),ZM.apply(this,arguments)}function IY(n,e){return WM.apply(this,arguments)}function WM(){return WM=(0,Te.Z)(function*(n,e){const t=ot(n);if(!t.currentUser.isEqual(e)){qe("SyncEngine","User change. New user:",e.toKey());const r=yield bH(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(c=>{c.forEach(d=>{d.reject(new Be(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ph(t,r.Ki)}var i}),WM.apply(this,arguments)}function AY(n,e){const t=ot(n),r=t.ic.get(e);if(r&&r.Xu)return Jt().add(r.key);{let i=Jt();const s=t.ec.get(e);if(!s)return i;for(const c of s){const d=t.tc.get(c);i=i.unionWith(d.view.qu)}return i}}function NY(n,e){return KM.apply(this,arguments)}function KM(){return KM=(0,Te.Z)(function*(n,e){const t=ot(n),r=yield eI(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&qM(t,e.targetId,i.zu),i}),KM.apply(this,arguments)}function xY(n,e){return YM.apply(this,arguments)}function YM(){return YM=(0,Te.Z)(function*(n,e){const t=ot(n);return EH(t.localStore,e).then(r=>ph(t,r))}),YM.apply(this,arguments)}function kY(n,e,t,r){return QM.apply(this,arguments)}function QM(){return QM=(0,Te.Z)(function*(n,e,t,r){const i=ot(n),s=yield function(c,d){const f=ot(c),y=ot(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",w=>y.yn(w,d).next(E=>E?f.localDocuments.getDocuments(w,E):de.resolve(null)))}(i.localStore,e);var d;null!==s?("pending"===t?yield bv(i.remoteStore):"acknowledged"===t||"rejected"===t?(GM(i,e,r||null),$M(i,e),d=e,ot(ot(i.localStore).mutationQueue).In(d)):pt(),yield ph(i,s)):qe("SyncEngine","Cannot apply mutation batch with id: "+e)}),QM.apply(this,arguments)}function JM(){return JM=(0,Te.Z)(function*(n,e){const t=ot(n);if(nP(t),rP(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield ZH(t,r.toArray());t.ac=!0,yield EM(t.remoteStore,!0);for(const s of i)iI(t.remoteStore,s)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((s,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Dv(t,c),yv(t.localStore,c,!0))),SC(t.remoteStore,c)}),yield i,yield ZH(t,r),function(s){const c=ot(s);c.ic.forEach((d,f)=>{SC(c.remoteStore,f)}),c.rc.cs(),c.ic=new Map,c.sc=new Kr(rt.comparator)}(t),t.ac=!1,yield EM(t.remoteStore,!1)}}),JM.apply(this,arguments)}function ZH(n,e,t){return XM.apply(this,arguments)}function XM(){return XM=(0,Te.Z)(function*(n,e,t){const r=ot(n),i=[],s=[];for(const c of e){let d;const f=r.ec.get(c);if(f&&0!==f.length){d=yield _v(r.localStore,Bo(f[0]));for(const y of f){const w=r.tc.get(y),E=yield NY(r,w);E.snapshot&&s.push(E.snapshot)}}else{const y=yield TH(r.localStore,c);d=yield _v(r.localStore,y),yield MM(r,WH(y),c,!1)}i.push(d)}return r.Zu.Go(s),i}),XM.apply(this,arguments)}function WH(n){return nj(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function RY(n){const e=ot(n);return ot(ot(e.localStore).persistence).Ri()}function MY(n,e,t,r){return eP.apply(this,arguments)}function eP(){return eP=(0,Te.Z)(function*(n,e,t,r){const i=ot(n);if(i.ac)return void qe("SyncEngine","Ignoring unexpected query state notification.");const s=i.ec.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const c=yield EH(i.localStore,sj(s[0])),d=uC.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ph(i,c,d);break}case"rejected":yield yv(i.localStore,e,!0),Dv(i,e,r);break;default:pt()}}),eP.apply(this,arguments)}function PY(n,e,t){return tP.apply(this,arguments)}function tP(){return tP=(0,Te.Z)(function*(n,e,t){const r=nP(n);if(r.ac){for(const i of e){if(r.ec.has(i)){qe("SyncEngine","Adding an already active target "+i);continue}const s=yield TH(r.localStore,i),c=yield _v(r.localStore,s);yield MM(r,WH(s),c.targetId,!1),iI(r.remoteStore,c)}for(const i of t)r.ec.has(i)&&(yield yv(r.localStore,i,!1).then(()=>{SC(r.remoteStore,i),Dv(r,i)}).catch(ep))}}),tP.apply(this,arguments)}function nP(n){const e=ot(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CY.bind(null,e),e.Zu.Go=hY.bind(null,e.eventManager),e.Zu.lc=fY.bind(null,e.eventManager),e}function rP(n){const e=ot(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EY.bind(null,e),e}class KH{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Te.Z)(function*(){t.wt=EC(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return vH(this.persistence,new yH,e.initialUser,this.wt)}_c(e){return new mH(JS.Os,this.wt)}dc(e){return new AH}terminate(){var e=this;return(0,Te.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class YH extends KH{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield rP(r.yc.syncEngine),yield bv(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return vH(this.persistence,new yH,e.initialUser,this.wt)}mc(e,t){return new S7(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new cK(t,this.persistence);return new lK(e.asyncQueue,r)}_c(e){const t=JR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?jo.withCacheSize(this.cacheSizeBytes):jo.DEFAULT;return new QR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,xH(),rI(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new AH}}class LY extends YH{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof aM&&(r.sharedClientState.syncEngine={kr:kY.bind(null,i),Mr:MY.bind(null,i),Or:PY.bind(null,i),Ri:RY.bind(null,i),Nr:xY.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var s=(0,Te.Z)(function*(c){yield function OY(n,e){return JM.apply(this,arguments)}(r.yc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}dc(e){const t=xH();if(!aM.V(t))throw new Be(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=JR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new aM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class iP{initialize(e,t){var r=this;return(0,Te.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>qH(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=IY.bind(null,r.syncEngine),yield EM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new dY}createDatastore(e){const t=EC(e.databaseInfo.databaseId),r=new K7(e.databaseInfo);return new J7(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=d=>qH(this.syncEngine,d,0),c=NH.V()?new NH:new z7,new eY(t,r,i,s,c);var t,r,i,s,c}createSyncEngine(e,t){return function(r,i,s,c,d,f,y){const w=new yY(r,i,s,c,d,f);return y&&(w.ac=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Te.Z)(function*(t){const r=ot(t);qe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield vv(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function QH(n,e=10240){let t=0;return{read:()=>(0,Te.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Te.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class oI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class UY{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Xi,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Te.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Te.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Te.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const s=yield e.vc(i);return new pY(JSON.parse(s),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Te.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,Te.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Te.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class BY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Te.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Be(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Te.Z)(function*(s,c){const d=ot(s),f=pC(d.wt)+"/documents",y={documents:c.map(k=>fC(d.wt,k))},w=yield d.ao("BatchGetDocuments",f,y,c.length),E=new Map;w.forEach(k=>{const M=function HK(n,e){return"found"in e?function(t,r){$t(!!r.found);const i=Mu(t,r.found.name),s=es(r.found.updateTime),c=new ms({mapValue:{fields:r.found.fields}});return Xn.newFoundDocument(i,s,c)}(n,e):"missing"in e?function(t,r){$t(!!r.missing),$t(!!r.readTime);const i=Mu(t,r.missing),s=es(r.readTime);return Xn.newNoDocument(i,s)}(n,e):pt()}(d.wt,k);E.set(M.key.toString(),M)});const A=[];return c.forEach(k=>{const M=E.get(k.toString());$t(!!M),A.push(M)}),A}),function(s,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new hv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Te.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=rt.fromPath(i);e.mutations.push(new UR(s,e.precondition(s)))}),yield(r=(0,Te.Z)(function*(i,s){const c=ot(i),d=pC(c.wt)+"/documents",f={writes:s.map(y=>gC(c.wt,y))};yield c.ro("Commit",d,f)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pt();t=jt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Be(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ur.updateTime(t):Ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(jt.min()))throw new Be(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ur.updateTime(t)}return Ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class VY{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Dc=r.maxAttempts,this.So=new lM(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Te.Z)(function*(){const t=new BY(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Nc(s)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!Xw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!bj(t)}return!1}}class jY{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ji.UNAUTHENTICATED,this.clientId=kV.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Te.Z)(function*(d){qe("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(qe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Te.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Be(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Cv(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function JH(n,e){return sP.apply(this,arguments)}function sP(){return sP=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),qe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Te.Z)(function*(s){r.isEqual(s)||(yield bH(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),sP.apply(this,arguments)}function XH(n,e){return oP.apply(this,arguments)}function oP(){return oP=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield aP(n);qe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>LH(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>LH(e.remoteStore,s)),n.onlineComponents=e}),oP.apply(this,arguments)}function aP(n){return lP.apply(this,arguments)}function lP(){return lP=(0,Te.Z)(function*(n){return n.offlineComponents||(qe("FirestoreClient","Using default OfflineComponentProvider"),yield JH(n,new KH)),n.offlineComponents}),lP.apply(this,arguments)}function aI(n){return cP.apply(this,arguments)}function cP(){return cP=(0,Te.Z)(function*(n){return n.onlineComponents||(qe("FirestoreClient","Using default OnlineComponentProvider"),yield XH(n,new iP)),n.onlineComponents}),cP.apply(this,arguments)}function e3(n){return aP(n).then(e=>e.persistence)}function lI(n){return aP(n).then(e=>e.localStore)}function t3(n){return aI(n).then(e=>e.remoteStore)}function uP(n){return aI(n).then(e=>e.syncEngine)}function Sv(n){return dP.apply(this,arguments)}function dP(){return dP=(0,Te.Z)(function*(n){const e=yield aI(n),t=e.eventManager;return t.onListen=vY.bind(null,e.syncEngine),t.onUnlisten=bY.bind(null,e.syncEngine),t}),dP.apply(this,arguments)}function n3(n,e,t={}){const r=new Xi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,s,c,d,f){const y=new oI({next:E=>{s.enqueueAndForget(()=>NM(i,w));const A=E.docs.has(c);!A&&E.fromCache?f.reject(new Be(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&d&&"server"===d.source?f.reject(new Be(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),w=new OM(av(c.path),y,{includeMetadataChanges:!0,Du:!0});return IM(i,w)}(yield Sv(n),n.asyncQueue,e,t,r)})),r.promise}function r3(n,e,t={}){const r=new Xi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,s,c,d,f){const y=new oI({next:E=>{s.enqueueAndForget(()=>NM(i,w)),E.fromCache&&"server"===d.source?f.reject(new Be(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),w=new OM(c,y,{includeMetadataChanges:!0,Du:!0});return IM(i,w)}(yield Sv(n),n.asyncQueue,e,t,r)})),r.promise}const s3=new Map;function hP(n,e,t){if(!t)throw new Be(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function o3(n,e,t,r){if(!0===e&&!0===r)throw new Be(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function a3(n){if(!rt.isDocumentKey(n))throw new Be(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function l3(n){if(rt.isDocumentKey(n))throw new Be(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":pt()}function pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Be(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cI(n);throw new Be(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function c3(n,e){if(e<=0)throw new Be(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class u3{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Be(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Be(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,o3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class IC{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u3({}),this._settingsFrozen=!1,e instanceof dh?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Be(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dh(i.options.projectId)}(e))}get app(){if(!this._app)throw new Be(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Be(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u3(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Y5;switch(t.type){case"gapi":const r=t.client;return $t(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new eK(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Be(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=s3.get(e);t&&(qe("ComponentProvider","Removing Datastore"),s3.delete(e),t.terminate())}(this),Promise.resolve()}}class dr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dr(this.firestore,e,this._key)}}class Ps{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ps(this.firestore,e,this._query)}}class Fu extends Ps{constructor(e,t,r){super(e,t,av(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dr(this.firestore,null,new rt(e))}withConverter(e){return new Fu(this.firestore,e,this._path)}}function d3(n,e,...t){if(n=(0,F.m9)(n),hP("collection","path",e),n instanceof IC){const r=gn.fromString(e,...t);return l3(r),new Fu(n,null,r)}{if(!(n instanceof dr||n instanceof Fu))throw new Be(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gn.fromString(e,...t));return l3(r),new Fu(n.firestore,null,r)}}function uI(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=kV.I()),hP("doc","path",e),n instanceof IC){const r=gn.fromString(e,...t);return a3(r),new dr(n,null,new rt(r))}{if(!(n instanceof dr||n instanceof Fu))throw new Be(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gn.fromString(e,...t));return a3(r),new dr(n.firestore,n instanceof Fu?n.converter:null,new rt(r))}}function h3(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof dr||n instanceof Fu)&&(e instanceof dr||e instanceof Fu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function f3(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof Ps&&e instanceof Ps&&n.firestore===e.firestore&&sC(n._query,e._query)&&n.converter===e.converter}class JY{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new lM(this,"async_queue_retry"),this.Kc=()=>{const t=rI();t&&qe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=rI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=rI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Xi;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,Te.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!tp(t))throw t;qe("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,hi("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=SM.createAndSchedule(this,e,t,r,s=>this.Wc(s));return this.$c.push(i),i}Gc(){this.Bc&&pt()}verifyOperationInProgress(){}zc(){var e=this;return(0,Te.Z)(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function fP(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class XY{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Sr extends IC{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new JY,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||p3(this),this._firestoreClient.terminate()}}function Ei(n){return n._firestoreClient||p3(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function p3(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new hK(n._databaseId,s,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new jY(n._authCredentials,n._appCheckCredentials,n._queue,r)}function g3(n,e,t){const r=new Xi;return n.asyncQueue.enqueue((0,Te.Z)(function*(){try{yield JH(n,t),yield XH(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(c=s).name?c.code===ge.FAILED_PRECONDITION||c.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw s;fm("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var c})).then(()=>r.promise)}function m3(n){if(n._initialized||n._terminated)throw new Be(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class gh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Be(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lu(Bi.fromBase64String(e))}catch(t){throw new Be(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lu(Bi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class km{constructor(e){this._methodName=e}}class dI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Be(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Be(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const c9=/^__.*__$/;class u9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new fh(e,this.data,this.fieldMask,t,this.fieldTransforms):new dv(e,this.data,t,this.fieldTransforms)}}class _3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function y3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class hI{constructor(e,t,r,i,s,c){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new hI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return gI(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(y3(this.Zc)&&c9.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class d9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||EC(e)}aa(e,t,r,i=!1){return new hI({Zc:e,methodName:t,ca:r,path:Wr.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Om(n){const e=n._freezeSettings(),t=EC(n._databaseId);return new d9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fI(n,e,t,r,i,s={}){const c=n.aa(s.merge||s.mergeFields?2:0,e,t,i);_P("Data must be an object, but it was:",c,r);const d=w3(r,c);let f,y;if(s.merge)f=new Sa(c.fieldMask),y=c.fieldTransforms;else if(s.mergeFields){const w=[];for(const E of s.mergeFields){const A=yP(e,E,t);if(!c.contains(A))throw new Be(ge.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);T3(w,A)||w.push(A)}f=new Sa(w),y=c.fieldTransforms.filter(E=>f.covers(E.field))}else f=null,y=c.fieldTransforms;return new u9(new ms(d),f,y)}class AC extends km{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof AC}}function v3(n,e,t){return new hI({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class pP extends km{_toFieldTransform(e){return new oC(e.path,new cv)}isEqual(e){return e instanceof pP}}class h9 extends km{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=v3(this,e,!0),r=this.ha.map(s=>Rm(s,t)),i=new wm(r);return new oC(e.path,i)}isEqual(e){return this===e}}class f9 extends km{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=v3(this,e,!0),r=this.ha.map(s=>Rm(s,t)),i=new Cm(r);return new oC(e.path,i)}isEqual(e){return this===e}}class p9 extends km{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new uv(e.wt,cj(e.wt,this.la));return new oC(e.path,t)}isEqual(e){return this===e}}function gP(n,e,t,r){const i=n.aa(1,e,t);_P("Data must be an object, but it was:",i,r);const s=[],c=ms.empty();mm(r,(f,y)=>{const w=pI(e,f,t);y=(0,F.m9)(y);const E=i.ia(w);if(y instanceof AC)s.push(w);else{const A=Rm(y,E);null!=A&&(s.push(w),c.set(w,A))}});const d=new Sa(s);return new _3(c,d,i.fieldTransforms)}function mP(n,e,t,r,i,s){const c=n.aa(1,e,t),d=[yP(e,r,t)],f=[i];if(s.length%2!=0)throw new Be(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<s.length;A+=2)d.push(yP(e,s[A])),f.push(s[A+1]);const y=[],w=ms.empty();for(let A=d.length-1;A>=0;--A)if(!T3(y,d[A])){const k=d[A];let M=f[A];M=(0,F.m9)(M);const V=c.ia(k);if(M instanceof AC)y.push(k);else{const W=Rm(M,V);null!=W&&(y.push(k),w.set(k,W))}}const E=new Sa(y);return new _3(w,E,c.fieldTransforms)}function b3(n,e,t,r=!1){return Rm(t,n.aa(r?4:3,e))}function Rm(n,e){if(C3(n=(0,F.m9)(n)))return _P("Unsupported field value:",e,n),w3(n,e);if(n instanceof km)return function(t,r){if(!y3(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const c of t){let d=Rm(c,r.ra(s));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return cj(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Dr.fromDate(t);return{timestampValue:hC(r.wt,i)}}if(t instanceof Dr){const i=new Dr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:hC(r.wt,i)}}if(t instanceof dI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Lu)return{bytesValue:xj(r.wt,t._byteString)};if(t instanceof dr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:BR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${cI(t)}`)}(n,e)}function w3(n,e){const t={};return BV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mm(n,(r,i)=>{const s=Rm(i,e.ea(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function C3(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Dr||n instanceof dI||n instanceof Lu||n instanceof dr||n instanceof km)}function _P(n,e,t){if(!C3(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=cI(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function yP(n,e,t){if((e=(0,F.m9)(e))instanceof gh)return e._internalPath;if("string"==typeof e)return pI(n,e);throw gI("Field path arguments must be of type string or ",n,!1,void 0,t)}const g9=new RegExp("[~\\*/\\[\\]]");function pI(n,e,t){if(e.search(g9)>=0)throw gI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gh(...e.split("."))._internalPath}catch{throw gI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gI(n,e,t,r,i){const s=r&&!r.isEmpty(),c=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||c)&&(f+=" (found",s&&(f+=` in field ${r}`),c&&(f+=` in document ${i}`),f+=")"),new Be(ge.INVALID_ARGUMENT,d+n+f)}function T3(n,e){return n.some(t=>t.isEqual(e))}class NC{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new dr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new m9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class m9 extends NC{data(){return super.data()}}function mI(n,e){return"string"==typeof e?pI(n,e):e instanceof gh?e._internalPath:e._delegate._internalPath}class Mm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mh extends NC{constructor(e,t,r,i,s,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(mI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class xC extends mh{data(e={}){return super.data(e)}}class hp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Mm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new xC(this._firestore,this._userDataWriter,r.key,r,new Mm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Be(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new xC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Mm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const d=new xC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Mm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,y=-1;return 0!==c.type&&(f=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),y=s.indexOf(c.doc.key)),{type:_9(c.type),doc:d,oldIndex:f,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function _9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}function E3(n,e){return n instanceof mh&&e instanceof mh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof hp&&e instanceof hp&&n._firestore===e._firestore&&f3(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function D3(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Be(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kC{}function fp(n,...e){for(const t of e)n=t._apply(n);return n}class y9 extends kC{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=Om(e.firestore),r=function(i,s,c,d,f,y,w){let E;if(f.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Be(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){k3(w,y);const k=[];for(const M of w)k.push(x3(d,i,M));E={arrayValue:{values:k}}}else E=x3(d,i,w)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||k3(w,y),E=b3(c,"where",w,"in"===y||"not-in"===y);const A=_s.create(f,y,E);return function(k,M){if(M.ht()){const W=MR(k);if(null!==W&&!W.isEqual(M.field))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${W.toString()}' and '${M.field.toString()}'`);const ne=RR(k);null!==ne&&O3(0,M.field,ne)}const V=function(W,ne){for(const he of W.filters)if(ne.indexOf(he.op)>=0)return he.op;return null}(k,function(W){switch(W){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(M.op));if(null!==V)throw new Be(ge.INVALID_ARGUMENT,V===M.op?`Invalid query. You cannot use more than one '${M.op.toString()}' filter.`:`Invalid query. You cannot use '${M.op.toString()}' filters with '${V.toString()}' filters.`)}(i,A),A}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Ps(e.firestore,e.converter,function(i,s){const c=i.filters.concat([s]);return new hh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class b9 extends kC{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new ov(i,s);return function(d,f){if(null===RR(d)){const y=MR(d);null!==y&&O3(0,y,f.field)}}(r,c),c}(e._query,this.fa,this.wa);return new Ps(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new hh(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class S3 extends kC{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new Ps(e.firestore,e.converter,US(e._query,this.ma,this.ga))}}class I3 extends kC{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=N3(e,this.type,this.ya,this.pa);return new Ps(e.firestore,e.converter,(i=t,new hh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class A3 extends kC{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=N3(e,this.type,this.ya,this.pa);return new Ps(e.firestore,e.converter,(i=t,new hh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function N3(n,e,t,r){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof NC)return function(i,s,c,d,f){if(!d)throw new Be(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const w of lv(i))if(w.field.isKeyField())y.push(vm(s,d.key));else{const E=d.data.field(w.field);if(xR(E))throw new Be(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===E){const A=w.field.canonicalString();throw new Be(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(E)}return new sp(y,f)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Om(n.firestore);return function(s,c,d,f,y,w){const E=s.explicitOrderBy;if(y.length>E.length)throw new Be(ge.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let k=0;k<y.length;k++){const M=y[k];if(E[k].field.isKeyField()){if("string"!=typeof M)throw new Be(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof M}`);if(!PR(s)&&-1!==M.indexOf("/"))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${M}' contains a slash.`);const V=s.path.child(gn.fromString(M));if(!rt.isDocumentKey(V))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const W=new rt(V);A.push(vm(c,W))}else{const V=b3(d,f,M);A.push(V)}}return new sp(A,w)}(n._query,n.firestore._databaseId,i,e,t,r)}}function x3(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PR(e)&&-1!==t.indexOf("/"))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(gn.fromString(t));if(!rt.isDocumentKey(r))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vm(n,new rt(r))}if(t instanceof dr)return vm(n,t._key);throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cI(t)}.`)}function k3(n,e){if(!Array.isArray(n)||0===n.length)throw new Be(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Be(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function O3(n,e,t){if(!t.isEqual(e))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const A9={maxAttempts:5};class vP{convertValue(e,t="none"){switch(ym(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_m(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw pt()}}convertObject(e,t){const r={};return mm(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new dI(Yr(e.latitude),Yr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=jV(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jw(e));default:return null}}convertTimestamp(e){const t=np(e);return new Dr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=gn.fromString(e);$t(Vj(r));const i=new dh(r.get(1),r.get(3)),s=new rt(r.popFirst(5));return i.isEqual(t)||hi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function _I(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class N9 extends vP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dr(this.firestore,null,t)}}class R3{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Om(e)}set(e,t,r){this._verifyNotCommitted();const i=pp(e,this._firestore),s=_I(i.converter,t,r),c=fI(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Ur.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=pp(e,this._firestore);let c;return c="string"==typeof(t=(0,F.m9)(t))||t instanceof gh?mP(this._dataReader,"WriteBatch.update",s._key,t,r,i):gP(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(c.toMutation(s._key,Ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=pp(e,this._firestore);return this._mutations=this._mutations.concat(new hv(t._key,Ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pp(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new Be(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Pm extends vP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dr(this.firestore,null,t)}}function M3(n,e,t){n=pn(n,dr);const r=pn(n.firestore,Sr),i=_I(n.converter,e,t);return Iv(r,[fI(Om(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ur.none())])}function P3(n,e,t,...r){n=pn(n,dr);const i=pn(n.firestore,Sr),s=Om(i);let c;return c="string"==typeof(e=(0,F.m9)(e))||e instanceof gh?mP(s,"updateDoc",n._key,e,t,r):gP(s,"updateDoc",n._key,e),Iv(i,[c.toMutation(n._key,Ur.exists(!0))])}function F3(n,...e){var t,r,i;n=(0,F.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||fP(e[c])||(s=e[c],c++);const d={includeMetadataChanges:s.includeMetadataChanges};if(fP(e[c])){const E=e[c];e[c]=null===(t=E.next)||void 0===t?void 0:t.bind(E),e[c+1]=null===(r=E.error)||void 0===r?void 0:r.bind(E),e[c+2]=null===(i=E.complete)||void 0===i?void 0:i.bind(E)}let f,y,w;if(n instanceof dr)y=pn(n.firestore,Sr),w=av(n._key.path),f={next:E=>{e[c]&&e[c](bP(y,n,E))},error:e[c+1],complete:e[c+2]};else{const E=pn(n,Ps);y=pn(E.firestore,Sr),w=E._query;const A=new Pm(y);f={next:k=>{e[c]&&e[c](new hp(y,A,E,k))},error:e[c+1],complete:e[c+2]},D3(n._query)}return function(E,A,k,M){const V=new oI(M),W=new OM(A,V,k);return E.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return IM(yield Sv(E),W)})),()=>{V.Tc(),E.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return NM(yield Sv(E),W)}))}}(Ei(y),w,d,f)}function Iv(n,e){return function(t,r){const i=new Xi;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function wY(n,e,t){return LM.apply(this,arguments)}(yield uP(t),r,i)})),i.promise}(Ei(n),e)}function bP(n,e,t){const r=t.docs.get(e._key),i=new Pm(n);return new mh(n,i,e._key,r,new Mm(t.hasPendingWrites,t.fromCache),e.converter)}class B9 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Om(e)}get(e){const t=pp(e,this._firestore),r=new N9(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return pt();const s=i[0];if(s.isFoundDocument())return new NC(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new NC(this._firestore,r,t._key,null,t.converter);throw pt()})}set(e,t,r){const i=pp(e,this._firestore),s=_I(i.converter,t,r),c=fI(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const s=pp(e,this._firestore);let c;return c="string"==typeof(t=(0,F.m9)(t))||t instanceof gh?mP(this._dataReader,"Transaction.update",s._key,t,r,i):gP(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,c),this}delete(e){const t=pp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=pp(e,this._firestore),r=new Pm(this._firestore);return super.get(e).then(i=>new mh(this._firestore,r,t._key,i._document,new Mm(!1,!1),t.converter))}}!function(n,e=!0){nv=so.SDK_VERSION,(0,so._registerComponent)(new _c.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),s=new Sr(i,new J5(t.getProvider("auth-internal")),new tK(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),(0,so.registerVersion)(AV,"3.4.14",n),(0,so.registerVersion)(AV,"3.4.14","esm2017")}();function wP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function U3(){if(typeof Uint8Array>"u")throw new Be("unimplemented","Uint8Arrays are not available in this environment.")}function B3(){if(!function uK(){return typeof atob<"u"}())throw new Be("unimplemented","Blobs are unavailable in Firestore in this environment.")}class OC{constructor(e){this._delegate=e}static fromBase64String(e){return B3(),new OC(Lu.fromBase64String(e))}static fromUint8Array(e){return U3(),new OC(Lu.fromUint8Array(e))}toBase64(){return B3(),this._delegate.toBase64()}toUint8Array(){return U3(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function CP(n){return function W9(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class K9{enableIndexedDbPersistence(e,t){return function t9(n,e){m3(n=pn(n,Sr));const t=Ei(n),r=n._freezeSettings(),i=new iP;return g3(t,i,new YH(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function n9(n){m3(n=pn(n,Sr));const e=Ei(n),t=n._freezeSettings(),r=new iP;return g3(e,r,new LY(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function r9(n){if(n._initialized&&!n._terminated)throw new Be(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{yield(t=(0,Te.Z)(function*(r){if(!vc.V())return Promise.resolve();const i=r+"main";yield vc.delete(i)}),function(r){return t.apply(this,arguments)})(JR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class V3{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof dh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&fm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function YY(n,e,t,r={}){var i;const s=(n=pn(n,IC))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&fm("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,d;if("string"==typeof r.mockUserToken)c=r.mockUserToken,d=Ji.MOCK_USER;else{c=(0,F.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Be(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ji(f)}n._authCredentials=new Q5(new NV(c,d))}}(this._delegate,e,t,r)}enableNetwork(){return function s9(n){return function HY(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield e3(n),t=yield t3(n);return e.setNetworkEnabled(!0),function(r){const i=ot(r);return i.lu.delete(0),DC(i)}(t)}))}(Ei(n=pn(n,Sr)))}(this._delegate)}disableNetwork(){return function o9(n){return function $Y(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield e3(n),t=yield t3(n);return e.setNetworkEnabled(!1),(r=(0,Te.Z)(function*(i){const s=ot(i);s.lu.add(0),yield vv(s),s._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Ei(n=pn(n,Sr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,o3("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function i9(n){return function(e){const t=new Xi;return e.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function DY(n,e){return HM.apply(this,arguments)}(yield uP(e),t)})),t.promise}(Ei(n=pn(n,Sr)))}(this._delegate)}onSnapshotsInSync(e){return function U9(n,e){return function zY(n,e){const t=new oI(e);return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield Sv(n),i=t,ot(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield Sv(n),i=t,void ot(r).Tu.delete(i);var r,i}))}}(Ei(n=pn(n,Sr)),fP(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Av(this,d3(this._delegate,e))}catch(t){throw uo(t,"collection()","Firestore.collection()")}}doc(e){try{return new _l(this,uI(this._delegate,e))}catch(t){throw uo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ho(this,function QY(n,e){if(n=pn(n,IC),hP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Be(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ps(n,null,(t=e,new hh(gn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw uo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function V9(n,e,t){n=pn(n,Sr);const r=Object.assign(Object.assign({},A9),t);return function(i){if(i.maxAttempts<1)throw new Be(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function ZY(n,e,t){const r=new Xi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){const i=yield(s=n,aI(s).then(c=>c.datastore));var s;new VY(n.asyncQueue,i,t,e,r).run()})),r.promise}(Ei(n),i=>e(new B9(n,i)),r)}(this._delegate,t=>e(new j3(this,t)))}batch(){return Ei(this._delegate),new H3(new R3(this._delegate,e=>Iv(this._delegate,e)))}loadBundle(e){return function a9(n,e){const t=Ei(n=pn(n,Sr)),r=new XY;return function WY(n,e,t,r){const i=function(s,c){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,f=function(f,y){if(f instanceof Uint8Array)return QH(f,y);if(f instanceof ArrayBuffer)return QH(new Uint8Array(f),y);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new UY(f,c);var f}(t,EC(e));n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){!function FY(n,e,t){const r=ot(n);var i;(i=(0,Te.Z)(function*(s,c,d){try{const f=yield c.getMetadata();if(yield function(A,k){const M=ot(A),V=es(k.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",W=>M.Ds.getBundleMetadata(W,k.id)).then(W=>!!W&&W.createTime.compareTo(V)>=0)}(s.localStore,f))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(A=f).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);d._updateProgress(VH(f));const y=new gY(f,s.localStore,c.wt);let w=yield c.fc();for(;w;){const A=yield y.Nu(w);A&&d._updateProgress(A),w=yield c.fc()}const E=yield y.complete();return yield ph(s,E.Ou,void 0),yield function(A,k){const M=ot(A);return M.persistence.runTransaction("Save bundle","readwrite",V=>M.Ds.saveBundleMetadata(V,k))}(s.localStore,f),d._completeWith(E.progress),Promise.resolve(E.Mu)}catch(f){return fm("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var A}),function(s,c,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield uP(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function l9(n,e){return function KY(n,e){return n.asyncQueue.enqueue((0,Te.Z)(function*(){return function(t,r){const i=ot(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ds.getNamedQuery(s,r))}(yield lI(n),e)}))}(Ei(n=pn(n,Sr)),e).then(t=>t?new Ps(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ho(this,t):null)}}class yI extends vP{constructor(e){super(),this.firestore=e}convertBytes(e){return new OC(new Lu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return _l.forKey(t,this.firestore,null)}}class j3{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new yI(e)}get(e){const t=Lm(e);return this._delegate.get(t).then(r=>new RC(this._firestore,new mh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Lm(e);return r?(wP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Lm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Lm(e);return this._delegate.delete(t),this}}class H3{constructor(e){this._delegate=e}set(e,t,r){const i=Lm(e);return r?(wP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Lm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Lm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Fm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new xC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new MC(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Fm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Fm(e,new yI(e),t),i.set(t,s)),s}}Fm.INSTANCES=new WeakMap;class _l{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _l(t,new dr(t._delegate,r,new rt(e)))}static forKey(e,t,r){return new _l(t,new dr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Av(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Av(this.firestore,d3(this._delegate,e))}catch(t){throw uo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof dr&&h3(this._delegate,e)}set(e,t){t=wP("DocumentReference.set",t);try{return t?M3(this._delegate,e,t):M3(this._delegate,e)}catch(r){throw uo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?P3(this._delegate,e):P3(this._delegate,e,t,...r)}catch(i){throw uo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function F9(n){return Iv(pn(n.firestore,Sr),[new hv(n._key,Ur.none())])}(this._delegate)}onSnapshot(...e){const t=$3(e),r=G3(e,i=>new RC(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return F3(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function k9(n){n=pn(n,dr);const e=pn(n.firestore,Sr),t=Ei(e),r=new Pm(e);return function GY(n,e){const t=new Xi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,s,c){try{const d=yield function(f,y){const w=ot(f);return w.persistence.runTransaction("read document","readonly",E=>w.localDocuments.getDocument(E,y))}(i,s);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new Be(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=Cv(d,`Failed to get document '${s} from cache`);c.reject(f)}}),function(i,s,c){return r.apply(this,arguments)})(yield lI(n),e,t);var r})),t.promise}(t,n._key).then(i=>new mh(e,r,n._key,i,new Mm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function O9(n){n=pn(n,dr);const e=pn(n.firestore,Sr);return n3(Ei(e),n._key,{source:"server"}).then(t=>bP(e,n,t))}(this._delegate):function x9(n){n=pn(n,dr);const e=pn(n.firestore,Sr);return n3(Ei(e),n._key).then(t=>bP(e,n,t))}(this._delegate),t.then(r=>new RC(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new _l(this.firestore,this._delegate.withConverter(e?Fm.getInstance(this.firestore,e):null))}}function uo(n,e,t){return n.message=n.message.replace(e,t),n}function $3(n){for(const e of n)if("object"==typeof e&&!CP(e))return e;return{}}function G3(n,e){var t,r;let i;return i=CP(n[0])?n[0]:CP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class RC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new _l(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return E3(this._delegate,e._delegate)}}class MC extends RC{data(e){const t=this._delegate.data(e);return function K5(n,e){n||pt()}(void 0!==t),t}}class ho{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yI(e)}where(e,t,r){try{return new ho(this.firestore,fp(this._delegate,function v9(n,e,t){const r=e,i=mI("where",n);return new y9(i,r,t)}(e,t,r)))}catch(i){throw uo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ho(this.firestore,fp(this._delegate,function w9(n,e="asc"){const t=e,r=mI("orderBy",n);return new b9(r,t)}(e,t)))}catch(r){throw uo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ho(this.firestore,fp(this._delegate,function C9(n){return c3("limit",n),new S3("limit",n,"F")}(e)))}catch(t){throw uo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ho(this.firestore,fp(this._delegate,function T9(n){return c3("limitToLast",n),new S3("limitToLast",n,"L")}(e)))}catch(t){throw uo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ho(this.firestore,fp(this._delegate,function E9(...n){return new I3("startAt",n,!0)}(...e)))}catch(t){throw uo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ho(this.firestore,fp(this._delegate,function D9(...n){return new I3("startAfter",n,!1)}(...e)))}catch(t){throw uo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ho(this.firestore,fp(this._delegate,function S9(...n){return new A3("endBefore",n,!1)}(...e)))}catch(t){throw uo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ho(this.firestore,fp(this._delegate,function I9(...n){return new A3("endAt",n,!0)}(...e)))}catch(t){throw uo(t,"endAt()","Query.endAt()")}}isEqual(e){return f3(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function M9(n){n=pn(n,Ps);const e=pn(n.firestore,Sr),t=Ei(e),r=new Pm(e);return function qY(n,e){const t=new Xi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,s,c){try{const d=yield eI(i,s,!0),f=new $H(s,d.ji),y=f.Ku(d.documents),w=f.applyChanges(y,!1);c.resolve(w.snapshot)}catch(d){const f=Cv(d,`Failed to execute query '${s} against cache`);c.reject(f)}}),function(i,s,c){return r.apply(this,arguments)})(yield lI(n),e,t);var r})),t.promise}(t,n._query).then(i=>new hp(e,r,n,i))}(this._delegate):"server"===e?.source?function P9(n){n=pn(n,Ps);const e=pn(n.firestore,Sr),t=Ei(e),r=new Pm(e);return r3(t,n._query,{source:"server"}).then(i=>new hp(e,r,n,i))}(this._delegate):function R9(n){n=pn(n,Ps);const e=pn(n.firestore,Sr),t=Ei(e),r=new Pm(e);return D3(n._query),r3(t,n._query).then(i=>new hp(e,r,n,i))}(this._delegate),t.then(r=>new TP(this.firestore,new hp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=$3(e),r=G3(e,i=>new TP(this.firestore,new hp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return F3(this._delegate,t,r)}withConverter(e){return new ho(this.firestore,this._delegate.withConverter(e?Fm.getInstance(this.firestore,e):null))}}class Q9{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new MC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class TP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ho(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new MC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Q9(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new MC(this._firestore,r))})}isEqual(e){return E3(this._delegate,e._delegate)}}class Av extends ho{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _l(this.firestore,e):null}doc(e){try{return new _l(this.firestore,void 0===e?uI(this._delegate):uI(this._delegate,e))}catch(t){throw uo(t,"doc()","CollectionReference.doc()")}}add(e){return function L9(n,e){const t=pn(n.firestore,Sr),r=uI(n),i=_I(n.converter,e);return Iv(t,[fI(Om(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ur.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new _l(this.firestore,t))}isEqual(e){return h3(this._delegate,e._delegate)}withConverter(e){return new Av(this.firestore,this._delegate.withConverter(e?Fm.getInstance(this.firestore,e):null))}}function Lm(n){return pn(n,dr)}class EP{constructor(...e){this._delegate=new gh(...e)}static documentId(){return new EP(Wr.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof gh&&this._delegate._internalPath.isEqual(e._internalPath)}}class Um{constructor(e){this._delegate=e}static serverTimestamp(){const e=function H9(){return new pP("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Um(e)}static delete(){const e=function j9(){return new AC("deleteField")}();return e._methodName="FieldValue.delete",new Um(e)}static arrayUnion(...e){const t=function $9(...n){return new h9("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Um(t)}static arrayRemove(...e){const t=function G9(...n){return new f9("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Um(t)}static increment(e){const t=function q9(n){return new p9("increment",n)}(e);return t._methodName="FieldValue.increment",new Um(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const J9={Firestore:V3,GeoPoint:dI,Timestamp:Dr,Blob:OC,Transaction:j3,WriteBatch:H3,DocumentReference:_l,DocumentSnapshot:RC,Query:ho,QueryDocumentSnapshot:MC,QuerySnapshot:TP,CollectionReference:Av,FieldPath:EP,FieldValue:Um,setLogLevel:function Y9(n){!function W5(n){Xf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function eQ(n){(function X9(n,e){n.INTERNAL.registerComponent(new _c.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},J9)))})(n,(e,t)=>new V3(e,t,new K9)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(OO.Z);var vI=U(5363);function q3(n,e){return(0,As.m)(e)?Pn(()=>n,e):Pn(()=>n)}var DP=U(9468);U(5867);const Z3=new Map,sQ={activated:!1,tokenObservers:[]},oQ={initialized:!1,enabled:!1};function rs(n){return Z3.get(n)||sQ}function bc(n,e){Z3.set(n,e)}function wI(){return oQ}const IP="https://content-firebaseappcheck.googleapis.com/v1",cQ="exchangeDebugToken",W3={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class dQ{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Te.Z)(function*(){t.stop();try{t.pending=new F.BH,yield function hQ(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const fo=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function xP(){return xP=(0,Te.Z)(function*({url:n,body:e},t){var r,i;const s={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const k=yield c.getHeartbeatsHeader();k&&(s["X-Firebase-Client"]=k)}const d={method:"POST",body:JSON.stringify(e),headers:s};let f,y;try{f=yield fetch(n,d)}catch(k){throw fo.create("fetch-network-error",{originalErrorMessage:null===(r=k)||void 0===r?void 0:r.message})}if(200!==f.status)throw fo.create("fetch-status-error",{httpStatus:f.status});try{y=yield f.json()}catch(k){throw fo.create("fetch-parse-error",{originalErrorMessage:null===(i=k)||void 0===i?void 0:i.message})}const w=y.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw fo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const E=1e3*Number(w[1]),A=Date.now();return{token:y.token,expireTimeMillis:A+E,issuedAtTimeMillis:A}}),xP.apply(this,arguments)}const _Q="firebase-app-check-database",yQ=1,PC="firebase-app-check-store";let EI=null;function kP(){return kP=(0,Te.Z)(function*(n,e){const r=(yield function Q3(){return EI||(EI=new Promise((n,e)=>{var t;try{const r=indexedDB.open(_Q,yQ);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var s;e(fo.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(PC,{keyPath:"compositeKey"})}}catch(r){e(fo.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),EI)}()).transaction(PC,"readwrite"),s=r.objectStore(PC).put({compositeKey:n,value:e});return new Promise((c,d)=>{s.onsuccess=f=>{c()},r.onerror=f=>{var y;d(fo.create("storage-set",{originalErrorMessage:null===(y=f.target.error)||void 0===y?void 0:y.message}))}})}),kP.apply(this,arguments)}const FC=new yc.Yd("@firebase/app-check");function t$(n,e){return(0,F.hl)()?function bQ(n,e){return function J3(n,e){return kP.apply(this,arguments)}(function e$(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{FC.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function PP(){return PP=(0,Te.Z)(function*(){const n=wI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),PP.apply(this,arguments)}const SQ={error:"UNKNOWN_ERROR"};function IQ(n){return F.US.encodeString(JSON.stringify(n),!1)}function DI(n){return FP.apply(this,arguments)}function FP(){return FP=(0,Te.Z)(function*(n,e=!1){const t=n.app;!function K3(n){if(!rs(n).activated)throw fo.create("use-before-activation",{appName:n.name})}(t);const r=rs(t);let s,i=r.token;if(!i){const f=yield r.cachedTokenPromise;f&&SI(f)&&(i=f)}if(!e&&i&&SI(i))return{token:i.token};let d,c=!1;if(function n$(){return wI().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function NP(n,e){return xP.apply(this,arguments)}(function mQ(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${IP}/projects/${t}/apps/${r}:${cQ}?key=${i}`,body:{debug_token:e}}}(t,yield function r$(){return PP.apply(this,arguments)}()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0);const f=yield r.exchangeTokenPromise;return yield t$(t,f),bc(t,Object.assign(Object.assign({},r),{token:f})),{token:f.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(f=>(r.exchangeTokenPromise=void 0,f)),c=!0),i=yield r.exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?FC.warn(f.message):FC.error(f),s=f}return i?(d={token:i.token},bc(t,Object.assign(Object.assign({},r),{token:i})),yield t$(t,i)):d=function NQ(n){return{token:IQ(SQ),error:n}}(s),c&&function s$(n,e){const t=rs(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,d),d}),FP.apply(this,arguments)}function UP(n,e){const t=rs(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),bc(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function i$(n){const{app:e}=n,t=rs(e);let r=t.tokenRefresher;r||(r=function AQ(n){const{app:e}=n;return new dQ((0,Te.Z)(function*(){let r;if(r=rs(e).token?yield DI(n,!0):yield DI(n),r.error)throw r.error}),()=>!0,()=>{const t=rs(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},W3.RETRIAL_MIN_WAIT,W3.RETRIAL_MAX_WAIT)}(n),bc(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function SI(n){return n.expireTimeMillis-Date.now()>0}class xQ{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=rs(this.app);for(const t of e)UP(this.app,t.next);return Promise.resolve()}}const f$="app-check-internal";!function GQ(){(0,so._registerComponent)(new _c.wA("app-check",n=>function kQ(n,e){return new xQ(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(f$).initialize()})),(0,so._registerComponent)(new _c.wA(f$,n=>function OQ(n){return{getToken:e=>DI(n,e),addTokenListener:e=>function LP(n,e,t,r){const{app:i}=n,s=rs(i),c={next:t,error:r,type:e};if(bc(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&SI(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),i$(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>i$(n))}(n,"INTERNAL",e),removeTokenListener:e=>UP(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,so.registerVersion)("@firebase/app-check","0.5.12")}();class LC{constructor(){return(0,In.vb)("app-check")}}typeof window<"u"&&window;var $P=U(127);const GP=new o.OlP("angularfire2.auth.use-emulator"),qP=new o.OlP("angularfire2.auth.settings"),zP=new o.OlP("angularfire2.auth.tenant-id"),ZP=new o.OlP("angularfire2.auth.langugage-code"),WP=new o.OlP("angularfire2.auth.use-device-language"),KP=new o.OlP("angularfire.auth.persistence"),YP=(n,e,t,r,i,s,c,d)=>(0,Ui.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=e.runOutsideAngular(()=>n.auth());if(t&&f.useEmulator(...t),r&&(f.tenantId=r),f.languageCode=i,s&&f.useDeviceLanguage(),c)for(const[y,w]of Object.entries(c))f.settings[y]=w;return d&&f.setPersistence(d),f},[t,r,i,s,c,d]);let QP=(()=>{class n{constructor(t,r,i,s,c,d,f,y,w,E,A,k){const M=new cn.x,V=Re(void 0).pipe((0,vI.Q)(c.outsideAngular),Pn(()=>s.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,1451)))),(0,S.U)(()=>(0,Ui.on)(t,s,r)),(0,S.U)(W=>YP(W,s,d,y,w,E,f,A)),fD({bufferSize:1,refCount:!1}));if(Ac(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Re(null);else{V.pipe(ca()).subscribe();const ne=V.pipe(Pn(me=>me.getRedirectResult().then(Le=>Le,()=>null)),In.iC,fD({bufferSize:1,refCount:!1})),he=V.pipe(Pn(me=>new vn.y(Le=>({unsubscribe:s.runOutsideAngular(()=>me.onAuthStateChanged(je=>Le.next(je),je=>Le.error(je),()=>Le.complete()))})))),Ie=V.pipe(Pn(me=>new vn.y(Le=>({unsubscribe:s.runOutsideAngular(()=>me.onIdTokenChanged(je=>Le.next(je),je=>Le.error(je),()=>Le.complete()))}))));this.authState=ne.pipe(q3(he),(0,DP.R)(c.outsideAngular),(0,vI.Q)(c.insideAngular)),this.user=ne.pipe(q3(Ie),(0,DP.R)(c.outsideAngular),(0,vI.Q)(c.insideAngular)),this.idToken=this.user.pipe(Pn(me=>me?(0,Ht.D)(me.getIdToken()):Re(null))),this.idTokenResult=this.user.pipe(Pn(me=>me?(0,Ht.D)(me.getIdTokenResult()):Re(null))),this.credential=(0,My.T)(ne,M,this.authState.pipe(Rr(me=>!me))).pipe((0,S.U)(me=>me?.user?me:null),(0,DP.R)(c.outsideAngular),(0,vI.Q)(c.insideAngular))}return(0,Ui.pX)(this,V,s,{spy:{apply:(W,ne,he)=>{(W.startsWith("signIn")||W.startsWith("createUser"))&&he.then(Ie=>M.next(Ie))}}})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Ui.Dh),o.LFG(Ui.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(In.HU),o.LFG(GP,8),o.LFG(qP,8),o.LFG(zP,8),o.LFG(ZP,8),o.LFG(WP,8),o.LFG(KP,8),o.LFG(LC,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function g$(n,e){return function YQ(n,e=Zg.z){return new vn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function JP(n,e){return g$(n,e).pipe((0,S.U)(t=>({payload:t,type:"query"})))}function AI(n,e){return JP(n,e).pipe(la(void 0),kO(),(0,S.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,d)=>{const f=i.find(w=>w.doc.ref.isEqual(c.ref)),y=t?.payload.docs.find(w=>w.ref.isEqual(c.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(c.metadata)||!f&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),s}))}function m$(n,e,t){return AI(n,t).pipe(ua((r,i)=>function JQ(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function XQ(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return XP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return XP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return XP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),eh(),(0,S.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function XP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function _$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class y${constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=AI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,S.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(la(void 0),kO(),Rr(([r,i])=>i.length>0||!r),(0,S.U)(([r,i])=>i),In.iC)}auditTrail(e){return this.stateChanges(e).pipe(ua((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=_$(e);return m$(this.query,t,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return JP(this.query,this.afs.schedulers.outsideAngular).pipe((0,S.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),In.iC)}get(e){return(0,Ht.D)(this.query.get(e)).pipe(In.iC)}add(e){return this.ref.add(e)}doc(e){return new v$(this.ref.doc(e),this.afs)}}class v${constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=C$(r,t);return new y$(i,s,this.afs)}snapshotChanges(){return function QQ(n,e){return g$(n,e).pipe(la(void 0),kO(),(0,S.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,S.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ht.D)(this.ref.get(e)).pipe(In.iC)}}class eJ{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?AI(this.query,this.afs.schedulers.outsideAngular).pipe((0,S.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Rr(t=>t.length>0),In.iC):AI(this.query,this.afs.schedulers.outsideAngular).pipe(In.iC)}auditTrail(e){return this.stateChanges(e).pipe(ua((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=_$(e);return m$(this.query,t,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return JP(this.query,this.afs.schedulers.outsideAngular).pipe((0,S.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),In.iC)}get(e){return(0,Ht.D)(this.query.get(e)).pipe(In.iC)}}const b$=new o.OlP("angularfire2.enableFirestorePersistence"),w$=new o.OlP("angularfire2.firestore.persistenceSettings"),tJ=new o.OlP("angularfire2.firestore.settings"),nJ=new o.OlP("angularfire2.firestore.use-emulator");function C$(n,e=(t=>t)){return{query:e(n),ref:n}}let Ia=(()=>{class n{constructor(t,r,i,s,c,d,f,y,w,E,A,k,M,V,W,ne,he){this.schedulers=f;const Ie=(0,Ui.on)(t,d,r),me=w;E&&YP(Ie,d,A,M,V,W,k,ne),[this.firestore,this.persistenceEnabled$]=(0,Ui.cc)(`${Ie.name}.firestore`,"AngularFirestore",Ie.name,()=>{const Le=d.runOutsideAngular(()=>Ie.firestore());if(s&&Le.settings(s),me&&Le.useEmulator(...me),i&&!Ac(c)){const je=()=>{try{return(0,Ht.D)(Le.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(ct){return typeof console<"u"&&console.warn(ct),Re(!1)}};return[Le,d.runOutsideAngular(je)]}return[Le,Re(!1)]},[s,me,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:c}=C$(i,r),d=this.schedulers.ngZone.run(()=>s);return new y$(d,c,this)}collectionGroup(t,r){const i=r||(c=>c),s=this.firestore.collectionGroup(t);return new eJ(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new v$(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Ui.Dh),o.LFG(Ui.xv,8),o.LFG(b$,8),o.LFG(tJ,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(In.HU),o.LFG(w$,8),o.LFG(nJ,8),o.LFG(QP,8),o.LFG(GP,8),o.LFG(qP,8),o.LFG(zP,8),o.LFG(ZP,8),o.LFG(WP,8),o.LFG(KP,8),o.LFG(LC,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),rJ=(()=>{class n{constructor(){$P.Z.registerVersion("angularfire",In.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:b$,useValue:!0},{provide:w$,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Ia]}),n})(),Nv=(()=>{class n extends xw{constructor(t){super(),this.firestore=t,this.collection=t.collection(ah.ACCOUNTS)}login(t){return this.firestore.collection(ah.ACCOUNTS,r=>r.where("deleted","==",!1).where("email","==",t.username).where("password","==",t.password).limit(1)).valueChanges()}create(t){return this.collection.doc(t.id).set(t),Re(t)}delete(t){return this.fetch(t).subscribe({next:i=>(i.deleted=!0,this.update(i.id,i)),error:i=>Re(),complete:()=>Re()}),Re()}fetch(t){return Re()}fetchAll(){return this.collection.valueChanges()}update(t,r){const i=this.firestore.doc(t);return(0,Ht.D)(i.update(r))}search(t,r){let i=this.collection.ref;return console.log(t),t.forEach(s=>{i.where(s.field,s.comparator,s.value)}),(0,Ht.D)(i.get()).pipe((0,S.U)(s=>{const c=[];return s.forEach(d=>{c.push(d.data())}),console.log(c),c}))}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(Ia))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xv=(()=>{class n extends Nw{constructor(t){super(),this.firestore=t,this.collection=t.collection(ah.CLIENTS)}create(t){return this.collection.doc(t.id).set(t),Re(t)}delete(t){return(0,Ht.D)(this.collection.doc(t).delete())}fetch(t){return Re()}fetchAll(){return this.collection.valueChanges()}update(t,r){return(0,Ht.D)(this.collection.doc(t).update(r))}search(t,r){return Re()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(Ia))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),NI=(()=>{class n extends BD{constructor(t){super(),this.firestore=t,this.collection=t.collection(ah.PROJECTS)}create(t){return this.collection.doc(t.id).set(t),Re(t)}delete(t){return Re()}fetch(t){return Re()}fetchAll(){return this.collection.valueChanges()}update(t,r){const i=this.firestore.doc(t);return(0,Ht.D)(i.update(r))}search(t,r){return Re()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(Ia))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UC=(()=>{class n extends nS{constructor(t){super(),this.firestore=t,this.collection=t.collection(ah.RESOURCES)}create(t){return this.collection.doc(t.id).set(t),Re(t)}delete(t){return(0,Ht.D)(this.collection.doc(t).delete())}fetch(t){return Re()}fetchByProject(t){return this.firestore.collection(ah.RESOURCES,r=>r.where("project","==",t)).valueChanges()}update(t,r){const i=this.firestore.doc(t);return(0,Ht.D)(i.update(r))}search(t,r){return Re()}fetchAll(){return this.firestore.collection(ah.RESOURCES,t=>t.where("delete","==",!1)).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(Ia))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eF=(()=>{class n extends aB{constructor(t){super(),this.firestore=t,this.collection=t.collection(ah.WORKING_DAYS)}create(t){return Re()}delete(t){return Re()}fetch(t){return Re()}fetchAll(){return this.collection.valueChanges()}update(t,r){const i=this.firestore.doc(t);return(0,Ht.D)(i.update(r))}search(t,r){return Re()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(Ia))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xI=(()=>{class n extends mO{constructor(t){super(),this.firestore=t,this.collection=t.collection(ah.CURRENCY_EXCHANGE)}create(t){return this.collection.doc(t.id).set(t),Re(t)}delete(t){return Re()}fetch(t){return Re()}fetchAll(){return this.collection.valueChanges()}update(t,r){const i=this.firestore.doc(t);return(0,Ht.D)(i.update(r))}search(t,r){return Re()}static#e=this.\u0275fac=function(r){return new(r||n)(o.LFG(Ia))};static#t=this.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const iJ=[{provide:Zf,useClass:hB},{deps:[Ia],provide:Nv,useFactory:n=>new Nv(n)},{deps:[Nv],provide:IO,useFactory:n=>new IO(n)},{deps:[Nv],provide:NO,useFactory:n=>new NO(n)},{deps:[Nv],provide:xO,useFactory:n=>new xO(n)},{deps:[Nv],provide:AO,useFactory:n=>new AO(n)}],sJ=[{provide:yw,useClass:cB},{deps:[Ia],provide:xv,useFactory:n=>new xv(n)},{deps:[xv],provide:bO,useFactory:n=>new bO(n)},{deps:[xv],provide:TO,useFactory:n=>new TO(n)},{deps:[xv],provide:wO,useFactory:n=>new wO(n)},{deps:[xv],provide:CO,useFactory:n=>new CO(n)}],oJ=[{provide:UD,useClass:jD},{deps:[Ia],provide:NI,useFactory:n=>new NI(n)},{deps:[NI],provide:VD,useFactory:n=>new VD(n)},{deps:[NI],provide:_w,useFactory:n=>new _w(n)}],aJ=[{provide:uB,useClass:dB},{deps:[Ia],provide:UC,useFactory:n=>new UC(n)},{deps:[UC],provide:EO,useFactory:n=>new EO(n)},{deps:[UC],provide:SO,useFactory:n=>new SO(n)},{deps:[UC],provide:DO,useFactory:n=>new DO(n)}],lJ=[{provide:oB,useClass:lB},{deps:[Ia],provide:eF,useFactory:n=>new eF(n)},{deps:[eF],provide:vO,useFactory:n=>new vO(n)}],cJ=[{provide:iB,useClass:sB},{deps:[Ia],provide:xI,useFactory:n=>new xI(n)},{deps:[xI],provide:yO,useFactory:n=>new yO(n)},{deps:[xI],provide:_O,useFactory:n=>new _O(n)}],uJ_firebase={apiKey:"AIzaSyAg_FtlI1_5LgKh0cgXEMxQ_XFp2uAskkU",authDomain:"estimate-674a4.firebaseapp.com",projectId:"estimate-674a4",storageBucket:"estimate-674a4.appspot.com",messagingSenderId:"484728303804",appId:"1:484728303804:web:ce5e31020ba5e783d160b9",measurementId:"G-W9WFLFDK8R"},T$="firebasestorage.googleapis.com",E$="storageBucket";class Qr extends F.ZR{constructor(e,t){super(tF(e),`Firebase Storage: ${t} (${tF(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qr.prototype)}_codeEquals(e){return tF(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function tF(n){return"storage/"+n}function nF(){return new Qr("unknown","An unknown error occurred, please check the error payload for server response.")}function D$(){return new Qr("canceled","User canceled the upload/download.")}function S$(){return new Qr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function kv(n){return new Qr("invalid-argument",n)}function I$(){return new Qr("app-deleted","The Firebase app was deleted.")}function A$(n){return new Qr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function BC(n,e){return new Qr("invalid-format","String does not match format '"+n+"': "+e)}function VC(n){throw new Qr("internal-error","Internal error: "+n)}class Fs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Fs.makeFromUrl(e,t)}catch{return new Fs(e,"")}if(""===r.path)return r;throw function wJ(n){return new Qr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(me){me.path_=decodeURIComponent(me.path)}const E=t.replace(/[.]/g,"\\."),Ie=[{regex:d,indices:{bucket:1,path:3},postModify:function s(me){"/"===me.path.charAt(me.path.length-1)&&(me.path_=me.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${E}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===T$?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let me=0;me<Ie.length;me++){const Le=Ie[me],je=Le.regex.exec(e);if(je){let Lt=je[Le.indices.path];Lt||(Lt=""),r=new Fs(je[Le.indices.bucket],Lt),Le.postModify(r);break}}if(null==r)throw function bJ(n){return new Qr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class DJ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function kI(n){return"string"==typeof n||n instanceof String}function N$(n){return rF()&&n instanceof Blob}function rF(){return typeof Blob<"u"}function iF(n,e,t,r){if(r<e)throw kv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw kv(`Invalid value for '${n}'. Expected ${t} or less.`)}function _h(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function x$(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var gp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(gp||(gp={})),gp))();class kJ{constructor(e,t,r,i,s,c,d,f,y,w,E){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=f,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,k)=>{this.resolve_=A,this.reject_=k,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,c=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function AJ(n){return void 0!==n}(f)?s():s(f)}catch(f){c(f)}else if(null!==d){const f=nF();f.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,f):f)}else c(i.canceled?this.appDelete_?I$():D$():function vJ(){return new Qr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new OI(!1,null,!0)):this.backoffId_=function SJ(n,e,t){let r=1,i=null,s=null,c=!1,d=0;function f(){return 2===d}let y=!1;function w(...W){y||(y=!0,e.apply(null,W))}function E(W){i=setTimeout(()=>{i=null,n(k,f())},W)}function A(){s&&clearTimeout(s)}function k(W,...ne){if(y)return void A();if(W)return A(),void w.call(null,W,...ne);if(f()||c)return A(),void w.call(null,W,...ne);let Ie;r<64&&(r*=2),1===d?(d=2,Ie=0):Ie=1e3*(r+Math.random()),E(Ie)}let M=!1;function V(W){M||(M=!0,A(),!y&&(null!==i?(W||(d=2),clearTimeout(i),E(0)):W||(d=1)))}return E(0),s=setTimeout(()=>{c=!0,V(!0)},t),V}((r,i)=>{if(i)return void r(!1,new OI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const d=s.getErrorCode()===gp.NO_ERROR,f=s.getStatus();if(!d||this.isRetryStatusCode_(f)){const w=s.getErrorCode()===gp.ABORT;return void r(!1,new OI(!1,null,w))}const y=-1!==this.successCodes_.indexOf(f);r(!0,new OI(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function IJ(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||s}}class OI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function UJ(...n){const e=function LJ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(rF())return new Blob(n);throw new Qr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Aa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sF{constructor(e,t){this.data=e,this.contentType=t||null}}function oF(n,e){switch(n){case Aa.RAW:return new sF(k$(e));case Aa.BASE64:case Aa.BASE64URL:return new sF(O$(n,e));case Aa.DATA_URL:return new sF(function HJ(n){const e=new R$(n);return e.base64?O$(Aa.BASE64,e.rest):function jJ(n){let e;try{e=decodeURIComponent(n)}catch{throw BC(Aa.DATA_URL,"Malformed data URL.")}return k$(e)}(e.rest)}(e),function $J(n){return new R$(n).contentType}(e))}throw nF()}function k$(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function O$(n,e){switch(n){case Aa.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw BC(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Aa.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw BC(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function VJ(n){return atob(n)}(e)}catch{throw BC(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class R${constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw BC(Aa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function GJ(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Uu{constructor(e,t){let r=0,i="";N$(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(N$(this.data_)){const i=function BJ(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Uu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Uu(r,!0)}}static getBlob(...e){if(rF()){const t=e.map(r=>r instanceof Uu?r.data_:r);return new Uu(UJ.apply(null,t))}{const t=e.map(c=>kI(c)?oF(Aa.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)i[s++]=c[d]}),new Uu(i,!0)}}uploadData(){return this.data_}}function aF(n){let e;try{e=JSON.parse(n)}catch{return null}return function xJ(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function M$(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function ZJ(n,e){return e}class po{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||ZJ}}let RI=null;function jC(){if(RI)return RI;const n=[];n.push(new po("bucket")),n.push(new po("generation")),n.push(new po("metageneration")),n.push(new po("name","fullPath",!0));const t=new po("name");t.xform=function e(s,c){return function WJ(n){return!kI(n)||n.length<2?n:M$(n)}(c)},n.push(t);const i=new po("size");return i.xform=function r(s,c){return void 0!==c?Number(c):c},n.push(i),n.push(new po("timeCreated")),n.push(new po("updated")),n.push(new po("md5Hash",null,!0)),n.push(new po("cacheControl",null,!0)),n.push(new po("contentDisposition",null,!0)),n.push(new po("contentEncoding",null,!0)),n.push(new po("contentLanguage",null,!0)),n.push(new po("contentType",null,!0)),n.push(new po("metadata","customMetadata",!0)),RI=n,RI}function P$(n,e,t){const r=aF(e);return null===r?null:function YJ(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const c=t[s];r[c.local]=c.xform(r,e[c.server])}return function KJ(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Fs(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function lF(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const F$="prefixes",L$="items";class Bu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Vu(n){if(!n)throw nF()}function MI(n,e){return function t(r,i){const s=P$(n,i,e);return Vu(null!==s),s}}function Ov(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function _J(){return new Qr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function mJ(){return new Qr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function gJ(n){return new Qr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function yJ(n){return new Qr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function HC(n){const e=Ov(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function pJ(n){return new Qr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function U$(n,e,t){const i=_h(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Bu(i,"GET",MI(n,t),c);return d.errorHandler=HC(e),d}function nX(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const d=_h(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,w=new Bu(d,"GET",function eX(n,e){return function t(r,i){const s=function XJ(n,e,t){const r=aF(t);return null===r?null:function JJ(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[F$])for(const i of t[F$]){const s=i.replace(/\/$/,""),c=n._makeStorageReference(new Fs(e,s));r.prefixes.push(c)}if(t[L$])for(const i of t[L$]){const s=n._makeStorageReference(new Fs(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Vu(null!==s),s}}(n,e.bucket),y);return w.urlParams=s,w.errorHandler=Ov(e),w}function V$(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function oX(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class PI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function cF(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Vu(!1)}return Vu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const uX={STATE_CHANGED:"state_changed"},go={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function uF(n){switch(n){case"running":case"pausing":case"canceling":return go.RUNNING;case"paused":return go.PAUSED;case"success":return go.SUCCESS;case"canceled":return go.CANCELED;default:return go.ERROR}}class dX{constructor(e,t,r){if(function NJ(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Rv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let $$=null;class hX{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=gp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=gp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw VC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw VC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw VC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw VC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw VC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class fX extends hX{initXhr(){this.xhr_.responseType="text"}}function wc(){return $$?$$():new fX}class G${constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=jC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function aX(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),c=V$(e,r,i),d={name:c.fullPath},f=_h(s,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},E=lF(c,t),M=new Bu(f,"POST",function k(V){let W;cF(V);try{W=V.getResponseHeader("X-Goog-Upload-URL")}catch{Vu(!1)}return Vu(kI(W)),W},n.maxUploadRetryTime);return M.urlParams=d,M.headers=w,M.body=E,M.errorHandler=Ov(e),M}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,wc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function lX(n,e,t,r){const f=new Bu(t,"POST",function s(y){const w=cF(y,["active","final"]);let E=null;try{E=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Vu(!1)}E||Vu(!1);const A=Number(E);return Vu(!isNaN(A)),new PI(A,r.size(),"final"===w)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=Ov(e),f}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,wc,t,r);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new PI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let c;try{c=function cX(n,e,t,r,i,s,c,d){const f=new PI(0,0);if(c?(f.current=c.current,f.total=c.total):(f.current=0,f.total=r.size()),r.size()!==f.total)throw function TJ(){return new Qr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=f.total-f.current;let w=y;i>0&&(w=Math.min(w,i));const E=f.current,M={"X-Goog-Upload-Command":w===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${f.current}`},V=r.slice(E,E+w);if(null===V)throw S$();const Ie=new Bu(t,"POST",function W(me,Le){const je=cF(me,["active","final"]),ct=f.current+w,Lt=r.size();let wn;return wn="final"===je?MI(e,s)(me,Le):null,new PI(ct,Lt,"final"===je,wn)},e.maxUploadRetryTime);return Ie.headers=M,Ie.body=V.uploadData(),Ie.progressCallback=d||null,Ie.errorHandler=Ov(n),Ie}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(c,wc,i,s);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=U$(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,wc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function j$(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let Ie="";for(let me=0;me<2;me++)Ie+=Math.random().toString().slice(2);return Ie}();c["Content-Type"]="multipart/related; boundary="+f;const y=V$(e,r,i),w=lF(y,t),k=Uu.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+f+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+f+"--");if(null===k)throw S$();const M={name:y.fullPath},V=_h(s,n.host,n._protocol),ne=n.maxUploadRetryTime,he=new Bu(V,"POST",MI(n,t),ne);return he.urlParams=M,he.headers=c,he.body=k.uploadData(),he.errorHandler=Ov(e),he}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,wc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=D$(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=uF(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new dX(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(uF(this._state)){case go.SUCCESS:Rv(this._resolve.bind(null,this.snapshot))();break;case go.CANCELED:case go.ERROR:Rv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(uF(this._state)){case go.RUNNING:case go.PAUSED:e.next&&Rv(e.next.bind(e,this.snapshot))();break;case go.SUCCESS:e.complete&&Rv(e.complete.bind(e))();break;default:e.error&&Rv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Bm{constructor(e,t){this._service=e,this._location=t instanceof Fs?t:Fs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bm(e,t)}get root(){const e=new Fs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return M$(this._location.path)}get storage(){return this._service}get parent(){const e=function qJ(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Fs(this._location.bucket,e);return new Bm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw A$(e)}}function z$(n,e,t){return dF.apply(this,arguments)}function dF(){return dF=(0,Te.Z)(function*(n,e,t){const i=yield Z$(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield z$(n,e,i.nextPageToken))}),dF.apply(this,arguments)}function Z$(n,e){null!=e&&"number"==typeof e.maxResults&&iF("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=nX(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,wc)}function DX(n){n._throwIfRoot("getDownloadURL");const e=function rX(n,e,t){const i=_h(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Bu(i,"GET",function tX(n,e){return function t(r,i){const s=P$(n,i,e);return Vu(null!==s),function QJ(n,e,t,r){const i=aF(e);if(null===i||!kI(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(y=>{const E=n.fullPath;return _h("/b/"+c(n.bucket)+"/o/"+c(E),t,r)+x$({alt:"media",token:y})})[0]}(s,i,n.host,n._protocol)}}(n,t),c);return d.errorHandler=HC(e),d}(n.storage,n._location,jC());return n.storage.makeRequestWithTokens(e,wc).then(t=>{if(null===t)throw function EJ(){return new Qr("no-download-url","The given file does not have any download URLs.")}();return t})}function W$(n,e){const t=function zJ(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Fs(n._location.bucket,t);return new Bm(n.storage,r)}function K$(n,e){if(n instanceof hF){const t=n;if(null==t._bucket)throw function CJ(){return new Qr("no-default-bucket","No default bucket found. Did you set the '"+E$+"' property when initializing the app?")}();const r=new Bm(t,t._bucket);return null!=e?K$(r,e):r}return void 0!==e?W$(n,e):n}function NX(n,e){if(e&&function IX(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof hF)return function AX(n,e){return new Bm(n,e)}(n,e);throw kv("To use ref(service, url), the first argument must be a Storage instance.")}return K$(n,e)}function Y$(n,e){const t=e?.[E$];return null==t?null:Fs.makeFromBucketSpec(t,n)}class hF{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=T$,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Fs.makeFromBucketSpec(i,this._host):Y$(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Fs.makeFromBucketSpec(this._url,e):Y$(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Te.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Te.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bm(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new DJ(I$());{const s=function FJ(n,e,t,r,i,s){const c=x$(n.urlParams),d=n.url+c,f=Object.assign({},n.headers);return function MJ(n,e){e&&(n["X-Firebase-GMPID"]=e)}(f,e),function OJ(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(f,t),function RJ(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(f,s),function PJ(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(f,r),new kJ(d,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var r=this;return(0,Te.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const Q$="@firebase/storage";function eG(n,e){return NX(n=(0,F.m9)(n),e)}function VX(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new hF(t,r,i,e,so.SDK_VERSION)}!function jX(){(0,so._registerComponent)(new _c.wA("storage",VX,"PUBLIC").setMultipleInstances(!0)),(0,so.registerVersion)(Q$,"0.9.9",""),(0,so.registerVersion)(Q$,"0.9.9","esm2017")}();class FI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class tG{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new FI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new FI(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?c=>t(new FI(c,this,this._ref)):{next:t.next?c=>t.next(new FI(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class nG{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new yh(e,this._service))}get items(){return this._delegate.items.map(e=>new yh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class yh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function UX(n,e){return W$(n,e)}(this._delegate,e);return new yh(t,this.storage)}get root(){return new yh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new yh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new tG(function kX(n,e,t){return function bX(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new G$(n,new Uu(e),t)}(n=(0,F.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Aa.RAW,r){this._throwIfRoot("putString");const i=oF(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new tG(new G$(this._delegate,new Uu(i.data,!0),s),this)}listAll(){return function PX(n){return function CX(n){const e={prefixes:[],items:[]};return z$(n,e).then(()=>e)}(n=(0,F.m9)(n))}(this._delegate).then(e=>new nG(e,this.storage))}list(e){return function MX(n,e){return Z$(n=(0,F.m9)(n),e)}(this._delegate,e||void 0).then(t=>new nG(t,this.storage))}getMetadata(){return function OX(n){return function TX(n){n._throwIfRoot("getMetadata");const e=U$(n.storage,n._location,jC());return n.storage.makeRequestWithTokens(e,wc)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(e){return function RX(n,e){return function EX(n,e){n._throwIfRoot("updateMetadata");const t=function iX(n,e,t,r){const s=_h(e.fullServerUrl(),n.host,n._protocol),d=lF(t,r),y=n.maxOperationRetryTime,w=new Bu(s,"PATCH",MI(n,r),y);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=d,w.errorHandler=HC(e),w}(n.storage,n._location,e,jC());return n.storage.makeRequestWithTokens(t,wc)}(n=(0,F.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function FX(n){return DX(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function LX(n){return function SX(n){n._throwIfRoot("deleteObject");const e=function sX(n,e){const r=_h(e.fullServerUrl(),n.host,n._protocol),d=new Bu(r,"DELETE",function c(f,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=HC(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,wc)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw A$(e)}}class rG{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(iG(e))throw kv("ref() expected a child path but got a URL, use refFromURL instead.");return new yh(eG(this._delegate,e),this)}refFromURL(e){if(!iG(e))throw kv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Fs.makeFromUrl(e,this._delegate.host)}catch{throw kv("refFromUrl() expected a valid full URL but got an invalid one.")}return new yh(eG(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function BX(n,e,t,r={}){!function xX(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,F.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function iG(n){return/^[A-Za-z]+:\/\//.test(n)}function qX(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new rG(t,r)}function sG(n){const e=function ZX(n){return new vn.y(e=>{const t=c=>e.next(c);t(n.snapshot);const s=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){s()}}).pipe(function dJ(n,e=Zg.z){return(0,Sn.e)((t,r)=>{let i=null,s=null,c=null;const d=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function f(){const y=c+n,w=e.now();if(w<y)return i=this.schedule(void 0,y-w),void r.add(i);d()}t.subscribe((0,ve.x)(r,y=>{s=y,c=e.now(),i||(i=e.schedule(f,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,S.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function LI(n){return{getDownloadURL:()=>Re(void 0).pipe(In.fc,Pn(()=>n.getDownloadURL()),In.iC),getMetadata:()=>Re(void 0).pipe(In.fc,Pn(()=>n.getMetadata()),In.iC),delete:()=>(0,Ht.D)(n.delete()),child:e=>LI(n.child(e)),updateMetadata:e=>(0,Ht.D)(n.updateMetadata(e)),put:(e,t)=>sG(n.put(e,t)),putString:(e,t,r)=>sG(n.putString(e,t,r)),list:e=>(0,Ht.D)(n.list(e)),listAll:()=>(0,Ht.D)(n.listAll())}}!function zX(n){const e={TaskState:go,TaskEvent:uX,StringFormat:Aa,Storage:rG,Reference:yh};n.INTERNAL.registerComponent(new _c.wA("storage-compat",qX,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(OO.Z);const WX=new o.OlP("angularfire2.storageBucket"),KX=new o.OlP("angularfire2.storage.maxUploadRetryTime"),YX=new o.OlP("angularfire2.storage.maxOperationRetryTime"),QX=new o.OlP("angularfire2.storage.use-emulator");let JX=(()=>{class n{constructor(t,r,i,s,c,d,f,y,w,E){const A=(0,Ui.on)(t,c,r);this.storage=(0,Ui.cc)(`${A.name}.storage.${i}`,"AngularFireStorage",A.name,()=>{const k=c.runOutsideAngular(()=>A.storage(i||void 0)),M=w;return M&&k.useEmulator(...M),f&&k.setMaxUploadRetryTime(f),y&&k.setMaxOperationRetryTime(y),k},[f,y])}ref(t){return LI(this.storage.ref(t))}refFromURL(t){return LI(this.storage.refFromURL(t))}upload(t,r,i){return LI(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Ui.Dh),o.LFG(Ui.xv,8),o.LFG(WX,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(In.HU),o.LFG(KX,8),o.LFG(YX,8),o.LFG(QX,8),o.LFG(LC,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),XX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),eee=(()=>{class n{constructor(){$P.Z.registerVersion("angularfire",In.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[JX],imports:[XX]}),n})();const oG="@firebase/database";let fF="";function lG(n){fF=n}class nee{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class ree{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const cG=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nee(e)}}catch{}return new ree},Vm=cG("localStorage"),pF=cG("sessionStorage"),Mv=new yc.Yd("@firebase/database"),uG=function(){let n=1;return function(){return n++}}(),dG=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const r=t.digest();return F.US.encodeByteArray(r)},$C=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=$C.apply(null,r):e+="object"==typeof r?(0,F.Pz)(r):r,e+=" "}return e};let jm=null,hG=!0;const fG=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Mv.logLevel=yc.in.VERBOSE,jm=Mv.log.bind(Mv),e&&pF.set("logging_enabled",!0)):"function"==typeof n?jm=n:(jm=null,pF.remove("logging_enabled"))},is=function(...n){if(!0===hG&&(hG=!1,null===jm&&!0===pF.get("logging_enabled")&&fG(!0)),jm){const e=$C.apply(null,n);jm(e)}},GC=function(n){return function(...e){is(n,...e)}},gF=function(...n){const e="FIREBASE INTERNAL ERROR: "+$C(...n);Mv.error(e)},ju=function(...n){const e=`FIREBASE FATAL ERROR: ${$C(...n)}`;throw Mv.error(e),new Error(e)},Ls=function(...n){const e="FIREBASE WARNING: "+$C(...n);Mv.warn(e)},UI=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},vh="[MIN_NAME]",Hu="[MAX_NAME]",Hm=function(n,e){if(n===e)return 0;if(n===vh||e===Hu)return-1;if(e===vh||n===Hu)return 1;{const t=BI(n),r=BI(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},oee=function(n,e){return n===e?0:n<e?-1:1},qC=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(e))},mF=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,F.Pz)(e[r]),t+=":",t+=mF(n[e[r]]);return t+="}",t},pG=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ss(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const gG=function(n){(0,F.hu)(!UI(n),"Invalid JSON number");const r=1023;let i,s,c,d,f;0===n?(s=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=d+r,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(f=52;f;f-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(f=11;f;f-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const w=y.join("");let E="";for(f=0;f<64;f+=8){let A=parseInt(w.substr(f,8),2).toString(16);1===A.length&&(A="0"+A),E+=A}return E.toLowerCase()},uee=new RegExp("^-?(0*)\\d{1,10}$"),mG=-2147483648,_F=2147483647,BI=function(n){if(uee.test(n)){const e=Number(n);if(e>=mG&&e<=_F)return e}return null},Pv=function(n){try{n()}catch(e){setTimeout(()=>{throw Ls("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},dee=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},zC=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class hee{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ls(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class fee{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(is("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ls(e)}}let ZC=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const wG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,EG="websocket",DG="long_polling";class vF{constructor(e,t,r,i,s=!1,c="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Vm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function SG(n,e,t){let r;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===EG)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==DG)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function pee(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ss(t,(s,c)=>{i.push(s+"="+c)}),r+i.join("&")}class gee{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const bF={},wF={};function CF(n){const e=n.toString();return bF[e]||(bF[e]=new gee),bF[e]}class _ee{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Pv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class mp{constructor(e,t,r,i,s,c,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=GC(e),this.stats_=CF(t),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),SG(t,DG,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new _ee(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new TF((...s)=>{const[c,d,f,y,w]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=f;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&wG.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){mp.forceAllow_=!0}static forceDisallow(){mp.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!mp.forceAllow_&&(mp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,F.h$)(t),i=pG(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class TF{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=uG(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=TF.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){is("frame writing exception"),d.stack&&is(d.stack),is(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||is("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{is("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let jI=null;typeof MozWebSocket<"u"?jI=MozWebSocket:typeof WebSocket<"u"&&(jI=WebSocket);let Fv=(()=>{class n{constructor(t,r,i,s,c,d,f){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=GC(this.connId),this.stats_=CF(r),this.connURL=n.connectionURL_(r,d,f,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,c){const d={v:"5"};return!(0,F.Yr)()&&typeof location<"u"&&location.hostname&&wG.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),s&&(d.ac=s),c&&(d.p=c),SG(t,EG,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vm.set("previous_websocket_failure",!0);try{let i;if((0,F.Yr)()){i={headers:{"User-Agent":`Firebase/5/${fF}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,d=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new jI(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==jI&&!n.forceDisallow_}static previouslyFailed(){return Vm.isInMemoryStorage||!0===Vm.get("previous_websocket_failure")}markConnectionHealthy(){Vm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,F.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,F.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=pG(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),RG=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[mp,Fv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Fv&&Fv.isAvailable();let i=r&&!Fv.previouslyFailed();if(t.webSocketOnly&&(r||Ls("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Fv];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class VG{constructor(e,t,r,i,s,c,d,f,y,w){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=f,this.onKill_=y,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=GC("c:"+this.id+":"),this.transportManager_=new RG(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=zC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=qC("t",e),r=qC("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=qC("t",e),r=qC("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=qC("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?gF("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gF("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ls("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),zC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class jG{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class HG{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class HI extends HG{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new HI}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const $G=32,GG=768;class kn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function bn(){return new kn("")}function on(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function _p(n){return n.pieces_.length-n.pieceNum_}function Wn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new kn(n.pieces_,e)}function DF(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function WC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function qG(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new kn(e,0)}function Ir(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof kn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new kn(t,0)}function an(n){return n.pieceNum_>=n.pieces_.length}function mo(n,e){const t=on(n),r=on(e);if(null===t)return e;if(t===r)return mo(Wn(n),Wn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Bee(n,e){const t=WC(n,0),r=WC(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Hm(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function SF(n,e){if(_p(n)!==_p(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function yl(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(_p(n)>_p(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Vee{constructor(e,t){this.errorPrefix_=t,this.parts_=WC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);zG(this)}}function zG(n){if(n.byteLength_>GG)throw new Error(n.errorPrefix_+"has a key path longer than "+GG+" bytes ("+n.byteLength_+").");if(n.parts_.length>$G)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+$G+") or object contains a cycle "+$m(n))}function $m(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class IF extends HG{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new IF}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const KC=1e3;let GI,Gm=(()=>{class n extends jG{constructor(t,r,i,s,c,d,f,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=GC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=KC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");IF.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&HI.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,c={r:s,a:t,b:r};this.log_((0,F.Pz)(c)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new F.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:d=>{const f=d.d;"ok"===d.s?r.resolve(f):r.reject(f)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const c=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const f={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(d).set(c,f),this.connected_&&this.sendListen_(f)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,f=>{const y=f.d,w=f.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",f),"ok"!==w&&this.removeListen_(i,s),t.onComplete&&t.onComplete(w,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const i=(0,F.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Ls(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,F.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const c=s.s,d=s.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const c={p:t};s&&(c.q=i,c.t=s),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,c){this.initConnection_();const d={p:r,d:i};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):gF("Unrecognized action received from server: "+(0,F.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=KC,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=KC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=KC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Te.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let f=!1,y=null;const w=function(){y?y.close():(f=!0,s())};t.realtime_={close:w,sendRequest:function(k){(0,F.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(k)}};const A=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[k,M]=yield Promise.all([t.authTokenProvider_.getToken(A),t.appCheckTokenProvider_.getToken(A)]);f?is("getToken() completed but was canceled"):(is("getToken() completed. Creating connection."),t.authToken_=k&&k.accessToken,t.appCheckToken_=M&&M.token,y=new VG(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,V=>{Ls(V+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(k){t.log_("Failed to get token: "+k),f||(t.repoInfo_.nodeAdmin&&Ls(k),w())}}})()}interrupt(t){is("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){is("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=KC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>mF(c)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new kn(t).toString();let s;if(this.listens.has(i)){const c=this.listens.get(i);s=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){is("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){is("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+fF.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=HI.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class un{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new un(e,t)}}class $I{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new un(vh,e),i=new un(vh,t);return 0!==this.compare(r,i)}minPost(){return un.MIN}}class KG extends $I{static get __EMPTY_NODE(){return GI}static set __EMPTY_NODE(e){GI=e}compare(e,t){return Hm(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return un.MIN}maxPost(){return new un(Hu,GI)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new un(e,GI)}toString(){return".key"}}const $u=new KG;class qI{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let NF,Cc=(()=>{class n{constructor(t,r,i,s,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Ho.EMPTY_NODE,this.right=c??Ho.EMPTY_NODE}copy(t,r,i,s,c){return new n(t??this.key,r??this.value,i??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const c=i(t,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===c?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ho.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ho.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ho{constructor(e,t=Ho.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ho(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Cc.BLACK,null,null))}remove(e){return new Ho(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Cc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new qI(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new qI(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new qI(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new qI(this.root_,null,this.comparator_,!0,e)}}function Wee(n,e){return Hm(n.name,e.name)}function AF(n,e){return Hm(n,e)}Ho.EMPTY_NODE=new class Zee{copy(e,t,r,i,s){return this}insert(e,t,r){return new Cc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const YG=function(n){return"number"==typeof n?"number:"+gG(n):"string:"+n},QG=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===NF||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===NF||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let JG,XG,e6,Lv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),QG(this.priorityNode_)}static set __childrenNodeConstructor(t){JG=t}static get __childrenNodeConstructor(){return JG}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return an(t)?this:".priority"===on(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=on(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,F.hu)(".priority"!==i||1===_p(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Wn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+YG(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?gG(this.value_):this.value_,this.lazyHash_=dG(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,F.hu)(s>=0,"Unknown leaf type: "+r),(0,F.hu)(c>=0,"Unknown leaf type: "+i),s===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const er=new class Jee extends $I{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Hm(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return un.MIN}maxPost(){return new un(Hu,new Lv("[PRIORITY-POST]",e6))}makePost(e,t){const r=XG(e);return new un(t,new Lv("[PRIORITY-POST]",r))}toString(){return".priority"}},Xee=Math.log(2);class ete{constructor(e){this.count=parseInt(Math.log(e+1)/Xee,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const zI=function(n,e,t,r){n.sort(e);const i=function(f,y){const w=y-f;let E,A;if(0===w)return null;if(1===w)return E=n[f],A=t?t(E):E,new Cc(A,E.node,Cc.BLACK,null,null);{const k=parseInt(w/2,10)+f,M=i(f,k),V=i(k+1,y);return E=n[k],A=t?t(E):E,new Cc(A,E.node,Cc.BLACK,M,V)}},d=function(f){let y=null,w=null,E=n.length;const A=function(M,V){const W=E-M,ne=E;E-=M;const he=i(W+1,ne),Ie=n[W],me=t?t(Ie):Ie;k(new Cc(me,Ie.node,V,null,he))},k=function(M){y?(y.left=M,y=M):(w=M,y=M)};for(let M=0;M<f.count;++M){const V=f.nextBitIsOne(),W=Math.pow(2,f.count-(M+1));V?A(W,Cc.BLACK):(A(W,Cc.BLACK),A(W,Cc.RED))}return w}(new ete(n.length));return new Ho(r||e,d)};let xF;const Uv={};class bh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)(Uv&&er,"ChildrenNode.ts has not been loaded"),xF=xF||new bh({".priority":Uv},{".priority":er}),xF}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ho?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==$u,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(un.Wrap);let d,c=s.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=s.getNext();d=i?zI(r,e.getCompare()):Uv;const f=e.toString(),y=Object.assign({},this.indexSet_);y[f]=e;const w=Object.assign({},this.indexes_);return w[f]=d,new bh(w,y)}addToIndexes(e,t){const r=(0,F.UI)(this.indexes_,(i,s)=>{const c=(0,F.DV)(this.indexSet_,s);if((0,F.hu)(c,"Missing index implementation for "+s),i===Uv){if(c.isDefinedOn(e.node)){const d=[],f=t.getIterator(un.Wrap);let y=f.getNext();for(;y;)y.name!==e.name&&d.push(y),y=f.getNext();return d.push(e),zI(d,c.getCompare())}return Uv}{const d=t.get(e.name);let f=i;return d&&(f=f.remove(new un(e.name,d))),f.insert(e,e.node)}});return new bh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,F.UI)(this.indexes_,i=>{if(i===Uv)return i;{const s=t.get(e.name);return s?i.remove(new un(e.name,s)):i}});return new bh(r,this.indexSet_)}}let YC,Qt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&QG(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return YC||(YC=new n(new Ho(AF),null,bh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||YC}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?YC:r}}getChild(t){const r=on(t);return null===r?this:this.getImmediateChild(r).getChild(Wn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new un(t,r);let s,c;r.isEmpty()?(s=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const d=s.isEmpty()?YC:this.priorityNode_;return new n(s,d,c)}}updateChild(t,r){const i=on(t);if(null===i)return r;{(0,F.hu)(".priority"!==on(t)||1===_p(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Wn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,c=!0;if(this.forEachChild(er,(d,f)=>{r[d]=f.val(t),i++,c&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):c=!1}),!t&&c&&s<2*i){const d=[];for(const f in r)d[f]=r[f];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+YG(this.getPriority().val())+":"),this.forEachChild(er,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":dG(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const c=s.getPredecessorKey(new un(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new un(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new un(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,un.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,t)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,un.Wrap);let c=s.peek();for(;null!=c&&r.compare(c,t)>0;)s.getNext(),c=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===QC?-1:0}withIndex(t){if(t===$u||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===$u||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(er),s=r.getIterator(er);let c=i.getNext(),d=s.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=i.getNext(),d=s.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(t){return t===$u?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const QC=new class tte extends Qt{constructor(){super(new Ho(AF),Qt.EMPTY_NODE,bh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Qt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(un,{MIN:{value:new un(vh,Qt.EMPTY_NODE)},MAX:{value:new un(Hu,QC)}}),KG.__EMPTY_NODE=Qt.EMPTY_NODE,Lv.__childrenNodeConstructor=Qt,function Kee(n){NF=n}(QC),function Qee(n){e6=n}(QC);const nte=!0;function Br(n,e=null){if(null===n)return Qt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Lv(n,Br(e));if(n instanceof Array||!nte){let t=Qt.EMPTY_NODE;return ss(n,(r,i)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const s=Br(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Br(e))}{const t=[];let r=!1;if(ss(n,(c,d)=>{if("."!==c.substring(0,1)){const f=Br(d);f.isEmpty()||(r=r||!f.getPriority().isEmpty(),t.push(new un(c,f)))}}),0===t.length)return Qt.EMPTY_NODE;const s=zI(t,Wee,c=>c.name,AF);if(r){const c=zI(t,er.getCompare());return new Qt(s,Br(e),new bh({".priority":c},{".priority":er}))}return new Qt(s,Br(e),bh.Default)}}!function Yee(n){XG=n}(Br);class kF extends $I{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!an(e)&&".priority"!==on(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Hm(e.name,t.name):s}makePost(e,t){const r=Br(e),i=Qt.EMPTY_NODE.updateChild(this.indexPath_,r);return new un(t,i)}maxPost(){const e=Qt.EMPTY_NODE.updateChild(this.indexPath_,QC);return new un(Hu,e)}toString(){return WC(this.indexPath_,0).join("/")}}const OF=new class rte extends $I{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Hm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return un.MIN}maxPost(){return un.MAX}makePost(e,t){const r=Br(e);return new un(t,r)}toString(){return".value"}},Bv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ite=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Bv.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let c=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=Bv.charAt(e[i]);return(0,F.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),r6=function(n){if(n===""+_F)return"-";const e=BI(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Hu;const s=Bv.charAt(Bv.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},i6=function(n){if(n===""+mG)return vh;const e=BI(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+_F:(delete t[t.length-1],t.join("")):(t[t.length-1]=Bv.charAt(Bv.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function s6(n){return{type:"value",snapshotNode:n}}function Vv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function JC(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function XC(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class MF{constructor(e){this.index_=e}updateChild(e,t,r,i,s,c){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(JC(t,d)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(Vv(t,r)):c.trackChildChange(XC(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(er,(i,s)=>{t.hasChild(i)||r.trackChildChange(JC(i,s))}),t.isLeafNode()||t.forEachChild(er,(i,s)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(s)||r.trackChildChange(XC(i,s,c))}else r.trackChildChange(Vv(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Qt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class eT{constructor(e){this.indexedFilter_=new MF(e.getIndex()),this.index_=e.getIndex(),this.startPost_=eT.getStartPost_(e),this.endPost_=eT.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,c){return this.matches(new un(t,r))||(r=Qt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Qt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Qt.EMPTY_NODE);const s=this;return t.forEachChild(er,(c,d)=>{s.matches(new un(c,d))||(i=i.updateImmediateChild(c,Qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class ote{constructor(e){this.rangedFilter_=new eT(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,c){return this.rangedFilter_.matches(new un(t,r))||(r=Qt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,c):this.fullLimitUpdateChild_(e,t,r,s,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Qt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const d=s.getNext();let f;if(f=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!f)break;i=i.updateImmediateChild(d.name,d.node),c++}}else{let s,c,d,f;if(i=t.withIndex(this.index_),i=i.updatePriority(Qt.EMPTY_NODE),this.reverse_){f=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const E=this.index_.getCompare();d=(A,k)=>E(k,A)}else f=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,w=!1;for(;f.hasNext();){const E=f.getNext();!w&&d(s,E)<=0&&(w=!0),w&&y<this.limit_&&d(E,c)<=0?y++:i=i.updateImmediateChild(E.name,Qt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let c;if(this.reverse_){const E=this.index_.getCompare();c=(A,k)=>E(k,A)}else c=this.index_.getCompare();const d=e;(0,F.hu)(d.numChildren()===this.limit_,"");const f=new un(t,r),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),w=this.rangedFilter_.matches(f);if(d.hasChild(t)){const E=d.getImmediateChild(t);let A=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=A&&(A.name===t||d.hasChild(A.name));)A=i.getChildAfterChild(this.index_,A,this.reverse_);const k=null==A?1:c(A,f);if(w&&!r.isEmpty()&&k>=0)return s?.trackChildChange(XC(t,r,E)),d.updateImmediateChild(t,r);{s?.trackChildChange(JC(t,E));const V=d.updateImmediateChild(t,Qt.EMPTY_NODE);return null!=A&&this.rangedFilter_.matches(A)?(s?.trackChildChange(Vv(A.name,A.node)),V.updateImmediateChild(A.name,A.node)):V}}return r.isEmpty()?e:w&&c(y,f)>=0?(null!=s&&(s.trackChildChange(JC(y.name,y.node)),s.trackChildChange(Vv(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(y.name,Qt.EMPTY_NODE)):e}}class ZI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=er}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Hu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===er}copy(){const e=new ZI;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function PF(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function FF(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function WI(n,e){const t=n.copy();return t.index_=e,t}function o6(n){const e={};if(n.isDefault())return e;let t;return n.index_===er?t="$priority":n.index_===OF?t="$value":n.index_===$u?t="$key":((0,F.hu)(n.index_ instanceof kF,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Pz)(t),n.startSet_&&(e.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function a6(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==er&&(e.i=n.index_.toString()),e}class KI extends jG{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=GC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const c=KI.getListenId_(e,r),d={};this.listens_[c]=d;const f=o6(e._queryParams);this.restRequest_(s+".json",f,(y,w)=>{let E=w;if(404===y&&(E=null,y=null),null===y&&this.onDataUpdate_(s,E,!1,r),(0,F.DV)(this.listens_,c)===d){let A;A=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(A,null)}})}unlisten(e,t){const r=KI.getListenId_(e,t);delete this.listens_[r]}get(e){const t=o6(e._queryParams),r=e._path.toString(),i=new F.BH;return this.restRequest_(r+".json",t,(s,c)=>{let d=c;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,F.cI)(d.responseText)}catch{Ls("Failed to parse JSON response for "+c+": "+d.responseText)}r(null,f)}else 401!==d.status&&404!==d.status&&Ls("Got unsuccessful REST response for "+c+" Status: "+d.status),r(d.status);r=null}},d.open("GET",c,!0),d.send()})}}class hte{constructor(){this.rootNode_=Qt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function YI(){return{value:null,children:new Map}}function jv(n,e,t){if(an(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=on(e);n.children.has(r)||n.children.set(r,YI()),jv(n.children.get(r),e=Wn(e),t)}}function LF(n,e){if(an(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(er,(r,i)=>{jv(n,new kn(r),i)}),LF(n,e)}}if(n.children.size>0){const t=on(e);return e=Wn(e),n.children.has(t)&&LF(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function UF(n,e,t){null!==n.value?t(e,n.value):function fte(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{UF(i,new kn(e.toString()+"/"+r),t)})}class pte{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ss(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class _te{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new pte(e);const r=1e4+2e4*Math.random();zC(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ss(e,(i,s)=>{s>0&&(0,F.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),zC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var vl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(vl||(vl={})),vl))();function jF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class QI{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=vl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(an(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new kn(e));return new QI(bn(),t,this.revert)}}return(0,F.hu)(on(this.path)===e,"operationForChild called for unrelated child."),new QI(Wn(this.path),this.affectedTree,this.revert)}}class tT{constructor(e,t){this.source=e,this.path=t,this.type=vl.LISTEN_COMPLETE}operationForChild(e){return an(this.path)?new tT(this.source,bn()):new tT(this.source,Wn(this.path))}}class qm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=vl.OVERWRITE}operationForChild(e){return an(this.path)?new qm(this.source,bn(),this.snap.getImmediateChild(e)):new qm(this.source,Wn(this.path),this.snap)}}class Hv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=vl.MERGE}operationForChild(e){if(an(this.path)){const t=this.children.subtree(new kn(e));return t.isEmpty()?null:t.value?new qm(this.source,bn(),t.value):new Hv(this.source,bn(),t)}return(0,F.hu)(on(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Hv(this.source,Wn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class yp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(an(e))return this.isFullyInitialized()&&!this.filtered_;const t=on(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class yte{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function nT(n,e,t,r,i,s){const c=r.filter(d=>d.type===t);c.sort((d,f)=>function wte(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new un(e.childName,e.snapshotNode),i=new un(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,f)),c.forEach(d=>{const f=function bte(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);i.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(f,n.query_))})})}function JI(n,e){return{eventCache:n,serverCache:e}}function rT(n,e,t,r){return JI(new yp(e,t,r),n.serverCache)}function c6(n,e,t,r){return JI(n.eventCache,new yp(e,t,r))}function XI(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function zm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let HF;class tr{constructor(e,t=(()=>(HF||(HF=new Ho(oee)),HF))()){this.value=e,this.children=t}static fromObject(e){let t=new tr(null);return ss(e,(r,i)=>{t=t.set(new kn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:bn(),value:this.value};if(an(e))return null;{const r=on(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Wn(e),t);return null!=s?{path:Ir(new kn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(an(e))return this;{const t=on(e),r=this.children.get(t);return null!==r?r.subtree(Wn(e)):new tr(null)}}set(e,t){if(an(e))return new tr(t,this.children);{const r=on(e),s=(this.children.get(r)||new tr(null)).set(Wn(e),t),c=this.children.insert(r,s);return new tr(this.value,c)}}remove(e){if(an(e))return this.children.isEmpty()?new tr(null):new tr(null,this.children);{const t=on(e),r=this.children.get(t);if(r){const i=r.remove(Wn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new tr(null):new tr(this.value,s)}return this}}get(e){if(an(e))return this.value;{const t=on(e),r=this.children.get(t);return r?r.get(Wn(e)):null}}setTree(e,t){if(an(e))return t;{const r=on(e),s=(this.children.get(r)||new tr(null)).setTree(Wn(e),t);let c;return c=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new tr(this.value,c)}}fold(e){return this.fold_(bn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ir(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,bn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(an(e))return null;{const s=on(e),c=this.children.get(s);return c?c.findOnPath_(Wn(e),Ir(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,bn(),t)}foreachOnPath_(e,t,r){if(an(e))return this;{this.value&&r(t,this.value);const i=on(e),s=this.children.get(i);return s?s.foreachOnPath_(Wn(e),Ir(t,i),r):new tr(null)}}foreach(e){this.foreach_(bn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ir(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Tc{constructor(e){this.writeTree_=e}static empty(){return new Tc(new tr(null))}}function iT(n,e,t){if(an(e))return new Tc(new tr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const c=mo(i,e);return s=s.updateChild(c,t),new Tc(n.writeTree_.set(i,s))}{const i=new tr(t),s=n.writeTree_.setTree(e,i);return new Tc(s)}}}function $F(n,e,t){let r=n;return ss(t,(i,s)=>{r=iT(r,Ir(e,i),s)}),r}function u6(n,e){if(an(e))return Tc.empty();{const t=n.writeTree_.setTree(e,new tr(null));return new Tc(t)}}function GF(n,e){return null!=Zm(n,e)}function Zm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(mo(t.path,e)):null}function d6(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(er,(r,i)=>{e.push(new un(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new un(r,i.value))}),e}function vp(n,e){if(an(e))return n;{const t=Zm(n,e);return new Tc(null!=t?new tr(t):n.writeTree_.subtree(e))}}function qF(n){return n.writeTree_.isEmpty()}function $v(n,e){return h6(bn(),n.writeTree_,e)}function h6(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,F.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=h6(Ir(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Ir(n,".priority"),r)),t}}function eA(n,e){return _6(e,n)}function Ite(n,e){if(n.snap)return yl(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&yl(Ir(n.path,t),e))return!0;return!1}function Nte(n){return n.visible}function f6(n,e,t){let r=Tc.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const c=s.path;let d;if(s.snap)yl(t,c)?(d=mo(t,c),r=iT(r,d,s.snap)):yl(c,t)&&(d=mo(c,t),r=iT(r,bn(),s.snap.getChild(d)));else{if(!s.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(yl(t,c))d=mo(t,c),r=$F(r,d,s.children);else if(yl(c,t))if(d=mo(c,t),an(d))r=$F(r,bn(),s.children);else{const f=(0,F.DV)(s.children,on(d));if(f){const y=f.getChild(Wn(d));r=iT(r,bn(),y)}}}}}return r}function p6(n,e,t,r,i){if(r||i){const s=vp(n.visibleWrites,e);return!i&&qF(s)?t:i||null!=t||GF(s,bn())?$v(f6(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(yl(y.path,e)||yl(e,y.path))},e),t||Qt.EMPTY_NODE):null}{const s=Zm(n.visibleWrites,e);if(null!=s)return s;{const c=vp(n.visibleWrites,e);return qF(c)?t:null!=t||GF(c,bn())?$v(c,t||Qt.EMPTY_NODE):null}}}function tA(n,e,t,r){return p6(n.writeTree,n.treePath,e,t,r)}function zF(n,e){return function xte(n,e,t){let r=Qt.EMPTY_NODE;const i=Zm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(er,(s,c)=>{r=r.updateImmediateChild(s,c)}),r;if(t){const s=vp(n.visibleWrites,e);return t.forEachChild(er,(c,d)=>{const f=$v(vp(s,new kn(c)),d);r=r.updateImmediateChild(c,f)}),d6(s).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return d6(vp(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function g6(n,e,t,r){return function kte(n,e,t,r,i){(0,F.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Ir(e,t);if(GF(n.visibleWrites,s))return null;{const c=vp(n.visibleWrites,s);return qF(c)?i.getChild(t):$v(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function nA(n,e){return function Rte(n,e){return Zm(n.visibleWrites,e)}(n.writeTree,Ir(n.treePath,e))}function ZF(n,e,t){return function Ote(n,e,t,r){const i=Ir(e,t),s=Zm(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?$v(vp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function m6(n,e){return _6(Ir(n.treePath,e),n.writeTree)}function _6(n,e){return{treePath:n,writeTree:e}}class Lte{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,XC(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,JC(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Vv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,XC(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const y6=new class Ute{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class WF{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new yp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ZF(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:zm(this.viewCache_),s=function Fte(n,e,t,r,i,s){return function Mte(n,e,t,r,i,s,c){let d;const f=vp(n.visibleWrites,e),y=Zm(f,bn());if(null!=y)d=y;else{if(null==t)return[];d=$v(f,t)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const w=[],E=c.getCompare(),A=s?d.getReverseIteratorFrom(r,c):d.getIteratorFrom(r,c);let k=A.getNext();for(;k&&w.length<i;)0!==E(k,r)&&w.push(k),k=A.getNext();return w}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function v6(n,e,t,r,i,s){const c=e.eventCache;if(null!=nA(r,t))return e;{let d,f;if(an(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=zm(e),E=zF(r,y instanceof Qt?y:Qt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),E,s)}else{const y=tA(r,zm(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=on(t);if(".priority"===y){(0,F.hu)(1===_p(t),"Can't have a priority with additional path components");const w=c.getNode();f=e.serverCache.getNode();const E=g6(r,t,w,f);d=null!=E?n.filter.updatePriority(w,E):c.getNode()}else{const w=Wn(t);let E;if(c.isCompleteForChild(y)){f=e.serverCache.getNode();const A=g6(r,t,c.getNode(),f);E=null!=A?c.getNode().getImmediateChild(y).updateChild(w,A):c.getNode().getImmediateChild(y)}else E=ZF(r,y,e.serverCache);d=null!=E?n.filter.updateChild(c.getNode(),y,E,w,i,s):c.getNode()}}return rT(e,d,c.isFullyInitialized()||an(t),n.filter.filtersNodes())}}function rA(n,e,t,r,i,s,c,d){const f=e.serverCache;let y;const w=c?n.filter:n.filter.getIndexedFilter();if(an(t))y=w.updateFullNode(f.getNode(),r,null);else if(w.filtersNodes()&&!f.isFiltered()){const k=f.getNode().updateChild(t,r);y=w.updateFullNode(f.getNode(),k,null)}else{const k=on(t);if(!f.isCompleteForPath(t)&&_p(t)>1)return e;const M=Wn(t),W=f.getNode().getImmediateChild(k).updateChild(M,r);y=".priority"===k?w.updatePriority(f.getNode(),W):w.updateChild(f.getNode(),k,W,M,y6,null)}const E=c6(e,y,f.isFullyInitialized()||an(t),w.filtersNodes());return v6(n,E,t,i,new WF(i,E,s),d)}function KF(n,e,t,r,i,s,c){const d=e.eventCache;let f,y;const w=new WF(i,e,s);if(an(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,c),f=rT(e,y,!0,n.filter.filtersNodes());else{const E=on(t);if(".priority"===E)y=n.filter.updatePriority(e.eventCache.getNode(),r),f=rT(e,y,d.isFullyInitialized(),d.isFiltered());else{const A=Wn(t),k=d.getNode().getImmediateChild(E);let M;if(an(A))M=r;else{const V=w.getCompleteChild(E);M=null!=V?".priority"===DF(A)&&V.getChild(qG(A)).isEmpty()?V:V.updateChild(A,r):Qt.EMPTY_NODE}f=k.equals(M)?e:rT(e,n.filter.updateChild(d.getNode(),E,M,A,w,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function b6(n,e){return n.eventCache.isCompleteForChild(e)}function w6(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function YF(n,e,t,r,i,s,c,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,f=e;y=an(t)?r:new tr(null).setTree(t,r);const w=e.serverCache.getNode();return y.children.inorderTraversal((E,A)=>{if(w.hasChild(E)){const M=w6(0,e.serverCache.getNode().getImmediateChild(E),A);f=rA(n,f,new kn(E),M,i,s,c,d)}}),y.children.inorderTraversal((E,A)=>{const k=!e.serverCache.isCompleteForChild(E)&&null===A.value;if(!w.hasChild(E)&&!k){const V=w6(0,e.serverCache.getNode().getImmediateChild(E),A);f=rA(n,f,new kn(E),V,i,s,c,d)}}),f}class Zte{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new MF(r.getIndex()),s=function ate(n){return n.loadsAllData()?new MF(n.getIndex()):n.hasLimit()?new ote(n):new eT(n)}(r);this.processor_=function Bte(n){return{filter:n}}(s);const c=t.serverCache,d=t.eventCache,f=i.updateFullNode(Qt.EMPTY_NODE,c.getNode(),null),y=s.updateFullNode(Qt.EMPTY_NODE,d.getNode(),null),w=new yp(f,c.isFullyInitialized(),i.filtersNodes()),E=new yp(y,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=JI(E,w),this.eventGenerator_=new yte(this.query_)}get query(){return this.query_}}function Yte(n,e){const t=zm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!an(e)&&!t.getImmediateChild(on(e)).isEmpty())?t.getChild(e):null}function C6(n){return 0===n.eventRegistrations_.length}function T6(n,e,t){const r=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function E6(n,e,t,r){e.type===vl.MERGE&&null!==e.source.queryId&&((0,F.hu)(zm(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(XI(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function jte(n,e,t,r,i){const s=new Lte;let c,d;if(t.type===vl.OVERWRITE){const y=t;y.source.fromUser?c=KF(n,e,y.path,y.snap,r,i,s):((0,F.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!an(y.path),c=rA(n,e,y.path,y.snap,r,i,d,s))}else if(t.type===vl.MERGE){const y=t;y.source.fromUser?c=function $te(n,e,t,r,i,s,c){let d=e;return r.foreach((f,y)=>{const w=Ir(t,f);b6(e,on(w))&&(d=KF(n,d,w,y,i,s,c))}),r.foreach((f,y)=>{const w=Ir(t,f);b6(e,on(w))||(d=KF(n,d,w,y,i,s,c))}),d}(n,e,y.path,y.children,r,i,s):((0,F.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),c=YF(n,e,y.path,y.children,r,i,d,s))}else if(t.type===vl.ACK_USER_WRITE){const y=t;c=y.revert?function zte(n,e,t,r,i,s){let c;if(null!=nA(r,t))return e;{const d=new WF(r,e,i),f=e.eventCache.getNode();let y;if(an(t)||".priority"===on(t)){let w;if(e.serverCache.isFullyInitialized())w=tA(r,zm(e));else{const E=e.serverCache.getNode();(0,F.hu)(E instanceof Qt,"serverChildren would be complete if leaf node"),w=zF(r,E)}y=n.filter.updateFullNode(f,w,s)}else{const w=on(t);let E=ZF(r,w,e.serverCache);null==E&&e.serverCache.isCompleteForChild(w)&&(E=f.getImmediateChild(w)),y=null!=E?n.filter.updateChild(f,w,E,Wn(t),d,s):e.eventCache.getNode().hasChild(w)?n.filter.updateChild(f,w,Qt.EMPTY_NODE,Wn(t),d,s):f,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=tA(r,zm(e)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,s)))}return c=e.serverCache.isFullyInitialized()||null!=nA(r,bn()),rT(e,y,c,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function Gte(n,e,t,r,i,s,c){if(null!=nA(i,t))return e;const d=e.serverCache.isFiltered(),f=e.serverCache;if(null!=r.value){if(an(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return rA(n,e,t,f.getNode().getChild(t),i,s,d,c);if(an(t)){let y=new tr(null);return f.getNode().forEachChild($u,(w,E)=>{y=y.set(new kn(w),E)}),YF(n,e,t,y,i,s,d,c)}return e}{let y=new tr(null);return r.foreach((w,E)=>{const A=Ir(t,w);f.isCompleteForPath(A)&&(y=y.set(w,f.getNode().getChild(A)))}),YF(n,e,t,y,i,s,d,c)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==vl.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);c=function qte(n,e,t,r,i){const s=e.serverCache;return v6(n,c6(e,s.getNode(),s.isFullyInitialized()||an(t),s.isFiltered()),t,r,y6,i)}(n,e,t.path,r,s)}const f=s.getChanges();return function Hte(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=XI(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(s6(XI(e)))}}(e,c,f),{viewCache:c,changes:f}}(n.processor_,i,e,t,r);return function Vte(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,F.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,D6(n,s.changes,s.viewCache.eventCache.getNode(),null)}function D6(n,e,t,r){return function vte(n,e,t,r){const i=[],s=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function ste(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),nT(n,i,"child_removed",e,r,t),nT(n,i,"child_added",e,r,t),nT(n,i,"child_moved",s,r,t),nT(n,i,"child_changed",e,r,t),nT(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let iA,oA;class S6{constructor(){this.views=new Map}}function QF(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,F.hu)(null!=s,"SyncTree gave us an op for an invalid query."),E6(s,e,t,r)}{let s=[];for(const c of n.views.values())s=s.concat(E6(c,e,t,r));return s}}function I6(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let d=tA(t,i?r:null),f=!1;d?f=!0:r instanceof Qt?(d=zF(t,r),f=!1):(d=Qt.EMPTY_NODE,f=!1);const y=JI(new yp(d,f,!1),new yp(r,i,!1));return new Zte(e,y)}return c}function A6(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function bp(n,e){let t=null;for(const r of n.views.values())t=t||Yte(r,e);return t}function N6(n,e){return e._queryParams.loadsAllData()?sA(n):n.views.get(e._queryIdentifier)}function x6(n,e){return null!=N6(n,e)}function wp(n){return null!=sA(n)}function sA(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let one=1;class k6{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tr(null),this.pendingWriteTree_=function Pte(){return{visibleWrites:Tc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function JF(n,e,t,r,i){return function Tte(n,e,t,r,i){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=iT(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Gv(n,new qm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Cp(n,e,t=!1){const r=function Dte(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Ste(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=t&&Ite(d,r.path)?i=!1:yl(r.path,d.path)&&(s=!0)),c--}return!!i&&(s?(function Ate(n){n.visibleWrites=f6(n.allWrites,Nte,bn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=u6(n.visibleWrites,r.path):ss(r.children,f=>{n.visibleWrites=u6(n.visibleWrites,Ir(r.path,f))}),!0))}(n.pendingWriteTree_,e)){let s=new tr(null);return null!=r.snap?s=s.set(bn(),!0):ss(r.children,c=>{s=s.set(new kn(c),!0)}),Gv(n,new QI(r.path,s,t))}return[]}function sT(n,e,t){return Gv(n,new qm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function aA(n,e,t,r,i=!1){const s=e._path,c=n.syncPointTree_.get(s);let d=[];if(c&&("default"===e._queryIdentifier||x6(c,e))){const f=function rne(n,e,t,r){const i=e._queryIdentifier,s=[];let c=[];const d=wp(n);if("default"===i)for(const[f,y]of n.views.entries())c=c.concat(T6(y,t,r)),C6(y)&&(n.views.delete(f),y.query._queryParams.loadsAllData()||s.push(y.query));else{const f=n.views.get(i);f&&(c=c.concat(T6(f,t,r)),C6(f)&&(n.views.delete(i),f.query._queryParams.loadsAllData()||s.push(f.query)))}return d&&!wp(n)&&s.push(new(function ene(){return(0,F.hu)(iA,"Reference.ts has not been loaded"),iA}())(e._repo,e._path)),{removed:s,events:c}}(c,e,t,r);(function tne(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const y=f.removed;if(d=f.events,!i){const w=-1!==y.findIndex(A=>A._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(s,(A,k)=>wp(k));if(w&&!E){const A=n.syncPointTree_.subtree(s);if(!A.isEmpty()){const k=function fne(n){return n.fold((e,t,r)=>{if(t&&wp(t))return[sA(t)];{let i=[];return t&&(i=A6(t)),ss(r,(s,c)=>{i=i.concat(c)}),i}})}(A);for(let M=0;M<k.length;++M){const V=k[M],W=V.query,ne=P6(n,V);n.listenProvider_.startListening(aT(W),oT(n,W),ne.hashFn,ne.onComplete)}}}!E&&y.length>0&&!r&&(w?n.listenProvider_.stopListening(aT(e),null):y.forEach(A=>{const k=n.queryToTagMap.get(cA(A));n.listenProvider_.stopListening(aT(A),k)}))}!function pne(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=cA(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,y)}return d}function O6(n,e,t,r){const i=eL(n,r);if(null!=i){const s=tL(i),c=s.path,d=s.queryId,f=mo(c,e);return nL(n,c,new qm(jF(d),f,t))}return[]}function XF(n,e,t,r=!1){const i=e._path;let s=null,c=!1;n.syncPointTree_.foreachOnPath(i,(A,k)=>{const M=mo(A,i);s=s||bp(k,M),c=c||wp(k)});let f,d=n.syncPointTree_.get(i);d?(c=c||wp(d),s=s||bp(d,bn())):(d=new S6,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=s?f=!0:(f=!1,s=Qt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((k,M)=>{const V=bp(M,bn());V&&(s=s.updateImmediateChild(k,V))}));const y=x6(d,e);if(!y&&!e._queryParams.loadsAllData()){const A=cA(e);(0,F.hu)(!n.queryToTagMap.has(A),"View does not exist, but we have a tag");const k=function gne(){return one++}();n.queryToTagMap.set(A,k),n.tagToQueryMap.set(k,A)}let E=function nne(n,e,t,r,i,s){const c=I6(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function Qte(n,e){n.eventRegistrations_.push(e)}(c,t),function Jte(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(er,(s,c)=>{r.push(Vv(s,c))}),t.isFullyInitialized()&&r.push(s6(t.getNode())),D6(n,r,t.getNode(),e)}(c,t)}(d,e,t,eA(n.pendingWriteTree_,i),s,f);if(!y&&!c&&!r){const A=N6(d,e);E=E.concat(function mne(n,e,t){const r=e._path,i=oT(n,e),s=P6(n,t),c=n.listenProvider_.startListening(aT(e),i,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,F.hu)(!wp(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((y,w,E)=>{if(!an(y)&&w&&wp(w))return[sA(w).query];{let A=[];return w&&(A=A.concat(A6(w).map(k=>k.query))),ss(E,(k,M)=>{A=A.concat(M)}),A}});for(let y=0;y<f.length;++y){const w=f[y];n.listenProvider_.stopListening(aT(w),oT(n,w))}}return c}(n,e,A))}return E}function lA(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(c,d)=>{const y=bp(d,mo(c,e));if(y)return y});return p6(i,e,s,t,!0)}function Gv(n,e){return R6(e,n.syncPointTree_,null,eA(n.pendingWriteTree_,bn()))}function R6(n,e,t,r){if(an(n.path))return M6(n,e,t,r);{const i=e.get(bn());null==t&&null!=i&&(t=bp(i,bn()));let s=[];const c=on(n.path),d=n.operationForChild(c),f=e.children.get(c);if(f&&d){const y=t?t.getImmediateChild(c):null,w=m6(r,c);s=s.concat(R6(d,f,y,w))}return i&&(s=s.concat(QF(i,n,r,t))),s}}function M6(n,e,t,r){const i=e.get(bn());null==t&&null!=i&&(t=bp(i,bn()));let s=[];return e.children.inorderTraversal((c,d)=>{const f=t?t.getImmediateChild(c):null,y=m6(r,c),w=n.operationForChild(c);w&&(s=s.concat(M6(w,d,f,y)))}),i&&(s=s.concat(QF(i,n,r,t))),s}function P6(n,e){const t=e.query,r=oT(n,t);return{hashFn:()=>(function Wte(n){return n.viewCache_.serverCache.getNode()}(e)||Qt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function une(n,e,t){const r=eL(n,t);if(r){const i=tL(r),s=i.path,c=i.queryId,d=mo(s,e);return nL(n,s,new tT(jF(c),d))}return[]}(n,t._path,r):function cne(n,e){return Gv(n,new tT({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function cee(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return aA(n,t,null,s)}}}}function oT(n,e){const t=cA(e);return n.queryToTagMap.get(t)}function cA(n){return n._path.toString()+"$"+n._queryIdentifier}function eL(n,e){return n.tagToQueryMap.get(e)}function tL(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new kn(n.substr(0,e))}}function nL(n,e,t){const r=n.syncPointTree_.get(e);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),QF(r,t,eA(n.pendingWriteTree_,e),null)}function aT(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function sne(){return(0,F.hu)(oA,"Reference.ts has not been loaded"),oA}())(n._repo,n._path):n}class rL{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new rL(t)}node(){return this.node_}}class iL{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ir(this.path_,e);return new iL(this.syncTree_,t)}node(){return lA(this.syncTree_,this.path_)}}const _ne=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},F6=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?yne(n[".sv"],e,t):"object"==typeof n[".sv"]?vne(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},yne=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},vne=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,F.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},L6=function(n,e,t,r){return oL(e,new iL(t,n),r)},sL=function(n,e,t){return oL(n,new rL(e),t)};function oL(n,e,t){const r=n.getPriority().val(),i=F6(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const c=n,d=F6(c.getValue(),e,t);return d!==c.getValue()||i!==c.getPriority().val()?new Lv(d,Br(i)):n}{const c=n;return s=c,i!==c.getPriority().val()&&(s=s.updatePriority(new Lv(i))),c.forEachChild(er,(d,f)=>{const y=oL(f,e.getImmediateChild(d),t);y!==f&&(s=s.updateImmediateChild(d,y))}),s}}class aL{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function uA(n,e){let t=e instanceof kn?e:new kn(e),r=n,i=on(t);for(;null!==i;){const s=(0,F.DV)(r.node.children,i)||{children:{},childCount:0};r=new aL(i,r,s),t=Wn(t),i=on(t)}return r}function Wm(n){return n.node.value}function lL(n,e){n.node.value=e,cL(n)}function U6(n){return n.node.childCount>0}function dA(n,e){ss(n.node.children,(t,r)=>{e(new aL(t,n,r))})}function B6(n,e,t,r){t&&!r&&e(n),dA(n,i=>{B6(i,e,!0,r)}),t&&r&&e(n)}function lT(n){return new kn(null===n.parent?n.name:lT(n.parent)+"/"+n.name)}function cL(n){null!==n.parent&&function Cne(n,e,t){const r=function bne(n){return void 0===Wm(n)&&!U6(n)}(t),i=(0,F.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,cL(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,cL(n))}(n.parent,n.name,n)}const Tne=/[\[\].#$\/\u0000-\u001F\u007F]/,Ene=/[\[\].#$\u0000-\u001F\u007F]/,uL=10485760,hA=function(n){return"string"==typeof n&&0!==n.length&&!Tne.test(n)},V6=function(n){return"string"==typeof n&&0!==n.length&&!Ene.test(n)},cT=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!UI(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},Gu=function(n,e,t,r){r&&void 0===e||uT((0,F.gK)(n,"value"),e,t)},uT=function(n,e,t){const r=t instanceof kn?new Vee(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+$m(r));if("function"==typeof e)throw new Error(n+"contains a function "+$m(r)+" with contents = "+e.toString());if(UI(e))throw new Error(n+"contains "+e.toString()+" "+$m(r));if("string"==typeof e&&e.length>uL/3&&(0,F.ug)(e)>uL)throw new Error(n+"contains a string greater than "+uL+" utf8 bytes "+$m(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(ss(e,(c,d)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!hA(c)))throw new Error(n+" contains an invalid key ("+c+") "+$m(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function jee(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),zG(n)})(r,c),uT(n,d,r),function Hee(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+$m(r)+" in addition to actual children.")}},j6=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ss(e,(c,d)=>{const f=new kn(c);if(uT(i,d,Ir(t,f)),".priority"===DF(f)&&!cT(d))throw new Error(i+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(f)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=WC(r);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!hA(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Bee);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&yl(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},dL=function(n,e,t){if(!t||void 0!==e){if(UI(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!cT(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dT=function(n,e,t,r){if(!(r&&void 0===t||hA(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},hT=function(n,e,t,r){if(!(r&&void 0===t||V6(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ine=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),hT(n,e,t,r)},bl=function(n,e){if(".info"===on(e))throw new Error(n+" failed = Can't modify data under /.info/")},H6=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!hA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),V6(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ane{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function fA(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!SF(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function $6(n,e,t){fA(n,t),G6(n,r=>SF(r,e))}function Na(n,e,t){fA(n,t),G6(n,r=>yl(r,e)||yl(e,r))}function G6(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Nne(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Nne(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();jm&&is("event: "+t.toString()),Pv(r)}}}const q6="repo_interrupt",xne=25;class kne{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ane,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=YI(),this.transactionQueueTree_=new aL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function z6(n){const t=n.infoData_.getNode(new kn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function fT(n){return _ne({timestamp:z6(n)})}function Z6(n,e,t,r,i){n.dataUpdateCount++;const s=new kn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const f=(0,F.UI)(t,y=>Br(y));c=function dne(n,e,t,r){const i=eL(n,r);if(i){const s=tL(i),c=s.path,d=s.queryId,f=mo(c,e),y=tr.fromObject(t);return nL(n,c,new Hv(jF(d),f,y))}return[]}(n.serverSyncTree_,s,f,i)}else{const f=Br(t);c=O6(n.serverSyncTree_,s,f,i)}else if(r){const f=(0,F.UI)(t,y=>Br(y));c=function lne(n,e,t){const r=tr.fromObject(t);return Gv(n,new Hv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,f)}else{const f=Br(t);c=sT(n.serverSyncTree_,s,f)}let d=s;c.length>0&&(d=zv(n,s)),Na(n.eventQueue_,d,c)}function W6(n,e){hL(n,"connected",e),!1===e&&function Fne(n){qv(n,"onDisconnectEvents");const e=fT(n),t=YI();UF(n.onDisconnect_,bn(),(i,s)=>{const c=L6(i,s,n.serverSyncTree_,e);jv(t,i,c)});let r=[];UF(t,bn(),(i,s)=>{r=r.concat(sT(n.serverSyncTree_,i,s));const c=mL(n,i);zv(n,c)}),n.onDisconnect_=YI(),Na(n.eventQueue_,bn(),r)}(n)}function hL(n,e,t){const r=new kn("/.info/"+e),i=Br(t);n.infoData_.updateSnapshot(r,i);const s=sT(n.infoSyncTree_,r,i);Na(n.eventQueue_,r,s)}function pA(n){return n.nextWriteId_++}function fL(n,e,t,r,i){qv(n,"set",{path:e.toString(),value:t,priority:r});const s=fT(n),c=Br(t,r),d=lA(n.serverSyncTree_,e),f=sL(c,d,s),y=pA(n),w=JF(n.serverSyncTree_,e,f,y,!0);fA(n.eventQueue_,w),n.server_.put(e.toString(),c.val(!0),(A,k)=>{const M="ok"===A;M||Ls("set at "+e+" failed: "+A);const V=Cp(n.serverSyncTree_,y,!M);Na(n.eventQueue_,e,V),Tp(0,i,A,k)});const E=mL(n,e);zv(n,E),Na(n.eventQueue_,E,[])}function Lne(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&LF(n.onDisconnect_,e),Tp(0,t,r,i)})}function K6(n,e,t,r){const i=Br(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,c)=>{"ok"===s&&jv(n.onDisconnect_,e,i),Tp(0,r,s,c)})}function pL(n,e,t){let r;r=".info"===on(e._path)?aA(n.infoSyncTree_,e,t):aA(n.serverSyncTree_,e,t),$6(n.eventQueue_,e._path,r)}function Y6(n){n.persistentConnection_&&n.persistentConnection_.interrupt(q6)}function qv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),is(t,...e)}function Tp(n,e,t,r){e&&Pv(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const c=new Error(s);c.code=i,e(c)}})}function gL(n,e,t){return lA(n.serverSyncTree_,e,t)||Qt.EMPTY_NODE}function gA(n,e=n.transactionQueueTree_){if(e||mA(n,e),Wm(e)){const t=J6(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function $ne(n,e,t){const r=t.map(y=>y.currentWriteId),i=gL(n,e,r);let s=i;const c=i.hash();for(let y=0;y<t.length;y++){const w=t[y];(0,F.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const E=mo(e,w.path);s=s.updateChild(E,w.currentOutputSnapshotRaw)}const d=s.val(!0),f=e;n.server_.put(f.toString(),d,y=>{qv(n,"transaction put response",{path:f.toString(),status:y});let w=[];if("ok"===y){const E=[];for(let A=0;A<t.length;A++)t[A].status=2,w=w.concat(Cp(n.serverSyncTree_,t[A].currentWriteId)),t[A].onComplete&&E.push(()=>t[A].onComplete(null,!0,t[A].currentOutputSnapshotResolved)),t[A].unwatcher();mA(n,uA(n.transactionQueueTree_,e)),gA(n,n.transactionQueueTree_),Na(n.eventQueue_,e,w);for(let A=0;A<E.length;A++)Pv(E[A])}else{if("datastale"===y)for(let E=0;E<t.length;E++)t[E].status=3===t[E].status?4:0;else{Ls("transaction at "+f.toString()+" failed: "+y);for(let E=0;E<t.length;E++)t[E].status=4,t[E].abortReason=y}zv(n,e)}},c)}(n,lT(e),t)}else U6(e)&&dA(e,t=>{gA(n,t)})}function zv(n,e){const t=Q6(n,e),r=lT(t);return function Gne(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const f=e[d],y=mo(t,f.path);let E,w=!1;if((0,F.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)w=!0,E=f.abortReason,i=i.concat(Cp(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=xne)w=!0,E="maxretry",i=i.concat(Cp(n.serverSyncTree_,f.currentWriteId,!0));else{const A=gL(n,f.path,c);f.currentInputSnapshot=A;const k=e[d].update(A.val());if(void 0!==k){uT("transaction failed: Data returned ",k,f.path);let M=Br(k);"object"==typeof k&&null!=k&&(0,F.r3)(k,".priority")||(M=M.updatePriority(A.getPriority()));const W=f.currentWriteId,ne=fT(n),he=sL(M,A,ne);f.currentOutputSnapshotRaw=M,f.currentOutputSnapshotResolved=he,f.currentWriteId=pA(n),c.splice(c.indexOf(W),1),i=i.concat(JF(n.serverSyncTree_,f.path,he,f.currentWriteId,f.applyLocally)),i=i.concat(Cp(n.serverSyncTree_,W,!0))}else w=!0,E="nodata",i=i.concat(Cp(n.serverSyncTree_,f.currentWriteId,!0))}Na(n.eventQueue_,t,i),i=[],w&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===E?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(E),!1,null)))}mA(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)Pv(r[d]);gA(n,n.transactionQueueTree_)}(n,J6(n,t),r),r}function Q6(n,e){let t,r=n.transactionQueueTree_;for(t=on(e);null!==t&&void 0===Wm(r);)r=uA(r,t),t=on(e=Wn(e));return r}function J6(n,e){const t=[];return X6(n,e,t),t.sort((r,i)=>r.order-i.order),t}function X6(n,e,t){const r=Wm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);dA(e,i=>{X6(n,i,t)})}function mA(n,e){const t=Wm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,lL(e,t.length>0?t:void 0)}dA(e,r=>{mA(n,r)})}function mL(n,e){const t=lT(Q6(n,e)),r=uA(n.transactionQueueTree_,e);return function wne(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{_L(n,i)}),_L(n,r),B6(r,i=>{_L(n,i)}),t}function _L(n,e){const t=Wm(e);if(t){const r=[];let i=[],s=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,F.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,t[c].status=3,t[c].abortReason="set"):((0,F.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Cp(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?lL(e,void 0):t.length=s+1,Na(n.eventQueue_,lT(e),i);for(let c=0;c<r.length;c++)Pv(r[c])}}const yL=function(n,e){const t=Zne(n),r=t.namespace;return"firebase.com"===t.domain&&ju(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ju("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ls("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new vF(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new kn(t.pathString)}},Zne=function(n){let e="",t="",r="",i="",s="",c=!0,d="https",f=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let w=n.indexOf("/");-1===w&&(w=n.length);let E=n.indexOf("?");-1===E&&(E=n.length),e=n.substring(0,Math.min(w,E)),w<E&&(i=function qne(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(w,E)));const A=function zne(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ls(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,E)));y=e.indexOf(":"),y>=0?(c="https"===d||"wss"===d,f=parseInt(e.substring(y+1),10)):y=e.length;const k=e.slice(0,y);if("localhost"===k.toLowerCase())t="localhost";else if(k.split(".").length<=2)t=k;else{const M=e.indexOf(".");r=e.substring(0,M).toLowerCase(),t=e.substring(M+1),s=r}"ns"in A&&(s=A.ns)}return{host:e,port:f,domain:t,subdomain:r,secure:c,scheme:d,pathString:i,namespace:s}};class eq{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class tq{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class vL{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class nq{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return Lne(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){bl("OnDisconnect.remove",this._path);const e=new F.BH;return K6(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){bl("OnDisconnect.set",this._path),Gu("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return K6(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){bl("OnDisconnect.setWithPriority",this._path),Gu("OnDisconnect.setWithPriority",e,this._path,!1),dL("OnDisconnect.setWithPriority",t,!1);const r=new F.BH;return function Une(n,e,t,r,i){const s=Br(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(c,d)=>{"ok"===c&&jv(n.onDisconnect_,e,s),Tp(0,i,c,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){bl("OnDisconnect.update",this._path),j6("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function Bne(n,e,t,r){if((0,F.xb)(t))return is("onDisconnect().update() called with empty data.  Don't do anything."),void Tp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&ss(t,(c,d)=>{const f=Br(d);jv(n.onDisconnect_,Ir(e,c),f)}),Tp(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class $o{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return an(this._path)?null:DF(this._path)}get ref(){return new wl(this._repo,this._path)}get _queryIdentifier(){const e=a6(this._queryParams),t=mF(e);return"{}"===t?"default":t}get _queryObject(){return a6(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof $o))return!1;const t=this._repo===e._repo,r=SF(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Uee(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function _A(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ep(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===$u){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==vh)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Hu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===er){if(null!=e&&!cT(e)||null!=t&&!cT(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof kF||n.getIndex()===OF,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function yA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class wl extends $o{constructor(e,t){super(e,t,new ZI,!1)}get parent(){const e=qG(this._path);return null===e?null:new wl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Km{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new kn(e),r=Ym(this.ref,e);return new Km(this._node.getChild(t),r,er)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Km(i,Ym(this.ref,r),er)))}hasChild(e){const t=new kn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function rq(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?Ym(n._root,e):n._root}function iq(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=yL(e,n._repo.repoInfo_.nodeAdmin);H6("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ju("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),rq(n,t.path.toString())}function Ym(n,e){return null===on((n=(0,F.m9)(n))._path)?Ine("child","path",e,!1):hT("child","path",e,!1),new wl(n._repo,Ir(n._path,e))}function bL(n,e){n=(0,F.m9)(n),bl("set",n._path),Gu("set",e,n._path,!1);const t=new F.BH;return fL(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Jne(n,e){j6("update",e,n._path,!1);const t=new F.BH;return function Pne(n,e,t,r){qv(n,"update",{path:e.toString(),value:t});let i=!0;const s=fT(n),c={};if(ss(t,(d,f)=>{i=!1,c[d]=L6(Ir(e,d),Br(f),n.serverSyncTree_,s)}),i)is("update() called with empty data.  Don't do anything."),Tp(0,r,"ok",void 0);else{const d=pA(n),f=function ane(n,e,t,r){!function Ete(n,e,t,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=$F(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=tr.fromObject(t);return Gv(n,new Hv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,d);fA(n.eventQueue_,f),n.server_.merge(e.toString(),t,(y,w)=>{const E="ok"===y;E||Ls("update at "+e+" failed: "+y);const A=Cp(n.serverSyncTree_,d,!E),k=A.length>0?zv(n,e):e;Na(n.eventQueue_,k,A),Tp(0,r,y,w)}),ss(t,y=>{const w=mL(n,Ir(e,y));zv(n,w)}),Na(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Xne(n){n=(0,F.m9)(n);const e=new vL(()=>{}),t=new pT(e);return function Mne(n,e,t){const r=function hne(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,w)=>{const E=mo(y,t);r=r||bp(w,E)});let i=n.syncPointTree_.get(t);i?r=r||bp(i,bn()):(i=new S6,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,c=s?new yp(r,!0,!1):null;return function Kte(n){return XI(n.viewCache_)}(I6(i,e,eA(n.pendingWriteTree_,e._path),s?c.getNode():Qt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Br(i).withIndex(e._queryParams.getIndex());let c;if(XF(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=sT(n.serverSyncTree_,e._path,s);else{const d=oT(n.serverSyncTree_,e);c=O6(n.serverSyncTree_,e._path,s,d)}return Na(n.eventQueue_,e._path,c),aA(n.serverSyncTree_,e,t,null,!0),s},i=>(qv(n,"get for query "+(0,F.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Km(r,new wl(n._repo,n._path),n._queryParams.getIndex()))}class pT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new eq("value",this,new Km(e.snapshotNode,new wl(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new tq(this,e,t):null}matches(e){return e instanceof pT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class vA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new tq(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const r=Ym(new wl(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new eq(e.type,this,new Km(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof vA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function gT(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const f=t,y=(w,E)=>{pL(n._repo,n,d),f(w,E)};y.userCallback=t.userCallback,y.context=t.context,t=y}const c=new vL(t,s||void 0),d="value"===e?new pT(c):new vA(e,c);return function Vne(n,e,t){let r;r=".info"===on(e._path)?XF(n.infoSyncTree_,e,t):XF(n.serverSyncTree_,e,t),$6(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>pL(n._repo,n,d)}function wL(n,e,t,r){return gT(n,"value",e,t,r)}function sq(n,e,t,r){return gT(n,"child_added",e,t,r)}function oq(n,e,t,r){return gT(n,"child_changed",e,t,r)}function aq(n,e,t,r){return gT(n,"child_moved",e,t,r)}function lq(n,e,t,r){return gT(n,"child_removed",e,t,r)}function cq(n,e,t){let r=null;const i=t?new vL(t):null;"value"===e?r=new pT(i):e&&(r=new vA(e,i)),pL(n._repo,n,r)}class Ec{}class uq extends Ec{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gu("endAt",this._value,e._path,!0);const t=FF(e._queryParams,this._value,this._key);if(yA(t),Ep(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $o(e._repo,e._path,t,e._orderByCalled)}}class tre extends Ec{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gu("endBefore",this._value,e._path,!1);const t=function dte(n,e,t){let r,i;return n.index_===$u?("string"==typeof e&&(e=i6(e)),i=FF(n,e,t)):(r=null==t?vh:i6(t),i=FF(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(yA(t),Ep(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $o(e._repo,e._path,t,e._orderByCalled)}}class dq extends Ec{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gu("startAt",this._value,e._path,!0);const t=PF(e._queryParams,this._value,this._key);if(yA(t),Ep(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new $o(e._repo,e._path,t,e._orderByCalled)}}class ire extends Ec{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gu("startAfter",this._value,e._path,!1);const t=function ute(n,e,t){let r;if(n.index_===$u)"string"==typeof e&&(e=r6(e)),r=PF(n,e,t);else{let i;i=null==t?Hu:r6(t),r=PF(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(yA(t),Ep(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new $o(e._repo,e._path,t,e._orderByCalled)}}class ore extends Ec{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new $o(e._repo,e._path,function lte(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class lre extends Ec{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new $o(e._repo,e._path,function cte(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class ure extends Ec{constructor(e){super(),this._path=e}_apply(e){_A(e,"orderByChild");const t=new kn(this._path);if(an(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new kF(t),i=WI(e._queryParams,r);return Ep(i),new $o(e._repo,e._path,i,!0)}}class hre extends Ec{_apply(e){_A(e,"orderByKey");const t=WI(e._queryParams,$u);return Ep(t),new $o(e._repo,e._path,t,!0)}}class pre extends Ec{_apply(e){_A(e,"orderByPriority");const t=WI(e._queryParams,er);return Ep(t),new $o(e._repo,e._path,t,!0)}}class mre extends Ec{_apply(e){_A(e,"orderByValue");const t=WI(e._queryParams,OF);return Ep(t),new $o(e._repo,e._path,t,!0)}}class yre extends Ec{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Gu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new uq(this._value,this._key)._apply(new dq(this._value,this._key)._apply(e))}}function Dc(n,...e){let t=(0,F.m9)(n);for(const r of e)t=r._apply(t);return t}(function Xte(n){(0,F.hu)(!iA,"__referenceConstructor has already been defined"),iA=n})(wl),function ine(n){(0,F.hu)(!oA,"__referenceConstructor has already been defined"),oA=n}(wl);const bre="FIREBASE_DATABASE_EMULATOR_HOST",CL={};let hq=!1;function fq(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||ju("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),is("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,y,c=yL(s,i),d=c.repoInfo;typeof process<"u"&&process.env&&(y=process.env[bre]),y?(f=!0,s=`http://${y}?ns=${d.namespace}`,c=yL(s,i),d=c.repoInfo):f=!c.repoInfo.secure;const w=i&&f?new ZC(ZC.OWNER):new fee(n.name,n.options,e);H6("Invalid Firebase Database URL",c),an(c.path)||ju("Database URL must point to the root of a Firebase Database (not including a child path).");const E=function Tre(n,e,t,r){let i=CL[e.name];i||(i={},CL[e.name]=i);let s=i[n.toURLString()];return s&&ju("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new kne(n,hq,t,r),i[n.toURLString()]=s,s}(d,n,w,new hee(n.name,t));return new Dre(E,n)}class Dre{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function One(n,e,t){if(n.stats_=CF(n.repoInfo_),n.forceRestClient_||dee())n.server_=new KI(n.repoInfo_,(r,i,s,c)=>{Z6(n,r,i,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>W6(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Gm(n.repoInfo_,e,(r,i,s,c)=>{Z6(n,r,i,s,c)},r=>{W6(n,r)},r=>{!function Rne(n,e){ss(e,(t,r)=>{hL(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function mee(n,e){const t=n.toString();return wF[t]||(wF[t]=e()),wF[t]}(n.repoInfo_,()=>new _te(n.stats_,n.server_)),n.infoData_=new hte,n.infoSyncTree_=new k6({startListening:(r,i,s,c)=>{let d=[];const f=n.infoData_.getNode(r._path);return f.isEmpty()||(d=sT(n.infoSyncTree_,r._path,f),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),hL(n,"connected",!1),n.serverSyncTree_=new k6({startListening:(r,i,s,c)=>(n.server_.listen(r,s,i,(d,f)=>{const y=c(d,f);Na(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wl(this._repo,bn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Cre(n,e){const t=CL[e];(!t||t[n.key]!==n)&&ju(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Y6(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ju("Cannot call "+e+" on a deleted database.")}}function pq(){RG.IS_TRANSPORT_INITIALIZED&&Ls("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Sre(){pq(),mp.forceDisallow()}function Ire(){pq(),Fv.forceDisallow(),mp.forceAllow()}function kre(n,e){fG(n,e)}const Rre={".sv":"timestamp"};class Fre{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Gm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Gm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Ore(n){lG(so.SDK_VERSION),(0,so._registerComponent)(new _c.wA("database",(e,{instanceIdentifier:t})=>fq(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,so.registerVersion)(oG,"0.13.5",n),(0,so.registerVersion)(oG,"0.13.5","esm2017")}();const Vre=new yc.Yd("@firebase/database-compat"),gq=function(n){Vre.warn("FIREBASE WARNING: "+n)};class $re{constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,gq("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Gre{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Dp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),hT("DataSnapshot.child","path",e,!1),new Dp(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),hT("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Dp(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new xa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ys{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const c=ys.getCancelAndContextArgs_("Query.on",r,i),d=(y,w)=>{t.call(c.context,new Dp(this.database,y),w)};d.userCallback=t,d.context=c.context;const f=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(e){case"value":return wL(this._delegate,d,f),t;case"child_added":return sq(this._delegate,d,f),t;case"child_removed":return lq(this._delegate,d,f),t;case"child_changed":return oq(this._delegate,d,f),t;case"child_moved":return aq(this._delegate,d,f),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,cq(this._delegate,e,i)}else cq(this._delegate,e)}get(){return Xne(this._delegate).then(e=>new Dp(this.database,e))}once(e,t,r,i){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const s=ys.getCancelAndContextArgs_("Query.once",r,i),c=new F.BH,d=(y,w)=>{const E=new Dp(this.database,y);t&&t.call(s.context,E,w),c.resolve(E)};d.userCallback=t,d.context=s.context;const f=y=>{s.cancel&&s.cancel.call(s.context,y),c.reject(y)};switch(e){case"value":wL(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":sq(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":lq(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":oq(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":aq(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new ys(this.database,Dc(this._delegate,function are(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ore(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new ys(this.database,Dc(this._delegate,function cre(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new lre(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new ys(this.database,Dc(this._delegate,function dre(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return hT("orderByChild","path",n,!1),new ure(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new ys(this.database,Dc(this._delegate,function fre(){return new hre}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new ys(this.database,Dc(this._delegate,function gre(){return new pre}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new ys(this.database,Dc(this._delegate,function _re(){return new mre}()))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new ys(this.database,Dc(this._delegate,function rre(n=null,e){return dT("startAt","key",e,!0),new dq(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new ys(this.database,Dc(this._delegate,function sre(n,e){return dT("startAfter","key",e,!0),new ire(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new ys(this.database,Dc(this._delegate,function ere(n,e){return dT("endAt","key",e,!0),new uq(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new ys(this.database,Dc(this._delegate,function nre(n,e){return dT("endBefore","key",e,!0),new tre(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new ys(this.database,Dc(this._delegate,function vre(n,e){return dT("equalTo","key",e,!0),new yre(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ys))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,F.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,F.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new xa(this.database,new wl(this._delegate._repo,this._delegate._path))}}class xa extends ys{constructor(e,t){super(e,new $o(t._repo,t._path,new ZI,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new xa(this.database,Ym(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new xa(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new xa(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const r=bL(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,gq("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}bl("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const r=Jne(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function Qne(n,e,t){if(bl("setWithPriority",n._path),Gu("setWithPriority",e,n._path,!1),dL("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return fL(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function Kne(n){return bl("remove",n._path),bL(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Lre(n,e,t){var r;if(n=(0,F.m9)(n),bl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new F.BH,d=wL(n,()=>{});return function Hne(n,e,t,r,i,s){qv(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:uG(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=gL(n,e,void 0);c.currentInputSnapshot=d;const f=c.update(d.val());if(void 0===f)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{uT("transaction failed: Data returned ",f,c.path),c.status=0;const y=uA(n.transactionQueueTree_,e),w=Wm(y)||[];let E;w.push(c),lL(y,w),"object"==typeof f&&null!==f&&(0,F.r3)(f,".priority")?(E=(0,F.DV)(f,".priority"),(0,F.hu)(cT(E),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):E=(lA(n.serverSyncTree_,e)||Qt.EMPTY_NODE).getPriority().val();const A=fT(n),k=Br(f,E),M=sL(k,d,A);c.currentOutputSnapshotRaw=k,c.currentOutputSnapshotResolved=M,c.currentWriteId=pA(n);const V=JF(n.serverSyncTree_,e,M,c.currentWriteId,c.applyLocally);Na(n.eventQueue_,e,V),gA(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(f,y,w)=>{let E=null;f?s.reject(f):(E=new Km(w,new wl(n._repo,n._path),er),s.resolve(new Fre(y,E)))},d,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new Gre(s.committed,new Dp(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const r=function Yne(n,e){n=(0,F.m9)(n),bl("setPriority",n._path),dL("setPriority",e,!1);const t=new F.BH;return fL(n._repo,Ir(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const r=function Wne(n,e){n=(0,F.m9)(n),bl("push",n._path),Gu("push",e,n._path,!0);const t=z6(n._repo),r=ite(t),i=Ym(n,r),s=Ym(n,r);let c;return c=null!=e?bL(s,e).then(()=>s):Promise.resolve(s),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new xa(this.database,c));t&&i.then(()=>t(null),c=>t(c));const s=new xa(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return bl("Reference.onDisconnect",this._delegate._path),new $re(new nq(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class mT{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Sre,forceLongPolling:Ire}}useEmulator(e,t,r={}){!function Are(n,e,t,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ju("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ju('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ZC(ZC.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);s=new ZC(c)}!function wre(n,e,t,r){n.repoInfo_=new vF(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof xa){const t=iq(this._delegate,e.toString());return new xa(this,t)}{const t=rq(this._delegate,e);return new xa(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=iq(this._delegate,e);return new xa(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function Nre(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),Y6(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function xre(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function jne(n){n.persistentConnection_&&n.persistentConnection_.resume(q6)}(n._repo)}(this._delegate)}}mT.ServerValue={TIMESTAMP:function Mre(){return Rre}(),increment:n=>function Pre(n){return{".sv":{increment:n}}}(n)};var zre=Object.freeze({__proto__:null,initStandalone:function qre({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){lG(t);const c=new _c.zt("auth-internal",new _c.H0("database-standalone"));return c.setComponent(new _c.wA("auth-internal",()=>r,"PRIVATE")),{instance:new mT(fq(n,c,void 0,e,s),n),namespace:i}}});const Zre=mT.ServerValue;function mq(n){return null==n}function _q(n){return"function"==typeof n.set}function yq(n,e){return _q(e)?e:n.ref(e)}function vq(n,e){if(function Kre(n){return"string"==typeof n}(n))return e.stringCase();if(_q(n))return e.firebaseCase();if(function Yre(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function _T(n,e,t="on",r=Zg.z){return new vn.y(i=>{let s=null;return s=n[t](e,(c,d)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,S.U)(i=>{const{snapshot:s,prevKey:c}=i;let d=null;return s.exists()&&(d=s.key),{type:e,payload:s,prevKey:c,key:d}}),(0,hD.B)())}function bq(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Xre(n,e){const{payload:t,prevKey:r,key:i}=e,s=bq(n,i),c=function Jre(n,e){if(mq(e))return 0;{const t=bq(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(f=>{const y={payload:f,type:"value",prevKey:d,key:f.key};return d=f.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==r&&(n=n.filter(f=>f.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function wq(n){return(mq(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Cq(n,e,t){return function Qre(n,e,t){return _T(n,"value","once",t).pipe(Pn(r=>{const i=[Re(r)];return e.forEach(s=>i.push(_T(n,s,"on",t))),(0,My.T)(...i).pipe(ua(Xre,[]))}),eh())}(n,e=wq(e),t)}function Tq(n,e,t){const r=(e=wq(e)).map(i=>_T(n,i,"on",t));return(0,My.T)(...r)}function Eq(n,e){return function(r,i){return vq(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function rie(n){return function(t){return t?vq(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Dq(n,e){return function(){return _T(n,"value","on",e)}}!function Wre(n){n.INTERNAL.registerComponent(new _c.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new mT(i,r)},"PUBLIC").setServiceProps({Reference:xa,Query:ys,Database:mT,DataSnapshot:Dp,enableLogging:kre,INTERNAL:zre,ServerValue:Zre}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.5")}(OO.Z);const oie=new o.OlP("angularfire2.realtimeDatabaseURL"),aie=new o.OlP("angularfire2.database.use-emulator");let lie=(()=>{class n{constructor(t,r,i,s,c,d,f,y,w,E,A,k,M,V,W){this.schedulers=d;const ne=f,he=(0,Ui.on)(t,c,r);y&&YP(he,c,w,A,k,M,E,V),this.database=(0,Ui.cc)(`${he.name}.database.${i}`,"AngularFireDatabase",he.name,()=>{const Ie=c.runOutsideAngular(()=>he.database(i||void 0));return ne&&Ie.useEmulator(...ne),Ie},[ne])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>yq(this.database,t));let s=i;return r&&(s=r(i)),function iie(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Eq(r,"update"),set:Eq(r,"set"),push:i=>r.push(i),remove:rie(r),snapshotChanges:i=>Cq(n,i,t).pipe(In.iC),stateChanges:i=>Tq(n,i,t).pipe(In.iC),auditTrail:i=>function eie(n,e,t){return function nie(n,e,t){return function tie(n,e){return _T(n,"value","on",e).pipe((0,S.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(Fn(e),(0,S.U)(([i,s])=>{const c=i.lastKeyToLoad,d=s.map(f=>f.key);return{actions:s,lastKeyToLoad:c,loadedKeys:d}}),function tee(n){return(0,Sn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,ve.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,S.U)(i=>i.actions))}(n,Tq(n,e).pipe(ua((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(In.iC),valueChanges:(i,s)=>Cq(n,i,t).pipe((0,S.U)(d=>d.map(f=>s&&s.idField?Object.assign(Object.assign({},f.payload.val()),{[s.idField]:f.key}):f.payload.val())),In.iC)}}(s,this)}object(t){return function sie(n,e){return{query:n,snapshotChanges:()=>Dq(n,e.schedulers.outsideAngular)().pipe(In.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Dq(n,e.schedulers.outsideAngular)().pipe(In.iC,(0,S.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>yq(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Ui.Dh),o.LFG(Ui.xv,8),o.LFG(oie,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(In.HU),o.LFG(aie,8),o.LFG(QP,8),o.LFG(GP,8),o.LFG(qP,8),o.LFG(zP,8),o.LFG(ZP,8),o.LFG(WP,8),o.LFG(KP,8),o.LFG(LC,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),cie=(()=>{class n{constructor(){$P.Z.registerVersion("angularfire",In.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[lie]}),n})(),uie=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=o.oAB({type:n,bootstrap:[VW]});static#n=this.\u0275inj=o.cJS({providers:[...iJ,...sJ,...oJ,...aJ,...lJ,...cJ],imports:[tl,nx,W1,Zx,ok,XT,ND.forRoot(),BW,Ui.hO.initializeApp(uJ_firebase),cie,rJ,eee,M2.forRoot(),T8]})}return n})();Vh().bootstrapModule(uie).catch(n=>console.error(n))},5867:(mt,Ae,U)=>{U.d(Ae,{C6:()=>o.getApps,Mq:()=>o.getApp});var o=U(9681);(0,o.registerVersion)("firebase","9.9.3","app")},127:(mt,Ae,U)=>{U.d(Ae,{Z:()=>o.Z});var o=U(3942);o.Z.registerVersion("firebase","9.9.3","app-compat")},1451:(mt,Ae,U)=>{U.r(Ae);var o=U(5861),te=U(3942),L=U(2090),le=U(9681),oe=U(7582),ie=U(1877),Ce=U(4859);const _e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ee_EMAIL_SIGNIN="EMAIL_SIGNIN",ee_PASSWORD_RESET="PASSWORD_RESET",ee_RECOVER_EMAIL="RECOVER_EMAIL",ee_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",ee_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",ee_VERIFY_EMAIL="VERIFY_EMAIL";const Qe=function Ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ut=function ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},be=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new ie.Yd("@firebase/auth");function $e(v,...g){Oe.logLevel<=ie.in.ERROR&&Oe.error(`Auth (${le.SDK_VERSION}): ${v}`,...g)}function xe(v,...g){throw Ve(v,...g)}function Se(v,...g){return Ve(v,...g)}function Pe(v,g,_){const C=Object.assign(Object.assign({},ut()),{[g]:_});return new L.LL("auth","Firebase",C).create(g,{appName:v.name})}function Ze(v,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&xe(v,"argument-error"),Pe(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(v,...g){if("string"!=typeof v){const _=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=v.name),v._errorFactory.create(_,...C)}return be.create(v,...g)}function G(v,g,..._){if(!v)throw Ve(g,..._)}function De(v){const g="INTERNAL ASSERTION FAILED: "+v;throw $e(g),new Error(g)}function We(v,g){v||De(g)}const et=new Map;function _t(v){We(v instanceof Function,"Expected a class definition");let g=et.get(v);return g?(We(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,et.set(v,g),g)}function Ar(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function nr(){return"http:"===os()||"https:"===os()}function os(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class fe{constructor(g,_){this.shortDelay=g,this.longDelay=_,We(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function ae(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(nr()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function se(v,g){We(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Ge{static initialize(g,_,C){this.fetchImpl=g,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void De("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void De("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void De("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const He={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ct=new fe(3e4,6e4);function Je(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function Kt(v,g,_,C){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,o.Z)(function*(v,g,_,C,x={}){return Yt(v,x,(0,o.Z)(function*(){let P={},Y={};C&&("GET"===g?Y=C:P={body:JSON.stringify(C)});const ue=(0,L.xO)(Object.assign({key:v.config.apiKey},Y)).slice(1),Ue=yield v._getAdditionalHeaders();return Ue["Content-Type"]="application/json",v.languageCode&&(Ue["X-Firebase-Locale"]=v.languageCode),Ge.fetch()(Nr(v,v.config.apiHost,_,ue),Object.assign({method:g,headers:Ue,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Yt(v,g,_){return ln.apply(this,arguments)}function ln(){return(ln=(0,o.Z)(function*(v,g,_){v._canInitEmulator=!1;const C=Object.assign(Object.assign({},He),g);try{const x=new Rn(v),P=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const Y=yield P.json();if("needConfirmation"in Y)throw $n(v,"account-exists-with-different-credential",Y);if(P.ok&&!("errorMessage"in Y))return Y;{const ue=P.ok?Y.errorMessage:Y.error.message,[Ue,st]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw $n(v,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Ue)throw $n(v,"email-already-in-use",Y);if("USER_DISABLED"===Ue)throw $n(v,"user-disabled",Y);const At=C[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(st)throw Pe(v,At,st);xe(v,At)}}catch(x){if(x instanceof L.ZR)throw x;xe(v,"network-request-failed")}})).apply(this,arguments)}function nn(v,g,_,C){return hr.apply(this,arguments)}function hr(){return(hr=(0,o.Z)(function*(v,g,_,C,x={}){const P=yield Kt(v,g,_,C,x);return"mfaPendingCredential"in P&&xe(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Nr(v,g,_,C){const x=`${g}${_}?${C}`;return v.config.emulator?se(v.config,x):`${v.config.apiScheme}://${x}`}class Rn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Se(this.auth,"network-request-failed")),Ct.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $n(v,g,_){const C={appName:v.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const x=Se(v,g,C);return x.customData._tokenResponse=_,x}function Mn(){return(Mn=(0,o.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function as(){return(as=(0,o.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Un(){return(Un=(0,o.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Jr(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Cn(){return(Cn=(0,o.Z)(function*(v,g=!1){const _=(0,L.m9)(v),C=yield _.getIdToken(g),x=xt(C);G(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const P="object"==typeof x.firebase?x.firebase:void 0,Y=P?.sign_in_provider;return{claims:x,token:C,authTime:Jr(Tt(x.auth_time)),issuedAtTime:Jr(Tt(x.iat)),expirationTime:Jr(Tt(x.exp)),signInProvider:Y||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function Tt(v){return 1e3*Number(v)}function xt(v){var g;const[_,C,x]=v.split(".");if(void 0===_||void 0===C||void 0===x)return $e("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,L.tV)(C);return P?JSON.parse(P):($e("Failed to decode base64 JWT payload"),null)}catch(P){return $e("Caught error parsing JWT payload as JSON",null===(g=P)||void 0===g?void 0:g.toString()),null}}function Kn(v,g){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,o.Z)(function*(v,g,_=!1){if(_)return g;try{return yield g}catch(C){throw C instanceof L.ZR&&function Vs({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(C)&&v.auth.currentUser===v&&(yield v.auth.signOut()),C}})).apply(this,arguments)}class Hr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,o.Z)(function*(){yield _.iteration()}),C)}iteration(){var g=this;return(0,o.Z)(function*(){var _;try{yield g.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null===(_=C)||void 0===_?void 0:_.code)&&g.schedule(!0))}g.schedule()})()}}class Oa{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jr(this.lastLoginAt),this.creationTime=Jr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function hn(v){return Si.apply(this,arguments)}function Si(){return Si=(0,o.Z)(function*(v){var g;const _=v.auth,C=yield v.getIdToken(),x=yield Kn(v,function Bs(v,g){return Un.apply(this,arguments)}(_,{idToken:C}));G(x?.users.length,_,"internal-error");const P=x.users[0];v._notifyReloadListener(P);const Y=null!==(g=P.providerUserInfo)&&void 0!==g&&g.length?function H(v){return v.map(g=>{var{providerId:_}=g,C=(0,oe._T)(g,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}(P.providerUserInfo):[],ue=function $(v,g){return[...v.filter(C=>!g.some(x=>x.providerId===C.providerId)),...g]}(v.providerData,Y),At=!!v.isAnonymous&&!(v.email&&P.passwordHash||ue?.length),Et={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:ue,metadata:new Oa(P.createdAt,P.lastLoginAt),isAnonymous:At};Object.assign(v,Et)}),Si.apply(this,arguments)}function J(){return(J=(0,o.Z)(function*(v){const g=(0,L.m9)(v);yield hn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function K(){return(K=(0,o.Z)(function*(v,g){const _=yield Yt(v,{},(0,o.Z)(function*(){const C=(0,L.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:P}=v.config,Y=Nr(v,x,"/v1/token",`key=${P}`),ue=yield v._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",Ge.fetch()(Y,{method:"POST",headers:ue,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){G(g.idToken,"internal-error"),G(typeof g.idToken<"u","internal-error"),G(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function ls(v){const g=xt(v);return G(g,"internal-error"),G(typeof g.exp<"u","internal-error"),G(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var C=this;return(0,o.Z)(function*(){return G(!C.accessToken||C.refreshToken,g,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var C=this;return(0,o.Z)(function*(){const{accessToken:x,refreshToken:P,expiresIn:Y}=yield function Z(v,g){return K.apply(this,arguments)}(g,_);C.updateTokensAndExpiration(x,P,Number(Y))})()}updateTokensAndExpiration(g,_,C){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,_){const{refreshToken:C,accessToken:x,expirationTime:P}=_,Y=new Ne;return C&&(G("string"==typeof C,"internal-error",{appName:g}),Y.refreshToken=C),x&&(G("string"==typeof x,"internal-error",{appName:g}),Y.accessToken=x),P&&(G("number"==typeof P,"internal-error",{appName:g}),Y.expirationTime=P),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ne,this.toJSON())}_performRefresh(){return De("not implemented")}}function Ye(v,g){G("string"==typeof v||typeof v>"u","internal-error",{appName:g})}class vt{constructor(g){var{uid:_,auth:C,stsTokenManager:x}=g,P=(0,oe._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Oa(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,o.Z)(function*(){const C=yield Kn(_,_.stsTokenManager.getToken(_.auth,g));return G(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(g){return function _n(v){return Cn.apply(this,arguments)}(this,g)}reload(){return function Xt(v){return J.apply(this,arguments)}(this)}_assign(g){this!==g&&(G(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new vt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var C=this;return(0,o.Z)(function*(){let x=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),x=!0),_&&(yield hn(C)),yield C.auth._persistUserIfCurrent(C),x&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,o.Z)(function*(){const _=yield g.getIdToken();return yield Kn(g,function Di(v,g){return Mn.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var C,x,P,Y,ue,Ue,st,At;const Et=null!==(C=_.displayName)&&void 0!==C?C:void 0,Pr=null!==(x=_.email)&&void 0!==x?x:void 0,vi=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,Rd=null!==(Y=_.photoURL)&&void 0!==Y?Y:void 0,sg=null!==(ue=_.tenantId)&&void 0!==ue?ue:void 0,pu=null!==(Ue=_._redirectEventId)&&void 0!==Ue?Ue:void 0,og=null!==(st=_.createdAt)&&void 0!==st?st:void 0,ff=null!==(At=_.lastLoginAt)&&void 0!==At?At:void 0,{uid:pf,emailVerified:ec,isAnonymous:Ns,providerData:tc,stsTokenManager:nc}=_;G(pf&&nc,g,"internal-error");const v_=Ne.fromJSON(this.name,nc);G("string"==typeof pf,g,"internal-error"),Ye(Et,g.name),Ye(Pr,g.name),G("boolean"==typeof ec,g,"internal-error"),G("boolean"==typeof Ns,g,"internal-error"),Ye(vi,g.name),Ye(Rd,g.name),Ye(sg,g.name),Ye(pu,g.name),Ye(og,g.name),Ye(ff,g.name);const gf=new vt({uid:pf,auth:g,email:Pr,emailVerified:ec,displayName:Et,isAnonymous:Ns,photoURL:Rd,phoneNumber:vi,tenantId:sg,stsTokenManager:v_,createdAt:og,lastLoginAt:ff});return tc&&Array.isArray(tc)&&(gf.providerData=tc.map(b_=>Object.assign({},b_))),pu&&(gf._redirectEventId=pu),gf}static _fromIdTokenResponse(g,_,C=!1){return(0,o.Z)(function*(){const x=new Ne;x.updateFromServerResponse(_);const P=new vt({uid:_.localId,auth:g,stsTokenManager:x,isAnonymous:C});return yield hn(P),P})()}}const fn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,o.Z)(function*(){return!0})()}_set(_,C){var x=this;return(0,o.Z)(function*(){x.storage[_]=C})()}_get(_){var C=this;return(0,o.Z)(function*(){const x=C.storage[_];return void 0===x?null:x})()}_remove(_){var C=this;return(0,o.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return v.type="NONE",v})();function En(v,g,_){return`firebase:${v}:${g}:${_}`}class Ut{constructor(g,_,C){this.persistence=g,this.auth=_,this.userKey=C;const{config:x,name:P}=this.auth;this.fullUserKey=En(this.userKey,x.apiKey,P),this.fullPersistenceKey=En("persistence",x.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,o.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?vt._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,o.Z)(function*(){if(_.persistence===g)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,C="authUser"){return(0,o.Z)(function*(){if(!_.length)return new Ut(_t(fn),g,C);const x=(yield Promise.all(_.map(function(){var st=(0,o.Z)(function*(At){if(yield At._isAvailable())return At});return function(At){return st.apply(this,arguments)}}()))).filter(st=>st);let P=x[0]||_t(fn);const Y=En(C,g.config.apiKey,g.name);let ue=null;for(const st of _)try{const At=yield st._get(Y);if(At){const Et=vt._fromJSON(g,At);st!==P&&(ue=Et),P=st;break}}catch{}const Ue=x.filter(st=>st._shouldAllowMigration);return P._shouldAllowMigration&&Ue.length?(P=Ue[0],ue&&(yield P._set(Y,ue.toJSON())),yield Promise.all(_.map(function(){var st=(0,o.Z)(function*(At){if(At!==P)try{yield At._remove(Y)}catch{}});return function(At){return st.apply(this,arguments)}}())),new Ut(P,g,C)):new Ut(P,g,C)})()}}function Yn(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ic(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(xr(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Ra(g))return"Blackberry";if($r(g))return"Webos";if(en(g))return"Safari";if((g.includes("chrome/")||yo(g))&&!g.includes("edge/"))return"Chrome";if(bs(g))return"Android";{const C=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function xr(v=(0,L.z$)()){return/firefox\//i.test(v)}function en(v=(0,L.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function yo(v=(0,L.z$)()){return/crios\//i.test(v)}function Ic(v=(0,L.z$)()){return/iemobile/i.test(v)}function bs(v=(0,L.z$)()){return/android/i.test(v)}function Ra(v=(0,L.z$)()){return/blackberry/i.test(v)}function $r(v=(0,L.z$)()){return/webos/i.test(v)}function ws(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Ip(v=(0,L.z$)()){return ws(v)||bs(v)||$r(v)||Ra(v)||/windows phone/i.test(v)||Ic(v)}function Pa(v,g=[]){let _;switch(v){case"Browser":_=Yn((0,L.z$)());break;case"Worker":_=`${Yn((0,L.z$)())}-${v}`;break;default:_=v}const C=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${le.SDK_VERSION}/${C}`}class wh{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const C=P=>new Promise((Y,ue)=>{try{Y(g(P))}catch(Ue){ue(Ue)}});C.onAbort=_,this.queue.push(C);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,o.Z)(function*(){var C;if(_.auth.currentUser===g)return;const x=[];try{for(const P of _.queue)yield P(g),P.onAbort&&x.push(P.onAbort)}catch(P){x.reverse();for(const Y of x)try{Y()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=P)||void 0===C?void 0:C.message})}})()}}class Ch{constructor(g,_,C){this.app=g,this.heartbeatServiceProvider=_,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wu(this),this.idTokenSubscription=new Wu(this),this.beforeStateQueue=new wh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=be,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(g,_){var C=this;return _&&(this._popupRedirectResolver=_t(_)),this._initializationPromise=this.queue((0,o.Z)(function*(){var x,P;if(!C._deleted&&(C.persistenceManager=yield Ut.create(C,g),!C._deleted)){if(null!==(x=C._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(P=C.currentUser)||void 0===P?void 0:P.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,o.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,o.Z)(function*(){var C;const x=yield _.assertedPersistence.getCurrentUser();let P=x,Y=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ue=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,Ue=P?._redirectEventId,st=yield _.tryRedirectSignIn(g);(!ue||ue===Ue)&&st?.user&&(P=st.user,Y=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(Y)try{yield _.beforeStateQueue.runMiddleware(P)}catch(ue){P=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ue))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return G(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(g){var _=this;return(0,o.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,o.Z)(function*(){var C;try{yield hn(g)}catch(x){if("auth/network-request-failed"!==(null===(C=x)||void 0===C?void 0:C.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function pe(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,o.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,o.Z)(function*(){const C=g?(0,L.m9)(g):null;return C&&G(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(g,_=!1){var C=this;return(0,o.Z)(function*(){if(!C._deleted)return g&&G(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,o.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,o.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,o.Z)(function*(){yield _.assertedPersistence.setPersistence(_t(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new L.LL("auth","Firebase",g())}onAuthStateChanged(g,_,C){return this.registerStateListener(this.authStateSubscription,g,_,C)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,C){return this.registerStateListener(this.idTokenSubscription,g,_,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var C=this;return(0,o.Z)(function*(){const x=yield C.getOrInitRedirectPersistenceManager(_);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,o.Z)(function*(){if(!_.redirectPersistenceManager){const C=g&&_t(g)||_._popupRedirectResolver;G(C,_,"argument-error"),_.redirectPersistenceManager=yield Ut.create(_,[_t(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,o.Z)(function*(){var C,x;return _._isInitialized&&(yield _.queue((0,o.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===g?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,o.Z)(function*(){if(g===_.currentUser)return _.queue((0,o.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,C,x){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return G(Y,this,"internal-error"),Y.then(()=>P(this.currentUser)),"function"==typeof _?g.addObserver(_,C,x):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,o.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Pa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,o.Z)(function*(){var _;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(C["X-Firebase-Client"]=x),C})()}}function qn(v){return(0,L.m9)(v)}class Wu{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,L.ne)(_=>this.observer=_)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function rr(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function js(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class qo{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return De("not implemented")}_getIdTokenResponse(g){return De("not implemented")}_linkToIdToken(g,_){return De("not implemented")}_getReauthenticationResolver(g){return De("not implemented")}}function ei(v,g){return zo.apply(this,arguments)}function zo(){return(zo=(0,o.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:resetPassword",Je(v,g))})).apply(this,arguments)}function $i(v,g){return it.apply(this,arguments)}function it(){return(it=(0,o.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Nn(){return(Nn=(0,o.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:update",Je(v,g))})).apply(this,arguments)}function Hs(){return(Hs=(0,o.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signInWithPassword",Je(v,g))})).apply(this,arguments)}function ir(v,g){return sr.apply(this,arguments)}function sr(){return(sr=(0,o.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:sendOobCode",Je(v,g))})).apply(this,arguments)}function Fa(){return(Fa=(0,o.Z)(function*(v,g){return ir(v,g)})).apply(this,arguments)}function Gt(){return(Gt=(0,o.Z)(function*(v,g){return ir(v,g)})).apply(this,arguments)}function vo(){return(vo=(0,o.Z)(function*(v,g){return ir(v,g)})).apply(this,arguments)}function cs(){return(cs=(0,o.Z)(function*(v,g){return ir(v,g)})).apply(this,arguments)}function La(){return(La=(0,o.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signInWithEmailLink",Je(v,g))})).apply(this,arguments)}function Gi(){return(Gi=(0,o.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signInWithEmailLink",Je(v,g))})).apply(this,arguments)}class $s extends qo{constructor(g,_,C,x=null){super("password",C),this._email=g,this._password=_,this._tenantId=x}static _fromEmailAndPassword(g,_){return new $s(g,_,"password")}static _fromEmailAndCode(g,_,C=null){return new $s(g,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,o.Z)(function*(){switch(_.signInMethod){case"password":return function pi(v,g){return Hs.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ti(v,g){return La.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:xe(g,"internal-error")}})()}_linkToIdToken(g,_){var C=this;return(0,o.Z)(function*(){switch(C.signInMethod){case"password":return $i(g,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function Zo(v,g){return Gi.apply(this,arguments)}(g,{idToken:_,email:C._email,oobCode:C._password});default:xe(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function gi(v,g){return yn.apply(this,arguments)}function yn(){return(yn=(0,o.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signInWithIdp",Je(v,g))})).apply(this,arguments)}class qi extends qo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new qi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):xe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:x}=_,P=(0,oe._T)(_,["providerId","signInMethod"]);if(!C||!x)return null;const Y=new qi(C,x);return Y.idToken=P.idToken||void 0,Y.accessToken=P.accessToken||void 0,Y.secret=P.secret,Y.nonce=P.nonce,Y.pendingToken=P.pendingToken||null,Y}_getIdTokenResponse(g){return gi(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,gi(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,gi(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,L.xO)(_)}return g}}function Ua(){return(Ua=(0,o.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:sendVerificationCode",Je(v,g))})).apply(this,arguments)}function ni(){return(ni=(0,o.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signInWithPhoneNumber",Je(v,g))})).apply(this,arguments)}function Eh(){return(Eh=(0,o.Z)(function*(v,g){const _=yield nn(v,"POST","/v1/accounts:signInWithPhoneNumber",Je(v,g));if(_.temporaryProof)throw $n(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Ii={USER_NOT_FOUND:"user-not-found"};function Cl(){return(Cl=(0,o.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signInWithPhoneNumber",Je(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Ii)})).apply(this,arguments)}class us extends qo{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new us({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new us({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Wo(v,g){return ni.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function ri(v,g){return Eh.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function zi(v,g){return Cl.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:C,verificationCode:x}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:C,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:P}=g;return C||_||x||P?new us({verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:P}):null}}class Tl{constructor(g){var _,C,x,P,Y,ue;const Ue=(0,L.zd)((0,L.pd)(g)),st=null!==(_=Ue.apiKey)&&void 0!==_?_:null,At=null!==(C=Ue.oobCode)&&void 0!==C?C:null,Et=function Qu(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Ue.mode)&&void 0!==x?x:null);G(st&&At&&Et,"argument-error"),this.apiKey=st,this.operation=Et,this.code=At,this.continueUrl=null!==(P=Ue.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Y=Ue.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(ue=Ue.tenantId)&&void 0!==ue?ue:null}static parseLink(g){const _=function Ai(v){const g=(0,L.zd)((0,L.pd)(v)).link,_=g?(0,L.zd)((0,L.pd)(g)).deep_link_id:null,C=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(C?(0,L.zd)((0,L.pd)(C)).link:null)||C||_||g||v}(g);try{return new Tl(_)}catch{return null}}}let Ju=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,C){return $s._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const x=Tl.parseLink(C);return G(x,"argument-error"),$s._fromEmailAndCode(_,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Gs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ba extends Gs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class El extends Ba{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return G("providerId"in _&&"signInMethod"in _,"argument-error"),qi._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return G(g.idToken||g.accessToken,"argument-error"),qi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return El.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return El.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:x,pendingToken:P,nonce:Y,providerId:ue}=g;if(!C&&!x&&!_&&!P||!ue)return null;try{return new El(ue)._credential({idToken:_,accessToken:C,nonce:Y,pendingToken:P})}catch{return null}}}let Xu=(()=>{class v extends Ba{constructor(){super("facebook.com")}static credential(_){return qi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Np=(()=>{class v extends Ba{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return qi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:x}=_;if(!C&&!x)return null;try{return v.credential(C,x)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),xp=(()=>{class v extends Ba{constructor(){super("github.com")}static credential(_){return qi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Va extends qo{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return gi(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,gi(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,gi(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:x,pendingToken:P}=_;return C&&x&&P&&C===x?new Va(C,P):null}static _create(g,_){return new Va(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ts extends Gs{constructor(g){G(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Ts.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Ts.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Va.fromJSON(g);return G(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:C}=g;if(!_||!C)return null;try{return Va._create(C,_)}catch{return null}}}let n_=(()=>{class v extends Ba{constructor(){super("twitter.com")}static credential(_,C){return qi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:x}=_;if(!C||!x)return null;try{return v.credential(C,x)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Gr(v,g){return ed.apply(this,arguments)}function ed(){return(ed=(0,o.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signUp",Je(v,g))})).apply(this,arguments)}class mi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,C,x=!1){return(0,o.Z)(function*(){const P=yield vt._fromIdTokenResponse(g,C,x),Y=td(C);return new mi({user:P,providerId:Y,_tokenResponse:C,operationType:_})})()}static _forOperation(g,_,C){return(0,o.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const x=td(C);return new mi({user:g,providerId:x,_tokenResponse:C,operationType:_})})()}}function td(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function bo(){return(bo=(0,o.Z)(function*(v){var g;const _=qn(v);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new mi({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield Gr(_,{returnSecureToken:!0}),x=yield mi._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Ac extends L.ZR{constructor(g,_,C,x){var P;super(_.code,_.message),this.operationType=C,this.user=x,Object.setPrototypeOf(this,Ac.prototype),this.customData={appName:g.name,tenantId:null!==(P=g.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,_,C,x){return new Ac(g,_,C,x)}}function Yo(v,g,_,C){return("reauthenticate"===g?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Ac._fromErrorAndOperation(v,P,g,C):P})}function Qo(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function ja(){return ja=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v);yield Jo(!0,_,g);const{providerUserInfo:C}=yield function yt(v,g){return as.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),x=Qo(C||[]);return _.providerData=_.providerData.filter(P=>x.has(P.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),ja.apply(this,arguments)}function xc(v,g){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,o.Z)(function*(v,g,_=!1){const C=yield Kn(v,g._linkToIdToken(v.auth,yield v.getIdToken()),_);return mi._forOperation(v,"link",C)})).apply(this,arguments)}function Jo(v,g,_){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,o.Z)(function*(v,g,_){yield hn(g);const x=!1===v?"provider-already-linked":"no-such-provider";G(Qo(g.providerData).has(_)===v,g.auth,x)})).apply(this,arguments)}function nd(v,g){return $a.apply(this,arguments)}function $a(){return($a=(0,o.Z)(function*(v,g,_=!1){var C;const{auth:x}=v,P="reauthenticate";try{const Y=yield Kn(v,Yo(x,P,g,v),_);G(Y.idToken,x,"internal-error");const ue=xt(Y.idToken);G(ue,x,"internal-error");const{sub:Ue}=ue;return G(v.uid===Ue,x,"user-mismatch"),mi._forOperation(v,P,Y)}catch(Y){throw"auth/user-not-found"===(null===(C=Y)||void 0===C?void 0:C.code)&&xe(x,"user-mismatch"),Y}})).apply(this,arguments)}function Ga(v,g){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,o.Z)(function*(v,g,_=!1){const C="signIn",x=yield Yo(v,C,g),P=yield mi._fromIdTokenResponse(v,C,x);return _||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function zn(v,g){return kc.apply(this,arguments)}function kc(){return(kc=(0,o.Z)(function*(v,g){return Ga(qn(v),g)})).apply(this,arguments)}function Qn(v,g){return qa.apply(this,arguments)}function qa(){return(qa=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v);return yield Jo(!1,_,g.providerId),xc(_,g)})).apply(this,arguments)}function Xo(v,g){return or.apply(this,arguments)}function or(){return(or=(0,o.Z)(function*(v,g){return nd((0,L.m9)(v),g)})).apply(this,arguments)}function za(){return(za=(0,o.Z)(function*(v,g){return nn(v,"POST","/v1/accounts:signInWithCustomToken",Je(v,g))})).apply(this,arguments)}function pr(){return pr=(0,o.Z)(function*(v,g){const _=qn(v),C=yield function rd(v,g){return za.apply(this,arguments)}(_,{token:g,returnSecureToken:!0}),x=yield mi._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(x.user),x}),pr.apply(this,arguments)}class Sl{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Za._fromServerResponse(g,_):xe(g,"internal-error")}}class Za extends Sl{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Za(_)}}function Oc(v,g,_){var C;G((null===(C=_.url)||void 0===C?void 0:C.length)>0,v,"invalid-continue-uri"),G(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(G(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(G(_.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Il(){return Il=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v),x={requestType:"PASSWORD_RESET",email:g};_&&Oc(C,x,_),yield function fr(v,g){return Gt.apply(this,arguments)}(C,x)}),Il.apply(this,arguments)}function Mt(){return(Mt=(0,o.Z)(function*(v,g,_){yield ei((0,L.m9)(v),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Sh(){return Sh=(0,o.Z)(function*(v,g){yield function Bt(v,g){return Nn.apply(this,arguments)}((0,L.m9)(v),{oobCode:g})}),Sh.apply(this,arguments)}function Mc(v,g){return id.apply(this,arguments)}function id(){return(id=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v),C=yield ei(_,{oobCode:g}),x=C.requestType;switch(G(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(C.mfaInfo,_,"internal-error");default:G(C.email,_,"internal-error")}let P=null;return C.mfaInfo&&(P=Sl._fromServerResponse(qn(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:P},operation:x}})).apply(this,arguments)}function Pc(){return(Pc=(0,o.Z)(function*(v,g){const{data:_}=yield Mc((0,L.m9)(v),g);return _.email})).apply(this,arguments)}function od(){return(od=(0,o.Z)(function*(v,g,_){const C=qn(v),x=yield Gr(C,{returnSecureToken:!0,email:g,password:_}),P=yield mi._fromIdTokenResponse(C,"signIn",x);return yield C._updateCurrentUser(P.user),P})).apply(this,arguments)}function ad(){return ad=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v),x={requestType:"EMAIL_SIGNIN",email:g};G(_.handleCodeInApp,C,"argument-error"),_&&Oc(C,x,_),yield function Ku(v,g){return vo.apply(this,arguments)}(C,x)}),ad.apply(this,arguments)}function Nl(){return(Nl=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v),x=Ju.credentialWithLink(g,_||Ar());return G(x._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),zn(C,x)})).apply(this,arguments)}function xi(){return(xi=(0,o.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:createAuthUri",Je(v,g))})).apply(this,arguments)}function Uc(){return Uc=(0,o.Z)(function*(v,g){const C={identifier:g,continueUri:nr()?Ar():"http://localhost"},{signinMethods:x}=yield function Fc(v,g){return xi.apply(this,arguments)}((0,L.m9)(v),C);return x||[]}),Uc.apply(this,arguments)}function ld(){return ld=(0,o.Z)(function*(v,g){const _=(0,L.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&Oc(_.auth,x,g);const{email:P}=yield function Bn(v,g){return Fa.apply(this,arguments)}(_.auth,x);P!==v.email&&(yield v.reload())}),ld.apply(this,arguments)}function gr(){return gr=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};_&&Oc(C.auth,P,_);const{email:Y}=yield function Yu(v,g){return cs.apply(this,arguments)}(C.auth,P);Y!==v.email&&(yield v.reload())}),gr.apply(this,arguments)}function wo(){return(wo=(0,o.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Es(){return Es=(0,o.Z)(function*(v,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const C=(0,L.m9)(v),P={idToken:yield C.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},Y=yield Kn(C,function ki(v,g){return wo.apply(this,arguments)}(C.auth,P));C.displayName=Y.displayName||null,C.photoURL=Y.photoUrl||null;const ue=C.providerData.find(({providerId:Ue})=>"password"===Ue);ue&&(ue.displayName=C.displayName,ue.photoURL=C.photoURL),yield C._updateTokensIfNecessary(Y)}),Es.apply(this,arguments)}function xh(v,g,_){return cd.apply(this,arguments)}function cd(){return(cd=(0,o.Z)(function*(v,g,_){const{auth:C}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(P.email=g),_&&(P.password=_);const Y=yield Kn(v,$i(C,P));yield v._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class zs{constructor(g,_,C={}){this.isNewUser=g,this.providerId=_,this.profile=C}}class kh extends zs{constructor(g,_,C,x){super(g,_,C),this.username=x}}class dd extends zs{constructor(g,_){super(g,"facebook.com",_)}}class Oh extends kh{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Op extends zs{constructor(g,_){super(g,"google.com",_)}}class Vc extends kh{constructor(g,_,C){super(g,"twitter.com",_,C)}}function Rp(v){const{user:g,_tokenResponse:_}=v;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function ud(v){var g,_;if(!v)return null;const{providerId:C}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!C&&v?.idToken){const Y=null===(_=null===(g=xt(v.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(Y)return new zs(P,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!C)return null;switch(C){case"facebook.com":return new dd(P,x);case"github.com":return new Oh(P,x);case"google.com":return new Op(P,x);case"twitter.com":return new Vc(P,x,v.screenName||null);case"custom":case"anonymous":return new zs(P,null);default:return new zs(P,C,x)}}(_)}class Ka{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Ka("enroll",g)}static _fromMfaPendingCredential(g){return new Ka("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,C;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Ka._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(C=g.multiFactorSession)&&void 0!==C&&C.idToken)return Ka._fromIdtoken(g.multiFactorSession.idToken)}return null}}class hd{constructor(g,_,C){this.session=g,this.hints=_,this.signInResolver=C}static _fromError(g,_){const C=qn(g),x=_.customData._serverResponse,P=(x.mfaInfo||[]).map(ue=>Sl._fromServerResponse(C,ue));G(x.mfaPendingCredential,C,"internal-error");const Y=Ka._fromMfaPendingCredential(x.mfaPendingCredential);return new hd(Y,P,function(){var ue=(0,o.Z)(function*(Ue){const st=yield Ue._process(C,Y);delete x.mfaInfo,delete x.mfaPendingCredential;const At=Object.assign(Object.assign({},x),{idToken:st.idToken,refreshToken:st.refreshToken});switch(_.operationType){case"signIn":const Et=yield mi._fromIdTokenResponse(C,_.operationType,At);return yield C._updateCurrentUser(Et.user),Et;case"reauthenticate":return G(_.user,C,"internal-error"),mi._forOperation(_.user,_.operationType,At);default:xe(C,"internal-error")}});return function(Ue){return ue.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,o.Z)(function*(){return _.signInResolver(g)})()}}class kl{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>Sl._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new kl(g)}getSession(){var g=this;return(0,o.Z)(function*(){return Ka._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var C=this;return(0,o.Z)(function*(){const x=g,P=yield C.getSession(),Y=yield Kn(C.user,x._process(C.user.auth,P,_));return yield C.user._updateTokensIfNecessary(Y),C.user.reload()})()}unenroll(g){var _=this;return(0,o.Z)(function*(){var C;const x="string"==typeof g?g:g.uid,P=yield _.user.getIdToken(),Y=yield Kn(_.user,function s_(v,g){return Kt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Je(v,g))}(_.user.auth,{idToken:P,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ue})=>ue!==x),yield _.user._updateTokensIfNecessary(Y);try{yield _.user.reload()}catch(ue){if("auth/user-token-expired"!==(null===(C=ue)||void 0===C?void 0:C.code))throw ue}})()}}const na=new WeakMap,Co="__sak";class Ol{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Co,"1"),this.storage.removeItem(Co),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const jc=(()=>{class v extends Ol{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Rl(){const v=(0,L.z$)();return en(v)||ws(v)}()&&function Zu(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ip(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const x=this.storage.getItem(C),P=this.localCache[C];x!==P&&_(C,P,x)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((ue,Ue,st)=>{this.notifyListeners(ue,st)});const x=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(x);if(_.newValue!==ue)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!C)return}const P=()=>{const ue=this.storage.getItem(x);!C&&this.localCache[x]===ue||this.notifyListeners(x,ue)},Y=this.storage.getItem(x);!function Sp(){return(0,L.w1)()&&10===document.documentMode}()||Y===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var x=()=>super._set,P=this;return(0,o.Z)(function*(){yield x().call(P,_,C),P.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,x=this;return(0,o.Z)(function*(){const P=yield C().call(x,_);return x.localCache[_]=JSON.stringify(P),P})()}_remove(_){var C=()=>super._remove,x=this;return(0,o.Z)(function*(){yield C().call(x,_),delete x.localCache[_]})()}}return v.type="LOCAL",v})(),ra=(()=>{class v extends Ol{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return v.type="SESSION",v})();let Pp=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(P=>P.isListeningto(_));if(C)return C;const x=new v(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,o.Z)(function*(){const x=_,{eventId:P,eventType:Y,data:ue}=x.data,Ue=C.handlersMap[Y];if(!Ue?.size)return;x.ports[0].postMessage({status:"ack",eventId:P,eventType:Y});const st=Array.from(Ue).map(function(){var Et=(0,o.Z)(function*(Pr){return Pr(x.origin,ue)});return function(Pr){return Et.apply(this,arguments)}}()),At=yield function Fh(v){return Promise.all(v.map(function(){var g=(0,o.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return g.apply(this,arguments)}}()))}(st);x.ports[0].postMessage({status:"done",eventId:P,eventType:Y,response:At})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function ia(v="",g=10){let _="";for(let C=0;C<g;C++)_+=Math.floor(10*Math.random());return v+_}class Ml{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,C=50){var x=this;return(0,o.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Y,ue;return new Promise((Ue,st)=>{const At=ia("",20);P.port1.start();const Et=setTimeout(()=>{st(new Error("unsupported_event"))},C);ue={messageChannel:P,onMessage(Pr){const vi=Pr;if(vi.data.eventId===At)switch(vi.data.status){case"ack":clearTimeout(Et),Y=setTimeout(()=>{st(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Ue(vi.data.response);break;default:clearTimeout(Et),clearTimeout(Y),st(new Error("invalid_response"))}}},x.handlers.add(ue),P.port1.addEventListener("message",ue.onMessage),x.target.postMessage({eventType:g,eventId:At,data:_},[P.port2])}).finally(()=>{ue&&x.removeMessageHandler(ue)})})()}}function Vn(){return window}function Zs(){return typeof Vn().WorkerGlobalScope<"u"&&"function"==typeof Vn().importScripts}function Qa(){return(Qa=(0,o.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Hc="firebaseLocalStorageDb",$c=1,Eo="firebaseLocalStorage",Ja="fbase_key";class Xa{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Ll(v,g){return v.transaction([Eo],g?"readwrite":"readonly").objectStore(Eo)}function Gc(){const v=indexedDB.open(Hc,$c);return new Promise((g,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const C=v.result;try{C.createObjectStore(Eo,{keyPath:Ja})}catch(x){_(x)}}),v.addEventListener("success",(0,o.Z)(function*(){const C=v.result;C.objectStoreNames.contains(Eo)?g(C):(C.close(),yield function Ul(){const v=indexedDB.deleteDatabase(Hc);return new Xa(v).toPromise()}(),g(yield Gc()))}))})}function Zr(v,g,_){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,o.Z)(function*(v,g,_){const C=Ll(v,!0).put({[Ja]:g,value:_});return new Xa(C).toPromise()})).apply(this,arguments)}function Do(){return(Do=(0,o.Z)(function*(v,g){const _=Ll(v,!1).get(g),C=yield new Xa(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Vl(v,g){const _=Ll(v,!0).delete(g);return new Xa(_).toPromise()}const sa=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,o.Z)(function*(){return _.db||(_.db=yield Gc()),_.db})()}_withRetries(_){var C=this;return(0,o.Z)(function*(){let x=0;for(;;)try{const P=yield C._openDb();return yield _(P)}catch(P){if(x++>3)throw P;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,o.Z)(function*(){return Zs()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,o.Z)(function*(){_.receiver=Pp._getInstance(function Fl(){return Zs()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,o.Z)(function*(x,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(x,P){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,o.Z)(function*(x,P){return["keyChanged"]});return function(x,P){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,o.Z)(function*(){var C,x;if(_.activeServiceWorker=yield function Ws(){return Qa.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Ml(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);P&&null!==(C=P[0])&&void 0!==C&&C.fulfilled&&null!==(x=P[0])&&void 0!==x&&x.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,o.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function pd(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,o.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Gc();return yield Zr(_,Co,"1"),yield Vl(_,Co),!0}catch{}return!1})()}_withPendingWrite(_){var C=this;return(0,o.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var x=this;return(0,o.Z)(function*(){return x._withPendingWrite((0,o.Z)(function*(){return yield x._withRetries(P=>Zr(P,_,C)),x.localCache[_]=C,x.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,o.Z)(function*(){const x=yield C._withRetries(P=>function el(v,g){return Do.apply(this,arguments)}(P,_));return C.localCache[_]=x,x})()}_remove(_){var C=this;return(0,o.Z)(function*(){return C._withPendingWrite((0,o.Z)(function*(){return yield C._withRetries(x=>Vl(x,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,o.Z)(function*(){const C=yield _._withRetries(Y=>{const ue=Ll(Y,!1).getAll();return new Xa(ue).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const x=[],P=new Set;for(const{fbase_key:Y,value:ue}of C)P.add(Y),JSON.stringify(_.localCache[Y])!==JSON.stringify(ue)&&(_.notifyListeners(Y,ue),x.push(Y));for(const Y of Object.keys(_.localCache))_.localCache[Y]&&!P.has(Y)&&(_.notifyListeners(Y,null),x.push(Y));return x})()}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,o.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function zc(){return(zc=(0,o.Z)(function*(v){return(yield Kt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ss(v){return new Promise((g,_)=>{const C=document.createElement("script");C.setAttribute("src",v),C.onload=g,C.onerror=x=>{const P=Se("internal-error");P.customData=x,_(P)},C.type="text/javascript",C.charset="UTF-8",function oa(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(C)})}function Uh(v){return`__${v}${Math.floor(1e6*Math.random())}`}const ds=1e12;class o_{constructor(g){this.auth=g,this.counter=ds,this._widgets=new Map}render(g,_){const C=this.counter;return this._widgets.set(C,new Bh(g,this.auth.name,_||{})),this.counter++,C}reset(g){var _;const C=g||ds;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(g){var _;return(null===(_=this._widgets.get(g||ds))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,o.Z)(function*(){var C;return null===(C=_._widgets.get(g||ds))||void 0===C||C.execute(),""})()}}class Bh{constructor(g,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;G(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Wc(v){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<v;C++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Vh=Uh("rcb"),md=new fe(3e4,6e4);class Ys{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Vn().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return G(function tl(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Vn().grecaptcha):new Promise((C,x)=>{const P=Vn().setTimeout(()=>{x(Se(g,"network-request-failed"))},md.get());Vn()[Vh]=()=>{Vn().clearTimeout(P),delete Vn()[Vh];const ue=Vn().grecaptcha;if(!ue)return void x(Se(g,"internal-error"));const Ue=ue.render;ue.render=(st,At)=>{const Et=Ue(st,At);return this.counter++,Et},this.hostLanguage=_,C(ue)},Ss(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Vh,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),x(Se(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=Vn().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Yc{load(g){return(0,o.Z)(function*(){return new o_(g)})()}clearedOneInstance(){}}const jh="recaptcha",Fp={theme:"light",type:"image"};class $l{constructor(g,_=Object.assign({},Fp),C){this.parameters=_,this.type=jh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qn(C),this.isInvisible="invisible"===this.parameters.size,G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;G(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Yc:new Ys,this.validateStartingState()}verify(){var g=this;return(0,o.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(_)||new Promise(P=>{const Y=ue=>{ue&&(g.tokenChangeListeners.delete(Y),P(ue))};g.tokenChangeListeners.add(Y),g.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof g)g(_);else if("string"==typeof g){const C=Vn()[g];"function"==typeof C&&C(_)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,o.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,o.Z)(function*(){G(nr()&&!Zs(),g.auth,"internal-error"),yield function Lp(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Ds(v){return zc.apply(this,arguments)}(g.auth);G(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _d{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=us._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function yd(){return(yd=(0,o.Z)(function*(v,g,_){const C=qn(v),x=yield Hh(C,g,(0,L.m9)(_));return new _d(x,P=>zn(C,P))})).apply(this,arguments)}function Qc(){return(Qc=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v);yield Jo(!1,C,"phone");const x=yield Hh(C.auth,g,(0,L.m9)(_));return new _d(x,P=>Qn(C,P))})).apply(this,arguments)}function Bp(){return(Bp=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v),x=yield Hh(C.auth,g,(0,L.m9)(_));return new _d(x,P=>Xo(C,P))})).apply(this,arguments)}function Hh(v,g,_){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,o.Z)(function*(v,g,_){var C;const x=yield _.verify();try{let P;if(G("string"==typeof x,v,"argument-error"),G(_.type===jh,v,"argument-error"),P="string"==typeof g?{phoneNumber:g}:g,"session"in P){const Y=P.session;if("phoneNumber"in P)return G("enroll"===Y.type,v,"internal-error"),(yield function Mp(v,g){return Kt(v,"POST","/v2/accounts/mfaEnrollment:start",Je(v,g))}(v,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{G("signin"===Y.type,v,"internal-error");const ue=(null===(C=P.multiFactorHint)||void 0===C?void 0:C.uid)||P.multiFactorUid;return G(ue,v,"missing-multi-factor-info"),(yield function Hl(v,g){return Kt(v,"POST","/v2/accounts/mfaSignIn:start",Je(v,g))}(v,{mfaPendingCredential:Y.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function Th(v,g){return Ua.apply(this,arguments)}(v,{phoneNumber:P.phoneNumber,recaptchaToken:x});return Y}}finally{_._reset()}}),Vp.apply(this,arguments)}function jp(){return(jp=(0,o.Z)(function*(v,g){yield xc((0,L.m9)(v),g)})).apply(this,arguments)}let vd=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=qn(_)}verifyPhoneNumber(_,C){return Hh(this.auth,_,(0,L.m9)(C))}static credential(_,C){return us._fromVerification(_,C)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:x}=_;return C&&x?us._fromTokenResponse(C,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Dn(v,g){return g?_t(g):(G(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Xc extends qo{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return gi(g,this._buildIdpRequest())}_linkToIdToken(g,_){return gi(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return gi(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function eu(v){return Ga(v.auth,new Xc(v),v.bypassAuthState)}function bd(v){const{auth:g,user:_}=v;return G(_,g,"internal-error"),nd(_,new Xc(v),v.bypassAuthState)}function Oi(v){return Is.apply(this,arguments)}function Is(){return(Is=(0,o.Z)(function*(v){const{auth:g,user:_}=v;return G(_,g,"internal-error"),xc(_,new Xc(v),v.bypassAuthState)})).apply(this,arguments)}class tu{constructor(g,_,C,x,P=!1){this.auth=g,this.resolver=C,this.user=x,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,o.Z)(function*(C,x){g.pendingPromise={resolve:C,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(P){g.reject(P)}});return function(C,x){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,o.Z)(function*(){const{urlResponse:C,sessionId:x,postBody:P,tenantId:Y,error:ue,type:Ue}=g;if(ue)return void _.reject(ue);const st={auth:_.auth,requestUri:C,sessionId:x,tenantId:Y||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ue)(st))}catch(At){_.reject(At)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return eu;case"linkViaPopup":case"linkViaRedirect":return Oi;case"reauthViaPopup":case"reauthViaRedirect":return bd;default:xe(this.auth,"internal-error")}}resolve(g){We(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){We(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gl=new fe(2e3,1e4);function nu(){return(nu=(0,o.Z)(function*(v,g,_){const C=qn(v);Ze(v,g,Gs);const x=Dn(C,_);return new Ht(C,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function Gh(){return(Gh=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v);Ze(C.auth,g,Gs);const x=Dn(C.auth,_);return new Ht(C.auth,"reauthViaPopup",g,x,C).executeNotNull()})).apply(this,arguments)}function yi(){return(yi=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v);Ze(C.auth,g,Gs);const x=Dn(C.auth,_);return new Ht(C.auth,"linkViaPopup",g,x,C).executeNotNull()})).apply(this,arguments)}let Ht=(()=>{class v extends tu{constructor(_,C,x,P,Y){super(_,C,P,Y),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,o.Z)(function*(){const C=yield _.execute();return G(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,o.Z)(function*(){We(1===_.filter.length,"Popup operations only handle one event");const C=ia();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Se(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Se(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,x;this.pollId=null!==(x=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Se(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Gl.get())};_()}}return v.currentPopupAction=null,v})();const mr="pendingRedirect",Re=new Map;class cn extends tu{constructor(g,_,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,o.Z)(function*(){let C=Re.get(_.auth._key());if(!C){try{const P=(yield function _r(v,g){return Qs.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;C=()=>Promise.resolve(P)}catch(x){C=()=>Promise.reject(x)}Re.set(_.auth._key(),C)}return _.bypassAuthState||Re.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,C=this;return(0,o.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(C,g);if("unknown"!==g.type){if(g.eventId){const x=yield C.auth._redirectUserForId(g.eventId);if(x)return C.user=x,_().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function Qs(){return(Qs=(0,o.Z)(function*(v,g){const _=zl(g),C=ql(v);if(!(yield C._isAvailable()))return!1;const x="true"===(yield C._get(_));return yield C._remove(_),x})).apply(this,arguments)}function rl(v,g){return vn.apply(this,arguments)}function vn(){return(vn=(0,o.Z)(function*(v,g){return ql(v)._set(zl(g),"true")})).apply(this,arguments)}function qh(v,g){Re.set(v._key(),g)}function ql(v){return _t(v._redirectPersistence)}function zl(v){return En(mr,v.config.apiKey,v.name)}function ru(v,g,_){return function iu(v,g,_){return I.apply(this,arguments)}(v,g,_)}function I(){return(I=(0,o.Z)(function*(v,g,_){const C=qn(v);Ze(v,g,Gs);const x=Dn(C,_);return yield rl(x,C),x._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function S(v,g,_){return function O(v,g,_){return j.apply(this,arguments)}(v,g,_)}function j(){return(j=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v);Ze(C.auth,g,Gs);const x=Dn(C.auth,_);yield rl(x,C.auth);const P=yield wt(C);return x._openRedirect(C.auth,g,"reauthViaRedirect",P)})).apply(this,arguments)}function X(v,g,_){return function ce(v,g,_){return ve.apply(this,arguments)}(v,g,_)}function ve(){return(ve=(0,o.Z)(function*(v,g,_){const C=(0,L.m9)(v);Ze(C.auth,g,Gs);const x=Dn(C.auth,_);yield Jo(!1,C,g.providerId),yield rl(x,C.auth);const P=yield wt(C);return x._openRedirect(C.auth,g,"linkViaRedirect",P)})).apply(this,arguments)}function bt(){return(bt=(0,o.Z)(function*(v,g){return yield qn(v)._initializationPromise,It(v,g,!1)})).apply(this,arguments)}function It(v,g){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,o.Z)(function*(v,g,_=!1){const C=qn(v),x=Dn(C,g),Y=yield new cn(C,x,_).execute();return Y&&!_&&(delete Y.user._redirectEventId,yield C._persistUserIfCurrent(Y.user),yield C._setRedirectUser(null,g)),Y})).apply(this,arguments)}function wt(v){return Or.apply(this,arguments)}function Or(){return(Or=(0,o.Z)(function*(v){const g=ia(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class ii{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(_=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function As(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aa(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var C;if(g.error&&!aa(g)){const x=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Se(this.auth,x))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const C=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(il(g))}saveEventToCache(g){this.cachedEventUids.add(il(g)),this.lastProcessedEventTime=Date.now()}}function il(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function aa({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===g?.code}function So(v){return ar.apply(this,arguments)}function ar(){return(ar=(0,o.Z)(function*(v,g={}){return Kt(v,"GET","/v1/projects",g)})).apply(this,arguments)}const Js=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sn=/^https?/;function $p(){return($p=(0,o.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield So(v);for(const _ of g)try{if(Pn(_))return}catch{}xe(v,"unauthorized-domain")})).apply(this,arguments)}function Pn(v){const g=Ar(),{protocol:_,hostname:C}=new URL(g);if(v.startsWith("chrome-extension://")){const Y=new URL(v);return""===Y.hostname&&""===C?"chrome-extension:"===_&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&Y.hostname===C}if(!Sn.test(_))return!1;if(Js.test(v))return C===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(C)}const si=new fe(3e4,6e4);function la(){const v=Vn().___jsl;if(v?.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let Jn=null;const Qv=new fe(5e3,15e3),qp="__/auth/iframe",ca="emulator/auth/iframe",Wl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kl(v){const g=v.config;G(g.authDomain,v,"auth-domain-config-required");const _=g.emulator?se(g,ca):`https://${v.config.authDomain}/${qp}`,C={apiKey:g.apiKey,appName:v.name,v:le.SDK_VERSION},x=oi.get(v.config.apiHost);x&&(C.eid=x);const P=v._getFrameworks();return P.length&&(C.fw=P.join(",")),`${_}?${(0,L.xO)(C).slice(1)}`}function ua(){return ua=(0,o.Z)(function*(v){const g=yield function Gp(v){return Jn=Jn||function Rr(v){return new Promise((g,_)=>{var C,x,P;function Y(){la(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{la(),_(Se(v,"network-request-failed"))},timeout:si.get()})}if(null!==(x=null===(C=Vn().gapi)||void 0===C?void 0:C.iframes)&&void 0!==x&&x.Iframe)g(gapi.iframes.getContext());else{if(null===(P=Vn().gapi)||void 0===P||!P.load){const ue=Uh("iframefcb");return Vn()[ue]=()=>{gapi.load?Y():_(Se(v,"network-request-failed"))},Ss(`https://apis.google.com/js/api.js?onload=${ue}`).catch(Ue=>_(Ue))}Y()}}).catch(g=>{throw Jn=null,g})}(v),Jn}(v),_=Vn().gapi;return G(_,v,"internal-error"),g.open({where:document.body,url:Kl(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wl,dontclear:!0},C=>new Promise(function(){var x=(0,o.Z)(function*(P,Y){yield C.restyle({setHideOnLeave:!1});const ue=Se(v,"network-request-failed"),Ue=Vn().setTimeout(()=>{Y(ue)},Qv.get());function st(){Vn().clearTimeout(Ue),P(C)}C.ping(st).then(st,()=>{Y(ue)})});return function(P,Y){return x.apply(this,arguments)}}()))}),ua.apply(this,arguments)}const zh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Zh=500,c_=600,Wh="_blank",Kh="http://localhost";class St{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const su="__/auth/handler",u_="emulator/auth/handler";function Cd(v,g,_,C,x,P){G(v.config.authDomain,v,"auth-domain-config-required"),G(v.config.apiKey,v,"invalid-api-key");const Y={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:C,v:le.SDK_VERSION,eventId:x};if(g instanceof Gs){g.setDefaultLanguage(v.languageCode),Y.providerId=g.providerId||"",(0,L.xb)(g.getCustomParameters())||(Y.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Ue,st]of Object.entries(P||{}))Y[Ue]=st}if(g instanceof Ba){const Ue=g.getScopes().filter(st=>""!==st);Ue.length>0&&(Y.scopes=Ue.join(","))}v.tenantId&&(Y.tid=v.tenantId);const ue=Y;for(const Ue of Object.keys(ue))void 0===ue[Ue]&&delete ue[Ue];return`${function Io({config:v}){return v.emulator?se(v,u_):`https://${v.authDomain}/${su}`}(v)}?${(0,L.xO)(ue).slice(1)}`}const Yh="webStorageSupport",Qh=class d_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ra,this._completeRedirectFn=It,this._overrideRedirectResult=qh}_openPopup(g,_,C,x){var P=this;return(0,o.Z)(function*(){var Y;We(null===(Y=P.eventManagers[g._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const ue=Cd(g,_,C,Ar(),x);return function wd(v,g,_,C=Zh,x=c_){const P=Math.max((window.screen.availHeight-x)/2,0).toString(),Y=Math.max((window.screen.availWidth-C)/2,0).toString();let ue="";const Ue=Object.assign(Object.assign({},zh),{width:C.toString(),height:x.toString(),top:P,left:Y}),st=(0,L.z$)().toLowerCase();_&&(ue=yo(st)?Wh:_),xr(st)&&(g=g||Kh,Ue.scrollbars="yes");const At=Object.entries(Ue).reduce((Pr,[vi,Rd])=>`${Pr}${vi}=${Rd},`,"");if(function Ma(v=(0,L.z$)()){var g;return ws(v)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(st)&&"_self"!==ue)return function Jv(v,g){const _=document.createElement("a");_.href=v,_.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(g||"",ue),new St(null);const Et=window.open(g||"",ue,At);G(Et,v,"popup-blocked");try{Et.focus()}catch{}return new St(Et)}(g,ue,ia())})()}_openRedirect(g,_,C,x){var P=this;return(0,o.Z)(function*(){return yield P._originValidation(g),function Pl(v){Vn().location.href=v}(Cd(g,_,C,Ar(),x)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:x,promise:P}=this.eventManagers[_];return x?Promise.resolve(x):(We(P,"If manager is not set, promise should be"),P)}const C=this.initAndGetManager(g);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(g){var _=this;return(0,o.Z)(function*(){const C=yield function yT(v){return ua.apply(this,arguments)}(g),x=new ii(g);return C.register("authEvent",P=>(G(P?.authEvent,g,"invalid-auth-event"),{status:x.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:x},_.iframes[g._key()]=C,x})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Yh,{type:Yh},x=>{var P;const Y=null===(P=x?.[0])||void 0===P?void 0:P[Yh];void 0!==Y&&_(!!Y),xe(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Zl(v){return $p.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Ip()||en()||ws()}};class vT{constructor(g){this.factorId=g}_process(g,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,C);case"signin":return this._finalizeSignIn(g,_.credential);default:return De("unexpected MultiFactorSessionType")}}}class Mr extends vT{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Mr(g)}_finalizeEnroll(g,_,C){return function i_(v,g){return Kt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Je(v,g))}(g,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Lh(v,g){return Kt(v,"POST","/v2/accounts/mfaSignIn:finalize",Je(v,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let lr=(()=>{class v{constructor(){}static assertion(_){return Mr._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var Yl="@firebase/auth";class Jh{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,o.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(C=>{var x;g((null===(x=C)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);_&&(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function sl(){return window}!function Td(v){(0,le._registerComponent)(new Ce.wA("auth",(g,{options:_})=>{const C=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:P,authDomain:Y}=C.options;return((ue,Ue)=>{G(P&&!P.includes(":"),"invalid-api-key",{appName:ue.name}),G(!Y?.includes(":"),"argument-error",{appName:ue.name});const st={apiKey:P,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pa(v)},At=new Ch(ue,Ue,st);return function An(v,g){const _=g?.persistence||[],C=(Array.isArray(_)?_:[_]).map(_t);g?.errorMap&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(C,g?.popupRedirectResolver)}(At,_),At})(C,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,C)=>{g.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new Ce.wA("auth-internal",g=>{const _=qn(g.getProvider("auth").getImmediate());return new Jh(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(Yl,"0.20.5",function ai(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,le.registerVersion)(Yl,"0.20.5","esm2017")}("Browser");const f_=2e3;function ou(){return ou=(0,o.Z)(function*(v,g,_){var C;const{BuildInfo:x}=sl();We(g.sessionId,"AuthEvent did not contain a session ID");const P=yield function Ql(v){return Ed.apply(this,arguments)}(g.sessionId),Y={};return ws()?Y.ibi=x.packageName:bs()?Y.apn=x.packageName:xe(v,"operation-not-supported-in-this-environment"),x.displayName&&(Y.appDisplayName=x.displayName),Y.sessionId=P,Cd(v,_,g.type,void 0,null!==(C=g.eventId)&&void 0!==C?C:void 0,Y)}),ou.apply(this,arguments)}function zt(){return(zt=(0,o.Z)(function*(v){const{BuildInfo:g}=sl(),_={};ws()?_.iosBundleId=g.packageName:bs()?_.androidPackageName=g.packageName:xe(v,"operation-not-supported-in-this-environment"),yield So(v,_)})).apply(this,arguments)}function ha(){return(ha=(0,o.Z)(function*(v,g,_){const{cordova:C}=sl();let x=()=>{};try{yield new Promise((P,Y)=>{let ue=null;function Ue(){var Et;P();const Pr=null===(Et=C.plugins.browsertab)||void 0===Et?void 0:Et.close;"function"==typeof Pr&&Pr(),"function"==typeof _?.close&&_.close()}function st(){ue||(ue=window.setTimeout(()=>{Y(Se(v,"redirect-cancelled-by-user"))},f_))}function At(){"visible"===document?.visibilityState&&st()}g.addPassiveListener(Ue),document.addEventListener("resume",st,!1),bs()&&document.addEventListener("visibilitychange",At,!1),x=()=>{g.removePassiveListener(Ue),document.removeEventListener("resume",st,!1),document.removeEventListener("visibilitychange",At,!1),ue&&window.clearTimeout(ue)}})}finally{x()}})).apply(this,arguments)}function Ed(){return(Ed=(0,o.Z)(function*(v){const g=function Dd(v){if(We(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),_=new Uint8Array(g);for(let C=0;C<v.length;C++)_[C]=v.charCodeAt(C);return _}(v),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Xh=20;class Sd extends ii{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,o.Z)(function*(){yield g.initPromise})()}}function Kp(v){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,o.Z)(function*(v){const g=yield tf()._get(Id(v));return g&&(yield tf()._remove(Id(v))),g})).apply(this,arguments)}function Yp(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<Xh;_++){const C=Math.floor(Math.random()*g.length);v.push(g.charAt(C))}return v.join("")}function tf(){return _t(jc)}function Id(v){return En("authEvent",v.config.apiKey,v.name)}function Jl(v){if(!v?.includes("?"))return{};const[g,..._]=v.split("?");return(0,L.zd)(_.join("?"))}const s0=class r0{constructor(){this._redirectPersistence=ra,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=It,this._overrideRedirectResult=qh}_initialize(g){var _=this;return(0,o.Z)(function*(){const C=g._key();let x=_.eventManagers.get(C);return x||(x=new Sd(g),_.eventManagers.set(C,x),_.attachCallbackListeners(g,x)),x})()}_openPopup(g){xe(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,C,x){var P=this;return(0,o.Z)(function*(){!function Wp(v){var g,_,C,x,P,Y,ue,Ue,st,At;const Et=sl();G("function"==typeof(null===(g=Et?.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof(null===(_=Et?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G("function"==typeof(null===(P=null===(x=null===(C=Et?.cordova)||void 0===C?void 0:C.plugins)||void 0===x?void 0:x.browsertab)||void 0===P?void 0:P.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(Ue=null===(ue=null===(Y=Et?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Ue?void 0:Ue.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(At=null===(st=Et?.cordova)||void 0===st?void 0:st.InAppBrowser)||void 0===At?void 0:At.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Y=yield P._initialize(g);yield Y.initialized(),Y.resetRedirect(),function Hp(){Re.clear()}(),yield P._originValidation(g);const ue=function ef(v,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:Yp(),postBody:null,tenantId:v.tenantId,error:Se(v,"no-auth-event")}}(g,C,x);yield function lu(v,g){return tf()._set(Id(v),g)}(g,ue);const Ue=yield function Zp(v,g,_){return ou.apply(this,arguments)}(g,ue,_),st=yield function au(v){const{cordova:g}=sl();return new Promise(_=>{g.plugins.browsertab.isAvailable(C=>{let x=null;C?g.plugins.browsertab.openUrl(v):x=g.InAppBrowser.open(v,function e_(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(x)})})}(Ue);return function Xv(v,g,_){return ha.apply(this,arguments)}(g,Y,st)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function da(v){return zt.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:C,handleOpenURL:x,BuildInfo:P}=sl(),Y=setTimeout((0,o.Z)(function*(){yield Kp(g),_.onEvent(Qp())}),500),ue=function(){var At=(0,o.Z)(function*(Et){clearTimeout(Y);const Pr=yield Kp(g);let vi=null;Pr&&Et?.url&&(vi=function cu(v,g){var _,C;const x=function t0(v){const g=Jl(v),_=g.link?decodeURIComponent(g.link):void 0,C=Jl(_).link,x=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Jl(x).link||x||C||_||v}(g);if(x.includes("/__/auth/callback")){const P=Jl(x),Y=P.firebaseError?function e0(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,ue=null===(C=null===(_=Y?.code)||void 0===_?void 0:_.split("auth/"))||void 0===C?void 0:C[1],Ue=ue?Se(ue):null;return Ue?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:x,postBody:null}}return null}(Pr,Et.url)),_.onEvent(vi||Qp())});return function(Pr){return At.apply(this,arguments)}}();typeof C<"u"&&"function"==typeof C.subscribe&&C.subscribe(null,ue);const Ue=x,st=`${P.packageName.toLowerCase()}://`;sl().handleOpenURL=function(){var At=(0,o.Z)(function*(Et){if(Et.toLowerCase().startsWith(st)&&ue({url:Et}),"function"==typeof Ue)try{Ue(Et)}catch(Pr){console.error(Pr)}});return function(Et){return At.apply(this,arguments)}}()}};function Qp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Se("no-auth-event")}}const o0=1e3;function Xs(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function p_(v=(0,L.z$)()){return!("file:"!==Xs()&&"ionic:"!==Xs()&&"capacitor:"!==Xs()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nd(){try{const v=self.localStorage,g=ia();if(v)return v.setItem(g,"1"),v.removeItem(g),!function Ad(v=(0,L.z$)()){return function Xp(){return(0,L.w1)()&&11===document?.documentMode}()||function g_(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch{return eo()&&(0,L.hl)()}return!1}function eo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function sf(){return(function rf(){return"http:"===Xs()||"https:"===Xs()}()||(0,L.ru)()||p_())&&!function ol(){return(0,L.b$)()||(0,L.UG)()}()&&Nd()&&!eo()}function af(){return p_()&&typeof document<"u"}function fa(){return(fa=(0,o.Z)(function*(){return!!af()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},o0);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const Wi={LOCAL:"local",NONE:"none",SESSION:"session"},pa=G,xd="persistence";function No(v){return kd.apply(this,arguments)}function kd(){return(kd=(0,o.Z)(function*(v){yield v._initializationPromise;const g=du(),_=En(xd,v.config.apiKey,v.name);g&&g.setItem(_,v._getPersistence())})).apply(this,arguments)}function du(){var v;try{return(null===(v=function tg(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const m_=G;class xo{constructor(){this.browserResolver=_t(Qh),this.cordovaResolver=_t(s0),this.underlyingResolver=null,this._redirectPersistence=ra,this._completeRedirectFn=It,this._overrideRedirectResult=qh}_initialize(g){var _=this;return(0,o.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,C,x){var P=this;return(0,o.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(g,_,C,x)})()}_openRedirect(g,_,C,x){var P=this;return(0,o.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(g,_,C,x)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return af()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return m_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,o.Z)(function*(){if(g.underlyingResolver)return;const _=yield function eg(){return fa.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function hu(v){return v.unwrap()}function ng(v){return fu(v)}function fu(v){const{_tokenResponse:g}=v instanceof L.ZR?v.customData:v;if(!g)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return vd.credentialFromResult(v);const _=g.providerId;if(!_||_===_e.PASSWORD)return null;let C;switch(_){case _e.GOOGLE:C=Np;break;case _e.FACEBOOK:C=Xu;break;case _e.GITHUB:C=xp;break;case _e.TWITTER:C=n_;break;default:const{oauthIdToken:x,oauthAccessToken:P,oauthTokenSecret:Y,pendingToken:ue,nonce:Ue}=g;return P||Y||x||ue?ue?_.startsWith("saml.")?Va._create(_,ue):qi._fromParams({providerId:_,signInMethod:_,pendingToken:ue,idToken:x,accessToken:P}):new El(_).credential({idToken:x,accessToken:P,rawNonce:Ue}):null}return v instanceof L.ZR?C.credentialFromError(v):C.credentialFromResult(v)}function vr(v,g){return g.catch(_=>{throw _ instanceof L.ZR&&function al(v,g){var _,C;const x=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(C=g)||void 0===C?void 0:C.code))g.resolver=new a0(v,function zr(v,g){var _;const C=(0,L.m9)(v),x=g;return G(g.customData.operationType,C,"argument-error"),G(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),hd._fromError(C,x)}(v,g));else if(x){const P=fu(g),Y=g;P&&(Y.credential=P,Y.tenantId=x.tenantId||void 0,Y.email=x.email||void 0,Y.phoneNumber=x.phoneNumber||void 0)}}(v,_),_}).then(_=>{const x=_.user;return{operationType:_.operationType,credential:ng(_),additionalUserInfo:Rp(_),user:ga.getOrCreate(x)}})}function Xl(v,g){return ll.apply(this,arguments)}function ll(){return(ll=(0,o.Z)(function*(v,g){const _=yield g;return{verificationId:_.verificationId,confirm:C=>vr(v,_.confirm(C))}})).apply(this,arguments)}class a0{constructor(g,_){this.resolver=_,this.auth=function ko(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return vr(hu(this.auth),this.resolver.resolveSignIn(g))}}class ga{constructor(g){this._delegate=g,this.multiFactor=function fd(v){const g=(0,L.m9)(v);return na.has(g)||na.set(g,kl._fromUser(g)),na.get(g)}(g)}static getOrCreate(g){return ga.USER_MAP.has(g)||ga.USER_MAP.set(g,new ga(g)),ga.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,o.Z)(function*(){return vr(_.auth,Qn(_._delegate,g))})()}linkWithPhoneNumber(g,_){var C=this;return(0,o.Z)(function*(){return Xl(C.auth,function a_(v,g,_){return Qc.apply(this,arguments)}(C._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,o.Z)(function*(){return vr(_.auth,function l_(v,g,_){return yi.apply(this,arguments)}(_._delegate,g,xo))})()}linkWithRedirect(g){var _=this;return(0,o.Z)(function*(){return yield No(qn(_.auth)),X(_._delegate,g,xo)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,o.Z)(function*(){return vr(_.auth,Xo(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return Xl(this.auth,function Up(v,g,_){return Bp.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return vr(this.auth,function $h(v,g,_){return Gh.apply(this,arguments)}(this._delegate,g,xo))}reauthenticateWithRedirect(g){var _=this;return(0,o.Z)(function*(){return yield No(qn(_.auth)),S(_._delegate,g,xo)})()}sendEmailVerification(g){return function Ah(v,g){return ld.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,o.Z)(function*(){return yield function Nc(v,g){return ja.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function Nh(v,g){return xh((0,L.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function xl(v,g){return xh((0,L.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Jc(v,g){return jp.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function ta(v,g){return Es.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function Bc(v,g,_){return gr.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ga.USER_MAP=new WeakMap;const cf=G;let __=(()=>{class v{constructor(_,C){if(this.app=_,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=_.options;cf(x,"invalid-api-key",{appName:_.name}),cf(x,"invalid-api-key",{appName:_.name});const P=typeof window<"u"?xo:void 0;this._delegate=C.initialize({options:{persistence:l0(x,_.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ga.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,C){!function dn(v,g,_){const C=qn(v);G(C._canInitEmulator,C,"emulator-config-failed"),G(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const x=!!_?.disableWarnings,P=rr(g),{host:Y,port:ue}=function kr(v){const g=rr(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(C);if(x){const P=x[1];return{host:P,port:js(C.substr(P.length+1))}}{const[P,Y]=C.split(":");return{host:P,port:js(Y)}}}(g);C.config.emulator={url:`${P}//${Y}${null===ue?"":`:${ue}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:Y,port:ue,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Xr(){function v(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,C)}applyActionCode(_){return function Rc(v,g){return Sh.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Mc(this._delegate,_)}confirmPasswordReset(_,C){return function Al(v,g,_){return Mt.apply(this,arguments)}(this._delegate,_,C)}createUserWithEmailAndPassword(_,C){var x=this;return(0,o.Z)(function*(){return vr(x._delegate,function kp(v,g,_){return od.apply(this,arguments)}(x._delegate,_,C))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Lc(v,g){return Uc.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Ih(v,g){return"EMAIL_SIGNIN"===Tl.parseLink(g)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,o.Z)(function*(){cf(sf(),_._delegate,"operation-not-supported-in-this-environment");const C=yield function Xe(v,g){return bt.apply(this,arguments)}(_._delegate,xo);return C?vr(_._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Jp(v,g){qn(v)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,C,x){const{next:P,error:Y,complete:ue}=uf(_,C,x);return this._delegate.onAuthStateChanged(P,Y,ue)}onIdTokenChanged(_,C,x){const{next:P,error:Y,complete:ue}=uf(_,C,x);return this._delegate.onIdTokenChanged(P,Y,ue)}sendSignInLinkToEmail(_,C){return function sn(v,g,_){return ad.apply(this,arguments)}(this._delegate,_,C)}sendPasswordResetEmail(_,C){return function qs(v,g,_){return Il.apply(this,arguments)}(this._delegate,_,C||void 0)}setPersistence(_){var C=this;return(0,o.Z)(function*(){let x;switch(function lf(v,g){pa(Object.values(Wi).includes(g),v,"invalid-persistence-type"),(0,L.b$)()?pa(g!==Wi.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?pa(g===Wi.NONE,v,"unsupported-persistence-type"):eo()?pa(g===Wi.NONE||g===Wi.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):pa(g===Wi.NONE||Nd(),v,"unsupported-persistence-type")}(C._delegate,_),_){case Wi.SESSION:x=ra;break;case Wi.LOCAL:x=(yield _t(sa)._isAvailable())?sa:jc;break;case Wi.NONE:x=fn;break;default:return xe("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return vr(this._delegate,function Dh(v){return bo.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return vr(this._delegate,zn(this._delegate,_))}signInWithCustomToken(_){return vr(this._delegate,function ea(v,g){return pr.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,C){return vr(this._delegate,function we(v,g,_){return zn((0,L.m9)(v),Ju.credential(g,_))}(this._delegate,_,C))}signInWithEmailLink(_,C){return vr(this._delegate,function qr(v,g,_){return Nl.apply(this,arguments)}(this._delegate,_,C))}signInWithPhoneNumber(_,C){return Xl(this._delegate,function rn(v,g,_){return yd.apply(this,arguments)}(this._delegate,_,C))}signInWithPopup(_){var C=this;return(0,o.Z)(function*(){return cf(sf(),C._delegate,"operation-not-supported-in-this-environment"),vr(C._delegate,function nl(v,g,_){return nu.apply(this,arguments)}(C._delegate,_,xo))})()}signInWithRedirect(_){var C=this;return(0,o.Z)(function*(){return cf(sf(),C._delegate,"operation-not-supported-in-this-environment"),yield No(C._delegate),ru(C._delegate,_,xo)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function sd(v,g){return Pc.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Wi,v})();function uf(v,g,_){let C=v;"function"!=typeof v&&({next:C,error:g,complete:_}=v);const x=C;return{next:Y=>x(Y&&ga.getOrCreate(Y)),error:g,complete:_}}function l0(v,g){const _=function Od(v,g){const _=du();if(!_)return[];const C=En(xd,v,g);switch(_.getItem(C)){case Wi.NONE:return[fn];case Wi.LOCAL:return[sa,ra];case Wi.SESSION:return[ra];default:return[]}}(v,g);if(typeof self<"u"&&!_.includes(sa)&&_.push(sa),typeof window<"u")for(const C of[jc,ra])_.includes(C)||_.push(C);return _.includes(fn)||_.push(fn),_}class df{constructor(){this.providerId="phone",this._delegate=new vd(hu(te.Z.auth()))}static credential(g,_){return vd.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}df.PHONE_SIGN_IN_METHOD=vd.PHONE_SIGN_IN_METHOD,df.PROVIDER_ID=vd.PROVIDER_ID;const hf=G;class rg{constructor(g,_,C=te.Z.app()){var x;hf(null===(x=C.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new $l(g,_,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ig(v){v.INTERNAL.registerComponent(new Ce.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),C=g.getProvider("auth");return new __(_,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ee_EMAIL_SIGNIN,PASSWORD_RESET:ee_PASSWORD_RESET,RECOVER_EMAIL:ee_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ee_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ee_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ee_VERIFY_EMAIL}},EmailAuthProvider:Ju,FacebookAuthProvider:Xu,GithubAuthProvider:xp,GoogleAuthProvider:Np,OAuthProvider:El,SAMLAuthProvider:Ts,PhoneAuthProvider:df,PhoneMultiFactorGenerator:lr,RecaptchaVerifier:rg,TwitterAuthProvider:n_,Auth:__,AuthCredential:qo,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.18")}(te.Z)},9751:(mt,Ae,U)=>{U.d(Ae,{y:()=>ye});var o=U(930),te=U(727),L=U(8822),le=U(9635),oe=U(2416),ie=U(576),Ce=U(2806);let ye=(()=>{class ee{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const Qe=new ee;return Qe.source=this,Qe.operator=ke,Qe}subscribe(ke,Qe,ut){const be=function q(ee){return ee&&ee instanceof o.Lv||function z(ee){return ee&&(0,ie.m)(ee.next)&&(0,ie.m)(ee.error)&&(0,ie.m)(ee.complete)}(ee)&&(0,te.Nn)(ee)}(ke)?ke:new o.Hp(ke,Qe,ut);return(0,Ce.x)(()=>{const{operator:Me,source:Oe}=this;be.add(Me?Me.call(be,Oe):Oe?this._subscribe(be):this._trySubscribe(be))}),be}_trySubscribe(ke){try{return this._subscribe(ke)}catch(Qe){ke.error(Qe)}}forEach(ke,Qe){return new(Qe=_e(Qe))((ut,be)=>{const Me=new o.Hp({next:Oe=>{try{ke(Oe)}catch($e){be($e),Me.unsubscribe()}},error:be,complete:ut});this.subscribe(Me)})}_subscribe(ke){var Qe;return null===(Qe=this.source)||void 0===Qe?void 0:Qe.subscribe(ke)}[L.L](){return this}pipe(...ke){return(0,le.U)(ke)(this)}toPromise(ke){return new(ke=_e(ke))((Qe,ut)=>{let be;this.subscribe(Me=>be=Me,Me=>ut(Me),()=>Qe(be))})}}return ee.create=Ke=>new ee(Ke),ee})();function _e(ee){var Ke;return null!==(Ke=ee??oe.v.Promise)&&void 0!==Ke?Ke:Promise}},7579:(mt,Ae,U)=>{U.d(Ae,{x:()=>Ce});var o=U(9751),te=U(727);const le=(0,U(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=U(8737),ie=U(2806);let Ce=(()=>{class _e extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ee=new ye(this,this);return ee.operator=q,ee}_throwIfClosed(){if(this.closed)throw new le}next(q){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(q)}})}error(q){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ee}=this;for(;ee.length;)ee.shift().error(q)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ee,isStopped:Ke,observers:ke}=this;return ee||Ke?te.Lc:(this.currentObservers=null,ke.push(q),new te.w0(()=>{this.currentObservers=null,(0,oe.P)(ke,q)}))}_checkFinalizedStatuses(q){const{hasError:ee,thrownError:Ke,isStopped:ke}=this;ee?q.error(Ke):ke&&q.complete()}asObservable(){const q=new o.y;return q.source=this,q}}return _e.create=(z,q)=>new ye(z,q),_e})();class ye extends Ce{constructor(z,q){super(),this.destination=z,this.source=q}next(z){var q,ee;null===(ee=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ee||ee.call(q,z)}error(z){var q,ee;null===(ee=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ee||ee.call(q,z)}complete(){var z,q;null===(q=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===q||q.call(z)}_subscribe(z){var q,ee;return null!==(ee=null===(q=this.source)||void 0===q?void 0:q.subscribe(z))&&void 0!==ee?ee:te.Lc}}},930:(mt,Ae,U)=>{U.d(Ae,{Hp:()=>ut,Lv:()=>ee});var o=U(576),te=U(727),L=U(2416),le=U(7849),oe=U(5032);const ie=_e("C",void 0,void 0);function _e(xe,Se,Pe){return{kind:xe,value:Se,error:Pe}}var z=U(3410),q=U(2806);class ee extends te.w0{constructor(Se){super(),this.isStopped=!1,Se?(this.destination=Se,(0,te.Nn)(Se)&&Se.add(this)):this.destination=$e}static create(Se,Pe,Ze){return new ut(Se,Pe,Ze)}next(Se){this.isStopped?Oe(function ye(xe){return _e("N",xe,void 0)}(Se),this):this._next(Se)}error(Se){this.isStopped?Oe(function Ce(xe){return _e("E",void 0,xe)}(Se),this):(this.isStopped=!0,this._error(Se))}complete(){this.isStopped?Oe(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Se){this.destination.next(Se)}_error(Se){try{this.destination.error(Se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function ke(xe,Se){return Ke.call(xe,Se)}class Qe{constructor(Se){this.partialObserver=Se}next(Se){const{partialObserver:Pe}=this;if(Pe.next)try{Pe.next(Se)}catch(Ze){be(Ze)}}error(Se){const{partialObserver:Pe}=this;if(Pe.error)try{Pe.error(Se)}catch(Ze){be(Ze)}else be(Se)}complete(){const{partialObserver:Se}=this;if(Se.complete)try{Se.complete()}catch(Pe){be(Pe)}}}class ut extends ee{constructor(Se,Pe,Ze){let Ve;if(super(),(0,o.m)(Se)||!Se)Ve={next:Se??void 0,error:Pe??void 0,complete:Ze??void 0};else{let G;this&&L.v.useDeprecatedNextContext?(G=Object.create(Se),G.unsubscribe=()=>this.unsubscribe(),Ve={next:Se.next&&ke(Se.next,G),error:Se.error&&ke(Se.error,G),complete:Se.complete&&ke(Se.complete,G)}):Ve=Se}this.destination=new Qe(Ve)}}function be(xe){L.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(xe):(0,le.h)(xe)}function Oe(xe,Se){const{onStoppedNotification:Pe}=L.v;Pe&&z.z.setTimeout(()=>Pe(xe,Se))}const $e={closed:!0,next:oe.Z,error:function Me(xe){throw xe},complete:oe.Z}},727:(mt,Ae,U)=>{U.d(Ae,{Lc:()=>ie,w0:()=>oe,Nn:()=>Ce});var o=U(576);const L=(0,U(3888).d)(_e=>function(q){_e(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ee,Ke)=>`${Ke+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var le=U(8737);class oe{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const ke of q)ke.remove(this);else q.remove(this);const{initialTeardown:ee}=this;if((0,o.m)(ee))try{ee()}catch(ke){z=ke instanceof L?ke.errors:[ke]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const ke of Ke)try{ye(ke)}catch(Qe){z=z??[],Qe instanceof L?z=[...z,...Qe.errors]:z.push(Qe)}}if(z)throw new L(z)}}add(z){var q;if(z&&z!==this)if(this.closed)ye(z);else{if(z instanceof oe){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(z)}}_hasParent(z){const{_parentage:q}=this;return q===z||Array.isArray(q)&&q.includes(z)}_addParent(z){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(z),q):q?[q,z]:z}_removeParent(z){const{_parentage:q}=this;q===z?this._parentage=null:Array.isArray(q)&&(0,le.P)(q,z)}remove(z){const{_finalizers:q}=this;q&&(0,le.P)(q,z),z instanceof oe&&z._removeParent(this)}}oe.EMPTY=(()=>{const _e=new oe;return _e.closed=!0,_e})();const ie=oe.EMPTY;function Ce(_e){return _e instanceof oe||_e&&"closed"in _e&&(0,o.m)(_e.remove)&&(0,o.m)(_e.add)&&(0,o.m)(_e.unsubscribe)}function ye(_e){(0,o.m)(_e)?_e():_e.unsubscribe()}},2416:(mt,Ae,U)=>{U.d(Ae,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(mt,Ae,U)=>{U.d(Ae,{E:()=>te});const te=new(U(9751).y)(oe=>oe.complete())},8996:(mt,Ae,U)=>{U.d(Ae,{D:()=>Se});var o=U(8421),te=U(5363),L=U(9468),ie=U(9751),ye=U(2202),_e=U(576),z=U(9672);function ee(Pe,Ze){if(!Pe)throw new Error("Iterable cannot be null");return new ie.y(Ve=>{(0,z.f)(Ve,Ze,()=>{const G=Pe[Symbol.asyncIterator]();(0,z.f)(Ve,Ze,()=>{G.next().then(De=>{De.done?Ve.complete():Ve.next(De.value)})},0,!0)})})}var Ke=U(3670),ke=U(8239),Qe=U(1144),ut=U(6495),be=U(2206),Me=U(4532),Oe=U(3260);function Se(Pe,Ze){return Ze?function xe(Pe,Ze){if(null!=Pe){if((0,Ke.c)(Pe))return function le(Pe,Ze){return(0,o.Xf)(Pe).pipe((0,L.R)(Ze),(0,te.Q)(Ze))}(Pe,Ze);if((0,Qe.z)(Pe))return function Ce(Pe,Ze){return new ie.y(Ve=>{let G=0;return Ze.schedule(function(){G===Pe.length?Ve.complete():(Ve.next(Pe[G++]),Ve.closed||this.schedule())})})}(Pe,Ze);if((0,ke.t)(Pe))return function oe(Pe,Ze){return(0,o.Xf)(Pe).pipe((0,L.R)(Ze),(0,te.Q)(Ze))}(Pe,Ze);if((0,be.D)(Pe))return ee(Pe,Ze);if((0,ut.T)(Pe))return function q(Pe,Ze){return new ie.y(Ve=>{let G;return(0,z.f)(Ve,Ze,()=>{G=Pe[ye.h](),(0,z.f)(Ve,Ze,()=>{let De,We;try{({value:De,done:We}=G.next())}catch(et){return void Ve.error(et)}We?Ve.complete():Ve.next(De)},0,!0)}),()=>(0,_e.m)(G?.return)&&G.return()})}(Pe,Ze);if((0,Oe.L)(Pe))return function $e(Pe,Ze){return ee((0,Oe.Q)(Pe),Ze)}(Pe,Ze)}throw(0,Me.z)(Pe)}(Pe,Ze):(0,o.Xf)(Pe)}},8421:(mt,Ae,U)=>{U.d(Ae,{Xf:()=>Ke});var o=U(7582),te=U(1144),L=U(8239),le=U(9751),oe=U(3670),ie=U(2206),Ce=U(4532),ye=U(6495),_e=U(3260),z=U(576),q=U(7849),ee=U(8822);function Ke(xe){if(xe instanceof le.y)return xe;if(null!=xe){if((0,oe.c)(xe))return function ke(xe){return new le.y(Se=>{const Pe=xe[ee.L]();if((0,z.m)(Pe.subscribe))return Pe.subscribe(Se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,te.z)(xe))return function Qe(xe){return new le.y(Se=>{for(let Pe=0;Pe<xe.length&&!Se.closed;Pe++)Se.next(xe[Pe]);Se.complete()})}(xe);if((0,L.t)(xe))return function ut(xe){return new le.y(Se=>{xe.then(Pe=>{Se.closed||(Se.next(Pe),Se.complete())},Pe=>Se.error(Pe)).then(null,q.h)})}(xe);if((0,ie.D)(xe))return Me(xe);if((0,ye.T)(xe))return function be(xe){return new le.y(Se=>{for(const Pe of xe)if(Se.next(Pe),Se.closed)return;Se.complete()})}(xe);if((0,_e.L)(xe))return function Oe(xe){return Me((0,_e.Q)(xe))}(xe)}throw(0,Ce.z)(xe)}function Me(xe){return new le.y(Se=>{(function $e(xe,Se){var Pe,Ze,Ve,G;return(0,o.mG)(this,void 0,void 0,function*(){try{for(Pe=(0,o.KL)(xe);!(Ze=yield Pe.next()).done;)if(Se.next(Ze.value),Se.closed)return}catch(De){Ve={error:De}}finally{try{Ze&&!Ze.done&&(G=Pe.return)&&(yield G.call(Pe))}finally{if(Ve)throw Ve.error}}Se.complete()})})(xe,Se).catch(Pe=>Se.error(Pe))})}},6451:(mt,Ae,U)=>{U.d(Ae,{T:()=>ie});var o=U(8189),te=U(8421),L=U(515),le=U(3269),oe=U(8996);function ie(...Ce){const ye=(0,le.yG)(Ce),_e=(0,le._6)(Ce,1/0),z=Ce;return z.length?1===z.length?(0,te.Xf)(z[0]):(0,o.J)(_e)((0,oe.D)(z,ye)):L.E}},5403:(mt,Ae,U)=>{U.d(Ae,{x:()=>te});var o=U(930);function te(le,oe,ie,Ce,ye){return new L(le,oe,ie,Ce,ye)}class L extends o.Lv{constructor(oe,ie,Ce,ye,_e,z){super(oe),this.onFinalize=_e,this.shouldUnsubscribe=z,this._next=ie?function(q){try{ie(q)}catch(ee){oe.error(ee)}}:super._next,this._error=ye?function(q){try{ye(q)}catch(ee){oe.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(q){oe.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(mt,Ae,U)=>{U.d(Ae,{U:()=>L});var o=U(4482),te=U(5403);function L(le,oe){return(0,o.e)((ie,Ce)=>{let ye=0;ie.subscribe((0,te.x)(Ce,_e=>{Ce.next(le.call(oe,_e,ye++))}))})}},8189:(mt,Ae,U)=>{U.d(Ae,{J:()=>L});var o=U(5577),te=U(4671);function L(le=1/0){return(0,o.z)(te.y,le)}},5577:(mt,Ae,U)=>{U.d(Ae,{z:()=>ye});var o=U(4004),te=U(8421),L=U(4482),le=U(9672),oe=U(5403),Ce=U(576);function ye(_e,z,q=1/0){return(0,Ce.m)(z)?ye((ee,Ke)=>(0,o.U)((ke,Qe)=>z(ee,ke,Ke,Qe))((0,te.Xf)(_e(ee,Ke))),q):("number"==typeof z&&(q=z),(0,L.e)((ee,Ke)=>function ie(_e,z,q,ee,Ke,ke,Qe,ut){const be=[];let Me=0,Oe=0,$e=!1;const xe=()=>{$e&&!be.length&&!Me&&z.complete()},Se=Ze=>Me<ee?Pe(Ze):be.push(Ze),Pe=Ze=>{ke&&z.next(Ze),Me++;let Ve=!1;(0,te.Xf)(q(Ze,Oe++)).subscribe((0,oe.x)(z,G=>{Ke?.(G),ke?Se(G):z.next(G)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(Me--;be.length&&Me<ee;){const G=be.shift();Qe?(0,le.f)(z,Qe,()=>Pe(G)):Pe(G)}xe()}catch(G){z.error(G)}}))};return _e.subscribe((0,oe.x)(z,Se,()=>{$e=!0,xe()})),()=>{ut?.()}}(ee,Ke,_e,q)))}},5363:(mt,Ae,U)=>{U.d(Ae,{Q:()=>le});var o=U(9672),te=U(4482),L=U(5403);function le(oe,ie=0){return(0,te.e)((Ce,ye)=>{Ce.subscribe((0,L.x)(ye,_e=>(0,o.f)(ye,oe,()=>ye.next(_e),ie),()=>(0,o.f)(ye,oe,()=>ye.complete(),ie),_e=>(0,o.f)(ye,oe,()=>ye.error(_e),ie)))})}},3099:(mt,Ae,U)=>{U.d(Ae,{B:()=>oe});var o=U(8421),te=U(7579),L=U(930),le=U(4482);function oe(Ce={}){const{connector:ye=(()=>new te.x),resetOnError:_e=!0,resetOnComplete:z=!0,resetOnRefCountZero:q=!0}=Ce;return ee=>{let Ke,ke,Qe,ut=0,be=!1,Me=!1;const Oe=()=>{ke?.unsubscribe(),ke=void 0},$e=()=>{Oe(),Ke=Qe=void 0,be=Me=!1},xe=()=>{const Se=Ke;$e(),Se?.unsubscribe()};return(0,le.e)((Se,Pe)=>{ut++,!Me&&!be&&Oe();const Ze=Qe=Qe??ye();Pe.add(()=>{ut--,0===ut&&!Me&&!be&&(ke=ie(xe,q))}),Ze.subscribe(Pe),!Ke&&ut>0&&(Ke=new L.Hp({next:Ve=>Ze.next(Ve),error:Ve=>{Me=!0,Oe(),ke=ie($e,_e,Ve),Ze.error(Ve)},complete:()=>{be=!0,Oe(),ke=ie($e,z),Ze.complete()}}),(0,o.Xf)(Se).subscribe(Ke))})(ee)}}function ie(Ce,ye,..._e){if(!0===ye)return void Ce();if(!1===ye)return;const z=new L.Hp({next:()=>{z.unsubscribe(),Ce()}});return(0,o.Xf)(ye(..._e)).subscribe(z)}},9468:(mt,Ae,U)=>{U.d(Ae,{R:()=>te});var o=U(4482);function te(L,le=0){return(0,o.e)((oe,ie)=>{ie.add(L.schedule(()=>oe.subscribe(ie),le))})}},8505:(mt,Ae,U)=>{U.d(Ae,{b:()=>oe});var o=U(576),te=U(4482),L=U(5403),le=U(4671);function oe(ie,Ce,ye){const _e=(0,o.m)(ie)||Ce||ye?{next:ie,error:Ce,complete:ye}:ie;return _e?(0,te.e)((z,q)=>{var ee;null===(ee=_e.subscribe)||void 0===ee||ee.call(_e);let Ke=!0;z.subscribe((0,L.x)(q,ke=>{var Qe;null===(Qe=_e.next)||void 0===Qe||Qe.call(_e,ke),q.next(ke)},()=>{var ke;Ke=!1,null===(ke=_e.complete)||void 0===ke||ke.call(_e),q.complete()},ke=>{var Qe;Ke=!1,null===(Qe=_e.error)||void 0===Qe||Qe.call(_e,ke),q.error(ke)},()=>{var ke,Qe;Ke&&(null===(ke=_e.unsubscribe)||void 0===ke||ke.call(_e)),null===(Qe=_e.finalize)||void 0===Qe||Qe.call(_e)}))}):le.y}},4408:(mt,Ae,U)=>{U.d(Ae,{o:()=>oe});var o=U(727);class te extends o.w0{constructor(Ce,ye){super()}schedule(Ce,ye=0){return this}}const L={setInterval(ie,Ce,...ye){const{delegate:_e}=L;return _e?.setInterval?_e.setInterval(ie,Ce,...ye):setInterval(ie,Ce,...ye)},clearInterval(ie){const{delegate:Ce}=L;return(Ce?.clearInterval||clearInterval)(ie)},delegate:void 0};var le=U(8737);class oe extends te{constructor(Ce,ye){super(Ce,ye),this.scheduler=Ce,this.work=ye,this.pending=!1}schedule(Ce,ye=0){var _e;if(this.closed)return this;this.state=Ce;const z=this.id,q=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(q,z,ye)),this.pending=!0,this.delay=ye,this.id=null!==(_e=this.id)&&void 0!==_e?_e:this.requestAsyncId(q,this.id,ye),this}requestAsyncId(Ce,ye,_e=0){return L.setInterval(Ce.flush.bind(Ce,this),_e)}recycleAsyncId(Ce,ye,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return ye;null!=ye&&L.clearInterval(ye)}execute(Ce,ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(Ce,ye);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ce,ye){let z,_e=!1;try{this.work(Ce)}catch(q){_e=!0,z=q||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:Ce,scheduler:ye}=this,{actions:_e}=ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(_e,this),null!=Ce&&(this.id=this.recycleAsyncId(ye,Ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(mt,Ae,U)=>{U.d(Ae,{v:()=>L});var o=U(6063);class te{constructor(oe,ie=te.now){this.schedulerActionCtor=oe,this.now=ie}schedule(oe,ie=0,Ce){return new this.schedulerActionCtor(this,oe).schedule(Ce,ie)}}te.now=o.l.now;class L extends te{constructor(oe,ie=te.now){super(oe,ie),this.actions=[],this._active=!1}flush(oe){const{actions:ie}=this;if(this._active)return void ie.push(oe);let Ce;this._active=!0;do{if(Ce=oe.execute(oe.state,oe.delay))break}while(oe=ie.shift());if(this._active=!1,Ce){for(;oe=ie.shift();)oe.unsubscribe();throw Ce}}}},4986:(mt,Ae,U)=>{U.d(Ae,{P:()=>le,z:()=>L});var o=U(4408);const L=new(U(7565).v)(o.o),le=L},6063:(mt,Ae,U)=>{U.d(Ae,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},3410:(mt,Ae,U)=>{U.d(Ae,{z:()=>o});const o={setTimeout(te,L,...le){const{delegate:oe}=o;return oe?.setTimeout?oe.setTimeout(te,L,...le):setTimeout(te,L,...le)},clearTimeout(te){const{delegate:L}=o;return(L?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(mt,Ae,U)=>{U.d(Ae,{h:()=>te});const te=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(mt,Ae,U)=>{U.d(Ae,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(mt,Ae,U)=>{U.d(Ae,{_6:()=>ie,jO:()=>le,yG:()=>oe});var o=U(576),te=U(3532);function L(Ce){return Ce[Ce.length-1]}function le(Ce){return(0,o.m)(L(Ce))?Ce.pop():void 0}function oe(Ce){return(0,te.K)(L(Ce))?Ce.pop():void 0}function ie(Ce,ye){return"number"==typeof L(Ce)?Ce.pop():ye}},8737:(mt,Ae,U)=>{function o(te,L){if(te){const le=te.indexOf(L);0<=le&&te.splice(le,1)}}U.d(Ae,{P:()=>o})},3888:(mt,Ae,U)=>{function o(te){const le=te(oe=>{Error.call(oe),oe.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}U.d(Ae,{d:()=>o})},2806:(mt,Ae,U)=>{U.d(Ae,{O:()=>le,x:()=>L});var o=U(2416);let te=null;function L(oe){if(o.v.useDeprecatedSynchronousErrorHandling){const ie=!te;if(ie&&(te={errorThrown:!1,error:null}),oe(),ie){const{errorThrown:Ce,error:ye}=te;if(te=null,Ce)throw ye}}else oe()}function le(oe){o.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=oe)}},9672:(mt,Ae,U)=>{function o(te,L,le,oe=0,ie=!1){const Ce=L.schedule(function(){le(),ie?te.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(te.add(Ce),!ie)return Ce}U.d(Ae,{f:()=>o})},4671:(mt,Ae,U)=>{function o(te){return te}U.d(Ae,{y:()=>o})},1144:(mt,Ae,U)=>{U.d(Ae,{z:()=>o});const o=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(mt,Ae,U)=>{U.d(Ae,{D:()=>te});var o=U(576);function te(L){return Symbol.asyncIterator&&(0,o.m)(L?.[Symbol.asyncIterator])}},576:(mt,Ae,U)=>{function o(te){return"function"==typeof te}U.d(Ae,{m:()=>o})},3670:(mt,Ae,U)=>{U.d(Ae,{c:()=>L});var o=U(8822),te=U(576);function L(le){return(0,te.m)(le[o.L])}},6495:(mt,Ae,U)=>{U.d(Ae,{T:()=>L});var o=U(2202),te=U(576);function L(le){return(0,te.m)(le?.[o.h])}},8239:(mt,Ae,U)=>{U.d(Ae,{t:()=>te});var o=U(576);function te(L){return(0,o.m)(L?.then)}},3260:(mt,Ae,U)=>{U.d(Ae,{L:()=>le,Q:()=>L});var o=U(7582),te=U(576);function L(oe){return(0,o.FC)(this,arguments,function*(){const Ce=oe.getReader();try{for(;;){const{value:ye,done:_e}=yield(0,o.qq)(Ce.read());if(_e)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(ye)}}finally{Ce.releaseLock()}})}function le(oe){return(0,te.m)(oe?.getReader)}},3532:(mt,Ae,U)=>{U.d(Ae,{K:()=>te});var o=U(576);function te(L){return L&&(0,o.m)(L.schedule)}},4482:(mt,Ae,U)=>{U.d(Ae,{A:()=>te,e:()=>L});var o=U(576);function te(le){return(0,o.m)(le?.lift)}function L(le){return oe=>{if(te(oe))return oe.lift(function(ie){try{return le(ie,this)}catch(Ce){this.error(Ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(mt,Ae,U)=>{function o(){}U.d(Ae,{Z:()=>o})},9635:(mt,Ae,U)=>{U.d(Ae,{U:()=>L,z:()=>te});var o=U(4671);function te(...le){return L(le)}function L(le){return 0===le.length?o.y:1===le.length?le[0]:function(ie){return le.reduce((Ce,ye)=>ye(Ce),ie)}}},7849:(mt,Ae,U)=>{U.d(Ae,{h:()=>L});var o=U(2416),te=U(3410);function L(le){te.z.setTimeout(()=>{const{onUnhandledError:oe}=o.v;if(!oe)throw le;oe(le)})}},4532:(mt,Ae,U)=>{function o(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Ae,{z:()=>o})},4650:(mt,Ae,U)=>{U.d(Ae,{$8M:()=>Kc,$WT:()=>js,$Z:()=>eE,AFp:()=>nw,ALo:()=>$b,AaK:()=>ye,AsE:()=>ly,BQk:()=>Y_,CHM:()=>ad,CRH:()=>Wb,CZH:()=>Fy,CqO:()=>vu,D6c:()=>Wf,EJc:()=>Uy,EiD:()=>DA,EpF:()=>RE,F$t:()=>X_,F4k:()=>ME,FYo:()=>T0,FiY:()=>iu,Gf:()=>xy,GfV:()=>RT,Gpc:()=>q,Hsn:()=>BE,Ikx:()=>cy,JOm:()=>St,JVY:()=>At,JZr:()=>ut,KtG:()=>Ih,L6k:()=>Et,LAX:()=>vi,LFG:()=>$,LMc:()=>Zk,Lbi:()=>mD,Lck:()=>Px,MAs:()=>NE,MGl:()=>Ff,MMx:()=>Fb,MR2:()=>NA,NdJ:()=>Ag,OlP:()=>rn,Oqu:()=>oy,P3R:()=>ET,PXZ:()=>xk,Q6J:()=>Rf,QGY:()=>K0,QbO:()=>gk,Qsj:()=>LA,QtT:()=>Ox,R0b:()=>di,RDi:()=>l0,Rgc:()=>Iy,SBq:()=>wf,SDv:()=>kx,Sil:()=>_D,Suo:()=>Gg,TTD:()=>Nc,TgZ:()=>Sg,Tol:()=>ib,Udp:()=>nb,VKq:()=>Bb,W1O:()=>tD,WLB:()=>Su,X6Q:()=>Uk,XFs:()=>yt,Xpm:()=>Ma,Xts:()=>f0,Y36:()=>Sf,YKP:()=>Mb,YNc:()=>AE,Yjl:()=>Wu,Yz7:()=>Je,Z0I:()=>ln,ZZ4:()=>mw,_Bn:()=>Rb,_UZ:()=>Ig,_Vd:()=>bf,_c5:()=>UD,_uU:()=>Og,aQg:()=>$y,c2e:()=>mk,cJS:()=>Dt,cg1:()=>hy,d8E:()=>uy,dDg:()=>D2,dqk:()=>_n,eBb:()=>Pr,eFA:()=>DD,eJc:()=>rD,ekj:()=>rb,eoX:()=>Dk,f3M:()=>Z,g9A:()=>gD,h0i:()=>Vf,hGG:()=>ih,hij:()=>ay,iGM:()=>Ny,ifc:()=>Yn,ip1:()=>Fi,jDz:()=>O1,kEZ:()=>B1,kL8:()=>g1,lG2:()=>qn,lcZ:()=>qx,lqb:()=>Pd,lri:()=>Tk,mCW:()=>ec,n5z:()=>Bh,oAB:()=>Pa,oJD:()=>wT,oxw:()=>UE,pB0:()=>Rd,pQV:()=>N1,q3G:()=>cr,q4F:()=>MT,qLn:()=>hg,qOj:()=>G_,qZA:()=>W_,qzn:()=>Ue,rWj:()=>Ek,s9C:()=>Pf,sBO:()=>Bk,s_b:()=>Fo,soG:()=>Ly,tb:()=>Ik,tp0:()=>S,uIk:()=>jd,vHH:()=>be,vpe:()=>hc,wAp:()=>Nt,xp6:()=>qT,ynx:()=>K_,z2F:()=>Yi,z3N:()=>ue,zSh:()=>gu,zs3:()=>Tf});var o=U(7579),te=U(727),L=U(9751),le=U(6451),oe=U(3099);function ie(a){for(let l in a)if(a[l]===ie)return l;throw Error("Could not find renamed property on target object.")}function Ce(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function ye(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(ye).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function _e(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const z=ie({__forward_ref__:ie});function q(a){return a.__forward_ref__=q,a.toString=function(){return ye(this())},a}function ee(a){return Ke(a)?a():a}function Ke(a){return"function"==typeof a&&a.hasOwnProperty(z)&&a.__forward_ref__===q}function ke(a){return a&&!!a.\u0275providers}const ut="https://g.co/ng/security#xss";class be extends Error{constructor(l,u){super(Me(l,u)),this.code=l}}function Me(a,l){return`NG0${Math.abs(a)}${l?": "+l.trim():""}`}function Oe(a){return"string"==typeof a?a:null==a?"":String(a)}function Ze(a,l){throw new be(-201,!1)}function se(a,l,u,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${u} ${h} ${l} <=Actual]`))}function Je(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Dt(a){return{providers:a.providers||[],imports:a.imports||[]}}function Yt(a){return nn(a,Rn)||nn(a,Di)}function ln(a){return null!==Yt(a)}function nn(a,l){return a.hasOwnProperty(l)?a[l]:null}function Nr(a){return a&&(a.hasOwnProperty($n)||a.hasOwnProperty(Mn))?a[$n]:null}const Rn=ie({\u0275prov:ie}),$n=ie({\u0275inj:ie}),Di=ie({ngInjectableDef:ie}),Mn=ie({ngInjectorDef:ie});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let as;function Un(a){const l=as;return as=a,l}function Jr(a,l,u){const h=Yt(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&yt.Optional?null:void 0!==l?l:void Ze(ye(a))}const _n=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ls={},Kn="__NG_DI_FLAG__",Gn="ngTempTokenPath",Vs="ngTokenPath",Hr=/\n/gm,Oa="\u0275",hn="__source";let Si;function Xt(a){const l=Si;return Si=a,l}function J(a,l=yt.Default){if(void 0===Si)throw new be(-203,!1);return null===Si?Jr(a,void 0,l):Si.get(a,l&yt.Optional?null:void 0,l)}function $(a,l=yt.Default){return(function Bs(){return as}()||J)(ee(a),l)}function Z(a,l=yt.Default){return $(a,K(l))}function K(a){return typeof a>"u"||"number"==typeof a?a:0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)}function Ne(a){const l=[];for(let u=0;u<a.length;u++){const h=ee(a[u]);if(Array.isArray(h)){if(0===h.length)throw new be(900,!1);let p,m=yt.Default;for(let b=0;b<h.length;b++){const T=h[b],D=vt(T);"number"==typeof D?-1===D?p=T.token:m|=D:p=T}l.push($(p,m))}else l.push($(h))}return l}function Ye(a,l){return a[Kn]=l,a.prototype[Kn]=l,a}function vt(a){return a[Kn]}function En(a){return{toString:a}.toString()}var Ut=(()=>((Ut=Ut||{})[Ut.OnPush=0]="OnPush",Ut[Ut.Default=1]="Default",Ut))(),Yn=(()=>{return(a=Yn||(Yn={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Yn;var a})();const xr={},en=[],yo=ie({\u0275cmp:ie}),Ic=ie({\u0275dir:ie}),bs=ie({\u0275pipe:ie}),Ra=ie({\u0275mod:ie}),$r=ie({\u0275fac:ie}),ws=ie({__NG_ELEMENT_ID__:ie});let e_=0;function Ma(a){return En(()=>{const l=qo(a),u={...l,decls:a.decls,vars:a.vars,template:a.template,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,onPush:a.changeDetection===Ut.OnPush,directiveDefs:null,pipeDefs:null,dependencies:l.standalone&&a.dependencies||null,getStandaloneInjector:null,data:a.data||{},encapsulation:a.encapsulation||Yn.Emulated,id:"c"+e_++,styles:a.styles||en,_:null,schemas:a.schemas||null,tView:null};ei(u);const h=a.dependencies;return u.directiveDefs=zo(h,!1),u.pipeDefs=zo(h,!0),u})}function Ip(a){return dn(a)||rr(a)}function Zu(a){return null!==a}function Pa(a){return En(()=>({type:a.type,bootstrap:a.bootstrap||en,declarations:a.declarations||en,imports:a.imports||en,exports:a.exports||en,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function Ch(a,l){if(null==a)return xr;const u={};for(const h in a)if(a.hasOwnProperty(h)){let p=a[h],m=p;Array.isArray(p)&&(m=p[1],p=p[0]),u[p]=h,l&&(l[p]=m)}return u}function qn(a){return En(()=>{const l=qo(a);return ei(l),l})}function Wu(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function dn(a){return a[yo]||null}function rr(a){return a[Ic]||null}function kr(a){return a[bs]||null}function js(a){const l=dn(a)||rr(a)||kr(a);return null!==l&&l.standalone}function Xr(a,l){const u=a[Ra]||null;if(!u&&!0===l)throw new Error(`Type ${ye(a)} does not have '\u0275mod' property.`);return u}function qo(a){const l={};return{type:a.type,providersResolver:null,factory:null,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:l,exportAs:a.exportAs||null,standalone:!0===a.standalone,selectors:a.selectors||en,viewQuery:a.viewQuery||null,features:a.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ch(a.inputs,l),outputs:Ch(a.outputs)}}function ei(a){a.features?.forEach(l=>l(a))}function zo(a,l){if(!a)return null;const u=l?kr:Ip;return()=>("function"==typeof a?a():a).map(h=>u(h)).filter(Zu)}const $i=0,it=1,Bt=2,Nn=3,pi=4,Hs=5,ir=6,sr=7,Bn=8,Fa=9,fr=10,Gt=11,Ku=12,vo=13,Yu=14,cs=15,ti=16,La=17,Zo=18,Gi=19,$s=20,gi=21,yn=22,qi=1,Th=2,Ua=7,Wo=8,ni=9,ri=10;function Ii(a){return Array.isArray(a)&&"object"==typeof a[qi]}function zi(a){return Array.isArray(a)&&!0===a[qi]}function Cl(a){return 0!=(4&a.flags)}function us(a){return a.componentOffset>-1}function Qu(a){return 1==(1&a.flags)}function Ai(a){return!!a.template}function Tl(a){return 0!=(256&a[Bt])}function Yo(a,l){return a.hasOwnProperty($r)?a[$r]:null}class Qo{constructor(l,u,h){this.previousValue=l,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Nc(){return ja}function ja(a){return a.type.prototype.ngOnChanges&&(a.setInput=Ha),xc}function xc(){const a=Dl(this),l=a?.current;if(l){const u=a.previous;if(u===xr)a.previous=l;else for(let h in l)u[h]=l[h];a.current=null,this.ngOnChanges(l)}}function Ha(a,l,u,h){const p=this.declaredInputs[u],m=Dl(a)||function nd(a,l){return a[Jo]=l}(a,{previous:xr,current:null}),b=m.current||(m.current={}),T=m.previous,D=T[p];b[p]=new Qo(D&&D.currentValue,l,T===xr),a[h]=l}Nc.ngInherit=!0;const Jo="__ngSimpleChanges__";function Dl(a){return a[Jo]||null}const Ni=function(a,l,u){};function Qn(a){for(;Array.isArray(a);)a=a[$i];return a}function Xo(a,l){return Qn(l[a])}function or(a,l){return Qn(l[a.index])}function za(a,l){return a.data[l]}function ea(a,l){return a[l]}function pr(a,l){const u=l[a];return Ii(u)?u:u[$i]}function Za(a){return 64==(64&a[Bt])}function qs(a,l){return null==l?null:a[l]}function Il(a){a[Zo]=0}function Al(a,l){a[Hs]+=l;let u=a,h=a[Nn];for(;null!==h&&(1===l&&1===u[Hs]||-1===l&&0===u[Hs]);)h[Hs]+=l,u=h,h=h[Nn]}const Mt={lFrame:Wv(null),bindingsEnabled:!0};function Pc(){return Mt.bindingsEnabled}function we(){return Mt.lFrame.lView}function sn(){return Mt.lFrame.tView}function ad(a){return Mt.lFrame.contextLView=a,a[Bn]}function Ih(a){return Mt.lFrame.contextLView=null,a}function qr(){let a=Nl();for(;null!==a&&64===a.type;)a=a.parent;return a}function Nl(){return Mt.lFrame.currentTNode}function Fc(){const a=Mt.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}function xi(a,l){const u=Mt.lFrame;u.currentTNode=a,u.isParent=l}function Lc(){return Mt.lFrame.isParent}function Uc(){Mt.lFrame.isParent=!1}function gr(){const a=Mt.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function ki(){return Mt.lFrame.bindingIndex}function ta(){return Mt.lFrame.bindingIndex++}function Es(a){const l=Mt.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function xl(a){Mt.lFrame.inI18n=a}function xh(a,l){const u=Mt.lFrame;u.bindingIndex=u.bindingRootIndex=a,ud(l)}function ud(a){Mt.lFrame.currentDirectiveIndex=a}function zs(a){const l=Mt.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function kh(){return Mt.lFrame.currentQueryIndex}function dd(a){Mt.lFrame.currentQueryIndex=a}function Oh(a){const l=a[it];return 2===l.type?l.declTNode:1===l.type?a[ir]:null}function Op(a,l,u){if(u&yt.SkipSelf){let p=l,m=a;for(;!(p=p.parent,null!==p||u&yt.Host||(p=Oh(m),null===p||(m=m[cs],10&p.type))););if(null===p)return!1;l=p,a=m}const h=Mt.lFrame=Rp();return h.currentTNode=l,h.lView=a,!0}function Vc(a){const l=Rp(),u=a[it];Mt.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function Rp(){const a=Mt.lFrame,l=null===a?null:a.child;return null===l?Wv(a):l}function Wv(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function Kv(){const a=Mt.lFrame;return Mt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Rh=Kv;function r_(){const a=Kv();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function _i(){return Mt.lFrame.selectedIndex}function Wa(a){Mt.lFrame.selectedIndex=a}function xn(){const a=Mt.lFrame;return za(a.tView,a.selectedIndex)}function kl(a,l){for(let u=l.directiveStart,h=l.directiveEnd;u<h;u++){const m=a.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:T,ngAfterViewInit:D,ngAfterViewChecked:N,ngOnDestroy:R}=m;b&&(a.contentHooks??(a.contentHooks=[])).push(-u,b),T&&((a.contentHooks??(a.contentHooks=[])).push(u,T),(a.contentCheckHooks??(a.contentCheckHooks=[])).push(u,T)),D&&(a.viewHooks??(a.viewHooks=[])).push(-u,D),N&&((a.viewHooks??(a.viewHooks=[])).push(u,N),(a.viewCheckHooks??(a.viewCheckHooks=[])).push(u,N)),null!=R&&(a.destroyHooks??(a.destroyHooks=[])).push(u,R)}}function na(a,l,u){Ol(a,l,3,u)}function fd(a,l,u,h){(3&a[Bt])===u&&Ol(a,l,u,h)}function Co(a,l){let u=a[Bt];(3&u)===l&&(u&=2047,u+=1,a[Bt]=u)}function Ol(a,l,u,h){const m=h??-1,b=l.length-1;let T=0;for(let D=void 0!==h?65535&a[Zo]:0;D<b;D++)if("number"==typeof l[D+1]){if(T=l[D],null!=h&&T>=h)break}else l[D]<0&&(a[Zo]+=65536),(T<m||-1==m)&&(Rl(a,u,l,D),a[Zo]=(4294901760&a[Zo])+D+2),D++}function Rl(a,l,u,h){const p=u[h]<0,m=u[h+1],T=a[p?-u[h]:u[h]];if(p){if(a[Bt]>>11<a[Zo]>>16&&(3&a[Bt])===l){a[Bt]+=2048,Ni(4,T,m);try{m.call(T)}finally{Ni(5,T,m)}}}else{Ni(4,T,m);try{m.call(T)}finally{Ni(5,T,m)}}}const Ya=-1;class To{constructor(l,u,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function Vn(a,l,u){let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const m=u[h++],b=u[h++],T=u[h++];a.setAttribute(l,b,T,m)}else{const m=p,b=u[++h];Zs(m)?a.setProperty(l,m,b):a.setAttribute(l,m,b),h++}}return h}function Pl(a){return 3===a||4===a||6===a}function Zs(a){return 64===a.charCodeAt(0)}function Ws(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let h=0;h<l.length;h++){const p=l[h];"number"==typeof p?u=p:0===u||Qa(a,u,p,null,-1===u||2===u?l[++h]:null)}}return a}function Qa(a,l,u,h,p){let m=0,b=a.length;if(-1===l)b=-1;else for(;m<a.length;){const T=a[m++];if("number"==typeof T){if(T===l){b=-1;break}if(T>l){b=m-1;break}}}for(;m<a.length;){const T=a[m];if("number"==typeof T)break;if(T===u){if(null===h)return void(null!==p&&(a[m+1]=p));if(h===a[m+1])return void(a[m+2]=p)}m++,null!==h&&m++,null!==p&&m++}-1!==b&&(a.splice(b,0,l),m=b+1),a.splice(m++,0,u),null!==h&&a.splice(m++,0,h),null!==p&&a.splice(m++,0,p)}function pd(a){return a!==Ya}function Fl(a){return 32767&a}function $c(a,l){let u=function Hc(a){return a>>16}(a),h=l;for(;u>0;)h=h[cs],u--;return h}let Eo=!0;function Ja(a){const l=Eo;return Eo=a,l}const Ll=255,Ul=5;let Gc=0;const Zr={};function el(a,l){const u=Vl(a,l);if(-1!==u)return u;const h=l[it];h.firstCreatePass&&(a.injectorIndex=l.length,Do(h.data,a),Do(l,null),Do(h.blueprint,null));const p=qc(a,l),m=a.injectorIndex;if(pd(p)){const b=Fl(p),T=$c(p,l),D=T[it].data;for(let N=0;N<8;N++)l[m+N]=T[b+N]|D[b+N]}return l[m+8]=p,m}function Do(a,l){a.push(0,0,0,0,0,0,0,0,l)}function Vl(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function qc(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,h=null,p=l;for(;null!==p;){if(h=md(p),null===h)return Ya;if(u++,p=p[cs],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return Ya}function jl(a,l,u){!function Bl(a,l,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(ws)&&(h=u[ws]),null==h&&(h=u[ws]=Gc++);const p=h&Ll;l.data[a+(p>>Ul)]|=1<<p}(a,l,u)}function sa(a,l,u){if(u&yt.Optional||void 0!==a)return a;Ze()}function Hl(a,l,u,h){if(u&yt.Optional&&void 0===h&&(h=null),!(u&(yt.Self|yt.Host))){const p=a[Fa],m=Un(void 0);try{return p?p.get(l,h,u&yt.Optional):Jr(l,h,u&yt.Optional)}finally{Un(m)}}return sa(h,0,u)}function Lh(a,l,u,h=yt.Default,p){if(null!==a){if(1024&l[Bt]){const b=function Vh(a,l,u,h,p){let m=a,b=l;for(;null!==m&&null!==b&&1024&b[Bt]&&!(256&b[Bt]);){const T=Ds(m,b,u,h|yt.Self,Zr);if(T!==Zr)return T;let D=m.parent;if(!D){const N=b[gi];if(N){const R=N.get(u,Zr,h);if(R!==Zr)return R}D=md(b),b=b[cs]}m=D}return p}(a,l,u,h,Zr);if(b!==Zr)return b}const m=Ds(a,l,u,h,Zr);if(m!==Zr)return m}return Hl(l,u,h,p)}function Ds(a,l,u,h,p){const m=function Uh(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(ws)?a[ws]:void 0;return"number"==typeof l?l>=0?l&Ll:o_:l}(u);if("function"==typeof m){if(!Op(l,a,h))return h&yt.Host?sa(p,0,h):Hl(l,u,h,p);try{const b=m(h);if(null!=b||h&yt.Optional)return b;Ze()}finally{Rh()}}else if("number"==typeof m){let b=null,T=Vl(a,l),D=Ya,N=h&yt.Host?l[ti][ir]:null;for((-1===T||h&yt.SkipSelf)&&(D=-1===T?qc(a,l):l[T+8],D!==Ya&&Ks(h,!1)?(b=l[it],T=Fl(D),l=$c(D,l)):T=-1);-1!==T;){const R=l[it];if(Zc(m,T,R.data)){const B=zc(T,l,u,b,h,N);if(B!==Zr)return B}D=l[T+8],D!==Ya&&Ks(h,l[it].data[T+8]===N)&&Zc(m,T,l)?(b=R,T=Fl(D),l=$c(D,l)):T=-1}}return p}function zc(a,l,u,h,p,m){const b=l[it],T=b.data[a+8],R=oa(T,b,u,null==h?us(T)&&Eo:h!=b&&0!=(3&T.type),p&yt.Host&&m===T);return null!==R?Ss(l,b,R,T):Zr}function oa(a,l,u,h,p){const m=a.providerIndexes,b=l.data,T=1048575&m,D=a.directiveStart,R=m>>20,Q=p?T+R:a.directiveEnd;for(let re=h?T:T+R;re<Q;re++){const Ee=b[re];if(re<D&&u===Ee||re>=D&&Ee.type===u)return re}if(p){const re=b[D];if(re&&Ai(re)&&re.type===u)return D}return null}function Ss(a,l,u,h){let p=a[u];const m=l.data;if(function Zi(a){return a instanceof To}(p)){const b=p;b.resolving&&function xe(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new be(-200,`Circular dependency in DI detected for ${a}${u}`)}(function $e(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():Oe(a)}(m[u]));const T=Ja(b.canSeeViewProviders);b.resolving=!0;const D=b.injectImpl?Un(b.injectImpl):null;Op(a,h,yt.Default);try{p=a[u]=b.factory(void 0,m,a,h),l.firstCreatePass&&u>=h.directiveStart&&function s_(a,l,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:m}=l.type.prototype;if(h){const b=ja(l);(u.preOrderHooks??(u.preOrderHooks=[])).push(a,b),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(a,b)}p&&(u.preOrderHooks??(u.preOrderHooks=[])).push(0-a,p),m&&((u.preOrderHooks??(u.preOrderHooks=[])).push(a,m),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(a,m))}(u,m[u],l)}finally{null!==D&&Un(D),Ja(T),b.resolving=!1,Rh()}}return p}function Zc(a,l,u){return!!(u[l+(a>>Ul)]&1<<a)}function Ks(a,l){return!(a&yt.Self||a&yt.Host&&l)}class ds{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,h){return Lh(this._tNode,this._lView,l,K(h),u)}}function o_(){return new ds(qr(),we())}function Bh(a){return En(()=>{const l=a.prototype.constructor,u=l[$r]||Wc(l),h=Object.prototype;let p=Object.getPrototypeOf(a.prototype).constructor;for(;p&&p!==h;){const m=p[$r]||Wc(p);if(m&&m!==u)return m;p=Object.getPrototypeOf(p)}return m=>new m})}function Wc(a){return Ke(a)?()=>{const l=Wc(ee(a));return l&&l()}:Yo(a)}function md(a){const l=a[it],u=l.type;return 2===u?l.declTNode:1===u?a[ir]:null}function Kc(a){return function gd(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const m=u[p];if(Pl(m))break;if(0===m)p+=2;else if("number"==typeof m)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(m===l)return u[p+1];p+=2}}}return null}(qr(),a)}const tl="__parameters__";function $l(a,l,u){return En(()=>{const h=function Fp(a){return function(...u){if(a){const h=a(...u);for(const p in h)this[p]=h[p]}}}(l);function p(...m){if(this instanceof p)return h.apply(this,m),this;const b=new p(...m);return T.annotation=b,T;function T(D,N,R){const B=D.hasOwnProperty(tl)?D[tl]:Object.defineProperty(D,tl,{value:[]})[tl];for(;B.length<=R;)B.push(null);return(B[R]=B[R]||[]).push(b),D}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=a,p.annotationCls=p,p})}class rn{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Je({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Is(a,l){a.forEach(u=>Array.isArray(u)?Is(u,l):l(u))}function tu(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function Gl(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function nl(a,l){const u=[];for(let h=0;h<a;h++)u.push(l);return u}function yi(a,l,u){let h=mr(a,l);return h>=0?a[1|h]=u:(h=~h,function Gh(a,l,u,h){let p=a.length;if(p==l)a.push(u,h);else if(1===p)a.push(h,a[0]),a[0]=u;else{for(p--,a.push(a[p-1],a[p]);p>l;)a[p]=a[p-2],p--;a[l]=u,a[l+1]=h}}(a,h,l,u)),h}function Ht(a,l){const u=mr(a,l);if(u>=0)return a[1|u]}function mr(a,l){return function cn(a,l,u){let h=0,p=a.length>>u;for(;p!==h;){const m=h+(p-h>>1),b=a[m<<u];if(l===b)return m<<u;b>l?p=m:h=m+1}return~(p<<u)}(a,l,1)}const iu=Ye($l("Optional"),8),S=Ye($l("SkipSelf"),4);var St=(()=>((St=St||{})[St.Important=1]="Important",St[St.DashCase=2]="DashCase",St))();const wd=/^>|^->|<!--|-->|--!>|<!-$/g,Jv=/(<|>)/,su="\u200b$1\u200b";const Cd=new Map;let Io=0;const Jh="__ngContext__";function ai(a,l){Ii(l)?(a[Jh]=l[$s],function d_(a){Cd.set(a[$s],a)}(l)):a[Jh]=l}let Wp;function Ql(a,l){return Wp(a,l)}function Dd(a){const l=a[Nn];return zi(l)?l[Nn]:l}function ef(a){return Kp(a[vo])}function lu(a){return Kp(a[pi])}function Kp(a){for(;null!==a&&!zi(a);)a=a[pi];return a}function Ao(a,l,u,h,p){if(null!=h){let m,b=!1;zi(h)?m=h:Ii(h)&&(b=!0,h=h[$i]);const T=Qn(h);0===a&&null!==u?null==p?Xp(l,u,T):ol(l,u,T,p||null,!0):1===a&&null!==u?ol(l,u,T,p||null,!0):2===a?kd(l,T,b):3===a&&l.destroyNode(T),null!=m&&function hu(a,l,u,h,p){const m=u[Ua];m!==Qn(u)&&Ao(l,a,h,m,p);for(let T=ri;T<u.length;T++){const D=u[T];du(D[it],D,a,l,h,m)}}(l,a,m,u,p)}}function cu(a,l){return a.createText(l)}function Yp(a,l,u){a.setValue(l,u)}function tf(a,l){return a.createComment(function u_(a){return a.replace(wd,l=>l.replace(Jv,su))}(l))}function Id(a,l,u){return a.createElement(l,u)}function Qp(a,l){const u=a[ni],h=u.indexOf(l),p=l[Nn];512&l[Bt]&&(l[Bt]&=-513,Al(p,-1)),u.splice(h,1)}function Jp(a,l){if(a.length<=ri)return;const u=ri+l,h=a[u];if(h){const p=h[La];null!==p&&p!==a&&Qp(p,h),l>0&&(a[u-1][pi]=h[pi]);const m=Gl(a,ri+l);!function e0(a,l){du(a,l,l[Gt],2,null,null),l[$i]=null,l[ir]=null}(h[it],h);const b=m[Gi];null!==b&&b.detachView(m[it]),h[Nn]=null,h[pi]=null,h[Bt]&=-65}return h}function nf(a,l){if(!(128&l[Bt])){const u=l[Gt];u.destroyNode&&du(a,l,u,3,null,null),function n0(a){let l=a[vo];if(!l)return uu(a[it],a);for(;l;){let u=null;if(Ii(l))u=l[vo];else{const h=l[ri];h&&(u=h)}if(!u){for(;l&&!l[pi]&&l!==a;)Ii(l)&&uu(l[it],l),l=l[Nn];null===l&&(l=a),Ii(l)&&uu(l[it],l),u=l&&l[pi]}l=u}}(l)}}function uu(a,l){if(!(128&l[Bt])){l[Bt]&=-65,l[Bt]|=128,function Xs(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let h=0;h<u.length;h+=2){const p=l[u[h]];if(!(p instanceof To)){const m=u[h+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const T=p[m[b]],D=m[b+1];Ni(4,T,D);try{D.call(T)}finally{Ni(5,T,D)}}else{Ni(4,p,m);try{m.call(p)}finally{Ni(5,p,m)}}}}}(a,l),function o0(a,l){const u=a.cleanup,h=l[sr];let p=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const b=u[m+3];b>=0?h[p=b]():h[p=-b].unsubscribe(),m+=2}else{const b=h[p=u[m+1]];u[m].call(b)}if(null!==h){for(let m=p+1;m<h.length;m++)(0,h[m])();l[sr]=null}}(a,l),1===l[it].type&&l[Gt].destroy();const u=l[La];if(null!==u&&zi(l[Nn])){u!==l[Nn]&&Qp(u,l);const h=l[Gi];null!==h&&h.detachView(a)}!function vT(a){Cd.delete(a[$s])}(l)}}function rf(a,l,u){return p_(a,l.parent,u)}function p_(a,l,u){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return u[$i];{const{componentOffset:p}=h;if(p>-1){const{encapsulation:m}=a.data[h.directiveStart+p];if(m===Yn.None||m===Yn.Emulated)return null}return or(h,u)}}function ol(a,l,u,h,p){a.insertBefore(l,u,h,p)}function Xp(a,l,u){a.appendChild(l,u)}function g_(a,l,u,h,p){null!==h?ol(a,l,u,h,p):Xp(a,l,u)}function eo(a,l){return a.parentNode(l)}function af(a,l,u){return fa(a,l,u)}function eg(a,l,u){return 40&a.type?or(a,u):null}let tg,vr,uf,hf,fa=eg;function Wi(a,l){fa=a,tg=l}function pa(a,l,u,h){const p=rf(a,h,l),m=l[Gt],T=af(h.parent||l[ir],h,l);if(null!=p)if(Array.isArray(u))for(let D=0;D<u.length;D++)g_(m,p,u[D],T,!1);else g_(m,p,u,T,!1);void 0!==tg&&tg(m,h,l,u,p)}function xd(a,l){if(null!==l){const u=l.type;if(3&u)return or(l,a);if(4&u)return No(-1,a[l.index]);if(8&u){const h=l.child;if(null!==h)return xd(a,h);{const p=a[l.index];return zi(p)?No(-1,p):Qn(p)}}if(32&u)return Ql(l,a)()||Qn(a[l.index]);{const h=lf(a,l);return null!==h?Array.isArray(h)?h[0]:xd(Dd(a[ti]),h):xd(a,l.next)}}return null}function lf(a,l){return null!==l?a[ti][ir].projection[l.projection]:null}function No(a,l){const u=ri+a+1;if(u<l.length){const h=l[u],p=h[it].firstChild;if(null!==p)return xd(h,p)}return l[Ua]}function kd(a,l,u){const h=eo(a,l);h&&function Ad(a,l,u,h){a.removeChild(l,u,h)}(a,h,l,u)}function Od(a,l,u,h,p,m,b){for(;null!=u;){const T=h[u.index],D=u.type;if(b&&0===l&&(T&&ai(Qn(T),h),u.flags|=2),32!=(32&u.flags))if(8&D)Od(a,l,u.child,h,p,m,!1),Ao(l,a,p,T,m);else if(32&D){const N=Ql(u,h);let R;for(;R=N();)Ao(l,a,p,R,m);Ao(l,a,p,T,m)}else 16&D?xo(a,l,h,u,p,m):Ao(l,a,p,T,m);u=b?u.projectionNext:u.next}}function du(a,l,u,h,p,m){Od(u,h,a.firstChild,l,p,m,!1)}function xo(a,l,u,h,p,m){const b=u[ti],D=b[ir].projection[h.projection];if(Array.isArray(D))for(let N=0;N<D.length;N++)Ao(l,a,p,D[N],m);else Od(a,l,D,b[Nn],p,m,!0)}function al(a,l,u){""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u)}function fu(a,l,u){const{mergedAttrs:h,classes:p,styles:m}=u;null!==h&&Vn(a,l,h),null!==p&&al(a,l,p),null!==m&&function ng(a,l,u){a.setAttribute(l,"style",u)}(a,l,m)}function ll(a){return function Xl(){if(void 0===vr&&(vr=null,_n.trustedTypes))try{vr=_n.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return vr}()?.createHTML(a)||a}function l0(a){uf=a}function df(){return void 0!==uf?uf:typeof document<"u"?document:void 0}function rg(){if(void 0===hf&&(hf=null,_n.trustedTypes))try{hf=_n.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return hf}function y_(a){return rg()?.createHTML(a)||a}function v(a){return rg()?.createScriptURL(a)||a}class g{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ut})`}}class _ extends g{getTypeName(){return"HTML"}}class C extends g{getTypeName(){return"Style"}}class x extends g{getTypeName(){return"Script"}}class P extends g{getTypeName(){return"URL"}}class Y extends g{getTypeName(){return"ResourceURL"}}function ue(a){return a instanceof g?a.changingThisBreaksApplicationSecurity:a}function Ue(a,l){const u=function st(a){return a instanceof g&&a.getTypeName()||null}(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see ${ut})`)}return u===l}function At(a){return new _(a)}function Et(a){return new C(a)}function Pr(a){return new x(a)}function vi(a){return new P(a)}function Rd(a){return new Y(a)}function sg(a){const l=new og(a);return function ff(){try{return!!(new window.DOMParser).parseFromString(ll(""),"text/html")}catch{return!1}}()?new pu(l):l}class pu{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(ll(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch{return null}}}class og{constructor(l){this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(l){const u=this.inertDocument.createElement("template");return u.innerHTML=ll(l),u}}const pf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ec(a){return(a=String(a)).match(pf)?a:"unsafe:"+a}function Ns(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function tc(...a){const l={};for(const u of a)for(const h in u)u.hasOwnProperty(h)&&(l[h]=!0);return l}const nc=Ns("area,br,col,hr,img,wbr"),v_=Ns("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gf=Ns("rp,rt"),w_=tc(nc,tc(v_,Ns("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),tc(gf,Ns("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tc(gf,v_)),C_=Ns("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ag=tc(C_,Ns("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ns("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),E_=Ns("script,style,template");class TA{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let p=this.checkClobberedElement(u,u.nextSibling);if(p){u=p;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!w_.hasOwnProperty(u))return this.sanitizedSomething=!0,!E_.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=l.attributes;for(let p=0;p<h.length;p++){const m=h.item(p),b=m.name,T=b.toLowerCase();if(!ag.hasOwnProperty(T)){this.sanitizedSomething=!0;continue}let D=m.value;C_[T]&&(D=ec(D)),this.buf.push(" ",b,'="',u0(D),'"')}return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();w_.hasOwnProperty(u)&&!nc.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(u0(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const EA=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c0=/([^\#-~ |!])/g;function u0(a){return a.replace(/&/g,"&amp;").replace(EA,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(c0,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let d0;function DA(a,l){let u=null;try{d0=d0||sg(a);let h=l?String(l):"";u=d0.getInertBodyElement(h);let p=5,m=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=m,m=u.innerHTML,u=d0.getInertBodyElement(h)}while(h!==m);return ll((new TA).sanitizeChildren(bT(u)||u))}finally{if(u){const h=bT(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function bT(a){return"content"in a&&function DL(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var cr=(()=>((cr=cr||{})[cr.NONE=0]="NONE",cr[cr.HTML=1]="HTML",cr[cr.STYLE=2]="STYLE",cr[cr.SCRIPT=3]="SCRIPT",cr[cr.URL=4]="URL",cr[cr.RESOURCE_URL=5]="RESOURCE_URL",cr))();function wT(a){const l=cg();return l?y_(l.sanitize(cr.HTML,a)||""):Ue(a,"HTML")?y_(ue(a)):DA(df(),Oe(a))}function CT(a){const l=cg();return l?l.sanitize(cr.URL,a)||"":Ue(a,"URL")?ue(a):ec(Oe(a))}function D_(a){const l=cg();if(l)return v(l.sanitize(cr.RESOURCE_URL,a)||"");if(Ue(a,"ResourceURL"))return v(ue(a));throw new be(904,!1)}function ET(a,l,u){return function IA(a,l){return"src"===l&&("embed"===a||"frame"===a||"iframe"===a||"media"===a||"script"===a)||"href"===l&&("base"===a||"link"===a)?D_:CT}(l,u)(a)}function cg(){const a=we();return a&&a[Ku]}const f0=new rn("ENVIRONMENT_INITIALIZER"),Md=new rn("INJECTOR",-1),mf=new rn("INJECTOR_DEF_TYPES");class DT{get(l,u=ls){if(u===ls){const h=new Error(`NullInjectorError: No provider for ${ye(l)}!`);throw h.name="NullInjectorError",h}return u}}function NA(a){return{\u0275providers:a}}function ug(...a){return{\u0275providers:_f(0,a),\u0275fromNgModule:!0}}function _f(a,...l){const u=[],h=new Set;let p;return Is(l,m=>{const b=m;p0(b,u,[],h)&&(p||(p=[]),p.push(b))}),void 0!==p&&ST(p,u),u}function ST(a,l){for(let u=0;u<a.length;u++){const{providers:p}=a[u];g0(p,m=>{l.push(m)})}}function p0(a,l,u,h){if(!(a=ee(a)))return!1;let p=null,m=Nr(a);const b=!m&&dn(a);if(m||b){if(b&&!b.standalone)return!1;p=a}else{const D=a.ngModule;if(m=Nr(D),!m)return!1;p=D}const T=h.has(p);if(b){if(T)return!1;if(h.add(p),b.dependencies){const D="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const N of D)p0(N,l,u,h)}}else{if(!m)return!1;{if(null!=m.imports&&!T){let N;h.add(p);try{Is(m.imports,R=>{p0(R,l,u,h)&&(N||(N=[]),N.push(R))})}finally{}void 0!==N&&ST(N,l)}if(!T){const N=Yo(p)||(()=>new p);l.push({provide:p,useFactory:N,deps:en},{provide:mf,useValue:p,multi:!0},{provide:f0,useValue:()=>$(p),multi:!0})}const D=m.providers;null==D||T||g0(D,R=>{l.push(R)})}}return p!==a&&void 0!==a.providers}function g0(a,l){for(let u of a)ke(u)&&(u=u.\u0275providers),Array.isArray(u)?g0(u,l):l(u)}const xA=ie({provide:String,useValue:ie});function m0(a){return null!==a&&"object"==typeof a&&xA in a}function rc(a){return"function"==typeof a}const gu=new rn("Set Injector scope."),I_={},OA={};let _0;function A_(){return void 0===_0&&(_0=new DT),_0}class Pd{}class AT extends Pd{get destroyed(){return this._destroyed}constructor(l,u,h,p){super(),this.parent=u,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vf(l,b=>this.processProvider(b)),this.records.set(Md,yf(void 0,this)),p.has("environment")&&this.records.set(Pd,yf(void 0,this));const m=this.records.get(gu);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(mf.multi,en,yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const u=Xt(this),h=Un(void 0);try{return l()}finally{Xt(u),Un(h)}}get(l,u=ls,h=yt.Default){this.assertNotDestroyed(),h=K(h);const p=Xt(this),m=Un(void 0);try{if(!(h&yt.SkipSelf)){let T=this.records.get(l);if(void 0===T){const D=function w0(a){return"function"==typeof a||"object"==typeof a&&a instanceof rn}(l)&&Yt(l);T=D&&this.injectableDefInScope(D)?yf(y0(l),I_):null,this.records.set(l,T)}if(null!=T)return this.hydrate(l,T)}return(h&yt.Self?A_():this.parent).get(l,u=h&yt.Optional&&u===ls?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[Gn]=b[Gn]||[]).unshift(ye(l)),p)throw b;return function Tn(a,l,u,h){const p=a[Gn];throw l[hn]&&p.unshift(l[hn]),a.message=function fn(a,l,u,h=null){a=a&&"\n"===a.charAt(0)&&a.charAt(1)==Oa?a.slice(2):a;let p=ye(l);if(Array.isArray(l))p=l.map(ye).join(" -> ");else if("object"==typeof l){let m=[];for(let b in l)if(l.hasOwnProperty(b)){let T=l[b];m.push(b+":"+("string"==typeof T?JSON.stringify(T):ye(T)))}p=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${a.replace(Hr,"\n  ")}`}("\n"+a.message,p,u,h),a[Vs]=p,a[Gn]=null,a}(b,l,"R3InjectorError",this.source)}throw b}finally{Un(m),Xt(p)}}resolveInjectorInitializers(){const l=Xt(this),u=Un(void 0);try{const h=this.get(f0.multi,en,yt.Self);for(const p of h)p()}finally{Xt(l),Un(u)}}toString(){const l=[],u=this.records;for(const h of u.keys())l.push(ye(h));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(l){let u=rc(l=ee(l))?l:ee(l&&l.provide);const h=function MA(a){return m0(a)?yf(void 0,a.useValue):yf(v0(a),I_)}(l);if(rc(l)||!0!==l.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=yf(void 0,I_,!0),p.factory=()=>Ne(p.multi),this.records.set(u,p)),u=l,p.multi.push(l)}this.records.set(u,h)}hydrate(l,u){return u.value===I_&&(u.value=OA,u.value=u.factory()),"object"==typeof u.value&&u.value&&function NT(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=ee(l.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function y0(a){const l=Yt(a),u=null!==l?l.factory:Yo(a);if(null!==u)return u;if(a instanceof rn)throw new be(204,!1);if(a instanceof Function)return function RA(a){const l=a.length;if(l>0)throw nl(l,"?"),new be(204,!1);const u=function hr(a){return a&&(a[Rn]||a[Di])||null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new be(204,!1)}function v0(a,l,u){let h;if(rc(a)){const p=ee(a);return Yo(p)||y0(p)}if(m0(a))h=()=>ee(a.useValue);else if(function IT(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...Ne(a.deps||[]));else if(function kA(a){return!(!a||!a.useExisting)}(a))h=()=>$(ee(a.useExisting));else{const p=ee(a&&(a.useClass||a.provide));if(!function b0(a){return!!a.deps}(a))return Yo(p)||y0(p);h=()=>new p(...Ne(a.deps))}return h}function yf(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function vf(a,l){for(const u of a)Array.isArray(u)?vf(u,l):u&&ke(u)?vf(u.\u0275providers,l):l(u)}class PA{}class xT{}class OT{resolveComponentFactory(l){throw function FA(a){const l=Error(`No component factory found for ${ye(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let bf=(()=>{class a{}return a.NULL=new OT,a})();function N_(){return ic(qr(),we())}function ic(a,l){return new wf(or(a,l))}let wf=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=N_,a})();function dg(a){return a instanceof wf?a.nativeElement:a}class T0{}let LA=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function UA(){const a=we(),u=pr(qr().index,a);return(Ii(u)?u:a)[Gt]}(),a})(),BA=(()=>{class a{}return a.\u0275prov=Je({token:a,providedIn:"root",factory:()=>null}),a})();class RT{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const MT=new RT("15.2.10"),x_={},E0="ngOriginalError";function D0(a){return a[E0]}class hg{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l);this._console.error("ERROR",l),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&D0(l);for(;u&&D0(u);)u=D0(u);return u||null}}function cl(a){return a instanceof Function?a():a}function VT(a,l,u){let h=a.length;for(;;){const p=a.indexOf(l,u);if(-1===p)return p;if(0===p||a.charCodeAt(p-1)<=32){const m=l.length;if(p+m===h||a.charCodeAt(p+m)<=32)return p}u=p+1}}const S0="ng-template";function I0(a,l,u){let h=0,p=!0;for(;h<a.length;){let m=a[h++];if("string"==typeof m&&p){const b=a[h++];if(u&&"class"===m&&-1!==VT(b.toLowerCase(),l,0))return!0}else{if(1===m){for(;h<a.length&&"string"==typeof(m=a[h++]);)if(m.toLowerCase()===l)return!0;return!1}"number"==typeof m&&(p=!1)}}return!1}function A0(a){return 4===a.type&&a.value!==S0}function Cf(a,l,u){return l===(4!==a.type||u?a.value:S0)}function N0(a,l,u){let h=4;const p=a.attrs||[],m=function HT(a){for(let l=0;l<a.length;l++)if(Pl(a[l]))return l;return a.length}(p);let b=!1;for(let T=0;T<l.length;T++){const D=l[T];if("number"!=typeof D){if(!b)if(4&h){if(h=2|1&h,""!==D&&!Cf(a,D,u)||""===D&&1===l.length){if(ma(h))return!1;b=!0}}else{const N=8&h?D:l[++T];if(8&h&&null!==a.attrs){if(!I0(a.attrs,N,u)){if(ma(h))return!1;b=!0}continue}const B=jT(8&h?"class":D,p,A0(a),u);if(-1===B){if(ma(h))return!1;b=!0;continue}if(""!==N){let Q;Q=B>m?"":p[B+1].toLowerCase();const re=8&h?Q:null;if(re&&-1!==VT(re,N,0)||2&h&&N!==Q){if(ma(h))return!1;b=!0}}}}else{if(!b&&!ma(h)&&!ma(D))return!1;if(b&&ma(D))continue;b=!1,h=D|1&h}}return ma(h)||b}function ma(a){return 0==(1&a)}function jT(a,l,u,h){if(null===l)return-1;let p=0;if(h||!u){let m=!1;for(;p<l.length;){const b=l[p];if(b===a)return p;if(3===b||6===b)m=!0;else{if(1===b||2===b){let T=l[++p];for(;"string"==typeof T;)T=l[++p];continue}if(4===b)break;if(0===b){p+=4;continue}}p+=m?1:2}return-1}return function $T(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const h=a[u];if("number"==typeof h)return-1;if(h===l)return u;u++}return-1}(l,a)}function pg(a,l,u=!1){for(let h=0;h<l.length;h++)if(N0(a,l[h],u))return!0;return!1}function zA(a,l){e:for(let u=0;u<l.length;u++){const h=l[u];if(a.length===h.length){for(let p=0;p<a.length;p++)if(a[p]!==h[p])continue e;return!0}}return!1}function GT(a,l){return a?":not("+l.trim()+")":l}function ZA(a){let l=a[0],u=1,h=2,p="",m=!1;for(;u<a.length;){let b=a[u];if("string"==typeof b)if(2&h){const T=a[++u];p+="["+b+(T.length>0?'="'+T+'"':"")+"]"}else 8&h?p+="."+b:4&h&&(p+=" "+b);else""!==p&&!ma(b)&&(l+=GT(m,p),p=""),h=b,m=m||!ma(h);u++}return""!==p&&(l+=GT(m,p)),l}const Vt={};function qT(a){zT(sn(),we(),_i()+a,!1)}function zT(a,l,u,h){if(!h)if(3==(3&l[Bt])){const m=a.preOrderCheckHooks;null!==m&&na(l,m,u)}else{const m=a.preOrderHooks;null!==m&&fd(l,m,0,u)}Wa(u)}function WT(a,l=null,u=null,h){const p=k0(a,l,u,h);return p.resolveInjectorInitializers(),p}function k0(a,l=null,u=null,h,p=new Set){const m=[u||en,ug(a)];return h=h||("object"==typeof a?void 0:ye(a)),new AT(m,l||A_(),h||null,p)}let Tf=(()=>{class a{static create(u,h){if(Array.isArray(u))return WT({name:""},h,u,"");{const p=u.name??"";return WT({name:p},u.parent,u.providers,p)}}}return a.THROW_IF_NOT_FOUND=ls,a.NULL=new DT,a.\u0275prov=Je({token:a,providedIn:"any",factory:()=>$(Md)}),a.__NG_ELEMENT_ID__=-1,a})();function Sf(a,l=yt.Default){const u=we();return null===u?$(a,l):Lh(qr(),u,ee(a),l)}function eE(){throw new Error("invalid")}function tE(a,l){const u=a.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const m=u[h+1];if(-1!==m){const b=a.data[m];dd(u[h]),b.contentQueries(2,l[m],m)}}}function M_(a,l,u,h,p,m,b,T,D,N,R){const B=l.blueprint.slice();return B[$i]=p,B[Bt]=76|h,(null!==R||a&&1024&a[Bt])&&(B[Bt]|=1024),Il(B),B[Nn]=B[cs]=a,B[Bn]=u,B[fr]=b||a&&a[fr],B[Gt]=T||a&&a[Gt],B[Ku]=D||a&&a[Ku]||null,B[Fa]=N||a&&a[Fa]||null,B[ir]=m,B[$s]=function Yh(){return Io++}(),B[gi]=R,B[ti]=2==l.type?a[ti]:B,B}function yg(a,l,u,h,p){let m=a.data[l];if(null===m)m=P_(a,l,u,h,p),function Nh(){return Mt.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=u,m.value=h,m.attrs=p;const b=Fc();m.injectorIndex=null===b?-1:b.injectorIndex}return xi(m,!0),m}function P_(a,l,u,h,p){const m=Nl(),b=Lc(),D=a.data[l]=function LL(a,l,u,h,p,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,u,l,h,p);return null===a.firstChild&&(a.firstChild=D),null!==m&&(b?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D,D.prev=m)),D}function vg(a,l,u,h){if(0===u)return-1;const p=l.length;for(let m=0;m<u;m++)l.push(h),a.blueprint.push(h),a.data.push(null);return p}function _a(a,l,u){Vc(l);try{const h=a.viewQuery;null!==h&&H0(1,h,u);const p=a.template;null!==p&&F0(a,l,p,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&tE(a,l),a.staticViewQueries&&H0(2,a.viewQuery,u);const m=a.components;null!==m&&function nE(a,l){for(let u=0;u<l.length;u++)NN(a,l[u])}(l,m)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{l[Bt]&=-5,r_()}}function F_(a,l,u,h){const p=l[Bt];if(128!=(128&p)){Vc(l);try{Il(l),function wo(a){return Mt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&F0(a,l,u,2,h);const b=3==(3&p);if(b){const N=a.preOrderCheckHooks;null!==N&&na(l,N,null)}else{const N=a.preOrderHooks;null!==N&&fd(l,N,0,null),Co(l,0)}if(function IN(a){for(let l=ef(a);null!==l;l=lu(l)){if(!l[Th])continue;const u=l[ni];for(let h=0;h<u.length;h++){const p=u[h];512&p[Bt]||Al(p[Nn],1),p[Bt]|=512}}}(l),function SN(a){for(let l=ef(a);null!==l;l=lu(l))for(let u=ri;u<l.length;u++){const h=l[u],p=h[it];Za(h)&&F_(p,h,p.template,h[Bn])}}(l),null!==a.contentQueries&&tE(a,l),b){const N=a.contentCheckHooks;null!==N&&na(l,N)}else{const N=a.contentHooks;null!==N&&fd(l,N,1),Co(l,1)}!function cN(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const p=u[h];if(p<0)Wa(~p);else{const m=p,b=u[++h],T=u[++h];xh(b,m),T(2,l[m])}}}finally{Wa(-1)}}(a,l);const T=a.components;null!==T&&function uN(a,l){for(let u=0;u<l.length;u++)AN(a,l[u])}(l,T);const D=a.viewQuery;if(null!==D&&H0(2,D,h),b){const N=a.viewCheckHooks;null!==N&&na(l,N)}else{const N=a.viewHooks;null!==N&&fd(l,N,2),Co(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[Bt]&=-41,512&l[Bt]&&(l[Bt]&=-513,Al(l[Nn],-1))}finally{r_()}}}function F0(a,l,u,h,p){const m=_i(),b=2&h;try{Wa(-1),b&&l.length>yn&&zT(a,l,yn,!1),Ni(b?2:0,p),u(h,p)}finally{Wa(m),Ni(b?3:1,p)}}function rE(a,l,u){if(Cl(l)){const p=l.directiveEnd;for(let m=l.directiveStart;m<p;m++){const b=a.data[m];b.contentQueries&&b.contentQueries(1,u[m],m)}}}function L_(a,l,u){Pc()&&(function _N(a,l,u,h){const p=u.directiveStart,m=u.directiveEnd;us(u)&&function TN(a,l,u){const h=or(l,a),p=U_(u),m=a[fr],b=B_(a,M_(a,p,null,u.onPush?32:16,h,l,m,m.createRenderer(h,u),null,null,null));a[l.index]=b}(l,u,a.data[p+u.componentOffset]),a.firstCreatePass||el(u,l),ai(h,l);const b=u.initialInputs;for(let T=p;T<m;T++){const D=a.data[T],N=Ss(l,a,T,u);ai(N,l),null!==b&&EN(0,T-p,N,D,0,b),Ai(D)&&(pr(u.index,l)[Bn]=Ss(l,a,T,u))}}(a,l,u,or(u,l)),64==(64&u.flags)&&lE(a,l,u))}function Ld(a,l,u=or){const h=l.localNames;if(null!==h){let p=l.index+1;for(let m=0;m<h.length;m+=2){const b=h[m+1],T=-1===b?u(l,a):a[b];a[p++]=T}}}function U_(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=iE(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function iE(a,l,u,h,p,m,b,T,D,N){const R=yn+h,B=R+p,Q=function sE(a,l){const u=[];for(let h=0;h<l;h++)u.push(h<a?null:Vt);return u}(R,B),re="function"==typeof N?N():N;return Q[it]={type:a,blueprint:Q,template:u,queries:null,viewQuery:T,declTNode:l,data:Q.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:D,consts:re,incompleteFirstPass:!1}}function dN(a,l,u,h){const p=uE(l);null===u?p.push(h):(p.push(u),a.firstCreatePass&&dE(a).push(h,p.length-1))}function hN(a,l,u,h){for(let p in a)if(a.hasOwnProperty(p)){u=null===u?{}:u;const m=a[p];null===h?fN(u,l,p,m):h.hasOwnProperty(p)&&fN(u,l,h[p],m)}return u}function fN(a,l,u,h){a.hasOwnProperty(u)?a[u].push(l,h):a[u]=[l,h]}function xs(a,l,u,h,p,m,b,T){const D=or(l,u);let R,N=l.inputs;!T&&null!=N&&(R=N[h])?($0(a,u,R,h,p),us(l)&&function L0(a,l){const u=pr(l,a);16&u[Bt]||(u[Bt]|=32)}(u,l.index)):3&l.type&&(h=function bg(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),p=null!=b?b(p,l.value||"",h):p,m.setProperty(D,h,p))}function U0(a,l,u,h){if(Pc()){const p=null===h?null:{"":-1},m=function vN(a,l){const u=a.directiveRegistry;let h=null,p=null;if(u)for(let m=0;m<u.length;m++){const b=u[m];if(pg(l,b.selectors,!1))if(h||(h=[]),Ai(b))if(null!==b.findHostDirectiveDefs){const T=[];p=p||new Map,b.findHostDirectiveDefs(b,T,p),h.unshift(...T,b),B0(a,l,T.length)}else h.unshift(b),B0(a,l,0);else p=p||new Map,b.findHostDirectiveDefs?.(b,h,p),h.push(b)}return null===h?null:[h,p]}(a,u);let b,T;null===m?b=T=null:[b,T]=m,null!==b&&aE(a,l,u,b,p,T),p&&function bN(a,l,u){if(l){const h=a.localNames=[];for(let p=0;p<l.length;p+=2){const m=u[l[p+1]];if(null==m)throw new be(-301,!1);h.push(l[p],m)}}}(u,h,p)}u.mergedAttrs=Ws(u.mergedAttrs,u.attrs)}function aE(a,l,u,h,p,m){for(let N=0;N<h.length;N++)jl(el(u,l),a,h[N].type);!function wN(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}(u,a.data.length,h.length);for(let N=0;N<h.length;N++){const R=h[N];R.providersResolver&&R.providersResolver(R)}let b=!1,T=!1,D=vg(a,l,h.length,null);for(let N=0;N<h.length;N++){const R=h[N];u.mergedAttrs=Ws(u.mergedAttrs,R.hostAttrs),CN(a,u,l,D,R),BL(D,R,p),null!==R.contentQueries&&(u.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(u.flags|=64);const B=R.type.prototype;!b&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((a.preOrderHooks??(a.preOrderHooks=[])).push(u.index),b=!0),!T&&(B.ngOnChanges||B.ngDoCheck)&&((a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(u.index),T=!0),D++}!function oE(a,l,u){const p=l.directiveEnd,m=a.data,b=l.attrs,T=[];let D=null,N=null;for(let R=l.directiveStart;R<p;R++){const B=m[R],Q=u?u.get(B):null,Ee=Q?Q.outputs:null;D=hN(B.inputs,R,D,Q?Q.inputs:null),N=hN(B.outputs,R,N,Ee);const ze=null===D||null===b||A0(l)?null:DN(D,R,b);T.push(ze)}null!==D&&(D.hasOwnProperty("class")&&(l.flags|=8),D.hasOwnProperty("style")&&(l.flags|=16)),l.initialInputs=T,l.inputs=D,l.outputs=N}(a,u,m)}function lE(a,l,u){const h=u.directiveStart,p=u.directiveEnd,m=u.index,b=function cd(){return Mt.lFrame.currentDirectiveIndex}();try{Wa(m);for(let T=h;T<p;T++){const D=a.data[T],N=l[T];ud(T),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&yN(D,N)}}finally{Wa(-1),ud(b)}}function yN(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function B0(a,l,u){l.componentOffset=u,(a.components??(a.components=[])).push(l.index)}function BL(a,l,u){if(u){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)u[l.exportAs[h]]=a;Ai(l)&&(u[""]=a)}}function CN(a,l,u,h,p){a.data[h]=p;const m=p.factory||(p.factory=Yo(p.type)),b=new To(m,Ai(p),Sf);a.blueprint[h]=b,u[h]=b,function gN(a,l,u,h,p){const m=p.hostBindings;if(m){let b=a.hostBindingOpCodes;null===b&&(b=a.hostBindingOpCodes=[]);const T=~l.index;(function mN(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(b)!=T&&b.push(T),b.push(u,h,m)}}(a,l,h,vg(a,u,p.hostVars,Vt),p)}function V0(a,l,u,h,p,m,b){if(null==m)a.removeAttribute(l,p,u);else{const T=null==b?Oe(m):b(m,h||"",p);a.setAttribute(l,p,T,u)}}function EN(a,l,u,h,p,m){const b=m[l];if(null!==b){const T=h.setInput;for(let D=0;D<b.length;){const N=b[D++],R=b[D++],B=b[D++];null!==T?h.setInput(u,B,N,R):u[R]=B}}}function DN(a,l,u){let h=null,p=0;for(;p<u.length;){const m=u[p];if(0!==m)if(5!==m){if("number"==typeof m)break;if(a.hasOwnProperty(m)){null===h&&(h=[]);const b=a[m];for(let T=0;T<b.length;T+=2)if(b[T]===l){h.push(m,b[T+1],u[p+1]);break}}p+=2}else p+=2;else p+=4}return h}function cE(a,l,u,h){return[a,!0,!1,l,null,0,h,u,null,null]}function AN(a,l){const u=pr(l,a);if(Za(u)){const h=u[it];48&u[Bt]?F_(h,u,h.template,u[Bn]):u[Hs]>0&&j0(u)}}function j0(a){for(let h=ef(a);null!==h;h=lu(h))for(let p=ri;p<h.length;p++){const m=h[p];if(Za(m))if(512&m[Bt]){const b=m[it];F_(b,m,b.template,m[Bn])}else m[Hs]>0&&j0(m)}const u=a[it].components;if(null!==u)for(let h=0;h<u.length;h++){const p=pr(u[h],a);Za(p)&&p[Hs]>0&&j0(p)}}function NN(a,l){const u=pr(l,a),h=u[it];(function xN(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(h,u),_a(h,u,u[Bn])}function B_(a,l){return a[vo]?a[Yu][pi]=l:a[vo]=l,a[Yu]=l,l}function V_(a){for(;a;){a[Bt]|=32;const l=Dd(a);if(Tl(a)&&!l)return a;a=l}return null}function j_(a,l,u,h=!0){const p=l[fr];p.begin&&p.begin();try{F_(a,l,a.template,u)}catch(b){throw h&&hE(l,b),b}finally{p.end&&p.end()}}function H0(a,l,u){dd(0),l(a,u)}function uE(a){return a[sr]||(a[sr]=[])}function dE(a){return a.cleanup||(a.cleanup=[])}function hE(a,l){const u=a[Fa],h=u?u.get(hg,null):null;h&&h.handleError(l)}function $0(a,l,u,h,p){for(let m=0;m<u.length;){const b=u[m++],T=u[m++],D=l[b],N=a.data[b];null!==N.setInput?N.setInput(D,p,h,T):D[T]=p}}function sc(a,l,u){const h=Xo(l,a);Yp(a[Gt],h,u)}function If(a,l,u){let h=u?a.styles:null,p=u?a.classes:null,m=0;if(null!==l)for(let b=0;b<l.length;b++){const T=l[b];"number"==typeof T?m=T:1==m?p=_e(p,T):2==m&&(h=_e(h,T+": "+l[++b]+";"))}u?a.styles=h:a.stylesWithoutHost=h,u?a.classes=p:a.classesWithoutHost=p}function ya(a,l,u,h,p=!1){for(;null!==u;){const m=l[u.index];if(null!==m&&h.push(Qn(m)),zi(m))for(let T=ri;T<m.length;T++){const D=m[T],N=D[it].firstChild;null!==N&&ya(D[it],D,N,h)}const b=u.type;if(8&b)ya(a,l,u.child,h);else if(32&b){const T=Ql(u,l);let D;for(;D=T();)h.push(D)}else if(16&b){const T=lf(l,u);if(Array.isArray(T))h.push(...T);else{const D=Dd(l[ti]);ya(D[it],D,T,h,!0)}}u=p?u.projectionNext:u.next}return h}class Af{get rootNodes(){const l=this._lView,u=l[it];return ya(u,l,u.firstChild,[])}constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bn]}set context(l){this._lView[Bn]=l}get destroyed(){return 128==(128&this._lView[Bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[Nn];if(zi(l)){const u=l[Wo],h=u?u.indexOf(this):-1;h>-1&&(Jp(l,h),Gl(u,h))}this._attachedToViewContainer=!1}nf(this._lView[it],this._lView)}onDestroy(l){dN(this._lView[it],this._lView,null,l)}markForCheck(){V_(this._cdRefInjectingView||this._lView)}detach(){this._lView[Bt]&=-65}reattach(){this._lView[Bt]|=64}detectChanges(){j_(this._lView[it],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Jl(a,l){du(a,l,l[Gt],2,null,null)}(this._lView[it],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=l}}class G0 extends Af{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;j_(l[it],l,l[Bn],!1)}checkNoChanges(){}get context(){return null}}class H_ extends bf{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=dn(l);return new Ud(u,this.ngModule)}}function $_(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class fE{constructor(l,u){this.injector=l,this.parentInjector=u}get(l,u,h){h=K(h);const p=this.injector.get(l,x_,h);return p!==x_||u===x_?p:this.parentInjector.get(l,u,h)}}class Ud extends xT{get inputs(){return $_(this.componentDef.inputs)}get outputs(){return $_(this.componentDef.outputs)}constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function WA(a){return a.map(ZA).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}create(l,u,h,p){let m=(p=p||this.ngModule)instanceof Pd?p:p?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const b=m?new fE(l,m):l,T=b.get(T0,null);if(null===T)throw new be(407,!1);const D=b.get(BA,null),N=T.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",B=h?function FL(a,l,u){return a.selectRootElement(l,u===Yn.ShadowDom)}(N,h,this.componentDef.encapsulation):Id(N,R,function to(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(R)),Q=this.componentDef.onPush?288:272,re=iE(0,null,null,1,0,null,null,null,null,null),Ee=M_(null,re,null,Q,null,null,T,N,D,b,null);let ze,nt;Vc(Ee);try{const ht=this.componentDef;let Ft,Fe=null;ht.findHostDirectiveDefs?(Ft=[],Fe=new Map,ht.findHostDirectiveDefs(ht,Ft,Fe),Ft.push(ht)):Ft=[ht];const qt=function q0(a,l){const u=a[it],h=yn;return a[h]=l,yg(u,h,2,"#host",null)}(Ee,B),Fn=function HL(a,l,u,h,p,m,b,T){const D=p[it];!function RN(a,l,u,h){for(const p of a)l.mergedAttrs=Ws(l.mergedAttrs,p.hostAttrs);null!==l.mergedAttrs&&(If(l,l.mergedAttrs,!0),null!==u&&fu(h,u,l))}(h,a,l,b);const N=m.createRenderer(l,u),R=M_(p,U_(u),null,u.onPush?32:16,p[a.index],a,m,N,T||null,null,null);return D.firstCreatePass&&B0(D,a,h.length-1),B_(p,R),p[a.index]=R}(qt,B,ht,Ft,Ee,T,N);nt=za(re,yn),B&&function gE(a,l,u,h){if(h)Vn(a,u,["ng-version",MT.full]);else{const{attrs:p,classes:m}=function KA(a){const l=[],u=[];let h=1,p=2;for(;h<a.length;){let m=a[h];if("string"==typeof m)2===p?""!==m&&l.push(m,a[++h]):8===p&&u.push(m);else{if(!ma(p))break;p=m}h++}return{attrs:l,classes:u}}(l.selectors[0]);p&&Vn(a,u,p),m&&m.length>0&&al(a,u,m.join(" "))}}(N,ht,B,h),void 0!==u&&function MN(a,l,u){const h=a.projection=[];for(let p=0;p<l.length;p++){const m=u[p];h.push(null!=m?Array.from(m):null)}}(nt,this.ngContentSelectors,u),ze=function Bd(a,l,u,h,p,m){const b=qr(),T=p[it],D=or(b,p);aE(T,p,b,u,null,h);for(let R=0;R<u.length;R++)ai(Ss(p,T,b.directiveStart+R,b),p);lE(T,p,b),D&&ai(D,p);const N=Ss(p,T,b.directiveStart+b.componentOffset,b);if(a[Bn]=p[Bn]=N,null!==m)for(const R of m)R(N,l);return rE(T,b,a),N}(Fn,ht,Ft,Fe,Ee,[$L]),_a(re,Ee,null)}finally{r_()}return new pE(this.componentType,ze,ic(nt,Ee),Ee,nt)}}class pE extends PA{constructor(l,u,h,p,m){super(),this.location=h,this._rootLView=p,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new G0(p),this.componentType=l}setInput(l,u){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[l])){const m=this._rootLView;$0(m[it],m,p,l,u),V_(pr(this._tNode.index,m))}}get injector(){return new ds(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function $L(){const a=qr();kl(we()[it],a)}function G_(a){let l=function mE(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const h=[a];for(;l;){let p;if(Ai(a))p=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new be(903,!1);p=l.\u0275dir}if(p){if(u){h.push(p);const b=a;b.inputs=yE(a.inputs),b.declaredInputs=yE(a.declaredInputs),b.outputs=yE(a.outputs);const T=p.hostBindings;T&&PN(a,T);const D=p.viewQuery,N=p.contentQueries;if(D&&vE(a,D),N&&z0(a,N),Ce(a.inputs,p.inputs),Ce(a.declaredInputs,p.declaredInputs),Ce(a.outputs,p.outputs),Ai(p)&&p.data.animation){const R=a.data;R.animation=(R.animation||[]).concat(p.data.animation)}}const m=p.features;if(m)for(let b=0;b<m.length;b++){const T=m[b];T&&T.ngInherit&&T(a),T===G_&&(u=!1)}}l=Object.getPrototypeOf(l)}!function _E(a){let l=0,u=null;for(let h=a.length-1;h>=0;h--){const p=a[h];p.hostVars=l+=p.hostVars,p.hostAttrs=Ws(p.hostAttrs,u=Ws(u,p.hostAttrs))}}(h)}function yE(a){return a===xr?{}:a===en?[]:a}function vE(a,l){const u=a.viewQuery;a.viewQuery=u?(h,p)=>{l(h,p),u(h,p)}:l}function z0(a,l){const u=a.contentQueries;a.contentQueries=u?(h,p,m)=>{l(h,p,m),u(h,p,m)}:l}function PN(a,l){const u=a.hostBindings;a.hostBindings=u?(h,p)=>{l(h,p),u(h,p)}:l}function Vd(a){return!!z_(a)&&(Array.isArray(a)||!(a instanceof Map)&&Symbol.iterator in a)}function z_(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function va(a,l,u){return a[l]=u}function Ri(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function mu(a,l,u,h){const p=Ri(a,l,u);return Ri(a,l+1,h)||p}function jd(a,l,u,h){const p=we();return Ri(p,ta(),l)&&(sn(),function ul(a,l,u,h,p,m){const b=or(a,l);V0(l[Gt],b,m,a.value,u,h,p)}(xn(),p,a,l,u,h)),jd}function _u(a,l,u,h){return Ri(a,ta(),u)?l+Oe(u)+h:Vt}function AE(a,l,u,h,p,m,b,T){const D=we(),N=sn(),R=a+yn,B=N.firstCreatePass?function Z_(a,l,u,h,p,m,b,T,D){const N=l.consts,R=yg(l,a,4,b||null,qs(N,T));U0(l,u,R,qs(N,D)),kl(l,R);const B=R.tView=iE(2,R,h,p,m,l.directiveRegistry,l.pipeRegistry,null,l.schemas,N);return null!==l.queries&&(l.queries.template(l,R),B.queries=l.queries.embeddedTView(R)),R}(R,N,D,l,u,h,p,m,b):N.data[R];xi(B,!1);const Q=D[Gt].createComment("");pa(N,D,Q,B),ai(Q,D),B_(D,D[R]=cE(Q,D,Q,B)),Qu(B)&&L_(N,D,B),null!=b&&Ld(D,B,T)}function NE(a){return ea(function Ah(){return Mt.lFrame.contextLView}(),yn+a)}function Rf(a,l,u){const h=we();return Ri(h,ta(),l)&&xs(sn(),xn(),h,a,l,h[Gt],u,!1),Rf}function Mf(a,l,u,h,p){const b=p?"class":"style";$0(a,u,l.inputs[b],b,h)}function Sg(a,l,u,h){const p=we(),m=sn(),b=yn+a,T=p[Gt],D=m.firstCreatePass?function xE(a,l,u,h,p,m){const b=l.consts,D=yg(l,a,2,h,qs(b,p));return U0(l,u,D,qs(b,m)),null!==D.attrs&&If(D,D.attrs,!1),null!==D.mergedAttrs&&If(D,D.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,D),D}(b,m,p,l,u,h):m.data[b],N=p[b]=Id(T,l,function i_(){return Mt.lFrame.currentNamespace}()),R=Qu(D);return xi(D,!0),fu(T,N,D),32!=(32&D.flags)&&pa(m,p,N,D),0===function Mc(){return Mt.lFrame.elementDepthCount}()&&ai(N,p),function id(){Mt.lFrame.elementDepthCount++}(),R&&(L_(m,p,D),rE(m,D,p)),null!==h&&Ld(p,D),Sg}function W_(){let a=qr();Lc()?Uc():(a=a.parent,xi(a,!1));const l=a;!function sd(){Mt.lFrame.elementDepthCount--}();const u=sn();return u.firstCreatePass&&(kl(u,a),Cl(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function Fh(a){return 0!=(8&a.flags)}(l)&&Mf(u,l,we(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Pp(a){return 0!=(16&a.flags)}(l)&&Mf(u,l,we(),l.stylesWithoutHost,!1),W_}function Ig(a,l,u,h){return Sg(a,l,u,h),W_(),Ig}function K_(a,l,u){const h=we(),p=sn(),m=a+yn,b=p.firstCreatePass?function kE(a,l,u,h,p){const m=l.consts,b=qs(m,h),T=yg(l,a,8,"ng-container",b);return null!==b&&If(T,b,!0),U0(l,u,T,qs(m,p)),null!==l.queries&&l.queries.elementStart(l,T),T}(m,p,h,l,u):p.data[m];xi(b,!0);const T=h[m]=h[Gt].createComment("");return pa(p,h,T,b),ai(T,h),Qu(b)&&(L_(p,h,b),rE(p,b,h)),null!=u&&Ld(h,b),K_}function Y_(){let a=qr();const l=sn();return Lc()?Uc():(a=a.parent,xi(a,!1)),l.firstCreatePass&&(kl(l,a),Cl(a)&&l.queries.elementEnd(a)),Y_}function RE(){return we()}function K0(a){return!!a&&"function"==typeof a.then}function ME(a){return!!a&&"function"==typeof a.subscribe}const vu=ME;function Ag(a,l,u,h){const p=we(),m=sn(),b=qr();return function PE(a,l,u,h,p,m,b){const T=Qu(h),N=a.firstCreatePass&&dE(a),R=l[Bn],B=uE(l);let Q=!0;if(3&h.type||b){const ze=or(h,l),nt=b?b(ze):ze,ht=B.length,Ft=b?qt=>b(Qn(qt[h.index])):h.index;let Fe=null;if(!b&&T&&(Fe=function J_(a,l,u,h){const p=a.cleanup;if(null!=p)for(let m=0;m<p.length-1;m+=2){const b=p[m];if(b===u&&p[m+1]===h){const T=l[sr],D=p[m+2];return T.length>D?T[D]:null}"string"==typeof b&&(m+=2)}return null}(a,l,p,h.index)),null!==Fe)(Fe.__ngLastListenerFn__||Fe).__ngNextListenerFn__=m,Fe.__ngLastListenerFn__=m,Q=!1;else{m=LE(h,l,R,m,!1);const qt=u.listen(nt,p,m);B.push(m,qt),N&&N.push(p,Ft,ht,ht+1)}}else m=LE(h,l,R,m,!1);const re=h.outputs;let Ee;if(Q&&null!==re&&(Ee=re[p])){const ze=Ee.length;if(ze)for(let nt=0;nt<ze;nt+=2){const Fn=l[Ee[nt]][Ee[nt+1]].subscribe(m),Lr=B.length;B.push(m,Fn),N&&N.push(p,h.index,Lr,-(Lr+1))}}}(m,p,p[Gt],b,a,l,h),Ag}function FE(a,l,u,h){try{return Ni(6,l,u),!1!==u(h)}catch(p){return hE(a,p),!1}finally{Ni(7,l,u)}}function LE(a,l,u,h,p){return function m(b){if(b===Function)return h;V_(a.componentOffset>-1?pr(a.index,l):l);let D=FE(l,u,h,b),N=m.__ngNextListenerFn__;for(;N;)D=FE(l,u,N,b)&&D,N=N.__ngNextListenerFn__;return p&&!1===D&&(b.preventDefault(),b.returnValue=!1),D}}function UE(a=1){return function Yv(a){return(Mt.lFrame.contextLView=function Mh(a,l){for(;a>0;)l=l[cs],a--;return l}(a,Mt.lFrame.contextLView))[Bn]}(a)}function jN(a,l){let u=null;const h=function k_(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(!(1&u))return l[u+1]}return null}(a);for(let p=0;p<l.length;p++){const m=l[p];if("*"!==m){if(null===h?pg(a,m,!0):zA(h,m))return p}else u=p}return u}function X_(a){const l=we()[ti][ir];if(!l.projection){const h=l.projection=nl(a?a.length:1,null),p=h.slice();let m=l.child;for(;null!==m;){const b=a?jN(m,a):0;null!==b&&(p[b]?p[b].projectionNext=m:h[b]=m,p[b]=m),m=m.next}}}function BE(a,l=0,u){const h=we(),p=sn(),m=yg(p,yn+a,16,null,u||null);null===m.projection&&(m.projection=l),Uc(),32!=(32&m.flags)&&function m_(a,l,u){xo(l[Gt],0,l,u,rf(a,u,l),af(u.parent||l[ir],u,l))}(p,h,m)}function Pf(a,l,u){return Ff(a,"",l,"",u),Pf}function Ff(a,l,u,h,p){const m=we(),b=_u(m,l,u,h);return b!==Vt&&xs(sn(),xn(),m,a,b,m[Gt],p,!1),Ff}function ty(a,l){return a<<17|l<<2}function ac(a){return a>>17&32767}function GE(a){return 2|a}function $d(a){return(131068&a)>>2}function J0(a,l){return-131069&a|l<<2}function X0(a){return 1|a}function zE(a,l,u,h,p){const m=a[u+1],b=null===l;let T=h?ac(m):$d(m),D=!1;for(;0!==T&&(!1===D||b);){const R=a[T+1];ZE(a[T],l)&&(D=!0,a[T+1]=h?X0(R):GE(R)),T=h?ac(R):$d(R)}D&&(a[u+1]=h?GE(m):X0(m))}function ZE(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&mr(a,l)>=0}const li={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ny(a){return a.substring(li.key,li.keyEnd)}function WE(a,l){const u=li.textEnd;return u===l?-1:(l=li.keyEnd=function tb(a,l,u){for(;l<u&&a.charCodeAt(l)>32;)l++;return l}(a,li.key=l,u),Mi(a,l,u))}function Mi(a,l,u){for(;l<u&&a.charCodeAt(l)<=32;)l++;return l}function nb(a,l,u){return Po(a,l,u,!1),nb}function rb(a,l){return Po(a,l,null,!0),rb}function ib(a){!function wr(a,l,u,h){const p=sn(),m=Es(2);p.firstUpdatePass&&JE(p,null,m,h);const b=we();if(u!==Vt&&Ri(b,m,u)){const T=p.data[_i()];if(sb(T,h)&&!Gd(p,m)){let D=h?T.classesWithoutHost:T.stylesWithoutHost;null!==D&&(u=_e(D,u||"")),Mf(p,T,b,u,h)}else!function t1(a,l,u,h,p,m,b,T){p===Vt&&(p=en);let D=0,N=0,R=0<p.length?p[0]:null,B=0<m.length?m[0]:null;for(;null!==R||null!==B;){const Q=D<p.length?p[D+1]:void 0,re=N<m.length?m[N+1]:void 0;let ze,Ee=null;R===B?(D+=2,N+=2,Q!==re&&(Ee=B,ze=re)):null===B||null!==R&&R<B?(D+=2,Ee=R):(N+=2,Ee=B,ze=re),null!==Ee&&n1(a,l,u,h,Ee,ze,b,T),R=D<p.length?p[D]:null,B=N<m.length?m[N]:null}}(p,T,b,b[Gt],b[m+1],b[m+1]=function XN(a,l,u){if(null==u||""===u)return en;const h=[],p=ue(u);if(Array.isArray(p))for(let m=0;m<p.length;m++)a(h,p[m],!0);else if("object"==typeof p)for(const m in p)p.hasOwnProperty(m)&&a(h,m,p[m]);else"string"==typeof p&&l(h,p);return h}(a,l,u),h,m)}}(ex,ba,a,!0)}function ba(a,l){for(let u=function ZN(a){return function KE(a){li.key=0,li.keyEnd=0,li.value=0,li.valueEnd=0,li.textEnd=a.length}(a),WE(a,Mi(a,0,li.textEnd))}(l);u>=0;u=WE(l,u))yi(a,ny(l),!0)}function Po(a,l,u,h){const p=we(),m=sn(),b=Es(2);m.firstUpdatePass&&JE(m,a,b,h),l!==Vt&&Ri(p,b,l)&&n1(m,m.data[_i()],p,p[Gt],a,p[b+1]=function tx(a,l){return null==a||""===a||("string"==typeof l?a+=l:"object"==typeof a&&(a=ye(ue(a)))),a}(l,u),h,b)}function Gd(a,l){return l>=a.expandoStartIndex}function JE(a,l,u,h){const p=a.data;if(null===p[u+1]){const m=p[_i()],b=Gd(a,u);sb(m,h)&&null===l&&!b&&(l=!1),l=function QN(a,l,u,h){const p=zs(a);let m=h?l.residualClasses:l.residualStyles;if(null===p)0===(h?l.classBindings:l.styleBindings)&&(u=kg(u=Lf(null,a,l,u,h),l.attrs,h),m=null);else{const b=l.directiveStylingLast;if(-1===b||a[b]!==p)if(u=Lf(p,a,l,u,h),null===m){let D=function XE(a,l,u){const h=u?l.classBindings:l.styleBindings;if(0!==$d(h))return a[ac(h)]}(a,l,h);void 0!==D&&Array.isArray(D)&&(D=Lf(null,a,l,D[1],h),D=kg(D,l.attrs,h),function JN(a,l,u,h){a[ac(u?l.classBindings:l.styleBindings)]=h}(a,l,h,D))}else m=function e1(a,l,u){let h;const p=l.directiveEnd;for(let m=1+l.directiveStylingLast;m<p;m++)h=kg(h,a[m].hostAttrs,u);return kg(h,l.attrs,u)}(a,l,h)}return void 0!==m&&(h?l.residualClasses=m:l.residualStyles=m),u}(p,m,l,h),function qE(a,l,u,h,p,m){let b=m?l.classBindings:l.styleBindings,T=ac(b),D=$d(b);a[h]=u;let R,N=!1;if(Array.isArray(u)?(R=u[1],(null===R||mr(u,R)>0)&&(N=!0)):R=u,p)if(0!==D){const Q=ac(a[T+1]);a[h+1]=ty(Q,T),0!==Q&&(a[Q+1]=J0(a[Q+1],h)),a[T+1]=function $E(a,l){return 131071&a|l<<17}(a[T+1],h)}else a[h+1]=ty(T,0),0!==T&&(a[T+1]=J0(a[T+1],h)),T=h;else a[h+1]=ty(D,0),0===T?T=h:a[D+1]=J0(a[D+1],h),D=h;N&&(a[h+1]=GE(a[h+1])),zE(a,R,h,!0),zE(a,R,h,!1),function qN(a,l,u,h,p){const m=p?a.residualClasses:a.residualStyles;null!=m&&"string"==typeof l&&mr(m,l)>=0&&(u[h+1]=X0(u[h+1]))}(l,R,a,h,m),b=ty(T,D),m?l.classBindings=b:l.styleBindings=b}(p,m,l,u,b,h)}}function Lf(a,l,u,h,p){let m=null;const b=u.directiveEnd;let T=u.directiveStylingLast;for(-1===T?T=u.directiveStart:T++;T<b&&(m=l[T],h=kg(h,m.hostAttrs,p),m!==a);)T++;return null!==a&&(u.directiveStylingLast=T),h}function kg(a,l,u){const h=u?1:2;let p=-1;if(null!==l)for(let m=0;m<l.length;m++){const b=l[m];"number"==typeof b?p=b:p===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),yi(a,b,!!u||l[++m]))}return void 0===a?null:a}function ex(a,l,u){const h=String(l);""!==h&&!h.includes(" ")&&yi(a,h,u)}function n1(a,l,u,h,p,m,b,T){if(!(3&l.type))return;const D=a.data,N=D[T+1],R=function GN(a){return 1==(1&a)}(N)?r1(D,l,u,p,$d(N),b):void 0;sy(R)||(sy(m)||function Q0(a){return 2==(2&a)}(N)&&(m=r1(D,null,u,p,T,b)),function ko(a,l,u,h,p){if(l)p?a.addClass(u,h):a.removeClass(u,h);else{let m=-1===h.indexOf("-")?void 0:St.DashCase;null==p?a.removeStyle(u,h,m):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),m|=St.Important),a.setStyle(u,h,p,m))}}(h,b,Xo(_i(),u),p,m))}function r1(a,l,u,h,p,m){const b=null===l;let T;for(;p>0;){const D=a[p],N=Array.isArray(D),R=N?D[1]:D,B=null===R;let Q=u[p+1];Q===Vt&&(Q=B?en:void 0);let re=B?Ht(Q,h):R===h?Q:void 0;if(N&&!sy(re)&&(re=Ht(D,h)),sy(re)&&(T=re,b))return T;const Ee=a[p+1];p=b?ac(Ee):$d(Ee)}if(null!==l){let D=m?l.residualClasses:l.residualStyles;null!=D&&(T=Ht(D,h))}return T}function sy(a){return void 0!==a}function sb(a,l){return 0!=(a.flags&(l?8:16))}function Og(a,l=""){const u=we(),h=sn(),p=a+yn,m=h.firstCreatePass?yg(h,p,1,l,null):h.data[p],b=u[p]=cu(u[Gt],l);pa(h,u,b,m),xi(m,!1)}function oy(a){return ay("",a,""),oy}function ay(a,l,u){const h=we(),p=_u(h,a,l,u);return p!==Vt&&sc(h,_i(),p),ay}function ly(a,l,u,h,p){const m=we(),b=function Hd(a,l,u,h,p,m){const T=mu(a,ki(),u,p);return Es(2),T?l+Oe(u)+h+Oe(p)+m:Vt}(m,a,l,u,h,p);return b!==Vt&&sc(m,_i(),b),ly}function cy(a,l,u){const h=we();return Ri(h,ta(),l)&&xs(sn(),xn(),h,a,l,h[Gt],u,!0),cy}function uy(a,l,u){const h=we();if(Ri(h,ta(),l)){const m=sn(),b=xn();xs(m,b,h,a,l,function kN(a,l,u){return(null===a||Ai(a))&&(u=function qa(a){for(;Array.isArray(a);){if("object"==typeof a[qi])return a;a=a[$i]}return null}(u[l.index])),u[Gt]}(zs(m.data),b,h),u,!0)}return uy}const wu=void 0;var dy=["en",[["a","p"],["AM","PM"],wu],[["AM","PM"],wu,wu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wu,"{1} 'at' {0}",wu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function p1(a){const u=Math.floor(Math.abs(a)),h=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let zd={};function hy(a){const l=function m1(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=fb(l);if(u)return u;const h=l.split("-")[0];if(u=fb(h),u)return u;if("en"===h)return dy;throw new be(701,!1)}function g1(a){return hy(a)[Nt.PluralCase]}function fb(a){return a in zd||(zd[a]=_n.ng&&_n.ng.common&&_n.ng.common.locales&&_n.ng.common.locales[a]),zd[a]}var Nt=(()=>((Nt=Nt||{})[Nt.LocaleId=0]="LocaleId",Nt[Nt.DayPeriodsFormat=1]="DayPeriodsFormat",Nt[Nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Nt[Nt.DaysFormat=3]="DaysFormat",Nt[Nt.DaysStandalone=4]="DaysStandalone",Nt[Nt.MonthsFormat=5]="MonthsFormat",Nt[Nt.MonthsStandalone=6]="MonthsStandalone",Nt[Nt.Eras=7]="Eras",Nt[Nt.FirstDayOfWeek=8]="FirstDayOfWeek",Nt[Nt.WeekendRange=9]="WeekendRange",Nt[Nt.DateFormat=10]="DateFormat",Nt[Nt.TimeFormat=11]="TimeFormat",Nt[Nt.DateTimeFormat=12]="DateTimeFormat",Nt[Nt.NumberSymbols=13]="NumberSymbols",Nt[Nt.NumberFormats=14]="NumberFormats",Nt[Nt.CurrencyCode=15]="CurrencyCode",Nt[Nt.CurrencySymbol=16]="CurrencySymbol",Nt[Nt.CurrencyName=17]="CurrencyName",Nt[Nt.Currencies=18]="Currencies",Nt[Nt.Directionality=19]="Directionality",Nt[Nt.PluralCase=20]="PluralCase",Nt[Nt.ExtraData=21]="ExtraData",Nt))();const pb=["zero","one","two","few","many"],Zd="en-US",Uf={marker:"element"},Wd={marker:"ICU"};var ur=(()=>((ur=ur||{})[ur.SHIFT=2]="SHIFT",ur[ur.APPEND_EAGERLY=1]="APPEND_EAGERLY",ur[ur.COMMENT=2]="COMMENT",ur))();let gb=Zd;function Ki(a){(function fe(a,l){null==a&&se(l,a,null,"!=")})(a,"Expected localeId to be defined"),"string"==typeof a&&(gb=a.toLowerCase().replace(/_/g,"-"))}function mb(a,l,u){const h=l.insertBeforeIndex,p=Array.isArray(h)?h[0]:h;return null===p?eg(a,0,u):Qn(u[p])}function fx(a,l,u,h,p){const m=l.insertBeforeIndex;if(Array.isArray(m)){let b=h,T=null;if(3&l.type||(T=b,b=p),null!==b&&-1===l.componentOffset)for(let D=1;D<m.length;D++)ol(a,b,u[m[D]],T,!1)}}function px(a,l){if(a.push(l),a.length>1)for(let u=a.length-2;u>=0;u--){const h=a[u];Tu(h)||Kd(h,l)&&null===_b(h)&&fy(h,l.index)}}function Tu(a){return!(64&a.type)}function Kd(a,l){return Tu(l)||a.index>l.index}function _b(a){const l=a.insertBeforeIndex;return Array.isArray(l)?l[0]:l}function fy(a,l){const u=a.insertBeforeIndex;Array.isArray(u)?u[0]=l:(Wi(mb,fx),a.insertBeforeIndex=l)}function Rg(a,l){const u=a.data[l];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function YL(a,l,u){const h=P_(a,u,64,null,null);return px(l,h),h}function vb(a,l){const u=l[a.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function mx(a){return a>>>17}function _x(a){return(131070&a)>>>1}let py=0,Mg=0;function b1(a,l,u,h){const p=u[Gt];let b,m=null;for(let T=0;T<l.length;T++){const D=l[T];if("string"==typeof D){const N=l[++T];null===u[N]&&(u[N]=cu(p,D))}else if("number"==typeof D)switch(1&D){case 0:const N=mx(D);let R,B;if(null===m&&(m=N,b=eo(p,h)),N===m?(R=h,B=b):(R=null,B=Qn(u[N])),null!==B){const ze=_x(D);ol(p,B,u[ze],R,!1);const ht=Rg(a,ze);if(null!==ht&&"object"==typeof ht){const Ft=vb(ht,u);null!==Ft&&b1(a,ht.create[Ft],u,u[ht.anchorIdx])}}break;case 1:const re=l[++T],Ee=l[++T];V0(p,Xo(D>>>1,u),null,null,re,Ee,null)}else switch(D){case Wd:const N=l[++T],R=l[++T];null===u[R]&&ai(u[R]=tf(p,N),u);break;case Uf:const B=l[++T],Q=l[++T];null===u[Q]&&ai(u[Q]=Id(p,B,null),u)}}}function gy(a,l,u,h,p){for(let m=0;m<u.length;m++){const b=u[m],T=u[++m];if(b&p){let D="";for(let N=m+1;N<=m+T;N++){const R=u[N];if("string"==typeof R)D+=R;else if("number"==typeof R)if(R<0)D+=Oe(l[h-R]);else{const B=R>>>2;switch(3&R){case 1:const Q=u[++N],re=u[++N],Ee=a.data[B];"string"==typeof Ee?V0(l[Gt],l[B],null,Ee,Q,D,re):xs(a,Ee,l,Q,D,l[Gt],re,!1);break;case 0:const ze=l[B];null!==ze&&Yp(l[Gt],ze,D);break;case 2:my(a,Rg(a,B),l,D);break;case 3:Bf(a,Rg(a,B),h,l)}}}}else{const D=u[m+1];if(D>0&&3==(3&D)){const R=Rg(a,D>>>2);l[R.currentCaseLViewIndex]<0&&Bf(a,R,h,l)}}m+=T}}function Bf(a,l,u,h){let p=h[l.currentCaseLViewIndex];if(null!==p){let m=py;p<0&&(p=h[l.currentCaseLViewIndex]=~p,m=-1),gy(a,h,l.update[p],u,m)}}function my(a,l,u,h){const p=function Pg(a,l){let u=a.cases.indexOf(l);if(-1===u)switch(a.type){case 1:{const h=function _1(a,l){const u=g1(l)(parseInt(a,10)),h=pb[u];return void 0!==h?h:"other"}(l,function Cu(){return gb}());u=a.cases.indexOf(h),-1===u&&"other"!==h&&(u=a.cases.indexOf("other"));break}case 0:u=a.cases.indexOf("other")}return-1===u?null:u}(l,h);if(vb(l,u)!==p&&(Yd(a,l,u),u[l.currentCaseLViewIndex]=null===p?null:~p,null!==p)){const b=u[l.anchorIdx];b&&b1(a,l.create[p],u,b)}}function Yd(a,l,u){let h=vb(l,u);if(null!==h){const p=l.remove[h];for(let m=0;m<p.length;m++){const b=p[m];if(b>0){const T=Xo(b,u);null!==T&&kd(u[Gt],T)}else Yd(a,Rg(a,~b),u)}}}function bb(){const a=[];let u,h,l=-1;function m(T,D){l=0;const N=vb(T,D);h=null!==N?T.remove[N]:en}function b(){if(l<h.length){const T=h[l++];return T>0?u[T]:(a.push(l,h),m(u[it].data[~T],u),b())}return 0===a.length?null:(h=a.pop(),l=a.pop(),b())}return function p(T,D){for(u=D;a.length;)a.pop();return m(T.value,D),b}}const Fg=/\ufffd(\d+):?\d*\ufffd/gi,Os=/\ufffd(\d+)\ufffd/,wx=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,_y="\ufffd",Cx=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,e2=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Qd=/\uE500/g;function Bg(a,l,u,h,p,m,b){const T=vg(a,h,1,null);let D=T<<ur.SHIFT,N=Fc();l===N&&(N=null),null===N&&(D|=ur.APPEND_EAGERLY),b&&(D|=ur.COMMENT,function Ed(a){void 0===Wp&&(Wp=a())}(bb)),p.push(D,null===m?"":m);const R=P_(a,T,b?32:1,null===m?"":m,null);px(u,R);const B=R.index;return xi(R,!1),null!==N&&l!==N&&function gx(a,l){let u=a.insertBeforeIndex;null===u?(Wi(mb,fx),u=a.insertBeforeIndex=[null,l]):(function et(a,l,u){a!=l&&se(u,a,l,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(l))}(N,B),R}function yy(a,l,u,h,p,m,b){const T=b.match(Fg),D=Bg(a,l,u,m,h,T?null:b,!1);T&&Jd(p,b,D.index,null,0,null)}function Jd(a,l,u,h,p,m){const b=a.length,T=b+1;a.push(null,null);const D=b+2,N=l.split(Fg);let R=0;for(let B=0;B<N.length;B++){const Q=N[B];if(1&B){const re=p+parseInt(Q,10);a.push(-1-re),R|=T1(re)}else""!==Q&&a.push(Q)}return a.push(u<<2|(h?1:0)),h&&a.push(h,m),a[b]=R,a[T]=a.length-D,R}function T1(a){return 1<<Math.min(a,31)}function Eb(a){let l,m,u="",h=0,p=!1;for(;null!==(l=Cx.exec(a));)p?l[0]===`${_y}/*${m}${_y}`&&(h=l.index,p=!1):(u+=a.substring(h,l.index+l[0].length),m=l[1],p=!0);return u+=a.slice(h),u}function Db(a,l,u,h,p,m){let b=0;const T={type:p.type,currentCaseLViewIndex:vg(a,l,1,null),anchorIdx:m,cases:[],create:[],remove:[],update:[]};(function Sb(a,l,u){a.push(T1(l.mainBinding),2,-1-l.mainBinding,u<<2|2)})(u,p,m),function yb(a,l,u){const h=a.data[l];null===h?a.data[l]=u:h.value=u}(a,m,T);const D=p.values;for(let N=0;N<D.length;N++){const R=D[N],B=[];for(let Q=0;Q<R.length;Q++){const re=R[Q];if("string"!=typeof re){const Ee=B.push(re)-1;R[Q]=`\x3c!--\ufffd${Ee}\ufffd--\x3e`}}b=Ix(a,T,l,u,h,p.cases[N],R.join(""),B)|b}b&&function Nx(a,l,u){a.push(l,1,u<<2|3)}(u,b,m)}function Sx(a){const l=[],u=[];let h=1,p=0;const m=E1(a=a.replace(wx,function(b,T,D){return h="select"===D?0:1,p=parseInt(T.slice(1),10),""}));for(let b=0;b<m.length;){let T=m[b++].trim();1===h&&(T=T.replace(/\s*(?:=)?(\w+)\s*/,"$1")),T.length&&l.push(T);const D=E1(m[b++]);l.length>u.length&&u.push(D)}return{type:h,mainBinding:p,cases:l,values:u}}function E1(a){if(!a)return[];let l=0;const u=[],h=[],p=/[{}]/g;let m;for(p.lastIndex=0;m=p.exec(a);){const T=m.index;if("}"==m[0]){if(u.pop(),0==u.length){const D=a.substring(l,T);wx.test(D)?h.push(Sx(D)):h.push(D),l=T+1}}else{if(0==u.length){const D=a.substring(l,T);h.push(D),l=T+1}u.push("{")}}const b=a.substring(l);return h.push(b),h}function Ix(a,l,u,h,p,m,b,T){const D=[],N=[],R=[];l.cases.push(m),l.create.push(D),l.remove.push(N),l.update.push(R);const Q=sg(df()).getInertBodyElement(b),re=bT(Q)||Q;return re?by(a,l,u,h,D,N,R,re,p,T,0):0}function by(a,l,u,h,p,m,b,T,D,N,R){let B=0,Q=T.firstChild;for(;Q;){const re=vg(a,u,1,null);switch(Q.nodeType){case Node.ELEMENT_NODE:const Ee=Q,ze=Ee.tagName.toLowerCase();if(w_.hasOwnProperty(ze)){wy(p,Uf,ze,D,re),a.data[re]=ze;const Fe=Ee.attributes;for(let qt=0;qt<Fe.length;qt++){const Fn=Fe.item(qt),Lr=Fn.name.toLowerCase();Fn.value.match(Fg)?ag.hasOwnProperty(Lr)&&Jd(b,Fn.value,re,Fn.name,0,C_[Lr]?ec:null):Ib(p,re,Fn)}B=by(a,l,u,h,p,m,b,Q,re,N,R+1)|B,Ax(m,re,R)}break;case Node.TEXT_NODE:const nt=Q.textContent||"",ht=nt.match(Fg);wy(p,null,ht?"":nt,D,re),Ax(m,re,R),ht&&(B=Jd(b,nt,re,null,0,null)|B);break;case Node.COMMENT_NODE:const Ft=Os.exec(Q.textContent||"");if(Ft){const qt=N[parseInt(Ft[1],10)];wy(p,Wd,"",D,re),Db(a,u,h,D,qt,re),t2(m,re,R)}}Q=Q.nextSibling}return B}function Ax(a,l,u){0===u&&a.push(l)}function t2(a,l,u){0===u&&(a.push(~l),a.push(l))}function wy(a,l,u,h,p){null!==l&&a.push(l),a.push(u,p,function QL(a,l,u){return a|l<<17|u<<1}(0,h,p))}function Ib(a,l,u){a.push(l<<1|1,u.name,u.value)}function A1(a,l,u=-1){const h=sn(),p=we(),m=yn+a,b=qs(h.consts,l),T=Fc();h.firstCreatePass&&function Ug(a,l,u,h,p,m){const b=Fc(),T=[],D=[],N=[[]];p=function Dx(a,l){if(function Ex(a){return-1===a}(l))return Eb(a);{const u=a.indexOf(`:${l}${_y}`)+2+l.toString().length,h=a.search(new RegExp(`${_y}\\/\\*\\d+:${l}${_y}`));return Eb(a.substring(u,h))}}(p,m);const R=function Lg(a){return a.replace(Qd," ")}(p).split(e2);for(let B=0;B<R.length;B++){let Q=R[B];if(1&B){const re=47===Q.charCodeAt(0),ze=(Q.charCodeAt(re?1:0),yn+Number.parseInt(Q.substring(re?2:1)));if(re)N.shift(),xi(Fc(),!1);else{const nt=YL(a,N[0],ze);N.unshift([]),xi(nt,!0)}}else{const re=E1(Q);for(let Ee=0;Ee<re.length;Ee++){let ze=re[Ee];if(1&Ee){const nt=ze;if("object"!=typeof nt)throw new Error(`Unable to parse ICU expression in "${p}" message.`);Db(a,u,D,l,nt,Bg(a,b,N[0],u,T,"",!0).index)}else""!==ze&&yy(a,b,N[0],T,D,u,ze)}}}a.data[h]={create:T,update:D}}(h,null===T?0:T.index,p,m,b,u);const D=h.data[m],R=p_(h,T===p[ir]?null:T,p);(function bx(a,l,u,h){const p=a[Gt];for(let m=0;m<l.length;m++){const b=l[m++],T=l[m],N=(b&ur.APPEND_EAGERLY)===ur.APPEND_EAGERLY,R=b>>>ur.SHIFT;let B=a[R];null===B&&(B=a[R]=(b&ur.COMMENT)===ur.COMMENT?p.createComment(T):cu(p,T)),N&&null!==u&&ol(p,u,B,h,!1)}})(p,D.create,R,T&&8&T.type?p[T.index]:null),xl(!0)}function kx(a,l,u){A1(a,l,u),function Nb(){xl(!1)}()}function N1(a){return function v1(a){a&&(py|=1<<Math.min(Mg,31)),Mg++}(Ri(we(),ta(),a)),N1}function Ox(a){!function vx(a,l,u){if(Mg>0){const h=a.data[u];gy(a,l,Array.isArray(h)?h:h.update,ki()-Mg-1,py)}py=0,Mg=0}(sn(),we(),a+yn)}function xb(a,l,u,h,p){if(a=ee(a),Array.isArray(a))for(let m=0;m<a.length;m++)xb(a[m],l,u,h,p);else{const m=sn(),b=we();let T=rc(a)?a:ee(a.provide),D=v0(a);const N=qr(),R=1048575&N.providerIndexes,B=N.directiveStart,Q=N.providerIndexes>>20;if(rc(a)||!a.multi){const re=new To(D,p,Sf),Ee=uc(T,l,p?R:R+Q,B);-1===Ee?(jl(el(N,b),m,T),Cy(m,a,l.length),l.push(T),N.directiveStart++,N.directiveEnd++,p&&(N.providerIndexes+=1048576),u.push(re),b.push(re)):(u[Ee]=re,b[Ee]=re)}else{const re=uc(T,l,R+Q,B),Ee=uc(T,l,R,R+Q),nt=Ee>=0&&u[Ee];if(p&&!nt||!p&&!(re>=0&&u[re])){jl(el(N,b),m,T);const ht=function o2(a,l,u,h,p){const m=new To(a,u,Sf);return m.multi=[],m.index=l,m.componentProviders=0,kb(m,p,h&&!u),m}(p?jg:Mx,u.length,p,h,D);!p&&nt&&(u[Ee].providerFactory=ht),Cy(m,a,l.length,0),l.push(T),N.directiveStart++,N.directiveEnd++,p&&(N.providerIndexes+=1048576),u.push(ht),b.push(ht)}else Cy(m,a,re>-1?re:Ee,kb(u[p?Ee:re],D,!p&&h));!p&&h&&nt&&u[Ee].componentProviders++}}}function Cy(a,l,u,h){const p=rc(l),m=function S_(a){return!!a.useClass}(l);if(p||m){const D=(m?ee(l.useClass):l).prototype.ngOnDestroy;if(D){const N=a.destroyHooks||(a.destroyHooks=[]);if(!p&&l.multi){const R=N.indexOf(u);-1===R?N.push(u,[h,D]):N[R+1].push(h,D)}else N.push(u,D)}}}function kb(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function uc(a,l,u,h){for(let p=u;p<h;p++)if(l[p]===a)return p;return-1}function Mx(a,l,u,h){return Ob(this.multi,[])}function jg(a,l,u,h){const p=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,T=Ss(u,u[it],this.providerFactory.index,h);m=T.slice(0,b),Ob(p,m);for(let D=b;D<T.length;D++)m.push(T[D])}else m=[],Ob(p,m);return m}function Ob(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function Rb(a,l=[]){return u=>{u.providersResolver=(h,p)=>function x1(a,l,u){const h=sn();if(h.firstCreatePass){const p=Ai(a);xb(u,h.data,h.blueprint,p,!0),xb(l,h.data,h.blueprint,p,!1)}}(h,p?p(a):a,l)}}class Vf{}class Mb{}function Px(a,l){return new Ty(a,l??null)}class Ty extends Vf{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new H_(this);const h=Xr(l);this._bootstrapComponents=cl(h.bootstrap),this._r3Injector=k0(l,u,[{provide:Vf,useValue:this},{provide:bf,useValue:this.componentFactoryResolver}],ye(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class Pb extends Mb{constructor(l){super(),this.moduleType=l}create(l){return new Ty(this.moduleType,l)}}class k1 extends Vf{constructor(l,u,h){super(),this.componentFactoryResolver=new H_(this),this.instance=null;const p=new AT([...l,{provide:Vf,useValue:this},{provide:bf,useValue:this.componentFactoryResolver}],u||A_(),h,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function Fb(a,l,u=null){return new k1(a,l,u).injector}let dc=(()=>{class a{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=_f(0,u.type),p=h.length>0?Fb([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,p)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=Je({token:a,providedIn:"environment",factory:()=>new a($(Pd))}),a})();function O1(a){a.getStandaloneInjector=l=>l.get(dc).getOrCreateStandaloneInjector(a)}function Bb(a,l,u,h){return H1(we(),gr(),a,l,u,h)}function Su(a,l,u,h,p){return function jb(a,l,u,h,p,m,b){const T=l+u;return mu(a,T,p,m)?va(a,T+2,b?h.call(b,p,m):h(p,m)):jf(a,T+2)}(we(),gr(),a,l,u,h,p)}function B1(a,l,u,h,p,m){return function $1(a,l,u,h,p,m,b,T){const D=l+u;return function no(a,l,u,h,p){const m=mu(a,l,u,h);return Ri(a,l+2,p)||m}(a,D,p,m,b)?va(a,D+3,T?h.call(T,p,m,b):h(p,m,b)):jf(a,D+3)}(we(),gr(),a,l,u,h,p,m)}function jf(a,l){const u=a[l];return u===Vt?void 0:u}function H1(a,l,u,h,p,m){const b=l+u;return Ri(a,b,p)?va(a,b+1,m?h.call(m,p):h(p)):jf(a,b+1)}function $b(a,l){const u=sn();let h;const p=a+yn;u.firstCreatePass?(h=function $x(a,l){if(l)for(let u=l.length-1;u>=0;u--){const h=l[u];if(a===h.name)return h}}(l,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks??(u.destroyHooks=[])).push(p,h.onDestroy)):h=u.data[p];const m=h.factory||(h.factory=Yo(h.type)),b=Un(Sf);try{const T=Ja(!1),D=m();return Ja(T),function VN(a,l,u,h){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=h}(u,we(),p,D),D}finally{Un(b)}}function qx(a,l,u){const h=a+yn,p=we(),m=ea(p,h);return function Sy(a,l){return a[it].data[l].pure}(p,h)?H1(p,gr(),l,m.transform,u,m):m.transform(u)}function z1(a){return l=>{setTimeout(a,void 0,l)}}const hc=class c2 extends o.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,h){let p=l,m=u||(()=>null),b=h;if(l&&"object"==typeof l){const D=l;p=D.next?.bind(D),m=D.error?.bind(D),b=D.complete?.bind(D)}this.__isAsync&&(m=z1(m),p&&(p=z1(p)),b&&(b=z1(b)));const T=super.subscribe({next:p,error:m,complete:b});return l instanceof te.w0&&l.add(T),T}};function u2(){return this._results[Symbol.iterator]()}class Z1{get changes(){return this._changes||(this._changes=new hc)}constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Z1.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=u2)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const h=this;h.dirty=!1;const p=function Oi(a){return a.flat(Number.POSITIVE_INFINITY)}(l);(this._changesDetected=!function bd(a,l,u){if(a.length!==l.length)return!1;for(let h=0;h<a.length;h++){let p=a[h],m=l[h];if(u&&(p=u(p),m=u(m)),m!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Iy=(()=>{class a{}return a.__NG_ELEMENT_ID__=Ay,a})();const W1=Iy,Zx=class extends W1{constructor(l,u,h){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(l,u){const h=this._declarationTContainer.tView,p=M_(this._declarationLView,h,l,16,null,h.declTNode,null,null,null,null,u||null);p[La]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[Gi];return null!==b&&(p[Gi]=b.createEmbeddedView(h)),_a(h,p,l),new Af(p)}};function Ay(){return Hf(qr(),we())}function Hf(a,l){return 4&a.type?new Zx(l,a,ic(a,l)):null}let Fo=(()=>{class a{}return a.__NG_ELEMENT_ID__=d2,a})();function d2(){return qb(qr(),we())}const Wx=Fo,K1=class extends Wx{constructor(l,u,h){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=h}get element(){return ic(this._hostTNode,this._hostLView)}get injector(){return new ds(this._hostTNode,this._hostLView)}get parentInjector(){const l=qc(this._hostTNode,this._hostLView);if(pd(l)){const u=$c(l,this._hostLView),h=Fl(l);return new ds(u[it].data[h+8],u)}return new ds(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=Y1(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-ri}createEmbeddedView(l,u,h){let p,m;"number"==typeof h?p=h:null!=h&&(p=h.index,m=h.injector);const b=l.createEmbeddedView(u||{},m);return this.insert(b,p),b}createComponent(l,u,h,p,m){const b=l&&!function eu(a){return"function"==typeof a}(l);let T;if(b)T=u;else{const B=u||{};T=B.index,h=B.injector,p=B.projectableNodes,m=B.environmentInjector||B.ngModuleRef}const D=b?l:new Ud(dn(l)),N=h||this.parentInjector;if(!m&&null==D.ngModule){const Q=(b?N:this.parentInjector).get(Pd,null);Q&&(m=Q)}const R=D.create(N,p,void 0,m);return this.insert(R.hostView,T),R}insert(l,u){const h=l._lView,p=h[it];if(function Oc(a){return zi(a[Nn])}(h)){const R=this.indexOf(l);if(-1!==R)this.detach(R);else{const B=h[Nn],Q=new K1(B,B[ir],B[Nn]);Q.detach(Q.indexOf(l))}}const m=this._adjustIndex(u),b=this._lContainer;!function r0(a,l,u,h){const p=ri+h,m=u.length;h>0&&(u[p-1][pi]=l),h<m-ri?(l[pi]=u[p],tu(u,ri+h,l)):(u.push(l),l[pi]=null),l[Nn]=u;const b=l[La];null!==b&&u!==b&&function s0(a,l){const u=a[ni];l[ti]!==l[Nn][Nn][ti]&&(a[Th]=!0),null===u?a[ni]=[l]:u.push(l)}(b,l);const T=l[Gi];null!==T&&T.insertView(a),l[Bt]|=64}(p,h,b,m);const T=No(m,b),D=h[Gt],N=eo(D,b[Ua]);return null!==N&&function t0(a,l,u,h,p,m){h[$i]=p,h[ir]=l,du(a,h,u,1,p,m)}(p,b[ir],D,h,N,T),l.attachToViewContainerRef(),tu(Gb(b),m,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=Y1(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),h=Jp(this._lContainer,u);h&&(Gl(Gb(this._lContainer),u),nf(h[it],h))}detach(l){const u=this._adjustIndex(l,-1),h=Jp(this._lContainer,u);return h&&null!=Gl(Gb(this._lContainer),u)?new Af(h):null}_adjustIndex(l,u=0){return l??this.length+u}};function Y1(a){return a[Wo]}function Gb(a){return a[Wo]||(a[Wo]=[])}function qb(a,l){let u;const h=l[a.index];if(zi(h))u=h;else{let p;if(8&a.type)p=Qn(h);else{const m=l[Gt];p=m.createComment("");const b=or(a,l);ol(m,eo(m,b),p,function sf(a,l){return a.nextSibling(l)}(m,b),!1)}l[a.index]=u=cE(h,l,p,a),B_(l,u)}return new K1(u,a,l)}class $f{constructor(l){this.queryList=l,this.matches=null}clone(){return new $f(this.queryList)}setDirty(){this.queryList.setDirty()}}class pl{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const h=null!==l.contentQueries?l.contentQueries[0]:u.length,p=[];for(let m=0;m<h;m++){const b=u.getByIndex(m);p.push(this.queries[b.indexInDeclarationView].clone())}return new pl(p)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==eD(l,u).matches&&this.queries[u].setDirty()}}class Kx{constructor(l,u,h=null){this.predicate=l,this.flags=u,this.read=h}}class zb{constructor(l=[]){this.queries=l}elementStart(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(l,p);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new zb(u):null}template(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Zb{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new Zb(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const m=h[p];this.matchTNodeWithReadOption(l,u,Q1(u,m)),this.matchTNodeWithReadOption(l,u,oa(u,l,m,!1,!1))}else h===Iy?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,oa(u,l,h,!1,!1))}matchTNodeWithReadOption(l,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===wf||p===Fo||p===Iy&&4&u.type)this.addMatch(u.index,-2);else{const m=oa(u,l,p,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function Q1(a,l){const u=a.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===l)return u[h+1];return null}function X1(a,l,u,h){return-1===u?function J1(a,l){return 11&a.type?ic(a,l):4&a.type?Hf(a,l):null}(l,a):-2===u?function Yx(a,l,u){return u===wf?ic(l,a):u===Iy?Hf(l,a):u===Fo?qb(l,a):void 0}(a,l,h):Ss(a,a[it],u,l)}function Gf(a,l,u,h){const p=l[Gi].queries[h];if(null===p.matches){const m=a.data,b=u.matches,T=[];for(let D=0;D<b.length;D+=2){const N=b[D];T.push(N<0?null:X1(l,m[N],b[D+1],u.metadata.read))}p.matches=T}return p.matches}function Cr(a,l,u,h){const p=a.queries.getByIndex(u),m=p.matches;if(null!==m){const b=Gf(a,l,p,u);for(let T=0;T<m.length;T+=2){const D=m[T];if(D>0)h.push(b[T/2]);else{const N=m[T+1],R=l[-D];for(let B=ri;B<R.length;B++){const Q=R[B];Q[La]===Q[Nn]&&Cr(Q[it],Q,N,h)}if(null!==R[ni]){const B=R[ni];for(let Q=0;Q<B.length;Q++){const re=B[Q];Cr(re[it],re,N,h)}}}}}return h}function Ny(a){const l=we(),u=sn(),h=kh();dd(h+1);const p=eD(u,h);if(a.dirty&&function Sl(a){return 4==(4&a[Bt])}(l)===(2==(2&p.metadata.flags))){if(null===p.matches)a.reset([]);else{const m=p.crossesNgTemplate?Cr(u,l,h,[]):Gf(u,l,p,h);a.reset(m,dg),a.notifyOnChanges()}return!0}return!1}function xy(a,l,u){const h=sn();h.firstCreatePass&&(Qb(h,new Kx(a,l,u),-1),2==(2&l)&&(h.staticViewQueries=!0)),Yb(h,we(),l)}function Gg(a,l,u,h){const p=sn();if(p.firstCreatePass){const m=qr();Qb(p,new Kx(l,u,h),m.index),function Qx(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(p,a),2==(2&u)&&(p.staticContentQueries=!0)}Yb(p,we(),u)}function Wb(){return function Kb(a,l){return a[Gi].queries[l].queryList}(we(),kh())}function Yb(a,l,u){const h=new Z1(4==(4&u));dN(a,l,h,h.destroy),null===l[Gi]&&(l[Gi]=new pl),l[Gi].queries.push(new $f(h))}function Qb(a,l,u){null===a.queries&&(a.queries=new zb),a.queries.track(new Zb(l,u))}function eD(a,l){return a.queries.getByIndex(l)}function tD(a,l){return Hf(a,l)}function rD(a){return!!Xr(a)}function Py(...a){}const Fi=new rn("Application Initializer");let Fy=(()=>{class a{constructor(u){this.appInits=u,this.resolve=Py,this.reject=Py,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const m=this.appInits[p]();if(K0(m))u.push(m);else if(vu(m)){const b=new Promise((T,D)=>{m.subscribe({complete:T,error:D})});u.push(b)}}Promise.all(u).then(()=>{h()}).catch(p=>{this.reject(p)}),0===u.length&&h(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)($(Fi,8))},a.\u0275prov=Je({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const nw=new rn("AppId",{providedIn:"root",factory:function pD(){return`${rw()}${rw()}${rw()}`}});function rw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gD=new rn("Platform Initializer"),mD=new rn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),gk=new rn("AnimationModuleType");let mk=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Je({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const Ly=new rn("LocaleId",{providedIn:"root",factory:()=>Z(Ly,yt.Optional|yt.SkipSelf)||function _k(){return typeof $localize<"u"&&$localize.locale||Zd}()}),Uy=new rn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class vk{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let _D=(()=>{class a{compileModuleSync(u){return new Pb(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=cl(Xr(u).declarations).reduce((b,T)=>{const D=dn(T);return D&&b.push(new Ud(D)),b},[]);return new vk(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Je({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Iu=(()=>Promise.resolve(0))();function th(a){typeof Zone>"u"?Iu.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class di{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hc(!1),this.onMicrotaskEmpty=new hc(!1),this.onStable=new hc(!1),this.onError=new hc(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function vD(){let a=_n.requestAnimationFrame,l=_n.cancelAnimationFrame;if(typeof Zone<"u"&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function Ot(a){const l=()=>{!function bD(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(_n,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,wD(a),a.isCheckStableRunning=!0,lw(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),wD(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,m,b,T)=>{try{return wk(a),u.invokeTask(p,m,b,T)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||a.shouldCoalesceRunChangeDetection)&&l(),Ck(a)}},onInvoke:(u,h,p,m,b,T,D)=>{try{return wk(a),u.invoke(p,m,b,T,D)}finally{a.shouldCoalesceRunChangeDetection&&l(),Ck(a)}},onHasTask:(u,h,p,m)=>{u.hasTask(p,m),h===p&&("microTask"==m.change?(a._hasPendingMicrotasks=m.microTask,wD(a),lw(a)):"macroTask"==m.change&&(a.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,p,m)=>(u.handleError(p,m),a.runOutsideAngular(()=>a.onError.emit(m)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!di.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(di.isInAngularZone())throw new be(909,!1)}run(l,u,h){return this._inner.run(l,u,h)}runTask(l,u,h,p){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+p,l,aw,Py,Py);try{return m.runTask(b,u,h)}finally{m.cancelTask(b)}}runGuarded(l,u,h){return this._inner.runGuarded(l,u,h)}runOutsideAngular(l){return this._outer.run(l)}}const aw={};function lw(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function wD(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function wk(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function Ck(a){a._nesting--,lw(a)}class E2{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hc,this.onMicrotaskEmpty=new hc,this.onStable=new hc,this.onError=new hc}run(l,u,h){return l.apply(u,h)}runGuarded(l,u,h){return l.apply(u,h)}runOutsideAngular(l){return l()}runTask(l,u,h,p){return l.apply(u,h)}}const Tk=new rn(""),Ek=new rn("");let cw,D2=(()=>{class a{constructor(u,h,p){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,cw||(function Sk(a){cw=a}(p),p.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{di.assertNotInAngularZone(),th(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())th(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,p){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:p})}whenStable(u,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,p){return[]}}return a.\u0275fac=function(u){return new(u||a)($(di),$(Dk),$(Ek))},a.\u0275prov=Je({token:a,factory:a.\u0275fac}),a})(),Dk=(()=>{class a{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return cw?.findTestabilityInTree(this,u,h)??null}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Je({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const fc=!1;let gl=null;const CD=new rn("AllowMultipleToken"),TD=new rn("PlatformDestroyListeners"),Ik=new rn("appBootstrapListener");class xk{constructor(l,u){this.name=l,this.token=u}}function DD(a,l,u=[]){const h=`Platform: ${l}`,p=new rn(h);return(m=[])=>{let b=AD();if(!b||b.injector.get(CD,!1)){const T=[...u,...m,{provide:p,useValue:!0}];a?a(T):function kk(a){if(gl&&!gl.get(CD,!1))throw new be(400,!1);gl=a;const l=a.get(Mk);(function ED(a){const l=a.get(gD,null);l&&l.forEach(u=>u())})(a)}(function Rk(a=[],l){return Tf.create({name:l,providers:[{provide:gu,useValue:"platform"},{provide:TD,useValue:new Set([()=>gl=null])},...a]})}(T,h))}return function SD(a){const l=AD();if(!l)throw new be(401,!1);return l}()}}function AD(){return gl?.get(Mk)??null}let Mk=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const p=function Fk(a,l){let u;return u="noop"===a?new E2:("zone.js"===a?void 0:a)||new di(l),u}(h?.ngZone,function Pk(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(h)),m=[{provide:di,useValue:p}];return p.run(()=>{const b=Tf.create({providers:m,parent:this.injector,name:u.moduleType.name}),T=u.create(b),D=T.injector.get(hg,null);if(!D)throw new be(402,!1);return p.runOutsideAngular(()=>{const N=p.onError.subscribe({next:R=>{D.handleError(R)}});T.onDestroy(()=>{Zf(this._modules,T),N.unsubscribe()})}),function ND(a,l,u){try{const h=u();return K0(h)?h.catch(p=>{throw l.runOutsideAngular(()=>a.handleError(p)),p}):h}catch(h){throw l.runOutsideAngular(()=>a.handleError(h)),h}}(D,p,()=>{const N=T.injector.get(Fy);return N.runInitializers(),N.donePromise.then(()=>(Ki(T.injector.get(Ly,Zd)||Zd),this._moduleDoBootstrap(T),T))})})}bootstrapModule(u,h=[]){const p=uw({},h);return function Ak(a,l,u){const h=new Pb(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,p))}_moduleDoBootstrap(u){const h=u.injector.get(Yi);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new be(-403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(TD,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)($(Tf))},a.\u0275prov=Je({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function uw(a,l){return Array.isArray(l)?l.reduce(uw,a):{...a,...l}}let Yi=(()=>{class a{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,h,p){this._zone=u,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new L.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),b=new L.y(T=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{di.assertNotInAngularZone(),th(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{di.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{D.unsubscribe(),N.unsubscribe()}});this.isStable=(0,le.T)(m,b.pipe((0,oe.B)()))}bootstrap(u,h){const p=u instanceof xT;if(!this._injector.get(Fy).done){!p&&js(u);throw new be(405,fc)}let b;b=p?u:this._injector.get(bf).resolveComponentFactory(u),this.componentTypes.push(b.componentType);const T=function Nk(a){return a.isBoundToModule}(b)?void 0:this._injector.get(Vf),N=b.create(Tf.NULL,[],h||b.selector,T),R=N.location.nativeElement,B=N.injector.get(Tk,null);return B?.registerApplication(R),N.onDestroy(()=>{this.detachView(N.hostView),Zf(this.components,N),B?.unregisterApplication(R)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;Zf(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const h=this._injector.get(Ik,[]);h.push(...this._bootstrapListeners),h.forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Zf(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new be(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(u){return new(u||a)($(di),$(Pd),$(hg))},a.\u0275prov=Je({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Zf(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}function Uk(){return!1}let Bk=(()=>{class a{}return a.__NG_ELEMENT_ID__=Vk,a})();function Vk(a){return function jk(a,l,u){if(us(a)&&!u){const h=pr(a.index,l);return new Af(h,h)}return 47&a.type?new Af(l[ti],l):null}(qr(),we(),16==(16&a))}class $k{constructor(){}supports(l){return Vd(l)}create(l){return new Gk(l)}}const rh=(a,l)=>l;class Gk{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||rh}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,h=this._removalsHead,p=0,m=null;for(;u||h;){const b=!h||u&&u.currentIndex<PD(h,p,m)?u:h,T=PD(b,p,m),D=b.currentIndex;if(b===h)p--,h=h._nextRemoved;else if(u=u._next,null==b.previousIndex)p++;else{m||(m=[]);const N=T-p,R=D-p;if(N!=R){for(let Q=0;Q<N;Q++){const re=Q<m.length?m[Q]:m[Q]=0,Ee=re+Q;R<=Ee&&Ee<N&&(m[Q]=re+1)}m[b.previousIndex]=R-N}}T!==D&&l(b,T,D)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Vd(l))throw new be(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let p,m,b,u=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let T=0;T<this.length;T++)m=l[T],b=this._trackByFn(T,m),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,m,b,T)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,b,T),h=!0),u=u._next}else p=0,function Tg(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[Symbol.iterator]();let h;for(;!(h=u.next()).done;)l(h.value)}}(l,T=>{b=this._trackByFn(p,T),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,T,b,p)),Object.is(u.item,T)||this._addIdentityChange(u,T)):(u=this._mismatch(u,T,b,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,h,p){let m;return null===l?m=this._itTail:(m=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,m,p)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,m,p)):l=this._addAfter(new qk(u,h),m,p),l}_verifyReinsertion(l,u,h,p){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?l=this._reinsertAfter(m,l._prev,p):l.currentIndex!=p&&(l.currentIndex=p,this._addToMoves(l,p)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const p=l._prevRemoved,m=l._nextRemoved;return null===p?this._removalsHead=m:p._nextRemoved=m,null===m?this._removalsTail=p:m._prevRemoved=p,this._insertAfter(l,u,h),this._addToMoves(l,h),l}_moveAfter(l,u,h){return this._unlink(l),this._insertAfter(l,u,h),this._addToMoves(l,h),l}_addAfter(l,u,h){return this._insertAfter(l,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,h){const p=null===u?this._itHead:u._next;return l._next=p,l._prev=u,null===p?this._itTail=l:p._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new MD),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,h=l._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new MD),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class qk{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class zk{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const u=l._prevDup,h=l._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class MD{constructor(){this.map=new Map}put(l){const u=l.trackById;let h=this.map.get(u);h||(h=new zk,this.map.set(u,h)),h.add(l)}get(l,u){const p=this.map.get(l);return p?p.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function PD(a,l,u){const h=a.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+l+p}class FD{constructor(){}supports(l){return l instanceof Map||z_(l)}create(){return new P2}}class P2{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||z_(l)))throw new be(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const h=l._prev;return u._next=l,u._prev=h,l._prev=u,h&&(h._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const p=this._records.get(l);this._maybeAddToChanges(p,u);const m=p._prev,b=p._next;return m&&(m._next=b),b&&(b._prev=m),p._next=null,p._prev=null,p}const h=new LD(l);return this._records.set(l,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(h=>u(l[h],h))}}class LD{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Yg(){return new mw([new $k])}let mw=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(null!=h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||Yg()),deps:[[a,new S,new iu]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(null!=h)return h;throw new be(901,!1)}}return a.\u0275prov=Je({token:a,providedIn:"root",factory:Yg}),a})();function wi(){return new $y([new FD])}let $y=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||wi()),deps:[[a,new S,new iu]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(h)return h;throw new be(901,!1)}}return a.\u0275prov=Je({token:a,providedIn:"root",factory:wi}),a})();const UD=DD(null,"core",[]);let ih=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)($(Yi))},a.\u0275mod=Pa({type:a}),a.\u0275inj=Dt({}),a})();function Wf(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}function Zk(a,l){const u=dn(a),h=l.elementInjector||A_();return new Ud(u).create(h,l.projectableNodes,l.hostElement,l.environmentInjector)}},3942:(mt,Ae,U)=>{U.d(Ae,{Z:()=>Qe});var o=U(2090),te=U(4859),L=U(9681),le=U(1877);class oe{constructor(be,Me){this._delegate=be,this.firebase=Me,(0,L._addComponent)(be,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this._delegate.automaticDataCollectionEnabled=be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(be=>{this._delegate.checkDestroyed(),be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(be,Me=L._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const $e=this._delegate.container.getProvider(be);return!$e.isInitialized()&&"EXPLICIT"===(null===(Oe=$e.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&$e.initialize(),$e.getImmediate({identifier:Me})}_removeServiceInstance(be,Me=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(be).clearInstance(Me)}_addComponent(be){(0,L._addComponent)(this._delegate,be)}_addOrOverwriteComponent(be){(0,L._addOrOverwriteComponent)(this._delegate,be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function _e(){const ut=function ye(ut){const be={},Me={__esModule:!0,initializeApp:function xe(Ve,G={}){const De=L.initializeApp(Ve,G);if((0,o.r3)(be,De.name))return be[De.name];const We=new ut(De,Me);return be[De.name]=We,We},app:$e,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Pe(Ve){const G=Ve.name,De=G.replace("-compat","");if(L._registerComponent(Ve)&&"PUBLIC"===Ve.type){const We=(et=$e())=>{if("function"!=typeof et[De])throw Ce.create("invalid-app-argument",{appName:G});return et[De]()};void 0!==Ve.serviceProps&&(0,o.ZB)(We,Ve.serviceProps),Me[De]=We,ut.prototype[De]=function(...et){return this._getService.bind(this,G).apply(this,Ve.multipleInstances?et:[])}}return"PUBLIC"===Ve.type?Me[De]:null},removeApp:function Oe(Ve){delete be[Ve]},useAsService:function Ze(Ve,G){return"serverAuth"===G?null:G},modularAPIs:L}};function $e(Ve){if(!(0,o.r3)(be,Ve=Ve||L._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:Ve});return be[Ve]}return Me.default=Me,Object.defineProperty(Me,"apps",{get:function Se(){return Object.keys(be).map(Ve=>be[Ve])}}),$e.App=ut,Me}(oe);return ut.INTERNAL=Object.assign(Object.assign({},ut.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function be(Me){(0,o.ZB)(ut,Me)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),ut}(),q=new le.Yd("@firebase/app-compat");if((0,o.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ut=self.firebase.SDK_VERSION;ut&&ut.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Qe=z;!function ke(ut){(0,L.registerVersion)("@firebase/app-compat","0.1.32",ut)}()},9681:(mt,Ae,U)=>{U.r(Ae),U.d(Ae,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>hr,_DEFAULT_ENTRY_NAME:()=>ae,_addComponent:()=>Ge,_addOrOverwriteComponent:()=>He,_apps:()=>fe,_clearComponents:()=>Dt,_components:()=>se,_getProvider:()=>Je,_registerComponent:()=>Ct,_removeServiceInstance:()=>Kt,deleteApp:()=>Di,getApp:()=>Rn,getApps:()=>$n,initializeApp:()=>Nr,onLog:()=>as,registerVersion:()=>yt,setLogLevel:()=>Bs});var o=U(5861),te=U(4859),L=U(1877),le=U(2090),oe=U(8766);class ie{constructor(Z){this.container=Z}getPlatformInfoString(){return this.container.getProviders().map(K=>{if(function Ce(H){return"VERSION"===H.getComponent()?.type}(K)){const Ne=K.getImmediate();return`${Ne.library}/${Ne.version}`}return null}).filter(K=>K).join(" ")}}const ye="@firebase/app",z=new L.Yd("@firebase/app"),ae="[DEFAULT]",pe={[ye]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fe=new Map,se=new Map;function Ge(H,Z){try{H.container.addComponent(Z)}catch(K){z.debug(`Component ${Z.name} failed to register with FirebaseApp ${H.name}`,K)}}function He(H,Z){H.container.addOrOverwriteComponent(Z)}function Ct(H){const Z=H.name;if(se.has(Z))return z.debug(`There were multiple attempts to register component ${Z}.`),!1;se.set(Z,H);for(const K of fe.values())Ge(K,H);return!0}function Je(H,Z){const K=H.container.getProvider("heartbeat").getImmediate({optional:!0});return K&&K.triggerHeartbeat(),H.container.getProvider(Z)}function Kt(H,Z,K=ae){Je(H,Z).clearInstance(K)}function Dt(){se.clear()}const ln=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class nn{constructor(Z,K,Ne){this._isDeleted=!1,this._options=Object.assign({},Z),this._config=Object.assign({},K),this._name=K.name,this._automaticDataCollectionEnabled=K.automaticDataCollectionEnabled,this._container=Ne,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this.checkDestroyed(),this._automaticDataCollectionEnabled=Z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Z){this._isDeleted=Z}checkDestroyed(){if(this.isDeleted)throw ln.create("app-deleted",{appName:this._name})}}const hr="9.9.3";function Nr(H,Z={}){"object"!=typeof Z&&(Z={name:Z});const K=Object.assign({name:ae,automaticDataCollectionEnabled:!1},Z),Ne=K.name;if("string"!=typeof Ne||!Ne)throw ln.create("bad-app-name",{appName:String(Ne)});const Ye=fe.get(Ne);if(Ye){if((0,le.vZ)(H,Ye.options)&&(0,le.vZ)(K,Ye.config))return Ye;throw ln.create("duplicate-app",{appName:Ne})}const vt=new te.H0(Ne);for(const fn of se.values())vt.addComponent(fn);const Tn=new nn(H,K,vt);return fe.set(Ne,Tn),Tn}function Rn(H=ae){const Z=fe.get(H);if(!Z)throw ln.create("no-app",{appName:H});return Z}function $n(){return Array.from(fe.values())}function Di(H){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,o.Z)(function*(H){const Z=H.name;fe.has(Z)&&(fe.delete(Z),yield Promise.all(H.container.getProviders().map(K=>K.delete())),H.isDeleted=!0)})).apply(this,arguments)}function yt(H,Z,K){var Ne;let Ye=null!==(Ne=pe[H])&&void 0!==Ne?Ne:H;K&&(Ye+=`-${K}`);const vt=Ye.match(/\s|\//),Tn=Z.match(/\s|\//);if(vt||Tn){const fn=[`Unable to register library "${Ye}" with version "${Z}":`];return vt&&fn.push(`library name "${Ye}" contains illegal characters (whitespace or "/")`),vt&&Tn&&fn.push("and"),Tn&&fn.push(`version name "${Z}" contains illegal characters (whitespace or "/")`),void z.warn(fn.join(" "))}Ct(new te.wA(`${Ye}-version`,()=>({library:Ye,version:Z}),"VERSION"))}function as(H,Z){if(null!==H&&"function"!=typeof H)throw ln.create("invalid-log-argument");(0,L.Am)(H,Z)}function Bs(H){(0,L.Ub)(H)}const Un="firebase-heartbeat-database",Jr=1,Hi="firebase-heartbeat-store";let _n=null;function Cn(){return _n||(_n=(0,oe.X3)(Un,Jr,{upgrade:(H,Z)=>{0===Z&&H.createObjectStore(Hi)}}).catch(H=>{throw ln.create("idb-open",{originalErrorMessage:H.message})})),_n}function xt(){return(xt=(0,o.Z)(function*(H){var Z;try{return(yield Cn()).transaction(Hi).objectStore(Hi).get(Gn(H))}catch(K){if(K instanceof le.ZR)z.warn(K.message);else{const Ne=ln.create("idb-get",{originalErrorMessage:null===(Z=K)||void 0===Z?void 0:Z.message});z.warn(Ne.message)}}})).apply(this,arguments)}function ls(H,Z){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,o.Z)(function*(H,Z){var K;try{const Ye=(yield Cn()).transaction(Hi,"readwrite");return yield Ye.objectStore(Hi).put(Z,Gn(H)),Ye.done}catch(Ne){if(Ne instanceof le.ZR)z.warn(Ne.message);else{const Ye=ln.create("idb-set",{originalErrorMessage:null===(K=Ne)||void 0===K?void 0:K.message});z.warn(Ye.message)}}})).apply(this,arguments)}function Gn(H){return`${H.name}!${H.options.appId}`}class Oa{constructor(Z){this.container=Z,this._heartbeatsCache=null;const K=this.container.getProvider("app").getImmediate();this._storage=new Xt(K),this._heartbeatsCachePromise=this._storage.read().then(Ne=>(this._heartbeatsCache=Ne,Ne))}triggerHeartbeat(){var Z=this;return(0,o.Z)(function*(){const Ne=Z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ye=hn();if(null===Z._heartbeatsCache&&(Z._heartbeatsCache=yield Z._heartbeatsCachePromise),Z._heartbeatsCache.lastSentHeartbeatDate!==Ye&&!Z._heartbeatsCache.heartbeats.some(vt=>vt.date===Ye))return Z._heartbeatsCache.heartbeats.push({date:Ye,agent:Ne}),Z._heartbeatsCache.heartbeats=Z._heartbeatsCache.heartbeats.filter(vt=>{const Tn=new Date(vt.date).valueOf();return Date.now()-Tn<=2592e6}),Z._storage.overwrite(Z._heartbeatsCache)})()}getHeartbeatsHeader(){var Z=this;return(0,o.Z)(function*(){if(null===Z._heartbeatsCache&&(yield Z._heartbeatsCachePromise),null===Z._heartbeatsCache||0===Z._heartbeatsCache.heartbeats.length)return"";const K=hn(),{heartbeatsToSend:Ne,unsentEntries:Ye}=function Si(H,Z=1024){const K=[];let Ne=H.slice();for(const Ye of H){const vt=K.find(Tn=>Tn.agent===Ye.agent);if(vt){if(vt.dates.push(Ye.date),J(K)>Z){vt.dates.pop();break}}else if(K.push({agent:Ye.agent,dates:[Ye.date]}),J(K)>Z){K.pop();break}Ne=Ne.slice(1)}return{heartbeatsToSend:K,unsentEntries:Ne}}(Z._heartbeatsCache.heartbeats),vt=(0,le.L)(JSON.stringify({version:2,heartbeats:Ne}));return Z._heartbeatsCache.lastSentHeartbeatDate=K,Ye.length>0?(Z._heartbeatsCache.heartbeats=Ye,yield Z._storage.overwrite(Z._heartbeatsCache)):(Z._heartbeatsCache.heartbeats=[],Z._storage.overwrite(Z._heartbeatsCache)),vt})()}}function hn(){return(new Date).toISOString().substring(0,10)}class Xt{constructor(Z){this.app=Z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,o.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Z=this;return(0,o.Z)(function*(){return(yield Z._canUseIndexedDBPromise)&&(yield function Tt(H){return xt.apply(this,arguments)}(Z.app))||{heartbeats:[]}})()}overwrite(Z){var K=this;return(0,o.Z)(function*(){var Ne;if(yield K._canUseIndexedDBPromise){const vt=yield K.read();return ls(K.app,{lastSentHeartbeatDate:null!==(Ne=Z.lastSentHeartbeatDate)&&void 0!==Ne?Ne:vt.lastSentHeartbeatDate,heartbeats:Z.heartbeats})}})()}add(Z){var K=this;return(0,o.Z)(function*(){var Ne;if(yield K._canUseIndexedDBPromise){const vt=yield K.read();return ls(K.app,{lastSentHeartbeatDate:null!==(Ne=Z.lastSentHeartbeatDate)&&void 0!==Ne?Ne:vt.lastSentHeartbeatDate,heartbeats:[...vt.heartbeats,...Z.heartbeats]})}})()}}function J(H){return(0,le.L)(JSON.stringify({version:2,heartbeats:H})).length}!function $(H){Ct(new te.wA("platform-logger",Z=>new ie(Z),"PRIVATE")),Ct(new te.wA("heartbeat",Z=>new Oa(Z),"PRIVATE")),yt(ye,"0.7.31",H),yt(ye,"0.7.31","esm2017"),yt("fire-js","")}("")},4859:(mt,Ae,U)=>{U.d(Ae,{H0:()=>ye,wA:()=>L,zt:()=>oe});var o=U(5861),te=U(2090);class L{constructor(z,q,ee){this.name=z,this.instanceFactory=q,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const le="[DEFAULT]";class oe{constructor(z,q){this.name=z,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const q=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(q)){const ee=new te.BH;if(this.instancesDeferred.set(q,ee),this.isInitialized(q)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:q});Ke&&ee.resolve(Ke)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(z){var q;const ee=this.normalizeInstanceIdentifier(z?.identifier),Ke=null!==(q=z?.optional)&&void 0!==q&&q;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(ke){if(Ke)return null;throw ke}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function Ce(_e){return"EAGER"===_e.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[q,ee]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(q);try{const ke=this.getOrInitializeService({instanceIdentifier:Ke});ee.resolve(ke)}catch{}}}}clearInstance(z=le){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,o.Z)(function*(){const q=Array.from(z.instances.values());yield Promise.all([...q.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...q.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=le){return this.instances.has(z)}getOptions(z=le){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:q={}}=z,ee=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:ee,options:q});for(const[ke,Qe]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(ke)&&Qe.resolve(Ke);return Ke}onInit(z,q){var ee;const Ke=this.normalizeInstanceIdentifier(q),ke=null!==(ee=this.onInitCallbacks.get(Ke))&&void 0!==ee?ee:new Set;ke.add(z),this.onInitCallbacks.set(Ke,ke);const Qe=this.instances.get(Ke);return Qe&&z(Qe,Ke),()=>{ke.delete(z)}}invokeOnInitCallbacks(z,q){const ee=this.onInitCallbacks.get(q);if(ee)for(const Ke of ee)try{Ke(z,q)}catch{}}getOrInitializeService({instanceIdentifier:z,options:q={}}){let ee=this.instances.get(z);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=z,_e===le?void 0:_e),options:q}),this.instances.set(z,ee),this.instancesOptions.set(z,q),this.invokeOnInitCallbacks(ee,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,ee)}catch{}var _e;return ee||null}normalizeInstanceIdentifier(z=le){return this.component?this.component.multipleInstances?z:le:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ye{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const q=this.getProvider(z.name);if(q.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);q.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const q=new oe(z,this);return this.providers.set(z,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(mt,Ae,U)=>{U.d(Ae,{Am:()=>_e,Ub:()=>ye,Yd:()=>Ce,in:()=>te});const o=[];var te=(()=>{return(z=te||(te={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",te;var z})();const L={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},le=te.INFO,oe={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},ie=(z,q,...ee)=>{if(q<z.logLevel)return;const Ke=(new Date).toISOString(),ke=oe[q];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[ke](`[${Ke}]  ${z.name}:`,...ee)};class Ce{constructor(q){this.name=q,this._logLevel=le,this._logHandler=ie,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in te))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?L[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...q),this._logHandler(this,te.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...q),this._logHandler(this,te.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,te.INFO,...q),this._logHandler(this,te.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,te.WARN,...q),this._logHandler(this,te.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...q),this._logHandler(this,te.ERROR,...q)}}function ye(z){o.forEach(q=>{q.setLogLevel(z)})}function _e(z,q){for(const ee of o){let Ke=null;q&&q.level&&(Ke=L[q.level]),ee.userLogHandler=null===z?null:(ke,Qe,...ut)=>{const be=ut.map(Me=>{if(null==Me)return null;if("string"==typeof Me)return Me;if("number"==typeof Me||"boolean"==typeof Me)return Me.toString();if(Me instanceof Error)return Me.message;try{return JSON.stringify(Me)}catch{return null}}).filter(Me=>Me).join(" ");Qe>=(Ke??ke.logLevel)&&z({level:te[Qe].toLowerCase(),message:be,args:ut,type:ke.name})}}}},8766:(mt,Ae,U)=>{U.d(Ae,{Lj:()=>xe,X3:()=>$e});var o=U(5861);const te=(G,De)=>De.some(We=>G instanceof We);let L,le;const Ce=new WeakMap,ye=new WeakMap,_e=new WeakMap,z=new WeakMap,q=new WeakMap;let ke={get(G,De,We){if(G instanceof IDBTransaction){if("done"===De)return ye.get(G);if("objectStoreNames"===De)return G.objectStoreNames||_e.get(G);if("store"===De)return We.objectStoreNames[1]?void 0:We.objectStore(We.objectStoreNames[0])}return Me(G[De])},set:(G,De,We)=>(G[De]=We,!0),has:(G,De)=>G instanceof IDBTransaction&&("done"===De||"store"===De)||De in G};function be(G){return"function"==typeof G?function ut(G){return G!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(G)?function(...De){return G.apply(Oe(this),De),Me(Ce.get(this))}:function(...De){return Me(G.apply(Oe(this),De))}:function(De,...We){const et=G.call(Oe(this),De,...We);return _e.set(et,De.sort?De.sort():[De]),Me(et)}}(G):(G instanceof IDBTransaction&&function Ke(G){if(ye.has(G))return;const De=new Promise((We,et)=>{const _t=()=>{G.removeEventListener("complete",tt),G.removeEventListener("error",An),G.removeEventListener("abort",An)},tt=()=>{We(),_t()},An=()=>{et(G.error||new DOMException("AbortError","AbortError")),_t()};G.addEventListener("complete",tt),G.addEventListener("error",An),G.addEventListener("abort",An)});ye.set(G,De)}(G),te(G,function oe(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(G,ke):G)}function Me(G){if(G instanceof IDBRequest)return function ee(G){const De=new Promise((We,et)=>{const _t=()=>{G.removeEventListener("success",tt),G.removeEventListener("error",An)},tt=()=>{We(Me(G.result)),_t()},An=()=>{et(G.error),_t()};G.addEventListener("success",tt),G.addEventListener("error",An)});return De.then(We=>{We instanceof IDBCursor&&Ce.set(We,G)}).catch(()=>{}),q.set(De,G),De}(G);if(z.has(G))return z.get(G);const De=be(G);return De!==G&&(z.set(G,De),q.set(De,G)),De}const Oe=G=>q.get(G);function $e(G,De,{blocked:We,upgrade:et,blocking:_t,terminated:tt}={}){const An=indexedDB.open(G,De),Ar=Me(An);return et&&An.addEventListener("upgradeneeded",nr=>{et(Me(An.result),nr.oldVersion,nr.newVersion,Me(An.transaction))}),We&&An.addEventListener("blocked",()=>We()),Ar.then(nr=>{tt&&nr.addEventListener("close",()=>tt()),_t&&nr.addEventListener("versionchange",()=>_t())}).catch(()=>{}),Ar}function xe(G,{blocked:De}={}){const We=indexedDB.deleteDatabase(G);return De&&We.addEventListener("blocked",()=>De()),Me(We).then(()=>{})}const Se=["get","getKey","getAll","getAllKeys","count"],Pe=["put","add","delete","clear"],Ze=new Map;function Ve(G,De){if(!(G instanceof IDBDatabase)||De in G||"string"!=typeof De)return;if(Ze.get(De))return Ze.get(De);const We=De.replace(/FromIndex$/,""),et=De!==We,_t=Pe.includes(We);if(!(We in(et?IDBIndex:IDBObjectStore).prototype)||!_t&&!Se.includes(We))return;const tt=function(){var An=(0,o.Z)(function*(Ar,...nr){const os=this.transaction(Ar,_t?"readwrite":"readonly");let ae=os.store;return et&&(ae=ae.index(nr.shift())),(yield Promise.all([ae[We](...nr),_t&&os.done]))[0]});return function(nr){return An.apply(this,arguments)}}();return Ze.set(De,tt),tt}!function Qe(G){ke=G(ke)}(G=>({...G,get:(De,We,et)=>Ve(De,We)||G.get(De,We,et),has:(De,We)=>!!Ve(De,We)||G.has(De,We)}))},5861:(mt,Ae,U)=>{function o(L,le,oe,ie,Ce,ye,_e){try{var z=L[ye](_e),q=z.value}catch(ee){return void oe(ee)}z.done?le(q):Promise.resolve(q).then(ie,Ce)}function te(L){return function(){var le=this,oe=arguments;return new Promise(function(ie,Ce){var ye=L.apply(le,oe);function _e(q){o(ye,ie,Ce,_e,z,"next",q)}function z(q){o(ye,ie,Ce,_e,z,"throw",q)}_e(void 0)})}}U.d(Ae,{Z:()=>te})},7582:(mt,Ae,U)=>{function le(ae,pe){var fe={};for(var se in ae)Object.prototype.hasOwnProperty.call(ae,se)&&pe.indexOf(se)<0&&(fe[se]=ae[se]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var Ge=0;for(se=Object.getOwnPropertySymbols(ae);Ge<se.length;Ge++)pe.indexOf(se[Ge])<0&&Object.prototype.propertyIsEnumerable.call(ae,se[Ge])&&(fe[se[Ge]]=ae[se[Ge]])}return fe}function ee(ae,pe,fe,se){return new(fe||(fe=Promise))(function(He,Ct){function Je(Yt){try{Dt(se.next(Yt))}catch(ln){Ct(ln)}}function Kt(Yt){try{Dt(se.throw(Yt))}catch(ln){Ct(ln)}}function Dt(Yt){Yt.done?He(Yt.value):function Ge(He){return He instanceof fe?He:new fe(function(Ct){Ct(He)})}(Yt.value).then(Je,Kt)}Dt((se=se.apply(ae,pe||[])).next())})}function xe(ae){return this instanceof xe?(this.v=ae,this):new xe(ae)}function Se(ae,pe,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ge,se=fe.apply(ae,pe||[]),He=[];return Ge={},Ct("next"),Ct("throw"),Ct("return"),Ge[Symbol.asyncIterator]=function(){return this},Ge;function Ct(nn){se[nn]&&(Ge[nn]=function(hr){return new Promise(function(Nr,Rn){He.push([nn,hr,Nr,Rn])>1||Je(nn,hr)})})}function Je(nn,hr){try{!function Kt(nn){nn.value instanceof xe?Promise.resolve(nn.value.v).then(Dt,Yt):ln(He[0][2],nn)}(se[nn](hr))}catch(Nr){ln(He[0][3],Nr)}}function Dt(nn){Je("next",nn)}function Yt(nn){Je("throw",nn)}function ln(nn,hr){nn(hr),He.shift(),He.length&&Je(He[0][0],He[0][1])}}function Ze(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,pe=ae[Symbol.asyncIterator];return pe?pe.call(ae):(ae=function ut(ae){var pe="function"==typeof Symbol&&Symbol.iterator,fe=pe&&ae[pe],se=0;if(fe)return fe.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&se>=ae.length&&(ae=void 0),{value:ae&&ae[se++],done:!ae}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),fe={},se("next"),se("throw"),se("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function se(He){fe[He]=ae[He]&&function(Ct){return new Promise(function(Je,Kt){!function Ge(He,Ct,Je,Kt){Promise.resolve(Kt).then(function(Dt){He({value:Dt,done:Je})},Ct)}(Je,Kt,(Ct=ae[He](Ct)).done,Ct.value)})}}}U.d(Ae,{FC:()=>Se,KL:()=>Ze,_T:()=>le,mG:()=>ee,qq:()=>xe}),"function"==typeof SuppressedError&&SuppressedError}},mt=>{mt(mt.s=9200)}]);