"use strict";(self.webpackChunkangular_clean_architecture_serverless=self.webpackChunkangular_clean_architecture_serverless||[]).push([[179],{2011:(_t,Ae,U)=>{U.d(Ae,{Dh:()=>ye,GT:()=>ie,cc:()=>Re,hO:()=>Ye,on:()=>q,pX:()=>oe,xv:()=>_e});var s=U(4650),te=U(127),L=U(5813);_t=U.hmd(_t);const le=["ngOnDestroy"],oe=(Oe,xe,Ge,ke={})=>new Proxy(Oe,{get:(Se,Me)=>Ge.runOutsideAngular(()=>{var ze;if(Oe[Me])return!(null===(ze=ke?.spy)||void 0===ze)&&ze.get&&ke.spy.get(Me,Oe[Me]),Oe[Me];if(le.indexOf(Me)>-1)return()=>{};const je=xe.toPromise().then(G=>{const Ee=G&&G[Me];return"function"==typeof Ee?Ee.bind(G):Ee&&Ee.then?Ee.then(Ke=>Ge.run(()=>Ke)):Ge.run(()=>Ee)});return new Proxy(()=>{},{get:(G,Ee)=>je[Ee],apply:(G,Ee,Ke)=>je.then(tt=>{var yt;const nt=tt&&tt(...Ke);return!(null===(yt=ke?.spy)||void 0===yt)&&yt.apply&&ke.spy.apply(Me,Ke,nt),nt})})})}),ie=(Oe,xe)=>{xe.forEach(Ge=>{Object.getOwnPropertyNames(Ge.prototype||Ge).forEach(ke=>{Object.defineProperty(Oe.prototype,ke,Object.getOwnPropertyDescriptor(Ge.prototype||Ge,ke))})})};class Ce{constructor(xe){return xe}}const ye=new s.OlP("angularfire2.app.options"),_e=new s.OlP("angularfire2.app.name");function q(Oe,xe,Ge){const Se="object"==typeof Ge&&Ge||{};Se.name=Se.name||"string"==typeof Ge&&Ge||"[DEFAULT]";const ze=te.Z.apps.filter(je=>je&&je.name===Se.name)[0]||xe.runOutsideAngular(()=>te.Z.initializeApp(Oe,Se));try{JSON.stringify(Oe)!==JSON.stringify(ze.options)&&Z("error",`${ze.name} Firebase App already initialized with different options${_t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ce(ze)}const Z=(Oe,...xe)=>{(0,s.X6Q)()&&typeof console<"u"&&console[Oe](...xe)},ee={provide:Ce,useFactory:q,deps:[ye,s.R0b,[new s.FiY,_e]]};let Ye=(()=>{class Oe{constructor(Ge){te.Z.registerVersion("angularfire",L.q4.full,"core"),te.Z.registerVersion("angularfire",L.q4.full,"app-compat"),te.Z.registerVersion("angular",s.q4F.full,Ge.toString())}static initializeApp(Ge,ke){return{ngModule:Oe,providers:[{provide:ye,useValue:Ge},{provide:_e,useValue:ke}]}}}return Oe.\u0275fac=function(Ge){return new(Ge||Oe)(s.LFG(s.Lbi))},Oe.\u0275mod=s.oAB({type:Oe}),Oe.\u0275inj=s.cJS({providers:[ee]}),Oe})();function Re(Oe,xe,Ge,ke,Se){const[,Me,ze]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===Oe)||[];if(Me)return function Qe(Oe,xe){try{return Oe.toString()===xe.toString()}catch{return Oe===xe}}(Se,ze)||(be("error",`${xe} was already initialized on the ${Ge} Firebase App with different settings.${ut?" You may need to reload as Firebase is not HMR aware.":""}`),be("warn",{is:Se,was:ze})),Me;{const je=ke();return globalThis.\u0275AngularfireInstanceCache.push([Oe,je,Se]),je}}const ut=!!_t.hot,be=(Oe,...xe)=>{(0,s.X6Q)()&&typeof console<"u"&&console[Oe](...xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(_t,Ae,U)=>{U.d(Ae,{q4:()=>ou,iC:()=>zl,fc:()=>zp,HU:()=>br,vb:()=>Ut,JM:()=>Ti});var s=U(4650),te=U(5867),L=U(5861),le=U(9681),oe=U(2090),ie=U(4859),Ce=U(1877),ye=U(8766);const _e="@firebase/installations",q="0.5.12",Z=1e4,ee=`w:${q}`,Ye="FIS_v2",Re="https://firebaseinstallations.googleapis.com/v1",Qe=36e5,xe=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ge(I){return I instanceof oe.ZR&&I.code.includes("request-failed")}function ke({projectId:I}){return`${Re}/projects/${I}/installations`}function Se(I){return{token:I.token,requestStatus:2,expiresIn:tt(I.expiresIn),creationTime:Date.now()}}function Me(I,S){return ze.apply(this,arguments)}function ze(){return(ze=(0,L.Z)(function*(I,S){const j=(yield S.json()).error;return xe.create("request-failed",{requestName:I,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function je({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Ee(I){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,L.Z)(function*(I){const S=yield I();return S.status>=500&&S.status<600?I():S})).apply(this,arguments)}function tt(I){return Number(I.replace("s","000"))}function Rn(){return(Rn=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:S},{fid:R}){const j=ke(I),X=je(I),ce=S.getImmediate({optional:!0});if(ce){const At=yield ce.getHeartbeatsHeader();At&&X.append("x-firebase-client",At)}const et={method:"POST",headers:X,body:JSON.stringify({fid:R,authVersion:Ye,appId:I.appId,sdkVersion:ee})},wt=yield Ee(()=>fetch(j,et));if(wt.ok){const At=yield wt.json();return{fid:At.fid||R,registrationStatus:2,refreshToken:At.refreshToken,authToken:Se(At.authToken)}}throw yield Me("Create Installation",wt)})).apply(this,arguments)}function kr(I){return new Promise(S=>{setTimeout(S,I)})}const cs=/^[cdef][\w-]{21}$/,ae="";function pe(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function fe(I){return function sr(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return cs.test(R)?R:ae}catch{return ae}}function se(I){return`${I.appName}!${I.appId}`}const Ze=new Map;function $e(I,S){const R=se(I);Yt(R,S),function St(I,S){const R=function un(){return!Jt&&"BroadcastChannel"in self&&(Jt=new BroadcastChannel("[Firebase] FID Change"),Jt.onmessage=I=>{Yt(I.data.key,I.data.fid)}),Jt}();R&&R.postMessage({key:I,fid:S}),function rn(){0===Ze.size&&Jt&&(Jt.close(),Jt=null)}()}(R,S)}function Yt(I,S){const R=Ze.get(I);if(R)for(const j of R)j(S)}let Jt=null;const gr="firebase-installations-database",Rr=1,Ln="firebase-installations-store";let qn=null;function Ni(){return qn||(qn=(0,ye.X3)(gr,Rr,{upgrade:(I,S)=>{0===S&&I.createObjectStore(Ln)}})),qn}function Un(I,S){return vt.apply(this,arguments)}function vt(){return(vt=(0,L.Z)(function*(I,S){const R=se(I),X=(yield Ni()).transaction(Ln,"readwrite"),ce=X.objectStore(Ln),ve=yield ce.get(R);return yield ce.put(S,R),yield X.done,(!ve||ve.fid!==S.fid)&&$e(I,S.fid),S})).apply(this,arguments)}function us(I){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,L.Z)(function*(I){const S=se(I),j=(yield Ni()).transaction(Ln,"readwrite");yield j.objectStore(Ln).delete(S),yield j.done})).apply(this,arguments)}function jn(I,S){return ti.apply(this,arguments)}function ti(){return(ti=(0,L.Z)(function*(I,S){const R=se(I),X=(yield Ni()).transaction(Ln,"readwrite"),ce=X.objectStore(Ln),ve=yield ce.get(R),et=S(ve);return void 0===et?yield ce.delete(R):yield ce.put(et,R),yield X.done,et&&(!ve||ve.fid!==et.fid)&&$e(I,et.fid),et})).apply(this,arguments)}function qi(I){return wn.apply(this,arguments)}function wn(){return wn=(0,L.Z)(function*(I){let S;const R=yield jn(I.appConfig,j=>{const X=function Sn(I){return Gr(I||{fid:pe(),registrationStatus:0})}(j),ce=function Et(I,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(xe.create("app-offline"))};const R={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},j=function kt(I,S){return ds.apply(this,arguments)}(I,R);return{installationEntry:R,registrationPromise:j}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Jn(I)}:{installationEntry:S}}(I,X);return S=ce.registrationPromise,ce.installationEntry});return R.fid===ae?{installationEntry:yield S}:{installationEntry:R,registrationPromise:S}}),wn.apply(this,arguments)}function ds(){return ds=(0,L.Z)(function*(I,S){try{const R=yield function nt(I,S){return Rn.apply(this,arguments)}(I,S);return Un(I.appConfig,R)}catch(R){throw Ge(R)&&409===R.customData.serverCode?yield us(I.appConfig):yield Un(I.appConfig,{fid:S.fid,registrationStatus:0}),R}}),ds.apply(this,arguments)}function Jn(I){return zn.apply(this,arguments)}function zn(){return(zn=(0,L.Z)(function*(I){let S=yield js(I.appConfig);for(;1===S.registrationStatus;)yield kr(100),S=yield js(I.appConfig);if(0===S.registrationStatus){const{installationEntry:R,registrationPromise:j}=yield qi(I);return j||R}return S})).apply(this,arguments)}function js(I){return jn(I,S=>{if(!S)throw xe.create("installation-not-found");return Gr(S)})}function Gr(I){return function Ma(I){return 1===I.registrationStatus&&I.registrationTime+Z<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function xi(){return(xi=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:S},R){const j=function en(I,{fid:S}){return`${ke(I)}/${S}/authTokens:generate`}(I,R),X=function G(I,{refreshToken:S}){const R=je(I);return R.append("Authorization",function yt(I){return`${Ye} ${I}`}(S)),R}(I,R),ce=S.getImmediate({optional:!0});if(ce){const At=yield ce.getHeartbeatsHeader();At&&X.append("x-firebase-client",At)}const et={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:ee,appId:I.appId}})},wt=yield Ee(()=>fetch(j,et));if(wt.ok)return Se(yield wt.json());throw yield Me("Generate Auth Token",wt)})).apply(this,arguments)}function Q(I){return $.apply(this,arguments)}function $(){return $=(0,L.Z)(function*(I,S=!1){let R;const j=yield jn(I.appConfig,ce=>{if(!bt(ce))throw xe.create("not-registered");const ve=ce.authToken;if(!S&&function In(I){return 2===I.requestStatus&&!function _n(I){const S=Date.now();return S<I.creationTime||I.creationTime+I.expiresIn<S+Qe}(I)}(ve))return ce;if(1===ve.requestStatus)return R=function H(I,S){return z.apply(this,arguments)}(I,S),ce;{if(!navigator.onLine)throw xe.create("app-offline");const et=function An(I){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:S})}(ce);return R=function Ne(I,S){return Je.apply(this,arguments)}(I,et),et}});return R?yield R:j.authToken}),$.apply(this,arguments)}function z(){return(z=(0,L.Z)(function*(I,S){let R=yield K(I.appConfig);for(;1===R.authToken.requestStatus;)yield kr(100),R=yield K(I.appConfig);const j=R.authToken;return 0===j.requestStatus?Q(I,S):j})).apply(this,arguments)}function K(I){return jn(I,S=>{if(!bt(S))throw xe.create("not-registered");return function Vt(I){return 1===I.requestStatus&&I.requestTime+Z<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Je(){return Je=(0,L.Z)(function*(I,S){try{const R=yield function mn(I,S){return xi.apply(this,arguments)}(I,S),j=Object.assign(Object.assign({},S),{authToken:R});return yield Un(I.appConfig,j),R}catch(R){if(!Ge(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const j=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Un(I.appConfig,j)}else yield us(I.appConfig);throw R}}),Je.apply(this,arguments)}function bt(I){return void 0!==I&&2===I.registrationStatus}function Or(){return(Or=(0,L.Z)(function*(I){const S=I,{installationEntry:R,registrationPromise:j}=yield qi(S);return j?j.catch(console.error):Q(S).catch(console.error),R.fid})).apply(this,arguments)}function vo(){return vo=(0,L.Z)(function*(I,S=!1){const R=I;return yield function Oc(I){return Ts.apply(this,arguments)}(R),(yield Q(R,S)).token}),vo.apply(this,arguments)}function Ts(){return(Ts=(0,L.Z)(function*(I){const{registrationPromise:S}=yield qi(I);S&&(yield S)})).apply(this,arguments)}function La(I){return xe.create("missing-app-config-values",{valueName:I})}const Dh="installations",Wn=I=>{const S=I.getProvider("app").getImmediate(),R=function Qu(I){if(!I||!I.options)throw La("App Configuration");if(!I.name)throw La("App Name");const S=["projectId","apiKey","appId"];for(const R of S)if(!I.options[R])throw La(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(S);return{app:S,appConfig:R,heartbeatServiceProvider:(0,le._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Xu=I=>{const S=I.getProvider("app").getImmediate(),R=(0,le._getProvider)(S,Dh).getImmediate();return{getId:()=>function Qn(I){return Or.apply(this,arguments)}(R),getToken:X=>function tn(I){return vo.apply(this,arguments)}(R,X)}};(function pn(){(0,le._registerComponent)(new ie.wA(Dh,Wn,"PUBLIC")),(0,le._registerComponent)(new ie.wA("installations-internal",Xu,"PRIVATE"))})(),(0,le.registerVersion)(_e,q),(0,le.registerVersion)(_e,q,"esm2017");const or="@firebase/remote-config",ri=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Wo{constructor(S,R,j,X){this.client=S,this.storage=R,this.storageCache=j,this.logger=X}isCachedDataFresh(S,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-R,X=j<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${X}.`),X}fetch(S){var R=this;return(0,L.Z)(function*(){const[j,X]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(X&&R.isCachedDataFresh(S.cacheMaxAgeMillis,j))return X;S.eTag=X&&X.eTag;const ce=yield R.client.fetch(S),ve=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ce.status&&ve.push(R.storage.setLastSuccessfulFetchResponse(ce)),yield Promise.all(ve),ce})()}}function Wi(I=navigator){return I.languages&&I.languages[0]||I.language}class Gs{constructor(S,R,j,X,ce,ve){this.firebaseInstallations=S,this.sdkVersion=R,this.namespace=j,this.projectId=X,this.apiKey=ce,this.appId=ve}fetch(S){var R=this;return(0,L.Z)(function*(){var j,X,ce;const[ve,et]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),At=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Lt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Ct={sdk_version:R.sdkVersion,app_instance_id:ve,app_instance_id_token:et,app_id:R.appId,language_code:Wi()},Pr={method:"POST",headers:Lt,body:JSON.stringify(Ct)},wr=fetch(At,Pr),ai=new Promise((Xs,xn)=>{S.signal.addEventListener(()=>{const Kl=new Error("The operation was aborted.");Kl.name="AbortError",xn(Kl)})});let ol;try{yield Promise.race([wr,ai]),ol=yield wr}catch(Xs){let xn="fetch-client-network";throw"AbortError"===(null===(j=Xs)||void 0===j?void 0:j.name)&&(xn="fetch-timeout"),ri.create(xn,{originalErrorMessage:null===(X=Xs)||void 0===X?void 0:X.message})}let la=ol.status;const ks=ol.headers.get("ETag")||void 0;let Io,ur;if(200===ol.status){let Xs;try{Xs=yield ol.json()}catch(xn){throw ri.create("fetch-client-parse",{originalErrorMessage:null===(ce=xn)||void 0===ce?void 0:ce.message})}Io=Xs.entries,ur=Xs.state}if("INSTANCE_STATE_UNSPECIFIED"===ur?la=500:"NO_CHANGE"===ur?la=304:("NO_TEMPLATE"===ur||"EMPTY_CONFIG"===ur)&&(Io={}),304!==la&&200!==la)throw ri.create("fetch-status",{httpStatus:la});return{status:la,eTag:ks,config:Io}})()}}class Ds{constructor(S,R){this.client=S,this.storage=R}fetch(S){var R=this;return(0,L.Z)(function*(){const j=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(S,j)})()}attemptFetch(S,{throttleEndTimeMillis:R,backoffCount:j}){var X=this;return(0,L.Z)(function*(){yield function bi(I,S){return new Promise((R,j)=>{const X=Math.max(S-Date.now(),0),ce=setTimeout(R,X);I.addEventListener(()=>{clearTimeout(ce),j(ri.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,R);try{const ce=yield X.client.fetch(S);return yield X.storage.deleteThrottleMetadata(),ce}catch(ce){if(!function Cn(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ce))throw ce;const ve={throttleEndTimeMillis:Date.now()+(0,oe.$s)(j),backoffCount:j+1};return yield X.storage.setThrottleMetadata(ve),X.attemptFetch(S,ve)}})()}}class Va{constructor(S,R,j,X,ce){this.app=S,this._client=R,this._storageCache=j,this._storage=X,this._logger=ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ko(I,S){var R;const j=I.target.error||void 0;return ri.create(S,{originalErrorMessage:j&&(null===(R=j)||void 0===R?void 0:R.message)})}const si="app_namespace_store";class Yi{constructor(S,R,j,X=function ki(){return new Promise((I,S)=>{var R;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=X=>{S(Ko(X,"storage-open"))},j.onsuccess=X=>{I(X.target.result)},j.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(si,{keyPath:"compositeKey"})}}catch(j){S(ri.create("storage-open",{originalErrorMessage:null===(R=j)||void 0===R?void 0:R.message}))}})}()){this.appId=S,this.appName=R,this.namespace=j,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var R=this;return(0,L.Z)(function*(){const j=yield R.openDbPromise;return new Promise((X,ce)=>{var ve;const wt=j.transaction([si],"readonly").objectStore(si),At=R.createCompositeKey(S);try{const Lt=wt.get(At);Lt.onerror=Ct=>{ce(Ko(Ct,"storage-get"))},Lt.onsuccess=Ct=>{const Pr=Ct.target.result;X(Pr?Pr.value:void 0)}}catch(Lt){ce(ri.create("storage-get",{originalErrorMessage:null===(ve=Lt)||void 0===ve?void 0:ve.message}))}})})()}set(S,R){var j=this;return(0,L.Z)(function*(){const X=yield j.openDbPromise;return new Promise((ce,ve)=>{var et;const At=X.transaction([si],"readwrite").objectStore(si),Lt=j.createCompositeKey(S);try{const Ct=At.put({compositeKey:Lt,value:R});Ct.onerror=Pr=>{ve(Ko(Pr,"storage-set"))},Ct.onsuccess=()=>{ce()}}catch(Ct){ve(ri.create("storage-set",{originalErrorMessage:null===(et=Ct)||void 0===et?void 0:et.message}))}})})()}delete(S){var R=this;return(0,L.Z)(function*(){const j=yield R.openDbPromise;return new Promise((X,ce)=>{var ve;const wt=j.transaction([si],"readwrite").objectStore(si),At=R.createCompositeKey(S);try{const Lt=wt.delete(At);Lt.onerror=Ct=>{ce(Ko(Ct,"storage-delete"))},Lt.onsuccess=()=>{X()}}catch(Lt){ce(ri.create("storage-delete",{originalErrorMessage:null===(ve=Lt)||void 0===ve?void 0:ve.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class El{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,L.Z)(function*(){const R=S.storage.getLastFetchStatus(),j=S.storage.getLastSuccessfulFetchTimestampMillis(),X=S.storage.getActiveConfig(),ce=yield R;ce&&(S.lastFetchStatus=ce);const ve=yield j;ve&&(S.lastSuccessfulFetchTimestampMillis=ve);const et=yield X;et&&(S.activeConfig=et)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Dl(){return Op.apply(this,arguments)}function Op(){return(Op=(0,L.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function fs(){(0,le._registerComponent)(new ie.wA("remote-config",function I(S,{instanceIdentifier:R}){const j=S.getProvider("app").getImmediate(),X=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ri.create("registration-window");if(!(0,oe.hl)())throw ri.create("indexed-db-unavailable");const{projectId:ce,apiKey:ve,appId:et}=j.options;if(!ce)throw ri.create("registration-project-id");if(!ve)throw ri.create("registration-api-key");if(!et)throw ri.create("registration-app-id");const wt=new Yi(et,j.name,R=R||"firebase"),At=new El(wt),Lt=new Ce.Yd(or);Lt.logLevel=Ce.in.ERROR;const Ct=new Gs(X,le.SDK_VERSION,R,ce,ve,et),Pr=new Ds(Ct,wt),wr=new Wo(Pr,wt,At,Lt),ai=new Va(j,wr,At,wt,Lt);return function Hn(I){const S=(0,oe.m9)(I);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(ai),ai},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(or,"0.3.11"),(0,le.registerVersion)(or,"0.3.11","esm2017")}();const rd="/firebase-messaging-sw.js",Zs="/firebase-cloud-messaging-push-scope",ja="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Sl="https://fcmregistrations.googleapis.com/v1",id="google.c.a.c_id",Mp="google.c.a.c_l",Pp="google.c.a.ts",l_="google.c.a.e";var Yo=(()=>{return(I=Yo||(Yo={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Yo;var I})();function Ss(I){const S=new Uint8Array(I);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function c_(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(R),X=new Uint8Array(j.length);for(let ce=0;ce<j.length;++ce)X[ce]=j.charCodeAt(ce);return X}const qr="fcm_token_details_db",sd=5,wi="fcm_token_object_Store";function Nh(){return Nh=(0,L.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ce=>ce.name).includes(qr))return null;let S=null;return(yield(0,ye.X3)(qr,sd,{upgrade:(j=(0,L.Z)(function*(X,ce,ve,et){var wt;if(ce<2||!X.objectStoreNames.contains(wi))return;const At=et.objectStore(wi),Lt=yield At.index("fcmSenderId").get(I);if(yield At.clear(),Lt)if(2===ce){const Ct=Lt;if(!Ct.auth||!Ct.p256dh||!Ct.endpoint)return;S={token:Ct.fcmToken,createTime:null!==(wt=Ct.createTime)&&void 0!==wt?wt:Date.now(),subscriptionOptions:{auth:Ct.auth,p256dh:Ct.p256dh,endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:"string"==typeof Ct.vapidKey?Ct.vapidKey:Ss(Ct.vapidKey)}}}else if(3===ce){const Ct=Lt;S={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:Ss(Ct.auth),p256dh:Ss(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:Ss(Ct.vapidKey)}}}else if(4===ce){const Ct=Lt;S={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:Ss(Ct.auth),p256dh:Ss(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:Ss(Ct.vapidKey)}}}}),function(ce,ve,et,wt){return j.apply(this,arguments)})})).close(),yield(0,ye.Lj)(qr),yield(0,ye.Lj)("fcm_vapid_details_db"),yield(0,ye.Lj)("undefined"),function wo(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:S}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}(S)?S:null;var j}),Nh.apply(this,arguments)}const Mc="firebase-messaging-database",Jo=1,Qo="firebase-messaging-store";let Pc=null;function $a(){return Pc||(Pc=(0,ye.X3)(Mc,Jo,{upgrade:(I,S)=>{0===S&&I.createObjectStore(Qo)}})),Pc}function Fc(I){return Ga.apply(this,arguments)}function Ga(){return Ga=(0,L.Z)(function*(I){const S=qa(I),j=yield(yield $a()).transaction(Qo).objectStore(Qo).get(S);if(j)return j;{const X=yield function od(I){return Nh.apply(this,arguments)}(I.appConfig.senderId);if(X)return yield Xo(I,X),X}}),Ga.apply(this,arguments)}function Xo(I,S){return Il.apply(this,arguments)}function Il(){return(Il=(0,L.Z)(function*(I,S){const R=qa(I),X=(yield $a()).transaction(Qo,"readwrite");return yield X.objectStore(Qo).put(S,R),yield X.done,S})).apply(this,arguments)}function Za(){return(Za=(0,L.Z)(function*(I){const S=qa(I),j=(yield $a()).transaction(Qo,"readwrite");yield j.objectStore(Qo).delete(S),yield j.done})).apply(this,arguments)}function qa({appConfig:I}){return I.appId}const Kn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Lc(I,S){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,L.Z)(function*(I,S){var R;const j=yield ta(I),X=Al(S),ce={method:"POST",headers:j,body:JSON.stringify(X)};let ve;try{ve=yield(yield fetch(Wa(I.appConfig),ce)).json()}catch(et){throw Kn.create("token-subscribe-failed",{errorInfo:null===(R=et)||void 0===R?void 0:R.toString()})}if(ve.error)throw Kn.create("token-subscribe-failed",{errorInfo:ve.error.message});if(!ve.token)throw Kn.create("token-subscribe-no-token");return ve.token})).apply(this,arguments)}function ea(){return(ea=(0,L.Z)(function*(I,S){var R;const j=yield ta(I),X=Al(S.subscriptionOptions),ce={method:"PATCH",headers:j,body:JSON.stringify(X)};let ve;try{ve=yield(yield fetch(`${Wa(I.appConfig)}/${S.token}`,ce)).json()}catch(et){throw Kn.create("token-update-failed",{errorInfo:null===(R=et)||void 0===R?void 0:R.toString()})}if(ve.error)throw Kn.create("token-update-failed",{errorInfo:ve.error.message});if(!ve.token)throw Kn.create("token-update-no-token");return ve.token})).apply(this,arguments)}function cr(I,S){return ld.apply(this,arguments)}function ld(){return(ld=(0,L.Z)(function*(I,S){var R;const X={method:"DELETE",headers:yield ta(I)};try{const ve=yield(yield fetch(`${Wa(I.appConfig)}/${S}`,X)).json();if(ve.error)throw Kn.create("token-unsubscribe-failed",{errorInfo:ve.error.message})}catch(ce){throw Kn.create("token-unsubscribe-failed",{errorInfo:null===(R=ce)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function Wa({projectId:I}){return`${Sl}/projects/${I}/registrations`}function ta(I){return _r.apply(this,arguments)}function _r(){return(_r=(0,L.Z)(function*({appConfig:I,installations:S}){const R=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Al({p256dh:I,auth:S,endpoint:R,vapidKey:j}){const X={web:{endpoint:R,auth:S,p256dh:I}};return j!==ja&&(X.web.applicationPubKey=j),X}const Ka=6048e5;function qs(){return qs=(0,L.Z)(function*(I){const S=yield function cd(I,S){return ud.apply(this,arguments)}(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:S.endpoint,auth:Ss(S.getKey("auth")),p256dh:Ss(S.getKey("p256dh"))},j=yield Fc(I.firebaseDependencies);if(j){if(function jc(I,S){return S.vapidKey===I.vapidKey&&S.endpoint===I.endpoint&&S.auth===I.auth&&S.p256dh===I.p256dh}(j.subscriptionOptions,R))return Date.now()>=j.createTime+Ka?function Ft(I,S){return Bc.apply(this,arguments)}(I,{token:j.token,createTime:Date.now(),subscriptionOptions:R}):j.token;try{yield cr(I.firebaseDependencies,j.token)}catch(X){console.warn(X)}return xh(I.firebaseDependencies,R)}return xh(I.firebaseDependencies,R)}),qs.apply(this,arguments)}function xl(){return xl=(0,L.Z)(function*(I){const S=yield Fc(I.firebaseDependencies);S&&(yield cr(I.firebaseDependencies,S.token),yield function ad(I){return Za.apply(this,arguments)}(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()}),xl.apply(this,arguments)}function Bc(){return Bc=(0,L.Z)(function*(I,S){try{const R=yield function za(I,S){return ea.apply(this,arguments)}(I.firebaseDependencies,S),j=Object.assign(Object.assign({},S),{token:R,createTime:Date.now()});return yield Xo(I.firebaseDependencies,j),R}catch(R){throw yield function Nl(I){return xl.apply(this,arguments)}(I),R}}),Bc.apply(this,arguments)}function xh(I,S){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,L.Z)(function*(I,S){const j={token:yield Lc(I,S),createTime:Date.now(),subscriptionOptions:S};return yield Xo(I,j),j.token})).apply(this,arguments)}function ud(){return(ud=(0,L.Z)(function*(I,S){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:c_(S)})})).apply(this,arguments)}function Fp(I){const S={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function dd(I,S){if(!S.notification)return;I.notification={};const R=S.notification.title;R&&(I.notification.title=R);const j=S.notification.body;j&&(I.notification.body=j);const X=S.notification.image;X&&(I.notification.image=X)}(S,I),function we(I,S){S.data&&(I.data=S.data)}(S,I),function an(I,S){var R,j,X,ce,ve;if(!(S.fcmOptions||null!==(R=S.notification)&&void 0!==R&&R.click_action))return;I.fcmOptions={};const et=null!==(X=null===(j=S.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==X?X:null===(ce=S.notification)||void 0===ce?void 0:ce.click_action;et&&(I.fcmOptions.link=et);const wt=null===(ve=S.fcmOptions)||void 0===ve?void 0:ve.analytics_label;wt&&(I.fcmOptions.analyticsLabel=wt)}(S,I),S}function kh(I,S){const R=[];for(let j=0;j<I.length;j++)R.push(I.charAt(j)),j<S.length&&R.push(S.charAt(j));return R.join("")}function kl(I){return Kn.create("missing-app-config-values",{valueName:I})}kh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),kh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Hc{constructor(S,R,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function zr(I){if(!I||!I.options)throw kl("App Configuration Object");if(!I.name)throw kl("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const j of S)if(!R[j])throw kl(j);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:X,installations:R,analyticsProvider:j}}_delete(){return Promise.resolve()}}function Mi(I){return $c.apply(this,arguments)}function $c(){return($c=(0,L.Z)(function*(I){var S;try{I.swRegistration=yield navigator.serviceWorker.register(rd,{scope:Zs}),I.swRegistration.update().catch(()=>{})}catch(R){throw Kn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=R)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function Rh(){return(Rh=(0,L.Z)(function*(I,S){if(!S&&!I.swRegistration&&(yield Mi(I)),S||!I.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Kn.create("invalid-sw-registration");I.swRegistration=S}})).apply(this,arguments)}function Zc(){return(Zc=(0,L.Z)(function*(I,S){S?I.vapidKey=S:I.vapidKey||(I.vapidKey=ja)})).apply(this,arguments)}function Pi(){return Pi=(0,L.Z)(function*(I,S){if(!navigator)throw Kn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Kn.create("permission-blocked");return yield function fd(I,S){return Zc.apply(this,arguments)}(I,S?.vapidKey),yield function Gc(I,S){return Rh.apply(this,arguments)}(I,S?.serviceWorkerRegistration),function Uc(I){return qs.apply(this,arguments)}(I)}),Pi.apply(this,arguments)}function na(){return(na=(0,L.Z)(function*(I,S,R){const j=function Is(I){switch(I){case Yo.NOTIFICATION_CLICKED:return"notification_open";case Yo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(S);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:R[id],message_name:R[Mp],message_time:R[Pp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Rl(){return Rl=(0,L.Z)(function*(I,S){const R=S.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===Yo.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Fp(R)):I.onMessageHandler.next(Fp(R)));const j=R.data;(function hd(I){return"object"==typeof I&&!!I&&id in I})(j)&&"1"===j[l_]&&(yield function Co(I,S,R){return na.apply(this,arguments)}(I,R.messageType,j))}),Rl.apply(this,arguments)}const Mh="@firebase/messaging",gd=I=>{const S=new Hc(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Oh(I,S){return Rl.apply(this,arguments)}(S,R)),S},zs=I=>{const S=I.getProvider("messaging").getImmediate();return{getToken:j=>function yr(I,S){return Pi.apply(this,arguments)}(S,j)}};function md(){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,L.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ph(){(0,le._registerComponent)(new ie.wA("messaging",gd,"PUBLIC")),(0,le._registerComponent)(new ie.wA("messaging-internal",zs,"PRIVATE")),(0,le.registerVersion)(Mh,"0.9.16"),(0,le.registerVersion)(Mh,"0.9.16","esm2017")}();const Uh="analytics",Ci="firebase_id",Ya="origin",Mn=6e4,Ja="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_d="https://www.googletagmanager.com/gtag/js",Wr=new Ce.Yd("@firebase/analytics");function Bp(I){return Promise.all(I.map(S=>S.catch(R=>R)))}function ra(){return(ra=(0,L.Z)(function*(I,S,R,j,X,ce){const ve=j[X];try{if(ve)yield S[ve];else{const wt=(yield Bp(R)).find(At=>At.measurementId===X);wt&&(yield S[wt.appId])}}catch(et){Wr.error(et)}I("config",X,ce)})).apply(this,arguments)}function To(){return(To=(0,L.Z)(function*(I,S,R,j,X){try{let ce=[];if(X&&X.send_to){let ve=X.send_to;Array.isArray(ve)||(ve=[ve]);const et=yield Bp(R);for(const wt of ve){const At=et.find(Ct=>Ct.measurementId===wt),Lt=At&&S[At.appId];if(!Lt){ce=[];break}ce.push(Lt)}}0===ce.length&&(ce=Object.values(S)),yield Promise.all(ce),I("event",j,X||{})}catch(ce){Wr.error(ce)}})).apply(this,arguments)}const Ji=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),zc=30,Vh=new class ia{constructor(S={},R=1e3){this.throttleMetadata=S,this.intervalMillis=R}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,R){this.throttleMetadata[S]=R}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Vp(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Fl(){return(Fl=(0,L.Z)(function*(I){var S;const{appId:R,apiKey:j}=I,X={method:"GET",headers:Vp(j)},ce=Ja.replace("{app-id}",R),ve=yield fetch(ce,X);if(200!==ve.status&&304!==ve.status){let et="";try{const wt=yield ve.json();null!==(S=wt.error)&&void 0!==S&&S.message&&(et=wt.error.message)}catch{}throw Ji.create("config-fetch-failed",{httpStatus:ve.status,responseMessage:et})}return ve.json()})).apply(this,arguments)}function Ll(){return(Ll=(0,L.Z)(function*(I,S=Vh,R){const{appId:j,apiKey:X,measurementId:ce}=I.options;if(!j)throw Ji.create("no-app-id");if(!X){if(ce)return{measurementId:ce,appId:j};throw Ji.create("no-api-key")}const ve=S.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},et=new Ul;return setTimeout((0,L.Z)(function*(){et.abort()}),void 0!==R?R:Mn),Ws({appId:j,apiKey:X,measurementId:ce},ve,et,S)})).apply(this,arguments)}function Ws(I,S,R){return Ks.apply(this,arguments)}function Ks(){return Ks=(0,L.Z)(function*(I,{throttleEndTimeMillis:S,backoffCount:R},j,X=Vh){var ce,ve;const{appId:et,measurementId:wt}=I;try{yield function Xa(I,S){return new Promise((R,j)=>{const X=Math.max(S-Date.now(),0),ce=setTimeout(R,X);I.addEventListener(()=>{clearTimeout(ce),j(Ji.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(j,S)}catch(At){if(wt)return Wr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${wt} provided in the "measurementId" field in the local Firebase config. [${null===(ce=At)||void 0===ce?void 0:ce.message}]`),{appId:et,measurementId:wt};throw At}try{const At=yield function sa(I){return Fl.apply(this,arguments)}(I);return X.deleteThrottleMetadata(et),At}catch(At){const Lt=At;if(!function vd(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}(Lt)){if(X.deleteThrottleMetadata(et),wt)return Wr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${wt} provided in the "measurementId" field in the local Firebase config. [${Lt?.message}]`),{appId:et,measurementId:wt};throw At}const Ct=503===Number(null===(ve=Lt?.customData)||void 0===ve?void 0:ve.httpStatus)?(0,oe.$s)(R,X.intervalMillis,zc):(0,oe.$s)(R,X.intervalMillis),Pr={throttleEndTimeMillis:Date.now()+Ct,backoffCount:R+1};return X.setThrottleMetadata(et,Pr),Wr.debug(`Calling attemptFetch again in ${Ct} millis`),Ws(I,Pr,j,X)}}),Ks.apply(this,arguments)}class Ul{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Wc,So;function Do(){return(Do=(0,L.Z)(function*(I,S,R,j,X){if(X&&X.global)I("event",R,j);else{const ce=yield S;I("event",R,Object.assign(Object.assign({},j),{send_to:ce}))}})).apply(this,arguments)}function bd(){return(bd=(0,L.Z)(function*(){var I;if(!(0,oe.hl)())return Wr.warn(Ji.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(S){return Wr.warn(Ji.create("indexeddb-unavailable",{errorInfo:null===(I=S)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function Gl(){return Gl=(0,L.Z)(function*(I,S,R,j,X,ce,ve){var et;const wt=function $n(I){return Ll.apply(this,arguments)}(I);wt.then(wr=>{R[wr.measurementId]=wr.appId,I.options.measurementId&&wr.measurementId!==I.options.measurementId&&Wr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${wr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(wr=>Wr.error(wr)),S.push(wt);const At=function $l(){return bd.apply(this,arguments)}().then(wr=>{if(wr)return j.getId()}),[Lt,Ct]=yield Promise.all([wt,At]);(function Qa(){const I=window.document.getElementsByTagName("script");for(const S of Object.values(I))if(S.src&&S.src.includes(_d))return S;return null})()||function d_(I,S){const R=document.createElement("script");R.src=`${_d}?l=${I}&id=${S}`,R.async=!0,document.head.appendChild(R)}(ce,Lt.measurementId),So&&(X("consent","default",So),function Hl(I){So=I}(void 0)),X("js",new Date);const Pr=null!==(et=ve?.config)&&void 0!==et?et:{};return Pr[Ya]="firebase",Pr.update=!0,null!=Ct&&(Pr[Ci]=Ct),X("config",Lt.measurementId,Pr),Wc&&(X("set",Wc),function Jc(I){Wc=I}(void 0)),Lt.measurementId}),Gl.apply(this,arguments)}class jh{constructor(S){this.app=S}_delete(){return delete As[this.app.options.appId],Promise.resolve()}}let As={},Qc=[];const aa={};let Xc,Ys,Ns="dataLayer",Hh="gtag",ps=!1;function eu(I,S,R){!function $h(){const I=[];if((0,oe.ru)()&&I.push("This is a browser extension environment."),(0,oe.zI)()||I.push("Cookies are not available."),I.length>0){const S=I.map((j,X)=>`(${X+1}) ${j}`).join(" "),R=Ji.create("invalid-analytics-context",{errorInfo:S});Wr.warn(R.message)}}();const j=I.options.appId;if(!j)throw Ji.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Ji.create("no-api-key");Wr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=As[j])throw Ji.create("already-exists",{id:j});if(!ps){!function h_(I){let S=[];Array.isArray(window[I])?S=window[I]:window[I]=S}(Ns);const{wrappedGtag:ce,gtagCore:ve}=function Pl(I,S,R,j,X){let ce=function(...ve){window[j].push(arguments)};return window[X]&&"function"==typeof window[X]&&(ce=window[X]),window[X]=function Ml(I,S,R,j){function ce(){return ce=(0,L.Z)(function*(ve,et,wt){try{"event"===ve?yield function yd(I,S,R,j,X){return To.apply(this,arguments)}(I,S,R,et,wt):"config"===ve?yield function Ol(I,S,R,j,X,ce){return ra.apply(this,arguments)}(I,S,R,j,et,wt):"consent"===ve?I("consent","update",wt):I("set",et)}catch(At){Wr.error(At)}}),ce.apply(this,arguments)}return function X(ve,et,wt){return ce.apply(this,arguments)}}(ce,I,S,R),{gtagCore:ce,wrappedGtag:window[X]}}(As,Qc,aa,Ns,Hh);Ys=ce,Xc=ve,ps=!0}return As[j]=function oa(I,S,R,j,X,ce,ve){return Gl.apply(this,arguments)}(I,Qc,aa,S,Xc,Ns,R),new jh(I)}function tu(){return Js.apply(this,arguments)}function Js(){return(Js=(0,L.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const sn="@firebase/analytics";!function p_(){(0,le._registerComponent)(new ie.wA(Uh,(S,{options:R})=>eu(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,le._registerComponent)(new ie.wA("analytics-internal",function I(S){try{const R=S.getProvider(Uh).getImmediate();return{logEvent:(j,X,ce)=>function Hp(I,S,R,j){I=(0,oe.m9)(I),function Kc(I,S,R,j,X){return Do.apply(this,arguments)}(Ys,As[I.app.options.appId],S,R,j).catch(X=>Wr.error(X))}(R,j,X,ce)}}catch(R){throw Ji.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,le.registerVersion)(sn,"0.8.0"),(0,le.registerVersion)(sn,"0.8.0","esm2017")}();var ru=U(4408),Gp=U(7565);const Zp=new class qh extends Gp.v{}(class $p extends ru.o{constructor(S,R){super(S,R),this.scheduler=S,this.work=R}schedule(S,R=0){return R>0?super.schedule(S,R):(this.delay=R,this.state=S,this.scheduler.flush(this),this)}execute(S,R){return R>0||this.closed?super.execute(S,R):this._execute(S,R)}requestAsyncId(S,R,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(S,R,j):(S.flush(this),0)}});var qp=U(4986),Ed=U(8505),Nn=U(5363),su=U(9468);const ou=new s.GfV("7.6.1"),Dd="__angularfire_symbol__analyticsIsSupportedValue",Fi="__angularfire_symbol__analyticsIsSupported",xs="__angularfire_symbol__remoteConfigIsSupportedValue",au="__angularfire_symbol__remoteConfigIsSupported",ql="__angularfire_symbol__messagingIsSupportedValue",il="__angularfire_symbol__messagingIsSupported";function Ti(I,S,R){if(S){if(1===S.length)return S[0];const ce=S.filter(ve=>ve.app===R);if(1===ce.length)return ce[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[Fi]||(globalThis[Fi]=tu().then(I=>globalThis[Dd]=I).catch(()=>globalThis[Dd]=!1)),globalThis[il]||(globalThis[il]=md().then(I=>globalThis[ql]=I).catch(()=>globalThis[ql]=!1)),globalThis[au]||(globalThis[au]=Dl().then(I=>globalThis[xs]=I).catch(()=>globalThis[xs]=!1));const Ut=(I,S)=>{const R=S?[S]:(0,te.C6)(),j=[];return R.forEach(X=>{X.container.getProvider(I).instances.forEach(ve=>{j.includes(ve)||j.push(ve)})}),j};function vr(){}class Fe{constructor(S,R=Zp){this.zone=S,this.delegate=R}now(){return this.delegate.now()}schedule(S,R,j){const X=this.zone;return this.delegate.schedule(function(ve){X.runGuarded(()=>{S.apply(this,[ve])})},R,j)}}class dn{constructor(S){this.zone=S,this.task=null}call(S,R){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vr,{},vr,vr)),R.pipe((0,Ed.b)({next:j,complete:j,error:j})).subscribe(S).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let br=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Fe(Zone.current)),this.insideAngular=R.run(()=>new Fe(Zone.current,qp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(s.LFG(s.R0b))},I.\u0275prov=s.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Qs(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function zp(I){return I.pipe((0,Nn.Q)(Qs().outsideAngular))}function zl(I){return Qs(),function Wl(I){return function(R){return(R=R.lift(new dn(I.ngZone))).pipe((0,su.R)(I.outsideAngular),(0,Nn.Q)(I.insideAngular))}}(Qs())(I)}},2090:(_t,Ae,U)=>{U.d(Ae,{$s:()=>Ma,BH:()=>Ye,DV:()=>Xe,Dv:()=>jn,G6:()=>je,GJ:()=>$e,L:()=>ye,LL:()=>Rn,Mn:()=>Me,Pz:()=>ae,Sg:()=>Re,UG:()=>be,UI:()=>St,US:()=>ie,Wj:()=>wn,Yr:()=>ze,ZB:()=>Z,ZR:()=>nt,b$:()=>Ge,cI:()=>cs,d:()=>ke,dS:()=>Et,eu:()=>Ee,g5:()=>L,gK:()=>ti,gQ:()=>qn,h$:()=>Ce,hl:()=>G,hu:()=>te,jU:()=>Oe,lb:()=>Sn,m9:()=>en,ne:()=>Ni,p$:()=>q,pd:()=>Ln,r3:()=>Tt,ru:()=>xe,tV:()=>_e,uI:()=>ut,ug:()=>kt,vZ:()=>Jt,w1:()=>Se,w9:()=>Ze,xO:()=>gr,xb:()=>Yt,z$:()=>Qe,zI:()=>Ke,zd:()=>Rr});const s={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},te=function(Q,$){if(!Q)throw L($)},L=function(Q){return new Error("Firebase Database ("+s.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Q)},le=function(Q){const $=[];let H=0;for(let z=0;z<Q.length;z++){let K=Q.charCodeAt(z);K<128?$[H++]=K:K<2048?($[H++]=K>>6|192,$[H++]=63&K|128):55296==(64512&K)&&z+1<Q.length&&56320==(64512&Q.charCodeAt(z+1))?(K=65536+((1023&K)<<10)+(1023&Q.charCodeAt(++z)),$[H++]=K>>18|240,$[H++]=K>>12&63|128,$[H++]=K>>6&63|128,$[H++]=63&K|128):($[H++]=K>>12|224,$[H++]=K>>6&63|128,$[H++]=63&K|128)}return $},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Q,$){if(!Array.isArray(Q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,z=[];for(let K=0;K<Q.length;K+=3){const Ne=Q[K],Je=K+1<Q.length,bt=Je?Q[K+1]:0,In=K+2<Q.length,_n=In?Q[K+2]:0;let Qn=(15&bt)<<2|_n>>6,Or=63&_n;In||(Or=64,Je||(Qn=64)),z.push(H[Ne>>2],H[(3&Ne)<<4|bt>>4],H[Qn],H[Or])}return z.join("")},encodeString(Q,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(Q):this.encodeByteArray(le(Q),$)},decodeString(Q,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(Q):function(Q){const $=[];let H=0,z=0;for(;H<Q.length;){const K=Q[H++];if(K<128)$[z++]=String.fromCharCode(K);else if(K>191&&K<224){const Ne=Q[H++];$[z++]=String.fromCharCode((31&K)<<6|63&Ne)}else if(K>239&&K<365){const In=((7&K)<<18|(63&Q[H++])<<12|(63&Q[H++])<<6|63&Q[H++])-65536;$[z++]=String.fromCharCode(55296+(In>>10)),$[z++]=String.fromCharCode(56320+(1023&In))}else{const Ne=Q[H++],Je=Q[H++];$[z++]=String.fromCharCode((15&K)<<12|(63&Ne)<<6|63&Je)}}return $.join("")}(this.decodeStringToByteArray(Q,$))},decodeStringToByteArray(Q,$){this.init_();const H=$?this.charToByteMapWebSafe_:this.charToByteMap_,z=[];for(let K=0;K<Q.length;){const Ne=H[Q.charAt(K++)],bt=K<Q.length?H[Q.charAt(K)]:0;++K;const _n=K<Q.length?H[Q.charAt(K)]:64;++K;const Vt=K<Q.length?H[Q.charAt(K)]:64;if(++K,null==Ne||null==bt||null==_n||null==Vt)throw Error();z.push(Ne<<2|bt>>4),64!==_n&&(z.push(bt<<4&240|_n>>2),64!==Vt&&z.push(_n<<6&192|Vt))}return z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Q=0;Q<this.ENCODED_VALS.length;Q++)this.byteToCharMap_[Q]=this.ENCODED_VALS.charAt(Q),this.charToByteMap_[this.byteToCharMap_[Q]]=Q,this.byteToCharMapWebSafe_[Q]=this.ENCODED_VALS_WEBSAFE.charAt(Q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Q]]=Q,Q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Q)]=Q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Q)]=Q)}}},Ce=function(Q){const $=le(Q);return ie.encodeByteArray($,!0)},ye=function(Q){return Ce(Q).replace(/\./g,"")},_e=function(Q){try{return ie.decodeString(Q,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function q(Q){return Z(void 0,Q)}function Z(Q,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===Q&&(Q={});break;case Array:Q=[];break;default:return $}for(const H in $)!$.hasOwnProperty(H)||!ee(H)||(Q[H]=Z(Q[H],$[H]));return Q}function ee(Q){return"__proto__"!==Q}class Ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,H)=>{this.resolve=$,this.reject=H})}wrapCallback($){return(H,z)=>{H?this.reject(H):this.resolve(z),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(H):$(H,z))}}}function Re(Q,$){if(Q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const z=$||"demo-project",K=Q.iat||0,Ne=Q.sub||Q.user_id;if(!Ne)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Je=Object.assign({iss:`https://securetoken.google.com/${z}`,aud:z,iat:K,exp:K+3600,auth_time:K,sub:Ne,user_id:Ne,firebase:{sign_in_provider:"custom",identities:{}}},Q);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(Je)),""].join(".")}function Qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ut(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Oe(){return"object"==typeof self&&self.self===self}function xe(){const Q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Q&&void 0!==Q.id}function Ge(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ke(){return Qe().indexOf("Electron/")>=0}function Se(){const Q=Qe();return Q.indexOf("MSIE ")>=0||Q.indexOf("Trident/")>=0}function Me(){return Qe().indexOf("MSAppHost/")>=0}function ze(){return!0===s.NODE_CLIENT||!0===s.NODE_ADMIN}function je(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G(){return"object"==typeof indexedDB}function Ee(){return new Promise((Q,$)=>{try{let H=!0;const z="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(z);K.onsuccess=()=>{K.result.close(),H||self.indexedDB.deleteDatabase(z),Q(!0)},K.onupgradeneeded=()=>{H=!1},K.onerror=()=>{var Ne;$((null===(Ne=K.error)||void 0===Ne?void 0:Ne.message)||"")}}catch(H){$(H)}})}function Ke(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class nt extends Error{constructor($,H,z){super(H),this.code=$,this.customData=z,this.name="FirebaseError",Object.setPrototypeOf(this,nt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rn.prototype.create)}}class Rn{constructor($,H,z){this.service=$,this.serviceName=H,this.errors=z}create($,...H){const z=H[0]||{},K=`${this.service}/${$}`,Ne=this.errors[$],Je=Ne?function kr(Q,$){return Q.replace(sr,(H,z)=>{const K=$[z];return null!=K?String(K):`<${z}?>`})}(Ne,z):"Error";return new nt(K,`${this.serviceName}: ${Je} (${K}).`,z)}}const sr=/\{\$([^}]+)}/g;function cs(Q){return JSON.parse(Q)}function ae(Q){return JSON.stringify(Q)}const pe=function(Q){let $={},H={},z={},K="";try{const Ne=Q.split(".");$=cs(_e(Ne[0])||""),H=cs(_e(Ne[1])||""),K=Ne[2],z=H.d||{},delete H.d}catch{}return{header:$,claims:H,data:z,signature:K}},Ze=function(Q){const H=pe(Q).claims;return!!H&&"object"==typeof H&&H.hasOwnProperty("iat")},$e=function(Q){const $=pe(Q).claims;return"object"==typeof $&&!0===$.admin};function Tt(Q,$){return Object.prototype.hasOwnProperty.call(Q,$)}function Xe(Q,$){if(Object.prototype.hasOwnProperty.call(Q,$))return Q[$]}function Yt(Q){for(const $ in Q)if(Object.prototype.hasOwnProperty.call(Q,$))return!1;return!0}function St(Q,$,H){const z={};for(const K in Q)Object.prototype.hasOwnProperty.call(Q,K)&&(z[K]=$.call(H,Q[K],K,Q));return z}function Jt(Q,$){if(Q===$)return!0;const H=Object.keys(Q),z=Object.keys($);for(const K of H){if(!z.includes(K))return!1;const Ne=Q[K],Je=$[K];if(un(Ne)&&un(Je)){if(!Jt(Ne,Je))return!1}else if(Ne!==Je)return!1}for(const K of z)if(!H.includes(K))return!1;return!0}function un(Q){return null!==Q&&"object"==typeof Q}function gr(Q){const $=[];for(const[H,z]of Object.entries(Q))Array.isArray(z)?z.forEach(K=>{$.push(encodeURIComponent(H)+"="+encodeURIComponent(K))}):$.push(encodeURIComponent(H)+"="+encodeURIComponent(z));return $.length?"&"+$.join("&"):""}function Rr(Q){const $={};return Q.replace(/^\?/,"").split("&").forEach(z=>{if(z){const[K,Ne]=z.split("=");$[decodeURIComponent(K)]=decodeURIComponent(Ne)}}),$}function Ln(Q){const $=Q.indexOf("?");if(!$)return"";const H=Q.indexOf("#",$);return Q.substring($,H>0?H:void 0)}class qn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,H){H||(H=0);const z=this.W_;if("string"==typeof $)for(let Vt=0;Vt<16;Vt++)z[Vt]=$.charCodeAt(H)<<24|$.charCodeAt(H+1)<<16|$.charCodeAt(H+2)<<8|$.charCodeAt(H+3),H+=4;else for(let Vt=0;Vt<16;Vt++)z[Vt]=$[H]<<24|$[H+1]<<16|$[H+2]<<8|$[H+3],H+=4;for(let Vt=16;Vt<80;Vt++){const Qn=z[Vt-3]^z[Vt-8]^z[Vt-14]^z[Vt-16];z[Vt]=4294967295&(Qn<<1|Qn>>>31)}let _n,An,K=this.chain_[0],Ne=this.chain_[1],Je=this.chain_[2],bt=this.chain_[3],In=this.chain_[4];for(let Vt=0;Vt<80;Vt++){Vt<40?Vt<20?(_n=bt^Ne&(Je^bt),An=1518500249):(_n=Ne^Je^bt,An=1859775393):Vt<60?(_n=Ne&Je|bt&(Ne|Je),An=2400959708):(_n=Ne^Je^bt,An=3395469782);const Qn=(K<<5|K>>>27)+_n+In+An+z[Vt]&4294967295;In=bt,bt=Je,Je=4294967295&(Ne<<30|Ne>>>2),Ne=K,K=Qn}this.chain_[0]=this.chain_[0]+K&4294967295,this.chain_[1]=this.chain_[1]+Ne&4294967295,this.chain_[2]=this.chain_[2]+Je&4294967295,this.chain_[3]=this.chain_[3]+bt&4294967295,this.chain_[4]=this.chain_[4]+In&4294967295}update($,H){if(null==$)return;void 0===H&&(H=$.length);const z=H-this.blockSize;let K=0;const Ne=this.buf_;let Je=this.inbuf_;for(;K<H;){if(0===Je)for(;K<=z;)this.compress_($,K),K+=this.blockSize;if("string"==typeof $){for(;K<H;)if(Ne[Je]=$.charCodeAt(K),++Je,++K,Je===this.blockSize){this.compress_(Ne),Je=0;break}}else for(;K<H;)if(Ne[Je]=$[K],++Je,++K,Je===this.blockSize){this.compress_(Ne),Je=0;break}}this.inbuf_=Je,this.total_+=H}digest(){const $=[];let H=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let K=this.blockSize-1;K>=56;K--)this.buf_[K]=255&H,H/=256;this.compress_(this.buf_);let z=0;for(let K=0;K<5;K++)for(let Ne=24;Ne>=0;Ne-=8)$[z]=this.chain_[K]>>Ne&255,++z;return $}}function Ni(Q,$){const H=new Un(Q,$);return H.subscribe.bind(H)}class Un{constructor($,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{$(this)}).catch(z=>{this.error(z)})}next($){this.forEachObserver(H=>{H.next($)})}error($){this.forEachObserver(H=>{H.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,H,z){let K;if(void 0===$&&void 0===H&&void 0===z)throw new Error("Missing Observer.");K=function us(Q,$){if("object"!=typeof Q||null===Q)return!1;for(const H of $)if(H in Q&&"function"==typeof Q[H])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:H,complete:z},void 0===K.next&&(K.next=Vs),void 0===K.error&&(K.error=Vs),void 0===K.complete&&(K.complete=Vs);const Ne=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),Ne}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,$)}sendOne($,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{H(this.observers[$])}catch(z){typeof console<"u"&&console.error&&console.error(z)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vs(){}const jn=function(Q,$,H,z){let K;if(z<$?K="at least "+$:z>H&&(K=0===H?"none":"no more than "+H),K)throw new Error(Q+" failed: Was called with "+z+(1===z?" argument.":" arguments.")+" Expects "+K+".")};function ti(Q,$){return`${Q} failed: ${$} argument `}function wn(Q,$,H,z){if((!z||H)&&"function"!=typeof H)throw new Error(ti(Q,$)+"must be a valid function.")}function Sn(Q,$,H,z){if((!z||H)&&("object"!=typeof H||null===H))throw new Error(ti(Q,$)+"must be a valid context object.")}const Et=function(Q){const $=[];let H=0;for(let z=0;z<Q.length;z++){let K=Q.charCodeAt(z);if(K>=55296&&K<=56319){const Ne=K-55296;z++,te(z<Q.length,"Surrogate pair missing trail surrogate."),K=65536+(Ne<<10)+(Q.charCodeAt(z)-56320)}K<128?$[H++]=K:K<2048?($[H++]=K>>6|192,$[H++]=63&K|128):K<65536?($[H++]=K>>12|224,$[H++]=K>>6&63|128,$[H++]=63&K|128):($[H++]=K>>18|240,$[H++]=K>>12&63|128,$[H++]=K>>6&63|128,$[H++]=63&K|128)}return $},kt=function(Q){let $=0;for(let H=0;H<Q.length;H++){const z=Q.charCodeAt(H);z<128?$++:z<2048?$+=2:z>=55296&&z<=56319?($+=4,H++):$+=3}return $},Jn=1e3,zn=2,js=144e5,Gr=.5;function Ma(Q,$=Jn,H=zn){const z=$*Math.pow(H,Q),K=Math.round(Gr*z*(Math.random()-.5)*2);return Math.min(js,z+K)}function en(Q){return Q&&Q._delegate?Q._delegate:Q}},5735:(_t,Ae,U)=>{var s=U(4650);let te=null;function L(){return te}class oe{}const ie=new s.OlP("DocumentToken");let Ce=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return function ye(){return(0,s.LFG)(q)}()},providedIn:"platform"}),n})();const _e=new s.OlP("Location Initialized");let q=(()=>{class n extends Ce{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(e){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){Z()?this._history.pushState(e,r,i):this._location.hash=i}replaceState(e,r,i){Z()?this._history.replaceState(e,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:function(){return function ee(){return new q((0,s.LFG)(ie))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function Ye(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Re(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Qe(n){return n&&"?"!==n[0]?"?"+n:n}let ut=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return(0,s.f3M)(Oe)},providedIn:"root"}),n})();const be=new s.OlP("appBaseHref");let Oe=(()=>{class n extends ut{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,s.f3M)(ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Ye(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+Qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){const c=this.prepareExternalUrl(i+Qe(o));this._platformLocation.pushState(e,r,c)}replaceState(e,r,i,o){const c=this.prepareExternalUrl(i+Qe(o));this._platformLocation.replaceState(e,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Ce),s.LFG(be,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xe=(()=>{class n extends ut{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=Ye(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,o){let c=this.prepareExternalUrl(i+Qe(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,r,c)}replaceState(e,r,i,o){let c=this.prepareExternalUrl(i+Qe(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Ce),s.LFG(be,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Ge=(()=>{class n{constructor(e){this._subject=new s.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._basePath=function ze(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(Re(Me(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Qe(r))}normalize(e){return n.stripTrailingSlash(function Se(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,Me(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Qe(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Qe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.normalizeQueryParams=Qe,n.joinWithSlash=Ye,n.stripTrailingSlash=Re,n.\u0275fac=function(e){return new(e||n)(s.LFG(ut))},n.\u0275prov=s.Yz7({token:n,factory:function(){return function ke(){return new Ge((0,s.LFG)(ut))}()},providedIn:"root"}),n})();function Me(n){return n.replace(/\/index.html$/,"")}function zo(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,o]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}const zi=/\s+/,st=[];let jt=(()=>{class n{constructor(e,r,i,o){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this.initialClasses=st,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(zi):st}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(zi):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,Boolean(e[r]));this._applyStateDiff()}_updateState(e,r){const i=this.stateMap.get(e);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(zi).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.ZZ4),s.Y36(s.aQg),s.Y36(s.SBq),s.Y36(s.Qsj))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ar{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let lr=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((i,o,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ar(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===o?void 0:o);else if(null!==o){const d=r.get(o);r.move(d,c),Hn(d,i)}});for(let i=0,o=r.length;i<o;i++){const d=r.get(i).context;d.index=i,d.count=o,d.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{Hn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(s.ZZ4))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Hn(n,t){n.context.$implicit=t.item}let mr=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new Zt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ed("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ed("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(s.Rgc))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Zt{constructor(){this.$implicit=null,this.ngIf=null}}function ed(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,s.AaK)(t)}'.`)}function Ds(n,t){return new s.vHH(2100,!1)}class Ki{createSubscription(t,e){return t.subscribe({next:e,error:r=>{throw r}})}dispose(t){t.unsubscribe()}}class Ih{createSubscription(t,e){return t.then(e,r=>{throw r})}dispose(t){}}const Va=new Ih,Ko=new Ki;let si=(()=>{class n{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r))}_selectStrategy(e){if((0,s.QGY)(e))return Va;if((0,s.F4k)(e))return Ko;throw Ds()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.sBO,16))},n.\u0275pipe=s.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Yi=(()=>{class n{transform(e){if(null==e)return null;if("string"!=typeof e)throw Ds();return e.toUpperCase()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=s.Yjl({name:"uppercase",type:n,pure:!0,standalone:!0}),n})(),qr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const sd="browser",wi="server";function wo(n){return n===sd}function Mc(n){return n===wi}let $a=(()=>{class n{}return n.\u0275prov=(0,s.Yz7)({token:n,providedIn:"root",factory:()=>new Fc((0,s.LFG)(ie),window)}),n})();class Fc{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Xo(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const c=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Ga(this.window.history)||Ga(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ga(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ad{}class To extends oe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ml extends To{static makeCurrent(){!function le(n){te||(te=n)}(new Ml)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Qa(){return Pl=Pl||document.querySelector("base"),Pl?Pl.getAttribute("href"):null}();return null==e?null:function Ji(n){Eo=Eo||document.createElement("a"),Eo.setAttribute("href",n);const t=Eo.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Pl=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return zo(document.cookie,t)}}let Eo,Pl=null;const zc=new s.OlP("TRANSITION_ID"),ia=[{provide:s.ip1,useFactory:function Bh(n,t,e){return()=>{e.get(s.CZH).donePromise.then(()=>{const r=L(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[zc,ie,s.zs3],multi:!0}];let Vp=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const sa=new s.OlP("EventManagerPlugins");let Fl=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const c=i[o];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(sa),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class $n{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=L().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let Ll=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,r){const i=this.usageCount;let o=i.get(e)??0;return o+=r,o>0?i.set(e,o):i.delete(e),o}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Ws=(()=>{class n extends Ll{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.forEach(o=>o.remove()),r.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,r){const i=this.doc.createElement("style");i.textContent=r,e.appendChild(i);const o=this.styleRef.get(r);o?o.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Ks={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xa=/%COMP%/g,el=new s.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Vl(n,t){return t.flat(100).map(e=>e.replace(Xa,n))}function Yc(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Kr=(()=>{class n{constructor(e,r,i,o){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=o,this.rendererByCompId=new Map,this.defaultRenderer=new jl(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(e,r);return i instanceof bd?i.applyToHost(e):i instanceof $l&&i.applyStyles(),i}getOrCreateRenderer(e,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const c=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestory;switch(r.encapsulation){case s.ifc.Emulated:o=new bd(c,d,r,this.appId,f);break;case s.ifc.ShadowDom:return new Jc(c,d,e,r);default:o=new $l(c,d,r,f)}o.onDestroy=()=>i.delete(r.id),i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Fl),s.LFG(Ws),s.LFG(s.AFp),s.LFG(el))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class jl{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Ks[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(Hl(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(Hl(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const o=Ks[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=Ks[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(s.JOm.DashCase|s.JOm.Important)?t.style.setProperty(e,r,i&s.JOm.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&s.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Yc(r)):this.eventManager.addEventListener(t,e,Yc(r))}}function Hl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Jc extends jl{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Vl(i.id,i.styles);for(const c of o){const d=document.createElement("style");d.textContent=c,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class $l extends jl{constructor(t,e,r,i,o=r.id){super(t),this.sharedStylesHost=e,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Vl(o,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class bd extends $l{constructor(t,e,r,i,o){const c=i+"-"+r.id;super(t,e,r,o,c),this.contentAttr=function tl(n){return"_ngcontent-%COMP%".replace(Xa,n)}(c),this.hostAttr=function Bl(n){return"_nghost-%COMP%".replace(Xa,n)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}let oa=(()=>{class n extends $n{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Gl=["alt","control","meta","shift"],jh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},As={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Qc=(()=>{class n extends $n{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const o=n.parseEventName(r),c=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(e,o.domEventName,c))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let c="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),c="code."),Gl.forEach(y=>{const w=r.indexOf(y);w>-1&&(r.splice(w,1),c+=y+".")}),c+=o,0!=r.length||0===o.length)return null;const f={};return f.domEventName=i,f.fullKey=c,f}static matchEventFullKeyCode(e,r){let i=jh[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Gl.forEach(c=>{c!==i&&(0,As[c])(e)&&(o+=c+".")}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Gh=(0,s.eFA)(s._c5,"browser",[{provide:s.Lbi,useValue:sd},{provide:s.g9A,useValue:function ps(){Ml.makeCurrent()},multi:!0},{provide:ie,useFactory:function $h(){return(0,s.RDi)(document),document},deps:[]}]),wd=new s.OlP(""),tu=[{provide:s.rWj,useClass:class Vh{addToWindow(t){s.dqk.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},s.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),s.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),s.dqk.frameworkStabilizers||(s.dqk.frameworkStabilizers=[]),s.dqk.frameworkStabilizers.push(r=>{const i=s.dqk.getAllAngularTestabilities();let o=i.length,c=!1;const d=function(f){c=c||f,o--,0==o&&r(c)};i.forEach(function(f){f.whenStable(d)})})}findTestabilityInTree(t,e,r){return null==e?null:t.getTestability(e)??(r?L().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:s.lri,useClass:s.dDg,deps:[s.R0b,s.eoX,s.rWj]},{provide:s.dDg,useClass:s.dDg,deps:[s.R0b,s.eoX,s.rWj]}],Js=[{provide:s.zSh,useValue:"root"},{provide:s.qLn,useFactory:function f_(){return new s.qLn},deps:[]},{provide:sa,useClass:oa,multi:!0,deps:[ie,s.R0b,s.Lbi]},{provide:sa,useClass:Qc,multi:!0,deps:[ie]},{provide:Kr,useClass:Kr,deps:[Fl,Ws,s.AFp,el]},{provide:s.FYo,useExisting:Kr},{provide:Ll,useExisting:Ws},{provide:Ws,useClass:Ws,deps:[ie]},{provide:Fl,useClass:Fl,deps:[sa,s.R0b]},{provide:ad,useClass:Vp,deps:[]},[]];let rl=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:s.AFp,useValue:e.appId},{provide:zc,useExisting:s.AFp},ia]}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(wd,12))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[...Js,...tu],imports:[qr,s.hGG]}),n})(),Hp=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:function(e){let r=null;return r=e?new e:function Zl(){return new Hp((0,s.LFG)(ie))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let zh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(e){let r=null;return r=e?new(e||n):s.LFG(g_),r},providedIn:"root"}),n})(),g_=(()=>{class n extends zh{constructor(e){super(),this._doc=e}sanitize(e,r){if(null==r)return null;switch(e){case s.q3G.NONE:return r;case s.q3G.HTML:return(0,s.qzn)(r,"HTML")?(0,s.z3N)(r):(0,s.EiD)(this._doc,String(r)).toString();case s.q3G.STYLE:return(0,s.qzn)(r,"Style")?(0,s.z3N)(r):r;case s.q3G.SCRIPT:if((0,s.qzn)(r,"Script"))return(0,s.z3N)(r);throw new Error("unsafe value used in a script context");case s.q3G.URL:return(0,s.qzn)(r,"URL")?(0,s.z3N)(r):(0,s.mCW)(String(r));case s.q3G.RESOURCE_URL:if((0,s.qzn)(r,"ResourceURL"))return(0,s.z3N)(r);throw new Error(`unsafe value used in a resource URL context (see ${s.JZr})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${s.JZr})`)}}bypassSecurityTrustHtml(e){return(0,s.JVY)(e)}bypassSecurityTrustStyle(e){return(0,s.L6k)(e)}bypassSecurityTrustScript(e){return(0,s.eBb)(e)}bypassSecurityTrustUrl(e){return(0,s.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,s.pB0)(e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:function(e){let r=null;return r=e?new e:function Wh(n){return new g_(n.get(ie))}(s.LFG(s.zs3)),r},providedIn:"root"}),n})();var Ut=U(8996),vr=U(3269);function Fe(...n){const t=(0,vr.yG)(n);return(0,Ut.D)(n,t)}var dn=U(7579);class br extends dn.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const sl=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Tn=U(9751);const{isArray:zp}=Array,{getPrototypeOf:Kh,prototype:zl,keys:Wl}=Object;function cu(n){if(1===n.length){const t=n[0];if(zp(t))return{args:t,keys:null};if(function uu(n){return n&&"object"==typeof n&&Kh(n)===zl}(t)){const e=Wl(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}var I=U(4671),S=U(4004);const{isArray:R}=Array;function X(n){return(0,S.U)(t=>function j(n,t){return R(t)?n(...t):n(t)}(n,t))}function ce(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}var ve=U(5403),et=U(9672);function wt(...n){const t=(0,vr.yG)(n),e=(0,vr.jO)(n),{args:r,keys:i}=cu(n);if(0===r.length)return(0,Ut.D)([],t);const o=new Tn.y(function At(n,t,e=I.y){return r=>{Lt(t,()=>{const{length:i}=n,o=new Array(i);let c=i,d=i;for(let f=0;f<i;f++)Lt(t,()=>{const y=(0,Ut.D)(n[f],t);let w=!1;y.subscribe((0,ve.x)(r,E=>{o[f]=E,w||(w=!0,d--),d||r.next(e(o.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,t,i?c=>ce(i,c):I.y));return e?o.pipe(X(e)):o}function Lt(n,t,e){n?(0,et.f)(e,n,t):t()}var Ct=U(8189);function wr(...n){return function Pr(){return(0,Ct.J)(1)}()((0,Ut.D)(n,(0,vr.yG)(n)))}var ai=U(8421);function ol(n){return new Tn.y(t=>{(0,ai.Xf)(n()).subscribe(t)})}var la=U(9635),ks=U(576);function Io(n,t){const e=(0,ks.m)(n)?n:()=>n,r=i=>i.error(e());return new Tn.y(t?i=>t.schedule(r,0,i):r)}var ur=U(515),Xs=U(727),xn=U(4482);function Kl(){return(0,xn.e)((n,t)=>{let e=null;n._refCount++;const r=(0,ve.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const i=n._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}class Wp extends Tn.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,xn.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Xs.w0;const e=this.getSubject();t.add(this.source.subscribe((0,ve.x)(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Xs.w0.EMPTY)}return t}refCount(){return Kl()(this)}}function Bn(n,t){return(0,xn.e)((e,r)=>{let i=null,o=0,c=!1;const d=()=>c&&!i&&r.complete();e.subscribe((0,ve.x)(r,f=>{i?.unsubscribe();let y=0;const w=o++;(0,ai.Xf)(n(f,w)).subscribe(i=(0,ve.x)(r,E=>r.next(t?t(f,E,w,y++):E),()=>{i=null,d()}))},()=>{c=!0,d()}))})}function li(n){return n<=0?()=>ur.E:(0,xn.e)((t,e)=>{let r=0;t.subscribe((0,ve.x)(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function ca(...n){const t=(0,vr.yG)(n);return(0,xn.e)((e,r)=>{(t?wr(n,e,t):wr(n,e)).subscribe(r)})}function Fr(n,t){return(0,xn.e)((e,r)=>{let i=0;e.subscribe((0,ve.x)(r,o=>n.call(t,o,i++)&&r.next(o)))})}var er=U(5577);function Kp(n){return(0,xn.e)((t,e)=>{let r=!1;t.subscribe((0,ve.x)(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function r0(n=Yp){return(0,xn.e)((t,e)=>{let r=!1;t.subscribe((0,ve.x)(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function Yp(){return new sl}function ua(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Fr((i,o)=>n(i,o,r)):I.y,li(1),e?Kp(t):r0(()=>new sl))}function Yl(n,t){return(0,ks.m)(t)?(0,er.z)(n,t,1):(0,er.z)(n,1)}var ci=U(8505);function Jl(n){return(0,xn.e)((t,e)=>{let o,r=null,i=!1;r=t.subscribe((0,ve.x)(e,void 0,void 0,c=>{o=(0,ai.Xf)(n(c,Jl(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function da(n,t){return(0,xn.e)(function w1(n,t,e,r,i){return(o,c)=>{let d=e,f=t,y=0;o.subscribe((0,ve.x)(c,w=>{const E=y++;f=d?n(f,w,E):(d=!0,w),r&&c.next(f)},i&&(()=>{d&&c.next(f),c.complete()})))}}(n,t,arguments.length>=2,!0))}function Yh(n){return n<=0?()=>ur.E:(0,xn.e)((t,e)=>{let r=[];t.subscribe((0,ve.x)(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function Jh(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Fr((i,o)=>n(i,o,r)):I.y,Yh(1),e?Kp(t):r0(()=>new sl))}function Qh(n){return(0,S.U)(()=>n)}function Xh(n){return(0,xn.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const It="primary",Sd=Symbol("RouteTitle");class s0{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function du(n){return new s0(n)}function __(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const c=r[o],d=n[o];if(c.startsWith(":"))i[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ao(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!ef(n[i],t[i]))return!1;return!0}function ef(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}return n===t}function y_(n){return Array.prototype.concat.apply([],n)}function tf(n){return n.length>0?n[n.length-1]:null}function Lr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function dr(n){return(0,s.CqO)(n)?n:(0,s.QGY)(n)?(0,Ut.D)(Promise.resolve(n)):Fe(n)}const Ql=!1,Jp={exact:function v_(n,t,e){if(!fa(n.segments,t.segments)||!hu(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!v_(n.children[r],t.children[r],e))return!1;return!0},subset:b_},nf={exact:function Ad(n,t){return Ao(n,t)},subset:function al(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>ef(n[e],t[e]))},ignored:()=>!0};function ui(n,t,e){return Jp[e.paths](n.root,t.root,e.matrixParams)&&nf[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function b_(n,t,e){return Qp(n,t,t.segments,e)}function Qp(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!fa(i,e)||t.hasChildren()||!hu(i,e,r))}if(n.segments.length===e.length){if(!fa(n.segments,e)||!hu(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!b_(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!!(fa(n.segments,i)&&hu(n.segments,i,r)&&n.children[It])&&Qp(n.children[It],t,o,r)}}function hu(n,t,e){return t.every((r,i)=>nf[e](n[i].parameters,r.parameters))}class ha{constructor(t=new zt([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=du(this.queryParams)),this._queryParamMap}toString(){return xd.serialize(this)}}class zt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Lr(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rf(this)}}class fu{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=du(this.parameters)),this._parameterMap}toString(){return af(this)}}function fa(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}let Xl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return new Nd},providedIn:"root"}),n})();class Nd{parse(t){const e=new rg(t);return new ha(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${kd(t.root,!0)}`,r=function a0(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${pu(e)}=${pu(i)}`).join("&"):`${pu(e)}=${pu(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${r}${"string"==typeof t.fragment?`#${function eg(n){return encodeURI(n)}(t.fragment)}`:""}`}}const xd=new Nd;function rf(n){return n.segments.map(t=>af(t)).join("/")}function kd(n,t){if(!n.hasChildren())return rf(n);if(t){const e=n.children[It]?kd(n.children[It],!1):"",r=[];return Lr(n.children,(i,o)=>{o!==It&&r.push(`${o}:${kd(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function Xp(n,t){let e=[];return Lr(n.children,(r,i)=>{i===It&&(e=e.concat(t(r,i)))}),Lr(n.children,(r,i)=>{i!==It&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===It?[kd(n.children[It],!1)]:[`${i}:${kd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[It]?`${rf(n)}/${e[0]}`:`${rf(n)}/(${e.join("//")})`}}function sf(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pu(n){return sf(n).replace(/%3B/gi,";")}function No(n){return sf(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gu(n){return decodeURIComponent(n)}function tg(n){return gu(n.replace(/\+/g,"%20"))}function af(n){return`${No(n.path)}${function Rd(n){return Object.keys(n).map(t=>`;${No(t)}=${No(n[t])}`).join("")}(n.parameters)}`}const l0=/^[^\/()?;=#]+/;function ec(n){const t=n.match(l0);return t?t[0]:""}const c0=/^[^=?&#]+/,d0=/^[^&#]+/;class rg{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zt([],{}):new zt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[It]=new zt(t,e)),r}parseSegment(){const t=ec(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new s.vHH(4009,Ql);return this.capture(t),new fu(gu(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ec(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=ec(this.remaining);i&&(r=i,this.capture(r))}t[gu(e)]=gu(r)}parseQueryParam(t){const e=function u0(n){const t=n.match(c0);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const c=function ng(n){const t=n.match(d0);return t?t[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=tg(e),o=tg(r);if(t.hasOwnProperty(i)){let c=t[i];Array.isArray(c)||(c=[c],t[i]=c),c.push(o)}else t[i]=o}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ec(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new s.vHH(4010,Ql);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=It);const c=this.parseChildren();e[o]=1===Object.keys(c).length?c[It]:new zt([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new s.vHH(4011,Ql)}}function lf(n){return n.segments.length>0?new zt([],{[It]:n}):n}function mu(n){const t={};for(const r of Object.keys(n.children)){const o=mu(n.children[r]);(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function h0(n){if(1===n.numberOfChildren&&n.children[It]){const t=n.children[It];return new zt(n.segments.concat(t.segments),t.children)}return n}(new zt(n.segments,t))}function eo(n){return n instanceof ha}const cf=!1;function C_(n,t,e,r,i){if(0===e.length)return to(t.root,t.root,t.root,r,i);const o=function sg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new df(!0,0,n);let t=0,e=!1;const r=n.reduce((i,o,c)=>{if("object"==typeof o&&null!=o){if(o.outlets){const d={};return Lr(o.outlets,(f,y)=>{d[y]="string"==typeof f?f.split("/"):f}),[...i,{outlets:d}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===c?(o.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?e=!0:".."===d?t++:""!=d&&i.push(d))}),i):[...i,o]},[]);return new df(e,t,r)}(e);return o.toRoot()?to(t.root,t.root,new zt([],{}),r,i):function c(f){const y=function Qi(n,t,e,r){if(n.isAbsolute)return new pa(t.root,!0,0);if(-1===r)return new pa(e,e===t.root,0);return function ga(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new s.vHH(4005,cf&&"Invalid number of '../'");i=r.segments.length}return new pa(r,!1,i-o)}(e,r+(Od(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,t,n.snapshot?._urlSegment,f),w=y.processChildren?xo(y.segmentGroup,y.index,o.commands):hf(y.segmentGroup,y.index,o.commands);return to(t.root,y.segmentGroup,w,r,i)}(n.snapshot?._lastPathIndex)}function Od(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Md(n){return"object"==typeof n&&null!=n&&n.outlets}function to(n,t,e,r,i){let c,o={};r&&Lr(r,(f,y)=>{o[y]=Array.isArray(f)?f.map(w=>`${w}`):`${f}`}),c=n===t?e:uf(n,t,e);const d=lf(mu(c));return new ha(d,o,i)}function uf(n,t,e){const r={};return Lr(n.children,(i,o)=>{r[o]=i===t?e:uf(i,t,e)}),new zt(n.segments,r)}class df{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&Od(r[0]))throw new s.vHH(4003,cf&&"Root segment cannot have matrix parameters");const i=r.find(Md);if(i&&i!==tf(r))throw new s.vHH(4004,cf&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pa{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function hf(n,t,e){if(n||(n=new zt([],{})),0===n.segments.length&&n.hasChildren())return xo(n,t,e);const r=function Fd(n,t,e){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;const c=n.segments[i],d=e[r];if(Md(d))break;const f=`${d}`,y=r<e.length-1?e[r+1]:null;if(i>0&&void 0===f)break;if(f&&y&&"object"==typeof y&&void 0===y.outlets){if(!ko(f,y,c))return o;r+=2}else{if(!ko(f,{},c))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new zt(n.segments.slice(0,r.pathIndex),{});return o.children[It]=new zt(n.segments.slice(r.pathIndex),n.children),xo(o,0,i)}return r.match&&0===i.length?new zt(n.segments,{}):r.match&&!n.hasChildren()?Ld(n,t,e):r.match?xo(n,0,i):Ld(n,t,e)}function xo(n,t,e){if(0===e.length)return new zt(n.segments,{});{const r=function Pd(n){return Md(n[0])?n[0].outlets:{[It]:n}}(e),i={};if(!r[It]&&n.children[It]&&1===n.numberOfChildren&&0===n.children[It].segments.length){const o=xo(n.children[It],t,e);return new zt(n.segments,o.children)}return Lr(r,(o,c)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[c]=hf(n.children[c],t,o))}),Lr(n.children,(o,c)=>{void 0===r[c]&&(i[c]=o)}),new zt(n.segments,i)}}function Ld(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const o=e[i];if(Md(o)){const f=_u(o.outlets);return new zt(r,f)}if(0===i&&Od(e[0])){r.push(new fu(n.segments[t].path,T_(e[0]))),i++;continue}const c=Md(o)?o.outlets[It]:`${o}`,d=i<e.length-1?e[i+1]:null;c&&d&&Od(d)?(r.push(new fu(c,T_(d))),i+=2):(r.push(new fu(c,{})),i++)}return new zt(r,{})}function _u(n){const t={};return Lr(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=Ld(new zt([],{}),0,e))}),t}function T_(n){const t={};return Lr(n,(e,r)=>t[r]=`${e}`),t}function ko(n,t,e){return n==e.path&&Ao(t,e.parameters)}const yu="imperative";class Ro{constructor(t,e){this.id=t,this.url=e}}class ag extends Ro{constructor(t,e,r="imperative",i=null){super(t,e),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cl extends Ro{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vu extends Ro{constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Cr extends Ro{constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i,this.type=16}}class tc extends Ro{constructor(t,e,r,i){super(t,e),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ul extends Ro{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class f0 extends Ro{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ma extends Ro{constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ff extends Ro{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E_ extends Ro{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pf{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class p0{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gf{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mf{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lg{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class D_{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cg{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let _=(()=>{class n{createUrlTree(e,r,i,o,c,d){return C_(e||r.root,i,o,c,d)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),x=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(t){return _.\u0275fac(t)},providedIn:"root"}),n})();class P{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Y(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=Y(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=ue(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return ue(t,this._root).map(e=>e.value)}}function Y(n,t){if(n===t.value)return t;for(const e of t.children){const r=Y(n,e);if(r)return r}return null}function ue(n,t){if(n===t.value)return[t];for(const e of t.children){const r=ue(n,e);if(r.length)return r.unshift(t),r}return[]}class Be{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function ot(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Nt extends P{constructor(t,e){super(t),this.snapshot=e,_f(this,t)}toString(){return this.snapshot.toString()}}function Dt(n,t){const e=function Ur(n,t){const c=new bu([],{},{},"",{},It,t,null,n.root,-1,{});return new dg("",new Be(c,[]))}(n,t),r=new br([new fu("",{})]),i=new br({}),o=new br({}),c=new br({}),d=new br(""),f=new Ei(r,i,c,d,o,It,t,e.root);return f.snapshot=e.root,new Nt(new Be(f,[]),e)}class Ei{constructor(t,e,r,i,o,c,d,f){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=d,this.title=this.data?.pipe((0,S.U)(y=>y[Sd]))??Fe(void 0),this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,S.U)(t=>du(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,S.U)(t=>du(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ud(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],o=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function ug(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(r))}class bu{get title(){return this.data?.[Sd]}constructor(t,e,r,i,o,c,d,f,y,w,E){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=d,this.routeConfig=f,this._urlSegment=y,this._lastPathIndex=w,this._resolve=E}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=du(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=du(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class dg extends P{constructor(t,e){super(e),this.url=t,_f(this,e)}toString(){return yf(this._root)}}function _f(n,t){t.value._routerState=n,t.children.forEach(e=>_f(n,e))}function yf(n){const t=n.children.length>0?` { ${n.children.map(yf).join(", ")} } `:"";return`${n.value}${t}`}function nc(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Ao(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Ao(t.params,e.params)||n.params.next(e.params),function Id(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Ao(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Ao(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Rs(n,t){const e=Ao(n.params,t.params)&&function o0(n,t){return fa(n,t)&&n.every((e,r)=>Ao(e.parameters,t[r].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||Rs(n.parent,t.parent))}function ic(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function S_(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ic(n,r,i);return ic(n,r)})}(n,t,e);return new Be(r,i)}{if(n.shouldAttach(t.value)){const o=n.retrieve(t.value);if(null!==o){const c=o.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(d=>ic(n,d)),c}}const r=function vf(n){return new Ei(new br(n.url),new br(n.params),new br(n.queryParams),new br(n.fragment),new br(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(o=>ic(n,o));return new Be(r,i)}}const I_="ngNavigationCancelingError";function SA(n,t){const{redirectTo:e,navigationBehaviorOptions:r}=eo(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=IA(!1,0,t);return i.url=e,i.navigationBehaviorOptions=r,i}function IA(n,t,e){const r=new Error("NavigationCancelingError: "+(n||""));return r[I_]=!0,r.cancellationCode=t,e&&(r.url=e),r}function A_(n){return N_(n)&&eo(n.url)}function N_(n){return n&&n[I_]}class OL{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new x_,this.attachRef=null}}let x_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new OL,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hg=!1;let k_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=It,this.activateEvents=new s.vpe,this.deactivateEvents=new s.vpe,this.attachEvents=new s.vpe,this.detachEvents=new s.vpe,this.parentContexts=(0,s.f3M)(x_),this.location=(0,s.f3M)(s.s_b),this.changeDetector=(0,s.f3M)(s.sBO),this.environmentInjector=(0,s.f3M)(s.lqb)}ngOnChanges(e){if(e.name){const{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new s.vHH(4012,hg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new s.vHH(4012,hg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new s.vHH(4012,hg);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new s.vHH(4013,hg);this._activatedRoute=e;const i=this.location,c=e.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,f=new AA(e,d,i.injector);if(r&&function NA(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(c);this.activated=i.createComponent(y,i.length,f)}else this.activated=i.createComponent(c,{index:i.length,injector:f,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[s.TTD]}),n})();class AA{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===Ei?this.route:t===x_?this.childContexts:this.parent.get(t,e)}}let g0=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[s.jDz],decls:1,vars:0,template:function(e,r){1&e&&s._UZ(0,"router-outlet")},dependencies:[k_],encapsulation:2}),n})();function m0(n,t){return n.providers&&!n._injector&&(n._injector=(0,s.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}function R_(n){const t=n.children&&n.children.map(R_),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==It&&(e.component=g0),e}function Oo(n){return n.outlet||It}function S1(n,t){const e=n.filter(r=>Oo(r)===t);return e.push(...n.filter(r=>Oo(r)!==t)),e}function fg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class I1{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),nc(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=ot(e);t.children.forEach(o=>{const c=o.value.outlet;this.deactivateRoutes(o,i[c],r),delete i[c]}),Lr(i,(o,c)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){const i=t.value,o=e?e.value:null;if(i===o)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=ot(t);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);if(r&&r.outlet){const c=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=ot(t);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=ot(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new D_(o.value.snapshot))}),t.children.length&&this.forwardEvent(new mf(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,o=e?e.value:null;if(nc(i),i===o)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),nc(d.route.value),this.activateChildRoutes(t,null,c.children)}else{const d=fg(i.snapshot),f=d?.get(s._Vd)??null;c.attachRef=null,c.route=i,c.resolver=f,c.injector=d,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,r)}}class OA{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class y0{constructor(t,e){this.component=t,this.route=e}}function pg(n,t,e){const r=n._root;return bf(r,t?t._root:null,e,[r.value])}function Bd(n,t){const e=Symbol(),r=t.get(n,e);return r===e?"function"!=typeof n||(0,s.Z0I)(n)?t.get(n):n:r}function bf(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=ot(t);return n.children.forEach(c=>{(function A1(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,c=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){const f=function MA(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!fa(n.url,t.url);case"pathParamsOrQueryParamsChange":return!fa(n.url,t.url)||!Ao(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rs(n,t)||!Ao(n.queryParams,t.queryParams);default:return!Rs(n,t)}}(c,o,o.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new OA(r)):(o.data=c.data,o._resolvedData=c._resolvedData),bf(n,t,o.component?d?d.children:null:e,r,i),f&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new y0(d.outlet.component,c))}else c&&gg(t,d,i),i.canActivateChecks.push(new OA(r)),bf(n,null,o.component?d?d.children:null:e,r,i)})(c,o[c.value.outlet],e,r.concat([c.value]),i),delete o[c.value.outlet]}),Lr(o,(c,d)=>gg(c,e.getContext(d),i)),i}function gg(n,t,e){const r=ot(n),i=n.value;Lr(r,(o,c)=>{gg(o,i.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new y0(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function wf(n){return"function"==typeof n}function sc(n){return n instanceof sl||"EmptyError"===n?.name}const O_=Symbol("INITIAL_VALUE");function wu(){return Bn(n=>wt(n.map(t=>t.pipe(li(1),ca(O_)))).pipe((0,S.U)(t=>{for(const e of t)if(!0!==e){if(e===O_)return O_;if(!1===e||e instanceof ha)return e}return!0}),Fr(t=>t!==O_),li(1)))}function D0(n){return(0,la.z)((0,ci.b)(t=>{if(eo(t))throw SA(0,t)}),(0,S.U)(t=>!0===t))}const S0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function R1(n,t,e,r,i){const o=I0(n,t,e);return o.matched?function Cf(n,t,e,r){const i=t.canMatch;return i&&0!==i.length?Fe(i.map(c=>{const d=Bd(c,n);return dr(function C0(n){return n&&wf(n.canMatch)}(d)?d.canMatch(t,e):n.runInContext(()=>d(t,e)))})).pipe(wu(),D0()):Fe(!0)}(r=m0(t,r),t,e).pipe((0,S.U)(c=>!0===c?o:{...S0})):Fe(o)}function I0(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...S0}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const i=(t.matcher||__)(e,n,t);if(!i)return{...S0};const o={};Lr(i.posParams,(d,f)=>{o[f]=d.path});const c=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function Tf(n,t,e,r){if(e.length>0&&function jA(n,t,e){return e.some(r=>A0(n,t,r)&&Oo(r)!==It)}(n,e,r)){const o=new zt(t,function O1(n,t,e,r){const i={};i[It]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const o of e)if(""===o.path&&Oo(o)!==It){const c=new zt([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,i[Oo(o)]=c}return i}(n,t,r,new zt(e,n.children)));return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function M1(n,t,e){return e.some(r=>A0(n,t,r))}(n,e,r)){const o=new zt(n.segments,function VA(n,t,e,r,i){const o={};for(const c of r)if(A0(n,e,c)&&!i[Oo(c)]){const d=new zt([],{});d._sourceSegment=n,d._segmentIndexShift=t.length,o[Oo(c)]=d}return{...i,...o}}(n,t,e,r,n.children));return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const i=new zt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:e}}function A0(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function P1(n,t,e,r){return!!(Oo(n)===r||r!==It&&A0(t,e,n))&&("**"===n.path||I0(t,n,e).matched)}function Ef(n,t,e){return 0===t.length&&!n.children[e]}const F_=!1;class oc{constructor(t){this.segmentGroup=t||null}}class Df{constructor(t){this.urlTree=t}}function mg(n){return Io(new oc(n))}function N0(n){return Io(new Df(n))}class F1{constructor(t,e,r,i,o){this.injector=t,this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const t=Tf(this.urlTree.root,[],[],this.config).segmentGroup,e=new zt(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,It).pipe((0,S.U)(o=>this.createUrlTree(mu(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Jl(o=>{if(o instanceof Df)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof oc?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,It).pipe((0,S.U)(i=>this.createUrlTree(mu(i),t.queryParams,t.fragment))).pipe(Jl(i=>{throw i instanceof oc?this.noMatchError(i):i}))}noMatchError(t){return new s.vHH(4002,F_)}createUrlTree(t,e,r){const i=lf(t);return new ha(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe((0,S.U)(o=>new zt([],o))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,Ut.D)(i).pipe(Yl(o=>{const c=r.children[o],d=S1(e,o);return this.expandSegmentGroup(t,d,c,o).pipe((0,S.U)(f=>({segment:f,outlet:o})))}),da((o,c)=>(o[c.outlet]=c.segment,o),{}),Jh())}expandSegment(t,e,r,i,o,c){return(0,Ut.D)(r).pipe(Yl(d=>this.expandSegmentAgainstRoute(t,e,r,d,i,o,c).pipe(Jl(y=>{if(y instanceof oc)return Fe(null);throw y}))),ua(d=>!!d),Jl((d,f)=>{if(sc(d))return Ef(e,i,o)?Fe(new zt([],{})):mg(e);throw d}))}expandSegmentAgainstRoute(t,e,r,i,o,c,d){return P1(i,e,o,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,o,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c):mg(e):mg(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?N0(o):this.lineralizeSegments(r,o).pipe((0,er.z)(c=>{const d=new zt(c,{});return this.expandSegment(t,d,e,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c){const{matched:d,consumedSegments:f,remainingSegments:y,positionalParamSegments:w}=I0(e,i,o);if(!d)return mg(e);const E=this.applyRedirectCommands(f,i.redirectTo,w);return i.redirectTo.startsWith("/")?N0(E):this.lineralizeSegments(i,E).pipe((0,er.z)(A=>this.expandSegment(t,e,r,A.concat(y),c,!1)))}matchSegmentAgainstRoute(t,e,r,i,o){return"**"===r.path?(t=m0(r,t),r.loadChildren?(r._loadedRoutes?Fe({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe((0,S.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new zt(i,{})))):Fe(new zt(i,{}))):R1(e,r,i,t).pipe(Bn(({matched:c,consumedSegments:d,remainingSegments:f})=>c?this.getChildConfig(t=r._injector??t,r,i).pipe((0,er.z)(w=>{const E=w.injector??t,A=w.routes,{segmentGroup:k,slicedSegments:M}=Tf(e,d,f,A),V=new zt(k.segments,k.children);if(0===M.length&&V.hasChildren())return this.expandChildren(E,A,V).pipe((0,S.U)(Ie=>new zt(d,Ie)));if(0===A.length&&0===M.length)return Fe(new zt(d,{}));const W=Oo(r)===o;return this.expandSegment(E,V,A,M,W?It:o,!0).pipe((0,S.U)(he=>new zt(d.concat(he.segments),he.children)))})):mg(e)))}getChildConfig(t,e,r){return e.children?Fe({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Fe({routes:e._loadedRoutes,injector:e._loadedInjector}):function BA(n,t,e,r){const i=t.canLoad;return void 0===i||0===i.length?Fe(!0):Fe(i.map(c=>{const d=Bd(c,n);return dr(function b0(n){return n&&wf(n.canLoad)}(d)?d.canLoad(t,e):n.runInContext(()=>d(t,e)))})).pipe(wu(),D0())}(t,e,r).pipe((0,er.z)(i=>i?this.configLoader.loadChildren(t,e).pipe((0,ci.b)(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):function $A(n){return Io(IA(F_,3))}())):Fe({routes:[],injector:t})}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Fe(r);if(i.numberOfChildren>1||!i.children[It])return t.redirectTo,Io(new s.vHH(4e3,F_));i=i.children[It]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreateUrlTree(t,e,r,i){const o=this.createSegmentGroup(t,e.root,r,i);return new ha(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Lr(t,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[o]=e[d]}else r[o]=i}),r}createSegmentGroup(t,e,r,i){const o=this.createSegments(t,e.segments,r,i);let c={};return Lr(e.children,(d,f)=>{c[f]=this.createSegmentGroup(t,d,r,i)}),new zt(o,c)}createSegments(t,e,r,i){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new s.vHH(4001,F_);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}class x0{}class _g{constructor(t,e,r,i,o,c,d){this.injector=t,this.rootComponentType=e,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=c,this.urlSerializer=d}recognize(){const t=Tf(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,It).pipe((0,S.U)(e=>{if(null===e)return null;const r=new bu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},It,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Be(r,e),o=new dg(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(t){const e=t.value,r=Ud(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,e,r):this.processSegment(t,e,r,r.segments,i)}processChildren(t,e,r){return(0,Ut.D)(Object.keys(r.children)).pipe(Yl(i=>{const o=r.children[i],c=S1(e,i);return this.processSegmentGroup(t,c,o,i)}),da((i,o)=>i&&o?(i.push(...o),i):null),function m_(n,t=!1){return(0,xn.e)((e,r)=>{let i=0;e.subscribe((0,ve.x)(r,o=>{const c=n(o,i++);(c||t)&&r.next(o),!c&&r.complete()}))})}(i=>null!==i),Kp(null),Jh(),(0,S.U)(i=>{if(null===i)return null;const o=U1(i);return function qA(n){n.sort((t,e)=>t.value.outlet===It?-1:e.value.outlet===It?1:t.value.outlet.localeCompare(e.value.outlet))}(o),o}))}processSegment(t,e,r,i,o){return(0,Ut.D)(e).pipe(Yl(c=>this.processSegmentAgainstRoute(c._injector??t,c,r,i,o)),ua(c=>!!c),Jl(c=>{if(sc(c))return Ef(r,i,o)?Fe([]):Fe(null);throw c}))}processSegmentAgainstRoute(t,e,r,i,o){if(e.redirectTo||!P1(e,r,i,o))return Fe(null);let c;if("**"===e.path){const d=i.length>0?tf(i).parameters:{},f=V1(r)+i.length;c=Fe({snapshot:new bu(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dl(e),Oo(e),e.component??e._loadedComponent??null,e,B1(r),f,j1(e)),consumedSegments:[],remainingSegments:[]})}else c=R1(r,e,i,t).pipe((0,S.U)(({matched:d,consumedSegments:f,remainingSegments:y,parameters:w})=>{if(!d)return null;const E=V1(r)+f.length;return{snapshot:new bu(f,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dl(e),Oo(e),e.component??e._loadedComponent??null,e,B1(r),E,j1(e)),consumedSegments:f,remainingSegments:y}}));return c.pipe(Bn(d=>{if(null===d)return Fe(null);const{snapshot:f,consumedSegments:y,remainingSegments:w}=d;t=e._injector??t;const E=e._loadedInjector??t,A=function zA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:k,slicedSegments:M}=Tf(r,y,w,A.filter(W=>void 0===W.redirectTo));if(0===M.length&&k.hasChildren())return this.processChildren(E,A,k).pipe((0,S.U)(W=>null===W?null:[new Be(f,W)]));if(0===A.length&&0===M.length)return Fe([new Be(f,[])]);const V=Oo(e)===o;return this.processSegment(E,A,k,M,V?It:o).pipe((0,S.U)(W=>null===W?null:[new Be(f,W)]))}))}}function WA(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function U1(n){const t=[],e=new Set;for(const r of n){if(!WA(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=U1(r.children);t.push(new Be(r.value,i))}return t.filter(r=>!e.has(r))}function B1(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function V1(n){let t=n,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function dl(n){return n.data||{}}function j1(n){return n.resolve||{}}function R0(n){return"string"==typeof n.title||null===n.title}function O0(n){return Bn(t=>{const e=n(t);return e?(0,Ut.D)(e).pipe((0,S.U)(()=>t)):Fe(t)})}const Sf=new s.OlP("ROUTES");let P0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,s.f3M)(s.Sil)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Fe(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=dr(e.loadComponent()).pipe((0,S.U)(G1),(0,ci.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Xh(()=>{this.componentLoaders.delete(e)})),i=new Wp(r,()=>new dn.x).pipe(Kl());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Fe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,S.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let f,y,w=!1;Array.isArray(d)?y=d:(f=d.create(e).injector,y=y_(f.get(Sf,[],s.XFs.Self|s.XFs.Optional)));return{routes:y.map(R_),injector:f}}),Xh(()=>{this.childrenLoaders.delete(r)})),c=new Wp(o,()=>new dn.x).pipe(Kl());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(e){return dr(e()).pipe((0,S.U)(G1),(0,er.z)(r=>r instanceof s.YKP||Array.isArray(r)?Fe(r):(0,Ut.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function G1(n){return function _a(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let U_=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new dn.x,this.configLoader=(0,s.f3M)(P0),this.environmentInjector=(0,s.f3M)(s.lqb),this.urlSerializer=(0,s.f3M)(Xl),this.rootContexts=(0,s.f3M)(x_),this.navigationId=0,this.afterPreactivation=()=>Fe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new p0(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new pf(i))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:r})}setupNavigations(e){return this.transitions=new br({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:yu,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Fr(r=>0!==r.id),(0,S.U)(r=>({...r,extractedUrl:e.urlHandlingStrategy.extract(r.rawUrl)})),Bn(r=>{let i=!1,o=!1;return Fe(r).pipe((0,ci.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Bn(c=>{const d=e.browserUrlTree.toString(),f=!e.navigated||c.extractedUrl.toString()!==d||d!==e.currentUrlTree.toString();if(!f&&"reload"!==(c.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const w="";return this.events.next(new Cr(c.id,e.serializeUrl(r.rawUrl),w,0)),e.rawUrlTree=c.rawUrl,c.resolve(null),ur.E}if(e.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Z1(c.source)&&(e.browserUrlTree=c.extractedUrl),Fe(c).pipe(Bn(w=>{const E=this.transitions?.getValue();return this.events.next(new ag(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),E!==this.transitions?.getValue()?ur.E:Promise.resolve(w)}),function L1(n,t,e,r){return Bn(i=>function GA(n,t,e,r,i){return new F1(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe((0,S.U)(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),(0,ci.b)(w=>{this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},r.urlAfterRedirects=w.urlAfterRedirects}),function YA(n,t,e,r,i){return(0,er.z)(o=>function k0(n,t,e,r,i,o,c="emptyOnly"){return new _g(n,t,e,r,i,c,o).recognize().pipe(Bn(d=>null===d?function ZA(n){return new Tn.y(t=>t.error(n))}(new x0):Fe(d)))}(n,t,e,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe((0,S.U)(c=>({...o,targetSnapshot:c}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),(0,ci.b)(w=>{if(r.targetSnapshot=w.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!w.extras.skipLocationChange){const A=e.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);e.setBrowserUrl(A,w)}e.browserUrlTree=w.urlAfterRedirects}const E=new ul(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(E)}));if(f&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:w,extractedUrl:E,source:A,restoredState:k,extras:M}=c,V=new ag(w,this.urlSerializer.serialize(E),A,k);this.events.next(V);const W=Dt(E,this.rootComponentType).snapshot;return Fe(r={...c,targetSnapshot:W,urlAfterRedirects:E,extras:{...M,skipLocationChange:!1,replaceUrl:!1}})}{const w="";return this.events.next(new Cr(c.id,e.serializeUrl(r.extractedUrl),w,1)),e.rawUrlTree=c.rawUrl,c.resolve(null),ur.E}}),(0,ci.b)(c=>{const d=new f0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),(0,S.U)(c=>r={...c,guards:pg(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function M_(n,t){return(0,er.z)(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:c}}=e;return 0===c.length&&0===o.length?Fe({...e,guardsResult:!0}):function LA(n,t,e,r){return(0,Ut.D)(n).pipe((0,er.z)(i=>function UA(n,t,e,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Fe(o.map(d=>{const f=fg(t)??i,y=Bd(d,f);return dr(function PA(n){return n&&wf(n.canDeactivate)}(y)?y.canDeactivate(n,t,e,r):f.runInContext(()=>y(n,t,e,r))).pipe(ua())})).pipe(wu()):Fe(!0)}(i.component,i.route,e,t,r)),ua(i=>!0!==i,!0))}(c,r,i,n).pipe((0,er.z)(d=>d&&function N1(n){return"boolean"==typeof n}(d)?function T0(n,t,e,r){return(0,Ut.D)(t).pipe(Yl(i=>wr(function Vd(n,t){return null!==n&&t&&t(new gf(n)),Fe(!0)}(i.route.parent,r),function P_(n,t){return null!==n&&t&&t(new lg(n)),Fe(!0)}(i.route,r),function E0(n,t,e){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(c=>function v0(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>ol(()=>Fe(c.guards.map(f=>{const y=fg(c.node)??e,w=Bd(f,y);return dr(function w0(n){return n&&wf(n.canActivateChild)}(w)?w.canActivateChild(r,n):y.runInContext(()=>w(r,n))).pipe(ua())})).pipe(wu())));return Fe(o).pipe(wu())}(n,i.path,e),function k1(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Fe(!0);const i=r.map(o=>ol(()=>{const c=fg(t)??e,d=Bd(o,c);return dr(function PL(n){return n&&wf(n.canActivate)}(d)?d.canActivate(t,n):c.runInContext(()=>d(t,n))).pipe(ua())}));return Fe(i).pipe(wu())}(n,i.route,e))),ua(i=>!0!==i,!0))}(r,o,n,t):Fe(d)),(0,S.U)(d=>({...e,guardsResult:d})))})}(this.environmentInjector,c=>this.events.next(c)),(0,ci.b)(c=>{if(r.guardsResult=c.guardsResult,eo(c.guardsResult))throw SA(0,c.guardsResult);const d=new ma(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),Fr(c=>!!c.guardsResult||(e.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),O0(c=>{if(c.guards.canActivateChecks.length)return Fe(c).pipe((0,ci.b)(d=>{const f=new ff(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Bn(d=>{let f=!1;return Fe(d).pipe(function FL(n,t){return(0,er.z)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return Fe(e);let o=0;return(0,Ut.D)(i).pipe(Yl(c=>function LL(n,t,e,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!R0(i)&&(o[Sd]=i.title),function H1(n,t,e,r){const i=function UL(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Fe({});const o={};return(0,Ut.D)(i).pipe((0,er.z)(c=>function $1(n,t,e,r){const i=fg(t)??r,o=Bd(n,i);return dr(o.resolve?o.resolve(t,e):i.runInContext(()=>o(t,e)))}(n[c],t,e,r).pipe(ua(),(0,ci.b)(d=>{o[c]=d}))),Yh(1),Qh(o),Jl(c=>sc(c)?ur.E:Io(c)))}(o,n,t,r).pipe((0,S.U)(c=>(n._resolvedData=c,n.data=Ud(n,e).resolve,i&&R0(i)&&(n.data[Sd]=i.title),null)))}(c.route,r,n,t)),(0,ci.b)(()=>o++),Yh(1),(0,er.z)(c=>o===i.length?Fe(e):ur.E))})}(e.paramsInheritanceStrategy,this.environmentInjector),(0,ci.b)({next:()=>f=!0,complete:()=>{f||(e.restoreHistory(d),this.cancelNavigationTransition(d,"",2))}}))}),(0,ci.b)(d=>{const f=new E_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),O0(c=>{const d=f=>{const y=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(f.routeConfig).pipe((0,ci.b)(w=>{f.component=w}),(0,S.U)(()=>{})));for(const w of f.children)y.push(...d(w));return y};return wt(d(c.targetSnapshot.root)).pipe(Kp(),li(1))}),O0(()=>this.afterPreactivation()),(0,S.U)(c=>{const d=function rc(n,t,e){const r=ic(n,t._root,e?e._root:void 0);return new Nt(r,t)}(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:d}}),(0,ci.b)(c=>{e.currentUrlTree=c.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),e.routerState=c.targetRouterState,"deferred"===e.urlUpdateStrategy&&(c.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,c),e.browserUrlTree=c.urlAfterRedirects)}),((n,t,e)=>(0,S.U)(r=>(new I1(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c)),li(1),(0,ci.b)({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new cl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),Xh(()=>{i||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Jl(c=>{if(o=!0,N_(c)){A_(c)||(e.navigated=!0,e.restoreHistory(r,!0));const d=new vu(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(d),A_(c)){const f=e.urlHandlingStrategy.merge(c.url,e.rawUrlTree),y={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||Z1(r.source)};e.scheduleNavigation(f,yu,null,y,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{e.restoreHistory(r,!0);const d=new tc(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(d);try{r.resolve(e.errorHandler(c))}catch(f){r.reject(f)}}return ur.E}))}))}cancelNavigationTransition(e,r,i){const o=new vu(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Z1(n){return n!==yu}let q1=(()=>{class n{buildTitle(e){let r,i=e.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===It);return r}getResolvedTitleForRoute(e){return e.data[Sd]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return(0,s.f3M)(JA)},providedIn:"root"}),n})(),JA=(()=>{class n extends q1{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Hp))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),z1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return(0,s.f3M)(XA)},providedIn:"root"}),n})();class QA{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let XA=(()=>{class n extends QA{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ht=new s.OlP("",{providedIn:"root",factory:()=>({})});let W1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return(0,s.f3M)(K1)},providedIn:"root"}),n})(),K1=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tN(n){throw n}function nN(n,t,e){return t.parse("/")}const Y1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Tr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,s.f3M)(s.c2e),this.isNgZoneEnabled=!1,this.options=(0,s.f3M)(Ht,{optional:!0})||{},this.errorHandler=this.options.errorHandler||tN,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||nN,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,s.f3M)(W1),this.routeReuseStrategy=(0,s.f3M)(z1),this.urlCreationStrategy=(0,s.f3M)(x),this.titleStrategy=(0,s.f3M)(q1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=y_((0,s.f3M)(Sf,{optional:!0})??[]),this.navigationTransitions=(0,s.f3M)(U_),this.urlSerializer=(0,s.f3M)(Xl),this.location=(0,s.f3M)(Ge),this.isNgZoneEnabled=(0,s.f3M)(s.R0b)instanceof s.R0b&&s.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ha,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Dt(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),yu,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,r,e.state)},0)}))}navigateToSyncWithBrowser(e,r,i){const o={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const f={...i};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(o.state=f)}const d=this.parseUrl(e);this.scheduleNavigation(d,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(R_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:o,fragment:c,queryParamsHandling:d,preserveFragment:f}=r,y=f?this.currentUrlTree.fragment:c;let w=null;switch(d){case"merge":w={...this.currentUrlTree.queryParams,...o};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=o||null}return null!==w&&(w=this.removeEmptyProps(w)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,e,w,y??null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=eo(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,yu,null,r)}navigate(e,r={skipLocationChange:!1}){return function iN(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new s.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?{...Y1}:!1===r?{...rN}:r,eo(e))return ui(this.currentUrlTree,e,i);const o=this.parseUrl(e);return ui(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const o=e[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(e,r,i,o,c){if(this.disposed)return Promise.resolve(!1);let d,f,y,w;return c?(d=c.resolve,f=c.reject,y=c.promise):y=new Promise((E,A)=>{d=E,f=A}),w="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:w,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:d,reject:f,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(E=>Promise.reject(E))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",o)}}restoreHistory(e,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class L0{}let U0=(()=>{class n{constructor(e,r,i,o,c){this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Fr(e=>e instanceof cl),Yl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,s.MMx)(o.providers,e,`Route: ${o.path}`));const c=o._injector??e,d=o._loadedInjector??c;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(c,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(d,o.children??o._loadedRoutes))}return(0,Ut.D)(i).pipe((0,Ct.J)())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):Fe(null);const o=i.pipe((0,er.z)(c=>null===c?Fe(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Ut.D)([o,c]).pipe((0,Ct.J)())}return o})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Tr),s.LFG(s.Sil),s.LFG(s.lqb),s.LFG(L0),s.LFG(P0))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bg=new s.OlP("");let Q1=(()=>{class n{constructor(e,r,i,o,c={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof ag?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof cl&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof cg&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new cg(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(e){s.$Z()},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();var Mo=(()=>((Mo=Mo||{})[Mo.COMPLETE=0]="COMPLETE",Mo[Mo.FAILED=1]="FAILED",Mo[Mo.REDIRECTING=2]="REDIRECTING",Mo))();const wg=!1;function jd(n,t){return{\u0275kind:n,\u0275providers:t}}const V0=new s.OlP("",{providedIn:"root",factory:()=>!1});function Cg(){const n=(0,s.f3M)(s.zs3);return t=>{const e=n.get(s.z2F);if(t!==e.components[0])return;const r=n.get(Tr),i=n.get(X1);1===n.get(V_)&&r.initialNavigation(),n.get(eT,null,s.XFs.Optional)?.setUpPreloading(),n.get(bg,null,s.XFs.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const X1=new s.OlP(wg?"bootstrap done indicator":"",{factory:()=>new dn.x}),V_=new s.OlP(wg?"initial navigation":"",{providedIn:"root",factory:()=>1});function lN(){let n=[];return n=wg?[{provide:s.Xts,multi:!0,useFactory:()=>{const t=(0,s.f3M)(Tr);return()=>t.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function v(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],jd(1,n)}const eT=new s.OlP(wg?"router preloader":"");function cN(n){return jd(0,[{provide:eT,useExisting:U0},{provide:L0,useExisting:n}])}const Nf=!1,hN=new s.OlP(Nf?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),j0=[Ge,{provide:Xl,useClass:Nd},Tr,x_,{provide:Ei,useFactory:function B0(n){return n.routerState.root},deps:[Tr]},P0,Nf?{provide:V0,useValue:!0}:[]];function fN(){return new s.PXZ("Router",Tr)}let nT=(()=>{class n{constructor(e){}static forRoot(e,r){return{ngModule:n,providers:[j0,Nf&&r?.enableTracing?lN().\u0275providers:[],{provide:Sf,multi:!0,useValue:e},{provide:hN,useFactory:iT,deps:[[Tr,new s.FiY,new s.tp0]]},{provide:Ht,useValue:r||{}},r?.useHash?{provide:ut,useClass:xe}:{provide:ut,useClass:Oe},{provide:bg,useFactory:()=>{const n=(0,s.f3M)($a),t=(0,s.f3M)(s.R0b),e=(0,s.f3M)(Ht),r=(0,s.f3M)(U_),i=(0,s.f3M)(Xl);return e.scrollOffset&&n.setOffset(e.scrollOffset),new Q1(i,r,n,t,e)}},r?.preloadingStrategy?cN(r.preloadingStrategy).\u0275providers:[],{provide:s.PXZ,multi:!0,useFactory:fN},r?.initialNavigation?gN(r):[],[{provide:sT,useFactory:Cg},{provide:s.tb,multi:!0,useExisting:sT}]]}}static forChild(e){return{ngModule:n,providers:[{provide:Sf,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(hN,8))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[g0]}),n})();function iT(n){if(Nf&&n)throw new s.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function gN(n){return["disabled"===n.initialNavigation?jd(3,[{provide:s.ip1,multi:!0,useFactory:()=>{const t=(0,s.f3M)(Tr);return()=>{t.setUpLocationChangeListener()}}},{provide:V_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?jd(2,[{provide:V_,useValue:0},{provide:s.ip1,multi:!0,deps:[s.zs3],useFactory:t=>{const e=t.get(_e,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const i=t.get(Tr),o=t.get(X1);(function jL(n,t){n.events.pipe(Fr(e=>e instanceof cl||e instanceof vu||e instanceof tc||e instanceof Cr),(0,S.U)(e=>e instanceof cl||e instanceof Cr?Mo.COMPLETE:e instanceof vu&&(0===e.code||1===e.code)?Mo.REDIRECTING:Mo.FAILED),Fr(e=>e!==Mo.REDIRECTING),li(1)).subscribe(()=>{t()})})(i,()=>{r(!0)}),t.get(U_).afterPreactivation=()=>(r(!0),o.closed?Fe(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const sT=new s.OlP(Nf?"Router Initializer":"");class H_{}class Eg{}const ya="*";function $_(n,t){return{type:7,name:n,definitions:t,options:{}}}function H0(n,t=null){return{type:4,styles:t,timings:n}}function G_(n,t=null){return{type:2,steps:n,options:t}}function Hd(n){return{type:6,styles:n,offset:null}}function Z_(n,t,e){return{type:0,name:n,styles:t,options:e}}function lT(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function cT(n){Promise.resolve().then(n)}class Dg{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){cT(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class Os{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,r=0,i=0;const o=this.players.length;0==o?cT(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==o&&this._onFinish()}),c.onDestroy(()=>{++r==o&&this._onDestroy()}),c.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){const t=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}const $0="!";function vN(n){return new s.vHH(3e3,!1)}function ac(){return typeof window<"u"&&typeof window.document<"u"}function kf(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function va(n){switch(n.length){case 0:return new Dg;case 1:return n[0];default:return new Os(n)}}function Rf(n,t,e,r,i=new Map,o=new Map){const c=[],d=[];let f=-1,y=null;if(r.forEach(w=>{const E=w.get("offset"),A=E==f,k=A&&y||new Map;w.forEach((M,V)=>{let W=V,ne=M;if("offset"!==V)switch(W=t.normalizePropertyName(W,c),ne){case $0:ne=i.get(V);break;case ya:ne=o.get(V);break;default:ne=t.normalizeStyleValue(V,W,ne,c)}k.set(W,ne)}),A||d.push(k),y=k,f=E}),c.length)throw function MN(n){return new s.vHH(3502,!1)}();return d}function Y0(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&K_(e,"start",n)));break;case"done":n.onDone(()=>r(e&&K_(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&K_(e,"destroy",n)))}}function K_(n,t,e){const o=Y_(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),c=n._data;return null!=c&&(o._data=c),o}function Y_(n,t,e,r,i="",o=0,c){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:o,disabled:!!c}}function no(n,t,e){let r=n.get(t);return r||n.set(t,r=e),r}function mT(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}let $d=(n,t)=>!1,_T=(n,t,e)=>[],LN=null;function J0(n){const t=n.parentNode||n.host;return t===LN?null:t}(kf()||typeof Element<"u")&&(ac()?(LN=(()=>document.documentElement)(),$d=(n,t)=>{for(;t;){if(t===n)return!0;t=J0(t)}return!1}):$d=(n,t)=>n.contains(t),_T=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const r=n.querySelector(t);return r?[r]:[]});let Gd=null,yT=!1;const J_=$d,bT=_T;let CT=(()=>{class n{validateStyleProperty(e){return function BN(n){Gd||(Gd=function vT(){return typeof document<"u"?document.body:null}()||{},yT=!!Gd.style&&"WebkitAppearance"in Gd.style);let t=!0;return Gd.style&&!function UN(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Gd.style,!t&&yT&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Gd.style)),t}(e)}matchesElement(e,r){return!1}containsElement(e,r){return J_(e,r)}getParentElement(e){return J0(e)}query(e,r,i){return bT(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,o,c,d=[],f){return new Dg(i,o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Q0=(()=>{class n{}return n.NOOP=new CT,n})();const VN=1e3,X0="ng-enter",Q_="ng-leave",Sg="ng-trigger",Ig=".ng-trigger",ET="ng-animating",DT=".ng-animating";function fl(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:ST(parseFloat(t[1]),t[2])}function ST(n,t){return"s"===t?n*VN:n}function Zd(n,t,e){return n.hasOwnProperty("duration")?n:function HN(n,t,e){let i,o=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(vN()),{duration:0,delay:0,easing:""};i=ST(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(o=ST(parseFloat(f),d[4]));const y=d[5];y&&(c=y)}else i=n;if(!e){let d=!1,f=t.length;i<0&&(t.push(function G0(){return new s.vHH(3100,!1)}()),d=!0),o<0&&(t.push(function uT(){return new s.vHH(3101,!1)}()),d=!0),d&&t.splice(f,0,vN())}return{duration:i,delay:o,easing:c}}(n,t,e)}function Ag(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function X_(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function Po(n,t=new Map,e){if(e)for(let[r,i]of e)t.set(r,i);for(let[r,i]of n)t.set(r,i);return t}function Li(n,t,e){return e?t+":"+e+";":""}function Cu(n){let t="";for(let e=0;e<n.style.length;e++){const r=n.style.item(e);t+=Li(0,r,n.style.getPropertyValue(r))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=Li(0,Pf(e),n.style[e]));n.setAttribute("style",t)}function ro(n,t,e){n.style&&(t.forEach((r,i)=>{const o=Eu(i);e&&!e.has(i)&&e.set(i,n.style[o]),n.style[o]=r}),kf()&&Cu(n))}function Di(n,t){n.style&&(t.forEach((e,r)=>{const i=Eu(r);n.style[i]=""}),kf()&&Cu(n))}function qd(n){return Array.isArray(n)?1==n.length?n[0]:G_(n):n}const Tu=new RegExp("{{\\s*(.+?)\\s*}}","g");function zd(n){let t=[];if("string"==typeof n){let e;for(;e=Tu.exec(n);)t.push(e[1]);Tu.lastIndex=0}return t}function pl(n,t,e){const r=n.toString(),i=r.replace(Tu,(o,c)=>{let d=t[c];return null==d&&(e.push(function wN(n){return new s.vHH(3003,!1)}()),d=""),d.toString()});return i==r?n:i}function lc(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const Mf=/-+([a-z0-9])/g;function Eu(n){return n.replace(Mf,(...t)=>t[1].toUpperCase())}function Pf(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ms(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function CN(n){return new s.vHH(3004,!1)}()}}function eb(n,t){return window.getComputedStyle(n)[t]}const ey="*";function kT(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function ZN(n,t,e){if(":"==n[0]){const f=function RT(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(function kN(n){return new s.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof f)return void t.push(f);n=f}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(function hT(n){return new s.vHH(3015,!1)}()),t;const i=r[1],o=r[2],c=r[3];t.push(OT(i,c));"<"==o[0]&&!(i==ey&&c==ey)&&t.push(OT(c,i))}(r,e,t)):e.push(n),e}const Lf=new Set(["true","1"]),Uf=new Set(["false","0"]);function OT(n,t){const e=Lf.has(n)||Uf.has(n),r=Lf.has(t)||Uf.has(t);return(i,o)=>{let c=n==ey||n==i,d=t==ey||t==o;return!c&&e&&"boolean"==typeof i&&(c=i?Lf.has(n):Uf.has(n)),!d&&r&&"boolean"==typeof o&&(d=o?Lf.has(t):Uf.has(t)),c&&d}}const ty=new RegExp("s*:selfs*,?","g");function Rg(n,t,e,r){return new ny(n).build(t,e,r)}class ny{constructor(t){this._driver=t}build(t,e,r){const i=new FT(e);return this._resetContextStyleTimingState(i),Ms(this,qd(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0;const o=[],c=[];return"@"==t.name.charAt(0)&&e.errors.push(function TN(){return new s.vHH(3006,!1)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const f=d,y=f.name;y.toString().split(/\s*,\s*/).forEach(w=>{f.name=w,o.push(this.visitState(f,e))}),f.name=y}else if(1==d.type){const f=this.visitTransition(d,e);r+=f.queryCount,i+=f.depCount,c.push(f)}else e.errors.push(function EN(){return new s.vHH(3007,!1)}())}),{type:7,name:t.name,states:o,transitions:c,queryCount:r,depCount:i,options:null}}visitState(t,e){const r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){const o=new Set,c=i||{};r.styles.forEach(d=>{d instanceof Map&&d.forEach(f=>{zd(f).forEach(y=>{c.hasOwnProperty(y)||o.add(y)})})}),o.size&&(lc(o.values()),e.errors.push(function Z0(n,t){return new s.vHH(3008,!1)}()))}return{type:0,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const r=Ms(this,qd(t.animation),e);return{type:1,matchers:kT(t.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Du(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(r=>Ms(this,r,e)),options:Du(t.options)}}visitGroup(t,e){const r=e.currentTime;let i=0;const o=t.steps.map(c=>{e.currentTime=r;const d=Ms(this,c,e);return i=Math.max(i,e.currentTime),d});return e.currentTime=i,{type:3,steps:o,options:Du(t.options)}}visitAnimate(t,e){const r=function LT(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Og(Zd(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=Og(0,0,"");return o.dynamic=!0,o.strValue=e,o}const i=Zd(e,t);return Og(i.duration,i.delay,i.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;let i,o=t.styles?t.styles:Hd({});if(5==o.type)i=this.visitKeyframes(o,e);else{let c=t.styles,d=!1;if(!c){d=!0;const y={};r.easing&&(y.easing=r.easing),c=Hd(y)}e.currentTime+=r.duration+r.delay;const f=this.visitStyle(c,e);f.isEmptyStep=d,i=f}return e.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(t,e){const r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){const r=[],i=Array.isArray(t.styles)?t.styles:[t.styles];for(let d of i)"string"==typeof d?d===ya?r.push(d):e.errors.push(new s.vHH(3002,!1)):r.push(X_(d));let o=!1,c=null;return r.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(c=d.get("easing"),d.delete("easing")),!o))for(let f of d.values())if(f.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:c,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){const r=e.currentAnimateTimings;let i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(c=>{"string"!=typeof c&&c.forEach((d,f)=>{const y=e.collectedStyles.get(e.currentQuerySelector),w=y.get(f);let E=!0;w&&(o!=i&&o>=w.startTime&&i<=w.endTime&&(e.errors.push(function SN(n,t,e,r,i){return new s.vHH(3010,!1)}()),E=!1),o=w.startTime),E&&y.set(f,{startTime:o,endTime:i}),e.options&&function Of(n,t,e){const r=t.params||{},i=zd(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||e.push(function bN(n){return new s.vHH(3001,!1)}())})}(d,e.options,e.errors)})})}visitKeyframes(t,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function IN(){return new s.vHH(3011,!1)}()),r;let o=0;const c=[];let d=!1,f=!1,y=0;const w=t.steps.map(ne=>{const he=this._makeStyleAst(ne,e);let Ie=null!=he.offset?he.offset:function tb(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const r=e;t=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(he.styles),me=0;return null!=Ie&&(o++,me=he.offset=Ie),f=f||me<0||me>1,d=d||me<y,y=me,c.push(me),he});f&&e.errors.push(function AN(){return new s.vHH(3012,!1)}()),d&&e.errors.push(function hl(){return new s.vHH(3200,!1)}());const E=t.steps.length;let A=0;o>0&&o<E?e.errors.push(function q0(){return new s.vHH(3202,!1)}()):0==o&&(A=1/(E-1));const k=E-1,M=e.currentTime,V=e.currentAnimateTimings,W=V.duration;return w.forEach((ne,he)=>{const Ie=A>0?he==k?1:A*he:c[he],me=Ie*W;e.currentTime=M+V.delay+me,V.duration=me,this._validateStyleAst(ne,e),ne.offset=Ie,r.styles.push(ne)}),r}visitReference(t,e){return{type:8,animation:Ms(this,qd(t.animation),e),options:Du(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Du(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Du(t.options)}}visitQuery(t,e){const r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[o,c]=function ry(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(ty,"")),n=n.replace(/@\*/g,Ig).replace(/@\w+/g,e=>Ig+"-"+e.slice(1)).replace(/:animating/g,DT),[n,t]}(t.selector);e.currentQuerySelector=r.length?r+" "+o:o,no(e.collectedStyles,e.currentQuerySelector,new Map);const d=Ms(this,qd(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:d,originalSelector:t.selector,options:Du(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function NN(){return new s.vHH(3013,!1)}());const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:Zd(t.timings,e.errors,!0);return{type:12,animation:Ms(this,qd(t.animation),e),timings:r,options:null}}}class FT{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Du(n){return n?(n=Ag(n)).params&&(n.params=function PT(n){return n?Ag(n):null}(n.params)):n={},n}function Og(n,t,e){return{duration:n,delay:t,easing:e}}function iy(n,t,e,r,i,o,c=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:c,subTimeline:d}}class sy{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const VT=new RegExp(":enter","g"),qN=new RegExp(":leave","g");function oy(n,t,e,r,i,o=new Map,c=new Map,d,f,y=[]){return(new HT).buildKeyframes(n,t,e,r,i,o,c,d,f,y)}class HT{buildKeyframes(t,e,r,i,o,c,d,f,y,w=[]){y=y||new sy;const E=new Vf(t,e,y,i,o,w,[]);E.options=f;const A=f.delay?fl(f.delay):0;E.currentTimeline.delayNextStep(A),E.currentTimeline.setStyles([c],null,E.errors,f),Ms(this,r,E);const k=E.timelines.filter(M=>M.containsAnimation());if(k.length&&d.size){let M;for(let V=k.length-1;V>=0;V--){const W=k[V];if(W.element===e){M=W;break}}M&&!M.allowOnlyTimelineStyles()&&M.setStyles([d],null,E.errors,f)}return k.length?k.map(M=>M.buildKeyframes()):[iy(e,[],[],[],0,A,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const r=e.subInstructions.get(e.element);if(r){const i=e.createSubContext(t.options),o=e.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);o!=c&&e.transformIntoNewTimeline(c)}e.previousNode=t}visitAnimateRef(t,e){const r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,r),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,r){for(const i of t){const o=i?.delay;if(o){const c="number"==typeof o?o:fl(pl(o,i?.params??{},e.errors));r.delayNextStep(c)}}}_visitSubInstructions(t,e,r){let o=e.currentTimeline.currentTime;const c=null!=r.duration?fl(r.duration):null,d=null!=r.delay?fl(r.delay):null;return 0!==c&&t.forEach(f=>{const y=e.appendInstructionToTimeline(f,c,d);o=Math.max(o,y.duration+y.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),Ms(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const r=e.subContextCount;let i=e;const o=t.options;if(o&&(o.params||o.delay)&&(i=e.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Bf);const c=fl(o.delay);i.delayNextStep(c)}t.steps.length&&(t.steps.forEach(c=>Ms(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const r=[];let i=e.currentTimeline.currentTime;const o=t.options&&t.options.delay?fl(t.options.delay):0;t.steps.forEach(c=>{const d=e.createSubContext(t.options);o&&d.delayNextStep(o),Ms(this,c,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const r=t.strValue;return Zd(e.params?pl(r,e.params,e.errors):r,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(r.duration),this.visitStyle(o,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(o):r.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const r=e.currentAnimateTimings,i=e.currentTimeline.duration,o=r.duration,d=e.createSubContext().currentTimeline;d.easing=r.easing,t.styles.forEach(f=>{d.forwardTime((f.offset||0)*o),d.setStyles(f.styles,f.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(i+o),e.previousNode=t}visitQuery(t,e){const r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?fl(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Bf);let c=r;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=d.length;let f=null;d.forEach((y,w)=>{e.currentQueryIndex=w;const E=e.createSubContext(t.options,y);o&&E.delayNextStep(o),y===e.element&&(f=E.currentTimeline),Ms(this,t.animation,E),E.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,E.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),f&&(e.currentTimeline.mergeTimelineCollectedStyles(f),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const r=e.parentContext,i=e.currentTimeline,o=t.timings,c=Math.abs(o.duration),d=c*(e.currentQueryTotal-1);let f=c*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":f=d-f;break;case"full":f=r.currentStaggerTime}const w=e.currentTimeline;f&&w.delayNextStep(f);const E=w.currentTime;Ms(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-E+(i.startTime-r.currentTimeline.startTime)}}const Bf={};class Vf{constructor(t,e,r,i,o,c,d,f){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Bf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new Mg(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const r=t;let i=this.options;null!=r.duration&&(i.duration=fl(r.duration)),null!=r.delay&&(i.delay=fl(r.delay));const o=r.params;if(o){let c=i.params;c||(c=this.options.params={}),Object.keys(o).forEach(d=>{(!e||!c.hasOwnProperty(d))&&(c[d]=pl(o[d],c,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){const i=e||this.element,o=new Vf(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=Bf,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){const i={duration:e??t.duration,delay:this.currentTimeline.currentTime+(r??0)+t.delay,easing:""},o=new $T(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,o,c){let d=[];if(i&&d.push(this.element),t.length>0){t=(t=t.replace(VT,"."+this._enterClassName)).replace(qN,"."+this._leaveClassName);let y=this._driver.query(this.element,t,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!o&&0==d.length&&c.push(function xN(n){return new s.vHH(3014,!1)}()),d}}class Mg{constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Mg(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||ya),this._currentKeyframe.set(e,ya);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){e&&this._previousKeyframe.set("easing",e);const o=i&&i.params||{},c=function GT(n,t){const e=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||t.keys();for(let o of r)e.set(o,ya)}else Po(i,e)}),e}(t,this._globalTimelineStyles);for(let[d,f]of c){const y=pl(f,o,r);this._pendingStyles.set(d,y),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??ya),this._updateStyle(d,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,r)=>{const i=this._styleSummary.get(r);(!i||e.time>i.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,f)=>{const y=Po(d,new Map,this._backFill);y.forEach((w,E)=>{w===$0?t.add(E):w===ya&&e.add(E)}),r||y.set("offset",f/this.duration),i.push(y)});const o=t.size?lc(t.values()):[],c=e.size?lc(e.values()):[];if(r){const d=i[0],f=new Map(d);d.set("offset",0),f.set("offset",1),i=[d,f]}return iy(this.element,i,o,c,this.duration,this.startTime,this.easing,!1)}}class $T extends Mg{constructor(t,e,r,i,o,c,d=!1){super(t,e,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],c=r+e,d=e/c,f=Po(t[0]);f.set("offset",0),o.push(f);const y=Po(t[0]);y.set("offset",nb(d)),o.push(y);const w=t.length-1;for(let E=1;E<=w;E++){let A=Po(t[E]);const k=A.get("offset");A.set("offset",nb((e+k*r)/c)),o.push(A)}r=c,e=0,i="",t=o}return iy(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}}function nb(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class ay{}const ZT=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class ly extends ay{normalizePropertyName(t,e){return Eu(t)}normalizeStyleValue(t,e,r,i){let o="";const c=r.toString().trim();if(ZT.has(e)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function dT(n,t){return new s.vHH(3005,!1)}())}return c+o}}function cc(n,t,e,r,i,o,c,d,f,y,w,E,A){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:o,toState:r,toStyles:c,timelines:d,queriedElements:f,preStyleProps:y,postStyleProps:w,totalTime:E,errors:A}}const rb={};class qT{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return function Wd(n,t,e,r,i){return n.some(o=>o(t,e,r,i))}(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){let i=this._stateStyles.get("*");return void 0!==t&&(i=this._stateStyles.get(t?.toString())||i),i?i.buildStyles(e,r):new Map}build(t,e,r,i,o,c,d,f,y,w){const E=[],A=this.ast.options&&this.ast.options.params||rb,M=this.buildStyles(r,d&&d.params||rb,E),V=f&&f.params||rb,W=this.buildStyles(i,V,E),ne=new Set,he=new Map,Ie=new Map,me="void"===i,Pe={params:ib(V,A),delay:this.ast.options?.delay},He=w?[]:oy(t,e,this.ast.animation,o,c,M,W,Pe,y,E);let ct=0;if(He.forEach(Dn=>{ct=Math.max(Dn.duration+Dn.delay,ct)}),E.length)return cc(e,this._triggerName,r,i,me,M,W,[],[],he,Ie,ct,E);He.forEach(Dn=>{const Vn=Dn.element,Gi=no(he,Vn,new Set);Dn.preStyleProps.forEach(Hr=>Gi.add(Hr));const Cs=no(Ie,Vn,new Set);Dn.postStyleProps.forEach(Hr=>Cs.add(Hr)),Vn!==e&&ne.add(Vn)});const Bt=lc(ne.values());return cc(e,this._triggerName,r,i,me,M,W,He,Bt,he,Ie,ct)}}function ib(n,t){const e=Ag(t);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(e[r]=n[r]);return e}class KN{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){const r=new Map,i=Ag(this.defaultParams);return Object.keys(t).forEach(o=>{const c=t[o];null!==c&&(i[o]=c)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((c,d)=>{c&&(c=pl(c,i,e));const f=this.normalizer.normalizePropertyName(d,e);c=this.normalizer.normalizeStyleValue(d,f,c,e),r.set(d,c)})}),r}}class e2{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states=new Map,e.states.forEach(i=>{this.states.set(i.name,new KN(i.style,i.options&&i.options.params||{},r))}),WT(this.states,"true","1"),WT(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new qT(t,i,this.states))}),this.fallbackTransition=function t2(n,t,e){return new qT(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(c=>c.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}}function WT(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const YN=new sy;class KT{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const r=[],i=[],o=Rg(this._driver,e,r,i);if(r.length)throw function PN(n){return new s.vHH(3503,!1)}();this._animations.set(t,o)}_buildPlayer(t,e,r){const i=t.element,o=Rf(0,this._normalizer,0,t.keyframes,e,r);return this._driver.animate(i,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){const i=[],o=this._animations.get(t);let c;const d=new Map;if(o?(c=oy(this._driver,e,o,X0,Q_,new Map,new Map,r,YN,i),c.forEach(w=>{const E=no(d,w.element,new Map);w.postStyleProps.forEach(A=>E.set(A,null))})):(i.push(function q_(){return new s.vHH(3300,!1)}()),c=[]),i.length)throw function z_(n){return new s.vHH(3504,!1)}();d.forEach((w,E)=>{w.forEach((A,k)=>{w.set(k,this._driver.computeStyle(E,k,ya))})});const y=va(c.map(w=>{const E=d.get(w.element);return this._buildPlayer(w,new Map,E)}));return this._playersById.set(t,y),y.onDestroy(()=>this.destroy(t)),this.players.push(y),y}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function W_(n){return new s.vHH(3301,!1)}();return e}listen(t,e,r,i){const o=Y_(e,"","","");return Y0(this._getPlayer(t),r,o,i),()=>{}}command(t,e,r,i){if("register"==r)return void this.register(t,i[0]);if("create"==r)return void this.create(t,e,i[0]||{});const o=this._getPlayer(t);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const YT="ng-animate-queued",cy="ng-animate-disabled",XN=[],ob={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},QT={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ui="__ng_removed";class ab{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const r=t&&t.hasOwnProperty("value");if(this.value=function cb(n){return n??null}(r?t.value:t),r){const o=Ag(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const r=this.options.params;Object.keys(e).forEach(i=>{null==r[i]&&(r[i]=e[i])})}}}const Pg="void",uy=new ab(Pg);class ex{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Er(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.has(e))throw function KL(n,t){return new s.vHH(3302,!1)}();if(null==r||0==r.length)throw function W0(n){return new s.vHH(3303,!1)}();if(!function tx(n){return"start"==n||"done"==n}(r))throw function YL(n,t){return new s.vHH(3400,!1)}();const o=no(this._elementListeners,t,[]),c={name:e,phase:r,callback:i};o.push(c);const d=no(this._engine.statesByElement,t,new Map);return d.has(e)||(Er(t,Sg),Er(t,Sg+"-"+e),d.set(e,uy)),()=>{this._engine.afterFlush(()=>{const f=o.indexOf(c);f>=0&&o.splice(f,1),this._triggers.has(e)||d.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function fT(n){return new s.vHH(3401,!1)}();return e}trigger(t,e,r,i=!0){const o=this._getTrigger(e),c=new eE(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(Er(t,Sg),Er(t,Sg+"-"+e),this._engine.statesByElement.set(t,d=new Map));let f=d.get(e);const y=new ab(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&f&&y.absorbOptions(f.options),d.set(e,y),f||(f=uy),y.value!==Pg&&f.value===y.value){if(!function rx(n,t){const e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){const o=e[i];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}(f.params,y.params)){const V=[],W=o.matchStyles(f.value,f.params,V),ne=o.matchStyles(y.value,y.params,V);V.length?this._engine.reportError(V):this._engine.afterFlush(()=>{Di(t,W),ro(t,ne)})}return}const A=no(this._engine.playersByElement,t,[]);A.forEach(V=>{V.namespaceId==this.id&&V.triggerName==e&&V.queued&&V.destroy()});let k=o.matchTransition(f.value,y.value,t,y.params),M=!1;if(!k){if(!i)return;k=o.fallbackTransition,M=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:k,fromState:f,toState:y,player:c,isFallbackTransition:M}),M||(Er(t,YT),c.onStart(()=>{Kd(t,YT)})),c.onDone(()=>{let V=this.players.indexOf(c);V>=0&&this.players.splice(V,1);const W=this._engine.playersByElement.get(t);if(W){let ne=W.indexOf(c);ne>=0&&W.splice(ne,1)}}),this.players.push(c),A.push(c),c}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const r=this._engine.driver.query(t,Ig,!0);r.forEach(i=>{if(i[Ui])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(c=>c.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){const o=this._engine.statesByElement.get(t),c=new Map;if(o){const d=[];if(o.forEach((f,y)=>{if(c.set(y,f.value),this._triggers.has(y)){const w=this.trigger(t,y,Pg,i);w&&d.push(w)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,c),r&&va(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){const i=new Set;e.forEach(o=>{const c=o.name;if(i.has(c))return;i.add(c);const f=this._triggers.get(c).fallbackTransition,y=r.get(c)||uy,w=new ab(Pg),E=new eE(this.id,c,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:c,transition:f,fromState:y,toState:w,player:E,isFallbackTransition:!0})})}}removeNode(t,e){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else{let c=t;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{const o=t[Ui];(!o||o===ob)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){Er(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,c=this._elementListeners.get(o);c&&c.forEach(d=>{if(d.name==r.triggerName){const f=Y_(o,r.triggerName,r.fromState.value,r.toState.value);f._data=t,Y0(r.player,d.phase,f,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{const o=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==o||0==c?o-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(r=>r.element===t)||e,e}}class XT{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){const r=new ex(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,d=this.driver.getParentElement(e);for(;d;){const f=i.get(d);if(f){const y=r.indexOf(f);r.splice(y+1,0,t),c=!0;break}d=this.driver.getParentElement(d)}c||r.unshift(t)}else r.push(t);return i.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,r=this.statesByElement.get(t);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&e.add(o)}return e}trigger(t,e,r,i){if(io(e)){const o=this._fetchNamespace(t);if(o)return o.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!io(e))return;const o=e[Ui];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(t){const c=this._fetchNamespace(t);c&&c.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Er(t,cy)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Kd(t,cy))}removeNode(t,e,r,i){if(io(e)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),r){const c=this.namespacesByHostElement.get(e);c&&c.id!==t&&c.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,r,i,o){this.collectedLeaveElements.push(e),e[Ui]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,r,i,o){return io(e)?this._fetchNamespace(t).listen(e,r,i,o):()=>{}}_buildInstruction(t,e,r,i,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,Ig,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,DT,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return va(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Ui];if(e&&e.setForRemoval){if(t[Ui]=ob,e.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(cy)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Er(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?va(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw function pT(n){return new s.vHH(3402,!1)}()}_flushAnimations(t,e){const r=new sy,i=[],o=new Map,c=[],d=new Map,f=new Map,y=new Map,w=new Set;this.disabledNodes.forEach(lt=>{w.add(lt);const mt=this.driver.query(lt,".ng-animate-queued",!0);for(let Mt=0;Mt<mt.length;Mt++)w.add(mt[Mt])});const E=this.bodyNode,A=Array.from(this.statesByElement.keys()),k=Fo(A,this.collectedEnterElements),M=new Map;let V=0;k.forEach((lt,mt)=>{const Mt=X0+V++;M.set(mt,Mt),lt.forEach(nn=>Er(nn,Mt))});const W=[],ne=new Set,he=new Set;for(let lt=0;lt<this.collectedLeaveElements.length;lt++){const mt=this.collectedLeaveElements[lt],Mt=mt[Ui];Mt&&Mt.setForRemoval&&(W.push(mt),ne.add(mt),Mt.hasAnimation?this.driver.query(mt,".ng-star-inserted",!0).forEach(nn=>ne.add(nn)):he.add(mt))}const Ie=new Map,me=Fo(A,Array.from(ne));me.forEach((lt,mt)=>{const Mt=Q_+V++;Ie.set(mt,Mt),lt.forEach(nn=>Er(nn,Mt))}),t.push(()=>{k.forEach((lt,mt)=>{const Mt=M.get(mt);lt.forEach(nn=>Kd(nn,Mt))}),me.forEach((lt,mt)=>{const Mt=Ie.get(mt);lt.forEach(nn=>Kd(nn,Mt))}),W.forEach(lt=>{this.processLeaveNode(lt)})});const Pe=[],He=[];for(let lt=this._namespaceList.length-1;lt>=0;lt--)this._namespaceList[lt].drainQueuedTransitions(e).forEach(Mt=>{const nn=Mt.player,$r=Mt.element;if(Pe.push(nn),this.collectedEnterElements.length){const yi=$r[Ui];if(yi&&yi.setForMove){if(yi.previousTriggersValues&&yi.previousTriggersValues.has(Mt.triggerName)){const yo=yi.previousTriggersValues.get(Mt.triggerName),Bs=this.statesByElement.get(Mt.element);if(Bs&&Bs.has(Mt.triggerName)){const Xv=Bs.get(Mt.triggerName);Xv.value=yo,Bs.set(Mt.triggerName,Xv)}}return void nn.destroy()}}const Zo=!E||!this.driver.containsElement(E,$r),Zi=Ie.get($r),Oa=M.get($r),Fn=this._buildInstruction(Mt,r,Oa,Zi,Zo);if(Fn.errors&&Fn.errors.length)return void He.push(Fn);if(Zo)return nn.onStart(()=>Di($r,Fn.fromStyles)),nn.onDestroy(()=>ro($r,Fn.toStyles)),void i.push(nn);if(Mt.isFallbackTransition)return nn.onStart(()=>Di($r,Fn.fromStyles)),nn.onDestroy(()=>ro($r,Fn.toStyles)),void i.push(nn);const Rc=[];Fn.timelines.forEach(yi=>{yi.stretchStartingKeyframe=!0,this.disabledNodes.has(yi.element)||Rc.push(yi)}),Fn.timelines=Rc,r.append($r,Fn.timelines),c.push({instruction:Fn,player:nn,element:$r}),Fn.queriedElements.forEach(yi=>no(d,yi,[]).push(nn)),Fn.preStyleProps.forEach((yi,yo)=>{if(yi.size){let Bs=f.get(yo);Bs||f.set(yo,Bs=new Set),yi.forEach((Xv,s_)=>Bs.add(s_))}}),Fn.postStyleProps.forEach((yi,yo)=>{let Bs=y.get(yo);Bs||y.set(yo,Bs=new Set),yi.forEach((Xv,s_)=>Bs.add(s_))})});if(He.length){const lt=[];He.forEach(mt=>{lt.push(function gT(n,t){return new s.vHH(3505,!1)}())}),Pe.forEach(mt=>mt.destroy()),this.reportError(lt)}const ct=new Map,Bt=new Map;c.forEach(lt=>{const mt=lt.element;r.has(mt)&&(Bt.set(mt,mt),this._beforeAnimationBuild(lt.player.namespaceId,lt.instruction,ct))}),i.forEach(lt=>{const mt=lt.element;this._getPreviousPlayers(mt,!1,lt.namespaceId,lt.triggerName,null).forEach(nn=>{no(ct,mt,[]).push(nn),nn.destroy()})});const Dn=W.filter(lt=>rE(lt,f,y)),Vn=new Map;wa(Vn,this.driver,he,y,ya).forEach(lt=>{rE(lt,f,y)&&Dn.push(lt)});const Cs=new Map;k.forEach((lt,mt)=>{wa(Cs,this.driver,new Set(lt),f,$0)}),Dn.forEach(lt=>{const mt=Vn.get(lt),Mt=Cs.get(lt);Vn.set(lt,new Map([...Array.from(mt?.entries()??[]),...Array.from(Mt?.entries()??[])]))});const Hr=[],Yu=[],Ju={};c.forEach(lt=>{const{element:mt,player:Mt,instruction:nn}=lt;if(r.has(mt)){if(w.has(mt))return Mt.onDestroy(()=>ro(mt,nn.toStyles)),Mt.disabled=!0,Mt.overrideTotalTime(nn.totalTime),void i.push(Mt);let $r=Ju;if(Bt.size>1){let Zi=mt;const Oa=[];for(;Zi=Zi.parentNode;){const Fn=Bt.get(Zi);if(Fn){$r=Fn;break}Oa.push(Zi)}Oa.forEach(Fn=>Bt.set(Fn,$r))}const Zo=this._buildAnimation(Mt.namespaceId,nn,ct,o,Cs,Vn);if(Mt.setRealPlayer(Zo),$r===Ju)Hr.push(Mt);else{const Zi=this.playersByElement.get($r);Zi&&Zi.length&&(Mt.parentPlayer=va(Zi)),i.push(Mt)}}else Di(mt,nn.fromStyles),Mt.onDestroy(()=>ro(mt,nn.toStyles)),Yu.push(Mt),w.has(mt)&&i.push(Mt)}),Yu.forEach(lt=>{const mt=o.get(lt.element);if(mt&&mt.length){const Mt=va(mt);lt.setRealPlayer(Mt)}}),i.forEach(lt=>{lt.parentPlayer?lt.syncPlayerEvents(lt.parentPlayer):lt.destroy()});for(let lt=0;lt<W.length;lt++){const mt=W[lt],Mt=mt[Ui];if(Kd(mt,Q_),Mt&&Mt.hasAnimation)continue;let nn=[];if(d.size){let Zo=d.get(mt);Zo&&Zo.length&&nn.push(...Zo);let Zi=this.driver.query(mt,DT,!0);for(let Oa=0;Oa<Zi.length;Oa++){let Fn=d.get(Zi[Oa]);Fn&&Fn.length&&nn.push(...Fn)}}const $r=nn.filter(Zo=>!Zo.destroyed);$r.length?tE(this,mt,$r):this.processLeaveNode(mt)}return W.length=0,Hr.forEach(lt=>{this.players.push(lt),lt.onDone(()=>{lt.destroy();const mt=this.players.indexOf(lt);this.players.splice(mt,1)}),lt.play()}),Hr}elementContainsData(t,e){let r=!1;const i=e[Ui];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(t).elementContainsData(e)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,o){let c=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(c=d)}else{const d=this.playersByElement.get(t);if(d){const f=!o||o==Pg;d.forEach(y=>{y.queued||!f&&y.triggerName!=i||c.push(y)})}}return(r||i)&&(c=c.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),c}_beforeAnimationBuild(t,e,r){const o=e.element,c=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const f of e.timelines){const y=f.element,w=y!==o,E=no(r,y,[]);this._getPreviousPlayers(y,w,c,d,e.toState).forEach(k=>{const M=k.getRealPlayer();M.beforeDestroy&&M.beforeDestroy(),k.destroy(),E.push(k)})}Di(o,e.fromStyles)}_buildAnimation(t,e,r,i,o,c){const d=e.triggerName,f=e.element,y=[],w=new Set,E=new Set,A=e.timelines.map(M=>{const V=M.element;w.add(V);const W=V[Ui];if(W&&W.removedBeforeQueried)return new Dg(M.duration,M.delay);const ne=V!==f,he=function nx(n){const t=[];return nE(n,t),t}((r.get(V)||XN).map(ct=>ct.getRealPlayer())).filter(ct=>!!ct.element&&ct.element===V),Ie=o.get(V),me=c.get(V),Pe=Rf(0,this._normalizer,0,M.keyframes,Ie,me),He=this._buildPlayer(M,Pe,he);if(M.subTimeline&&i&&E.add(V),ne){const ct=new eE(t,d,V);ct.setRealPlayer(He),y.push(ct)}return He});y.forEach(M=>{no(this.playersByQueriedElement,M.element,[]).push(M),M.onDone(()=>function lb(n,t,e){let r=n.get(t);if(r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&n.delete(t)}return r}(this.playersByQueriedElement,M.element,M))}),w.forEach(M=>Er(M,ET));const k=va(A);return k.onDestroy(()=>{w.forEach(M=>Kd(M,ET)),ro(f,e.toStyles)}),E.forEach(M=>{no(i,M,[]).push(k)}),k}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new Dg(t.duration,t.delay)}}class eE{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new Dg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,r)=>{e.forEach(i=>Y0(t,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){no(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function io(n){return n&&1===n.nodeType}function ub(n,t){const e=n.style.display;return n.style.display=t??"none",e}function wa(n,t,e,r,i){const o=[];e.forEach(f=>o.push(ub(f)));const c=[];r.forEach((f,y)=>{const w=new Map;f.forEach(E=>{const A=t.computeStyle(y,E,i);w.set(E,A),(!A||0==A.length)&&(y[Ui]=QT,c.push(y))}),n.set(y,w)});let d=0;return e.forEach(f=>ub(f,o[d++])),c}function Fo(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=1,i=new Set(t),o=new Map;function c(d){if(!d)return r;let f=o.get(d);if(f)return f;const y=d.parentNode;return f=e.has(y)?y:i.has(y)?r:c(y),o.set(d,f),f}return t.forEach(d=>{const f=c(d);f!==r&&e.get(f).push(d)}),e}function Er(n,t){n.classList?.add(t)}function Kd(n,t){n.classList?.remove(t)}function tE(n,t,e){va(e).onDone(()=>n.processLeaveNode(t))}function nE(n,t){for(let e=0;e<n.length;e++){const r=n[e];r instanceof Os?nE(r.players,t):t.push(r)}}function rE(n,t,e){const r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(o=>i.add(o)):t.set(n,r),e.delete(n),!0}class jf{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new XT(t,e,r),this._timelineEngine=new KT(t,e,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(t,e,r,i,o){const c=t+"-"+i;let d=this._triggerCache[c];if(!d){const f=[],y=[],w=Rg(this._driver,o,f,y);if(f.length)throw function z0(n,t){return new s.vHH(3404,!1)}();d=function sb(n,t,e){return new e2(n,t,e)}(i,w,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(e,i,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r,i){this._transitionEngine.removeNode(t,e,i||!1,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if("@"==r.charAt(0)){const[o,c]=mT(r);this._timelineEngine.command(o,e,c,i)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,o){if("@"==r.charAt(0)){const[c,d]=mT(r);return this._timelineEngine.listen(c,e,d,o)}return this._transitionEngine.listen(t,e,r,i,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ix=(()=>{class n{constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&ro(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ro(this._element,this._initialStyles),this._endStyles&&(ro(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Di(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Di(this._element,this._endStyles),this._endStyles=null),ro(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function dy(n){let t=null;return n.forEach((e,r)=>{(function sx(n){return"display"===n||"position"===n})(r)&&(t=t||new Map,t.set(r,e))}),t}class iE{constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(t,e,r){return t.animate(this._convertKeyframesToObject(e),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&t.set(i,this._finished?r:eb(this.element,i))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class sE{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return J_(t,e)}getParentElement(t){return J0(t)}query(t,e,r){return bT(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}animate(t,e,r,i,o,c=[]){const f={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(f.easing=o);const y=new Map,w=c.filter(k=>k instanceof iE);(function Ff(n,t){return 0===n||0===t})(r,i)&&w.forEach(k=>{k.currentSnapshot.forEach((M,V)=>y.set(V,M))});let E=function $N(n){return n.length?n[0]instanceof Map?n:n.map(t=>X_(t)):[]}(e).map(k=>Po(k));E=function IT(n,t,e){if(e.size&&t.length){let r=t[0],i=[];if(e.forEach((o,c)=>{r.has(c)||i.push(c),r.set(c,o)}),i.length)for(let o=1;o<t.length;o++){let c=t[o];i.forEach(d=>c.set(d,eb(n,d)))}}return t}(t,E,y);const A=function Fg(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=dy(t[0]),t.length>1&&(r=dy(t[t.length-1]))):t instanceof Map&&(e=dy(t)),e||r?new ix(n,e,r):null}(t,E);return new iE(t,E,f,A)}}let oE=(()=>{class n extends H_{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:s.ifc.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(e)?G_(e):e;return db(this._renderer,null,r,"register",[i]),new hy(r,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.FYo),s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class hy extends Eg{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new ox(this._id,t,e||{},this._renderer)}}class ox{constructor(t,e,r,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return db(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function db(n,t,e,r,i){return n.setProperty(t,`@@${e}:${r}`,i)}const fy="@.disabled";let py=(()=>{class n{constructor(e,r,i){this.delegate=e,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,c)=>{const d=c?.parentNode(o);d&&c.removeChild(d,o)}}createRenderer(e,r){const o=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let w=this._rendererCache.get(o);return w||(w=new gy("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,w)),w}const c=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const f=w=>{Array.isArray(w)?w.forEach(f):this.engine.registerTrigger(c,d,e,w.name,w)};return r.data.animation.forEach(f),new aE(this,d,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,i){e>=0&&e<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[c,d]=o;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.FYo),s.LFG(jf),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class gy{constructor(t,e,r,i){this.namespaceId=t,this.delegate=e,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?o=>e.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){"@"==e.charAt(0)&&e==fy?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class aE extends gy{constructor(t,e,r,i,o){super(e,r,i,o),this.factory=t,this.namespaceId=e}setProperty(t,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==fy?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,e.slice(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if("@"==e.charAt(0)){const i=function lE(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let o=e.slice(1),c="";return"@"!=o.charAt(0)&&([o,c]=function cE(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(o)),this.engine.listen(this.namespaceId,i,o,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(t,e,r)}}let uE=(()=>{class n extends jf{constructor(e,r,i,o){super(e.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie),s.LFG(Q0),s.LFG(ay),s.LFG(s.z2F))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const hb=[{provide:H_,useClass:oE},{provide:ay,useFactory:function dE(){return new ly}},{provide:jf,useClass:uE},{provide:s.FYo,useFactory:function hE(n,t,e){return new py(n,t,e)},deps:[Kr,jf,s.R0b]}],fb=[{provide:Q0,useFactory:()=>new sE},{provide:s.QbO,useValue:"BrowserAnimations"},...hb],fE=[{provide:Q0,useClass:CT},{provide:s.QbO,useValue:"NoopAnimations"},...hb];let ax=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?fE:fb}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:fb,imports:[rl]}),n})(),pE=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.Qsj),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n}),n})(),Yd=(()=>{class n extends pE{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,features:[s.qOj]}),n})();const gl=new s.OlP("NgValueAccessor"),ux={provide:gl,useExisting:(0,s.Gpc)(()=>uc),multi:!0},hx=new s.OlP("CompositionEventMode");let uc=(()=>{class n extends pE{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function dx(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(hx,8))},n.\u0275dir=s.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&s.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[s._Bn([ux]),s.qOj]}),n})();const fx=!1;function Su(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function pb(n){return null!=n&&"number"==typeof n.length}const Bi=new s.OlP("NgValidators"),dc=new s.OlP("NgAsyncValidators"),mE=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class gn{static min(t){return function gb(n){return t=>{if(Su(t.value)||Su(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function mb(n){return t=>{if(Su(t.value)||Su(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function _b(n){return Su(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function yb(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function my(n){return Su(n.value)||mE.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function _y(n){return t=>Su(t.value)||!pb(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function Iu(n){return t=>pb(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function _E(n){if(!n)return yy;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(Su(r.value))return null;const i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}(t)}static nullValidator(t){return null}static compose(t){return mx(t)}static composeAsync(t){return vE(t)}}function yy(n){return null}function Jd(n){return null!=n}function px(n){const t=(0,s.QGY)(n)?(0,Ut.D)(n):n;if(fx&&!(0,s.CqO)(t)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new s.vHH(-1101,e)}return t}function vy(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function gx(n,t){return t.map(e=>e(n))}function vb(n){return n.map(t=>function yE(n){return!n.validate}(t)?t:e=>t.validate(e))}function mx(n){if(!n)return null;const t=n.filter(Jd);return 0==t.length?null:function(e){return vy(gx(e,t))}}function xt(n){return null!=n?mx(vb(n)):null}function vE(n){if(!n)return null;const t=n.filter(Jd);return 0==t.length?null:function(e){return function lx(...n){const t=(0,vr.jO)(n),{args:e,keys:r}=cu(n),i=new Tn.y(o=>{const{length:c}=e;if(!c)return void o.complete();const d=new Array(c);let f=c,y=c;for(let w=0;w<c;w++){let E=!1;(0,ai.Xf)(e[w]).subscribe((0,ve.x)(o,A=>{E||(E=!0,y--),d[w]=A},()=>f--,void 0,()=>{(!f||!E)&&(y||o.next(r?ce(r,d):d),o.complete())}))}});return t?i.pipe(X(t)):i}(gx(e,t).map(px)).pipe((0,S.U)(vy))}}function bb(n){return null!=n?vE(vb(n)):null}function bE(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Qd(n){return n._rawValidators}function wE(n){return n._rawAsyncValidators}function Hf(n){return n?Array.isArray(n)?n:[n]:[]}function Xd(n,t){return Array.isArray(n)?n.includes(t):n===t}function fr(n,t){const e=Hf(t);return Hf(n).forEach(i=>{Xd(e,i)||e.push(i)}),e}function _x(n,t){return Hf(t).filter(e=>!Xd(n,e))}class wb{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=xt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=bb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Xi extends wb{get formDirective(){return null}get path(){return null}}class Au extends wb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Cb{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Nu=(()=>{class n extends Cb{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Au,2))},n.\u0275dir=s.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&s.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[s.qOj]}),n})(),eh=(()=>{class n extends Cb{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Xi,10))},n.\u0275dir=s.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,r){2&e&&s.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[s.qOj]}),n})();function CE(n,t){return n?`with name: '${t}'`:`at index: ${t}`}const Cy=!1,$f="VALID",Ty="INVALID",th="PENDING",Vg="DISABLED";function Sb(n){return(Ib(n)?n.validators:n)||null}function EE(n,t){return(Ib(t)?t.asyncValidators:n)||null}function Ib(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class DE{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===$f}get invalid(){return this.status===Ty}get pending(){return this.status==th}get disabled(){return this.status===Vg}get enabled(){return this.status!==Vg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(fr(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(fr(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(_x(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(_x(t,this._rawAsyncValidators))}hasValidator(t){return Xd(this._rawValidators,t)}hasAsyncValidator(t){return Xd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=th,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Vg,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=$f,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$f||this.status===th)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vg:$f}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=th,this._hasOwnPendingAsyncValidator=!0;const e=px(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new s.vpe,this.statusChanges=new s.vpe}_calculateStatus(){return this._allControlsDisabled()?Vg:this.errors?Ty:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(th)?th:this._anyControlsHaveStatus(Ty)?Ty:$f}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ib(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function l2(n){return Array.isArray(n)?xt(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function c2(n){return Array.isArray(n)?bb(n):n||null}(this._rawAsyncValidators)}}class hi extends DE{constructor(t,e,r){super(Sb(e),EE(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function jg(n,t,e){n._forEachChild((r,i)=>{if(void 0===e[i])throw new s.vHH(1002,Cy?function TE(n,t){return`Must supply a value for form control ${CE(n,t)}`}(t,i):"")})})(this,!0,t),Object.keys(t).forEach(r=>{(function Ab(n,t,e){const r=n.controls;if(!(t?Object.keys(r):r).length)throw new s.vHH(1e3,Cy?function Ex(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(t):"");if(!r[e])throw new s.vHH(1001,Cy?function Dx(n,t){return`Cannot find form control ${CE(n,t)}`}(t,e):"")})(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{const i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const nh=new s.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Hg}),Hg="always";function $g(n,t,e=Hg){rh(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function SE(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&xb(n,t)})}(n,t),function xx(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function Nx(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&xb(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Ax(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function Gg(n,t,e=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),Sy(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Dy(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function rh(n,t){const e=Qd(n);null!==t.validator?n.setValidators(bE(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=wE(n);null!==t.asyncValidator?n.setAsyncValidators(bE(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Dy(t._rawValidators,i),Dy(t._rawAsyncValidators,i)}function Sy(n,t){let e=!1;if(null!==n){if(null!==t.validator){const i=Qd(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(null!==t.asyncValidator){const i=wE(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}const r=()=>{};return Dy(t._rawValidators,r),Dy(t._rawAsyncValidators,r),e}function xb(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function NE(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function xE(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Le=class extends DE{constructor(t=null,e,r){super(Sb(e),EE(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ib(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=xE(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){NE(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){NE(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){xE(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};let hc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Bx={provide:gl,useExisting:(0,s.Gpc)(()=>qg),multi:!0};let qg=(()=>{class n extends Yd{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=r=>{e(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,r){1&e&&s.NdJ("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[s._Bn([Bx]),s.qOj]}),n})(),Bb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const xy=new s.OlP("NgModelWithFormControlWarning"),Hb={provide:Xi,useExisting:(0,s.Gpc)(()=>fc)};let fc=(()=>{class n extends Xi{constructor(e,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new s.vpe,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Sy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return $g(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){Gg(e.control||null,e,!1),function AE(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,function Ay(n,t){n._syncPendingControls(),t.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,i=this.form.get(e.path);r!==i&&(Gg(r||null,e),(n=>n instanceof Le)(i)&&($g(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);(function kb(n,t){rh(n,t)})(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function kx(n,t){return Sy(n,t)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){rh(this.form,this),this._oldForm&&Sy(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Bi,10),s.Y36(dc,10),s.Y36(nh,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&s.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([Hb]),s.qOj,s.TTD]}),n})();const LE={provide:Au,useExisting:(0,s.Gpc)(()=>xu)};let xu=(()=>{class n extends Au{set isDisabled(e){}constructor(e,r,i,o,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new s.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Ob(n,t){if(!t)return null;let e,r,i;return Array.isArray(t),t.forEach(o=>{o.constructor===uc?e=o:function Mx(n){return Object.getPrototypeOf(n.constructor)===Yd}(o)?r=o:i=o}),i||r||e||null}(0,o)}ngOnChanges(e){this._added||this._setUpControl(),function Rb(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function Nb(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(s.Y36(Xi,13),s.Y36(Bi,10),s.Y36(dc,10),s.Y36(gl,10),s.Y36(xy,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[s._Bn([LE]),s.qOj,s.TTD]}),n})();const Hx={provide:gl,useExisting:(0,s.Gpc)(()=>ih),multi:!0};function UE(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let ih=(()=>{class n extends Yd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const i=UE(this._getOptionId(e),e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function $x(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&s.NdJ("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([Hx]),s.qOj]}),n})(),Ry=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(UE(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(ih,9))},n.\u0275dir=s.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const BE={provide:gl,useExisting:(0,s.Gpc)(()=>Gb),multi:!0};function VE(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Gb=(()=>{class n extends Yd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const i=e.map(o=>this._getOptionId(o));r=(o,c)=>{o._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const c=o;for(let d=0;d<c.length;d++){const y=this._getOptionValue(c[d].value);i.push(y)}}else{const c=r.options;for(let d=0;d<c.length;d++){const f=c[d];if(f.selected){const y=this._getOptionValue(f.value);i.push(y)}}}this.value=i,e(i)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function Gx(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&s.NdJ("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([BE]),s.qOj]}),n})(),Wg=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(VE(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(VE(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(Gb,9))},n.\u0275dir=s.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),WE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Bb]}),n})(),JE=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:nh,useValue:e.callSetDisabledState??Hg}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[WE]}),n})(),Qx=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:xy,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:nh,useValue:e.callSetDisabledState??Hg}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[WE]}),n})();class Py{}class qf{}class Lo{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),o=i.toLowerCase(),c=e.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(c):this.headers.set(o,[c])}})}:()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{let i;if(i="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(o=>o.toString()),i.length>0){const o=e.toLowerCase();this.headers.set(o,i),this.maybeSetNormalizedName(e,o)}})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Lo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Lo;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Lo?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const o=t.value;if(o){let c=this.headers.get(e);if(!c)return;c=c.filter(d=>-1===o.indexOf(d)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Xx{encodeKey(t){return Jb(t)}encodeValue(t){return Jb(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const XE=/%(\d[a-f0-9])/gi,Yb={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Jb(n){return encodeURIComponent(n).replace(XE,(t,e)=>Yb[e]??t)}function zf(n){return`${n}`}class ml{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Xx,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function QE(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[c,d]=-1==o?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],f=e.get(c)||[];f.push(d),e.set(c,f)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e],i=Array.isArray(r)?r.map(zf):[zf(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new ml({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(zf(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(zf(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Qb{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function eD(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function tD(n){return typeof Blob<"u"&&n instanceof Blob}function nD(n){return typeof FormData<"u"&&n instanceof FormData}class Wf{constructor(t,e,r,i){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function Xb(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Lo),this.context||(this.context=new Qb),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const d=e.indexOf("?");this.urlWithParams=e+(-1===d?"?":d<e.length-1?"&":"")+c}}else this.params=new ml,this.urlWithParams=e}serializeBody(){return null===this.body?null:eD(this.body)||tD(this.body)||nD(this.body)||function tk(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ml?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||nD(this.body)?null:tD(this.body)?this.body.type||null:eD(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ml?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,c=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,d=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let f=t.headers||this.headers,y=t.params||this.params;const w=t.context??this.context;return void 0!==t.setHeaders&&(f=Object.keys(t.setHeaders).reduce((E,A)=>E.set(A,t.setHeaders[A]),f)),t.setParams&&(y=Object.keys(t.setParams).reduce((E,A)=>E.set(A,t.setParams[A]),y)),new Wf(e,r,o,{params:y,headers:f,context:w,reportProgress:d,responseType:i,withCredentials:c})}}var Dr=(()=>((Dr=Dr||{})[Dr.Sent=0]="Sent",Dr[Dr.UploadProgress=1]="UploadProgress",Dr[Dr.ResponseHeader=2]="ResponseHeader",Dr[Dr.DownloadProgress=3]="DownloadProgress",Dr[Dr.Response=4]="Response",Dr[Dr.User=5]="User",Dr))();class Fy{constructor(t,e=200,r="OK"){this.headers=t.headers||new Lo,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Ly extends Fy{constructor(t={}){super(t),this.type=Dr.ResponseHeader}clone(t={}){return new Ly({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Kg extends Fy{constructor(t={}){super(t),this.type=Dr.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Kg({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ew extends Fy{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function tw(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let nw=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof Wf)o=e;else{let f,y;f=i.headers instanceof Lo?i.headers:new Lo(i.headers),i.params&&(y=i.params instanceof ml?i.params:new ml({fromObject:i.params})),o=new Wf(e,r,void 0!==i.body?i.body:null,{headers:f,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=Fe(o).pipe(Yl(f=>this.handler.handle(f)));if(e instanceof Wf||"events"===i.observe)return c;const d=c.pipe(Fr(f=>f instanceof Kg));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return d.pipe((0,S.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe((0,S.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe((0,S.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return d.pipe((0,S.U)(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new ml).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,tw(i,r))}post(e,r,i={}){return this.request("POST",e,tw(i,r))}put(e,r,i={}){return this.request("PUT",e,tw(i,r))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Py))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function rw(n,t){return t(n)}function nk(n,t){return(e,r)=>t.intercept(e,{handle:i=>n(i,r)})}const iD=new s.OlP("HTTP_INTERCEPTORS"),fi=new s.OlP("HTTP_INTERCEPTOR_FNS");function Kf(){let n=null;return(t,e)=>(null===n&&(n=((0,s.f3M)(iD,{optional:!0})??[]).reduceRight(nk,rw)),n(t,e))}let sD=(()=>{class n extends Py{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=Array.from(new Set(this.injector.get(fi)));this.chain=r.reduceRight((i,o)=>function rD(n,t,e){return(r,i)=>e.runInContext(()=>t(r,o=>n(o,i)))}(i,o,this.injector),rw)}return this.chain(e,r=>this.backend.handle(r))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(qf),s.LFG(s.lqb))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const sk=/^\)\]\}',?\n/;let By=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Tn.y(r=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((k,M)=>i.setRequestHeader(k,M.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const k=e.detectContentTypeHeader();null!==k&&i.setRequestHeader("Content-Type",k)}if(e.responseType){const k=e.responseType.toLowerCase();i.responseType="json"!==k?k:"text"}const o=e.serializeBody();let c=null;const d=()=>{if(null!==c)return c;const k=i.statusText||"OK",M=new Lo(i.getAllResponseHeaders()),V=function ok(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||e.url;return c=new Ly({headers:M,status:i.status,statusText:k,url:V}),c},f=()=>{let{headers:k,status:M,statusText:V,url:W}=d(),ne=null;204!==M&&(ne=typeof i.response>"u"?i.responseText:i.response),0===M&&(M=ne?200:0);let he=M>=200&&M<300;if("json"===e.responseType&&"string"==typeof ne){const Ie=ne;ne=ne.replace(sk,"");try{ne=""!==ne?JSON.parse(ne):null}catch(me){ne=Ie,he&&(he=!1,ne={error:me,text:ne})}}he?(r.next(new Kg({body:ne,headers:k,status:M,statusText:V,url:W||void 0})),r.complete()):r.error(new ew({error:ne,headers:k,status:M,statusText:V,url:W||void 0}))},y=k=>{const{url:M}=d(),V=new ew({error:k,status:i.status||0,statusText:i.statusText||"Unknown Error",url:M||void 0});r.error(V)};let w=!1;const E=k=>{w||(r.next(d()),w=!0);let M={type:Dr.DownloadProgress,loaded:k.loaded};k.lengthComputable&&(M.total=k.total),"text"===e.responseType&&i.responseText&&(M.partialText=i.responseText),r.next(M)},A=k=>{let M={type:Dr.UploadProgress,loaded:k.loaded};k.lengthComputable&&(M.total=k.total),r.next(M)};return i.addEventListener("load",f),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),e.reportProgress&&(i.addEventListener("progress",E),null!==o&&i.upload&&i.upload.addEventListener("progress",A)),i.send(o),r.next({type:Dr.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",f),i.removeEventListener("timeout",y),e.reportProgress&&(i.removeEventListener("progress",E),null!==o&&i.upload&&i.upload.removeEventListener("progress",A)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ad))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Vy=new s.OlP("XSRF_ENABLED"),Yg=new s.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),ak=new s.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class ow{}let lk=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=zo(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie),s.LFG(s.Lbi),s.LFG(Yg))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function uD(n,t){const e=n.url.toLowerCase();if(!(0,s.f3M)(Vy)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const r=(0,s.f3M)(ow).getToken(),i=(0,s.f3M)(ak);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),t(n)}var Br=(()=>((Br=Br||{})[Br.Interceptors=0]="Interceptors",Br[Br.LegacyInterceptors=1]="LegacyInterceptors",Br[Br.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Br[Br.NoXsrfProtection=3]="NoXsrfProtection",Br[Br.JsonpSupport=4]="JsonpSupport",Br[Br.RequestsMadeViaParent=5]="RequestsMadeViaParent",Br))();function sh(n,t){return{\u0275kind:n,\u0275providers:t}}function aw(...n){const t=[nw,By,sD,{provide:Py,useExisting:sD},{provide:qf,useExisting:By},{provide:fi,useValue:uD,multi:!0},{provide:Vy,useValue:!0},{provide:ow,useClass:lk}];for(const e of n)t.push(...e.\u0275providers);return(0,s.MR2)(t)}const dD=new s.OlP("LEGACY_INTERCEPTOR_FN");let dk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[aw(sh(Br.LegacyInterceptors,[{provide:dD,useFactory:Kf},{provide:fi,useExisting:dD,multi:!0}]))]}),n})();var jy=U(6451),Qg=U(4986),hD=U(3532);function Xg(n=0,t,e=Qg.P){let r=-1;return null!=t&&((0,hD.K)(t)?e=t:r=t),new Tn.y(i=>{let o=function pk(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;o<0&&(o=0);let c=0;return e.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function oh(n,t=I.y){return n=n??fD,(0,xn.e)((e,r)=>{let i,o=!0;e.subscribe((0,ve.x)(r,c=>{const d=t(c);(o||!n(i,d))&&(o=!1,i=d,r.next(c))}))})}function fD(n,t){return n===t}var pD=U(6063);class gk extends dn.x{constructor(t=1/0,e=1/0,r=pD.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:c}=this;e||(r.push(t),!i&&r.push(o.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let c=0;c<o.length&&!t.closed;c+=r?1:2)t.next(o[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const c=e.now();let d=0;for(let f=1;f<r.length&&r[f]<=c;f+=2)d=f;d&&r.splice(0,d+1)}}}var gD=U(3099);function mD(n,t,e){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:t=1/0,refCount:i=!1,scheduler:e}=n):r=n??1/0,(0,gD.B)({connector:()=>new gk(r,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}var em=U(5032);function pi(n){return(0,xn.e)((t,e)=>{(0,ai.Xf)(n).subscribe((0,ve.x)(e,()=>e.complete(),em.Z)),!e.closed&&t.subscribe(e)})}let Yf={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const _k=/[&<>"']/,A2=new RegExp(_k.source,"g"),yk=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,N2=new RegExp(yk.source,"g"),Hy={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vk=n=>Hy[n];function Vi(n,t){if(t){if(_k.test(n))return n.replace(A2,vk)}else if(yk.test(n))return n.replace(N2,vk);return n}const $y=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function lw(n){return n.replace($y,(t,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):"")}const _D=/(^|[^\[])\^/g;function Gn(n,t){n="string"==typeof n?n:n.source,t=t||"";const e={replace:(r,i)=>(i=(i=i.source||i).replace(_D,"$1"),n=n.replace(r,i),e),getRegex:()=>new RegExp(n,t)};return e}const cw=/[^\w:]/g,yD=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function vD(n,t,e){if(n){let r;try{r=decodeURIComponent(lw(e)).replace(cw,"").toLowerCase()}catch{return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!yD.test(e)&&(e=function Gy(n,t){uw[" "+n]||(uw[" "+n]=bk.test(n)?n+"/":dw(n,"/",!0));const e=-1===(n=uw[" "+n]).indexOf(":");return"//"===t.substring(0,2)?e?t:n.replace(wk,"$1")+t:"/"===t.charAt(0)?e?t:n.replace(Ck,"$1")+t:n+t}(t,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const uw={},bk=/^[^:]+:\/*[^/]*$/,wk=/^([^:]+:)[\s\S]*$/,Ck=/^([^:]+:\/*[^/]*)[\s\S]*$/,Zy={exec:function(){}};function Tk(n,t){const r=n.replace(/\|/g,(o,c,d)=>{let f=!1,y=c;for(;--y>=0&&"\\"===d[y];)f=!f;return f?"|":" |"}).split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function dw(n,t,e){const r=n.length;if(0===r)return"";let i=0;for(;i<r;){const o=n.charAt(r-i-1);if(o!==t||e){if(o===t||!e)break;i++}else i++}return n.slice(0,r-i)}function bD(n,t){if(t<1)return"";let e="";for(;t>1;)1&t&&(e+=n),t>>=1,n+=n;return e+n}function wD(n,t,e,r){const i=t.href,o=t.title?Vi(t.title):null,c=n[1].replace(/\\([\[\]])/g,"$1");if("!"!==n[0].charAt(0)){r.state.inLink=!0;const d={type:"link",raw:e,href:i,title:o,text:c,tokens:r.inlineTokens(c)};return r.state.inLink=!1,d}return{type:"image",raw:e,href:i,title:o,text:Vi(c)}}class hw{constructor(t){this.options=t||Yf}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const r=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?r:dw(r,"\n")}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const r=e[0],i=function k2(n,t){const e=n.match(/^(\s+)(?:```)/);if(null===e)return t;const r=e[1];return t.split("\n").map(i=>{const o=i.match(/^\s+/);if(null===o)return i;const[c]=o;return c.length>=r.length?i.slice(r.length):i}).join("\n")}(r,e[3]||"");return{type:"code",raw:r,lang:e[2]?e[2].trim().replace(this.rules.inline._escapes,"$1"):e[2],text:i}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let r=e[2].trim();if(/#$/.test(r)){const i=dw(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){const r=e[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:e[0],tokens:o,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let r,i,o,c,d,f,y,w,E,A,k,M,V=e[1].trim();const W=V.length>1,ne={type:"list",raw:"",ordered:W,start:W?+V.slice(0,-1):"",loose:!1,items:[]};V=W?`\\d{1,9}\\${V.slice(-1)}`:`\\${V}`,this.options.pedantic&&(V=W?V:"[*+-]");const he=new RegExp(`^( {0,3}${V})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;t&&(M=!1,(e=he.exec(t))&&!this.rules.block.hr.test(t));){if(r=e[0],t=t.substring(r.length),w=e[2].split("\n",1)[0].replace(/^\t+/,me=>" ".repeat(3*me.length)),E=t.split("\n",1)[0],this.options.pedantic?(c=2,k=w.trimLeft()):(c=e[2].search(/[^ ]/),c=c>4?1:c,k=w.slice(c),c+=e[1].length),f=!1,!w&&/^ *$/.test(E)&&(r+=E+"\n",t=t.substring(E.length+1),M=!0),!M){const me=new RegExp(`^ {0,${Math.min(3,c-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),Pe=new RegExp(`^ {0,${Math.min(3,c-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),He=new RegExp(`^ {0,${Math.min(3,c-1)}}(?:\`\`\`|~~~)`),ct=new RegExp(`^ {0,${Math.min(3,c-1)}}#`);for(;t&&(A=t.split("\n",1)[0],E=A,this.options.pedantic&&(E=E.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(He.test(E)||ct.test(E)||me.test(E)||Pe.test(t)));){if(E.search(/[^ ]/)>=c||!E.trim())k+="\n"+E.slice(c);else{if(f||w.search(/[^ ]/)>=4||He.test(w)||ct.test(w)||Pe.test(w))break;k+="\n"+E}!f&&!E.trim()&&(f=!0),r+=A+"\n",t=t.substring(A.length+1),w=E.slice(c)}}ne.loose||(y?ne.loose=!0:/\n *\n *$/.test(r)&&(y=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(k),i&&(o="[ ] "!==i[0],k=k.replace(/^\[[ xX]\] +/,""))),ne.items.push({type:"list_item",raw:r,task:!!i,checked:o,loose:!1,text:k}),ne.raw+=r}ne.items[ne.items.length-1].raw=r.trimRight(),ne.items[ne.items.length-1].text=k.trimRight(),ne.raw=ne.raw.trimRight();const Ie=ne.items.length;for(d=0;d<Ie;d++)if(this.lexer.state.top=!1,ne.items[d].tokens=this.lexer.blockTokens(ne.items[d].text,[]),!ne.loose){const me=ne.items[d].tokens.filter(He=>"space"===He.type),Pe=me.length>0&&me.some(He=>/\n.*\n/.test(He.raw));ne.loose=Pe}if(ne.loose)for(d=0;d<Ie;d++)ne.items[d].loose=!0;return ne}}html(t){const e=this.rules.block.html.exec(t);if(e){const r={type:"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:e[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(e[0]):Vi(e[0]);r.type="paragraph",r.text=i,r.tokens=this.lexer.inline(i)}return r}}def(t){const e=this.rules.block.def.exec(t);if(e){const r=e[1].toLowerCase().replace(/\s+/g," "),i=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline._escapes,"$1"):e[3];return{type:"def",tag:r,raw:e[0],href:i,title:o}}}table(t){const e=this.rules.block.table.exec(t);if(e){const r={type:"table",header:Tk(e[1]).map(i=>({text:i})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(r.header.length===r.align.length){r.raw=e[0];let o,c,d,f,i=r.align.length;for(o=0;o<i;o++)r.align[o]=/^ *-+: *$/.test(r.align[o])?"right":/^ *:-+: *$/.test(r.align[o])?"center":/^ *:-+ *$/.test(r.align[o])?"left":null;for(i=r.rows.length,o=0;o<i;o++)r.rows[o]=Tk(r.rows[o],r.header.length).map(y=>({text:y}));for(i=r.header.length,c=0;c<i;c++)r.header[c].tokens=this.lexer.inline(r.header[c].text);for(i=r.rows.length,c=0;c<i;c++)for(f=r.rows[c],d=0;d<f.length;d++)f[d].tokens=this.lexer.inline(f[d].text);return r}}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const r="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:r,tokens:this.lexer.inline(r)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:Vi(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):Vi(e[0]):e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const r=e[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const c=dw(r.slice(0,-1),"\\");if((r.length-c.length)%2==0)return}else{const c=function x2(n,t){if(-1===n.indexOf(t[1]))return-1;const e=n.length;let r=0,i=0;for(;i<e;i++)if("\\"===n[i])i++;else if(n[i]===t[0])r++;else if(n[i]===t[1]&&(r--,r<0))return i;return-1}(e[2],"()");if(c>-1){const f=(0===e[0].indexOf("!")?5:4)+e[1].length+c;e[2]=e[2].substring(0,c),e[0]=e[0].substring(0,f).trim(),e[3]=""}}let i=e[2],o="";if(this.options.pedantic){const c=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);c&&(i=c[1],o=c[3])}else o=e[3]?e[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(i=this.options.pedantic&&!/>$/.test(r)?i.slice(1):i.slice(1,-1)),wD(e,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}reflink(t,e){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=e[i.toLowerCase()],!i){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return wD(r,i,r[0],this.lexer)}}emStrong(t,e,r=""){let i=this.rules.inline.emStrong.lDelim.exec(t);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;const o=i[1]||i[2]||"";if(!o||o&&(""===r||this.rules.inline.punctuation.exec(r))){const c=i[0].length-1;let d,f,y=c,w=0;const E="*"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(E.lastIndex=0,e=e.slice(-1*t.length+c);null!=(i=E.exec(e));){if(d=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!d)continue;if(f=d.length,i[3]||i[4]){y+=f;continue}if((i[5]||i[6])&&c%3&&!((c+f)%3)){w+=f;continue}if(y-=f,y>0)continue;f=Math.min(f,f+y+w);const A=t.slice(0,c+i.index+(i[0].length-d.length)+f);if(Math.min(c,f)%2){const M=A.slice(1,-1);return{type:"em",raw:A,text:M,tokens:this.lexer.inlineTokens(M)}}const k=A.slice(2,-2);return{type:"strong",raw:A,text:k,tokens:this.lexer.inlineTokens(k)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let r=e[2].replace(/\n/g," ");const i=/[^ ]/.test(r),o=/^ /.test(r)&&/ $/.test(r);return i&&o&&(r=r.substring(1,r.length-1)),r=Vi(r,!0),{type:"codespan",raw:e[0],text:r}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t,e){const r=this.rules.inline.autolink.exec(t);if(r){let i,o;return"@"===r[2]?(i=Vi(this.options.mangle?e(r[1]):r[1]),o="mailto:"+i):(i=Vi(r[1]),o=i),{type:"link",raw:r[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}url(t,e){let r;if(r=this.rules.inline.url.exec(t)){let i,o;if("@"===r[2])i=Vi(this.options.mangle?e(r[0]):r[0]),o="mailto:"+i;else{let c;do{c=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0]}while(c!==r[0]);i=Vi(r[0]),o="www."===r[1]?"http://"+r[0]:r[0]}return{type:"link",raw:r[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t,e){const r=this.rules.inline.text.exec(t);if(r){let i;return i=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):Vi(r[0]):r[0]:Vi(this.options.smartypants?e(r[0]):r[0]),{type:"text",raw:r[0],text:i}}}}const Rt={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Zy,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Rt.def=Gn(Rt.def).replace("label",Rt._label).replace("title",Rt._title).getRegex(),Rt.bullet=/(?:[*+-]|\d{1,9}[.)])/,Rt.listItemStart=Gn(/^( *)(bull) */).replace("bull",Rt.bullet).getRegex(),Rt.list=Gn(Rt.list).replace(/bull/g,Rt.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Rt.def.source+")").getRegex(),Rt._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Rt._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Rt.html=Gn(Rt.html,"i").replace("comment",Rt._comment).replace("tag",Rt._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Rt.paragraph=Gn(Rt._paragraph).replace("hr",Rt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rt._tag).getRegex(),Rt.blockquote=Gn(Rt.blockquote).replace("paragraph",Rt.paragraph).getRegex(),Rt.normal={...Rt},Rt.gfm={...Rt.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},Rt.gfm.table=Gn(Rt.gfm.table).replace("hr",Rt.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rt._tag).getRegex(),Rt.gfm.paragraph=Gn(Rt._paragraph).replace("hr",Rt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Rt.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Rt._tag).getRegex(),Rt.pedantic={...Rt.normal,html:Gn("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Rt._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Zy,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Gn(Rt.normal._paragraph).replace("hr",Rt.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Rt.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const ht={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Zy,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Zy,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function R2(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function Uo(n){let e,r,t="";const i=n.length;for(e=0;e<i;e++)r=n.charCodeAt(e),Math.random()>.5&&(r="x"+r.toString(16)),t+="&#"+r+";";return t}ht._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",ht.punctuation=Gn(ht.punctuation).replace(/punctuation/g,ht._punctuation).getRegex(),ht.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,ht.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,ht._comment=Gn(Rt._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),ht.emStrong.lDelim=Gn(ht.emStrong.lDelim).replace(/punct/g,ht._punctuation).getRegex(),ht.emStrong.rDelimAst=Gn(ht.emStrong.rDelimAst,"g").replace(/punct/g,ht._punctuation).getRegex(),ht.emStrong.rDelimUnd=Gn(ht.emStrong.rDelimUnd,"g").replace(/punct/g,ht._punctuation).getRegex(),ht._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,ht._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,ht._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,ht.autolink=Gn(ht.autolink).replace("scheme",ht._scheme).replace("email",ht._email).getRegex(),ht._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,ht.tag=Gn(ht.tag).replace("comment",ht._comment).replace("attribute",ht._attribute).getRegex(),ht._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ht._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,ht._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,ht.link=Gn(ht.link).replace("label",ht._label).replace("href",ht._href).replace("title",ht._title).getRegex(),ht.reflink=Gn(ht.reflink).replace("label",ht._label).replace("ref",Rt._label).getRegex(),ht.nolink=Gn(ht.nolink).replace("ref",Rt._label).getRegex(),ht.reflinkSearch=Gn(ht.reflinkSearch,"g").replace("reflink",ht.reflink).replace("nolink",ht.nolink).getRegex(),ht.normal={...ht},ht.pedantic={...ht.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Gn(/^!?\[(label)\]\((.*?)\)/).replace("label",ht._label).getRegex(),reflink:Gn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ht._label).getRegex()},ht.gfm={...ht.normal,escape:Gn(ht.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ht.gfm.url=Gn(ht.gfm.url,"i").replace("email",ht.gfm._extended_email).getRegex(),ht.breaks={...ht.gfm,br:Gn(ht.br).replace("{2,}","*").getRegex(),text:Gn(ht.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class Ru{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Yf,this.options.tokenizer=this.options.tokenizer||new hw,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:Rt.normal,inline:ht.normal};this.options.pedantic?(e.block=Rt.pedantic,e.inline=ht.pedantic):this.options.gfm&&(e.block=Rt.gfm,e.inline=this.options.breaks?ht.breaks:ht.gfm),this.tokenizer.rules=e}static get rules(){return{block:Rt,inline:ht}}static lex(t,e){return new Ru(e).lex(t)}static lexInline(t,e){return new Ru(e).inlineTokens(t)}lex(t){let e;for(t=t.replace(/\r\n|\r/g,"\n"),this.blockTokens(t,this.tokens);e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(t,e=[]){let r,i,o,c;for(t=this.options.pedantic?t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t.replace(/^( *)(\t+)/gm,(d,f,y)=>f+"    ".repeat(y.length));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(d=>!!(r=d.call({lexer:this},t,e))&&(t=t.substring(r.raw.length),e.push(r),!0)))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),1===r.raw.length&&e.length>0?e[e.length-1].raw+="\n":e.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),i=e[e.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?e.push(r):(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),i=e[e.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(i.raw+="\n"+r.raw,i.text+="\n"+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let d=1/0;const f=t.slice(1);let y;this.options.extensions.startBlock.forEach(function(w){y=w.call({lexer:this},f),"number"==typeof y&&y>=0&&(d=Math.min(d,y))}),d<1/0&&d>=0&&(o=t.substring(0,d+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){i=e[e.length-1],c&&"paragraph"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r),c=o.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),i=e[e.length-1],i&&"text"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r);continue}if(t){const d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let r,i,o,d,f,y,c=t;if(this.tokens.links){const w=Object.keys(this.tokens.links);if(w.length>0)for(;null!=(d=this.tokenizer.rules.inline.reflinkSearch.exec(c));)w.includes(d[0].slice(d[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,d.index)+"["+bD("a",d[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(d=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,d.index)+"["+bD("a",d[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(d=this.tokenizer.rules.inline.escapedEmSt.exec(c));)c=c.slice(0,d.index+d[0].length-2)+"++"+c.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;t;)if(f||(y=""),f=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(w=>!!(r=w.call({lexer:this},t,e))&&(t=t.substring(r.raw.length),e.push(r),!0)))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),i=e[e.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),i=e[e.length-1],i&&"text"===r.type&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(r=this.tokenizer.emStrong(t,c,y)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.autolink(t,Uo)){t=t.substring(r.raw.length),e.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t,Uo))){t=t.substring(r.raw.length),e.push(r);continue}if(o=t,this.options.extensions&&this.options.extensions.startInline){let w=1/0;const E=t.slice(1);let A;this.options.extensions.startInline.forEach(function(k){A=k.call({lexer:this},E),"number"==typeof A&&A>=0&&(w=Math.min(w,A))}),w<1/0&&w>=0&&(o=t.substring(0,w+1))}if(r=this.tokenizer.inlineText(o,R2)){t=t.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(y=r.raw.slice(-1)),f=!0,i=e[e.length-1],i&&"text"===i.type?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(t){const w="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(w);break}throw new Error(w)}}return e}}class ah{constructor(t){this.options=t||Yf}code(t,e,r){const i=(e||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(t,i);null!=o&&o!==t&&(r=!0,t=o)}return t=t.replace(/\n$/,"")+"\n",i?'<pre><code class="'+this.options.langPrefix+Vi(i)+'">'+(r?t:Vi(t,!0))+"</code></pre>\n":"<pre><code>"+(r?t:Vi(t,!0))+"</code></pre>\n"}blockquote(t){return`<blockquote>\n${t}</blockquote>\n`}html(t){return t}heading(t,e,r,i){return this.options.headerIds?`<h${e} id="${this.options.headerPrefix+i.slug(r)}">${t}</h${e}>\n`:`<h${e}>${t}</h${e}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e,r){const i=e?"ol":"ul";return"<"+i+(e&&1!==r?' start="'+r+'"':"")+">\n"+t+"</"+i+">\n"}listitem(t){return`<li>${t}</li>\n`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>\n`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}tablerow(t){return`<tr>\n${t}</tr>\n`}tablecell(t,e){const r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>\n`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,e,r){if(null===(t=vD(this.options.sanitize,this.options.baseUrl,t)))return r;let i='<a href="'+t+'"';return e&&(i+=' title="'+e+'"'),i+=">"+r+"</a>",i}image(t,e,r){if(null===(t=vD(this.options.sanitize,this.options.baseUrl,t)))return r;let i=`<img src="${t}" alt="${r}"`;return e&&(i+=` title="${e}"`),i+=this.options.xhtml?"/>":">",i}text(t){return t}}class CD{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,r){return""+r}image(t,e,r){return""+r}br(){return""}}class Dk{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,e){let r=t,i=0;if(this.seen.hasOwnProperty(r)){i=this.seen[t];do{i++,r=t+"-"+i}while(this.seen.hasOwnProperty(r))}return e||(this.seen[t]=i,this.seen[r]=0),r}slug(t,e={}){const r=this.serialize(t);return this.getNextSafeSlug(r,e.dryrun)}}class gi{constructor(t){this.options=t||Yf,this.options.renderer=this.options.renderer||new ah,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new CD,this.slugger=new Dk}static parse(t,e){return new gi(e).parse(t)}static parseInline(t,e){return new gi(e).parseInline(t)}parse(t,e=!0){let i,o,c,d,f,y,w,E,A,k,M,V,W,ne,he,Ie,me,Pe,He,r="";const ct=t.length;for(i=0;i<ct;i++)if(k=t[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[k.type]&&(He=this.options.extensions.renderers[k.type].call({parser:this},k),!1!==He||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(k.type)))r+=He||"";else switch(k.type){case"space":continue;case"hr":r+=this.renderer.hr();continue;case"heading":r+=this.renderer.heading(this.parseInline(k.tokens),k.depth,lw(this.parseInline(k.tokens,this.textRenderer)),this.slugger);continue;case"code":r+=this.renderer.code(k.text,k.lang,k.escaped);continue;case"table":for(E="",w="",d=k.header.length,o=0;o<d;o++)w+=this.renderer.tablecell(this.parseInline(k.header[o].tokens),{header:!0,align:k.align[o]});for(E+=this.renderer.tablerow(w),A="",d=k.rows.length,o=0;o<d;o++){for(y=k.rows[o],w="",f=y.length,c=0;c<f;c++)w+=this.renderer.tablecell(this.parseInline(y[c].tokens),{header:!1,align:k.align[c]});A+=this.renderer.tablerow(w)}r+=this.renderer.table(E,A);continue;case"blockquote":A=this.parse(k.tokens),r+=this.renderer.blockquote(A);continue;case"list":for(M=k.ordered,V=k.start,W=k.loose,d=k.items.length,A="",o=0;o<d;o++)he=k.items[o],Ie=he.checked,me=he.task,ne="",he.task&&(Pe=this.renderer.checkbox(Ie),W?he.tokens.length>0&&"paragraph"===he.tokens[0].type?(he.tokens[0].text=Pe+" "+he.tokens[0].text,he.tokens[0].tokens&&he.tokens[0].tokens.length>0&&"text"===he.tokens[0].tokens[0].type&&(he.tokens[0].tokens[0].text=Pe+" "+he.tokens[0].tokens[0].text)):he.tokens.unshift({type:"text",text:Pe}):ne+=Pe),ne+=this.parse(he.tokens,W),A+=this.renderer.listitem(ne,me,Ie);r+=this.renderer.list(A,M,V);continue;case"html":r+=this.renderer.html(k.text);continue;case"paragraph":r+=this.renderer.paragraph(this.parseInline(k.tokens));continue;case"text":for(A=k.tokens?this.parseInline(k.tokens):k.text;i+1<ct&&"text"===t[i+1].type;)k=t[++i],A+="\n"+(k.tokens?this.parseInline(k.tokens):k.text);r+=e?this.renderer.paragraph(A):A;continue;default:{const Bt='Token with "'+k.type+'" type was not found.';if(this.options.silent)return void console.error(Bt);throw new Error(Bt)}}return r}parseInline(t,e){e=e||this.renderer;let i,o,c,r="";const d=t.length;for(i=0;i<d;i++)if(o=t[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(c=this.options.extensions.renderers[o.type].call({parser:this},o),!1!==c||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)))r+=c||"";else switch(o.type){case"escape":case"text":r+=e.text(o.text);break;case"html":r+=e.html(o.text);break;case"link":r+=e.link(o.href,o.title,this.parseInline(o.tokens,e));break;case"image":r+=e.image(o.href,o.title,o.text);break;case"strong":r+=e.strong(this.parseInline(o.tokens,e));break;case"em":r+=e.em(this.parseInline(o.tokens,e));break;case"codespan":r+=e.codespan(o.text);break;case"br":r+=e.br();break;case"del":r+=e.del(this.parseInline(o.tokens,e));break;default:{const f='Token with "'+o.type+'" type was not found.';if(this.options.silent)return void console.error(f);throw new Error(f)}}return r}}class fw{constructor(t){this.options=t||Yf}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(t){return t}postprocess(t){return t}}function TD(n,t){return(e,r,i)=>{"function"==typeof r&&(i=r,r=null);const o={...r},c=function pw(n,t,e){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",n){const i="<p>An error occurred:</p><pre>"+Vi(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):e?void e(null,i):i}if(t)return Promise.reject(r);if(!e)throw r;e(r)}}((r={...Ot.defaults,...o}).silent,r.async,i);if(typeof e>"u"||null===e)return c(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof e)return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(function Ek(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}(r),r.hooks&&(r.hooks.options=r),i){const d=r.highlight;let f;try{r.hooks&&(e=r.hooks.preprocess(e)),f=n(e,r)}catch(E){return c(E)}const y=function(E){let A;if(!E)try{r.walkTokens&&Ot.walkTokens(f,r.walkTokens),A=t(f,r),r.hooks&&(A=r.hooks.postprocess(A))}catch(k){E=k}return r.highlight=d,E?c(E):i(null,A)};if(!d||d.length<3||(delete r.highlight,!f.length))return y();let w=0;return Ot.walkTokens(f,function(E){"code"===E.type&&(w++,setTimeout(()=>{d(E.text,E.lang,function(A,k){if(A)return y(A);null!=k&&k!==E.text&&(E.text=k,E.escaped=!0),w--,0===w&&y()})},0))}),void(0===w&&y())}if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(e):e).then(d=>n(d,r)).then(d=>r.walkTokens?Promise.all(Ot.walkTokens(d,r.walkTokens)).then(()=>d):d).then(d=>t(d,r)).then(d=>r.hooks?r.hooks.postprocess(d):d).catch(c);try{r.hooks&&(e=r.hooks.preprocess(e));const d=n(e,r);r.walkTokens&&Ot.walkTokens(d,r.walkTokens);let f=t(d,r);return r.hooks&&(f=r.hooks.postprocess(f)),f}catch(d){return c(d)}}}function Ot(n,t,e){return TD(Ru.lex,gi.parse)(n,t,e)}Ot.options=Ot.setOptions=function(n){return function I2(n){Yf=n}(Ot.defaults={...Ot.defaults,...n}),Ot},Ot.getDefaults=function mk(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},Ot.defaults=Yf,Ot.use=function(...n){const t=Ot.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(e=>{const r={...e};if(r.async=Ot.defaults.async||r.async||!1,e.extensions&&(e.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){const o=t.renderers[i.name];t.renderers[i.name]=o?function(...c){let d=i.renderer.apply(this,c);return!1===d&&(d=o.apply(this,c)),d}:i.renderer}if(i.tokenizer){if(!i.level||"block"!==i.level&&"inline"!==i.level)throw new Error("extension level must be 'block' or 'inline'");t[i.level]?t[i.level].unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&("block"===i.level?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:"inline"===i.level&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),e.renderer){const i=Ot.defaults.renderer||new ah;for(const o in e.renderer){const c=i[o];i[o]=(...d)=>{let f=e.renderer[o].apply(i,d);return!1===f&&(f=c.apply(i,d)),f}}r.renderer=i}if(e.tokenizer){const i=Ot.defaults.tokenizer||new hw;for(const o in e.tokenizer){const c=i[o];i[o]=(...d)=>{let f=e.tokenizer[o].apply(i,d);return!1===f&&(f=c.apply(i,d)),f}}r.tokenizer=i}if(e.hooks){const i=Ot.defaults.hooks||new fw;for(const o in e.hooks){const c=i[o];i[o]=fw.passThroughHooks.has(o)?d=>{if(Ot.defaults.async)return Promise.resolve(e.hooks[o].call(i,d)).then(y=>c.call(i,y));const f=e.hooks[o].call(i,d);return c.call(i,f)}:(...d)=>{let f=e.hooks[o].apply(i,d);return!1===f&&(f=c.apply(i,d)),f}}r.hooks=i}if(e.walkTokens){const i=Ot.defaults.walkTokens;r.walkTokens=function(o){let c=[];return c.push(e.walkTokens.call(this,o)),i&&(c=c.concat(i.call(this,o))),c}}Ot.setOptions(r)})},Ot.walkTokens=function(n,t){let e=[];for(const r of n)switch(e=e.concat(t.call(Ot,r)),r.type){case"table":for(const i of r.header)e=e.concat(Ot.walkTokens(i.tokens,t));for(const i of r.rows)for(const o of i)e=e.concat(Ot.walkTokens(o.tokens,t));break;case"list":e=e.concat(Ot.walkTokens(r.items,t));break;default:Ot.defaults.extensions&&Ot.defaults.extensions.childTokens&&Ot.defaults.extensions.childTokens[r.type]?Ot.defaults.extensions.childTokens[r.type].forEach(function(i){e=e.concat(Ot.walkTokens(r[i],t))}):r.tokens&&(e=e.concat(Ot.walkTokens(r.tokens,t)))}return e},Ot.parseInline=TD(Ru.lexInline,gi.parseInline),Ot.Parser=gi,Ot.parser=gi.parse,Ot.Renderer=ah,Ot.TextRenderer=CD,Ot.Lexer=Ru,Ot.lexer=Ru.lex,Ot.Tokenizer=hw,Ot.Slugger=Dk,Ot.Hooks=fw,Ot.parse=Ot;let _l=(()=>{class n{constructor(){this._buttonClick$=new dn.x,this.copied$=this._buttonClick$.pipe(Bn(()=>(0,jy.T)(Fe(!0),Xg(3e3).pipe(Qh(!1)))),oh(),mD(1)),this.copiedText$=this.copied$.pipe(ca(!1),(0,S.U)(e=>e?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["markdown-clipboard"]],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(e,r){1&e&&(s.TgZ(0,"button",0),s.NdJ("click",function(){return r.onCopyToClipboardClick()}),s.ALo(1,"async"),s._uU(2),s.ALo(3,"async"),s.qZA()),2&e&&(s.ekj("copied",s.lcZ(1,3,r.copied$)),s.xp6(2),s.Oqu(s.lcZ(3,5,r.copiedText$)))},dependencies:[si],encapsulation:2,changeDetection:0}),n})();class DD{}class Mk{}const ND=new s.OlP("SECURITY_CONTEXT");let xD=(()=>{class n{constructor(e,r,i,o,c,d){this.platform=e,this.securityContext=r,this.http=i,this.clipboardOptions=o,this.sanitizer=d,this.DEFAULT_MARKED_OPTIONS={renderer:new ah},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:this.DEFAULT_MARKED_OPTIONS,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new dn.x,this.reload$=this._reload$.asObservable(),this.options=c}get options(){return this._options}set options(e){this._options={...this.DEFAULT_MARKED_OPTIONS,...e}}get renderer(){return this.options.renderer}set renderer(e){this.options.renderer=e}parse(e,r=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:i,inline:o,emoji:c,mermaid:d,disableSanitizer:f}=r,y={...this.options,...r.markedOptions};d&&(this.renderer=this.extendRenderer(y.renderer||new ah));const w=this.trimIndentation(e),E=i?this.decodeHtml(w):w,A=c?this.parseEmoji(E):E,k=this.parseMarked(A,y,o);return(f?k:this.sanitizer.sanitize(this.securityContext,k))||""}render(e,r=this.DEFAULT_RENDER_OPTIONS,i){const{clipboard:o,clipboardOptions:c,katex:d,katexOptions:f,mermaid:y,mermaidOptions:w}=r;o&&this.renderClipboard(e,i,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...c}),d&&this.renderKatex(e,{...this.DEFAULT_KATEX_OPTIONS,...f}),y&&this.renderMermaid(e,{...this.DEFAULT_MERMAID_OPTIONS,...w}),this.highlight(e)}reload(){this._reload$.next()}getSource(e){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(e,{responseType:"text"}).pipe((0,S.U)(r=>this.handleExtension(e,r)))}highlight(e){if(!wo(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;e||(e=document);const r=e.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,i=>i.classList.add("language-none")),Prism.highlightAllUnder(e)}decodeHtml(e){if(!wo(this.platform))return e;const r=document.createElement("textarea");return r.innerHTML=e,r.value}extendRenderer(e){const r=e;if(!0===r.\u0275NgxMarkdownRendererExtended)return e;const i=e.code;return e.code=function(o,c,d){return"mermaid"===c?`<div class="mermaid">${o}</div>`:i.call(this,o,c,d)},r.\u0275NgxMarkdownRendererExtended=!0,e}handleExtension(e,r){const i=e.lastIndexOf("://"),o=i>-1?e.substring(i+4):e,c=o.lastIndexOf("/"),d=c>-1?o.substring(c+1).split("?")[0]:"",f=d.lastIndexOf("."),y=f>-1?d.substring(f+1):"";return y&&"md"!==y?"```"+y+"\n"+r+"\n```":r}parseMarked(e,r,i=!1){return i?Ot.parseInline(e,r):Ot.parse(e,r)}parseEmoji(e){if(!wo(this.platform))return e;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(e)}renderKatex(e,r){if(wo(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(e,r)}}renderClipboard(e,r,i){if(!wo(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!r)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:o,buttonTemplate:c}=i,d=e.querySelectorAll("pre");for(let f=0;f<d.length;f++){const y=d.item(f),w=document.createElement("div");w.style.position="relative",y.parentNode.insertBefore(w,y),w.appendChild(y);const E=document.createElement("div");let A,k;E.style.position="absolute",E.style.top=".5em",E.style.right=".5em",E.style.opacity="0",E.style.transition="opacity 250ms ease-out",w.insertAdjacentElement("beforeend",E),y.onmouseover=()=>E.style.opacity="1",y.onmouseout=()=>E.style.opacity="0",A=o?r.createComponent(o).hostView:c?r.createEmbeddedView(c):r.createComponent(_l).hostView,A.rootNodes.forEach(M=>{M.onmouseover=()=>E.style.opacity="1",E.appendChild(M),k=new ClipboardJS(M,{text:()=>y.innerText})}),A.onDestroy(()=>k.destroy())}}renderMermaid(e,r=this.DEFAULT_MERMAID_OPTIONS){if(!wo(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.init>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const i=e.querySelectorAll(".mermaid");0!==i.length&&(mermaid.initialize(r),mermaid.init(i))}trimIndentation(e){if(!e)return"";let r;return e.split("\n").map(i=>{let o=r;return i.length>0&&(o=isNaN(o)?i.search(/\S|$/):Math.min(i.search(/\S|$/),o)),isNaN(r)&&(r=o),o?i.substring(o):i}).join("\n")}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.Lbi),s.LFG(ND),s.LFG(nw,8),s.LFG(DD,8),s.LFG(Mk,8),s.LFG(zh))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),RD=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[xD,e&&e.loader||[],e&&e.clipboardOptions||[],e&&e.markedOptions||[],{provide:ND,useValue:e&&null!=e.sanitize?e.sanitize:s.q3G.HTML}]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[qr]}),n})();var mw;!function(n){let t;var i;let e,r;(i=t=n.SecurityLevel||(n.SecurityLevel={})).Strict="strict",i.Loose="loose",i.Antiscript="antiscript",i.Sandbox="sandbox",function(i){i.Base="base",i.Forest="forest",i.Dark="dark",i.Default="default",i.Neutral="neutral"}(e=n.Theme||(n.Theme={})),function(i){i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"}(r=n.LogLevel||(n.LogLevel={}))}(mw||(mw={}));let zy=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const OD=["toast-component",""];function Hk(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"button",5),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.remove())}),s.TgZ(1,"span",6),s._uU(2,"\xd7"),s.qZA()()}}function F2(n,t){if(1&n&&(s.ynx(0),s._uU(1),s.BQk()),2&n){const e=s.oxw(2);s.xp6(1),s.hij("[",e.duplicatesCount+1,"]")}}function L2(n,t){if(1&n&&(s.TgZ(0,"div"),s._uU(1),s.YNc(2,F2,2,1,"ng-container",4),s.qZA()),2&n){const e=s.oxw();s.Tol(e.options.titleClass),s.uIk("aria-label",e.title),s.xp6(1),s.hij(" ",e.title," "),s.xp6(1),s.Q6J("ngIf",e.duplicatesCount)}}function U2(n,t){if(1&n&&s._UZ(0,"div",7),2&n){const e=s.oxw();s.Tol(e.options.messageClass),s.Q6J("innerHTML",e.message,s.oJD)}}function MD(n,t){if(1&n&&(s.TgZ(0,"div",8),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.Tol(e.options.messageClass),s.uIk("aria-label",e.message),s.xp6(1),s.hij(" ",e.message," ")}}function $k(n,t){if(1&n&&(s.TgZ(0,"div"),s._UZ(1,"div",9),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Udp("width",e.width+"%")}}class qk{_attachedHost;component;viewContainerRef;injector;constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){const t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Wy{_attachedPortal;_disposeFn;attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}}class zk{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new dn.x;_activate=new dn.x;_manualClose=new dn.x;_resetTimeout=new dn.x;_countDuplicate=new dn.x;constructor(t){this._overlayRef=t}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}}class Ky{toastId;config;message;title;toastType;toastRef;_onTap=new dn.x;_onAction=new dn.x;constructor(t,e,r,i,o,c){this.toastId=t,this.config=e,this.message=r,this.title=i,this.toastType=o,this.toastRef=c,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}}const Ou=new s.OlP("ToastConfig");class PD extends Wy{_hostDomElement;_componentFactoryResolver;_appRef;constructor(t,e,r){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=r}attachComponentPortal(t,e){const r=this._componentFactoryResolver.resolveComponentFactory(t.component);let i;return i=r.create(t.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let yw=(()=>{class n{_document=(0,s.f3M)(ie);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class vw{_portalHost;constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}}let Wk=(()=>{class n{_overlayContainer=(0,s.f3M)(yw);_componentFactoryResolver=(0,s.f3M)(s._Vd);_appRef=(0,s.f3M)(s.z2F);_document=(0,s.f3M)(ie);_paneElements=new Map;create(e,r){return this._createOverlayRef(this.getPaneElement(e,r))}getPaneElement(e="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[e]||(this._paneElements.get(r)[e]=this._createPaneElement(e,r)),this._paneElements.get(r)[e]}_createPaneElement(e,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(e),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(e){return new PD(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new vw(this._createPortalHost(e))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ca=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(e,r,i,o,c){this.overlay=r,this._injector=i,this.sanitizer=o,this.ngZone=c,this.toastrConfig={...e.default,...e.config},e.config.iconClasses&&(this.toastrConfig.iconClasses={...e.default.iconClasses,...e.config.iconClasses})}show(e,r,i={},o=""){return this._preBuildNotification(o,e,r,this.applyConfig(i))}success(e,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",e,r,this.applyConfig(i))}error(e,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",e,r,this.applyConfig(i))}info(e,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",e,r,this.applyConfig(i))}warning(e,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",e,r,this.applyConfig(i))}clear(e){for(const r of this.toasts)if(void 0!==e){if(r.toastId===e)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(e){const r=this._findToast(e);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(e="",r="",i,o){const{includeTitleDuplicates:c}=this.toastrConfig;for(const d of this.toasts)if((!c||c&&d.title===e)&&d.message===r)return d.toastRef.onDuplicate(i,o),d;return null}applyConfig(e={}){return{...this.toastrConfig,...e}}_findToast(e){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===e)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(e,r,i,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,r,i,o)):this._buildNotification(e,r,i,o)}_buildNotification(e,r,i,o){if(!o.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=r;let d=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(d=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const f=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let y=r;r&&o.enableHtml&&(y=this.sanitizer.sanitize(s.q3G.HTML,r));const w=new zk(f),E=new Ky(this.index,o,y,i,e,w),k=s.zs3.create({providers:[{provide:Ky,useValue:E}],parent:this._injector}),M=new qk(o.toastComponent,k),V=f.attach(M,o.newestOnTop);w.componentInstance=V.instance;const W={toastId:this.index,title:i||"",message:r||"",toastRef:w,onShown:w.afterActivate(),onHidden:w.afterClosed(),onTap:E.onTap(),onAction:E.onAction(),portal:V};return d||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{W.toastRef.activate()})),this.toasts.push(W),W}static \u0275fac=function(r){return new(r||n)(s.LFG(Ou),s.LFG(Wk),s.LFG(s.zs3),s.LFG(zh),s.LFG(s.R0b))};static \u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Yy={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if("inactive"===this.state.value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,r,i){this.toastrService=e,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),r)):this.timeout=setTimeout(()=>e(),r)}outsideInterval(e,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),r)):this.intervalId=setInterval(()=>e(),r)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}static \u0275fac=function(r){return new(r||n)(s.Y36(Ca),s.Y36(Ky),s.Y36(s.R0b))};static \u0275cmp=s.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){1&r&&s.NdJ("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),2&r&&(s.d8E("@flyInOut",i.state),s.Tol(i.toastClasses),s.Udp("display",i.displayStyle))},standalone:!0,features:[s.jDz],attrs:OD,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){1&r&&(s.YNc(0,Hk,3,0,"button",0),s.YNc(1,L2,3,5,"div",1),s.YNc(2,U2,1,3,"div",2),s.YNc(3,MD,2,4,"div",3),s.YNc(4,$k,2,2,"div",4)),2&r&&(s.Q6J("ngIf",i.options.closeButton),s.xp6(1),s.Q6J("ngIf",i.title),s.xp6(1),s.Q6J("ngIf",i.message&&i.options.enableHtml),s.xp6(1),s.Q6J("ngIf",i.message&&!i.options.enableHtml),s.xp6(1),s.Q6J("ngIf",i.options.progressBar))},dependencies:[mr],encapsulation:2,data:{animation:[$_("flyInOut",[Z_("inactive",Hd({opacity:0})),Z_("active",Hd({opacity:1})),Z_("removed",Hd({opacity:0})),lT("inactive => active",H0("{{ easeTime }}ms {{ easing }}")),lT("active => removed",H0("{{ easeTime }}ms {{ easing }}"))])]}})}return n})()},$2=(n={})=>(0,s.MR2)([{provide:Ou,useValue:{default:Yy,config:n}}]);let G2=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[$2(e)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=s.oAB({type:n});static \u0275inj=s.cJS({})}return n})(),mc=(()=>{class n{constructor(){}add(e,r){localStorage.setItem(e,JSON.stringify(r))}update(e,r){localStorage.getItem(e)&&this.delete(e),this.add(e,r)}get(e){const r=localStorage.getItem(e);return r?JSON.parse(r):null}getLoggedAccount(){return this.get("logged_account")}delete(e){localStorage.removeItem(e)}clear(){localStorage.clear()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Yk(n,t){1&n&&(s.TgZ(0,"small",22),s._uU(1," Please enter email address.! "),s.qZA())}function Jk(n,t){1&n&&(s.TgZ(0,"small",22),s._uU(1," Email address not well formed.! "),s.qZA())}let LD=(()=>{class n{constructor(e,r,i,o){this.accountInteractor=e,this.router=r,this.toastr=i,this.localStorageService=o,this.year=(new Date).getFullYear(),this.version="0.1.1",this.loginForm=new hi({email:new Le("",[gn.required,gn.email]),password:new Le("",[gn.required])})}ngOnInit(){this.localStorageService.clear()}onSubmit(){this.loginForm.valid?this.accountInteractor.login({username:this.loginForm.value.email,password:this.loginForm.value.password}).subscribe({next:e=>{e&&e.success?(this.localStorageService.add("logged_account",e.data),this.router.navigate(["/dashboard"])):this.toastr.error("Account not found","Error")},error:e=>{this.toastr.error(e.message(),"Error")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Error")}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(zy),s.Y36(Tr),s.Y36(Ca),s.Y36(mc))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-login"]],decls:38,vars:6,consts:[[1,"main-wrapper","account-wrapper"],[1,"account-page"],[1,"account-center"],[1,"account-box"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],[1,"account-logo"],["href",""],["src","assets/images/logo.png","alt",""],[1,"form-group"],["for","loginUsername"],["type","email","formControlName","email","placeholder","Enter email","id","loginUsername",1,"form-control"],["class","form-text text-muted",4,"ngIf"],["for","loginPassword"],["type","password","formControlName","password","placeholder","Password","id","loginPassword",1,"form-control"],[1,"form-group","text-right"],[1,"form-group","text-center"],["type","submit",1,"btn","btn-primary","account-btn",2,"background-color","#042c44","color","#fcbc1f",3,"disabled"],[1,"text-center","register-link"],[1,"m-t-50",2,"font-size","xx-small"],["width","50","src","assets/images/akkodis.png","alt","akkodis",1,""],[2,"color","#000"],[2,"color","#F00"],[1,"form-text","text-muted"]],template:function(r,i){1&r&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(5,"div",5)(6,"a",6),s._UZ(7,"img",7),s.qZA()(),s.TgZ(8,"div",8)(9,"label",9),s._uU(10,"Email"),s.qZA(),s._UZ(11,"input",10),s.YNc(12,Yk,2,0,"small",11),s.YNc(13,Jk,2,0,"small",11),s.qZA(),s.TgZ(14,"div",8)(15,"label",12),s._uU(16,"Password"),s.qZA(),s._UZ(17,"input",13),s.qZA(),s.TgZ(18,"div",14)(19,"a",6),s._uU(20,"Forgot your password?"),s.qZA()(),s.TgZ(21,"div",15)(22,"button",16),s._uU(23," Login "),s.qZA()(),s.TgZ(24,"div",17),s._uU(25," Don\u2019t have an account? "),s.TgZ(26,"a",6),s._uU(27,"Register Now"),s.qZA()(),s.TgZ(28,"div",18),s._UZ(29,"img",19),s.TgZ(30,"strong"),s._uU(31," \xa9 "),s.TgZ(32,"span",20),s._uU(33),s._UZ(34,"br"),s._uU(35,"Version : "),s.qZA()(),s.TgZ(36,"strong",21),s._uU(37),s.qZA()()()()()()()),2&r&&(s.xp6(4),s.Q6J("formGroup",i.loginForm),s.xp6(8),s.Q6J("ngIf",i.loginForm.controls.email.touched&&(null==i.loginForm.controls.email.errors?null:i.loginForm.controls.email.errors.required)),s.xp6(1),s.Q6J("ngIf",i.loginForm.controls.email.touched&&(null==i.loginForm.controls.email.errors?null:i.loginForm.controls.email.errors.email)),s.xp6(9),s.Q6J("disabled",!i.loginForm.valid),s.xp6(11),s.hij(" ",i.year," "),s.xp6(4),s.Oqu(i.version))},dependencies:[mr,hc,uc,Nu,eh,fc,xu],encapsulation:2})}return n})(),UD=(()=>{class n{constructor(e,r){this.localStorageService=e,this.router=r,this.showSideBar=!0,this.loggedAccount=e.getLoggedAccount()}onClickBars(){this.showSideBar=!this.showSideBar}onClickLogo(){this.router.navigate(["dashboard"])}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(mc),s.Y36(Tr))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-header"]],decls:17,vars:2,consts:[[1,"header"],[1,"header-left"],[1,"logo","pointer",3,"click"],["src","assets/images/logo.png","width","35","height","35","alt",""],["id","toggle_btn","href","javascript:void(0);",3,"click"],[1,"fa","fa-bars"],["id","mobile_btn","href","#sidebar",1,"mobile_btn","float-left"],[1,"nav","user-menu","float-right"],[1,"nav-item","dropdown"],["href","#","data-toggle","dropdown",1,"dropdown-toggle","nav-link","user-link"],[1,"user-img"],["src","assets/images/user.jpg","width","24","alt","Admin",1,"rounded-circle"]],template:function(r,i){1&r&&(s.TgZ(0,"div",0)(1,"div",1)(2,"a",2),s.NdJ("click",function(){return i.onClickLogo()}),s._UZ(3,"img",3),s.TgZ(4,"span"),s._uU(5,"EstiMate"),s.qZA()()(),s.TgZ(6,"a",4),s.NdJ("click",function(){return i.onClickBars()}),s._UZ(7,"i",5),s.qZA(),s.TgZ(8,"a",6),s._UZ(9,"i",5),s.qZA(),s.TgZ(10,"ul",7)(11,"li",8)(12,"a",9)(13,"span",10),s._UZ(14,"img",11),s.qZA(),s.TgZ(15,"span"),s._uU(16),s.qZA()()()()()),2&r&&(s.xp6(16),s.AsE("",i.loggedAccount.firstname," ",i.loggedAccount.lastname,""))}})}return n})(),BD=(()=>{class n{constructor(e,r){this.router=e,this.localStorageService=r,this.menu="dashboard",this.year=(new Date).getFullYear(),this.version="0.1.1"}onClickMenu(e){this.menu=e,this.router.navigate([e])}onClickSignOut(){this.localStorageService.clear(),this.router.navigate(["login"])}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(Tr),s.Y36(mc))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-sidebar"]],decls:40,vars:6,consts:[["id","sidebar",1,"sidebar"],[1,"sidebar-inner","slimscroll"],["id","sidebar-menu",1,"sidebar-menu"],[1,"menu-title"],[1,"pointer",3,"ngClass"],[3,"click"],[1,"fa","fa-dashboard"],[1,"fa","fa-user-md"],[1,"fa","fa-users"],[1,"fa","fa-cog"],[1,"pointer",2,"background-color","yellow"],[1,"fa","fa-sign-out"],[1,"pointer","m-3",2,"font-size","xx-small"],["width","50","src","assets/images/akkodis.png","alt","akkodis",1,""],[2,"color","#000"],[2,"color","#F00"]],template:function(r,i){1&r&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul"),s._UZ(4,"li",3),s.TgZ(5,"li",4)(6,"a",5),s.NdJ("click",function(){return i.onClickMenu("dashboard")}),s._UZ(7,"i",6),s.TgZ(8,"span"),s._uU(9,"Projects"),s.qZA()()(),s.TgZ(10,"li",4)(11,"a",5),s.NdJ("click",function(){return i.onClickMenu("clients")}),s._UZ(12,"i",7),s.TgZ(13,"span"),s._uU(14,"Clients"),s.qZA()()(),s.TgZ(15,"li",4)(16,"a",5),s.NdJ("click",function(){return i.onClickMenu("accounts")}),s._UZ(17,"i",8),s.TgZ(18,"span"),s._uU(19,"Accounts"),s.qZA()()(),s.TgZ(20,"li",4)(21,"a",5),s.NdJ("click",function(){return i.onClickMenu("settings")}),s._UZ(22,"i",9),s.TgZ(23,"span"),s._uU(24,"Settings"),s.qZA()()(),s.TgZ(25,"li",10)(26,"a",5),s.NdJ("click",function(){return i.onClickSignOut()}),s._UZ(27,"i",11),s.TgZ(28,"span"),s._uU(29,"Sign out"),s.qZA()()(),s.TgZ(30,"li",12),s._UZ(31,"img",13),s.TgZ(32,"strong"),s._uU(33," \xa9 "),s.TgZ(34,"span",14),s._uU(35),s._UZ(36,"br"),s._uU(37,"Version : "),s.qZA()(),s.TgZ(38,"strong",15),s._uU(39),s.qZA()()()()()()),2&r&&(s.xp6(5),s.Q6J("ngClass","dashboard"==i.menu?"active":""),s.xp6(5),s.Q6J("ngClass","clients"==i.menu?"active":""),s.xp6(5),s.Q6J("ngClass","accounts"==i.menu?"active":""),s.xp6(5),s.Q6J("ngClass","settings"==i.menu?"active":""),s.xp6(15),s.hij(" ",i.year," "),s.xp6(4),s.Oqu(i.version))},dependencies:[jt]})}return n})(),Qk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-auth"]],decls:6,vars:0,consts:[[1,"page-wrapper","sm-responsive"],[1,"content"]],template:function(r,i){1&r&&(s.TgZ(0,"div"),s._UZ(1,"app-header")(2,"app-sidebar"),s.TgZ(3,"div",0)(4,"div",1),s._UZ(5,"router-outlet"),s.qZA()()())},dependencies:[k_,UD,BD]})}return n})();const bw={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Jf;const z2=new Uint8Array(16);function VD(){if(!Jf&&(Jf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Jf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jf(z2)}const mi=[];for(let n=0;n<256;++n)mi.push((n+256).toString(16).slice(1));const nm=function K2(n,t,e){if(bw.randomUUID&&!t&&!n)return bw.randomUUID();const r=(n=n||{}).random||(n.rng||VD)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){e=e||0;for(let i=0;i<16;++i)t[e+i]=r[i];return t}return function jD(n,t=0){return mi[n[t+0]]+mi[n[t+1]]+mi[n[t+2]]+mi[n[t+3]]+"-"+mi[n[t+4]]+mi[n[t+5]]+"-"+mi[n[t+6]]+mi[n[t+7]]+"-"+mi[n[t+8]]+mi[n[t+9]]+"-"+mi[n[t+10]]+mi[n[t+11]]+mi[n[t+12]]+mi[n[t+13]]+mi[n[t+14]]+mi[n[t+15]]}(r)};let HD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class lh{constructor(t,e,r){this.success=t,this.message=e,this.data=r}}class rm{toEntities(t){return t.map(e=>this.toEntity(e))}fromEntities(t){return t.map(e=>this.fromEntity(e))}toResponse(t){return t?new lh(!0,"",this.fromEntity(t)):new lh(!1,"Not found",{})}toFirstResponse(t){return t&&t.length>0?new lh(!0,"",this.fromEntity(t[0])):new lh(!1,"Not found",{})}toResponses(t){return t&&t.length>0?new lh(!0,"",this.fromEntities(t)):new lh(!1,"Not found",[])}toEmptyResponse(){return new lh(!0,"",{})}}class Y2 extends rm{toEntity(t){return{id:t.id,createdAt:t.createdAt,updatedAt:new Date,deleted:!1,title:t.title,duration:t.duration,description:t.description,margin:t.margin,client:t.client,riskProvision:t.riskProvision}}fromEntity(t){return{id:t.id,createdAt:t.createdAt,title:t.title,duration:t.duration,description:t.description,margin:t.margin,client:t.client,riskProvision:t.riskProvision}}fromRequest(t){return{updatedAt:new Date,deleted:!1,title:t.title,duration:t.duration,description:t.description,margin:t.margin,client:t.client,riskProvision:t.riskProvision}}}const _c_resource_insurance="ANNUALLY AED 790",_c_resource_flightTicket="ANNUALLY AED 2500",_c_resource_workPermit="ANNUALLY AED 6500",_c_resource_office="DAILY AED 19",_c_resource_generalSupportPackage="DAILY AED 15",_c_resource_laptopWorkstation="ANNUALLY AED 5000",_c_resource_licenses="ANNUALLY AED 400",_c_resource_mobilizationCost="ANNUALLY AED 3500",_c_resource_parking="ANNUALLY AED 0",_c_resource_transportation="ANNUALLY AED 0";class Xk extends rm{toEntity(t){return{id:t.id,createdAt:t.createdAt,updatedAt:new Date,deleted:!1,jobTitle:t.jobTitle,resourceType:t.resourceType,workload:t.workload,project:t.project,basicSalary:t.basicSalary,allowance:t.allowance,gratuity:t.gratuity,insurance:t.insurance,flightTicket:t.flightTicket,workPermit:t.workPermit,office:t.office,generalSupportPackage:t.generalSupportPackage,laptopWorkstation:t.laptopWorkstation,licenses:t.licenses,mobilizationCost:t.mobilizationCost,parking:t.parking,transportation:t.transportation}}fromEntity(t){return{id:t.id,createdAt:t.createdAt,jobTitle:t.jobTitle,resourceType:t.resourceType,workload:t.workload,project:t.project,basicSalary:t.basicSalary,allowance:t.allowance,gratuity:t.gratuity,insurance:t.insurance,flightTicket:t.flightTicket,workPermit:t.workPermit,office:t.office,generalSupportPackage:t.generalSupportPackage,laptopWorkstation:t.laptopWorkstation,licenses:t.licenses,mobilizationCost:t.mobilizationCost,parking:t.parking,transportation:t.transportation}}fromRequest(t){return{updatedAt:new Date,deleted:!1,jobTitle:t.jobTitle,resourceType:t.resourceType,workload:t.workload,project:t.project,basicSalary:t.basicSalary,allowance:t.allowance,gratuity:t.gratuity,insurance:t.insurance??_c_resource_insurance,flightTicket:t.flightTicket??_c_resource_flightTicket,workPermit:t.workPermit??_c_resource_workPermit,office:t.office??_c_resource_office,generalSupportPackage:t.generalSupportPackage??_c_resource_generalSupportPackage,laptopWorkstation:t.laptopWorkstation??_c_resource_laptopWorkstation,licenses:t.licenses??_c_resource_licenses,mobilizationCost:t.mobilizationCost??_c_resource_mobilizationCost,parking:t.parking??_c_resource_parking,transportation:t.transportation??_c_resource_transportation}}}class Qf{}let im=(()=>{class n extends Qf{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=s.n5z(n)))(i||n)}}();static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$D=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.create(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(im))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),GD=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.delete(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(im))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ZD=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.update(e.id,e.request)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(im))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ww=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.fetch(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(im))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qD=(()=>{class n{constructor(e){this.repository=e}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(im))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),a=(()=>{class n extends Qf{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=s.n5z(n)))(i||n)}}();static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),l=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.fetchByProject(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(a))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),u=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.delete(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(a))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),h=(()=>{class n extends HD{constructor(e,r,i,o,c,d,f){super(),this.createProjectUseCase=e,this.deleteProjectUseCase=r,this.updateProjectUseCase=i,this.fetchProjectUseCase=o,this.fetchProjectsUseCase=c,this.fetchProjectResourcesUseCase=d,this.deleteResourceUseCase=f,this.mapper=new Y2,this.resourceMapper=new Xk}create(e){let r=this.mapper.fromRequest(e);return r.id=nm(),r.createdAt=new Date,this.createProjectUseCase.execute(r).pipe((0,S.U)(i=>this.mapper.toResponse(i)))}delete(e){return this.fetchProjectResourcesUseCase.execute(e).subscribe({next:r=>{r.forEach(i=>this.deleteResourceUseCase.execute(i.id))},error:r=>{},complete:()=>{}}),this.deleteProjectUseCase.execute(e),Fe(this.mapper.toEmptyResponse())}fetchAll(){return this.fetchProjectsUseCase.execute().pipe((0,S.U)(e=>this.mapper.toResponses(e)))}fetchOne(e){return this.fetchProjectUseCase.execute(e).pipe((0,S.U)(r=>this.mapper.toResponse(r)))}update(e,r){return this.updateProjectUseCase.execute({id:e,request:this.mapper.fromRequest(r)}),Fe(this.mapper.toEmptyResponse())}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG($D),s.LFG(GD),s.LFG(ZD),s.LFG(ww),s.LFG(qD),s.LFG(l),s.LFG(u))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),p=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),m=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),b=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.create(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(a))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),T=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.update(e.id,e.request)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(a))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),D=(()=>{class n{constructor(e){this.repository=e}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(a))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),N=(()=>{class n extends m{constructor(e,r,i,o,c){super(),this.createResourceUseCase=e,this.fetchProjectResourcesUseCase=r,this.deleteResourceUseCase=i,this.updateResourceUseCase=o,this.fetchResourcesUseCase=c,this.mapper=new Xk}create(e){let r=this.mapper.fromRequest(e);return r.id=nm(),r.createdAt=new Date,this.createResourceUseCase.execute(r).pipe((0,S.U)(i=>this.mapper.toResponse(i)))}delete(e){return this.deleteResourceUseCase.execute(e),Fe(this.mapper.toEmptyResponse())}fetchAll(){return this.fetchResourcesUseCase.execute().pipe((0,S.U)(e=>this.mapper.toResponses(e)))}fetchByProject(e){return this.fetchProjectResourcesUseCase.execute(e).pipe((0,S.U)(r=>this.mapper.toResponses(r)))}fetchOne(e){return Fe()}update(e,r){return this.updateResourceUseCase.execute({id:e,request:this.mapper.fromRequest(r)}),Fe(this.mapper.toEmptyResponse())}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(b),s.LFG(l),s.LFG(u),s.LFG(T),s.LFG(D))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function O(n,t){if(1&n&&(s.TgZ(0,"b"),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Oqu(e.projects.length)}}function B(n,t){1&n&&s._UZ(0,"option",51),2&n&&s.Q6J("value",t.$implicit.companyName)}function J(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"img",52),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s.qZA()}}function re(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"tr")(1,"td",53),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickAddResources(o))}),s.TgZ(2,"h2"),s._uU(3),s.qZA()(),s.TgZ(4,"td",53),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickAddResources(o))}),s._uU(5),s.qZA(),s.TgZ(6,"td",53),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickAddResources(o))}),s._uU(7),s.qZA(),s.TgZ(8,"td",53),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickAddResources(o))}),s._uU(9),s.qZA(),s.TgZ(10,"td")(11,"img",54),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickProjectDuplicate(o))}),s.qZA(),s.TgZ(12,"img",55),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickProjectToBeDeleted(o))}),s.qZA()()()}if(2&n){const e=t.$implicit,r=s.oxw();let i;s.xp6(3),s.Oqu(e.title),s.xp6(2),s.Oqu(null==(i=r.getClient(e.client))?null:i.companyName),s.xp6(2),s.Oqu(e.duration),s.xp6(2),s.Oqu(e.description)}}function De(n,t){1&n&&(s.TgZ(0,"small",56),s._uU(1," Please enter the title of the project. "),s.qZA())}function We(n,t){1&n&&s._UZ(0,"option",51),2&n&&s.Q6J("value",t.$implicit.companyName)}let rt=(()=>{class n{constructor(e,r,i,o,c,d){this.projectInteractor=e,this.clientInteractor=r,this.localStorageService=i,this.resourceInteractor=o,this.router=c,this.toastr=d,this.projects=[],this.clients=[],this.options=["aaa","bbb","eee"],this.projectForm=new hi({title:new Le("",[gn.required]),client:new Le("",[gn.required]),description:new Le(""),duration:new Le("")})}ngOnInit(){this.fetchClients(),this.fetchProjects()}fetchClients(){this.clientInteractor.fetchAll().subscribe({next:e=>{e&&e.success&&(this.clients=e.data)},error:e=>{},complete:()=>{}})}fetchProjects(){this.projectInteractor.fetchAll().subscribe({next:e=>{e&&e.success&&(this.projects=e.data)},error:e=>{},complete:()=>{}})}getClient(e){return this.clients.find(r=>r.id===e)}getClientById(e){return this.clients.find(r=>r.id===e)}onSubmit(){if(this.projectForm.valid){let e={title:this.projectForm.value.title,duration:this.projectForm.value.duration,description:this.projectForm.value.description,client:this.projectForm.value.client,margin:18,riskProvision:0},r=this.getClientById(e.client);r?(e.client=r.id,this.saveProject(e)):this.saveClient({companyName:e.client,email:"",address:"",phoneNumber:"",logo:""},e)}else this.toastr.error("Some inputs are incorrect","Save project")}saveProject(e){this.projectInteractor.create(e).subscribe({next:r=>{this.toastr.success("project successfully saved","Save project"),this.projectForm.reset(),this.fetchProjects()},error:r=>{this.toastr.error("Error occurred while saving the project","Save project")},complete:()=>{}})}saveClient(e,r){this.clientInteractor.create(e).subscribe({next:i=>{r.client=i.data?.id,this.saveProject(r)},error:i=>{this.toastr.error("Error occurred while saving the client","Save client")},complete:()=>{}})}onClickProject(e){this.projectForm.setValue({title:e.title,duration:e.duration,description:e.description,client:e.client})}onClickAddResources(e){this.localStorageService.add("project",e),this.router.navigate(["/resources"])}onClickProjectToBeDeleted(e){this.localStorageService.add("project",e)}onClickDismiss(){this.localStorageService.delete("project")}onClickDeleteProjectAndResources(){let e=this.localStorageService.get("project");e&&e.id?this.resourceInteractor.fetchByProject(e.id).subscribe({next:r=>{r.data?.forEach(i=>this.resourceInteractor.delete(i.id)),this.deleteProject(e.id)},error:r=>{},complete:()=>{}}):(this.localStorageService.delete("project"),this.toastr.error("Project not found","Delete project"))}deleteProject(e){this.projectInteractor.delete(e).subscribe({next:r=>{this.localStorageService.delete("project"),this.toastr.success("Project deleted successfully","Delete project"),this.fetchProjects()},error:r=>{this.localStorageService.delete("project"),this.toastr.error("Error occurred while deleting the project","Delete project")},complete:()=>{}})}fetchResources(e){this.resourceInteractor.fetchByProject(e).subscribe({next:r=>{},error:r=>{},complete:()=>{}})}onClickProjectDuplicate(e){this.projectInteractor.create({title:e.title+"_duplicated",duration:e.duration,description:e.description,client:e.client,margin:e.margin,riskProvision:e.riskProvision}).subscribe({next:i=>{this.resourceInteractor.fetchByProject(e.id).subscribe({next:o=>{o.data?.forEach(c=>{this.resourceInteractor.create({jobTitle:c.jobTitle,resourceType:c.resourceType,workload:c.workload,project:i.data?.id,basicSalary:c.basicSalary,allowance:c.allowance,gratuity:c.gratuity,insurance:c.insurance,flightTicket:c.flightTicket,workPermit:c.workPermit,office:c.office,generalSupportPackage:c.generalSupportPackage,laptopWorkstation:c.laptopWorkstation,licenses:c.licenses})}),this.toastr.success("project successfully duplicated","Duplicate project")},error:o=>{this.toastr.error("Error occurred while duplicating the project","Duplicate client")},complete:()=>{}})},error:i=>{this.toastr.error("Error occurred while duplicating the project","Duplicate client")},complete:()=>{}})}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(h),s.Y36(p),s.Y36(mc),s.Y36(N),s.Y36(Tr),s.Y36(Ca))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-dashboard"]],decls:104,vars:12,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],[4,"ngIf"],["href","","data-bs-toggle","modal","data-bs-target","#addProjectModal",1,"btn","btn-outline-primary","float-right"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],[1,"text-right"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["type","text","formControlName","title","placeholder","Title of the project","id","title"],["autocomplete","off","autofocus","","formControlName","client","placeholder","Select client","list","options"],["id","options"],[3,"value",4,"ngFor","ngForOf"],["type","number","formControlName","duration","placeholder","Duration","id","duration"],["type","text","formControlName","description","placeholder","Description","id","description"],["class","aspect-square","src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["id","addProjectModal","tabindex","-1","aria-labelledby","addProjectModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","addProjectModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","row"],[1,"col-12"],[1,"form-group"],["for","projectTitle"],["type","text","formControlName","title","placeholder","Title","id","projectTitle",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],[1,"col-9"],["for","projectClient"],["autocomplete","off","autofocus","","id","projectClient","formControlName","client","placeholder","Select client","list","listClients",1,"form-control"],["id","listClients"],[1,"col-3"],["for","projectDuration"],["type","number","formControlName","duration","placeholder","Duration","id","projectDuration",1,"form-control"],["for","projectDescription"],["id","projectDescription","name","w3review","formControlName","description","rows","4","placeholder","description of the project",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["id","projectDeleteModal","tabindex","-1","aria-labelledby","projectDeleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],["id","projectDeleteModalLabel",1,"modal-title"],[1,"modal-body"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[3,"value"],["src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],[3,"click"],["src","assets/images/duplicate.png","alt","duplicate","data-bs-toggle","tooltip","data-bs-placement","top","title","duplicate",1,"aspect-square","action",3,"click"],["src","assets/images/delete.png","data-bs-target","#projectDeleteModal","alt","delete","data-bs-toggle","modal","data-bs-placement","top","title","delete",1,"aspect-square","action",3,"click"],[1,"form-text","text-muted","text-danger"]],template:function(r,i){1&r&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),s.YNc(5,O,2,1,"b",5),s._uU(6," Projects"),s.qZA(),s.TgZ(7,"a",6),s._uU(8,"Add"),s.qZA()(),s.TgZ(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead")(13,"tr")(14,"th"),s._uU(15,"Title"),s.TgZ(16,"span",10),s._uU(17,"*"),s.qZA()(),s.TgZ(18,"th"),s._uU(19,"Client"),s.TgZ(20,"span",10),s._uU(21,"*"),s.qZA()(),s.TgZ(22,"th"),s._uU(23,"Duration (months)"),s.qZA(),s.TgZ(24,"th"),s._uU(25,"Description"),s.qZA(),s.TgZ(26,"th",11),s._uU(27,"Actions"),s.qZA()()(),s.TgZ(28,"tbody")(29,"tr")(30,"td")(31,"form",12),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(32,"input",13),s.qZA()(),s.TgZ(33,"td")(34,"form",12),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(35,"input",14),s.TgZ(36,"datalist",15),s.YNc(37,B,1,1,"option",16),s.qZA()()(),s.TgZ(38,"td")(39,"form",12),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(40,"input",17),s.qZA()(),s.TgZ(41,"td")(42,"form",12),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(43,"input",18),s.qZA()(),s.TgZ(44,"td"),s.YNc(45,J,1,0,"img",19),s.qZA()(),s.YNc(46,re,13,4,"tr",20),s.qZA()()()()()()(),s.TgZ(47,"div",21)(48,"div",22)(49,"div",23)(50,"div",24)(51,"h1",25),s._uU(52,"Add new project"),s.qZA(),s._UZ(53,"button",26),s.qZA(),s.TgZ(54,"form",12),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(55,"div",27)(56,"div",28)(57,"div",29)(58,"label",30),s._uU(59,"Title"),s.TgZ(60,"span",10),s._uU(61,"*"),s.qZA()(),s._UZ(62,"input",31),s.YNc(63,De,2,0,"small",32),s.qZA()(),s.TgZ(64,"div",33)(65,"div",29)(66,"label",34),s._uU(67,"Client"),s.TgZ(68,"span",10),s._uU(69,"*"),s.qZA()(),s._UZ(70,"br")(71,"input",35),s.TgZ(72,"datalist",36),s.YNc(73,We,1,1,"option",16),s.qZA()()(),s.TgZ(74,"div",37)(75,"div",29)(76,"label",38),s._uU(77,"Duration (months)"),s.qZA(),s._UZ(78,"input",39),s.qZA()(),s.TgZ(79,"div",28)(80,"label",40),s._uU(81,"Description"),s.qZA(),s.TgZ(82,"textarea",41),s._uU(83,"                        "),s.qZA()()()(),s.TgZ(84,"div",42)(85,"button",43),s._uU(86,"Close"),s.qZA(),s.TgZ(87,"button",44),s.NdJ("click",function(){return i.onSubmit()}),s._uU(88,"Save "),s.qZA()()()()(),s.TgZ(89,"div",45)(90,"div",46)(91,"div",23)(92,"div",24)(93,"h5",47),s._uU(94,"Delete project"),s.qZA(),s._UZ(95,"button",26),s.qZA(),s.TgZ(96,"div",48)(97,"b"),s._uU(98,"Do you really want to delete this project?"),s.qZA()(),s.TgZ(99,"div",42)(100,"button",49),s.NdJ("click",function(){return i.onClickDismiss()}),s._uU(101,"Close "),s.qZA(),s.TgZ(102,"button",50),s.NdJ("click",function(){return i.onClickDeleteProjectAndResources()}),s._uU(103," Confirm "),s.qZA()()()()()),2&r&&(s.xp6(5),s.Q6J("ngIf",i.projects),s.xp6(26),s.Q6J("formGroup",i.projectForm),s.xp6(3),s.Q6J("formGroup",i.projectForm),s.xp6(3),s.Q6J("ngForOf",i.clients),s.xp6(2),s.Q6J("formGroup",i.projectForm),s.xp6(3),s.Q6J("formGroup",i.projectForm),s.xp6(3),s.Q6J("ngIf",i.projectForm.valid),s.xp6(1),s.Q6J("ngForOf",i.projects),s.xp6(8),s.Q6J("formGroup",i.projectForm),s.xp6(9),s.Q6J("ngIf",i.projectForm.controls.title.touched&&(null==i.projectForm.controls.title.errors?null:i.projectForm.controls.title.errors.required)),s.xp6(10),s.Q6J("ngForOf",i.clients),s.xp6(14),s.Q6J("disabled",!i.projectForm.valid))},dependencies:[lr,mr,hc,Ry,Wg,uc,qg,Nu,eh,fc,xu],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})(),ft=(()=>{class n{constructor(e,r,i){this.router=e,this.localStorageService=r,this.toastr=i}canActivate(e){let r=this.localStorageService.getLoggedAccount();return!(!r||!r.id)||(this.toastr.error("Account not found. Please log in again","Account"),this.router.navigate([""]),!1)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Tr),s.LFG(mc),s.LFG(Ca))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Pt=U(1144);const Ue=["addListener","removeListener"],qt=["addEventListener","removeEventListener"],tr=["on","off"];function fn(n,t,e,r){if((0,ks.m)(e)&&(r=e,e=void 0),r)return fn(n,t,e).pipe(X(r));const[i,o]=function JZ(n){return(0,ks.m)(n.addEventListener)&&(0,ks.m)(n.removeEventListener)}(n)?qt.map(c=>d=>n[c](t,d,e)):function KZ(n){return(0,ks.m)(n.addListener)&&(0,ks.m)(n.removeListener)}(n)?Ue.map(eR(n,t)):function YZ(n){return(0,ks.m)(n.on)&&(0,ks.m)(n.off)}(n)?tr.map(eR(n,t)):[];if(!i&&(0,Pt.z)(n))return(0,er.z)(c=>fn(c,t,e))((0,ai.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Tn.y(c=>{const d=(...f)=>c.next(1<f.length?f:f[0]);return i(d),()=>o(d)})}function eR(n,t){return e=>r=>n[e](t,r)}const{isArray:QZ}=Array;function J2(n){return 1===n.length&&QZ(n[0])?n[0]:n}function zD(...n){const t=(0,vr.jO)(n),e=J2(n);return e.length?new Tn.y(r=>{let i=e.map(()=>[]),o=e.map(()=>!1);r.add(()=>{i=o=null});for(let c=0;!r.closed&&c<e.length;c++)(0,ai.Xf)(e[c]).subscribe((0,ve.x)(r,d=>{if(i[c].push(d),i.every(f=>f.length)){const f=i.map(y=>y.shift());r.next(t?t(...f):f),i.some((y,w)=>!y.length&&o[w])&&r.complete()}},()=>{o[c]=!0,!i[c].length&&r.complete()}));return()=>{i=o=null}}):ur.E}function WD(...n){const t=(0,vr.jO)(n);return(0,xn.e)((e,r)=>{const i=n.length,o=new Array(i);let c=n.map(()=>!1),d=!1;for(let f=0;f<i;f++)(0,ai.Xf)(n[f]).subscribe((0,ve.x)(r,y=>{o[f]=y,!d&&!c[f]&&(c[f]=!0,(d=c.every(I.y))&&(c=null))},em.Z));e.subscribe((0,ve.x)(r,f=>{if(d){const y=[f,...o];r.next(t?t(...y):y)}}))})}new Tn.y(em.Z),Math,Math,Math;const p4=["*"],R4=["dialog"];function hR(n){return"string"==typeof n}function am(n){return null!=n}function tv(n){return(n||document.body).getBoundingClientRect()}const yU={animation:!0,transitionTimerDelayMs:5},Sz=()=>{},{transitionTimerDelayMs:Iz}=yU,Aw=new Map,so=(n,t,e,r)=>{let i=r.context||{};const o=Aw.get(t);if(o)switch(r.runningTransition){case"continue":return ur.E;case"stop":n.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),Aw.delete(t)}const c=e(t,r.animation,i)||Sz;if(!r.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>c()),Fe(void 0).pipe(function Ez(n){return t=>new Tn.y(e=>t.subscribe({next:c=>n.run(()=>e.next(c)),error:c=>n.run(()=>e.error(c)),complete:()=>n.run(()=>e.complete())}))}(n));const d=new dn.x,f=new dn.x,y=d.pipe(function eq(...n){return t=>wr(t,Fe(...n))}(!0));Aw.set(t,{transition$:d,complete:()=>{f.next(),f.complete()},context:i});const w=function Dz(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const E=fn(t,"transitionend").pipe(pi(y),Fr(({target:k})=>k===t));(function Q2(...n){return 1===(n=J2(n)).length?(0,ai.Xf)(n[0]):new Tn.y(function XZ(n){return t=>{let e=[];for(let r=0;e&&!t.closed&&r<n.length;r++)e.push((0,ai.Xf)(n[r]).subscribe((0,ve.x)(t,i=>{if(e){for(let o=0;o<e.length;o++)o!==r&&e[o].unsubscribe();e=null}t.next(i)})))}}(n))})(Xg(w+Iz).pipe(pi(y)),E,f).pipe(pi(y)).subscribe(()=>{Aw.delete(t),n.run(()=>{c(),d.next(),d.complete()})})}),d.asObservable()};let eS=(()=>{class n{constructor(){this.animation=yU.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),EU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[qr]}),n})(),DU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[qr]}),n})(),AU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[qr]}),n})(),NU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();var ji=(()=>{return(n=ji||(ji={}))[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",ji;var n})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const kU=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function RU(n){const t=Array.from(n.querySelectorAll(kU)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let VU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[qr,JE]}),n})(),GU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();class dm{constructor(t,e,r){this.nodes=t,this.viewRef=e,this.componentRef=r}}let m8=(()=>{class n{constructor(e,r){this._el=e,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(li(1)).subscribe(()=>{so(this._zone,this._el.nativeElement,(e,r)=>{r&&tv(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return so(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.R0b))},n.\u0275cmp=s.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,r){2&e&&(s.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),s.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})();class ZU{close(t){}dismiss(t){}}class _8{constructor(t,e,r,i){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new dn.x,this._dismissed=new dn.x,this._hidden=new dn.x,t.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,c)=>{this._resolve=o,this._reject=c}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(pi(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(pi(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function _U(n){return n&&n.then}(e)?!1!==e&&this._dismiss(t):e.then(r=>{!1!==r&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Fe(void 0);t.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),zD(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var wc=(()=>{return(n=wc||(wc={}))[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",wc;var n})();let y8=(()=>{class n{constructor(e,r,i){this._document=e,this._elRef=r,this._zone=i,this._closed$=new dn.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new s.vpe,this.shown=new dn.x,this.hidden=new dn.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":hR(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(li(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,r={animation:this.animation,runningTransition:"stop"},c=zD(so(this._zone,e,()=>e.classList.remove("show"),r),so(this._zone,this._dialogEl.nativeElement,()=>{},r));return c.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),c}_show(){const e={animation:this.animation,runningTransition:"continue"};zD(so(this._zone,this._elRef.nativeElement,(o,c)=>{c&&tv(o),o.classList.add("show")},e),so(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{fn(e,"keydown").pipe(pi(this._closed$),Fr(i=>i.which===ji.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(wc.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;fn(this._dialogEl.nativeElement,"mousedown").pipe(pi(this._closed$),(0,ci.b)(()=>r=!1),Bn(()=>fn(e,"mouseup").pipe(pi(this._closed$),li(1))),Fr(({target:i})=>e===i)).subscribe(()=>{r=!0}),fn(e,"click").pipe(pi(this._closed$)).subscribe(({target:i})=>{e===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(wc.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const r=e.querySelector("[ngbAutofocus]"),i=RU(e)[0];(r||i||e).focus()}}_restoreFocus(){const e=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&e.contains(r)?r:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&so(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(ie),s.Y36(s.SBq),s.Y36(s.R0b))},n.\u0275cmp=s.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,r){if(1&e&&s.Gf(R4,7),2&e){let i;s.iGM(i=s.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,r){2&e&&(s.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),s.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),s.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:p4,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,r){1&e&&(s.F$t(),s.TgZ(0,"div",0,1)(2,"div",2),s.Hsn(3),s.qZA()()),2&e&&s.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),v8=(()=>{class n{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:o,paddingRight:c}=i;if(e>0){const d=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${d+e}px`}return i.overflow="hidden",()=>{e>0&&(i.paddingRight=c),i.overflow=o}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ie))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),b8=(()=>{class n{constructor(e,r,i,o,c,d){this._applicationRef=e,this._injector=r,this._document=i,this._scrollBar=o,this._rendererFactory=c,this._ngZone=d,this._activeWindowCmptHasChanged=new dn.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new s.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const f=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const i=fn(t,"focusin").pipe(pi(e),(0,S.U)(o=>o.target));fn(t,"keydown").pipe(pi(e),Fr(o=>o.which===ji.Tab),WD(i)).subscribe(([o,c])=>{const[d,f]=RU(t);(c===d||c===t)&&o.shiftKey&&(f.focus(),o.preventDefault()),c===f&&!o.shiftKey&&(d.focus(),o.preventDefault())}),r&&fn(t,"click").pipe(pi(e),WD(i),(0,S.U)(o=>o[1])).subscribe(o=>o.focus())})})(0,f.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(f.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,r,i){const o=i.container instanceof HTMLElement?i.container:am(i.container)?this._document.querySelector(i.container):this._document.body,c=this._rendererFactory.createRenderer(null,null);if(!o)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const d=new ZU,f=this._getContentRef(i.injector||e,r,d,i);let y=!1!==i.backdrop?this._attachBackdrop(o):void 0,w=this._attachWindowComponent(o,f.nodes),E=new _8(w,f,y,i.beforeDismiss);return this._registerModalRef(E),this._registerWindowCmpt(w),E.hidden.pipe(li(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(c.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),d.close=A=>{E.close(A)},d.dismiss=A=>{E.dismiss(A)},this._applyWindowOptions(w.instance,i),1===this._modalRefs.length&&c.addClass(this._document.body,"modal-open"),y&&y.instance&&(this._applyBackdropOptions(y.instance,i),y.changeDetectorRef.detectChanges()),w.changeDetectorRef.detectChanges(),E}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(r=>r.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let r=(0,s.LMc)(m8,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_attachWindowComponent(e,r){let i=(0,s.LMc)(y8,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_applyWindowOptions(e,r){this._windowAttributes.forEach(i=>{am(r[i])&&(e[i]=r[i])})}_applyBackdropOptions(e,r){this._backdropAttributes.forEach(i=>{am(r[i])&&(e[i]=r[i])})}_getContentRef(e,r,i,o){return r?r instanceof s.Rgc?this._createFromTemplateRef(r,i):hR(r)?this._createFromString(r):this._createFromComponent(e,r,i,o):new dm([])}_createFromTemplateRef(e,r){const o=e.createEmbeddedView({$implicit:r,close(c){r.close(c)},dismiss(c){r.dismiss(c)}});return this._applicationRef.attachView(o),new dm([o.rootNodes],o)}_createFromString(e){const r=this._document.createTextNode(`${e}`);return new dm([[r]])}_createFromComponent(e,r,i,o){const c=s.zs3.create({providers:[{provide:ZU,useValue:i}],parent:e}),d=(0,s.LMc)(r,{environmentInjector:this._applicationRef.injector,elementInjector:c}),f=d.location.nativeElement;return o.scrollable&&f.classList.add("component-host-scrollable"),this._applicationRef.attachView(d.hostView),new dm([[f]],d.hostView,d)}_setAriaHidden(e){const r=e.parentElement;r&&e!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==e&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,r)=>{e?r.setAttribute("aria-hidden",e):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const r=()=>{const i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(r,r)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const r=this._windowCmpts.indexOf(e);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.z2F),s.LFG(s.zs3),s.LFG(ie),s.LFG(v8),s.LFG(s.FYo),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),w8=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(eS))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lS=(()=>{class n{constructor(e,r,i){this._injector=e,this._modalStack=r,this._config=i}open(e,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.zs3),s.LFG(b8),s.LFG(w8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[lS]}),n})(),YU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[qr]}),n})(),iB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[qr]}),n})(),oB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[qr]}),n})(),aB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[qr]}),n})(),lB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[qr]}),n})(),cB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[qr]}),n})(),uB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[qr]}),n})(),dB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();new s.OlP("live announcer delay",{providedIn:"root",factory:function M8(){return 100}});let hB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[qr]}),n})(),fB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const P8=[EU,DU,AU,NU,VU,GU,qU,YU,fB,iB,oB,aB,lB,cB,uB,dB,hB];let F8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[P8,EU,DU,AU,NU,VU,GU,qU,YU,fB,iB,oB,aB,lB,cB,uB,dB,hB]}),n})();function L8(n,t){if(1&n&&(s.TgZ(0,"b"),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Oqu(e.clients.length)}}function U8(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"img",29),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s.qZA()}}function B8(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"tr")(1,"td",30),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(58);return s.KtG(c.openEditClientModal(o,d))}),s.TgZ(2,"div",0)(3,"div",31),s._UZ(4,"img",32),s.qZA(),s.TgZ(5,"div",33)(6,"h2"),s._uU(7),s.qZA()()()(),s.TgZ(8,"td",30),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(58);return s.KtG(c.openEditClientModal(o,d))}),s._uU(9),s.qZA(),s.TgZ(10,"td",30),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(58);return s.KtG(c.openEditClientModal(o,d))}),s._uU(11),s.qZA(),s.TgZ(12,"td",30),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(58);return s.KtG(c.openEditClientModal(o,d))}),s._uU(13),s.qZA(),s.TgZ(14,"td")(15,"img",34),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickClientToBeDeleted(o))}),s.qZA()()()}if(2&n){const e=t.$implicit;s.xp6(7),s.Oqu(e.companyName),s.xp6(2),s.Oqu(e.email),s.xp6(2),s.Oqu(e.phoneNumber),s.xp6(2),s.Oqu(e.address)}}function V8(n,t){1&n&&(s.TgZ(0,"small",50),s._uU(1," Please enter company name.! "),s.qZA())}function j8(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",21)(1,"h4",35),s._uU(2,"Edit client"),s.qZA(),s.TgZ(3,"button",36),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.KtG(o.dismiss("Cross click"))}),s.qZA()(),s.TgZ(4,"div",24)(5,"form",11),s.NdJ("ngSubmit",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s.TgZ(6,"div",0)(7,"div",33)(8,"div",37)(9,"label",38),s._uU(10,"Company name"),s.TgZ(11,"span",10),s._uU(12,"*"),s.qZA()(),s._UZ(13,"input",39),s.YNc(14,V8,2,0,"small",40),s.qZA(),s.TgZ(15,"div"),s._UZ(16,"img",41),s.qZA()(),s.TgZ(17,"div",33)(18,"div",37)(19,"label",42),s._uU(20,"Email"),s.qZA(),s._UZ(21,"input",43),s.qZA(),s.TgZ(22,"div",37)(23,"label",44),s._uU(24,"Phone number"),s.qZA(),s._UZ(25,"input",45),s.qZA(),s.TgZ(26,"div",37)(27,"label",46),s._uU(28,"Address"),s.qZA(),s._UZ(29,"input",47),s.qZA()()()()(),s.TgZ(30,"div",25)(31,"button",48),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onClickEditClientModalClose())}),s._uU(32,"Close"),s.qZA(),s.TgZ(33,"button",49),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s._uU(34,"Save "),s.qZA()()}if(2&n){const e=s.oxw();s.xp6(5),s.Q6J("formGroup",e.clientForm),s.xp6(9),s.Q6J("ngIf",e.clientForm.controls.companyName.touched&&(null==e.clientForm.controls.companyName.errors?null:e.clientForm.controls.companyName.errors.required)),s.xp6(19),s.Q6J("disabled",!e.clientForm.valid)}}let H8=(()=>{class n{constructor(e,r,i,o,c){this.clientInteractor=e,this.router=r,this.toastr=i,this.modalService=o,this.localStorageService=c,this.clients=[],this.closeResult="",this.clientForm=new hi({companyName:new Le("",[gn.required]),email:new Le(""),address:new Le(""),phoneNumber:new Le("")})}ngOnInit(){this.fetchClients()}fetchClients(){this.clientInteractor.fetchAll().subscribe({next:e=>{e&&e.success&&(this.clients=e.data)},error:e=>{},complete:()=>{}})}onSubmit(){if(this.clientForm.valid){let e={companyName:this.clientForm.value.companyName,email:this.clientForm.value.email,address:this.clientForm.value.address,phoneNumber:this.clientForm.value.phoneNumber,logo:""};this.selectedClient&&this.selectedClient.id?this.clientInteractor.update(this.selectedClient.id,e).subscribe({next:r=>{this.selectedClient=void 0,this.clientForm.reset(),this.editClientModalReference.dismiss(),this.toastr.success("client successfully updated","Update client"),this.fetchClients()},error:r=>{this.toastr.error("Error occurred while updating the client","Update client")},complete:()=>{}}):this.clientInteractor.create(e).subscribe({next:r=>{this.clientForm.reset(),this.editClientModalReference.dismiss(),this.toastr.success("client successfully saved","Add client"),this.fetchClients()},error:r=>{this.toastr.error("Error occurred while saving the client","Add client")},complete:()=>{}})}else this.toastr.error("Some inputs are incorrect","Edit client")}onClickDeleteClient(){let e=this.localStorageService.get("client");e&&e.id?this.clientInteractor.delete(e.id).subscribe({next:r=>{this.localStorageService.delete("client"),this.toastr.success("Client deleted successfully","Delete client")},error:r=>{this.localStorageService.delete("client"),this.toastr.error("Error occurred while deleting the client","Delete client")},complete:()=>{}}):(this.localStorageService.delete("client"),this.toastr.error("Client not found","Delete client"))}onClickClientToBeDeleted(e){this.localStorageService.add("client",e)}onClickDismiss(){this.localStorageService.delete("client")}openEditClientModal(e,r){this.selectedClient=e,this.clientForm=new hi({companyName:new Le(e.companyName,[gn.required]),email:new Le(e.email),phoneNumber:new Le(e.phoneNumber),address:new Le(e.address),logo:new Le(e.logo)}),this.open(r)}open(e){this.editClientModalReference=this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"}),this.editClientModalReference.result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(e){switch(e){case wc.ESC:return"by pressing ESC";case wc.BACKDROP_CLICK:return"by clicking on a backdrop";default:return`with: ${e}`}}onClickEditClientModalClose(){this.clientForm.reset(),this.editClientModalReference.dismiss()}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(p),s.Y36(Tr),s.Y36(Ca),s.Y36(lS),s.Y36(mc))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-clients"]],decls:59,vars:7,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],[4,"ngIf"],[1,"btn","btn-outline-primary","float-right",3,"click"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["type","text","formControlName","companyName","placeholder","Company name","id","companyName"],["type","text","formControlName","email","placeholder","Email","id","email"],["type","tel","formControlName","phoneNumber","placeholder","Phone number","id","phoneNumber"],["type","text","formControlName","address","placeholder","Address","id","address"],["class","aspect-square","src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["id","clientDeleteModal","tabindex","-1","aria-labelledby","clientDeleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","clientDeleteModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],["editClientModal",""],["src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],[3,"click"],[1,"col-5","col-sm-5","col-md-4","col-lg-3","col-xl-3"],["width","28","height","28","src","assets/images/user.jpg","alt","",1,"aspect-square"],[1,"col"],["src","assets/images/delete.png","data-bs-target","#clientDeleteModal","alt","delete","data-bs-toggle","modal","data-bs-placement","top","title","delete",1,"aspect-square","action",3,"click"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"form-group"],["for","clientCompanyName"],["type","companyName","formControlName","companyName","placeholder","Company name","id","clientCompanyName",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],["src","assets/images/user.jpg"],["for","clientEmail"],["type","email","formControlName","email","placeholder","Email","id","clientEmail",1,"form-control"],["for","clientPhoneNumber"],["type","tel","formControlName","phoneNumber","placeholder","Phone number","id","clientPhoneNumber",1,"form-control"],["for","clientAddress"],["type","tel","formControlName","address","placeholder","Address","id","clientAddress",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"form-text","text-muted","text-danger"]],template:function(r,i){if(1&r){const o=s.EpF();s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),s.YNc(5,L8,2,1,"b",5),s._uU(6," Clients "),s.qZA(),s.TgZ(7,"button",6),s.NdJ("click",function(){s.CHM(o);const d=s.MAs(58);return s.KtG(i.open(d))}),s._uU(8,"Add "),s.qZA()(),s.TgZ(9,"div",7)(10,"div",8)(11,"table",9)(12,"thead")(13,"tr")(14,"th"),s._uU(15,"Company name"),s.TgZ(16,"span",10),s._uU(17,"*"),s.qZA()(),s.TgZ(18,"th"),s._uU(19,"Email"),s.qZA(),s.TgZ(20,"th"),s._uU(21,"Phone number"),s.qZA(),s.TgZ(22,"th"),s._uU(23,"Address"),s.qZA(),s._UZ(24,"th"),s.qZA()(),s.TgZ(25,"tbody")(26,"tr")(27,"td")(28,"form",11),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(29,"input",12),s.qZA()(),s.TgZ(30,"td")(31,"form",11),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(32,"input",13),s.qZA()(),s.TgZ(33,"td")(34,"form",11),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(35,"input",14),s.qZA()(),s.TgZ(36,"td")(37,"form",11),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(38,"input",15),s.qZA()(),s.TgZ(39,"td"),s.YNc(40,U8,1,0,"img",16),s.qZA()(),s.YNc(41,B8,16,4,"tr",17),s.qZA()()()()()()(),s.TgZ(42,"div",18)(43,"div",19)(44,"div",20)(45,"div",21)(46,"h5",22),s._uU(47,"Delete client"),s.qZA(),s._UZ(48,"button",23),s.qZA(),s.TgZ(49,"div",24)(50,"b"),s._uU(51,"Do you really want to delete this client?"),s.qZA()(),s.TgZ(52,"div",25)(53,"button",26),s.NdJ("click",function(){return i.onClickDismiss()}),s._uU(54,"Close "),s.qZA(),s.TgZ(55,"button",27),s.NdJ("click",function(){return i.onClickDeleteClient()}),s._uU(56," Confirm "),s.qZA()()()()(),s.YNc(57,j8,35,3,"ng-template",null,28,s.W1O)}2&r&&(s.xp6(5),s.Q6J("ngIf",i.clients),s.xp6(23),s.Q6J("formGroup",i.clientForm),s.xp6(3),s.Q6J("formGroup",i.clientForm),s.xp6(3),s.Q6J("formGroup",i.clientForm),s.xp6(3),s.Q6J("formGroup",i.clientForm),s.xp6(3),s.Q6J("ngIf",i.clientForm.valid),s.xp6(1),s.Q6J("ngForOf",i.clients))},dependencies:[lr,mr,hc,uc,Nu,eh,fc,xu],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})();var Cc=(()=>{return(n=Cc||(Cc={})).AED="AED",n.USD="USD",n.EUR="EUR",n.BHD="BHD",n.KWD="KWD",n.QAR="QAR",n.SAR="SAR",Cc;var n})();let pB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class $8 extends rm{toEntity(t){return{id:t.id,createdAt:t.createdAt,updatedAt:new Date,deleted:!1,currency1:t.currency1,currency2:t.currency2,rate:t.rate,code:t.currency1+t.currency2}}fromEntity(t){return{id:t.id,createdAt:t.createdAt,currency1:t.currency1,currency2:t.currency2,rate:t.rate}}fromRequest(t){return{updatedAt:new Date,deleted:!1,currency1:t.currency1,currency2:t.currency2,rate:t.rate,code:t.currency1+t.currency2}}}let Rw=(()=>{class n extends Qf{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=s.n5z(n)))(i||n)}}();static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.create(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Rw))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.update(e.id,e.request)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Rw))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ER=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.delete(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Rw))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),DR=(()=>{class n{constructor(e){this.repository=e}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Rw))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SR=(()=>{class n extends pB{constructor(e,r,i,o){super(),this.createCurrencyExchangeUseCase=e,this.updateCurrencyExchangeUseCase=r,this.deleteCurrencyExchangeUseCase=i,this.fetchCurrencyExchangesUseCase=o,this.mapper=new $8}create(e){let r=this.mapper.fromRequest(e);return r.id=nm(),r.createdAt=new Date,this.createCurrencyExchangeUseCase.execute(r).pipe((0,S.U)(i=>this.mapper.toResponse(i)))}delete(e){return this.deleteCurrencyExchangeUseCase.execute(e),Fe(this.mapper.toEmptyResponse())}fetchAll(){return this.fetchCurrencyExchangesUseCase.execute().pipe((0,S.U)(e=>this.mapper.toResponses(e)))}fetchOne(e){return Fe()}update(e,r){return this.updateCurrencyExchangeUseCase.execute({id:e,request:this.mapper.fromRequest(r)}),Fe(this.mapper.toEmptyResponse())}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(CR),s.LFG(TR),s.LFG(ER),s.LFG(DR))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class G8 extends rm{toEntity(t){return{id:t.id,createdAt:t.createdAt,updatedAt:new Date,deleted:!1,totalCalendarDays:t.totalCalendarDays,weekends:t.weekends,paidLeave:t.paidLeave,publicHolidays:t.publicHolidays}}fromEntity(t){return{id:t.id,createdAt:t.createdAt,totalCalendarDays:t.totalCalendarDays,weekends:t.weekends,paidLeave:t.paidLeave,publicHolidays:t.publicHolidays,billableWorkingDays:t.totalCalendarDays??365-t.weekends??104-t.paidLeave??0-t.publicHolidays??0}}fromRequest(t){return{updatedAt:new Date,deleted:!1,totalCalendarDays:t.totalCalendarDays,weekends:t.weekends,paidLeave:t.paidLeave,publicHolidays:t.publicHolidays}}}let IR=(()=>{class n extends Qf{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=s.n5z(n)))(i||n)}}();static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),AR=(()=>{class n{constructor(e){this.repository=e}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(IR))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),NR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.update(e.id,e.request)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(IR))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mB=(()=>{class n extends gB{constructor(e,r){super(),this.fetchWorkingDaysUseCase=e,this.updateWorkingDaysUseCase=r,this.mapper=new G8}fetch(){return this.fetchWorkingDaysUseCase.execute().pipe((0,S.U)(e=>this.mapper.toFirstResponse(e)))}update(e,r){return this.updateWorkingDaysUseCase.execute({id:e,request:this.mapper.fromRequest(r)}),Fe(this.mapper.toEmptyResponse())}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(AR),s.LFG(NR))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Z8(n,t){if(1&n&&(s.TgZ(0,"option",39),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function q8(n,t){if(1&n&&(s.TgZ(0,"option",39),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function z8(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"img",40),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmitCurrency())}),s.qZA()}}function W8(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"tr")(1,"td",41),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickCurrencyExchange(o))}),s._uU(2),s.qZA(),s.TgZ(3,"td",41),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickCurrencyExchange(o))}),s._uU(4),s.qZA(),s.TgZ(5,"td",41),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickCurrencyExchange(o))}),s._uU(6),s.qZA(),s.TgZ(7,"td")(8,"img",42),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickCurrencyExchangeToBeDeleted(o))}),s.qZA()()()}if(2&n){const e=t.$implicit;s.xp6(2),s.Oqu(e.currency1),s.xp6(2),s.Oqu(e.currency2),s.xp6(2),s.Oqu(e.rate)}}function K8(n,t){if(1&n&&(s.TgZ(0,"b"),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Oqu(e.calculateBillableWorkingDays())}}function Y8(n,t){if(1&n&&(s.TgZ(0,"option",43),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}let J8=(()=>{class n{constructor(e,r,i,o){this.currencyExchangeInteractor=e,this.workingDaysInteractor=r,this.localStorageService=i,this.toastr=o,this.languages=["English"],this.currencies=[],this.currencyExchanges=[],this.currencies=Object.values(Cc),this.currencyForm=new hi({currency1:new Le("",[gn.required]),currency2:new Le("",[gn.required]),rate:new Le("",[gn.required])}),this.workingDaysForm=new hi({totalCalendarDays:new Le("",[gn.required]),weekends:new Le("",[gn.required]),paidLeave:new Le("",[gn.required]),publicHolidays:new Le("",[gn.required])}),this.languageForm=new hi({language:new Le(this.languages[0],[gn.required])})}ngOnInit(){this.fetchCurrencyExchanges(),this.fetchWorkingDays()}fetchWorkingDays(){this.workingDaysInteractor.fetch().subscribe({next:e=>{e&&e.success&&(this.workingDaysResponse=e.data,this.workingDaysForm.setValue({totalCalendarDays:this.workingDaysResponse.totalCalendarDays,weekends:this.workingDaysResponse.weekends,paidLeave:this.workingDaysResponse.paidLeave,publicHolidays:this.workingDaysResponse.publicHolidays}))},error:e=>{},complete:()=>{}})}calculateBillableWorkingDays(){return this.workingDaysResponse.totalCalendarDays-this.workingDaysResponse.weekends-this.workingDaysResponse.paidLeave-this.workingDaysResponse.publicHolidays}fetchCurrencyExchanges(){this.currencyExchangeInteractor.fetchAll().subscribe({next:e=>{e&&e.success&&(this.currencyExchanges=e.data)},error:e=>{},complete:()=>{}})}onSubmitCurrency(){if(this.currencyForm.valid){let e={currency1:this.currencyForm.value.currency1,currency2:this.currencyForm.value.currency2,rate:this.currencyForm.value.rate};this.selectedCurrencyExchange&&this.selectedCurrencyExchange.id?this.currencyExchangeInteractor.update(this.selectedCurrencyExchange.id,e).subscribe({next:r=>{this.toastr.success("currency exchange successfully updated","Currency exchange"),this.fetchCurrencyExchanges(),this.selectedCurrencyExchange=void 0,this.currencyForm.reset()},error:r=>{this.toastr.error("Error occurred while updating the currency exchange","Currency exchange")},complete:()=>{}}):this.currencyExchangeInteractor.create(e).subscribe({next:r=>{this.toastr.success("currency exchange successfully saved","Currency exchange"),this.fetchCurrencyExchanges(),this.currencyForm.reset()},error:r=>{this.toastr.error("Error occurred while saving the currency exchange","Currency exchange")},complete:()=>{}})}else this.toastr.error("Some inputs are incorrect","Currency exchange")}onSubmitWorkingDays(){this.workingDaysForm.valid?this.workingDaysInteractor.update(this.workingDaysResponse.id,{totalCalendarDays:this.workingDaysForm.value.totalCalendarDays,weekends:this.workingDaysForm.value.weekends,paidLeave:this.workingDaysForm.value.paidLeave,publicHolidays:this.workingDaysForm.value.publicHolidays}).subscribe({next:r=>{this.toastr.success("working days successfully updated","Working days"),this.fetchCurrencyExchanges(),this.currencyForm.reset()},error:r=>{this.toastr.error("Error occurred while updating working days","Working days")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Working days")}onSubmitLanguage(){}onClickCurrencyExchangeToBeDeleted(e){this.localStorageService.add("currencyExchange",e)}onClickDismiss(){this.localStorageService.delete("currencyExchange")}onClickDeleteCurrencyExchange(){let e=this.localStorageService.get("currencyExchange");e&&e.id?this.currencyExchangeInteractor.delete(e.id).subscribe({next:r=>{this.localStorageService.delete("currencyExchange"),this.toastr.success("Currency exchange deleted successfully","Delete currency exchange")},error:r=>{this.localStorageService.delete("currencyExchange"),this.toastr.error("Error occurred while deleting the currency exchange","Delete currency exchange")},complete:()=>{}}):(this.localStorageService.delete("currencyExchange"),this.toastr.error("Currency exchange not found","Delete currency exchange"))}onClickCurrencyExchange(e){this.selectedCurrencyExchange=e,this.currencyForm=new hi({currency1:new Le(e.currency1,[gn.required]),currency2:new Le(e.currency2,[gn.required]),rate:new Le(e.rate,[gn.required])})}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(SR),s.Y36(mB),s.Y36(mc),s.Y36(Ca))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-settings"]],decls:124,vars:14,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],["href","",1,"btn","btn-outline-success","float-right"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["formControlName","currency1",2,"color","black"],["value","","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","currency2",2,"color","black"],["type","number","formControlName","rate","placeholder","Rate","id","rate"],["class","aspect-square","src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","btn-outline-success","float-right",3,"click"],["type","number","formControlName","totalCalendarDays","placeholder","Total calendar days","id","totalCalendarDays"],["type","number","formControlName","weekends","placeholder","Weekends","id","weekends"],["type","number","formControlName","paidLeave","placeholder","Paid leave","id","paidLeave"],["type","number","formControlName","publicHolidays","placeholder","Public holidays","id","publicHolidays"],[1,"card-block","m-3"],[1,"form-group"],["for","language"],["formControlName","language","id","language",1,"form-control"],["style","color: black;",3,"ngValue",4,"ngFor","ngForOf"],["id","currencyExchangeDeleteModal","tabindex","-1","aria-labelledby","currencyExchangeDeleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","currencyExchangeDeleteModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[3,"ngValue"],["src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],[3,"click"],["src","assets/images/delete.png","data-bs-target","#currencyExchangeDeleteModal","alt","delete","data-bs-toggle","modal","data-bs-placement","top","title","delete",1,"aspect-square","action",3,"click"],[2,"color","black",3,"ngValue"]],template:function(r,i){1&r&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),s._UZ(5,"b"),s._uU(6," Currencies "),s.qZA(),s.TgZ(7,"a",5),s._uU(8,"Save"),s.qZA()(),s.TgZ(9,"div",6)(10,"div",7)(11,"table",8)(12,"thead")(13,"tr")(14,"th"),s._uU(15,"Currency 1"),s.TgZ(16,"span",9),s._uU(17,"*"),s.qZA()(),s.TgZ(18,"th"),s._uU(19,"Currency 2"),s.TgZ(20,"span",9),s._uU(21,"*"),s.qZA()(),s.TgZ(22,"th"),s._uU(23,"Rate"),s.TgZ(24,"span",9),s._uU(25,"*"),s.qZA()(),s._UZ(26,"th"),s.qZA()(),s.TgZ(27,"tbody")(28,"tr")(29,"td")(30,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitCurrency()}),s.TgZ(31,"select",11)(32,"option",12),s._uU(33,"Select currency"),s.qZA(),s.YNc(34,Z8,2,2,"option",13),s.qZA()()(),s.TgZ(35,"td")(36,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitCurrency()}),s.TgZ(37,"select",14)(38,"option",12),s._uU(39,"Select currency"),s.qZA(),s.YNc(40,q8,2,2,"option",13),s.qZA()()(),s.TgZ(41,"td")(42,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitCurrency()}),s._UZ(43,"input",15),s.qZA()(),s.TgZ(44,"td"),s.YNc(45,z8,1,0,"img",16),s.qZA()(),s.YNc(46,W8,9,3,"tr",17),s.qZA()()()()()()(),s.TgZ(47,"div",0)(48,"div",1)(49,"div",2)(50,"div",3)(51,"h4",4),s._UZ(52,"b"),s._uU(53," Billable working days : "),s.YNc(54,K8,2,1,"b",18),s.qZA(),s.TgZ(55,"button",19),s.NdJ("click",function(){return i.onSubmitWorkingDays()}),s._uU(56,"Save"),s.qZA()(),s.TgZ(57,"div",6)(58,"div",7)(59,"table",8)(60,"thead")(61,"tr")(62,"th"),s._uU(63,"Type of days"),s.qZA(),s.TgZ(64,"th"),s._uU(65,"Value"),s.qZA()()(),s.TgZ(66,"tbody")(67,"tr")(68,"td"),s._uU(69," Total calendar days "),s.qZA(),s.TgZ(70,"td")(71,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),s._UZ(72,"input",20),s.qZA()()(),s.TgZ(73,"tr")(74,"td"),s._uU(75," Weekends "),s.qZA(),s.TgZ(76,"td")(77,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),s._UZ(78,"input",21),s.qZA()()(),s.TgZ(79,"tr")(80,"td"),s._uU(81," Paid leave "),s.qZA(),s.TgZ(82,"td")(83,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),s._UZ(84,"input",22),s.qZA()()(),s.TgZ(85,"tr")(86,"td"),s._uU(87," Public holidays "),s.qZA(),s.TgZ(88,"td")(89,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitWorkingDays()}),s._UZ(90,"input",23),s.qZA()()()()()()()()()(),s.TgZ(91,"div",0)(92,"div",1)(93,"div",2)(94,"div",3)(95,"h4",4),s._UZ(96,"b"),s._uU(97," Languages"),s.qZA(),s.TgZ(98,"a",5),s._uU(99,"Save"),s.qZA()(),s.TgZ(100,"div",24)(101,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitLanguage()}),s.TgZ(102,"div",25)(103,"label",26),s._uU(104,"Language"),s.qZA(),s.TgZ(105,"select",27)(106,"option",12),s._uU(107,"Select language"),s.qZA(),s.YNc(108,Y8,2,2,"option",28),s.qZA()()()()()()(),s.TgZ(109,"div",29)(110,"div",30)(111,"div",31)(112,"div",32)(113,"h5",33),s._uU(114,"Delete currency exchange"),s.qZA(),s._UZ(115,"button",34),s.qZA(),s.TgZ(116,"div",35)(117,"b"),s._uU(118,"Do you really want to delete this currency?"),s.qZA()(),s.TgZ(119,"div",36)(120,"button",37),s.NdJ("click",function(){return i.onClickDismiss()}),s._uU(121,"Close "),s.qZA(),s.TgZ(122,"button",38),s.NdJ("click",function(){return i.onClickDeleteCurrencyExchange()}),s._uU(123," Confirm "),s.qZA()()()()()),2&r&&(s.xp6(30),s.Q6J("formGroup",i.currencyForm),s.xp6(4),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("formGroup",i.currencyForm),s.xp6(4),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("formGroup",i.currencyForm),s.xp6(3),s.Q6J("ngIf",i.currencyForm.valid),s.xp6(1),s.Q6J("ngForOf",i.currencyExchanges),s.xp6(8),s.Q6J("ngIf",i.workingDaysResponse),s.xp6(17),s.Q6J("formGroup",i.workingDaysForm),s.xp6(6),s.Q6J("formGroup",i.workingDaysForm),s.xp6(6),s.Q6J("formGroup",i.workingDaysForm),s.xp6(6),s.Q6J("formGroup",i.workingDaysForm),s.xp6(12),s.Q6J("formGroup",i.languageForm),s.xp6(7),s.Q6J("ngForOf",i.languages))},dependencies:[lr,mr,hc,Ry,Wg,uc,qg,ih,Nu,eh,fc,xu],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})();var Ow=(()=>{return(n=Ow||(Ow={})).EOD="EOD",n.WORK_PACKAGE="WORK PACKAGE",Ow;var n})(),Yr=(()=>{return(n=Yr||(Yr={})).Annually="ANNUALLY",n.Monthly="MONTHLY",n.Weekly="WEEKLY",n.Daily="DAILY",n.Hourly="HOURLY",Yr;var n})();class dt{static convertToAnnualAmount(t,e){switch(e){case Yr.Annually:break;case Yr.Monthly:t/=12;break;case Yr.Weekly:t/=52;break;case Yr.Daily:t/=228;break;case Yr.Hourly:t/=2496}return t}static splitAmount(t){return t.split(" ")}static getAmountPeriod(t){return t?dt.splitAmount(t)[0]:Yr.Annually}static getAmount(t){return t?dt.splitAmount(t)[2]:""}static getAmountCurrency(t){return t?dt.splitAmount(t)[1]:Cc.AED}static calculateAttributeAnnualCost(t){let e=0,r=dt.splitAmount(t);switch(r[0]){case Yr.Annually:e=+r[2];break;case Yr.Monthly:e=12*+r[2];break;case Yr.Weekly:e=52*+r[2];break;case Yr.Daily:e=228*+r[2];break;case Yr.Hourly:e=52*+r[2]*48}return e}static calculateTotalAnnualCost(t){let e=0;return t.forEach(r=>{e+=dt.calculateAttributeAnnualCost(r.basicSalary),e+=dt.calculateAttributeAnnualCost(r.allowance),e+=dt.calculateAttributeAnnualCost(r.gratuity),e+=dt.calculateAttributeAnnualCost(r.insurance),e+=dt.calculateAttributeAnnualCost(r.flightTicket),e+=dt.calculateAttributeAnnualCost(r.workPermit),e+=dt.calculateAttributeAnnualCost(r.office),e+=dt.calculateAttributeAnnualCost(r.generalSupportPackage),e+=dt.calculateAttributeAnnualCost(r.laptopWorkstation),e+=dt.calculateAttributeAnnualCost(r.licenses),e+=dt.calculateAttributeAnnualCost(r.mobilizationCost),e+=dt.calculateAttributeAnnualCost(r.parking),e+=dt.calculateAttributeAnnualCost(r.transportation),e*=r.workload?r.workload:1}),e}static convertAmountToCurrency(t,e,r){let i=this.getCurrencyRate(e,r);return i?t*i:void 0}static convertAmountFromCurrencyToCurrency(t,e,r){let i=e.split("/"),o=this.getRateFromGivenCurrencies(i[0],i[1],r);return o?t*o:void 0}static getRateFromGivenCurrencies(t,e,r){let i;return t==t?1:(r.forEach(o=>{o.currency1==t&&o.currency2==e&&(i=o.rate)}),i)}static getCurrencyRate(t,e){let r;return t==Cc.AED?1:(e.forEach(i=>{i.currency1==Cc.AED&&i.currency2==t?r=i.rate:i.currency1==t&&i.currency2==Cc.AED&&(r=1/i.rate)}),r)}static getFirstLetterOfPeriod(t){switch(t){case Yr.Annually:return"Y";case Yr.Monthly:return"M";case Yr.Weekly:return"W";case Yr.Daily:return"D";case Yr.Hourly:return"H";default:return""}}}class Q8 extends rm{toEntity(t){return{id:t.id,createdAt:t.createdAt,updatedAt:new Date,deleted:!1,companyName:t.companyName,email:t.email,phoneNumber:t.phoneNumber,address:t.address,logo:t.logo}}fromEntity(t){return{id:t.id,createdAt:t.createdAt,companyName:t.companyName,email:t.email,phoneNumber:t.phoneNumber,address:t.address,logo:t.logo}}fromRequest(t){return{updatedAt:new Date,deleted:!1,companyName:t.companyName,email:t.email,phoneNumber:t.phoneNumber,address:t.address,logo:t.logo}}}let Mw=(()=>{class n extends Qf{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=s.n5z(n)))(i||n)}}();static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.create(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Mw))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.delete(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Mw))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.update(e.id,e.request)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Mw))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OR=(()=>{class n{constructor(e){this.repository=e}execute(){return this.repository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Mw))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_B=(()=>{class n extends p{constructor(e,r,i,o){super(),this.createClientUseCase=e,this.deleteClientUseCase=r,this.updateClientUseCase=i,this.fetchClientsUseCase=o,this.mapper=new Q8}create(e){let r=this.mapper.fromRequest(e);return r.id=nm(),r.createdAt=new Date,this.createClientUseCase.execute(r).pipe((0,S.U)(i=>this.mapper.toResponse(i)))}delete(e){return this.deleteClientUseCase.execute(e),Fe(this.mapper.toEmptyResponse())}fetchAll(){return this.fetchClientsUseCase.execute().pipe((0,S.U)(e=>this.mapper.toResponses(e)))}fetchOne(e){return Fe()}update(e,r){return this.updateClientUseCase.execute({id:e,request:this.mapper.fromRequest(r)}),Fe(this.mapper.toEmptyResponse())}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(xR),s.LFG(kR),s.LFG(RR),s.LFG(OR))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MR=(()=>{class n{transform(e){if(Number.isFinite(e)){const r={minimumFractionDigits:2,maximumFractionDigits:2};return e=e||0,Number(e).toLocaleString("en",r)}return"Unable to convert!"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=s.Yjl({name:"amount",type:n,pure:!0})}return n})(),X8=(()=>{class n{constructor(){this.AmountHelper=dt}ngOnInit(){this.amountCurrency=dt.getAmountCurrency(this.amount),this.amountPeriod=dt.getAmountPeriod(this.amount),this.amountValue=dt.getAmount(this.amount)}getFirstChar(e){return Array.from(e)[0]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-amount"]],inputs:{amount:"amount"},decls:10,vars:5,consts:[[1,"row"],[1,"col-2","text-center",2,"font-size","x-small"],[1,"divider"],[1,"col"]],template:function(r,i){1&r&&(s.TgZ(0,"div",0)(1,"div",1)(2,"p"),s._uU(3),s.qZA(),s._UZ(4,"hr",2),s.TgZ(5,"p"),s._uU(6),s.qZA()(),s.TgZ(7,"div",3),s._uU(8),s.ALo(9,"amount"),s.qZA()()),2&r&&(s.xp6(3),s.Oqu(i.amountCurrency),s.xp6(3),s.Oqu(i.AmountHelper.getFirstLetterOfPeriod(i.amountPeriod)),s.xp6(2),s.Oqu(s.lcZ(9,3,+i.amountValue)))},dependencies:[MR],styles:["hr.divider[_ngcontent-%COMP%]{margin:0;border-width:1px}p[_ngcontent-%COMP%]{margin:0;padding:0}"]})}return n})();function e5(n,t){1&n&&(s.TgZ(0,"small",90),s._uU(1," Please enter project title "),s.qZA())}function t5(n,t){if(1&n&&(s.TgZ(0,"option",91),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e.id),s.xp6(1),s.Oqu(e.companyName)}}function n5(n,t){if(1&n&&(s.TgZ(0,"b"),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Oqu(e.resources.length)}}function r5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function i5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function s5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function o5(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"form",10),s.NdJ("ngSubmit",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s._UZ(1,"input",93),s.qZA()}if(2&n){const e=s.oxw();s.Q6J("formGroup",e.resourceForm)}}function a5(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"img",94),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s.qZA()}}function l5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function c5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function u5(n,t){if(1&n&&(s.TgZ(0,"select",95),s.YNc(1,c5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function d5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function h5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function f5(n,t){if(1&n&&(s.TgZ(0,"select",96),s.YNc(1,h5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function p5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function g5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function m5(n,t){if(1&n&&(s.TgZ(0,"select",97),s.YNc(1,g5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function _5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function y5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function v5(n,t){if(1&n&&(s.TgZ(0,"select",98),s.YNc(1,y5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function b5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function w5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function C5(n,t){if(1&n&&(s.TgZ(0,"select",99),s.YNc(1,w5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function T5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function E5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function D5(n,t){if(1&n&&(s.TgZ(0,"select",100),s.YNc(1,E5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function S5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function I5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function A5(n,t){if(1&n&&(s.TgZ(0,"select",101),s.YNc(1,I5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function N5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function x5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function k5(n,t){if(1&n&&(s.TgZ(0,"select",102),s.YNc(1,x5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function R5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function O5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function M5(n,t){if(1&n&&(s.TgZ(0,"select",103),s.YNc(1,O5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function P5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function F5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function L5(n,t){if(1&n&&(s.TgZ(0,"select",104),s.YNc(1,F5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function U5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function B5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function V5(n,t){if(1&n&&(s.TgZ(0,"select",105),s.YNc(1,B5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function j5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function H5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function $5(n,t){if(1&n&&(s.TgZ(0,"select",106),s.YNc(1,H5,2,2,"option",35),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.periods)}}function G5(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"tr")(1,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s.TgZ(2,"h2"),s._uU(3),s.qZA()(),s.TgZ(4,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s._uU(5),s.qZA(),s.TgZ(6,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s._UZ(7,"app-amount",108),s.qZA(),s.TgZ(8,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s._uU(9),s.qZA(),s.TgZ(10,"td")(11,"img",109),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickResourceDuplicate(o))}),s.qZA(),s.TgZ(12,"img",110),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickResourceToBeDeleted(o))}),s.qZA()(),s.TgZ(13,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s._UZ(14,"app-amount",108),s.qZA(),s.TgZ(15,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s._UZ(16,"app-amount",108),s.qZA(),s.TgZ(17,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s._UZ(18,"app-amount",108),s.qZA(),s.TgZ(19,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s._UZ(20,"app-amount",108),s.qZA(),s.TgZ(21,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s._UZ(22,"app-amount",108),s.qZA(),s.TgZ(23,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s._UZ(24,"app-amount",108),s.qZA(),s.TgZ(25,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s._UZ(26,"app-amount",108),s.qZA(),s.TgZ(27,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s._UZ(28,"app-amount",108),s.qZA(),s.TgZ(29,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s._UZ(30,"app-amount",108),s.qZA(),s.TgZ(31,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s._UZ(32,"app-amount",108),s.qZA(),s.TgZ(33,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s._UZ(34,"app-amount",108),s.qZA(),s.TgZ(35,"td",107),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(207);return s.KtG(c.openEditResourceModal(o,d))}),s._UZ(36,"app-amount",108),s.qZA()()}if(2&n){const e=t.$implicit;s.xp6(3),s.Oqu(e.jobTitle),s.xp6(2),s.Oqu(e.resourceType),s.xp6(2),s.Q6J("amount",e.basicSalary),s.xp6(2),s.Oqu(e.workload),s.xp6(5),s.Q6J("amount",e.allowance),s.xp6(2),s.Q6J("amount",e.gratuity),s.xp6(2),s.Q6J("amount",e.insurance),s.xp6(2),s.Q6J("amount",e.flightTicket),s.xp6(2),s.Q6J("amount",e.workPermit),s.xp6(2),s.Q6J("amount",e.office),s.xp6(2),s.Q6J("amount",e.generalSupportPackage),s.xp6(2),s.Q6J("amount",e.laptopWorkstation),s.xp6(2),s.Q6J("amount",e.licenses),s.xp6(2),s.Q6J("amount",e.mobilizationCost),s.xp6(2),s.Q6J("amount",e.parking),s.xp6(2),s.Q6J("amount",e.transportation)}}function Z5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function q5(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function z5(n,t){if(1&n&&(s.TgZ(0,"th"),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.xp6(1),s.Oqu(e)}}function W5(n,t){if(1&n&&(s.TgZ(0,"td")(1,"h2"),s._uU(2),s.ALo(3,"amount"),s.qZA()()),2&n){const e=t.$implicit,r=s.oxw().$implicit,i=s.oxw(2);s.xp6(2),s.Oqu(s.lcZ(3,1,i.calculateCurrencyPeriodCost(e,r)))}}function K5(n,t){if(1&n&&(s.TgZ(0,"tr")(1,"td")(2,"h2"),s._uU(3),s.qZA()(),s.YNc(4,W5,4,3,"td",77),s.qZA()),2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(3),s.Oqu(e),s.xp6(1),s.Q6J("ngForOf",r.displayCurrencies)}}function Y5(n,t){if(1&n&&(s.TgZ(0,"div")(1,"b"),s._uU(2),s.ALo(3,"amount"),s.qZA()()),2&n){const e=s.oxw(2);s.xp6(2),s.hij("",s.lcZ(3,1,e.project.margin),"%")}}function J5(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"form",10),s.NdJ("ngSubmit",function(){s.CHM(e);const i=s.oxw(2);return s.KtG(i.onSubmitProject())}),s._UZ(1,"input",120),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("formGroup",e.projectForm)}}function Q5(n,t){if(1&n&&(s.TgZ(0,"div")(1,"b"),s._uU(2),s.ALo(3,"amount"),s.qZA()()),2&n){const e=s.oxw(2);s.xp6(2),s.hij("",s.lcZ(3,1,e.project.riskProvision),"%")}}function X5(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"form",10),s.NdJ("ngSubmit",function(){s.CHM(e);const i=s.oxw(2);return s.KtG(i.onSubmitProject())}),s._UZ(1,"input",121),s.qZA()}if(2&n){const e=s.oxw(2);s.Q6J("formGroup",e.projectForm)}}function eW(n,t){if(1&n&&(s.TgZ(0,"th"),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.xp6(1),s.Oqu(e)}}function tW(n,t){if(1&n&&(s.TgZ(0,"h2"),s._uU(1),s.ALo(2,"amount"),s.qZA()),2&n){const e=s.oxw().$implicit,r=s.oxw().$implicit,i=s.oxw(2);s.xp6(1),s.hij(" ",s.lcZ(2,1,i.calculateCurrencyPeriodPrice(e,r))," ")}}function nW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",125)(1,"input",126),s.NdJ("change",function(i){s.CHM(e);const o=s.oxw().$implicit,c=s.oxw().$implicit,d=s.oxw(2);return s.KtG(d.onChangePrice(c,o,i))}),s.qZA()()}if(2&n){const e=s.oxw().$implicit,r=s.oxw().$implicit,i=s.oxw(2);s.Q6J("formGroup",i.pricesForm),s.xp6(1),s.s9C("placeholder",i.calculateCurrencyPeriodPrice(e,r))}}function rW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"td",123),s.NdJ("mouseleave",function(){s.CHM(e);const i=s.oxw(3);return s.KtG(i.onMouseLeaveEditPrice())})("mouseenter",function(){const i=s.CHM(e),o=i.$implicit,c=i.index,d=s.oxw(),f=d.$implicit,y=d.index,w=s.oxw(2);return s.KtG(w.onMouseEnterEditPrice(w.calculateCurrencyPeriodPrice(o,f),o,f,y,c))}),s.YNc(1,tW,3,3,"h2",29),s.YNc(2,nW,2,2,"div",124),s.qZA()}if(2&n){const e=t.index,r=s.oxw().index,i=s.oxw(2);s.xp6(1),s.Q6J("ngIf",""+r+e!=i.getEditPriceTag()),s.xp6(1),s.Q6J("ngIf",""+r+e==i.getEditPriceTag())}}function iW(n,t){if(1&n&&(s.TgZ(0,"tr")(1,"td")(2,"h2"),s._uU(3),s.qZA()(),s.YNc(4,rW,3,2,"td",122),s.qZA()),2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(3),s.Oqu(e),s.xp6(1),s.Q6J("ngForOf",r.displayCurrencies)}}function sW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",2)(1,"div",27)(2,"div",0)(3,"div",1)(4,"form",10),s.NdJ("ngSubmit",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmitDisplay())}),s.TgZ(5,"div",2)(6,"div",111)(7,"label",112)(8,"strong"),s._uU(9,"Select a period"),s.qZA()(),s.TgZ(10,"select",113),s.NdJ("change",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onChangePeriod())}),s.YNc(11,Z5,2,2,"option",35),s.qZA()(),s.TgZ(12,"div",5)(13,"label",114)(14,"strong"),s._uU(15,"Select a currency"),s.qZA()(),s.TgZ(16,"select",115),s.NdJ("change",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onChangeCurrency())}),s.YNc(17,q5,2,2,"option",35),s.qZA()()()()(),s.TgZ(18,"div",9)(19,"div",31)(20,"table",32)(21,"thead")(22,"tr")(23,"th")(24,"h4"),s._uU(25,"Costs"),s.qZA()(),s.YNc(26,z5,2,1,"th",77),s.qZA()(),s.TgZ(27,"tbody"),s.YNc(28,K5,5,2,"tr",77),s.qZA()()(),s.TgZ(29,"div",116)(30,"div",5)(31,"label",117),s._uU(32,"Margin (%)"),s.qZA(),s.TgZ(33,"div",118),s.NdJ("mouseenter",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onMouseEnterEditMargin())})("mouseleave",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onMouseLeaveEditMargin())}),s.YNc(34,Y5,4,3,"div",29),s.YNc(35,J5,2,1,"form",39),s.qZA()(),s.TgZ(36,"div",5)(37,"label",119),s._uU(38,"Risk provision (%)"),s.qZA(),s.TgZ(39,"div",118),s.NdJ("mouseenter",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onMouseEnterEditRiskProvision())})("mouseleave",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onMouseLeaveEditRiskProvision())}),s.YNc(40,Q5,4,3,"div",29),s.YNc(41,X5,2,1,"form",39),s.qZA()()(),s.TgZ(42,"div",31)(43,"table",32)(44,"thead")(45,"tr")(46,"th")(47,"h4"),s._uU(48,"Prices"),s.qZA()(),s.YNc(49,eW,2,1,"th",77),s.qZA()(),s.TgZ(50,"tbody"),s.YNc(51,iW,5,2,"tr",77),s.qZA()()()()()()()}if(2&n){const e=s.oxw();s.xp6(4),s.Q6J("formGroup",e.displayForm),s.xp6(7),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(9),s.Q6J("ngForOf",e.displayCurrencies),s.xp6(2),s.Q6J("ngForOf",e.displayPeriods),s.xp6(6),s.Q6J("ngIf",!e.editMargin),s.xp6(1),s.Q6J("ngIf",e.editMargin),s.xp6(5),s.Q6J("ngIf",!e.editRiskProvision),s.xp6(1),s.Q6J("ngIf",e.editRiskProvision),s.xp6(8),s.Q6J("ngForOf",e.displayCurrencies),s.xp6(2),s.Q6J("ngForOf",e.displayPeriods)}}function oW(n,t){1&n&&(s.TgZ(0,"small",90),s._uU(1," Please enter job title! "),s.qZA())}function aW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function lW(n,t){1&n&&(s.TgZ(0,"small",90),s._uU(1," Please select resource type! "),s.qZA())}function cW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function uW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function dW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function hW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function fW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function pW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function gW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function mW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function _W(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function yW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function vW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function bW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function wW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function CW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function TW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function EW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function DW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function SW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function IW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function AW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function NW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function xW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function kW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function RW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function OW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.hij("",e," ")}}function MW(n,t){if(1&n&&(s.TgZ(0,"option",92),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function PW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",82)(1,"h4",127),s._uU(2,"Edit resource"),s.qZA(),s.TgZ(3,"button",128),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.KtG(o.dismiss("Cross click"))}),s.qZA()(),s.TgZ(4,"div",85)(5,"form",10),s.NdJ("ngSubmit",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s.TgZ(6,"div",2)(7,"div",129)(8,"div",130)(9,"label",131),s._uU(10,"Job title"),s.TgZ(11,"span",14),s._uU(12,"*"),s.qZA()(),s._UZ(13,"input",132),s.YNc(14,oW,2,0,"small",16),s.qZA(),s.TgZ(15,"div",130)(16,"label",131),s._uU(17,"Resource type"),s.TgZ(18,"span",14),s._uU(19,"*"),s.qZA()(),s.TgZ(20,"select",133)(21,"option",20),s._uU(22,"Select resource type"),s.qZA(),s.YNc(23,aW,2,2,"option",35),s.qZA(),s.YNc(24,lW,2,0,"small",16),s.qZA(),s.TgZ(25,"div",134)(26,"label",135),s._uU(27,"Basic salary"),s.TgZ(28,"span",14),s._uU(29,"*"),s.qZA()(),s.TgZ(30,"div",136)(31,"select",137),s.NdJ("change",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onChangeBasicSalary())}),s.YNc(32,cW,2,2,"option",35),s.qZA()(),s.TgZ(33,"div",5)(34,"input",138),s.NdJ("change",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onChangeBasicSalary())}),s.qZA()(),s.TgZ(35,"div",139)(36,"select",140),s.NdJ("change",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onChangeBasicSalary())}),s.YNc(37,uW,2,2,"option",35),s.qZA()()(),s.TgZ(38,"div",134)(39,"label",141),s._uU(40,"Workload"),s.qZA(),s._UZ(41,"input",142),s.qZA()(),s.TgZ(42,"div",129)(43,"div",134)(44,"label",143),s._uU(45,"Allowance"),s.qZA(),s.TgZ(46,"div",136)(47,"select",144),s.YNc(48,dW,2,2,"option",35),s.qZA()(),s.TgZ(49,"div",5),s._UZ(50,"input",145),s.qZA(),s.TgZ(51,"div",139)(52,"select",146),s.YNc(53,hW,2,2,"option",35),s.qZA()()(),s.TgZ(54,"div",134)(55,"label",147),s._uU(56,"Gratuity / End of service"),s.qZA(),s.TgZ(57,"div",136)(58,"select",148),s.YNc(59,fW,2,2,"option",35),s.qZA()(),s.TgZ(60,"div",5),s._UZ(61,"input",149),s.qZA(),s.TgZ(62,"div",139)(63,"select",150),s.YNc(64,pW,2,2,"option",35),s.qZA()()(),s.TgZ(65,"div",134)(66,"label",151),s._uU(67,"Insurance"),s.qZA(),s.TgZ(68,"div",136)(69,"select",152),s.YNc(70,gW,2,2,"option",35),s.qZA()(),s.TgZ(71,"div",5),s._UZ(72,"input",153),s.qZA(),s.TgZ(73,"div",139)(74,"select",154),s.YNc(75,mW,2,2,"option",35),s.qZA()()(),s.TgZ(76,"div",134)(77,"label",155),s._uU(78,"Annual flight ticket"),s.qZA(),s.TgZ(79,"div",136)(80,"select",156),s.YNc(81,_W,2,2,"option",35),s.qZA()(),s.TgZ(82,"div",5),s._UZ(83,"input",157),s.qZA(),s.TgZ(84,"div",139)(85,"select",158),s.YNc(86,yW,2,2,"option",35),s.qZA()()(),s.TgZ(87,"div",134)(88,"label",159),s._uU(89,"VISA / Work Permit"),s.qZA(),s.TgZ(90,"div",136)(91,"select",160),s.YNc(92,vW,2,2,"option",35),s.qZA()(),s.TgZ(93,"div",5),s._UZ(94,"input",161),s.qZA(),s.TgZ(95,"div",139)(96,"select",162),s.YNc(97,bW,2,2,"option",35),s.qZA()()(),s.TgZ(98,"div",134)(99,"label",163),s._uU(100,"Office"),s.qZA(),s.TgZ(101,"div",136)(102,"select",164),s.YNc(103,wW,2,2,"option",35),s.qZA()(),s.TgZ(104,"div",5),s._UZ(105,"input",165),s.qZA(),s.TgZ(106,"div",139)(107,"select",166),s.YNc(108,CW,2,2,"option",35),s.qZA()()()(),s.TgZ(109,"div",5)(110,"div",134)(111,"label",167),s._uU(112,"General support package"),s.qZA(),s.TgZ(113,"div",136)(114,"select",168),s.YNc(115,TW,2,2,"option",35),s.qZA()(),s.TgZ(116,"div",5),s._UZ(117,"input",169),s.qZA(),s.TgZ(118,"div",139)(119,"select",170),s.YNc(120,EW,2,2,"option",35),s.qZA()()(),s.TgZ(121,"div",134)(122,"label",171),s._uU(123,"Laptop workstation"),s.qZA(),s.TgZ(124,"div",136)(125,"select",172),s.YNc(126,DW,2,2,"option",35),s.qZA()(),s.TgZ(127,"div",5),s._UZ(128,"input",173),s.qZA(),s.TgZ(129,"div",139)(130,"select",174),s.YNc(131,SW,2,2,"option",35),s.qZA()()(),s.TgZ(132,"div",134)(133,"label",175),s._uU(134,"Licenses"),s.qZA(),s.TgZ(135,"div",136)(136,"select",176),s.YNc(137,IW,2,2,"option",35),s.qZA()(),s.TgZ(138,"div",5),s._UZ(139,"input",177),s.qZA(),s.TgZ(140,"div",139)(141,"select",178),s.YNc(142,AW,2,2,"option",35),s.qZA()()(),s.TgZ(143,"div",134)(144,"label",179),s._uU(145,"Mobilization cost"),s.qZA(),s.TgZ(146,"div",136)(147,"select",180),s.YNc(148,NW,2,2,"option",35),s.qZA()(),s.TgZ(149,"div",5),s._UZ(150,"input",181),s.qZA(),s.TgZ(151,"div",139)(152,"select",182),s.YNc(153,xW,2,2,"option",35),s.qZA()()(),s.TgZ(154,"div",134)(155,"label",183),s._uU(156,"Parking"),s.qZA(),s.TgZ(157,"div",136)(158,"select",176),s.YNc(159,kW,2,2,"option",35),s.qZA()(),s.TgZ(160,"div",5),s._UZ(161,"input",184),s.qZA(),s.TgZ(162,"div",139)(163,"select",185),s.YNc(164,RW,2,2,"option",35),s.qZA()()(),s.TgZ(165,"div",134)(166,"label",186),s._uU(167,"Transportation"),s.qZA(),s.TgZ(168,"div",136)(169,"select",187),s.YNc(170,OW,2,2,"option",35),s.qZA()(),s.TgZ(171,"div",5),s._UZ(172,"input",188),s.qZA(),s.TgZ(173,"div",139)(174,"select",189),s.YNc(175,MW,2,2,"option",35),s.qZA()()()()()()(),s.TgZ(176,"div",86)(177,"button",190),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onClickEditResourceModalClose())}),s._uU(178,"Close"),s.qZA(),s.TgZ(179,"button",191),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s._uU(180,"Save "),s.qZA()()}if(2&n){const e=s.oxw();s.xp6(5),s.Q6J("formGroup",e.resourceForm),s.xp6(9),s.Q6J("ngIf",e.resourceForm.controls.jobTitle.touched&&(null==e.resourceForm.controls.jobTitle.errors?null:e.resourceForm.controls.jobTitle.errors.required)),s.xp6(9),s.Q6J("ngForOf",e.resourceTypes),s.xp6(1),s.Q6J("ngIf",e.resourceForm.controls.resourceType.touched&&(null==e.resourceForm.controls.resourceType.errors?null:e.resourceForm.controls.resourceType.errors.required)),s.xp6(8),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(11),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(7),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(6),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("ngForOf",e.periods),s.xp6(4),s.Q6J("disabled",!e.resourceForm.valid)}}let FW=(()=>{class n{constructor(e,r,i,o,c,d,f,y){this.localStorageService=e,this.toastr=r,this.router=i,this.modalService=o,this.currencyExchangeInteractor=c,this.clientInteractor=d,this.projectInteractor=f,this.resourceInteractor=y,this.clients=[],this.resources=[],this.resourceTypes=[],this.currencies=[],this.periods=[],this.displayCurrencies=[],this.displayPeriods=[],this.currencyExchanges=[],this.closeResult="",this.editPrice="",this.editRiskProvision=!1,this.editMargin=!1,this.ResourceTypeEnum=Ow,this.project=e.get("project"),this.periods=Object.values(Yr),this.resourceTypes=Object.values(Ow),this.currencies=Object.values(Cc),this.displayCurrencies.push(Cc.AED),this.displayPeriods.push(Yr.Annually),this.resourceForm=this.initResourceForm(),this.projectForm=new hi({title:new Le(this.project.title,[gn.required]),client:new Le(this.project.client,[gn.required]),description:new Le(this.project.description),duration:new Le(this.project.duration),margin:new Le(this.project.margin),riskProvision:new Le(this.project.riskProvision)}),this.displayForm=new hi({period:new Le(Yr.Annually),currency:new Le(Cc.AED)}),this.pricesForm=new hi({period:new Le(""),currency:new Le(""),amount:new Le("")})}ngOnInit(){this.fetchClients(),this.fetchResources(this.project.id),this.fetchCurrencyExchanges()}initResourceForm(e){return new hi({jobTitle:new Le((e=e??{}).jobTitle?e.jobTitle:"",[gn.required]),resourceType:new Le(e.resourceType?e.resourceType:"",[gn.required]),workload:new Le(e&&e.workload?e.workload:1),basicSalaryPeriod:new Le(e.basicSalary?dt.getAmountPeriod(e.basicSalary):"MONTHLY"),basicSalaryCurrency:new Le(e.basicSalary?dt.getAmountCurrency(e.basicSalary):"AED"),basicSalary:new Le(dt.getAmount(e.basicSalary),[gn.required]),allowancePeriod:new Le(e.allowance?dt.getAmountPeriod(e.allowance):"MONTHLY"),allowanceCurrency:new Le(dt.getAmountCurrency(e.allowance)),allowance:new Le(dt.getAmount(e.allowance)),gratuityPeriod:new Le(e.gratuity?dt.getAmountPeriod(e.gratuity):"ANNUALLY"),gratuityCurrency:new Le(dt.getAmountCurrency(e.gratuity)),gratuity:new Le(dt.getAmount(e.gratuity)),insurancePeriod:new Le(e.insurance?dt.getAmountPeriod(e.insurance):"ANNUALLY"),insuranceCurrency:new Le(dt.getAmountCurrency(e.insurance)),insurance:new Le(e.insurance?dt.getAmount(e.insurance):"790"),flightTicketPeriod:new Le(e.flightTicket?dt.getAmountPeriod(e.flightTicket):"ANNUALLY"),flightTicketCurrency:new Le(dt.getAmountCurrency(e.flightTicket)),flightTicket:new Le(e.flightTicket?dt.getAmount(e.flightTicket):"2500"),workPermitPeriod:new Le(e.workPermit?dt.getAmountPeriod(e.workPermit):"ANNUALLY"),workPermitCurrency:new Le(dt.getAmountCurrency(e.workPermit)),workPermit:new Le(e.workPermit?dt.getAmount(e.workPermit):"6500"),officePeriod:new Le(e.office?dt.getAmountPeriod(e.office):"DAILY"),officeCurrency:new Le(dt.getAmountCurrency(e.office)),office:new Le(e.office?dt.getAmount(e.office):"19"),generalSupportPackagePeriod:new Le(e.generalSupportPackage?dt.getAmountPeriod(e.generalSupportPackage):"DAILY"),generalSupportPackageCurrency:new Le(dt.getAmountCurrency(e.generalSupportPackage)),generalSupportPackage:new Le(e.generalSupportPackage?dt.getAmount(e.generalSupportPackage):"15"),laptopWorkstationPeriod:new Le(e.laptopWorkstation?dt.getAmountPeriod(e.laptopWorkstation):"ANNUALLY"),laptopWorkstationCurrency:new Le(dt.getAmountCurrency(e.laptopWorkstation)),laptopWorkstation:new Le(e.laptopWorkstation?dt.getAmount(e.laptopWorkstation):"5000"),licensesPeriod:new Le(e.licenses?dt.getAmountPeriod(e.licenses):"ANNUALLY"),licensesCurrency:new Le(dt.getAmountCurrency(e.licenses)),licenses:new Le(e.licenses?dt.getAmount(e.licenses):"400"),mobilizationCostPeriod:new Le(e.mobilizationCost?dt.getAmountPeriod(e.mobilizationCost):"ANNUALLY"),mobilizationCostCurrency:new Le(dt.getAmountCurrency(e.mobilizationCost)),mobilizationCost:new Le(e.mobilizationCost?dt.getAmount(e.mobilizationCost):"3500"),parkingPeriod:new Le(e.parking?dt.getAmountPeriod(e.parking):"ANNUALLY"),parkingCurrency:new Le(dt.getAmountCurrency(e.parking)),parking:new Le(e.parking?dt.getAmount(e.parking):"0"),transportationPeriod:new Le(e.transportation?dt.getAmountPeriod(e.transportation):"ANNUALLY"),transportationCurrency:new Le(dt.getAmountCurrency(e.transportation)),transportation:new Le(e.transportation?dt.getAmount(e.transportation):"0")})}fetchCurrencyExchanges(){this.currencyExchangeInteractor.fetchAll().subscribe({next:e=>{e&&e.success&&(this.currencyExchanges=e.data)},error:e=>{},complete:()=>{}})}fetchClients(){this.clientInteractor.fetchAll().subscribe({next:e=>{e&&e.success&&(this.clients=e.data)},error:e=>{},complete:()=>{}})}fetchResources(e){this.resourceInteractor.fetchByProject(e).subscribe({next:r=>{r&&r.success&&(this.resources=r.data)},error:r=>{},complete:()=>{}})}calculateCurrencyPeriodCost(e,r){let i=dt.convertToAnnualAmount(dt.calculateTotalAnnualCost(this.resources),r);return dt.convertAmountToCurrency(i,e,this.currencyExchanges)}calculateTotalAnnualPrice(){return(1+this.project.margin/100)*(1+this.project.riskProvision/100)*dt.calculateTotalAnnualCost(this.resources)}calculateMargin(e,r,i){let o=dt.calculateTotalAnnualCost(this.resources),c=dt.convertAmountFromCurrencyToCurrency(e,r+"/AED",this.currencyExchanges);return 100*(dt.convertToAnnualAmount(c??0,i)/((1+this.project.riskProvision/100)*o)-1)}calculateCurrencyPeriodPrice(e,r){let i=dt.convertToAnnualAmount(this.calculateTotalAnnualPrice(),r);return dt.convertAmountToCurrency(i,e,this.currencyExchanges)}onSubmit(){if(this.resourceForm.valid){let e={jobTitle:this.resourceForm.value.jobTitle,resourceType:this.resourceForm.value.resourceType,workload:this.resourceForm.value.workload,project:this.project.id,basicSalary:this.resourceForm.value.basicSalaryPeriod+" "+this.resourceForm.value.basicSalaryCurrency+" "+this.resourceForm.value.basicSalary,allowance:this.resourceForm.value.allowancePeriod+" "+this.resourceForm.value.allowanceCurrency+" "+this.resourceForm.value.allowance,gratuity:this.resourceForm.value.gratuityPeriod+" "+this.resourceForm.value.gratuityCurrency+" "+this.resourceForm.value.gratuity,insurance:this.resourceForm.value.insurancePeriod+" "+this.resourceForm.value.insuranceCurrency+" "+this.resourceForm.value.insurance,flightTicket:this.resourceForm.value.flightTicketPeriod+" "+this.resourceForm.value.flightTicketCurrency+" "+this.resourceForm.value.flightTicket,workPermit:this.resourceForm.value.workPermitPeriod+" "+this.resourceForm.value.workPermitCurrency+" "+this.resourceForm.value.workPermit,office:this.resourceForm.value.officePeriod+" "+this.resourceForm.value.officeCurrency+" "+this.resourceForm.value.office,generalSupportPackage:this.resourceForm.value.generalSupportPackagePeriod+" "+this.resourceForm.value.generalSupportPackageCurrency+" "+this.resourceForm.value.generalSupportPackage,laptopWorkstation:this.resourceForm.value.laptopWorkstationPeriod+" "+this.resourceForm.value.laptopWorkstationCurrency+" "+this.resourceForm.value.laptopWorkstation,licenses:this.resourceForm.value.licensesPeriod+" "+this.resourceForm.value.licensesCurrency+" "+this.resourceForm.value.licenses,mobilizationCost:this.resourceForm.value.mobilizationCostPeriod+" "+this.resourceForm.value.mobilizationCostCurrency+" "+this.resourceForm.value.mobilizationCost,parking:this.resourceForm.value.parkingPeriod+" "+this.resourceForm.value.parkingCurrency+" "+this.resourceForm.value.parking,transportation:this.resourceForm.value.transportationPeriod+" "+this.resourceForm.value.transportationCurrency+" "+this.resourceForm.value.transportation};this.selectedResource&&this.selectedResource.id?this.resourceInteractor.update(this.selectedResource.id,e).subscribe({next:r=>{this.selectedResource=void 0,this.resourceForm.reset(),this.editResourceModalReference&&this.editResourceModalReference.dismiss(),this.toastr.success("resource successfully updated","Update resource"),this.fetchResources(this.project.id)},error:r=>{this.toastr.error("Error occurred while updating the client","Update client")},complete:()=>{}}):this.resourceInteractor.create(e).subscribe({next:r=>{this.resourceForm.reset(),this.editResourceModalReference&&this.editResourceModalReference.dismiss(),this.toastr.success("resource successfully saved","Add resource"),this.fetchResources(this.project.id)},error:r=>{this.toastr.error("Error occurred while saving the resource","Add resource")},complete:()=>{}})}else this.toastr.error("Some inputs are incorrect","Edit resource")}onChangeBasicSalary(){this.inputs={jobTitle:this.resourceForm.value.jobTitle,basicSalaryPeriod:this.resourceForm.value.basicSalaryPeriod,basicSalaryCurrency:this.resourceForm.value.basicSalaryCurrency,basicSalary:this.resourceForm.value.basicSalary,resourceType:this.resourceForm.value.resourceType,workload:this.resourceForm.value.workload,allowancePeriod:this.resourceForm.value.allowancePeriod,allowanceCurrency:this.resourceForm.value.allowanceCurrency,allowance:this.resourceForm.value.basicSalary,gratuityPeriod:this.resourceForm.value.gratuityPeriod,gratuityCurrency:this.resourceForm.value.gratuityCurrency,gratuity:this.resourceForm.value.basicSalary,insurancePeriod:this.resourceForm.value.insurancePeriod,insuranceCurrency:this.resourceForm.value.insuranceCurrency,insurance:this.resourceForm.value.insurance,flightTicketPeriod:this.resourceForm.value.flightTicketPeriod,flightTicketCurrency:this.resourceForm.value.flightTicketCurrency,flightTicket:this.resourceForm.value.flightTicket,workPermitPeriod:this.resourceForm.value.workPermitPeriod,workPermitCurrency:this.resourceForm.value.workPermitCurrency,workPermit:this.resourceForm.value.workPermit,officePeriod:this.resourceForm.value.officePeriod,officeCurrency:this.resourceForm.value.officeCurrency,office:this.resourceForm.value.office,generalSupportPackagePeriod:this.resourceForm.value.generalSupportPackagePeriod,generalSupportPackageCurrency:this.resourceForm.value.generalSupportPackageCurrency,generalSupportPackage:this.resourceForm.value.generalSupportPackage,laptopWorkstationPeriod:this.resourceForm.value.laptopWorkstationPeriod,laptopWorkstationCurrency:this.resourceForm.value.laptopWorkstationCurrency,laptopWorkstation:this.resourceForm.value.laptopWorkstation,licensesPeriod:this.resourceForm.value.licensesPeriod,licensesCurrency:this.resourceForm.value.licensesCurrency,licenses:this.resourceForm.value.licenses,mobilizationCostPeriod:this.resourceForm.value.mobilizationCostPeriod,mobilizationCostCurrency:this.resourceForm.value.mobilizationCostCurrency,mobilizationCost:this.resourceForm.value.mobilizationCost,parkingPeriod:this.resourceForm.value.parkingPeriod,parkingCurrency:this.resourceForm.value.parkingCurrency,parking:this.resourceForm.value.parking,transportationPeriod:this.resourceForm.value.transportationPeriod,transportationCurrency:this.resourceForm.value.transportationCurrency,transportation:this.resourceForm.value.transportation},this.resourceForm.setValue(this.inputs)}onChangePeriod(){let e={period:this.displayForm.value.period,currency:this.displayForm.value.currency},r=this.displayPeriods.indexOf(e.period);r>-1?this.displayPeriods.splice(r,1):this.displayPeriods.push(e.period)}onChangeCurrency(){let e={period:this.displayForm.value.period,currency:this.displayForm.value.currency},r=this.displayCurrencies.indexOf(e.currency);r>-1?this.displayCurrencies.splice(r,1):this.displayCurrencies.push(e.currency)}fetchProject(){this.projectInteractor.fetchOne(this.project.id).subscribe({next:e=>{e&&e.success&&(this.project=e.data,this.localStorageService.update("project",this.project))},error:e=>{},complete:()=>{}})}onSubmitProject(){this.projectForm.valid?this.projectInteractor.update(this.project.id,{title:this.projectForm.value.title,duration:this.projectForm.value.duration,description:this.projectForm.value.description,client:this.projectForm.value.client,margin:this.projectForm.value.margin,riskProvision:this.projectForm.value.riskProvision}).subscribe({next:r=>{this.fetchProject(),this.toastr.success("project successfully updated","Success")},error:r=>{this.toastr.error("Error occurred while updating the project","Error")},complete:()=>{}}):this.toastr.error("Some inputs are incorrect","Error")}onSubmitDisplay(){}onClickBack(){this.router.navigate(["dashboard"])}onClickDeleteResource(){let e=this.localStorageService.get("resource");e&&e.id?this.resourceInteractor.delete(e.id).subscribe({next:r=>{this.localStorageService.delete("resource"),this.toastr.success("Resource deleted successfully","Delete resource")},error:r=>{this.localStorageService.delete("resource"),this.toastr.error("Error occurred while deleting the resource","Delete resource")},complete:()=>{}}):(this.localStorageService.delete("resource"),this.toastr.error("Resource not found","Delete resource"))}onClickResourceToBeDeleted(e){this.localStorageService.add("resource",e)}onClickDismissResource(){this.localStorageService.delete("resource")}onClickEditResourceModalClose(){this.resourceForm=this.initResourceForm(),this.editResourceModalReference.dismiss()}open(e){this.editResourceModalReference=this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"xl"}),this.editResourceModalReference.result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(e){switch(e){case wc.ESC:return"by pressing ESC";case wc.BACKDROP_CLICK:return"by clicking on a backdrop";default:return`with: ${e}`}}openEditResourceModal(e,r){this.selectedResource=e,this.resourceForm=this.initResourceForm(this.selectedResource),this.open(r)}onChangePrice(e,r,i){this.projectForm=new hi({title:new Le(this.project.title,[gn.required]),client:new Le(this.project.client,[gn.required]),description:new Le(this.project.description),duration:new Le(this.project.duration),margin:new Le(this.calculateMargin(i.target.value,r,e)),riskProvision:new Le(this.project.riskProvision)}),this.onSubmitProject()}onClickResourceDuplicate(e){this.resourceForm=this.initResourceForm(e),this.onSubmit()}onMouseLeaveEditPrice(){this.editPrice="",this.pricesForm.reset()}getEditPriceTag(){return this.editPrice}onMouseEnterEditPrice(e,r,i,o,c){this.editPrice=o+""+c,this.pricesForm=new hi({period:new Le(i),currency:new Le(r),amount:new Le(e)})}onMouseEnterEditRiskProvision(){this.editRiskProvision=!0}onMouseLeaveEditRiskProvision(){this.editRiskProvision=!1}onMouseEnterEditMargin(){this.editMargin=!0}onMouseLeaveEditMargin(){this.editMargin=!1}onChangeResourceType(){this.selectedResourceType=this.resourceForm.value.resourceType}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(mc),s.Y36(Ca),s.Y36(Tr),s.Y36(lS),s.Y36(SR),s.Y36(_B),s.Y36(h),s.Y36(N))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-resources"]],decls:208,vars:53,consts:[[1,"card"],[1,"card-header"],[1,"row"],[1,"col-2","pointer",3,"click"],["src","assets/images/arrow-left.png",1,"float-left"],[1,"col"],[1,"card-title"],[1,"col-2"],[1,"btn","btn-outline-success","float-right",3,"click"],[1,"card-block"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],[1,"row","m-3"],[1,"col-12","form-group"],["for","title"],[2,"color","red"],["type","text","formControlName","title","placeholder","Project title","id","title",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],[1,"col-9","form-group"],["for","client"],["formControlName","client","id","client",1,"form-control"],["value","","disabled",""],["style","color: black;",3,"ngValue",4,"ngFor","ngForOf"],[1,"col-3","form-group"],["for","duration"],["type","number","formControlName","duration","placeholder","Duration","id","duration",1,"form-control"],["for","description"],["type","number","formControlName","description","placeholder","Description","id","description",1,"form-control"],[1,"col-12"],[1,"card-title","d-inline-block"],[4,"ngIf"],[1,"btn","btn-outline-primary","float-right",3,"click"],[1,"table-responsive","scrollmenu","m-3"],[1,"table","mb-0","new-patient-table","table-hover"],["type","text","formControlName","jobTitle","placeholder","Title of the resource","id","jobTitle"],["formControlName","resourceType",3,"change"],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","basicSalaryCurrency",3,"change"],["type","number","formControlName","basicSalary","placeholder","basic salary","id","basicSalary",3,"change"],["formControlName","basicSalaryPeriod",3,"change"],["novalidate","","class","form-signin",3,"formGroup","ngSubmit",4,"ngIf"],["class","aspect-square","src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],["formControlName","allowanceCurrency",2,"color","black"],["type","number","formControlName","allowance","placeholder","allowance","id","allowance"],["formControlName","allowancePeriod",4,"ngIf"],["formControlName","gratuityCurrency",2,"color","black"],["type","number","formControlName","gratuity","placeholder","gratuity","id","gratuity"],["formControlName","gratuityPeriod",4,"ngIf"],["formControlName","insuranceCurrency",2,"color","black"],["type","number","formControlName","insurance","placeholder","insurance","id","insurance"],["formControlName","insurancePeriod",4,"ngIf"],["formControlName","flightTicketCurrency",2,"color","black"],["type","number","formControlName","flightTicket","placeholder","flightTicket","id","flightTicket"],["formControlName","flightTicketPeriod",4,"ngIf"],["formControlName","workPermitCurrency",2,"color","black"],["type","number","formControlName","workPermit","placeholder","workPermit","id","workPermit"],["formControlName","workPermitPeriod",4,"ngIf"],["formControlName","officeCurrency",2,"color","black"],["type","number","formControlName","office","placeholder","office","id","office"],["formControlName","officePeriod",4,"ngIf"],["formControlName","generalSupportPackageCurrency",2,"color","black"],["type","number","formControlName","generalSupportPackage","placeholder","generalSupportPackage","id","generalSupportPackage"],["formControlName","generalSupportPackagePeriod",4,"ngIf"],["formControlName","laptopWorkstationCurrency",2,"color","black"],["type","number","formControlName","laptopWorkstation","placeholder","laptopWorkstation","id","laptopWorkstation"],["formControlName","laptopWorkstationPeriod",4,"ngIf"],["formControlName","licensesCurrency",2,"color","black"],["type","number","formControlName","licenses","placeholder","licenses","id","licenses"],["formControlName","licensesPeriod",4,"ngIf"],["formControlName","mobilizationCostCurrency",2,"color","black"],["type","number","formControlName","mobilizationCost","placeholder","Mobilization cost","id","mobilizationCost"],["formControlName","mobilizationCostPeriod",4,"ngIf"],["formControlName","parkingCurrency",2,"color","black"],["type","number","formControlName","parking","placeholder","Parking","id","parking"],["formControlName","parkingPeriod",4,"ngIf"],["formControlName","transportationCurrency",2,"color","black"],["type","number","formControlName","transportation","placeholder","Transportation","id","transportation"],["formControlName","transportationPeriod",4,"ngIf"],[4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["id","resourceDeleteModal","tabindex","-1","aria-labelledby","resourceDeleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","resourceDeleteModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],["editResourceModal",""],[1,"form-text","text-muted","text-danger"],[2,"color","black",3,"ngValue"],[3,"ngValue"],["type","number","formControlName","workload","placeholder","Workload","id","workload"],["src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],["formControlName","allowancePeriod"],["formControlName","gratuityPeriod"],["formControlName","insurancePeriod"],["formControlName","flightTicketPeriod"],["formControlName","workPermitPeriod"],["formControlName","officePeriod"],["formControlName","generalSupportPackagePeriod"],["formControlName","laptopWorkstationPeriod"],["formControlName","licensesPeriod"],["formControlName","mobilizationCostPeriod"],["formControlName","parkingPeriod"],["formControlName","transportationPeriod"],[3,"click"],[3,"amount"],["src","assets/images/duplicate.png","alt","duplicate","data-bs-toggle","tooltip","data-bs-placement","top","title","duplicate",1,"aspect-square","action",3,"click"],["src","assets/images/delete.png","data-bs-target","#resourceDeleteModal","alt","delete","data-bs-toggle","modal","data-bs-placement","top","title","delete",1,"aspect-square","action",3,"click"],[1,"col-6"],["for","period"],["formControlName","period","id","period",1,"form-control",3,"change"],["for","currency"],["formControlName","currency","id","currency",1,"form-control",3,"change"],[1,"row","m-2"],["for","margin"],[3,"mouseenter","mouseleave"],["for","riskProvision"],["type","number","formControlName","margin","placeholder","margin","id","margin",1,"form-control"],["type","number","formControlName","riskProvision","placeholder","Risk provision","id","riskProvision",1,"form-control"],[3,"mouseleave","mouseenter",4,"ngFor","ngForOf"],[3,"mouseleave","mouseenter"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["type","number","formControlName","amount",1,"form-control",3,"placeholder","change"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"col","divider-left"],[1,"form-group"],["for","resourceJobTitle"],["type","text","formControlName","jobTitle","placeholder","Title of the resource","id","resourceJobTitle",1,"form-control"],["formControlName","resourceType",1,"form-control"],[1,"row","form-group"],["for","resourceBasicSalary"],[1,"col-3"],["formControlName","basicSalaryCurrency",1,"form-control",3,"change"],["type","number","formControlName","basicSalary","placeholder","basic salary","id","resourceBasicSalary",1,"form-control",3,"change"],[1,"col-4"],["formControlName","basicSalaryPeriod",1,"form-control",3,"change"],["for","resourceWorkload"],["type","number","formControlName","workload","placeholder","Workload","id","resourceWorkload",1,"form-control"],["for","resourceAllowance"],["formControlName","allowanceCurrency",1,"form-control"],["type","number","formControlName","allowance","placeholder","Allowance","id","resourceAllowance",1,"form-control"],["formControlName","allowancePeriod",1,"form-control"],["for","resourceGratuity"],["formControlName","gratuityCurrency",1,"form-control"],["type","number","formControlName","gratuity","placeholder","Gratuity / End of service","id","resourceGratuity",1,"form-control"],["formControlName","gratuityPeriod",1,"form-control"],["for","resourceInsurance"],["formControlName","insuranceCurrency",1,"form-control"],["type","number","formControlName","insurance","placeholder","Insurance","id","resourceInsurance",1,"form-control"],["formControlName","insurancePeriod",1,"form-control"],["for","resourceFlightTicket"],["formControlName","flightTicketCurrency",1,"form-control"],["type","number","formControlName","flightTicket","placeholder","Annual flight ticket","id","resourceFlightTicket",1,"form-control"],["formControlName","flightTicketPeriod",1,"form-control"],["for","resourceWorkPermit"],["formControlName","workPermitCurrency",1,"form-control"],["type","number","formControlName","workPermit","placeholder","VISA / Work Permit","id","resourceWorkPermit",1,"form-control"],["formControlName","workPermitPeriod",1,"form-control"],["for","resourceOffice"],["formControlName","officeCurrency",1,"form-control"],["type","number","formControlName","office","placeholder","Office","id","resourceOffice",1,"form-control"],["formControlName","officePeriod",1,"form-control"],["for","resourceGeneralSupportPackage"],["formControlName","generalSupportPackageCurrency",1,"form-control"],["type","number","formControlName","generalSupportPackage","placeholder","General support package","id","resourceGeneralSupportPackage",1,"form-control"],["formControlName","generalSupportPackagePeriod",1,"form-control"],["for","resourceLaptopWorkstation"],["formControlName","laptopWorkstationCurrency",1,"form-control"],["type","number","formControlName","laptopWorkstation","placeholder","Laptop workstation","id","resourceLaptopWorkstation",1,"form-control"],["formControlName","laptopWorkstationPeriod",1,"form-control"],["for","resourceLicenses"],["formControlName","licensesCurrency",1,"form-control"],["type","number","formControlName","licenses","placeholder","Licenses","id","resourceLicenses",1,"form-control"],["formControlName","licensesPeriod",1,"form-control"],["for","resourceMobilizationCost"],["formControlName","mobilizationCostCurrency",1,"form-control"],["type","number","formControlName","mobilizationCost","placeholder","Mobilization cost","id","resourceMobilizationCost",1,"form-control"],["formControlName","mobilizationCostPeriod",1,"form-control"],["for","resourceParking"],["type","number","formControlName","parking","placeholder","Parking","id","resourceParking",1,"form-control"],["formControlName","parkingPeriod",1,"form-control"],["for","resourceTransportation"],["formControlName","transportationCurrency",1,"form-control"],["type","number","formControlName","transportation","placeholder","Transportation","id","resourceTransportation",1,"form-control"],["formControlName","transportationPeriod",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-success",3,"disabled","click"]],template:function(r,i){if(1&r){const o=s.EpF();s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),s.NdJ("click",function(){return i.onClickBack()}),s._UZ(4,"img",4),s.qZA(),s.TgZ(5,"div",5)(6,"h4",6)(7,"b"),s._uU(8),s.ALo(9,"uppercase"),s.qZA()()(),s.TgZ(10,"div",7)(11,"button",8),s.NdJ("click",function(){return i.onSubmitProject()}),s._uU(12,"Save"),s.qZA()()()(),s.TgZ(13,"div",9)(14,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmitProject()}),s.TgZ(15,"div",11)(16,"div",12)(17,"label",13),s._uU(18,"Project title"),s.TgZ(19,"span",14),s._uU(20,"*"),s.qZA()(),s._UZ(21,"input",15),s.YNc(22,e5,2,0,"small",16),s.qZA(),s.TgZ(23,"div",17)(24,"label",18),s._uU(25,"Client"),s.TgZ(26,"span",14),s._uU(27,"*"),s.qZA()(),s.TgZ(28,"select",19)(29,"option",20),s._uU(30,"Select client"),s.qZA(),s.YNc(31,t5,2,2,"option",21),s.qZA()(),s.TgZ(32,"div",22)(33,"label",23),s._uU(34,"Duration(Months)"),s.qZA(),s._UZ(35,"input",24),s.qZA(),s.TgZ(36,"div",12)(37,"label",25),s._uU(38,"Description"),s.qZA(),s.TgZ(39,"textarea",26),s._uU(40,"            "),s.qZA()()()()()(),s.TgZ(41,"div",2)(42,"div",27)(43,"div",0)(44,"div",1)(45,"h4",28),s.YNc(46,n5,2,1,"b",29),s._uU(47," Resources "),s.qZA(),s.TgZ(48,"button",30),s.NdJ("click",function(){s.CHM(o);const d=s.MAs(207);return s.KtG(i.open(d))}),s._uU(49,"Add"),s.qZA()(),s.TgZ(50,"div",9)(51,"div",31)(52,"table",32)(53,"thead")(54,"tr")(55,"th"),s._uU(56,"Job title"),s.TgZ(57,"span",14),s._uU(58,"*"),s.qZA()(),s.TgZ(59,"th"),s._uU(60,"Resource type"),s.TgZ(61,"span",14),s._uU(62,"*"),s.qZA()(),s.TgZ(63,"th"),s._uU(64,"Basic salary"),s.TgZ(65,"span",14),s._uU(66,"*"),s.qZA()(),s.TgZ(67,"th"),s._uU(68," Workload "),s.qZA(),s.TgZ(69,"th"),s._uU(70,"Actions"),s.qZA(),s.TgZ(71,"th"),s._uU(72,"Allowance"),s.qZA(),s.TgZ(73,"th"),s._uU(74,"Gratuity / End of service"),s.qZA(),s.TgZ(75,"th"),s._uU(76,"Insurance"),s.qZA(),s.TgZ(77,"th"),s._uU(78,"Annual flight ticket"),s.qZA(),s.TgZ(79,"th"),s._uU(80,"VISA / Work Permit"),s.qZA(),s.TgZ(81,"th"),s._uU(82,"Office"),s.qZA(),s.TgZ(83,"th"),s._uU(84,"General support package"),s.qZA(),s.TgZ(85,"th"),s._uU(86,"Laptop workstation"),s.qZA(),s.TgZ(87,"th"),s._uU(88,"Licenses"),s.qZA(),s.TgZ(89,"th"),s._uU(90,"Mobilization cost"),s.qZA(),s.TgZ(91,"th"),s._uU(92,"Parking"),s.qZA(),s.TgZ(93,"th"),s._uU(94,"Transportation"),s.qZA()()(),s.TgZ(95,"tbody")(96,"tr")(97,"td")(98,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(99,"input",33),s.qZA()(),s.TgZ(100,"td")(101,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(102,"select",34),s.NdJ("change",function(){return i.onChangeResourceType()}),s.TgZ(103,"option",20),s._uU(104,"Select resource type"),s.qZA(),s.YNc(105,r5,2,2,"option",35),s.qZA()()(),s.TgZ(106,"td")(107,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(108,"select",36),s.NdJ("change",function(){return i.onChangeBasicSalary()}),s.YNc(109,i5,2,2,"option",35),s.qZA(),s.TgZ(110,"input",37),s.NdJ("change",function(){return i.onChangeBasicSalary()}),s.qZA(),s.TgZ(111,"select",38),s.NdJ("change",function(){return i.onChangeBasicSalary()}),s.YNc(112,s5,2,2,"option",35),s.qZA()()(),s.TgZ(113,"td"),s.YNc(114,o5,2,1,"form",39),s.qZA(),s.TgZ(115,"td"),s.YNc(116,a5,1,0,"img",40),s.qZA(),s.TgZ(117,"td")(118,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(119,"select",41),s.YNc(120,l5,2,2,"option",35),s.qZA(),s._UZ(121,"input",42),s.YNc(122,u5,2,1,"select",43),s.qZA()(),s.TgZ(123,"td")(124,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(125,"select",44),s.YNc(126,d5,2,2,"option",35),s.qZA(),s._UZ(127,"input",45),s.YNc(128,f5,2,1,"select",46),s.qZA()(),s.TgZ(129,"td")(130,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(131,"select",47),s.YNc(132,p5,2,2,"option",35),s.qZA(),s._UZ(133,"input",48),s.YNc(134,m5,2,1,"select",49),s.qZA()(),s.TgZ(135,"td")(136,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(137,"select",50),s.YNc(138,_5,2,2,"option",35),s.qZA(),s._UZ(139,"input",51),s.YNc(140,v5,2,1,"select",52),s.qZA()(),s.TgZ(141,"td")(142,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(143,"select",53),s.YNc(144,b5,2,2,"option",35),s.qZA(),s._UZ(145,"input",54),s.YNc(146,C5,2,1,"select",55),s.qZA()(),s.TgZ(147,"td")(148,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(149,"select",56),s.YNc(150,T5,2,2,"option",35),s.qZA(),s._UZ(151,"input",57),s.YNc(152,D5,2,1,"select",58),s.qZA()(),s.TgZ(153,"td")(154,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(155,"select",59),s.YNc(156,S5,2,2,"option",35),s.qZA(),s._UZ(157,"input",60),s.YNc(158,A5,2,1,"select",61),s.qZA()(),s.TgZ(159,"td")(160,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(161,"select",62),s.YNc(162,N5,2,2,"option",35),s.qZA(),s._UZ(163,"input",63),s.YNc(164,k5,2,1,"select",64),s.qZA()(),s.TgZ(165,"td")(166,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(167,"select",65),s.YNc(168,R5,2,2,"option",35),s.qZA(),s._UZ(169,"input",66),s.YNc(170,M5,2,1,"select",67),s.qZA()(),s.TgZ(171,"td")(172,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(173,"select",68),s.YNc(174,P5,2,2,"option",35),s.qZA(),s._UZ(175,"input",69),s.YNc(176,L5,2,1,"select",70),s.qZA()(),s.TgZ(177,"td")(178,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(179,"select",71),s.YNc(180,U5,2,2,"option",35),s.qZA(),s._UZ(181,"input",72),s.YNc(182,V5,2,1,"select",73),s.qZA()(),s.TgZ(183,"td")(184,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(185,"select",74),s.YNc(186,j5,2,2,"option",35),s.qZA(),s._UZ(187,"input",75),s.YNc(188,$5,2,1,"select",76),s.qZA()()(),s.YNc(189,G5,37,16,"tr",77),s.qZA()()()()()()(),s.YNc(190,sW,52,11,"div",78),s.TgZ(191,"div",79)(192,"div",80)(193,"div",81)(194,"div",82)(195,"h5",83),s._uU(196,"Delete resource"),s.qZA(),s._UZ(197,"button",84),s.qZA(),s.TgZ(198,"div",85)(199,"b"),s._uU(200,"Do you really want to delete this resource?"),s.qZA()(),s.TgZ(201,"div",86)(202,"button",87),s.NdJ("click",function(){return i.onClickDismissResource()}),s._uU(203,"Close "),s.qZA(),s.TgZ(204,"button",88),s.NdJ("click",function(){return i.onClickDeleteResource()}),s._uU(205," Confirm "),s.qZA()()()()(),s.YNc(206,PW,181,31,"ng-template",null,89,s.W1O)}2&r&&(s.xp6(8),s.Oqu(s.lcZ(9,51,i.project.title)),s.xp6(6),s.Q6J("formGroup",i.projectForm),s.xp6(8),s.Q6J("ngIf",i.projectForm.controls.title.touched&&(null==i.projectForm.controls.title.errors?null:i.projectForm.controls.title.errors.required)),s.xp6(9),s.Q6J("ngForOf",i.clients),s.xp6(15),s.Q6J("ngIf",i.resources),s.xp6(52),s.Q6J("formGroup",i.resourceForm),s.xp6(3),s.Q6J("formGroup",i.resourceForm),s.xp6(4),s.Q6J("ngForOf",i.resourceTypes),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(3),s.Q6J("ngForOf",i.periods),s.xp6(2),s.Q6J("ngIf",i.selectedResourceType&&i.selectedResourceType==i.ResourceTypeEnum.WORK_PACKAGE),s.xp6(2),s.Q6J("ngIf",i.resourceForm.valid),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(2),s.Q6J("formGroup",i.resourceForm),s.xp6(2),s.Q6J("ngForOf",i.currencies),s.xp6(2),s.Q6J("ngIf",i.periods.length>0),s.xp6(1),s.Q6J("ngForOf",i.resources),s.xp6(1),s.Q6J("ngIf",i.resources&&i.resources.length>0))},dependencies:[lr,mr,hc,Ry,Wg,uc,qg,ih,Nu,eh,fc,xu,X8,Yi,MR],styles:["div.scrollmenu[_ngcontent-%COMP%]{background-color:#333;overflow:auto;white-space:nowrap}div.scrollmenu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;color:#fff;text-align:center;padding:14px;text-decoration:none}tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid lightgray;border-collapse:collapse}.divider-left[_ngcontent-%COMP%]{border-right:1px dashed #333}"]})}return n})();var cS=(()=>{return(n=cS||(cS={})).Admin="ADMIN",n.Business="BUSINESS MANAGER",n.Financial="FINANCIAL MANAGER",cS;var n})();class LW extends rm{toEntity(t){return{id:t.id,createdAt:t.createdAt,updatedAt:new Date,deleted:!1,firstname:t.firstname,lastname:t.lastname,email:t.email,phoneNumber:t.phoneNumber,address:t.address,role:t.role,avatar:t.avatar}}fromEntity(t){return{id:t.id,createdAt:t.createdAt,firstname:t.firstname,lastname:t.lastname,email:t.email,phoneNumber:t.phoneNumber,address:t.address,role:t.role,avatar:t.avatar}}fromRequest(t){return{updatedAt:new Date,deleted:!1,firstname:t.firstname,lastname:t.lastname,email:t.email,phoneNumber:t.phoneNumber,address:t.address,role:t.role,avatar:t.avatar}}}let hm=(()=>{class n extends Qf{static#e=this.\u0275fac=function(){let e;return function(i){return(e||(e=s.n5z(n)))(i||n)}}();static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PR=(()=>{class n{constructor(e){this.accountRepository=e}execute(e){return this.accountRepository.fetch(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(hm))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FR=(()=>{class n{constructor(e){this.accountRepository=e}execute(){return this.accountRepository.fetchAll()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(hm))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),LR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.update(e.id,e.request)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(hm))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UR=(()=>{class n{constructor(e){this.repository=e}execute(e){return this.repository.delete(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(hm))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),BR=(()=>{class n{constructor(e){this.accountRepository=e}execute(e){return this.accountRepository.login(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(hm))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VR=(()=>{class n{constructor(e){this.accountRepository=e}execute(e){return this.accountRepository.create(e)}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(hm))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yB=(()=>{class n extends zy{constructor(e,r,i,o,c,d){super(),this.fetchAccountUseCase=e,this.fetchAccountsUseCase=r,this.updateAccountUseCase=i,this.deleteAccountUseCase=o,this.loginAccountUseCase=c,this.createAccountUseCase=d,this.mapper=new LW}create(e){let r=this.mapper.fromRequest(e);return r.id=nm(),r.password="Password1",r.createdAt=new Date,this.createAccountUseCase.execute(r).pipe((0,S.U)(i=>this.mapper.toResponse(i)))}delete(e){return this.deleteAccountUseCase.execute(e),Fe(this.mapper.toEmptyResponse())}fetchAll(){return this.fetchAccountsUseCase.execute().pipe((0,S.U)(e=>this.mapper.toResponses(e)))}fetchOne(e){return this.fetchAccountUseCase.execute(e).pipe((0,S.U)(r=>this.mapper.toResponse(r)))}login(e){return this.loginAccountUseCase.execute(e).pipe((0,S.U)(r=>this.mapper.toFirstResponse(r)))}update(e,r){return this.updateAccountUseCase.execute({id:e,request:this.mapper.fromRequest(r)}),Fe(this.mapper.toEmptyResponse())}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(PR),s.LFG(FR),s.LFG(LR),s.LFG(UR),s.LFG(BR),s.LFG(VR))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UW(n,t){if(1&n&&(s.TgZ(0,"option",32),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function BW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"img",33),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s.qZA()}}function VW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"tr")(1,"td",34),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(66);return s.KtG(c.openEditAccountModal(o,d))}),s.TgZ(2,"div",0)(3,"div",35),s._UZ(4,"img",36),s.qZA(),s.TgZ(5,"div",37)(6,"h2"),s._uU(7),s.qZA()()()(),s.TgZ(8,"td",34),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(66);return s.KtG(c.openEditAccountModal(o,d))}),s._uU(9),s.qZA(),s.TgZ(10,"td",34),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(66);return s.KtG(c.openEditAccountModal(o,d))}),s._uU(11),s.qZA(),s.TgZ(12,"td",34),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(66);return s.KtG(c.openEditAccountModal(o,d))}),s._uU(13),s.qZA(),s._UZ(14,"td"),s.TgZ(15,"td",34),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(66);return s.KtG(c.openEditAccountModal(o,d))}),s._uU(16),s.qZA(),s.TgZ(17,"td",34),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw(),d=s.MAs(66);return s.KtG(c.openEditAccountModal(o,d))}),s._uU(18),s.qZA(),s.TgZ(19,"td")(20,"img",38),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return s.KtG(c.onClickAccountToBeDeleted(o))}),s.qZA()()()}if(2&n){const e=t.$implicit;s.xp6(7),s.Oqu(e.firstname),s.xp6(2),s.Oqu(e.lastname),s.xp6(2),s.Oqu(e.email),s.xp6(2),s.Oqu(e.role),s.xp6(3),s.Oqu(e.phoneNumber),s.xp6(2),s.Oqu(e.address)}}function jW(n,t){1&n&&(s.TgZ(0,"small",58),s._uU(1," Please enter firstname! "),s.qZA())}function HW(n,t){1&n&&(s.TgZ(0,"small",58),s._uU(1," Please enter lastname! "),s.qZA())}function $W(n,t){if(1&n&&(s.TgZ(0,"option",32),s._uU(1),s.qZA()),2&n){const e=t.$implicit;s.Q6J("ngValue",e),s.xp6(1),s.Oqu(e)}}function GW(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",25)(1,"h4",39),s._uU(2,"Edit account"),s.qZA(),s.TgZ(3,"button",40),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.KtG(o.dismiss("Cross click"))}),s.qZA()(),s.TgZ(4,"div",28)(5,"form",10),s.NdJ("ngSubmit",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s.TgZ(6,"div",0)(7,"div",37)(8,"div",41)(9,"label",42),s._uU(10,"Firstname"),s.TgZ(11,"span",9),s._uU(12,"*"),s.qZA()(),s._UZ(13,"input",43),s.YNc(14,jW,2,0,"small",44),s.qZA(),s.TgZ(15,"div",41)(16,"label",45),s._uU(17,"Lastname"),s.TgZ(18,"span",9),s._uU(19,"*"),s.qZA()(),s._UZ(20,"input",46),s.YNc(21,HW,2,0,"small",44),s.qZA(),s.TgZ(22,"div"),s._UZ(23,"img",47),s.qZA()(),s.TgZ(24,"div",37)(25,"div",41)(26,"label",48),s._uU(27,"Role"),s.TgZ(28,"span",9),s._uU(29,"*"),s.qZA()(),s.TgZ(30,"select",49)(31,"option",15),s._uU(32,"Select role"),s.qZA(),s.YNc(33,$W,2,2,"option",16),s.qZA()(),s.TgZ(34,"div",41)(35,"label",50),s._uU(36,"Email"),s.TgZ(37,"span",9),s._uU(38,"*"),s.qZA()(),s._UZ(39,"input",51),s.qZA(),s.TgZ(40,"div",41)(41,"label",52),s._uU(42,"Phone number"),s.qZA(),s._UZ(43,"input",53),s.qZA(),s.TgZ(44,"div",41)(45,"label",54),s._uU(46,"Address"),s.qZA(),s._UZ(47,"input",55),s.qZA()()()()(),s.TgZ(48,"div",29)(49,"button",56),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onClickEditAccountModalClose())}),s._uU(50,"Close"),s.qZA(),s.TgZ(51,"button",57),s.NdJ("click",function(){s.CHM(e);const i=s.oxw();return s.KtG(i.onSubmit())}),s._uU(52,"Save "),s.qZA()()}if(2&n){const e=s.oxw();s.xp6(5),s.Q6J("formGroup",e.accountForm),s.xp6(9),s.Q6J("ngIf",e.accountForm.controls.firstname.touched&&(null==e.accountForm.controls.firstname.errors?null:e.accountForm.controls.firstname.errors.required)),s.xp6(7),s.Q6J("ngIf",e.accountForm.controls.lastname.touched&&(null==e.accountForm.controls.lastname.errors?null:e.accountForm.controls.lastname.errors.required)),s.xp6(12),s.Q6J("ngForOf",e.roles),s.xp6(18),s.Q6J("disabled",!e.accountForm.valid)}}const ZW=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:LD},{path:"",component:Qk,canActivate:[ft],children:[{path:"dashboard",component:rt},{path:"resources",component:FW},{path:"clients",component:H8},{path:"accounts",component:(()=>{class n{constructor(e,r,i,o,c){this.accountInteractor=e,this.router=r,this.modalService=i,this.toastr=o,this.localStorageService=c,this.accounts=[],this.roles=[],this.closeResult="",this.roles=Object.values(cS),this.accountForm=new hi({firstname:new Le("",[gn.required]),lastname:new Le("",[gn.required]),email:new Le("",[gn.required]),address:new Le(""),phoneNumber:new Le(""),avatar:new Le(""),role:new Le("",[gn.required])})}ngOnInit(){this.fetchAccounts()}fetchAccounts(){this.accountInteractor.fetchAll().subscribe({next:e=>{this.accounts=e.data},error:e=>{},complete:()=>{}})}onSubmit(){if(this.accountForm.valid){let e={firstname:this.accountForm.value.firstname,lastname:this.accountForm.value.lastname,email:this.accountForm.value.email,address:this.accountForm.value.address,phoneNumber:this.accountForm.value.phoneNumber,role:this.accountForm.value.role,avatar:""};this.selectedAccount&&this.selectedAccount.id?this.accountInteractor.update(this.selectedAccount.id,e).subscribe({next:r=>{this.selectedAccount=void 0,this.accountForm.reset(),this.editAccountModalReference.dismiss(),this.toastr.success("account successfully updated","Update account"),this.fetchAccounts()},error:r=>{this.toastr.error("Error occurred while updating the account","Update account")},complete:()=>{}}):this.accountInteractor.create(e).subscribe({next:r=>{this.accountForm.reset(),this.editAccountModalReference.dismiss(),this.toastr.success("account successfully saved","Success"),this.fetchAccounts()},error:r=>{this.toastr.error("Error occurred while saving account","Error")},complete:()=>{}})}else this.toastr.error("Some inputs are incorrect","Error")}onClickAccountToBeDeleted(e){this.localStorageService.add("account",e)}onClickDeleteAccount(){let e=this.localStorageService.get("account");e&&e.id?this.accountInteractor.delete(e.id).subscribe({next:r=>{this.localStorageService.delete("account"),this.toastr.success("Account deleted successfully","Delete account")},error:r=>{this.localStorageService.delete("account"),this.toastr.error("Error occurred while deleting the account","Delete account")},complete:()=>{}}):(this.localStorageService.delete("account"),this.toastr.error("Account not found","Delete account"))}onClickDismiss(){this.localStorageService.delete("account")}onClickEditAccountModalClose(){this.accountForm.reset(),this.editAccountModalReference.dismiss()}open(e){this.editAccountModalReference=this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"}),this.editAccountModalReference.result.then(r=>{this.closeResult=`Closed with: ${r}`},r=>{this.closeResult=`Dismissed ${this.getDismissReason(r)}`})}getDismissReason(e){switch(e){case wc.ESC:return"by pressing ESC";case wc.BACKDROP_CLICK:return"by clicking on a backdrop";default:return`with: ${e}`}}openEditAccountModal(e,r){this.selectedAccount=e,this.accountForm=new hi({firstname:new Le(e.firstname,[gn.required]),lastname:new Le(e.lastname,[gn.required]),email:new Le(e.email,[gn.required]),address:new Le(e.address),phoneNumber:new Le(e.phoneNumber),avatar:new Le(e.avatar),role:new Le(e.role,[gn.required])}),this.open(r)}static#e=this.\u0275fac=function(r){return new(r||n)(s.Y36(yB),s.Y36(Tr),s.Y36(lS),s.Y36(Ca),s.Y36(mc))};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-accounts"]],decls:82,vars:10,consts:[[1,"row"],[1,"col-12","col-md-12","col-lg-12","col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","d-inline-block"],[1,"btn","btn-outline-primary","float-right",3,"click"],[1,"card-block"],[1,"table-responsive"],[1,"table","mb-0","new-patient-table","table-hover"],[2,"color","red"],["novalidate","",1,"form-signin",3,"formGroup","ngSubmit"],["type","text","formControlName","firstname","placeholder","Firstname"],["type","text","formControlName","lastname","placeholder","Lastname"],["type","text","formControlName","email","placeholder","Email"],["formControlName","role"],["value","","disabled",""],["style","color: black;",3,"ngValue",4,"ngFor","ngForOf"],["class","aspect-square","src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",3,"click",4,"ngIf"],["type","tel","formControlName","phoneNumber","placeholder","Phone number"],["type","text","formControlName","address","placeholder","Address"],[4,"ngFor","ngForOf"],["editAccountModal",""],["id","accountDeleteModal","tabindex","-1","aria-labelledby","accountDeleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","accountDeleteModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[2,"color","black",3,"ngValue"],["src","assets/images/save.png","alt","save","data-bs-toggle","tooltip","data-bs-placement","top","title","save",1,"aspect-square",3,"click"],[3,"click"],[1,"col-5","col-sm-5","col-md-4","col-lg-3","col-xl-3"],["width","28","height","28","src","assets/images/user.jpg","alt","",1,"rounded-circle","m-r-5"],[1,"col"],["src","assets/images/delete.png","data-bs-target","#accountDeleteModal","alt","delete","data-bs-toggle","modal","data-bs-placement","top","title","delete",1,"aspect-square","action",3,"click"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"form-group"],["for","firstname"],["type","text","formControlName","firstname","placeholder","Firstname","id","firstname",1,"form-control"],["class","form-text text-muted text-danger",4,"ngIf"],["for","lastname"],["type","text","formControlName","lastname","placeholder","Lastname","id","lastname",1,"form-control"],["src","assets/images/user.jpg"],["for","role"],["formControlName","role","id","role",1,"form-control"],["for","email"],["type","email","formControlName","email","placeholder","Email","id","email",1,"form-control"],["for","phoneNumber"],["type","tel","formControlName","phoneNumber","placeholder","Phone number","id","phoneNumber",1,"form-control"],["for","address"],["type","tel","formControlName","address","placeholder","Address","id","address",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"form-text","text-muted","text-danger"]],template:function(r,i){if(1&r){const o=s.EpF();s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4)(5,"b"),s._uU(6),s.qZA(),s._uU(7," Accounts "),s.qZA(),s.TgZ(8,"button",5),s.NdJ("click",function(){s.CHM(o);const d=s.MAs(66);return s.KtG(i.open(d))}),s._uU(9,"Add "),s.qZA()(),s.TgZ(10,"div",6)(11,"div",7)(12,"table",8)(13,"thead")(14,"tr")(15,"th"),s._uU(16,"Firstname"),s.TgZ(17,"span",9),s._uU(18,"*"),s.qZA()(),s.TgZ(19,"th"),s._uU(20,"Lastname"),s.TgZ(21,"span",9),s._uU(22,"*"),s.qZA()(),s.TgZ(23,"th"),s._uU(24,"Email"),s.TgZ(25,"span",9),s._uU(26,"*"),s.qZA()(),s.TgZ(27,"th"),s._uU(28,"Role"),s.TgZ(29,"span",9),s._uU(30,"*"),s.qZA()(),s._UZ(31,"th"),s.TgZ(32,"th"),s._uU(33,"Phone number"),s.qZA(),s.TgZ(34,"th"),s._uU(35,"Address"),s.qZA(),s.TgZ(36,"th"),s._uU(37,"Actions"),s.qZA()()(),s.TgZ(38,"tbody")(39,"tr")(40,"td")(41,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(42,"input",11),s.qZA()(),s.TgZ(43,"td")(44,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(45,"input",12),s.qZA()(),s.TgZ(46,"td")(47,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(48,"input",13),s.qZA()(),s.TgZ(49,"td")(50,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s.TgZ(51,"select",14)(52,"option",15),s._uU(53,"Select role"),s.qZA(),s.YNc(54,UW,2,2,"option",16),s.qZA()()(),s.TgZ(55,"td"),s.YNc(56,BW,1,0,"img",17),s.qZA(),s.TgZ(57,"td")(58,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(59,"input",18),s.qZA()(),s.TgZ(60,"td")(61,"form",10),s.NdJ("ngSubmit",function(){return i.onSubmit()}),s._UZ(62,"input",19),s.qZA()(),s._UZ(63,"td"),s.qZA(),s.YNc(64,VW,21,6,"tr",20),s.qZA()()()()()()(),s.YNc(65,GW,53,5,"ng-template",null,21,s.W1O),s.TgZ(67,"div",22)(68,"div",23)(69,"div",24)(70,"div",25)(71,"h5",26),s._uU(72,"Delete account"),s.qZA(),s._UZ(73,"button",27),s.qZA(),s.TgZ(74,"div",28)(75,"b"),s._uU(76,"Do you really want to delete this account?"),s.qZA()(),s.TgZ(77,"div",29)(78,"button",30),s.NdJ("click",function(){return i.onClickDismiss()}),s._uU(79,"Close "),s.qZA(),s.TgZ(80,"button",31),s.NdJ("click",function(){return i.onClickDeleteAccount()}),s._uU(81," Confirm "),s.qZA()()()()()}2&r&&(s.xp6(6),s.Oqu(null==i.accounts?null:i.accounts.length),s.xp6(35),s.Q6J("formGroup",i.accountForm),s.xp6(3),s.Q6J("formGroup",i.accountForm),s.xp6(3),s.Q6J("formGroup",i.accountForm),s.xp6(3),s.Q6J("formGroup",i.accountForm),s.xp6(4),s.Q6J("ngForOf",i.roles),s.xp6(2),s.Q6J("ngIf",i.accountForm.valid),s.xp6(2),s.Q6J("formGroup",i.accountForm),s.xp6(3),s.Q6J("formGroup",i.accountForm),s.xp6(3),s.Q6J("ngForOf",i.accounts))},dependencies:[lr,mr,hc,Ry,Wg,uc,ih,Nu,eh,fc,xu],styles:["tr[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]   img.action[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]:hover   img.action[_ngcontent-%COMP%]{display:inline-block}"]})}return n})()},{path:"settings",component:J8}]}];let qW=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=s.oAB({type:n});static#n=this.\u0275inj=s.cJS({imports:[nT.forRoot(ZW,{scrollPositionRestoration:"enabled"}),nT]})}return n})(),zW=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&s._UZ(0,"router-outlet")},dependencies:[k_],encapsulation:2})}return n})(),dh=(()=>{class n{static#e=this.ACCOUNTS="accounts";static#t=this.CLIENTS="clients";static#n=this.PROJECTS="projects";static#r=this.RESOURCES="resources";static#i=this.CURRENCY_EXCHANGE="currency-exchanges";static#s=this.WORKING_DAYS="working-days"}return n})();var kn=U(5813);function jR(){return(0,xn.e)((n,t)=>{let e,r=!1;n.subscribe((0,ve.x)(t,i=>{const o=e;e=i,r&&t.next([o,i]),r=!0}))})}var pt,Hi=U(2011),HR=(U(1451),U(3942)),Te=U(5861),oo=U(9681),Tc=U(4859),Ec=U(1877),F=U(2090),WW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hh={},$R=$R||{},Wt=WW||self;function uS(){}function GR(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Pw(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var ZR="closure_uid_"+(1e9*Math.random()>>>0),YW=0;function JW(n,t,e){return n.call.apply(n.bind,arguments)}function QW(n,t,e){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(t,i)}}return function(){return n.apply(t,arguments)}}function gs(n,t,e){return(gs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?JW:QW).apply(null,arguments)}function dS(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ms(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(r,i,o){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return t.prototype[i].apply(r,c)}}function tp(){this.s=this.s,this.o=this.o}var eK={};tp.prototype.s=!1,tp.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function KW(n){return Object.prototype.hasOwnProperty.call(n,ZR)&&n[ZR]||(n[ZR]=++YW)}(this);delete eK[n]}},tp.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vB=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},bB=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const r=n.length,i="string"==typeof n?n.split(""):n;for(let o=0;o<r;o++)o in i&&t.call(e,i[o],o,n)};function wB(n){return Array.prototype.concat.apply([],arguments)}function qR(n){const t=n.length;if(0<t){const e=Array(t);for(let r=0;r<t;r++)e[r]=n[r];return e}return[]}function hS(n){return/^[\s\xa0]*$/.test(n)}var lo,CB=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ao(n,t){return-1!=n.indexOf(t)}function zR(n,t){return n<t?-1:n>t?1:0}e:{var TB=Wt.navigator;if(TB){var EB=TB.userAgent;if(EB){lo=EB;break e}}lo=""}function WR(n,t,e){for(const r in n)t.call(e,n[r],r,n)}function DB(n){const t={};for(const e in n)t[e]=n[e];return t}var SB="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function IB(n,t){let e,r;for(let i=1;i<arguments.length;i++){for(e in r=arguments[i],r)n[e]=r[e];for(let o=0;o<SB.length;o++)e=SB[o],Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}}function KR(n){return KR[" "](n),n}KR[" "]=uS;var fS,n,rK=ao(lo,"Opera"),rv=ao(lo,"Trident")||ao(lo,"MSIE"),AB=ao(lo,"Edge"),YR=AB||rv,NB=ao(lo,"Gecko")&&!(ao(lo.toLowerCase(),"webkit")&&!ao(lo,"Edge"))&&!(ao(lo,"Trident")||ao(lo,"MSIE"))&&!ao(lo,"Edge"),iK=ao(lo.toLowerCase(),"webkit")&&!ao(lo,"Edge");function xB(){var n=Wt.document;return n?n.documentMode:void 0}e:{var JR="",QR=(n=lo,NB?/rv:([^\);]+)(\)|;)/.exec(n):AB?/Edge\/([\d\.]+)/.exec(n):rv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):iK?/WebKit\/(\S+)/.exec(n):rK?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(QR&&(JR=QR?QR[1]:""),rv){var XR=xB();if(null!=XR&&XR>parseFloat(JR)){fS=String(XR);break e}}fS=JR}var sK={};var aK=Wt.document&&rv&&(xB()||parseInt(fS,10))||void 0,lK=function(){if(!Wt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Wt.addEventListener("test",uS,t),Wt.removeEventListener("test",uS,t)}catch{}return n}();function Ps(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function Fw(n,t){if(Ps.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(NB){e:{try{KR(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:cK[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Fw.Z.h.call(this)}}Ps.prototype.h=function(){this.defaultPrevented=!0},ms(Fw,Ps);var cK={2:"touch",3:"pen",4:"mouse"};Fw.prototype.h=function(){Fw.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Lw="closure_listenable_"+(1e6*Math.random()|0),uK=0;function dK(n,t,e,r,i){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!r,this.ia=i,this.key=++uK,this.ca=this.fa=!1}function pS(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function gS(n){this.src=n,this.g={},this.h=0}function tO(n,t){var e=t.type;if(e in n.g){var o,r=n.g[e],i=vB(r,t);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(pS(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function nO(n,t,e,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ca&&o.listener==t&&o.capture==!!e&&o.ia==r)return i}return-1}gS.prototype.add=function(n,t,e,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var c=nO(n,t,r,i);return-1<c?(t=n[c],e||(t.fa=!1)):((t=new dK(t,this.src,o,!!r,i)).fa=e,n.push(t)),t};var rO="closure_lm_"+(1e6*Math.random()|0),iO={};function RB(n,t,e,r,i){if(r&&r.once)return MB(n,t,e,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)RB(n,t[o],e,r,i);return null}return e=lO(e),n&&n[Lw]?n.N(t,e,Pw(r)?!!r.capture:!!r,i):OB(n,t,e,!1,r,i)}function OB(n,t,e,r,i,o){if(!t)throw Error("Invalid event type");var c=Pw(i)?!!i.capture:!!i,d=oO(n);if(d||(n[rO]=d=new gS(n)),(e=d.add(t,e,r,c,o)).proxy)return e;if(r=function hK(){var t=fK;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=r,r.src=n,r.listener=e,n.addEventListener)lK||(i=c),void 0===i&&(i=!1),n.addEventListener(t.toString(),r,i);else if(n.attachEvent)n.attachEvent(FB(t.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return e}function MB(n,t,e,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)MB(n,t[o],e,r,i);return null}return e=lO(e),n&&n[Lw]?n.O(t,e,Pw(r)?!!r.capture:!!r,i):OB(n,t,e,!0,r,i)}function PB(n,t,e,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)PB(n,t[o],e,r,i);else r=Pw(r)?!!r.capture:!!r,e=lO(e),n&&n[Lw]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=nO(o=n.g[t],e,r,i))&&(pS(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete n.g[t],n.h--))):n&&(n=oO(n))&&(t=n.g[t.toString()],n=-1,t&&(n=nO(t,e,r,i)),(e=-1<n?t[n]:null)&&sO(e))}function sO(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[Lw])tO(t.i,n);else{var e=n.type,r=n.proxy;t.removeEventListener?t.removeEventListener(e,r,n.capture):t.detachEvent?t.detachEvent(FB(e),r):t.addListener&&t.removeListener&&t.removeListener(r),(e=oO(t))?(tO(e,n),0==e.h&&(e.src=null,t[rO]=null)):pS(n)}}}function FB(n){return n in iO?iO[n]:iO[n]="on"+n}function fK(n,t){if(n.ca)n=!0;else{t=new Fw(t,this);var e=n.listener,r=n.ia||n.src;n.fa&&sO(n),n=e.call(r,t)}return n}function oO(n){return(n=n[rO])instanceof gS?n:null}var aO="__closure_events_fn_"+(1e9*Math.random()>>>0);function lO(n){return"function"==typeof n?n:(n[aO]||(n[aO]=function(t){return n.handleEvent(t)}),n[aO])}function es(){tp.call(this),this.i=new gS(this),this.P=this,this.I=null}function _s(n,t){var e,r=n.I;if(r)for(e=[];r;r=r.I)e.push(r);if(n=n.P,r=t.type||t,"string"==typeof t)t=new Ps(t,n);else if(t instanceof Ps)t.target=t.target||n;else{var i=t;IB(t=new Ps(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var c=t.g=e[o];i=mS(c,r,!0,t)&&i}if(i=mS(c=t.g=n,r,!0,t)&&i,i=mS(c,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=mS(c=t.g=e[o],r,!1,t)&&i}function mS(n,t,e,r){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var c=t[o];if(c&&!c.ca&&c.capture==e){var d=c.listener,f=c.ia||c.src;c.fa&&tO(n.i,c),i=!1!==d.call(f,r)&&i}}return i&&!r.defaultPrevented}ms(es,tp),es.prototype[Lw]=!0,es.prototype.removeEventListener=function(n,t,e,r){PB(this,n,t,e,r)},es.prototype.M=function(){if(es.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],r=0;r<e.length;r++)pS(e[r]);delete n.g[t],n.h--}}this.I=null},es.prototype.N=function(n,t,e,r){return this.i.add(String(n),t,!1,e,r)},es.prototype.O=function(n,t,e,r){return this.i.add(String(n),t,!0,e,r)};var cO=Wt.JSON.stringify;function pK(){var n=UB;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var dO,LB=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new mK,n=>n.reset());class mK{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function _K(n){Wt.setTimeout(()=>{throw n},0)}function uO(n,t){dO||function yK(){var n=Wt.Promise.resolve(void 0);dO=function(){n.then(vK)}}(),hO||(dO(),hO=!0),UB.add(n,t)}var hO=!1,UB=new class gK{constructor(){this.h=this.g=null}add(t,e){const r=LB.get();r.set(t,e),this.h?this.h.next=r:this.g=r,this.h=r}};function vK(){for(var n;n=pK();){try{n.h.call(n.g)}catch(e){_K(e)}var t=LB;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}hO=!1}function _S(n,t){es.call(this),this.h=n||1,this.g=t||Wt,this.j=gs(this.kb,this),this.l=Date.now()}function fO(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function pO(n,t,e){if("function"==typeof n)e&&(n=gs(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=gs(n.handleEvent,n)}return 2147483647<Number(t)?-1:Wt.setTimeout(n,t||0)}function BB(n){n.g=pO(()=>{n.g=null,n.i&&(n.i=!1,BB(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}ms(_S,es),(pt=_S.prototype).da=!1,pt.S=null,pt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),_s(this,"tick"),this.da&&(fO(this),this.start()))}},pt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pt.M=function(){_S.Z.M.call(this),fO(this),delete this.g};class bK extends tp{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:BB(this)}M(){super.M(),this.g&&(Wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Uw(n){tp.call(this),this.h=n,this.g={}}ms(Uw,tp);var VB=[];function jB(n,t,e,r){Array.isArray(e)||(e&&(VB[0]=e.toString()),e=VB);for(var i=0;i<e.length;i++){var o=RB(t,e[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function HB(n){WR(n.g,function(t,e){this.g.hasOwnProperty(e)&&sO(t)},n),n.g={}}function yS(){this.g=!0}function iv(n,t,e,r){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function EK(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var r=e[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var c=1;c<i.length;c++)i[c]=""}}}return cO(e)}catch{return t}}(n,e)+(r?" "+r:"")})}Uw.prototype.M=function(){Uw.Z.M.call(this),HB(this)},Uw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yS.prototype.Aa=function(){this.g=!1},yS.prototype.info=function(){};var fm={},$B=null;function vS(){return $B=$B||new es}function GB(n){Ps.call(this,fm.Ma,n)}function Bw(n){const t=vS();_s(t,new GB(t,n))}function ZB(n,t){Ps.call(this,fm.STAT_EVENT,n),this.stat=t}function co(n){const t=vS();_s(t,new ZB(t,n))}function qB(n,t){Ps.call(this,fm.Na,n),this.size=t}function Vw(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Wt.setTimeout(function(){n()},t)}fm.Ma="serverreachability",ms(GB,Ps),fm.STAT_EVENT="statevent",ms(ZB,Ps),fm.Na="timingevent",ms(qB,Ps);var bS={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},zB={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function gO(){}function KB(){}gO.prototype.h=null;var yO,jw={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function mO(){Ps.call(this,"d")}function _O(){Ps.call(this,"c")}function wS(){}function Hw(n,t,e,r){this.l=n,this.j=t,this.m=e,this.X=r||1,this.V=new Uw(this),this.P=DK,this.W=new _S(n=YR?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new YB}function YB(){this.i=null,this.g="",this.h=!1}ms(mO,Ps),ms(_O,Ps),ms(wS,gO),wS.prototype.g=function(){return new XMLHttpRequest},wS.prototype.i=function(){return{}},yO=new wS;var DK=45e3,vO={},CS={};function bO(n,t,e){n.K=1,n.v=IS(fh(t)),n.s=e,n.U=!0,JB(n,null)}function JB(n,t){n.F=Date.now(),$w(n),n.A=fh(n.v);var e=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),oV(e.h,"t",r),n.C=0,e=n.l.H,n.h=new YB,n.g=NV(n.l,e?t:null,!n.s),0<n.O&&(n.L=new bK(gs(n.Ia,n,n.g),n.O)),jB(n.V,n.g,"readystatechange",n.gb),t=n.H?DB(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),Bw(1),function wK(n,t,e,r,i,o){n.info(function(){if(n.g)if(o)for(var c="",d=o.split("&"),f=0;f<d.length;f++){var y=d[f].split("=");if(1<y.length){var w=y[0];y=y[1];var E=w.split("_");c=2<=E.length&&"type"==E[1]?c+(w+"=")+y+"&":c+(w+"=redacted&")}}else c=null;else c=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function QB(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function XB(n,t,e){let i,r=!0;for(;!n.I&&n.C<e.length;){if(i=SK(n,e),i==CS){4==t&&(n.o=4,co(14),r=!1),iv(n.j,n.m,null,"[Incomplete Response]");break}if(i==vO){n.o=4,co(15),iv(n.j,n.m,e,"[Invalid Chunk]"),r=!1;break}iv(n.j,n.m,i,null),wO(n,i)}QB(n)&&i!=CS&&i!=vO&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,co(16),r=!1),n.i=n.i&&r,r?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),RO(t),t.L=!0,co(11))):(iv(n.j,n.m,e,"[Invalid Chunked Response]"),pm(n),Gw(n))}function SK(n,t){var e=n.C,r=t.indexOf("\n",e);return-1==r?CS:(e=Number(t.substring(e,r)),isNaN(e)?vO:(r+=1)+e>t.length?CS:(t=t.substr(r,e),n.C=r+e,t))}function $w(n){n.Y=Date.now()+n.P,eV(n,n.P)}function eV(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Vw(gs(n.eb,n),t)}function TS(n){n.B&&(Wt.clearTimeout(n.B),n.B=null)}function Gw(n){0==n.l.G||n.I||DV(n.l,n)}function pm(n){TS(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,fO(n.W),HB(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function wO(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||EO(e.i,n)))if(e.I=n.N,!n.J&&EO(e.i,n)&&3==e.G){try{var r=e.Ca.g.parse(t)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<n.F))break e;OS(e),kS(e)}kO(e),co(18)}}else e.ta=i[1],0<e.ta-e.U&&37500>i[2]&&e.N&&0==e.A&&!e.v&&(e.v=Vw(gs(e.ab,e),6e3));if(1>=cV(e.i)&&e.ka){try{e.ka()}catch{}e.ka=void 0}}else _m(e,11)}else if((n.J||e.g==n)&&OS(e),!hS(t))for(i=e.Ca.g.parse(t),t=0;t<i.length;t++){let y=i[t];if(e.U=y[0],y=y[1],2==e.G)if("c"==y[0]){e.J=y[1],e.la=y[2];const w=y[3];null!=w&&(e.ma=w,e.h.info("VER="+e.ma));const E=y[4];null!=E&&(e.za=E,e.h.info("SVER="+e.za));const A=y[5];null!=A&&"number"==typeof A&&0<A&&(e.K=r=1.5*A,e.h.info("backChannelRequestTimeoutMs_="+r)),r=e;const k=n.g;if(k){const M=k.g?k.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(M){var o=r.i;!o.g&&(ao(M,"spdy")||ao(M,"quic")||ao(M,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(DO(o,o.h),o.h=null))}if(r.D){const V=k.g?k.g.getResponseHeader("X-HTTP-Session-Id"):null;V&&(r.sa=V,Ir(r.F,r.D,V))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var c=n;if((r=e).oa=AV(r,r.H?r.la:null,r.W),c.J){uV(r.i,c);var d=c,f=r.K;f&&d.setTimeout(f),d.B&&(TS(d),$w(d)),r.g=c}else TV(r);0<e.l.length&&RS(e)}else"stop"!=y[0]&&"close"!=y[0]||_m(e,7);else 3==e.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?_m(e,7):NO(e):"noop"!=y[0]&&e.j&&e.j.wa(y),e.A=0)}Bw(4)}catch{}}function CO(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(GR(n)||"string"==typeof n)bB(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(GR(n)||"string"==typeof n){e=[];for(var r=n.length,i=0;i<r;i++)e.push(i)}else for(i in e=[],r=0,n)e[r++]=i;r=function IK(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(GR(n)){for(var t=[],e=n.length,r=0;r<e;r++)t.push(n[r]);return t}for(r in t=[],e=0,n)t[e++]=n[r];return t}(n),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],e&&e[o],n)}}function sv(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var r=0;r<e;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof sv)for(e=n.T(),r=0;r<e.length;r++)this.set(e[r],n.get(e[r]));else for(r in n)this.set(r,n[r])}function TO(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var r=n.g[t];gm(n.h,r)&&(n.g[e++]=r),t++}n.g.length=e}if(n.i!=n.g.length){var i={};for(e=t=0;t<n.g.length;)gm(i,r=n.g[t])||(n.g[e++]=r,i[r]=1),t++;n.g.length=e}}function gm(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(pt=Hw.prototype).setTimeout=function(n){this.P=n},pt.gb=function(n){n=n.target;const t=this.L;t&&3==ph(n)?t.l():this.Ia(n)},pt.Ia=function(n){try{if(n==this.g)e:{const w=ph(this.g);var t=this.g.Da();const E=this.g.ba();if(!(3>w)&&(3!=w||YR||this.g&&(this.h.h||this.g.ga()||yV(this.g)))){this.I||4!=w||7==t||Bw(8==t||0>=E?3:2),TS(this);var e=this.g.ba();this.N=e;t:if(QB(this)){var r=yV(this.g);n="";var i=r.length,o=4==ph(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){pm(this),Gw(this);var c="";break t}this.h.i=new Wt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,n+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==e,function CK(n,t,e,r,i,o,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+e+"\n"+o+" "+c})}(this.j,this.u,this.A,this.m,this.X,w,e),this.i){if(this.$&&!this.J){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hS(d)){var y=d;break t}}y=null}if(!(e=y)){this.i=!1,this.o=3,co(12),pm(this),Gw(this);break e}iv(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wO(this,e)}this.U?(XB(this,w,c),YR&&this.i&&3==w&&(jB(this.V,this.W,"tick",this.fb),this.W.start())):(iv(this.j,this.m,c,null),wO(this,c)),4==w&&pm(this),this.i&&!this.I&&(4==w?DV(this.l,this):(this.i=!1,$w(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,co(12)):(this.o=0,co(13)),pm(this),Gw(this)}}}catch{}},pt.fb=function(){if(this.g){var n=ph(this.g),t=this.g.ga();this.C<t.length&&(TS(this),XB(this,n,t),this.i&&4!=n&&$w(this))}},pt.cancel=function(){this.I=!0,pm(this)},pt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function TK(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Bw(3),co(17)),pm(this),this.o=2,Gw(this)):eV(this,this.Y-n)},(pt=sv.prototype).R=function(){TO(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},pt.T=function(){return TO(this),this.g.concat()},pt.get=function(n,t){return gm(this.h,n)?this.h[n]:t},pt.set=function(n,t){gm(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},pt.forEach=function(n,t){for(var e=this.T(),r=0;r<e.length;r++){var i=e[r],o=this.get(i);n.call(t,o,i,this)}};var tV=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mm(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof mm){this.g=void 0!==t?t:n.g,ES(this,n.j),this.s=n.s,DS(this,n.i),SS(this,n.m),this.l=n.l,t=n.h;var e=new zw;e.i=t.i,t.g&&(e.g=new sv(t.g),e.h=t.h),nV(this,e),this.o=n.o}else n&&(e=String(n).match(tV))?(this.g=!!t,ES(this,e[1]||"",!0),this.s=Zw(e[2]||""),DS(this,e[3]||"",!0),SS(this,e[4]),this.l=Zw(e[5]||"",!0),nV(this,e[6]||"",!0),this.o=Zw(e[7]||"")):(this.g=!!t,this.h=new zw(null,this.g))}function fh(n){return new mm(n)}function ES(n,t,e){n.j=e?Zw(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function DS(n,t,e){n.i=e?Zw(t,!0):t}function SS(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function nV(n,t,e){t instanceof zw?(n.h=t,function FK(n,t){t&&!n.j&&(np(n),n.i=null,n.g.forEach(function(e,r){var i=r.toLowerCase();r!=i&&(iV(this,r),oV(this,i,e))},n)),n.j=t}(n.h,n.g)):(e||(t=qw(t,MK)),n.h=new zw(t,n.g))}function Ir(n,t,e){n.h.set(t,e)}function IS(n){return Ir(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Zw(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function qw(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,kK),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function kK(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}mm.prototype.toString=function(){var n=[],t=this.j;t&&n.push(qw(t,rV,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(qw(t,rV,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(qw(e,"/"==e.charAt(0)?OK:RK,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",qw(e,PK)),n.join("")};var rV=/[#\/\?@]/g,RK=/[#\?:]/g,OK=/[#\?]/g,MK=/[#\?@]/g,PK=/#/g;function zw(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function np(n){n.g||(n.g=new sv,n.h=0,n.i&&function AK(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var r=n[e].indexOf("="),i=null;if(0<=r){var o=n[e].substring(0,r);i=n[e].substring(r+1)}else o=n[e];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function iV(n,t){np(n),t=ov(n,t),gm(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,gm((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&TO(n)))}function sV(n,t){return np(n),t=ov(n,t),gm(n.g.h,t)}function oV(n,t,e){iV(n,t),0<e.length&&(n.i=null,n.g.set(ov(n,t),qR(e)),n.h+=e.length)}function ov(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}(pt=zw.prototype).add=function(n,t){np(this),this.i=null,n=ov(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},pt.forEach=function(n,t){np(this),this.g.forEach(function(e,r){bB(e,function(i){n.call(t,i,r,this)},this)},this)},pt.T=function(){np(this);for(var n=this.g.R(),t=this.g.T(),e=[],r=0;r<t.length;r++)for(var i=n[r],o=0;o<i.length;o++)e.push(t[r]);return e},pt.R=function(n){np(this);var t=[];if("string"==typeof n)sV(this,n)&&(t=wB(t,this.g.get(ov(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=wB(t,n[e])}return t},pt.set=function(n,t){return np(this),this.i=null,sV(this,n=ov(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},pt.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},pt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var r=t[e],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var c=i;""!==r[o]&&(c+="="+encodeURIComponent(String(r[o]))),n.push(c)}}return this.i=n.join("&")};var LK=class{constructor(n,t){this.h=n,this.g=t}};function aV(n){this.l=n||UK,n=Wt.PerformanceNavigationTiming?0<(n=Wt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Wt.g&&Wt.g.Ea&&Wt.g.Ea()&&Wt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var UK=10;function lV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function cV(n){return n.h?1:n.g?n.g.size:0}function EO(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function DO(n,t){n.g?n.g.add(t):n.h=t}function uV(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function dV(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return qR(n.i)}function SO(){}function BK(){this.g=new SO}function VK(n,t,e){const r=e||"";try{CO(n,function(i,o){let c=i;Pw(i)&&(c=cO(i)),t.push(r+o+"="+encodeURIComponent(c))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function AS(n,t,e,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function Ww(n){this.l=n.$b||null,this.j=n.ib||!1}function NS(n,t){es.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=IO,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}aV.prototype.cancel=function(){if(this.i=dV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},SO.prototype.stringify=function(n){return Wt.JSON.stringify(n,void 0)},SO.prototype.parse=function(n){return Wt.JSON.parse(n,void 0)},ms(Ww,gO),Ww.prototype.g=function(){return new NS(this.l,this.j)},Ww.prototype.i=function(n){return function(){return n}}({}),ms(NS,es);var IO=0;function hV(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Kw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Yw(n)}function Yw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(pt=NS.prototype).open=function(n,t){if(this.readyState!=IO)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,Yw(this)},pt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Wt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},pt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kw(this)),this.readyState=IO},pt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Yw(this)),this.g&&(this.readyState=3,Yw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Wt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hV(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},pt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Kw(this):Yw(this),3==this.readyState&&hV(this)}},pt.Ua=function(n){this.g&&(this.response=this.responseText=n,Kw(this))},pt.Ta=function(n){this.g&&(this.response=n,Kw(this))},pt.ha=function(){this.g&&Kw(this)},pt.setRequestHeader=function(n,t){this.v.append(n,t)},pt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},pt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(NS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var HK=Wt.JSON.parse;function Si(n){es.call(this),this.headers=new sv,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=fV,this.K=this.L=!1}ms(Si,es);var fV="",$K=/^https?$/i,GK=["POST","PUT"];function qK(n){return"content-type"==n.toLowerCase()}function pV(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,gV(n),xS(n)}function gV(n){n.D||(n.D=!0,_s(n,"complete"),_s(n,"error"))}function mV(n){if(n.h&&typeof $R<"u"&&(!n.C[1]||4!=ph(n)||2!=n.ba()))if(n.v&&4==ph(n))pO(n.Fa,0,n);else if(_s(n,"readystatechange"),4==ph(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var r;if(r=0===d){var i=String(n.H).match(tV)[1]||null;if(!i&&Wt.self&&Wt.self.location){var o=Wt.self.location.protocol;i=o.substr(0,o.length-1)}r=!$K.test(i?i.toLowerCase():"")}e=r}if(e)_s(n,"complete"),_s(n,"success");else{n.m=6;try{var c=2<ph(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",gV(n)}}finally{xS(n)}}}function xS(n,t){if(n.g){_V(n);const e=n.g,r=n.C[0]?uS:null;n.g=null,n.C=null,t||_s(n,"ready");try{e.onreadystatechange=r}catch{}}}function _V(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Wt.clearTimeout(n.A),n.A=null)}function ph(n){return n.g?n.g.readyState:0}function yV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case fV:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function AO(n,t,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=function zK(n){let t="";return WR(n,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Ir(n,t,e))}function Jw(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function vV(n){this.za=0,this.l=[],this.h=new yS,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Jw("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Jw("baseRetryDelayMs",5e3,n),this.$a=Jw("retryDelaySeedMs",1e4,n),this.Ya=Jw("forwardChannelMaxRetries",2,n),this.ra=Jw("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new aV(n&&n.concurrentRequestLimit),this.Ca=new BK,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function NO(n){if(bV(n),3==n.G){var t=n.V++,e=fh(n.F);Ir(e,"SID",n.J),Ir(e,"RID",t),Ir(e,"TYPE","terminate"),Qw(n,e),(t=new Hw(n,n.h,t,void 0)).K=2,t.v=IS(fh(e)),e=!1,Wt.navigator&&Wt.navigator.sendBeacon&&(e=Wt.navigator.sendBeacon(t.v.toString(),"")),!e&&Wt.Image&&((new Image).src=t.v,e=!0),e||(t.g=NV(t.l,null),t.g.ea(t.v)),t.F=Date.now(),$w(t)}IV(n)}function kS(n){n.g&&(RO(n),n.g.cancel(),n.g=null)}function bV(n){kS(n),n.u&&(Wt.clearTimeout(n.u),n.u=null),OS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Wt.clearTimeout(n.m),n.m=null)}function xO(n,t){n.l.push(new LK(n.Za++,t)),3==n.G&&RS(n)}function RS(n){lV(n.i)||n.m||(n.m=!0,uO(n.Ha,n),n.C=0)}function wV(n,t){var e;e=t?t.m:n.V++;const r=fh(n.F);Ir(r,"SID",n.J),Ir(r,"RID",e),Ir(r,"AID",n.U),Qw(n,r),n.o&&n.s&&AO(r,n.o,n.s),e=new Hw(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=CV(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),DO(n.i,e),bO(e,r,t)}function Qw(n,t){n.j&&CO({},function(e,r){Ir(t,r,e)})}function CV(n,t,e){e=Math.min(n.l.length,e);var r=n.j?gs(n.j.Oa,n.j,n):null;e:{var i=n.l;let o=-1;for(;;){const c=["count="+e];-1==o?0<e?(o=i[0].h,c.push("ofs="+o)):o=0:c.push("ofs="+o);let d=!0;for(let f=0;f<e;f++){let y=i[f].h;const w=i[f].g;if(y-=o,0>y)o=Math.max(0,i[f].h-100),d=!1;else try{VK(w,c,"req"+y+"_")}catch{r&&r(w)}}if(d){r=c.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,r}function TV(n){n.g||n.u||(n.Y=1,uO(n.Ga,n),n.A=0)}function kO(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Vw(gs(n.Ga,n),SV(n,n.A)),n.A++,0))}function RO(n){null!=n.B&&(Wt.clearTimeout(n.B),n.B=null)}function EV(n){n.g=new Hw(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=fh(n.oa);Ir(t,"RID","rpc"),Ir(t,"SID",n.J),Ir(t,"CI",n.N?"0":"1"),Ir(t,"AID",n.U),Qw(n,t),Ir(t,"TYPE","xmlhttp"),n.o&&n.s&&AO(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=IS(fh(t)),e.s=null,e.U=!0,JB(e,n)}function OS(n){null!=n.v&&(Wt.clearTimeout(n.v),n.v=null)}function DV(n,t){var e=null;if(n.g==t){OS(n),RO(n),n.g=null;var r=2}else{if(!EO(n.i,t))return;e=t.D,uV(n.i,t),r=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==r){e=t.s?t.s.length:0,t=Date.now()-t.F;var i=n.C;_s(r=vS(),new qB(r,e,t,i)),RS(n)}else TV(n);else if(3==(i=t.o)||0==i&&0<n.I||!(1==r&&function WK(n,t){return!(cV(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Vw(gs(n.Ha,n,t),SV(n,n.C)),n.C++,0)))}(n,t)||2==r&&kO(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),i){case 1:_m(n,5);break;case 4:_m(n,10);break;case 3:_m(n,6);break;default:_m(n,2)}}function SV(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function _m(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var r=gs(n.jb,n);e||(e=new mm("//www.google.com/images/cleardot.gif"),Wt.location&&"http"==Wt.location.protocol||ES(e,"https"),IS(e)),function jK(n,t){const e=new yS;if(Wt.Image){const r=new Image;r.onload=dS(AS,e,r,"TestLoadImage: loaded",!0,t),r.onerror=dS(AS,e,r,"TestLoadImage: error",!1,t),r.onabort=dS(AS,e,r,"TestLoadImage: abort",!1,t),r.ontimeout=dS(AS,e,r,"TestLoadImage: timeout",!1,t),Wt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else t(!1)}(e.toString(),r)}else co(2);n.G=0,n.j&&n.j.va(t),IV(n),bV(n)}function IV(n){n.G=0,n.I=-1,n.j&&((0!=dV(n.i).length||0!=n.l.length)&&(n.i.i.length=0,qR(n.l),n.l.length=0),n.j.ua())}function AV(n,t,e){let r=function NK(n){return n instanceof mm?fh(n):new mm(n,void 0)}(e);if(""!=r.i)t&&DS(r,t+"."+r.i),SS(r,r.m);else{const i=Wt.location;r=function xK(n,t,e,r){var i=new mm(null,void 0);return n&&ES(i,n),t&&DS(i,t),e&&SS(i,e),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,e)}return n.aa&&WR(n.aa,function(i,o){Ir(r,o,i)}),e=n.sa,(t=n.D)&&e&&Ir(r,t,e),Ir(r,"VER",n.ma),Qw(n,r),r}function NV(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Si(e&&n.Ba&&!n.qa?new Ww({ib:!0}):n.qa)).L=n.H,t}function xV(){}function MS(){if(rv&&!(10<=Number(aK)))throw Error("Environmental error: no available transport.")}function Sa(n,t){es.call(this),this.g=new vV(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!hS(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!hS(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new av(this)}function kV(n){mO.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function RV(){_O.call(this),this.status=1}function av(n){this.g=n}(pt=Si.prototype).ea=function(n,t,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():yO.g(),this.C=function WB(n){return n.h||(n.h=n.i())}(this.u?this.u:yO),this.g.onreadystatechange=gs(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(o){return void pV(this,o)}n=e||"";const i=new sv(this.headers);r&&CO(r,function(o,c){i.set(c,o)}),r=function tK(n){e:{var t=qK;const e=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<e;i++)if(i in r&&t.call(void 0,r[i],i,n)){t=i;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(i.T()),e=Wt.FormData&&n instanceof Wt.FormData,!(0<=vB(GK,t))||r||e||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,c){this.g.setRequestHeader(c,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_V(this),0<this.B&&((this.K=function ZK(n){return rv&&function oK(){return function nK(n){var t=sK;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=CB(String(fS)).split("."),e=CB("9").split("."),r=Math.max(t.length,e.length);for(let c=0;0==n&&c<r;c++){var i=t[c]||"",o=e[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=zR(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||zR(0==i[2].length,0==o[2].length)||zR(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gs(this.pa,this)):this.A=pO(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){pV(this,o)}},pt.pa=function(){typeof $R<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_s(this,"timeout"),this.abort(8))},pt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,_s(this,"complete"),_s(this,"abort"),xS(this))},pt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xS(this,!0)),Si.Z.M.call(this)},pt.Fa=function(){this.s||(this.F||this.v||this.l?mV(this):this.cb())},pt.cb=function(){mV(this)},pt.ba=function(){try{return 2<ph(this)?this.g.status:-1}catch{return-1}},pt.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},pt.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),HK(t)}},pt.Da=function(){return this.m},pt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(pt=vV.prototype).ma=8,pt.G=1,pt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},pt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Hw(this,this.h,n,void 0);let o=this.s;if(this.P&&(o?(o=DB(o),IB(o,this.P)):o=this.P),null===this.o&&(i.H=o),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var r=this.l[e];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=CV(this,i,t),Ir(e=fh(this.F),"RID",n),Ir(e,"CVER",22),this.D&&Ir(e,"X-HTTP-Session-Id",this.D),Qw(this,e),this.o&&o&&AO(e,this.o,o),DO(this.i,i),this.Ra&&Ir(e,"TYPE","init"),this.ja?(Ir(e,"$req",t),Ir(e,"SID","null"),i.$=!0,bO(i,e,null)):bO(i,e,t),this.G=2}}else 3==this.G&&(n?wV(this,n):0==this.l.length||lV(this.i)||wV(this))},pt.Ga=function(){if(this.u=null,EV(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Vw(gs(this.bb,this),n)}},pt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,co(10),kS(this),EV(this))},pt.ab=function(){null!=this.v&&(this.v=null,kS(this),kO(this),co(19))},pt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),co(2)):(this.h.info("Failed to ping google.com"),co(1))},(pt=xV.prototype).xa=function(){},pt.wa=function(){},pt.va=function(){},pt.ua=function(){},pt.Oa=function(){},MS.prototype.g=function(n,t){return new Sa(n,t)},ms(Sa,es),Sa.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),uO(gs(n.hb,n,t))),co(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=AV(n,null,n.W),RS(n)},Sa.prototype.close=function(){NO(this.g)},Sa.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,xO(this.g,t)}else this.v?((t={}).__data__=cO(n),xO(this.g,t)):xO(this.g,n)},Sa.prototype.M=function(){this.g.j=null,delete this.j,NO(this.g),delete this.g,Sa.Z.M.call(this)},ms(kV,mO),ms(RV,_O),ms(av,xV),av.prototype.xa=function(){_s(this.g,"a")},av.prototype.wa=function(n){_s(this.g,new kV(n))},av.prototype.va=function(n){_s(this.g,new RV(n))},av.prototype.ua=function(){_s(this.g,"b")},MS.prototype.createWebChannel=MS.prototype.g,Sa.prototype.send=Sa.prototype.u,Sa.prototype.open=Sa.prototype.m,Sa.prototype.close=Sa.prototype.close,bS.NO_ERROR=0,bS.TIMEOUT=8,bS.HTTP_ERROR=6,zB.COMPLETE="complete",KB.EventType=jw,jw.OPEN="a",jw.CLOSE="b",jw.ERROR="c",jw.MESSAGE="d",es.prototype.listen=es.prototype.N,Si.prototype.listenOnce=Si.prototype.O,Si.prototype.getLastError=Si.prototype.La,Si.prototype.getLastErrorCode=Si.prototype.Da,Si.prototype.getStatus=Si.prototype.ba,Si.prototype.getResponseJson=Si.prototype.Qa,Si.prototype.getResponseText=Si.prototype.ga,Si.prototype.send=Si.prototype.ea;var KK=hh.createWebChannelTransport=function(){return new MS},YK=hh.getStatEventTarget=function(){return vS()},OO=hh.ErrorCode=bS,JK=hh.EventType=zB,QK=hh.Event=fm,OV=hh.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},XK=hh.FetchXmlHttpFactory=Ww,PS=hh.WebChannel=KB,e7=hh.XhrIo=Si;const MV="@firebase/firestore";class ts{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ts.UNAUTHENTICATED=new ts(null),ts.GOOGLE_CREDENTIALS=new ts("google-credentials-uid"),ts.FIRST_PARTY=new ts("first-party-uid"),ts.MOCK_USER=new ts("mock-user");let lv="9.9.2";const rp=new Ec.Yd("@firebase/firestore");function MO(){return rp.logLevel}function qe(n,...t){if(rp.logLevel<=Ec.in.DEBUG){const e=t.map(PO);rp.debug(`Firestore (${lv}): ${n}`,...e)}}function _i(n,...t){if(rp.logLevel<=Ec.in.ERROR){const e=t.map(PO);rp.error(`Firestore (${lv}): ${n}`,...e)}}function ym(n,...t){if(rp.logLevel<=Ec.in.WARN){const e=t.map(PO);rp.warn(`Firestore (${lv}): ${n}`,...e)}}function PO(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function gt(n="Unexpected state"){const t=`FIRESTORE (${lv}) INTERNAL ASSERTION FAILED: `+n;throw _i(t),new Error(t)}function Gt(n,t){n||gt()}function at(n,t){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends F.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ns{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class PV{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class r7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(ts.UNAUTHENTICATED))}shutdown(){}}class i7{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class s7{constructor(t){this.t=t,this.currentUser=ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var r=this;let i=this.i;const o=y=>this.i!==i?(i=this.i,e(y)):Promise.resolve();let c=new ns;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ns,t.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const y=c;t.enqueueRetryable((0,Te.Z)(function*(){yield y.promise,yield o(r.currentUser)}))},f=y=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>f(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?f(y):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ns)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Gt("string"==typeof r.accessToken),new PV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Gt(null===t||"string"==typeof t),new ts(t)}}class o7{constructor(t,e,r){this.type="FirstParty",this.user=ts.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class a7{constructor(t,e,r){this.h=t,this.l=e,this.m=r}getToken(){return Promise.resolve(new o7(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(ts.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FV{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class l7{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const r=o=>{null!=o.error&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.p;return this.p=o.token,qe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const i=o=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?i(o):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Gt("string"==typeof e.token),this.p=e.token,new FV(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function c7(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}class LV{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=c7(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<e&&(r+=t.charAt(i[o]%t.length))}return r}}function Kt(n,t){return n<t?-1:n>t?1:0}function cv(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function UV(n){return n+"\0"}class Ar{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ve(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ve(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ve(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ve(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ar.fromMillis(Date.now())}static fromDate(t){return Ar.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*e));return new Ar(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Kt(this.nanoseconds,t.nanoseconds):Kt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class $t{constructor(t){this.timestamp=t}static fromTimestamp(t){return new $t(t)}static min(){return new $t(new Ar(0,0))}static max(){return new $t(new Ar(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xw{constructor(t,e,r){void 0===e?e=0:e>t.length&&gt(),void 0===r?r=t.length-e:r>t.length-e&&gt(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return 0===Xw.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Xw?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const o=t.get(i),c=e.get(i);if(o<c)return-1;if(o>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class vn extends Xw{construct(t,e,r){return new vn(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ve(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new vn(e)}static emptyPath(){return new vn([])}}const u7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jr extends Xw{construct(t,e,r){return new Jr(t,e,r)}static isValidIdentifier(t){return u7.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jr.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Jr(["__name__"])}static fromServerFormat(t){const e=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Ve(ge.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;i<t.length;){const d=t[i];if("\\"===d){if(i+1===t.length)throw new Ve(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Ve(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=f,i+=2}else"`"===d?(c=!c,i++):"."!==d||c?(r+=d,i++):(o(),i++)}if(o(),c)throw new Ve(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Jr(e)}static emptyPath(){return new Jr([])}}class it{constructor(t){this.path=t}static fromPath(t){return new it(vn.fromString(t))}static fromName(t){return new it(vn.fromString(t).popFirst(5))}static empty(){return new it(vn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===vn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return vn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new it(new vn(t.slice()))}}class FS{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function FO(n){return n.fields.find(t=>2===t.kind)}function vm(n){return n.fields.filter(t=>2!==t.kind)}FS.UNKNOWN_ID=-1;class LS{constructor(t,e){this.fieldPath=t,this.kind=e}}class eC{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new eC(0,Ia.min())}}function BV(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=$t.fromTimestamp(1e9===r?new Ar(e+1,0):new Ar(e,r));return new Ia(i,it.empty(),t)}function VV(n){return new Ia(n.readTime,n.key,-1)}class Ia{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Ia($t.min(),it.empty(),-1)}static max(){return new Ia($t.max(),it.empty(),-1)}}function LO(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=it.comparator(n.documentKey,t.documentKey),0!==e?e:Kt(n.largestBatchId,t.largestBatchId))}const jV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function ip(n){return UO.apply(this,arguments)}function UO(){return UO=(0,Te.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==jV)throw n;qe("LocalStore","Unexpectedly lost primary lease")}),UO.apply(this,arguments)}class de{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new de((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(e,o).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof de?e:de.resolve(e)}catch(e){return de.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):de.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):de.reject(e)}static resolve(t){return new de((e,r)=>{e(t)})}static reject(t){return new de((e,r)=>{r(t)})}static waitFor(t){return new de((e,r)=>{let i=0,o=0,c=!1;t.forEach(d=>{++i,d.next(()=>{++o,c&&o===i&&e()},f=>r(f))}),c=!0,o===i&&e()})}static or(t){let e=de.resolve(!1);for(const r of t)e=e.next(i=>i?de.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,o)=>{r.push(e.call(this,i,o))}),this.waitFor(r)}static mapArray(t,e){return new de((r,i)=>{const o=t.length,c=new Array(o);let d=0;for(let f=0;f<o;f++){const y=f;e(t[y]).next(w=>{c[y]=w,++d,d===o&&r(c)},w=>i(w))}})}static doWhile(t,e){return new de((r,i)=>{const o=()=>{!0===t()?e().next(()=>{o()},i):r()};o()})}}class US{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.T=new ns,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{e.error?this.T.reject(new tC(t,e.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=BO(r.target.error);this.T.reject(new tC(t,i))}}static open(t,e,r,i){try{return new US(e,t.transaction(i,r))}catch(o){throw new tC(e,o)}}get A(){return this.T.promise}abort(t){t&&this.T.reject(t),this.aborted||(qe("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new p7(e)}}class Dc{constructor(t,e,r){this.name=t,this.version=e,this.P=r,12.2===Dc.v((0,F.z$)())&&_i("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return qe("SimpleDb","Removing database:",t),bm(window.indexedDB.deleteDatabase(t)).toPromise()}static V(){if(!(0,F.hl)())return!1;if(Dc.S())return!0;const t=(0,F.z$)(),e=Dc.v(t),r=0<e&&e<10,i=Dc.D(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)}static S(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.C)}static N(t,e){return t.store(e)}static v(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(t){var e=this;return(0,Te.Z)(function*(){return e.db||(qe("SimpleDb","Opening database:",e.name),e.db=yield new Promise((r,i)=>{const o=indexedDB.open(e.name,e.version);o.onsuccess=c=>{r(c.target.result)},o.onblocked=()=>{i(new tC(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=c=>{const d=c.target.error;i("VersionError"===d.name?new Ve(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ve(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new tC(t,d))},o.onupgradeneeded=c=>{qe("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.P.M(c.target.result,o.transaction,c.oldVersion,e.version).next(()=>{qe("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.O&&(e.db.onversionchange=r=>e.O(r)),e.db})()}F(t){this.O=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,r,i){var o=this;return(0,Te.Z)(function*(){const c="readonly"===e;let d=0;for(;;){++d;try{o.db=yield o.k(t);const f=US.open(o.db,t,c?"readonly":"readwrite",r),y=i(f).next(w=>(f.R(),w)).catch(w=>(f.abort(w),de.reject(w))).toPromise();return y.catch(()=>{}),yield f.A,y}catch(f){const y=f,w="FirebaseError"!==y.name&&d<3;if(qe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",w),o.close(),!w)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class f7{constructor(t){this.$=t,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(t){this.$=t}done(){this.B=!0}q(t){this.L=t}delete(){return bm(this.$.delete())}}class tC extends Ve{constructor(t,e){super(ge.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function sp(n){return"IndexedDbTransactionError"===n.name}class p7{constructor(t){this.store=t}put(t,e){let r;return void 0!==e?(qe("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):(qe("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),bm(r)}add(t){return qe("SimpleDb","ADD",this.store.name,t,t),bm(this.store.add(t))}get(t){return bm(this.store.get(t)).next(e=>(void 0===e&&(e=null),qe("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return qe("SimpleDb","DELETE",this.store.name,t),bm(this.store.delete(t))}count(){return qe("SimpleDb","COUNT",this.store.name),bm(this.store.count())}K(t,e){const r=this.options(t,e);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.G(i,(c,d)=>{o.push(d)}).next(()=>o)}{const i=this.store.getAll(r.range);return new de((o,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{o(d.target.result)}})}}j(t,e){const r=this.store.getAll(t,null===e?void 0:e);return new de((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}W(t,e){qe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,e);r.H=!1;const i=this.cursor(r);return this.G(i,(o,c,d)=>d.delete())}J(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.G(i,e)}Y(t){const e=this.cursor({});return new de((r,i)=>{e.onerror=o=>{const c=BO(o.target.error);i(c)},e.onsuccess=o=>{const c=o.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}G(t,e){const r=[];return new de((i,o)=>{t.onerror=c=>{o(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void i();const f=new f7(d),y=e(d.primaryKey,d.value,f);if(y instanceof de){const w=y.catch(E=>(f.done(),de.reject(E)));r.push(w)}f.isDone?i():null===f.U?d.continue():d.continue(f.U)}}).next(()=>de.waitFor(r))}options(t,e){let r;return void 0!==t&&("string"==typeof t?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.H?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function bm(n){return new de((t,e)=>{n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{const i=BO(r.target.error);e(i)}})}let $V=!1;function BO(n){const t=Dc.v((0,F.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new Ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $V||($V=!0,setTimeout(()=>{throw r},0)),r}}return n}class g7{constructor(t,e){this.asyncQueue=t,this.X=e,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(t){var e=this;qe("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,Te.Z)(function*(){e.task=null;try{qe("IndexBackiller",`Documents written: ${yield e.X.tt()}`)}catch(r){sp(r)?qe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ip(r)}yield e.Z(1)}))}}class m7{constructor(t,e){this.localStore=t,this.persistence=e}tt(t=50){var e=this;return(0,Te.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>e.et(r,t))})()}et(t,e){const r=new Set;let i=e,o=!0;return de.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(c=>{if(null!==c&&!r.has(c))return qe("IndexBackiller",`Processing collection: ${c}`),this.nt(t,c,i).next(d=>{i-=d,r.add(c)});o=!1})).next(()=>e-i)}nt(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(i=>this.localStore.localDocuments.getNextDocuments(t,e,i,r).next(o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next(()=>this.st(i,o)).next(d=>(qe("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(t,e,d))).next(()=>c.size)}))}st(t,e){let r=t;return e.changes.forEach((i,o)=>{const c=VV(o);LO(c,r)>0&&(r=c)}),new Ia(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}class Bo{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.it(r),this.rt=r=>e.writeSequenceNumber(r))}it(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.rt&&this.rt(t),t}}function GV(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function wm(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function ZV(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}Bo.ot=-1;class Qr{constructor(t,e){this.comparator=t,this.root=e||ys.EMPTY}insert(t,e){return new Qr(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ys.BLACK,null,null))}remove(t){return new Qr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ys.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(0===i)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new BS(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new BS(this.root,t,this.comparator,!1)}getReverseIterator(){return new BS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new BS(this.root,t,this.comparator,!0)}}class BS{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?r(t.key,e):1,e&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ys{constructor(t,e,r,i,o){this.key=t,this.value=e,this.color=r??ys.RED,this.left=i??ys.EMPTY,this.right=o??ys.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,o){return new ys(t??this.key,e??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const o=r(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,e,r),null):0===o?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ys.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return ys.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ys.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ys.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const t=this.left.check();if(t!==this.right.check())throw gt();return t+(this.isRed()?0:1)}}ys.EMPTY=null,ys.RED=!0,ys.BLACK=!1,ys.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(n,t,e,r,i){return this}insert(n,t,e){return new ys(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zn{constructor(t){this.comparator=t,this.data=new Qr(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new qV(this.data.getIterator())}getIteratorFrom(t){return new qV(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Zn)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Zn(this.comparator);return e.data=t,e}}class qV{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function uv(n){return n.hasNext()?n.getNext():void 0}class Aa{constructor(t){this.fields=t,t.sort(Jr.comparator)}static empty(){return new Aa([])}unionWith(t){let e=new Zn(Jr.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Aa(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return cv(this.fields,t.fields,(e,r)=>e.isEqual(r))}}class $i{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new $i(e)}static fromUint8Array(t){const e=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(t);return new $i(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Kt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}$i.EMPTY_BYTE_STRING=new $i("");const y7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function op(n){if(Gt(!!n),"string"==typeof n){let t=0;const e=y7.exec(n);if(Gt(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Xr(n.seconds),nanos:Xr(n.nanos)}}function Xr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Cm(n){return"string"==typeof n?$i.fromBase64String(n):$i.fromUint8Array(n)}function VO(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=n?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function zV(n){const t=n.mapValue.fields.__previous_value__;return VO(t)?zV(t):t}function nC(n){const t=op(n.mapValue.fields.__local_write_time__.timestampValue);return new Ar(t.seconds,t.nanos)}class v7{constructor(t,e,r,i,o,c,d,f){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=f}}class gh{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new gh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof gh&&t.projectId===this.projectId&&t.database===this.database}}function rC(n){return null==n}function iC(n){return 0===n&&1/n==-1/0}function WV(n){return"number"==typeof n&&Number.isInteger(n)&&!iC(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ap={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},VS={nullValue:"NULL_VALUE"};function Tm(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?VO(n)?4:QV(n)?9007199254740991:10:gt()}function Lu(n,t){if(n===t)return!0;const e=Tm(n);if(e!==Tm(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return nC(n).isEqual(nC(t));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=op(r.timestampValue),c=op(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return i=t,Cm(n.bytesValue).isEqual(Cm(i.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,i){return Xr(r.geoPointValue.latitude)===Xr(i.geoPointValue.latitude)&&Xr(r.geoPointValue.longitude)===Xr(i.geoPointValue.longitude)}(n,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Xr(r.integerValue)===Xr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Xr(r.doubleValue),c=Xr(i.doubleValue);return o===c?iC(o)===iC(c):isNaN(o)&&isNaN(c)}return!1}(n,t);case 9:return cv(n.arrayValue.values||[],t.arrayValue.values||[],Lu);case 10:return function(r,i){const o=r.mapValue.fields||{},c=i.mapValue.fields||{};if(GV(o)!==GV(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(void 0===c[d]||!Lu(o[d],c[d])))return!1;return!0}(n,t);default:return gt()}var i}function sC(n,t){return void 0!==(n.values||[]).find(e=>Lu(e,t))}function lp(n,t){if(n===t)return 0;const e=Tm(n),r=Tm(t);if(e!==r)return Kt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,t.booleanValue);case 2:return function(i,o){const c=Xr(i.integerValue||i.doubleValue),d=Xr(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,t);case 3:return KV(n.timestampValue,t.timestampValue);case 4:return KV(nC(n),nC(t));case 5:return Kt(n.stringValue,t.stringValue);case 6:return function(i,o){const c=Cm(i),d=Cm(o);return c.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(i,o){const c=i.split("/"),d=o.split("/");for(let f=0;f<c.length&&f<d.length;f++){const y=Kt(c[f],d[f]);if(0!==y)return y}return Kt(c.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,o){const c=Kt(Xr(i.latitude),Xr(o.latitude));return 0!==c?c:Kt(Xr(i.longitude),Xr(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(i,o){const c=i.values||[],d=o.values||[];for(let f=0;f<c.length&&f<d.length;++f){const y=lp(c[f],d[f]);if(y)return y}return Kt(c.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===ap.mapValue&&o===ap.mapValue)return 0;if(i===ap.mapValue)return 1;if(o===ap.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),f=o.fields||{},y=Object.keys(f);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const E=Kt(d[w],y[w]);if(0!==E)return E;const A=lp(c[d[w]],f[y[w]]);if(0!==A)return A}return Kt(d.length,y.length)}(n.mapValue,t.mapValue);default:throw gt()}}function KV(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Kt(n,t);const e=op(n),r=op(t),i=Kt(e.seconds,r.seconds);return 0!==i?i:Kt(e.nanos,r.nanos)}function dv(n){return jO(n)}function jO(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=op(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Cm(n.bytesValue).toBase64():"referenceValue"in n?it.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const c of r.values||[])o?o=!1:i+=",",i+=jO(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",c=!0;for(const d of i)c?c=!1:o+=",",o+=`${d}:${jO(r.fields[d])}`;return o+"}"}(n.mapValue):gt();var t}function Em(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function HO(n){return!!n&&"integerValue"in n}function oC(n){return!!n&&"arrayValue"in n}function YV(n){return!!n&&"nullValue"in n}function JV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jS(n){return!!n&&"mapValue"in n}function aC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return wm(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=aC(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=aC(n.arrayValue.values[e]);return t}return Object.assign({},n)}function QV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function b7(n){return"nullValue"in n?VS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Em(gh.empty(),it.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function w7(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Em(gh.empty(),it.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ap:gt()}function XV(n,t){const e=lp(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function e3(n,t){const e=lp(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class vs{constructor(t){this.value=t}static empty(){return new vs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!jS(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=aC(e)}setAll(t){let e=Jr.emptyPath(),r={},i=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const f=this.getFieldsMap(e);this.applyChanges(f,r,i),r={},i=[],e=d.popLast()}c?r[d.lastSegment()]=aC(c):i.push(d.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,r,i)}delete(t){const e=this.field(t.popLast());jS(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Lu(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];jS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){wm(e,(i,o)=>t[i]=o);for(const i of r)delete t[i]}clone(){return new vs(aC(this.value))}}function t3(n){const t=[];return wm(n.fields,(e,r)=>{const i=new Jr([e]);if(jS(r)){const o=t3(r.mapValue).fields;if(0===o.length)t.push(i);else for(const c of o)t.push(i.child(c))}else t.push(i)}),new Aa(t)}class nr{constructor(t,e,r,i,o,c){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.data=o,this.documentState=c}static newInvalidDocument(t){return new nr(t,0,$t.min(),$t.min(),vs.empty(),0)}static newFoundDocument(t,e,r){return new nr(t,1,e,$t.min(),r,0)}static newNoDocument(t,e){return new nr(t,2,e,$t.min(),vs.empty(),0)}static newUnknownDocument(t,e){return new nr(t,3,e,$t.min(),vs.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=vs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=vs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$t.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof nr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new nr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class C7{constructor(t,e=null,r=[],i=[],o=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=d,this.ut=null}}function n3(n,t=null,e=[],r=[],i=null,o=null,c=null){return new C7(n,t,e,r,i,o,c)}function Dm(n){const t=at(n);if(null===t.ut){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+dv(i.value);var i}).join(","),e+="|ob:",e+=t.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),rC(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>dv(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>dv(r)).join(",")),t.ut=e}return t.ut}function lC(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!k7(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((e=n.filters[i]).op!==(r=t.filters[i]).op||!e.field.isEqual(r.field)||!Lu(e.value,r.value))return!1;var e,r;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!l3(n.startAt,t.startAt)&&l3(n.endAt,t.endAt)}function HS(n){return it.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function $S(n,t){return n.filters.filter(e=>e instanceof bs&&e.field.isEqual(t))}function r3(n,t,e){let r=VS,i=!0;for(const o of $S(n,t)){let c=VS,d=!0;switch(o.op){case"<":case"<=":c=b7(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,d=!1;break;case"!=":case"not-in":c=VS}XV({value:r,inclusive:i},{value:c,inclusive:d})<0&&(r=c,i=d)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];XV({value:r,inclusive:i},{value:c,inclusive:e.inclusive})<0&&(r=c,i=e.inclusive);break}return{value:r,inclusive:i}}function s3(n,t,e){let r=ap,i=!0;for(const o of $S(n,t)){let c=ap,d=!0;switch(o.op){case">=":case">":c=w7(o.value),d=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,d=!1;break;case"!=":case"not-in":c=ap}e3({value:r,inclusive:i},{value:c,inclusive:d})>0&&(r=c,i=d)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];e3({value:r,inclusive:i},{value:c,inclusive:e.inclusive})>0&&(r=c,i=e.inclusive);break}return{value:r,inclusive:i}}class bs extends class{}{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?"in"===e||"not-in"===e?this.ct(t,e,r):new E7(t,e,r):"array-contains"===e?new I7(t,r):"in"===e?new A7(t,r):"not-in"===e?new N7(t,r):"array-contains-any"===e?new x7(t,r):new bs(t,e,r)}static ct(t,e,r){return"in"===e?new D7(t,r):new S7(t,r)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.at(lp(e,this.value)):null!==e&&Tm(this.value)===Tm(e)&&this.at(lp(e,this.value))}at(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return gt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class E7 extends bs{constructor(t,e,r){super(t,e,r),this.key=it.fromName(r.referenceValue)}matches(t){const e=it.comparator(t.key,this.key);return this.at(e)}}class D7 extends bs{constructor(t,e){super(t,"in",e),this.keys=o3(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class S7 extends bs{constructor(t,e){super(t,"not-in",e),this.keys=o3(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function o3(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(r=>it.fromName(r.referenceValue))}class I7 extends bs{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return oC(e)&&sC(e.arrayValue,this.value)}}class A7 extends bs{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&sC(this.value.arrayValue,e)}}class N7 extends bs{constructor(t,e){super(t,"not-in",e)}matches(t){if(sC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!sC(this.value.arrayValue,e)}}class x7 extends bs{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!oC(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>sC(this.value.arrayValue,r))}}class cp{constructor(t,e){this.position=t,this.inclusive=e}}class hv{constructor(t,e="asc"){this.field=t,this.dir=e}}function k7(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function a3(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const o=t[i],c=n.position[i];if(r=o.field.isKeyField()?it.comparator(it.fromName(c.referenceValue),e.key):lp(c,e.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function l3(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Lu(n.position[e],t.position[e]))return!1;return!0}class mh{constructor(t,e=null,r=[],i=[],o=null,c="F",d=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=d,this.endAt=f,this.lt=null,this.ft=null}}function c3(n,t,e,r,i,o,c,d){return new mh(n,t,e,r,i,o,c,d)}function fv(n){return new mh(n)}function u3(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function $O(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function GO(n){for(const t of n.filters)if(t.ht())return t.field;return null}function ZO(n){return null!==n.collectionGroup}function pv(n){const t=at(n);if(null===t.lt){t.lt=[];const e=GO(t),r=$O(t);if(null!==e&&null===r)e.isKeyField()||t.lt.push(new hv(e)),t.lt.push(new hv(Jr.keyField(),"asc"));else{let i=!1;for(const o of t.explicitOrderBy)t.lt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new hv(Jr.keyField(),o))}}}return t.lt}function Vo(n){const t=at(n);if(!t.ft)if("F"===t.limitType)t.ft=n3(t.path,t.collectionGroup,pv(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const o of pv(t))e.push(new hv(o.field,"desc"===o.dir?"asc":"desc"));const r=t.endAt?new cp(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new cp(t.startAt.position,t.startAt.inclusive):null;t.ft=n3(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}return t.ft}function GS(n,t,e){return new mh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function cC(n,t){return lC(Vo(n),Vo(t))&&n.limitType===t.limitType}function d3(n){return`${Dm(Vo(n))}|lt:${n.limitType}`}function qO(n){return`Query(target=${function T7(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(r=e).field.canonicalString()} ${r.op} ${dv(r.value)}`;var r}).join(", ")}]`),rC(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(r=e).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>dv(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>dv(e)).join(",")),`Target(${t})`}(Vo(n))}; limitType=${n.limitType})`}function zO(n,t){return t.isFoundDocument()&&function(e,r){const i=r.key.path;return null!==e.collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(i):it.isDocumentKey(e.path)?e.path.isEqual(i):e.path.isImmediateParentOf(i)}(n,t)&&function(e,r){for(const i of e.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,t)&&function(e,r){for(const i of e.filters)if(!i.matches(r))return!1;return!0}(n,t)&&(r=t,!((e=n).startAt&&!function(i,o,c){const d=a3(i,o,c);return i.inclusive?d<=0:d<0}(e.startAt,pv(e),r)||e.endAt&&!function(i,o,c){const d=a3(i,o,c);return i.inclusive?d>=0:d>0}(e.endAt,pv(e),r)));var e,r}function h3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function f3(n){return(t,e)=>{let r=!1;for(const i of pv(n)){const o=R7(i,t,e);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function R7(n,t,e){const r=n.field.isKeyField()?it.comparator(t.key,e.key):function(i,o,c){const d=o.data.field(i),f=c.data.field(i);return null!==d&&null!==f?lp(d,f):gt()}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return gt()}}function p3(n,t){if(n.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iC(t)?"-0":t}}function g3(n){return{integerValue:""+n}}function m3(n,t){return WV(t)?g3(t):p3(n,t)}class ZS{constructor(){this._=void 0}}function O7(n,t,e){return n instanceof gv?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(e,t):n instanceof Sm?y3(n,t):n instanceof Im?v3(n,t):function(r,i){const o=_3(r,i),c=b3(o)+b3(r._t);return HO(o)&&HO(r._t)?g3(c):p3(r.wt,c)}(n,t)}function M7(n,t,e){return n instanceof Sm?y3(n,t):n instanceof Im?v3(n,t):e}function _3(n,t){return n instanceof mv?HO(e=t)||(r=e)&&"doubleValue"in r?t:{integerValue:0}:null;var r,e}class gv extends ZS{}class Sm extends ZS{constructor(t){super(),this.elements=t}}function y3(n,t){const e=w3(t);for(const r of n.elements)e.some(i=>Lu(i,r))||e.push(r);return{arrayValue:{values:e}}}class Im extends ZS{constructor(t){super(),this.elements=t}}function v3(n,t){let e=w3(t);for(const r of n.elements)e=e.filter(i=>!Lu(i,r));return{arrayValue:{values:e}}}class mv extends ZS{constructor(t,e){super(),this.wt=t,this._t=e}}function b3(n){return Xr(n.integerValue||n.doubleValue)}function w3(n){return oC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class uC{constructor(t,e){this.field=t,this.transform=e}}class F7{constructor(t,e){this.version=t,this.transformResults=e}}class Vr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Vr}static exists(t){return new Vr(void 0,t)}static updateTime(t){return new Vr(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function qS(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class zS{}function C3(n,t){if(!n.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return n.isNoDocument()?new yv(n.key,Vr.none()):new _v(n.key,n.data,Vr.none());{const e=n.data,r=vs.empty();let i=new Zn(Jr.comparator);for(let o of t.fields)if(!i.has(o)){let c=e.field(o);null===c&&o.length>1&&(o=o.popLast(),c=e.field(o)),null===c?r.delete(o):r.set(o,c),i=i.add(o)}return new _h(n.key,r,new Aa(i.toArray()),Vr.none())}}function L7(n,t,e){n instanceof _v?function(r,i,o){const c=r.value.clone(),d=D3(r.fieldTransforms,i,o.transformResults);c.setAll(d),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,t,e):n instanceof _h?function(r,i,o){if(!qS(r.precondition,i))return void i.convertToUnknownDocument(o.version);const c=D3(r.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(E3(r)),d.setAll(c),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function dC(n,t,e,r){return n instanceof _v?function(i,o,c,d){if(!qS(i.precondition,o))return c;const f=i.value.clone(),y=S3(i.fieldTransforms,d,o);return f.setAll(y),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null}(n,t,e,r):n instanceof _h?function(i,o,c,d){if(!qS(i.precondition,o))return c;const f=S3(i.fieldTransforms,d,o),y=o.data;return y.setAll(E3(i)),y.setAll(f),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(w=>w.field))}(n,t,e,r):(c=e,qS(n.precondition,o=t)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c);var o,c}function U7(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),o=_3(r.transform,i||null);null!=o&&(null===e&&(e=vs.empty()),e.set(r.field,o))}return e||null}function T3(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===r||e&&r&&cv(e,r,(i,o)=>function P7(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(e=n.transform)instanceof Sm&&r instanceof Sm||e instanceof Im&&r instanceof Im?cv(e.elements,r.elements,Lu):e instanceof mv&&r instanceof mv?Lu(e._t,r._t):e instanceof gv&&r instanceof gv);var e,r}(i,o))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,r}class _v extends zS{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class _h extends zS{constructor(t,e,r,i,o=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function E3(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function D3(n,t,e){const r=new Map;Gt(n.length===e.length);for(let i=0;i<e.length;i++){const o=n[i],c=o.transform,d=t.data.field(o.field);r.set(o.field,M7(c,d,e[i]))}return r}function S3(n,t,e){const r=new Map;for(const i of n){const o=i.transform,c=e.data.field(i.field);r.set(i.field,O7(o,c,t))}return r}class yv extends zS{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WO extends zS{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class B7{constructor(t){this.count=t}}var Ii,bn;function I3(n){switch(n){default:return gt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function A3(n){if(void 0===n)return _i("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Ii.OK:return ge.OK;case Ii.CANCELLED:return ge.CANCELLED;case Ii.UNKNOWN:return ge.UNKNOWN;case Ii.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Ii.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Ii.INTERNAL:return ge.INTERNAL;case Ii.UNAVAILABLE:return ge.UNAVAILABLE;case Ii.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Ii.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Ii.NOT_FOUND:return ge.NOT_FOUND;case Ii.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Ii.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Ii.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Ii.ABORTED:return ge.ABORTED;case Ii.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Ii.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Ii.DATA_LOSS:return ge.DATA_LOSS;default:return gt()}}(bn=Ii||(Ii={}))[bn.OK=0]="OK",bn[bn.CANCELLED=1]="CANCELLED",bn[bn.UNKNOWN=2]="UNKNOWN",bn[bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bn[bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bn[bn.NOT_FOUND=5]="NOT_FOUND",bn[bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",bn[bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",bn[bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",bn[bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bn[bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bn[bn.ABORTED=10]="ABORTED",bn[bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",bn[bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",bn[bn.INTERNAL=13]="INTERNAL",bn[bn.UNAVAILABLE=14]="UNAVAILABLE",bn[bn.DATA_LOSS=15]="DATA_LOSS";class up{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,t))return o}has(t){return void 0!==this.get(t)}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(void 0===i)return this.inner[r]=[[t,e]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return 1===r.length?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){wm(this.inner,(e,r)=>{for(const[i,o]of r)t(i,o)})}isEmpty(){return ZV(this.inner)}size(){return this.innerSize}}const V7=new Qr(it.comparator);function jo(){return V7}const N3=new Qr(it.comparator);function hC(...n){let t=N3;for(const e of n)t=t.insert(e.key,e);return t}function x3(n){let t=N3;return n.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function Uu(){return fC()}function k3(){return fC()}function fC(){return new up(n=>n.toString(),(n,t)=>n.isEqual(t))}const j7=new Qr(it.comparator),H7=new Zn(it.comparator);function Xt(...n){let t=H7;for(const e of n)t=t.add(e);return t}const $7=new Zn(Kt);function WS(){return $7}class pC{constructor(t,e,r,i,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e){const r=new Map;return r.set(t,gC.createSynthesizedTargetChangeForCurrentChange(t,e)),new pC($t.min(),r,WS(),jo(),Xt())}}class gC{constructor(t,e,r,i,o){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e){return new gC($i.EMPTY_BYTE_STRING,e,Xt(),Xt(),Xt())}}class KS{constructor(t,e,r,i){this.gt=t,this.removedTargetIds=e,this.key=r,this.yt=i}}class R3{constructor(t,e){this.targetId=t,this.It=e}}class O3{constructor(t,e,r=$i.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class M3{constructor(){this.Tt=0,this.Et=F3(),this.At=$i.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(t){t.approximateByteSize()>0&&(this.bt=!0,this.At=t)}St(){let t=Xt(),e=Xt(),r=Xt();return this.Et.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:gt()}}),new gC(this.At,this.Rt,t,e,r)}Dt(){this.bt=!1,this.Et=F3()}Ct(t,e){this.bt=!0,this.Et=this.Et.insert(t,e)}xt(t){this.bt=!0,this.Et=this.Et.remove(t)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class G7{constructor(t){this.Ot=t,this.Ft=new Map,this.$t=jo(),this.Bt=P3(),this.Lt=new Zn(Kt)}Ut(t){for(const e of t.gt)t.yt&&t.yt.isFoundDocument()?this.qt(e,t.yt):this.Kt(e,t.key,t.yt);for(const e of t.removedTargetIds)this.Kt(e,t.key,t.yt)}Gt(t){this.forEachTarget(t,e=>{const r=this.Qt(e);switch(t.state){case 0:this.jt(e)&&r.Vt(t.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(t.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(e);break;case 3:this.jt(e)&&(r.Mt(),r.Vt(t.resumeToken));break;case 4:this.jt(e)&&(this.Wt(e),r.Vt(t.resumeToken));break;default:gt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Ft.forEach((r,i)=>{this.jt(i)&&e(i)})}zt(t){const e=t.targetId,r=t.It.count,i=this.Ht(e);if(i){const o=i.target;if(HS(o))if(0===r){const c=new it(o.path);this.Kt(e,c,nr.newNoDocument(c,$t.min()))}else Gt(1===r);else this.Jt(e)!==r&&(this.Wt(e),this.Lt=this.Lt.add(e))}}Yt(t){const e=new Map;this.Ft.forEach((o,c)=>{const d=this.Ht(c);if(d){if(o.current&&HS(d.target)){const f=new it(d.target.path);null!==this.$t.get(f)||this.Xt(c,f)||this.Kt(c,f,nr.newNoDocument(f,t))}o.vt&&(e.set(c,o.St()),o.Dt())}});let r=Xt();this.Bt.forEach((o,c)=>{let d=!0;c.forEachWhile(f=>{const y=this.Ht(f);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(o))}),this.$t.forEach((o,c)=>c.setReadTime(t));const i=new pC(t,e,this.Lt,this.$t,r);return this.$t=jo(),this.Bt=P3(),this.Lt=new Zn(Kt),i}qt(t,e){if(!this.jt(t))return;const r=this.Xt(t,e.key)?2:0;this.Qt(t).Ct(e.key,r),this.$t=this.$t.insert(e.key,e),this.Bt=this.Bt.insert(e.key,this.Zt(e.key).add(t))}Kt(t,e,r){if(!this.jt(t))return;const i=this.Qt(t);this.Xt(t,e)?i.Ct(e,1):i.xt(e),this.Bt=this.Bt.insert(e,this.Zt(e).delete(t)),r&&(this.$t=this.$t.insert(e,r))}removeTarget(t){this.Ft.delete(t)}Jt(t){const e=this.Qt(t).St();return this.Ot.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Nt(t){this.Qt(t).Nt()}Qt(t){let e=this.Ft.get(t);return e||(e=new M3,this.Ft.set(t,e)),e}Zt(t){let e=this.Bt.get(t);return e||(e=new Zn(Kt),this.Bt=this.Bt.insert(t,e)),e}jt(t){const e=null!==this.Ht(t);return e||qe("WatchChangeAggregator","Detected inactive target",t),e}Ht(t){const e=this.Ft.get(t);return e&&e.Pt?null:this.Ot.te(t)}Wt(t){this.Ft.set(t,new M3),this.Ot.getRemoteKeysForTarget(t).forEach(e=>{this.Kt(t,e,null)})}Xt(t,e){return this.Ot.getRemoteKeysForTarget(t).has(e)}}function P3(){return new Qr(it.comparator)}function F3(){return new Qr(it.comparator)}const Z7={asc:"ASCENDING",desc:"DESCENDING"},q7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class z7{constructor(t,e){this.databaseId=t,this.dt=e}}function mC(n,t){return n.dt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function L3(n,t){return n.dt?t.toBase64():t.toUint8Array()}function W7(n,t){return mC(n,t.toTimestamp())}function rs(n){return Gt(!!n),$t.fromTimestamp(function(t){const e=op(t);return new Ar(e.seconds,e.nanos)}(n))}function KO(n,t){return(e=n,new vn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function U3(n){const t=vn.fromString(n);return Gt(z3(t)),t}function _C(n,t){return KO(n.databaseId,t.path)}function Bu(n,t){const e=U3(t);if(e.get(1)!==n.databaseId.projectId)throw new Ve(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ve(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new it(V3(e))}function YO(n,t){return KO(n.databaseId,t)}function B3(n){const t=U3(n);return 4===t.length?vn.emptyPath():V3(t)}function yC(n){return new vn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function V3(n){return Gt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function j3(n,t,e){return{name:_C(n,t),fields:e.value.mapValue.fields}}function H3(n,t,e){const r=Bu(n,t.name),i=rs(t.updateTime),o=new vs({mapValue:{fields:t.fields}}),c=nr.newFoundDocument(r,i,o);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function vC(n,t){let e;if(t instanceof _v)e={update:j3(n,t.key,t.value)};else if(t instanceof yv)e={delete:_C(n,t.key)};else if(t instanceof _h)e={update:j3(n,t.key,t.data),updateMask:r9(t.fieldMask)};else{if(!(t instanceof WO))return gt();e={verify:_C(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof gv)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Sm)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Im)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof mv)return{fieldPath:o.field.canonicalString(),increment:c._t};throw gt()}(0,r))),t.precondition.isNone||(e.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:W7(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:gt()),e;var i}function JO(n,t){const e=t.currentDocument?void 0!==(i=t.currentDocument).updateTime?Vr.updateTime(rs(i.updateTime)):void 0!==i.exists?Vr.exists(i.exists):Vr.none():Vr.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(o,c){let d=null;"setToServerValue"in c?(Gt("REQUEST_TIME"===c.setToServerValue),d=new gv):"appendMissingElements"in c?d=new Sm(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new Im(c.removeAllFromArray.values||[]):"increment"in c?d=new mv(o,c.increment):gt();const f=Jr.fromServerFormat(c.fieldPath);return new uC(f,d)}(n,i)):[];var i;if(t.update){const i=Bu(n,t.update.name),o=new vs({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new Aa((t.updateMask.fieldPaths||[]).map(y=>Jr.fromServerFormat(y)));return new _h(i,o,c,e,r)}return new _v(i,o,e,r)}if(t.delete){const i=Bu(n,t.delete);return new yv(i,e)}if(t.verify){const i=Bu(n,t.verify);return new WO(i,e)}return gt()}function $3(n,t){return{documents:[YO(n,t.path)]}}function G3(n,t){const e={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(e.parent=YO(n,r),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=YO(n,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0===f.length)return;const y=f.map(w=>function(E){if("=="===E.op){if(JV(E.value))return{unaryFilter:{field:vv(E.field),op:"IS_NAN"}};if(YV(E.value))return{unaryFilter:{field:vv(E.field),op:"IS_NULL"}}}else if("!="===E.op){if(JV(E.value))return{unaryFilter:{field:vv(E.field),op:"IS_NOT_NAN"}};if(YV(E.value))return{unaryFilter:{field:vv(E.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vv(E.field),op:e9(E.op),value:E.value}}}(w));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(t.filters);i&&(e.structuredQuery.where=i);const o=function(f){if(0!==f.length)return f.map(y=>{return{field:vv((w=y).field),direction:X7(w.dir)};var w})}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const c=(y=t.limit,n.dt||rC(y)?y:{value:y});var y,d,f;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(f=t.endAt).inclusive,values:f.position}),e}function Z3(n){let t=B3(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Gt(1===r);const w=e.from[0];w.allDescendants?i=w.collectionId:t=t.child(w.collectionId)}let o=[];e.where&&(o=q3(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(w=>{return new hv(bv((E=w).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let d=null;e.limit&&(d=function(w){let E;return E="object"==typeof w?w.value:w,rC(E)?null:E}(e.limit));let f=null;var w;e.startAt&&(f=new cp((w=e.startAt).values||[],!!w.before));let y=null;return e.endAt&&(y=function(w){return new cp(w.values||[],!w.before)}(e.endAt)),c3(t,i,c,o,d,"F",f,y)}function q3(n){return n?void 0!==n.unaryFilter?[n9(n)]:void 0!==n.fieldFilter?[t9(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>q3(t)).reduce((t,e)=>t.concat(e)):gt():[]}function X7(n){return Z7[n]}function e9(n){return q7[n]}function vv(n){return{fieldPath:n.canonicalString()}}function bv(n){return Jr.fromServerFormat(n.fieldPath)}function t9(n){return bs.create(bv(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(n.fieldFilter.op),n.fieldFilter.value)}function n9(n){switch(n.unaryFilter.op){case"IS_NAN":const t=bv(n.unaryFilter.field);return bs.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=bv(n.unaryFilter.field);return bs.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=bv(n.unaryFilter.field);return bs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=bv(n.unaryFilter.field);return bs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}function r9(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function z3(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function uo(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=W3(t)),t=i9(n.get(e),t);return W3(t)}function i9(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=o}}return e}function W3(n){return n+"\x01\x01"}function Vu(n){const t=n.length;if(Gt(t>=2),2===t)return Gt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),vn.emptyPath();const e=t-2,r=[];let i="";for(let o=0;o<t;){const c=n.indexOf("\x01",o);switch((c<0||c>e)&&gt(),n.charAt(c+1)){case"\x01":const d=n.substring(o,c);let f;0===i.length?f=d:(i+=d,f=i,i=""),r.push(f);break;case"\x10":i+=n.substring(o,c),i+="\0";break;case"\x11":i+=n.substring(o,c+1);break;default:gt()}o=c+2}return new vn(r)}const K3=["userId","batchId"];function YS(n,t){return[n,uo(t)]}function Y3(n,t,e){return[n,uo(t),e]}const s9={},o9=["prefixPath","collectionGroup","readTime","documentId"],a9=["prefixPath","collectionGroup","documentId"],l9=["collectionGroup","readTime","prefixPath","documentId"],c9=["canonicalId","targetId"],u9=["targetId","path"],d9=["path","targetId"],h9=["collectionId","parent"],f9=["indexId","uid"],p9=["uid","sequenceNumber"],g9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],m9=["indexId","uid","orderedDocumentKey"],_9=["userId","collectionPath","documentId"],y9=["userId","collectionPath","largestBatchId"],v9=["userId","collectionGroup","largestBatchId"],J3=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],b9=[...J3,"documentOverlays"],Q3=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],X3=Q3,w9=[...X3,"indexConfiguration","indexState","indexEntries"];class QO extends HV{constructor(t,e){super(),this.ee=t,this.currentSequenceNumber=e}}function is(n,t){const e=at(n);return Dc.N(e.ee,t)}class XO{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&L7(o,t,r[i])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=dC(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=dC(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=k3();return this.mutations.forEach(i=>{const o=t.get(i.key),c=o.overlayedDocument;let d=this.applyToLocalView(c,o.mutatedFields);d=e.has(i.key)?null:d;const f=C3(c,d);null!==f&&r.set(i.key,f),c.isValidDocument()||c.convertToNoDocument($t.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Xt())}isEqual(t){return this.batchId===t.batchId&&cv(this.mutations,t.mutations,(e,r)=>T3(e,r))&&cv(this.baseMutations,t.baseMutations,(e,r)=>T3(e,r))}}class eM{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Gt(t.mutations.length===r.length);let i=j7;const o=t.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new eM(t,e,r,i)}}class tM{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class dp{constructor(t,e,r,i,o=$t.min(),c=$t.min(),d=$i.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(t){return new dp(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new dp(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new dp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class ej{constructor(t){this.ne=t}}function tj(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:JS(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document={name:_C(i=n.ne,(o=t).key),fields:o.data.value.mapValue.fields,updateTime:mC(i,o.version.toTimestamp())};else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Am(t.version)};else{if(!t.isUnknownDocument())return gt();r.unknownDocument={path:e.path.toArray(),version:Am(t.version)}}var i,o;return r}function JS(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Am(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Nm(n){const t=new Ar(n.seconds,n.nanoseconds);return $t.fromTimestamp(t)}function xm(n,t){const e=(t.baseMutations||[]).map(o=>JO(n.ne,o));for(let o=0;o<t.mutations.length-1;++o)o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform&&(t.mutations[o].updateTransforms=t.mutations[o+1].transform.fieldTransforms,t.mutations.splice(o+1,1),++o);const r=t.mutations.map(o=>JO(n.ne,o)),i=Ar.fromMillis(t.localWriteTimeMs);return new XO(t.batchId,i,e,r)}function bC(n){const t=Nm(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Nm(n.lastLimboFreeSnapshotVersion):$t.min();let r;var i;return void 0!==n.query.documents?(Gt(1===(i=n.query).documents.length),r=Vo(fv(B3(i.documents[0])))):r=Vo(Z3(n.query)),new dp(r,n.targetId,0,n.lastListenSequenceNumber,t,e,$i.fromBase64String(n.resumeToken))}function nj(n,t){const e=Am(t.snapshotVersion),r=Am(t.lastLimboFreeSnapshotVersion);let i;i=HS(t.target)?$3(n.ne,t.target):G3(n.ne,t.target);const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Dm(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function nM(n){const t=Z3({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?GS(t,t.limit,"L"):t}function rM(n,t){return new tM(t.largestBatchId,JO(n.ne,t.overlayMutation))}function rj(n,t){const e=t.path.lastSegment();return[n,uo(t.path.popLast()),e]}function ij(n,t,e,r){return{indexId:n,uid:t.uid||"",sequenceNumber:e,readTime:Am(r.readTime),documentKey:uo(r.documentKey.path),largestBatchId:r.largestBatchId}}class T9{getBundleMetadata(t,e){return sj(t).get(e).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Nm(i.createTime),version:i.version};var i})}saveBundleMetadata(t,e){return sj(t).put({bundleId:(r=e).id,createTime:Am(rs(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return oj(t).get(e).next(r=>{if(r)return{name:(i=r).name,query:nM(i.bundledQuery),readTime:Nm(i.readTime)};var i})}saveNamedQuery(t,e){return oj(t).put({name:(r=e).name,readTime:Am(rs(r.readTime)),bundledQuery:r.bundledQuery});var r}}function sj(n){return is(n,"bundles")}function oj(n){return is(n,"namedQueries")}class QS{constructor(t,e){this.wt=t,this.userId=e}static se(t,e){return new QS(t,e.uid||"")}getOverlay(t,e){return wC(t).get(rj(this.userId,e)).next(r=>r?rM(this.wt,r):null)}getOverlays(t,e){const r=Uu();return de.forEach(e,i=>this.getOverlay(t,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(t,e,r){const i=[];return r.forEach((o,c)=>{const d=new tM(e,c);i.push(this.ie(t,d))}),de.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(c=>i.add(uo(c.getCollectionPath())));const o=[];return i.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(wC(t).W("collectionPathOverlayIndex",d))}),de.waitFor(o)}getOverlaysForCollection(t,e,r){const i=Uu(),o=uo(e),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return wC(t).K("collectionPathOverlayIndex",c).next(d=>{for(const f of d){const y=rM(this.wt,f);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const o=Uu();let c;const d=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return wC(t).J({index:"collectionGroupOverlayIndex",range:d},(f,y,w)=>{const E=rM(this.wt,y);o.size()<i||E.largestBatchId===c?(o.set(E.getKey(),E),c=E.largestBatchId):w.done()}).next(()=>o)}ie(t,e){return wC(t).put(function(r,i,o){const[c,d,f]=rj(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:f,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:vC(r.ne,o.mutation)}}(this.wt,this.userId,e))}}function wC(n){return is(n,"documentOverlays")}class km{constructor(){}re(t,e){this.oe(t,e),e.ue()}oe(t,e){if("nullValue"in t)this.ce(e,5);else if("booleanValue"in t)this.ce(e,10),e.ae(t.booleanValue?1:0);else if("integerValue"in t)this.ce(e,15),e.ae(Xr(t.integerValue));else if("doubleValue"in t){const r=Xr(t.doubleValue);isNaN(r)?this.ce(e,13):(this.ce(e,15),iC(r)?e.ae(0):e.ae(r))}else if("timestampValue"in t){const r=t.timestampValue;this.ce(e,20),"string"==typeof r?e.he(r):(e.he(`${r.seconds||""}`),e.ae(r.nanos||0))}else if("stringValue"in t)this.le(t.stringValue,e),this.fe(e);else if("bytesValue"in t)this.ce(e,30),e.de(Cm(t.bytesValue)),this.fe(e);else if("referenceValue"in t)this._e(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.ce(e,45),e.ae(r.latitude||0),e.ae(r.longitude||0)}else"mapValue"in t?QV(t)?this.ce(e,Number.MAX_SAFE_INTEGER):(this.we(t.mapValue,e),this.fe(e)):"arrayValue"in t?(this.me(t.arrayValue,e),this.fe(e)):gt()}le(t,e){this.ce(e,25),this.ge(t,e)}ge(t,e){e.he(t)}we(t,e){const r=t.fields||{};this.ce(e,55);for(const i of Object.keys(r))this.le(i,e),this.oe(r[i],e)}me(t,e){const r=t.values||[];this.ce(e,50);for(const i of r)this.oe(i,e)}_e(t,e){this.ce(e,37),it.fromName(t).path.forEach(r=>{this.ce(e,60),this.ge(r,e)})}ce(t,e){t.ae(e)}fe(t){t.ae(2)}}function E9(n){if(0===n)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function aj(n){const t=64-function(e){let r=0;for(let i=0;i<8;++i){const o=E9(255&e[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(t/8)}km.ye=new km;class D9{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Ie(r.value),r=e.next();this.Te()}Ee(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Ae(r.value),r=e.next();this.Re()}be(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=e.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=e.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(t){const e=this.Ve(t),r=aj(e);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}De(t){const e=this.Ve(t),r=aj(e);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(t){this.Se(t.length),this.buffer.set(t,this.position),this.position+=t.length}Me(){return this.buffer.slice(0,this.position)}Ve(t){const e=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(t),r=0!=(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}Ie(t){const e=255&t;0===e?(this.xe(0),this.xe(255)):255===e?(this.xe(255),this.xe(0)):this.xe(e)}Ae(t){const e=255&t;0===e?(this.ke(0),this.ke(255)):255===e?(this.ke(255),this.ke(0)):this.ke(t)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(t){this.Se(1),this.buffer[this.position++]=t}ke(t){this.Se(1),this.buffer[this.position++]=~t}Se(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class S9{constructor(t){this.Oe=t}de(t){this.Oe.pe(t)}he(t){this.Oe.be(t)}ae(t){this.Oe.ve(t)}ue(){this.Oe.Ce()}}class I9{constructor(t){this.Oe=t}de(t){this.Oe.Ee(t)}he(t){this.Oe.Pe(t)}ae(t){this.Oe.De(t)}ue(){this.Oe.Ne()}}class CC{constructor(){this.Oe=new D9,this.Fe=new S9(this.Oe),this.$e=new I9(this.Oe)}seed(t){this.Oe.seed(t)}Be(t){return 0===t?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class Rm{constructor(t,e,r,i){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=i}Le(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new Rm(this.indexId,this.documentKey,this.arrayValue,r)}}function Om(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=lj(n.arrayValue,t.arrayValue),0!==e?e:(e=lj(n.directionalValue,t.directionalValue),0!==e?e:it.comparator(n.documentKey,t.documentKey)))}function lj(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(0!==r)return r}return n.length-t.length}class A9{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];for(const e of t.filters){const r=e;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(t){const e=FO(t);if(void 0!==e&&!this.Qe(e))return!1;const r=vm(t);let i=0,o=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const c=r[i];if(!this.je(this.Ke,c)||!this.We(this.Ue[o++],c))return!1;++i}for(;i<r.length;++i)if(o>=this.Ue.length||!this.We(this.Ue[o++],r[i]))return!1;return!0}Qe(t){for(const e of this.qe)if(this.je(e,t))return!0;return!1}je(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}We(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class N9{constructor(){this.ze=new iM}addToCollectionParentIndex(t,e){return this.ze.add(e),de.resolve()}getCollectionParents(t,e){return de.resolve(this.ze.getEntries(e))}addFieldIndex(t,e){return de.resolve()}deleteFieldIndex(t,e){return de.resolve()}getDocumentsMatchingTarget(t,e){return de.resolve(null)}getIndexType(t,e){return de.resolve(0)}getFieldIndexes(t,e){return de.resolve([])}getNextCollectionGroupToUpdate(t){return de.resolve(null)}getMinOffset(t,e){return de.resolve(Ia.min())}getMinOffsetFromCollectionGroup(t,e){return de.resolve(Ia.min())}updateCollectionGroup(t,e,r){return de.resolve()}updateIndexEntries(t,e){return de.resolve()}}class iM{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new Zn(vn.comparator),o=!i.has(r);return this.index[e]=i.add(r),o}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Zn(vn.comparator)).toArray()}}const XS=new Uint8Array(0);class x9{constructor(t,e){this.user=t,this.databaseId=e,this.He=new iM,this.Je=new up(r=>Dm(r),(r,i)=>lC(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.He.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.He.add(e)});const o={collectionId:r,parent:uo(i)};return cj(t).put(o)}return de.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[UV(e),""],!1,!0);return cj(t).K(i).next(o=>{for(const c of o){if(c.collectionId!==e)break;r.push(Vu(c.parent))}return r})}addFieldIndex(t,e){const r=eI(t),i={indexId:(c=e).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;delete i.indexId;const o=r.add(i);if(e.indexState){const c=EC(t);return o.next(d=>{c.put(ij(d,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return o.next()}deleteFieldIndex(t,e){const r=eI(t),i=EC(t),o=TC(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const r=TC(t);let i=!0;const o=new Map;return de.forEach(this.Ye(e),c=>this.Xe(t,c).next(d=>{i&&(i=!!d),o.set(c,d)})).next(()=>{if(i){let c=Xt();const d=[];return de.forEach(o,(f,y)=>{var w;qe("IndexedDbIndexManager",`Using index ${w=f,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(Ie=>`${Ie.fieldPath}:${Ie.kind}`).join(",")}`} to execute ${Dm(e)}`);const E=function(Ie,me){const Pe=FO(me);if(void 0===Pe)return null;for(const He of $S(Ie,Pe.fieldPath))switch(He.op){case"array-contains-any":return He.value.arrayValue.values||[];case"array-contains":return[He.value]}return null}(y,f),A=function(Ie,me){const Pe=new Map;for(const He of vm(me))for(const ct of $S(Ie,He.fieldPath))switch(ct.op){case"==":case"in":Pe.set(He.fieldPath.canonicalString(),ct.value);break;case"not-in":case"!=":return Pe.set(He.fieldPath.canonicalString(),ct.value),Array.from(Pe.values())}return null}(y,f),k=function(Ie,me){const Pe=[];let He=!0;for(const ct of vm(me)){const Bt=0===ct.kind?r3(Ie,ct.fieldPath,Ie.startAt):s3(Ie,ct.fieldPath,Ie.startAt);Pe.push(Bt.value),He&&(He=Bt.inclusive)}return new cp(Pe,He)}(y,f),M=function(Ie,me){const Pe=[];let He=!0;for(const ct of vm(me)){const Bt=0===ct.kind?s3(Ie,ct.fieldPath,Ie.endAt):r3(Ie,ct.fieldPath,Ie.endAt);Pe.push(Bt.value),He&&(He=Bt.inclusive)}return new cp(Pe,He)}(y,f),V=this.Ze(f,y,k),W=this.Ze(f,y,M),ne=this.tn(f,y,A),he=this.en(f.indexId,E,V,k.inclusive,W,M.inclusive,ne);return de.forEach(he,Ie=>r.j(Ie,e.limit).next(me=>{me.forEach(Pe=>{const He=it.fromSegments(Pe.documentKey);c.has(He)||(c=c.add(He),d.push(He))})}))}).next(()=>d)}return de.resolve(null)})}Ye(t){let e=this.Je.get(t);return e||(e=[t],this.Je.set(t,e),e)}en(t,e,r,i,o,c,d){const f=(null!=e?e.length:1)*Math.max(r.length,o.length),y=f/(null!=e?e.length:1),w=[];for(let E=0;E<f;++E){const A=e?this.nn(e[E/y]):XS,k=this.sn(t,A,r[E%y],i),M=this.rn(t,A,o[E%y],c),V=d.map(W=>this.sn(t,A,W,!0));w.push(...this.createRange(k,M,V))}return w}sn(t,e,r,i){const o=new Rm(t,it.empty(),e,r);return i?o:o.Le()}rn(t,e,r,i){const o=new Rm(t,it.empty(),e,r);return i?o.Le():o}Xe(t,e){const r=new A9(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(o=>{let c=null;for(const d of o)r.Ge(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let r=2;return de.forEach(this.Ye(e),i=>this.Xe(t,i).next(o=>{o?0!==r&&o.fields.length<function(c){let d=new Zn(Jr.comparator),f=!1;for(const y of c.filters){const w=y;w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?f=!0:d=d.add(w.field))}for(const y of c.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(f?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(t,e){const r=new CC;for(const i of vm(t)){const o=e.data.field(i.fieldPath);if(null==o)return null;const c=r.Be(i.kind);km.ye.re(o,c)}return r.Me()}nn(t){const e=new CC;return km.ye.re(t,e.Be(0)),e.Me()}un(t,e){const r=new CC;return km.ye.re(Em(this.databaseId,e),r.Be(function(i){const o=vm(i);return 0===o.length?0:o[o.length-1].kind}(t))),r.Me()}tn(t,e,r){if(null===r)return[];let i=[];i.push(new CC);let o=0;for(const c of vm(t)){const d=r[o++];for(const f of i)if(this.cn(e,c.fieldPath)&&oC(d))i=this.an(i,c,d);else{const y=f.Be(c.kind);km.ye.re(d,y)}}return this.hn(i)}Ze(t,e,r){return this.tn(t,e,r.position)}hn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].Me();return e}an(t,e,r){const i=[...t],o=[];for(const c of r.arrayValue.values||[])for(const d of i){const f=new CC;f.seed(d.Me()),km.ye.re(c,f.Be(e.kind)),o.push(f)}return o}cn(t,e){return!!t.filters.find(r=>r instanceof bs&&r.field.isEqual(e)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(t,e){const r=eI(t),i=EC(t);return(e?r.K("collectionGroupIndex",IDBKeyRange.bound(e,e)):r.K()).next(o=>{const c=[];return de.forEach(o,d=>i.get([d.indexId,this.uid]).next(f=>{c.push(function(y,w){const E=w?new eC(w.sequenceNumber,new Ia(Nm(w.readTime),new it(Vu(w.documentKey)),w.largestBatchId)):eC.empty(),A=y.fields.map(([k,M])=>new LS(Jr.fromServerFormat(k),M));return new FS(y.indexId,y.collectionGroup,A,E)}(d,f))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Kt(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=eI(t),o=EC(t);return this.ln(t).next(c=>i.K("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>de.forEach(d,f=>o.put(ij(f.indexId,this.user,c,r)))))}updateIndexEntries(t,e){const r=new Map;return de.forEach(e,(i,o)=>{const c=r.get(i.collectionGroup);return(c?de.resolve(c):this.getFieldIndexes(t,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),de.forEach(d,f=>this.fn(t,i,f).next(y=>{const w=this.dn(o,f);return y.isEqual(w)?de.resolve():this._n(t,o,f,y,w)}))))})}wn(t,e,r,i){return TC(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,e.key),documentKey:e.key.path.toArray()})}mn(t,e,r,i){return TC(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,e.key),e.key.path.toArray()])}fn(t,e,r){const i=TC(t);let o=new Zn(Om);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,e)])},(c,d)=>{o=o.add(new Rm(r.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>o)}dn(t,e){let r=new Zn(Om);const i=this.on(e,t);if(null==i)return r;const o=FO(e);if(null!=o){const c=t.data.field(o.fieldPath);if(oC(c))for(const d of c.arrayValue.values||[])r=r.add(new Rm(e.indexId,t.key,this.nn(d),i))}else r=r.add(new Rm(e.indexId,t.key,XS,i));return r}_n(t,e,r,i,o){qe("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(d,f,y,w,E){const A=d.getIterator(),k=f.getIterator();let M=uv(A),V=uv(k);for(;M||V;){let W=!1,ne=!1;if(M&&V){const he=y(M,V);he<0?ne=!0:he>0&&(W=!0)}else null!=M?ne=!0:W=!0;W?(w(V),V=uv(k)):ne?(E(M),M=uv(A)):(M=uv(A),V=uv(k))}}(i,o,Om,d=>{c.push(this.wn(t,e,r,d))},d=>{c.push(this.mn(t,e,r,d))}),de.waitFor(c)}ln(t){let e=1;return EC(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((c,d)=>Om(c,d)).filter((c,d,f)=>!d||0!==Om(c,f[d-1]));const i=[];i.push(t);for(const c of r){const d=Om(c,t),f=Om(c,e);if(0===d)i[0]=t.Le();else if(d>0&&f<0)i.push(c),i.push(c.Le());else if(f>0)break}i.push(e);const o=[];for(let c=0;c<i.length;c+=2)o.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,XS,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,XS,[]]));return o}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(uj)}getMinOffset(t,e){return de.mapArray(this.Ye(e),r=>this.Xe(t,r).next(i=>i||gt())).next(uj)}}function cj(n){return is(n,"collectionParents")}function TC(n){return is(n,"indexEntries")}function eI(n){return is(n,"indexConfiguration")}function EC(n){return is(n,"indexState")}function uj(n){Gt(0!==n.length);let t=n[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;LO(i,t)<0&&(t=i),e<i.largestBatchId&&(e=i.largestBatchId)}return new Ia(t.readTime,t.documentKey,e)}const dj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ho{constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new Ho(t,Ho.DEFAULT_COLLECTION_PERCENTILE,Ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function hj(n,t,e){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],c=IDBKeyRange.only(e.batchId);let d=0;const f=r.J({range:c},(w,E,A)=>(d++,A.delete()));o.push(f.next(()=>{Gt(1===d)}));const y=[];for(const w of e.mutations){const E=Y3(t,w.key.path,e.batchId);o.push(i.delete(E)),y.push(w.key)}return de.waitFor(o).next(()=>y)}function tI(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw gt();t=n.noDocument}return JSON.stringify(t).length}Ho.DEFAULT_COLLECTION_PERCENTILE=10,Ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ho.DEFAULT=new Ho(41943040,Ho.DEFAULT_COLLECTION_PERCENTILE,Ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ho.DISABLED=new Ho(-1,0,0);class nI{constructor(t,e,r,i){this.userId=t,this.wt=e,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(t,e,r,i){Gt(""!==t.uid);const o=t.isAuthenticated()?t.uid:"";return new nI(o,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hp(t).J({index:"userMutationsIndex",range:r},(i,o,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const o=wv(t),c=hp(t);return c.add({}).next(d=>{Gt("number"==typeof d);const f=new XO(d,e,r,i),y=function(A,k,M){const V=M.baseMutations.map(ne=>vC(A.ne,ne)),W=M.mutations.map(ne=>vC(A.ne,ne));return{userId:k,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:V,mutations:W}}(this.wt,this.userId,f),w=[];let E=new Zn((A,k)=>Kt(A.canonicalString(),k.canonicalString()));for(const A of i){const k=Y3(this.userId,A.key.path,d);E=E.add(A.key.path.popLast()),w.push(c.put(y)),w.push(o.put(k,s9))}return E.forEach(A=>{w.push(this.indexManager.addToCollectionParentIndex(t,A))}),t.addOnCommittedListener(()=>{this.gn[d]=f.keys()}),de.waitFor(w).next(()=>f)})}lookupMutationBatch(t,e){return hp(t).get(e).next(r=>r?(Gt(r.userId===this.userId),xm(this.wt,r)):null)}yn(t,e){return this.gn[e]?de.resolve(this.gn[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.gn[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return hp(t).J({index:"userMutationsIndex",range:i},(c,d,f)=>{d.userId===this.userId&&(Gt(d.batchId>=r),o=xm(this.wt,d)),f.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return hp(t).J({index:"userMutationsIndex",range:e,reverse:!0},(i,o,c)=>{r=o.batchId,c.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hp(t).K("userMutationsIndex",e).next(r=>r.map(i=>xm(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=YS(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return wv(t).J({range:i},(c,d,f)=>{const[y,w,E]=c,A=Vu(w);if(y===this.userId&&e.path.isEqual(A))return hp(t).get(E).next(k=>{if(!k)throw gt();Gt(k.userId===this.userId),o.push(xm(this.wt,k))});f.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Zn(Kt);const i=[];return e.forEach(o=>{const c=YS(this.userId,o.path),d=IDBKeyRange.lowerBound(c),f=wv(t).J({range:d},(y,w,E)=>{const[A,k,M]=y,V=Vu(k);A===this.userId&&o.path.isEqual(V)?r=r.add(M):E.done()});i.push(f)}),de.waitFor(i).next(()=>this.pn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,o=YS(this.userId,r),c=IDBKeyRange.lowerBound(o);let d=new Zn(Kt);return wv(t).J({range:c},(f,y,w)=>{const[E,A,k]=f,M=Vu(A);E===this.userId&&r.isPrefixOf(M)?M.length===i&&(d=d.add(k)):w.done()}).next(()=>this.pn(t,d))}pn(t,e){const r=[],i=[];return e.forEach(o=>{i.push(hp(t).get(o).next(c=>{if(null===c)throw gt();Gt(c.userId===this.userId),r.push(xm(this.wt,c))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return hj(t.ee,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this.In(e.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}In(t){delete this.gn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return wv(t).J({range:r},(o,c,d)=>{if(o[0]===this.userId){const f=Vu(o[1]);i.push(f)}else d.done()}).next(()=>{Gt(0===i.length)})})}containsKey(t,e){return fj(t,this.userId,e)}Tn(t){return pj(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function fj(n,t,e){const r=YS(t,e.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return wv(n).J({range:o,H:!0},(d,f,y)=>{const[w,E,A]=d;w===t&&E===i&&(c=!0),y.done()}).next(()=>c)}function hp(n){return is(n,"mutations")}function wv(n){return is(n,"documentMutations")}function pj(n){return is(n,"mutationQueues")}class Mm{constructor(t){this.En=t}next(){return this.En+=2,this.En}static An(){return new Mm(0)}static Rn(){return new Mm(-1)}}class k9{constructor(t,e){this.referenceDelegate=t,this.wt=e}allocateTargetId(t){return this.bn(t).next(e=>{const r=new Mm(e.highestTargetId);return e.highestTargetId=r.next(),this.Pn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.bn(t).next(e=>$t.fromTimestamp(new Ar(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.bn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.bn(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.Pn(t,i)))}addTargetData(t,e){return this.vn(t,e).next(()=>this.bn(t).next(r=>(r.targetCount+=1,this.Vn(e,r),this.Pn(t,r))))}updateTargetData(t,e){return this.vn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Cv(t).delete(e.targetId)).next(()=>this.bn(t)).next(r=>(Gt(r.targetCount>0),r.targetCount-=1,this.Pn(t,r)))}removeTargets(t,e,r){let i=0;const o=[];return Cv(t).J((c,d)=>{const f=bC(d);f.sequenceNumber<=e&&null===r.get(f.targetId)&&(i++,o.push(this.removeTargetData(t,f)))}).next(()=>de.waitFor(o)).next(()=>i)}forEachTarget(t,e){return Cv(t).J((r,i)=>{const o=bC(i);e(o)})}bn(t){return gj(t).get("targetGlobalKey").next(e=>(Gt(null!==e),e))}Pn(t,e){return gj(t).put("targetGlobalKey",e)}vn(t,e){return Cv(t).put(nj(this.wt,e))}Vn(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.bn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=Dm(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Cv(t).J({range:i,index:"queryTargetsIndex"},(c,d,f)=>{const y=bC(d);lC(e,y.target)&&(o=y,f.done())}).next(()=>o)}addMatchingKeys(t,e,r){const i=[],o=fp(t);return e.forEach(c=>{const d=uo(c.path);i.push(o.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(t,r,c))}),de.waitFor(i)}removeMatchingKeys(t,e,r){const i=fp(t);return de.forEach(e,o=>{const c=uo(o.path);return de.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(t,r,o)])})}removeMatchingKeysForTargetId(t,e){const r=fp(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=fp(t);let o=Xt();return i.J({range:r,H:!0},(c,d,f)=>{const y=Vu(c[1]),w=new it(y);o=o.add(w)}).next(()=>o)}containsKey(t,e){const r=uo(e.path),i=IDBKeyRange.bound([r],[UV(r)],!1,!0);let o=0;return fp(t).J({index:"documentTargetsIndex",H:!0,range:i},([c,d],f,y)=>{0!==c&&(o++,y.done())}).next(()=>o>0)}te(t,e){return Cv(t).get(e).next(r=>r?bC(r):null)}}function Cv(n){return is(n,"targets")}function gj(n){return is(n,"targetGlobal")}function fp(n){return is(n,"targetDocuments")}function mj([n,t],[e,r]){const i=Kt(n,e);return 0===i?Kt(t,r):i}class R9{constructor(t){this.Sn=t,this.buffer=new Zn(mj),this.Dn=0}Cn(){return++this.Dn}xn(t){const e=[t,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();mj(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class O9{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(t){var e=this;qe("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,Te.Z)(function*(){e.Nn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(r){sp(r)?qe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ip(r)}yield e.kn(3e5)}))}}class M9{constructor(t,e){this.Mn=t,this.params=e}calculateTargetCount(t,e){return this.Mn.On(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(0===e)return de.resolve(Bo.ot);const r=new R9(e);return this.Mn.forEachTarget(t,i=>r.xn(i.sequenceNumber)).next(()=>this.Mn.Fn(t,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Mn.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Mn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(dj)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dj):this.$n(t,e))}getCacheSize(t){return this.Mn.getCacheSize(t)}$n(t,e){let r,i,o,c,d,f,y;const w=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,c=Date.now(),this.nthSequenceNumber(t,i))).next(E=>(r=E,d=Date.now(),this.removeTargets(t,r,e))).next(E=>(o=E,f=Date.now(),this.removeOrphanedDocuments(t,r))).next(E=>(y=Date.now(),MO()<=Ec.in.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-w}ms\n\tDetermined least recently used ${i} in `+(d-c)+`ms\n\tRemoved ${o} targets in `+(f-d)+`ms\n\tRemoved ${E} documents in `+(y-f)+`ms\nTotal Duration: ${y-w}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:E})))}}class P9{constructor(t,e){this.db=t,this.garbageCollector=new M9(this,e)}On(t){const e=this.Bn(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}Bn(t){let e=0;return this.Fn(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Fn(t,e){return this.Ln(t,(r,i)=>e(i))}addReference(t,e,r){return rI(t,r)}removeReference(t,e,r){return rI(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return rI(t,e)}Un(t,e){return function(r,i){let o=!1;return pj(r).Y(c=>fj(r,c,i).next(d=>(d&&(o=!0),de.resolve(!d)))).next(()=>o)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Ln(t,(c,d)=>{if(d<=e){const f=this.Un(t,c).next(y=>{if(!y)return o++,r.getEntry(t,c).next(()=>(r.removeEntry(c,$t.min()),fp(t).delete([0,uo(c.path)])))});i.push(f)}}).next(()=>de.waitFor(i)).next(()=>r.apply(t)).next(()=>o)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return rI(t,e)}Ln(t,e){const r=fp(t);let i,o=Bo.ot;return r.J({index:"documentTargetsIndex"},([c,d],{path:f,sequenceNumber:y})=>{0===c?(o!==Bo.ot&&e(new it(Vu(i)),o),o=y,i=f):o=Bo.ot}).next(()=>{o!==Bo.ot&&e(new it(Vu(i)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function rI(n,t){return fp(n).put((r=n.currentSequenceNumber,{targetId:0,path:uo(t.path),sequenceNumber:r}));var r}class _j{constructor(){this.changes=new up(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,nr.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return void 0!==r?de.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class F9{constructor(t){this.wt=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Pm(t).put(r)}removeEntry(t,e,r){return Pm(t).delete(function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],JS(o),c[c.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.qn(t,r)))}getEntry(t,e){let r=nr.newInvalidDocument(e);return Pm(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(DC(e))},(i,o)=>{r=this.Kn(e,o)}).next(()=>r)}Gn(t,e){let r={size:0,document:nr.newInvalidDocument(e)};return Pm(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(DC(e))},(i,o)=>{r={document:this.Kn(e,o),size:tI(o)}}).next(()=>r)}getEntries(t,e){let r=jo();return this.Qn(t,e,(i,o)=>{const c=this.Kn(i,o);r=r.insert(i,c)}).next(()=>r)}jn(t,e){let r=jo(),i=new Qr(it.comparator);return this.Qn(t,e,(o,c)=>{const d=this.Kn(o,c);r=r.insert(o,d),i=i.insert(o,tI(c))}).next(()=>({documents:r,Wn:i}))}Qn(t,e,r){if(e.isEmpty())return de.resolve();let i=new Zn(wj);e.forEach(f=>i=i.add(f));const o=IDBKeyRange.bound(DC(i.first()),DC(i.last())),c=i.getIterator();let d=c.getNext();return Pm(t).J({index:"documentKeyIndex",range:o},(f,y,w)=>{const E=it.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&wj(d,E)<0;)r(d,null),d=c.getNext();d&&d.isEqual(E)&&(r(d,y),d=c.hasNext()?c.getNext():null),d?w.q(DC(d)):w.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getAllFromCollection(t,e,r){const i=[e.popLast().toArray(),e.lastSegment(),JS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pm(t).K(IDBKeyRange.bound(i,o,!0)).next(c=>{let d=jo();for(const f of c){const y=this.Kn(it.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(t,e,r,i){let o=jo();const c=bj(e,r),d=bj(e,Ia.max());return Pm(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(f,y,w)=>{const E=this.Kn(it.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(E.key,E),o.size===i&&w.done()}).next(()=>o)}newChangeBuffer(t){return new L9(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return vj(t).get("remoteDocumentGlobalKey").next(e=>(Gt(!!e),e))}qn(t,e){return vj(t).put("remoteDocumentGlobalKey",e)}Kn(t,e){if(e){const r=function C9(n,t){let e;if(t.document)e=H3(n.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=it.fromSegments(t.noDocument.path),i=Nm(t.noDocument.readTime);e=nr.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return gt();{const r=it.fromSegments(t.unknownDocument.path),i=Nm(t.unknownDocument.version);e=nr.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(r){const i=new Ar(r[0],r[1]);return $t.fromTimestamp(i)}(t.readTime)),e}(this.wt,e);if(!r.isNoDocument()||!r.version.isEqual($t.min()))return r}return nr.newInvalidDocument(t)}}function yj(n){return new F9(n)}class L9 extends _j{constructor(t,e){super(),this.zn=t,this.trackRemovals=e,this.Hn=new up(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new Zn((o,c)=>Kt(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const d=this.Hn.get(o);if(e.push(this.zn.removeEntry(t,o,d.readTime)),c.isValidDocument()){const f=tj(this.zn.wt,c);i=i.add(o.path.popLast());const y=tI(f);r+=y-d.size,e.push(this.zn.addEntry(t,o,f))}else if(r-=d.size,this.trackRemovals){const f=tj(this.zn.wt,c.convertToNoDocument($t.min()));e.push(this.zn.addEntry(t,o,f))}}),i.forEach(o=>{e.push(this.zn.indexManager.addToCollectionParentIndex(t,o))}),e.push(this.zn.updateMetadata(t,r)),de.waitFor(e)}getFromCache(t,e){return this.zn.Gn(t,e).next(r=>(this.Hn.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.zn.jn(t,e).next(({documents:r,Wn:i})=>(i.forEach((o,c)=>{this.Hn.set(o,{size:c,readTime:r.get(o).readTime})}),r))}}function vj(n){return is(n,"remoteDocumentGlobal")}function Pm(n){return is(n,"remoteDocumentsV14")}function DC(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function bj(n,t){const e=t.documentKey.path.toArray();return[n,JS(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function wj(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<e.length-2&&o<r.length-2;++o)if(i=Kt(e[o],r[o]),i)return i;return i=Kt(e.length,r.length),i||(i=Kt(e[e.length-2],r[r.length-2]),i||Kt(e[e.length-1],r[r.length-1]))}class U9{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Cj{constructor(t,e,r,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(r=i,this.getBaseDocument(t,e,r))).next(i=>(null!==r&&dC(r.mutation,i,Aa.empty(),Ar.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,Xt()).next(()=>r))}getLocalViewOfDocuments(t,e,r=Xt()){const i=Uu();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,r).next(o=>{let c=hC();return o.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const r=Uu();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,Xt()))}populateOverlays(t,e,r){const i=[];return r.forEach(o=>{e.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,r,i){let o=jo();const c=fC(),d=fC();return e.forEach((f,y)=>{const w=r.get(y.key);i.has(y.key)&&(void 0===w||w.mutation instanceof _h)?o=o.insert(y.key,y):void 0!==w&&(c.set(y.key,w.mutation.getFieldMask()),dC(w.mutation,y,w.mutation.getFieldMask(),Ar.now()))}),this.recalculateAndSaveOverlays(t,o).next(f=>(f.forEach((y,w)=>c.set(y,w)),e.forEach((y,w)=>{var E;return d.set(y,new U9(w,null!==(E=c.get(y))&&void 0!==E?E:null))}),d))}recalculateAndSaveOverlays(t,e){const r=fC();let i=new Qr((c,d)=>c-d),o=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(f=>{const y=e.get(f);if(null===y)return;let w=r.get(f)||Aa.empty();w=d.applyToLocalView(y,w),r.set(f,w);const E=(i.get(d.batchId)||Xt()).add(f);i=i.insert(d.batchId,E)})}).next(()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),y=f.key,w=f.value,E=k3();w.forEach(A=>{if(!o.has(A)){const k=C3(e.get(A),r.get(A));null!==k&&E.set(A,k),o=o.add(A)}}),c.push(this.documentOverlayCache.saveOverlays(t,y,E))}return de.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r){return it.isDocumentKey((i=e).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):ZO(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r):this.getDocumentsMatchingCollectionQuery(t,e,r);var i}getNextDocuments(t,e,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,i-o.size):de.resolve(Uu());let d=-1,f=o;return c.next(y=>de.forEach(y,(w,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),o.get(w)?de.resolve():this.getBaseDocument(t,w,E).next(A=>{f=f.insert(w,A)}))).next(()=>this.populateOverlays(t,y,o)).next(()=>this.computeViews(t,f,y,Xt())).next(w=>({batchId:d,changes:x3(w)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new it(e)).next(r=>{let i=hC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,r){const i=e.collectionGroup;let o=hC();return this.indexManager.getCollectionParents(t,i).next(c=>de.forEach(c,d=>{const f=(y=e,w=d.child(i),new mh(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,w;return this.getDocumentsMatchingCollectionQuery(t,f,r).next(y=>{y.forEach((w,E)=>{o=o.insert(w,E)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,r){let i;return this.remoteDocumentCache.getAllFromCollection(t,e.path,r).next(o=>(i=o,this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId))).next(o=>{o.forEach((d,f)=>{const y=f.getKey();null===i.get(y)&&(i=i.insert(y,nr.newInvalidDocument(y)))});let c=hC();return i.forEach((d,f)=>{const y=o.get(d);void 0!==y&&dC(y.mutation,f,Aa.empty(),Ar.now()),zO(e,f)&&(c=c.insert(d,f))}),c})}getBaseDocument(t,e,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(t,e):de.resolve(nr.newInvalidDocument(e))}}class B9{constructor(t){this.wt=t,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(t,e){return de.resolve(this.Jn.get(e))}saveBundleMetadata(t,e){var r;return this.Jn.set(e.id,{id:(r=e).id,version:r.version,createTime:rs(r.createTime)}),de.resolve()}getNamedQuery(t,e){return de.resolve(this.Yn.get(e))}saveNamedQuery(t,e){return this.Yn.set(e.name,{name:(r=e).name,query:nM(r.bundledQuery),readTime:rs(r.readTime)}),de.resolve();var r}}class V9{constructor(){this.overlays=new Qr(it.comparator),this.Xn=new Map}getOverlay(t,e){return de.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Uu();return de.forEach(e,i=>this.getOverlay(t,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((i,o)=>{this.ie(t,e,o)}),de.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Xn.delete(r)),de.resolve()}getOverlaysForCollection(t,e,r){const i=Uu(),o=e.length+1,c=new it(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,y=f.getKey();if(!e.isPrefixOf(y.path))break;y.path.length===o&&f.largestBatchId>r&&i.set(f.getKey(),f)}return de.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let o=new Qr((y,w)=>y-w);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===e&&y.largestBatchId>r){let w=o.get(y.largestBatchId);null===w&&(w=Uu(),o=o.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const d=Uu(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((y,w)=>d.set(y,w)),!(d.size()>=i)););return de.resolve(d)}ie(t,e,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new tM(e,r));let o=this.Xn.get(e);void 0===o&&(o=Xt(),this.Xn.set(e,o)),this.Xn.set(e,o.add(r.key))}}class sM{constructor(){this.Zn=new Zn(ss.ts),this.es=new Zn(ss.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const r=new ss(t,e);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.rs(new ss(t,e))}os(t,e){t.forEach(r=>this.removeReference(r,e))}us(t){const e=new it(new vn([])),r=new ss(e,t),i=new ss(e,t+1),o=[];return this.es.forEachInRange([r,i],c=>{this.rs(c),o.push(c.key)}),o}cs(){this.Zn.forEach(t=>this.rs(t))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new it(new vn([])),r=new ss(e,t),i=new ss(e,t+1);let o=Xt();return this.es.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(t){const e=new ss(t,0),r=this.Zn.firstAfterOrEqual(e);return null!==r&&t.isEqual(r.key)}}class ss{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return it.comparator(t.key,e.key)||Kt(t.ls,e.ls)}static ns(t,e){return Kt(t.ls,e.ls)||it.comparator(t.key,e.key)}}class j9{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.fs=1,this.ds=new Zn(ss.ts)}checkEmpty(t){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,r,i){const o=this.fs;this.fs++;const c=new XO(o,e,r,i);this.mutationQueue.push(c);for(const d of i)this.ds=this.ds.add(new ss(d.key,o)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return de.resolve(c)}lookupMutationBatch(t,e){return de.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const i=this.ws(e+1),o=i<0?0:i;return de.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(t){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new ss(e,0),i=new ss(e,Number.POSITIVE_INFINITY),o=[];return this.ds.forEachInRange([r,i],c=>{const d=this._s(c.ls);o.push(d)}),de.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Zn(Kt);return e.forEach(i=>{const o=new ss(i,0),c=new ss(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([o,c],d=>{r=r.add(d.ls)})}),de.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let o=r;it.isDocumentKey(o)||(o=o.child(""));const c=new ss(new it(o),0);let d=new Zn(Kt);return this.ds.forEachWhile(f=>{const y=f.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(f.ls)),!0)},c),de.resolve(this.gs(d))}gs(t){const e=[];return t.forEach(r=>{const i=this._s(r);null!==i&&e.push(i)}),e}removeMutationBatch(t,e){Gt(0===this.ys(e.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return de.forEach(e.mutations,i=>{const o=new ss(i.key,e.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.ds=r})}In(t){}containsKey(t,e){const r=new ss(e,0),i=this.ds.firstAfterOrEqual(r);return de.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return de.resolve()}ys(t,e){return this.ws(t)}ws(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}_s(t){const e=this.ws(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class H9{constructor(t){this.ps=t,this.docs=new Qr(it.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),o=i?i.size:0,c=this.ps(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return de.resolve(r?r.document.mutableCopy():nr.newInvalidDocument(e))}getEntries(t,e){let r=jo();return e.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():nr.newInvalidDocument(i))}),de.resolve(r)}getAllFromCollection(t,e,r){let i=jo();const o=new it(e.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!e.isPrefixOf(d.path))break;d.path.length>e.length+1||LO(VV(f),r)<=0||(i=i.insert(f.key,f.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(t,e,r,i){gt()}Is(t,e){return de.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new $9(this)}getSize(t){return de.resolve(this.size)}}class $9 extends _j{constructor(t){super(),this.zn=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.zn.addEntry(t,i)):this.zn.removeEntry(r)}),de.waitFor(e)}getFromCache(t,e){return this.zn.getEntry(t,e)}getAllFromCache(t,e){return this.zn.getEntries(t,e)}}class G9{constructor(t){this.persistence=t,this.Ts=new up(e=>Dm(e),lC),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.Es=0,this.As=new sM,this.targetCount=0,this.Rs=Mm.An()}forEachTarget(t,e){return this.Ts.forEach((r,i)=>e(i)),de.resolve()}getLastRemoteSnapshotVersion(t){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return de.resolve(this.Es)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.Es&&(this.Es=e),de.resolve()}vn(t){this.Ts.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new Mm(e),this.highestTargetId=e),t.sequenceNumber>this.Es&&(this.Es=t.sequenceNumber)}addTargetData(t,e){return this.vn(e),this.targetCount+=1,de.resolve()}updateTargetData(t,e){return this.vn(e),de.resolve()}removeTargetData(t,e){return this.Ts.delete(e.target),this.As.us(e.targetId),this.targetCount-=1,de.resolve()}removeTargets(t,e,r){let i=0;const o=[];return this.Ts.forEach((c,d)=>{d.sequenceNumber<=e&&null===r.get(d.targetId)&&(this.Ts.delete(c),o.push(this.removeMatchingKeysForTargetId(t,d.targetId)),i++)}),de.waitFor(o).next(()=>i)}getTargetCount(t){return de.resolve(this.targetCount)}getTargetData(t,e){const r=this.Ts.get(e)||null;return de.resolve(r)}addMatchingKeys(t,e,r){return this.As.ss(e,r),de.resolve()}removeMatchingKeys(t,e,r){this.As.os(e,r);const i=this.persistence.referenceDelegate,o=[];return i&&e.forEach(c=>{o.push(i.markPotentiallyOrphaned(t,c))}),de.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.As.us(e),de.resolve()}getMatchingKeysForTargetId(t,e){const r=this.As.hs(e);return de.resolve(r)}containsKey(t,e){return de.resolve(this.As.containsKey(e))}}class Tj{constructor(t,e){this.bs={},this.overlays={},this.Ps=new Bo(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new G9(this),this.indexManager=new N9,this.remoteDocumentCache=new H9(r=>this.referenceDelegate.Ss(r)),this.wt=new ej(e),this.Ds=new B9(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new V9,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.bs[t.toKey()];return r||(r=new j9(e,this.referenceDelegate),this.bs[t.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(t,e,r){qe("MemoryPersistence","Starting transaction:",t);const i=new Z9(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(o=>this.referenceDelegate.xs(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ns(t,e){return de.or(Object.values(this.bs).map(r=>()=>r.containsKey(t,e)))}}class Z9 extends HV{constructor(t){super(),this.currentSequenceNumber=t}}class iI{constructor(t){this.persistence=t,this.ks=new sM,this.Ms=null}static Os(t){return new iI(t)}get Fs(){if(this.Ms)return this.Ms;throw gt()}addReference(t,e,r){return this.ks.addReference(r,e),this.Fs.delete(r.toString()),de.resolve()}removeReference(t,e,r){return this.ks.removeReference(r,e),this.Fs.add(r.toString()),de.resolve()}markPotentiallyOrphaned(t,e){return this.Fs.add(e.toString()),de.resolve()}removeTarget(t,e){this.ks.us(e.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(o=>this.Fs.add(o.toString()))}).next(()=>r.removeTargetData(t,e))}Cs(){this.Ms=new Set}xs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Fs,r=>{const i=it.fromPath(r);return this.$s(t,i).next(o=>{o||e.removeEntry(i,$t.min())})}).next(()=>(this.Ms=null,e.apply(t)))}updateLimboDocument(t,e){return this.$s(t,e).next(r=>{r?this.Fs.delete(e.toString()):this.Fs.add(e.toString())})}Ss(t){return 0}$s(t,e){return de.or([()=>de.resolve(this.ks.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ns(t,e)])}}class q9{constructor(t){this.wt=t}M(t,e,r,i){const o=new US("createOrUpgrade",e);var d;r<1&&i>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",K3,{unique:!0}),d.createObjectStore("documentMutations"),Ej(t),function(d){d.createObjectStore("remoteDocuments")}(t));let c=de.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),Ej(t)),c=c.next(()=>function(d){const f=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$t.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",y)}(o))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(d,f){return f.store("mutations").K().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",K3,{unique:!0});const w=f.store("mutations"),E=y.map(A=>w.put(A));return de.waitFor(E)})}(t,o))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),r<5&&i>=5&&(c=c.next(()=>this.Bs(o))),r<6&&i>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.Ls(o)))),r<7&&i>=7&&(c=c.next(()=>this.Us(o))),r<8&&i>=8&&(c=c.next(()=>this.qs(t,o))),r<9&&i>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),r<10&&i>=10&&(c=c.next(()=>this.Ks(o))),r<11&&i>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),r<12&&i>=12&&(c=c.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:_9});f.createIndex("collectionPathOverlayIndex",y9,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",v9,{unique:!1})}(t)})),r<13&&i>=13&&(c=c.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:o9});f.createIndex("documentKeyIndex",a9),f.createIndex("collectionGroupIndex",l9)}(t)).next(()=>this.Gs(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.Qs(t,o))),r<15&&i>=15&&(c=c.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:f9}).createIndex("sequenceNumberIndex",p9,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:g9}).createIndex("documentKeyIndex",m9,{unique:!1})}(t))),c}Ls(t){let e=0;return t.store("remoteDocuments").J((r,i)=>{e+=tI(i)}).next(()=>{const r={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(t){const e=t.store("mutationQueues"),r=t.store("mutations");return e.K().next(i=>de.forEach(i,o=>{const c=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",c).next(d=>de.forEach(d,f=>{Gt(f.userId===o.userId);const y=xm(this.wt,f);return hj(t,o.userId,y).next(()=>{})}))}))}Us(t){const e=t.store("targetDocuments"),r=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.J((c,d)=>{const f=new vn(c),y=[0,uo(f)];o.push(e.get(y).next(w=>w?de.resolve():e.put({targetId:0,path:uo(f),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(o))})}qs(t,e){t.createObjectStore("collectionParents",{keyPath:h9});const r=e.store("collectionParents"),i=new iM,o=c=>{if(i.add(c)){const d=c.lastSegment(),f=c.popLast();return r.put({collectionId:d,parent:uo(f)})}};return e.store("remoteDocuments").J({H:!0},(c,d)=>{const f=new vn(c);return o(f.popLast())}).next(()=>e.store("documentMutations").J({H:!0},([c,d,f],y)=>{const w=Vu(d);return o(w.popLast())}))}Ks(t){const e=t.store("targets");return e.J((r,i)=>{const o=bC(i),c=nj(this.wt,o);return e.put(c)})}Gs(t,e){const r=e.store("remoteDocuments"),i=[];return r.J((o,c)=>{const d=e.store("remoteDocumentsV14"),f=(y=c,y.document?new it(vn.fromString(y.document.name).popFirst(5)):y.noDocument?it.fromSegments(y.noDocument.path):y.unknownDocument?it.fromSegments(y.unknownDocument.path):gt()).path.toArray();var y;const w={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(d.put(w))}).next(()=>de.waitFor(i))}Qs(t,e){const r=e.store("mutations"),i=yj(this.wt),o=new Tj(iI.Os,this.wt.ne);return r.K().next(c=>{const d=new Map;return c.forEach(f=>{var y;let w=null!==(y=d.get(f.userId))&&void 0!==y?y:Xt();xm(this.wt,f).keys().forEach(E=>w=w.add(E)),d.set(f.userId,w)}),de.forEach(d,(f,y)=>{const w=new ts(y),E=QS.se(this.wt,w),A=o.getIndexManager(w),k=nI.se(w,this.wt,A,o.referenceDelegate);return new Cj(i,k,E,A).recalculateAndSaveOverlaysForDocumentKeys(new QO(e,Bo.ot),f).next()})})}}function Ej(n){n.createObjectStore("targetDocuments",{keyPath:u9}).createIndex("documentTargetsIndex",d9,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",c9,{unique:!0}),n.createObjectStore("targetGlobal")}const oM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class aM{constructor(t,e,r,i,o,c,d,f,y,w,E=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.js=o,this.window=c,this.document=d,this.Ws=y,this.zs=w,this.Hs=E,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=A=>Promise.resolve(),!aM.V())throw new Ve(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new P9(this,i),this.ei=e+"main",this.wt=new ej(f),this.ni=new Dc(this.ei,this.Hs,new q9(this.wt)),this.Vs=new k9(this.referenceDelegate,this.wt),this.remoteDocumentCache=yj(this.wt),this.Ds=new T9,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===w&&_i("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ve(ge.FAILED_PRECONDITION,oM);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Vs.getHighestSequenceNumber(t))}).then(t=>{this.Ps=new Bo(t,this.Ws)}).then(()=>{this.vs=!0}).catch(t=>(this.ni&&this.ni.close(),Promise.reject(t)))}ci(t){var e=this;return this.ti=function(){var r=(0,Te.Z)(function*(i){if(e.started)return t(i)});return function(i){return r.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ni.F(function(){var e=(0,Te.Z)(function*(r){null===r.newVersion&&(yield t())});return function(r){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.js.enqueueAndForget((0,Te.Z)(function*(){e.started&&(yield e.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>sI(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(t).next(e=>{e||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(t)).next(e=>this.isPrimary&&!e?this.li(t).next(()=>!1):!!e&&this.fi(t).next(()=>!0))).catch(t=>{if(sp(t))return qe("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return qe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.js.enqueueRetryable(()=>this.ti(t)),this.isPrimary=t})}ai(t){return SC(t).get("owner").next(e=>de.resolve(this.di(e)))}_i(t){return sI(t).delete(this.clientId)}wi(){var t=this;return(0,Te.Z)(function*(){if(t.isPrimary&&!t.mi(t.Zs,18e5)){t.Zs=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=is(r,"clientMetadata");return i.K().next(o=>{const c=t.gi(o,18e5),d=o.filter(f=>-1===c.indexOf(f));return de.forEach(d,f=>i.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(t.si)for(const r of e)t.si.removeItem(t.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(t){return!!t&&t.ownerId===this.clientId}hi(t){return this.zs?de.resolve(!0):SC(t).get("owner").next(e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)){if(this.di(e)&&this.networkEnabled)return!0;if(!this.di(e)){if(!e.allowTabSynchronization)throw new Ve(ge.FAILED_PRECONDITION,oM);return!1}}return!(!this.networkEnabled||!this.inForeground)||sI(t).K().next(r=>void 0===this.gi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(e=>(this.isPrimary!==e&&qe("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Te.Z)(function*(){t.vs=!1,t.Ii(),t.Xs&&(t.Xs.cancel(),t.Xs=null),t.Ti(),t.Ei(),yield t.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new QO(e,Bo.ot);return t.li(r).next(()=>t._i(r))}),t.ni.close(),t.Ai()})()}gi(t,e){return t.filter(r=>this.mi(r.updateTimeMs,e)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",t=>sI(t).K().next(e=>this.gi(e,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(t,e){return nI.se(t,this.wt,e,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new x9(t,this.wt.ne.databaseId)}getDocumentOverlayCache(t){return QS.se(this.wt,t)}getBundleCache(){return this.Ds}runTransaction(t,e,r){qe("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",o=15===(c=this.Hs)?w9:14===c?X3:13===c?Q3:12===c?b9:11===c?J3:void gt();var c;let d;return this.ni.runTransaction(t,i,o,f=>(d=new QO(f,this.Ps?this.Ps.next():Bo.ot),"readwrite-primary"===e?this.ai(d).next(y=>!!y||this.hi(d)).next(y=>{if(!y)throw _i(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Ve(ge.FAILED_PRECONDITION,jV);return r(d)}).next(y=>this.fi(d).next(()=>y)):this.bi(d).next(()=>r(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}bi(t){return SC(t).get("owner").next(e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)&&!this.di(e)&&!(this.zs||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ve(ge.FAILED_PRECONDITION,oM)})}fi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return SC(t).put("owner",e)}static V(){return Dc.V()}li(t){const e=SC(t);return e.get("owner").next(r=>this.di(r)?(qe("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):de.resolve())}mi(t,e){const r=Date.now();return!(t<r-e||t>r&&(_i(`Detected an update time that is in the future: ${t} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Js=()=>{this.Ii(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(t){var e;try{const r=null!==(null===(e=this.si)||void 0===e?void 0:e.getItem(this.yi(t)));return qe("IndexedDbPersistence",`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _i("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(t){_i("Failed to set zombie client id.",t)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function SC(n){return is(n,"owner")}function sI(n){return is(n,"clientMetadata")}function lM(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class cM{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Pi=r,this.vi=i}static Vi(t,e){let r=Xt(),i=Xt();for(const o of e.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new cM(t,e.fromCache,r,i)}}class Dj{constructor(){this.Si=!1}initialize(t,e){this.Di=t,this.indexManager=e,this.Si=!0}getDocumentsMatchingQuery(t,e,r,i){return this.Ci(t,e).next(o=>o||this.xi(t,e,i,r)).next(o=>o||this.Ni(t,e))}Ci(t,e){if(u3(e))return de.resolve(null);let r=Vo(e);return this.indexManager.getIndexType(t,r).next(i=>0===i?null:(null!==e.limit&&1===i&&(e=GS(e,null,"F"),r=Vo(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(o=>{const c=Xt(...o);return this.Di.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,r).next(f=>{const y=this.ki(e,d);return this.Mi(e,y,c,f.readTime)?this.Ci(t,GS(e,null,"F")):this.Oi(t,y,e,f)}))})))}xi(t,e,r,i){return u3(e)||i.isEqual($t.min())?this.Ni(t,e):this.Di.getDocuments(t,r).next(o=>{const c=this.ki(e,o);return this.Mi(e,c,r,i)?this.Ni(t,e):(MO()<=Ec.in.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qO(e)),this.Oi(t,c,e,BV(i,-1)))})}ki(t,e){let r=new Zn(f3(t));return e.forEach((i,o)=>{zO(t,o)&&(r=r.add(o))}),r}Mi(t,e,r,i){if(null===t.limit)return!1;if(r.size!==e.size)return!0;const o="F"===t.limitType?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ni(t,e){return MO()<=Ec.in.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",qO(e)),this.Di.getDocumentsMatchingQuery(t,e,Ia.min())}Oi(t,e,r,i){return this.Di.getDocumentsMatchingQuery(t,r,i).next(o=>(e.forEach(c=>{o=o.insert(c.key,c)}),o))}}class z9{constructor(t,e,r,i){this.persistence=t,this.Fi=e,this.wt=i,this.$i=new Qr(Kt),this.Bi=new up(o=>Dm(o),lC),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Cj(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.$i))}}function Sj(n,t,e,r){return new z9(n,t,e,r)}function Ij(n,t){return uM.apply(this,arguments)}function uM(){return uM=(0,Te.Z)(function*(n,t){const e=at(n);return yield e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,e.qi(t),e.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],d=[];let f=Xt();for(const y of i){c.push(y.batchId);for(const w of y.mutations)f=f.add(w.key)}for(const y of o){d.push(y.batchId);for(const w of y.mutations)f=f.add(w.key)}return e.localDocuments.getDocuments(r,f).next(y=>({Ki:y,removedBatchIds:c,addedBatchIds:d}))})})}),uM.apply(this,arguments)}function Aj(n){const t=at(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Vs.getLastRemoteSnapshotVersion(e))}function Nj(n,t,e){let r=Xt(),i=Xt();return e.forEach(o=>r=r.add(o)),t.getEntries(n,r).next(o=>{let c=jo();return e.forEach((d,f)=>{const y=o.get(d);f.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual($t.min())?(t.removeEntry(d,f.readTime),c=c.insert(d,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(t.addEntry(f),c=c.insert(d,f)):qe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",f.version)}),{Gi:c,Qi:i}})}function Y9(n,t){const e=at(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Tv(n,t){const e=at(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.Vs.getTargetData(r,t).next(o=>o?(i=o,de.resolve(i)):e.Vs.allocateTargetId(r).next(c=>(i=new dp(t,c,0,r.currentSequenceNumber),e.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.$i=e.$i.insert(r.targetId,r),e.Bi.set(t,r.targetId)),r})}function Ev(n,t,e){return dM.apply(this,arguments)}function dM(){return dM=(0,Te.Z)(function*(n,t,e){const r=at(n),i=r.$i.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!sp(c))throw c;qe("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}r.$i=r.$i.remove(t),r.Bi.delete(i.target)}),dM.apply(this,arguments)}function oI(n,t,e){const r=at(n);let i=$t.min(),o=Xt();return r.persistence.runTransaction("Execute query","readonly",c=>function(d,f,y){const w=at(d),E=w.Bi.get(y);return void 0!==E?de.resolve(w.$i.get(E)):w.Vs.getTargetData(f,y)}(r,c,Vo(t)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(c,d.targetId).next(f=>{o=f})}).next(()=>r.Fi.getDocumentsMatchingQuery(c,t,e?i:$t.min(),e?o:Xt())).next(d=>(Rj(r,h3(t),d),{documents:d,ji:o})))}function xj(n,t){const e=at(n),r=at(e.Vs),i=e.$i.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",o=>r.te(o,t).next(c=>c?c.target:null))}function kj(n,t){const e=at(n),r=e.Li.get(t)||$t.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.Ui.getAllFromCollectionGroup(i,t,BV(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Rj(e,t,i),i))}function Rj(n,t,e){let r=$t.min();e.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Li.set(t,r)}function hM(){return hM=(0,Te.Z)(function*(n,t,e,r){const i=at(n);let o=Xt(),c=jo();for(const y of e){const w=t.Wi(y.metadata.name);y.document&&(o=o.add(w));const E=t.zi(y);E.setReadTime(t.Hi(y.metadata.readTime)),c=c.insert(w,E)}const d=i.Ui.newChangeBuffer({trackRemovals:!0}),f=yield Tv(i,(y=r,Vo(fv(vn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>Nj(y,d,c).next(w=>(d.apply(y),w)).next(w=>i.Vs.removeMatchingKeysForTargetId(y,f.targetId).next(()=>i.Vs.addMatchingKeys(y,o,f.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,w.Gi,w.Qi)).next(()=>w.Gi)))}),hM.apply(this,arguments)}function Q9(n,t){return fM.apply(this,arguments)}function fM(){return fM=(0,Te.Z)(function*(n,t,e=Xt()){const r=yield Tv(n,Vo(nM(t.bundledQuery))),i=at(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const c=rs(t.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ds.saveNamedQuery(o,t);const d=r.withResumeToken($i.EMPTY_BYTE_STRING,c);return i.$i=i.$i.insert(d.targetId,d),i.Vs.updateTargetData(o,d).next(()=>i.Vs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Vs.addMatchingKeys(o,e,r.targetId)).next(()=>i.Ds.saveNamedQuery(o,t))})}),fM.apply(this,arguments)}function Oj(n,t){return`firestore_clients_${n}_${t}`}function Mj(n,t,e){let r=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function pM(n,t){return`firestore_targets_${n}_${t}`}class aI{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static Ji(t,e,r){const i=JSON.parse(r);let o,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(o=new Ve(i.error.code,i.error.message))),c?new aI(t,e,i.state,o):(_i("SharedClientState",`Failed to parse mutation state for ID '${e}': ${r}`),null)}Yi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class IC{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ji(t,e){const r=JSON.parse(e);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Ve(r.error.code,r.error.message))),o?new IC(t,r.state,i):(_i("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Yi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class lI{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ji(t,e){const r=JSON.parse(e);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=WS();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=WV(r.activeTargetIds[c]),o=o.add(r.activeTargetIds[c]);return i?new lI(t,o):(_i("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class gM{constructor(t,e){this.clientId=t,this.onlineState=e}static Ji(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new gM(e.clientId,e.onlineState):(_i("SharedClientState",`Failed to parse online state: ${t}`),null)}}class mM{constructor(){this.activeTargetIds=WS()}Xi(t){this.activeTargetIds=this.activeTargetIds.add(t)}Zi(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Yi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class _M{constructor(t,e,r,i,o){this.window=t,this.js=e,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Qr(Kt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.rr=Oj(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new mM),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Te.Z)(function*(){const e=yield t.syncEngine.Ri();for(const i of e){if(i===t.tr)continue;const o=t.getItem(Oj(t.persistenceKey,i));if(o){const c=lI.Ji(i,o);c&&(t.sr=t.sr.insert(c.clientId,c))}}t._r();const r=t.storage.getItem(t.lr);if(r){const i=t.wr(r);i&&t.mr(i)}for(const i of t.ir)t.nr(i);t.ir=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ur,JSON.stringify(t))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(t){let e=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.yr(t,"pending")}updateMutationState(t,e,r){this.yr(t,e,r),this.pr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const r=this.storage.getItem(pM(this.persistenceKey,t));if(r){const i=IC.Ji(t,r);i&&(e=i.state)}}return this.Ir.Xi(t),this._r(),e}removeLocalQueryTarget(t){this.Ir.Zi(t),this._r()}isLocalQueryTarget(t){return this.Ir.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(pM(this.persistenceKey,t))}updateQueryState(t,e,r){this.Tr(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.pr(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Er(t)}notifyBundleLoaded(t){this.Ar(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return qe("SharedClientState","READ",t,e),e}setItem(t,e){qe("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){qe("SharedClientState","REMOVE",t),this.storage.removeItem(t)}nr(t){var e=this;const r=t;if(r.storageArea===this.storage){if(qe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void _i("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Te.Z)(function*(){if(e.started){if(null!==r.key)if(e.cr.test(r.key)){if(null==r.newValue){const i=e.Rr(r.key);return e.br(i,null)}{const i=e.Pr(r.key,r.newValue);if(i)return e.br(i.clientId,i)}}else if(e.ar.test(r.key)){if(null!==r.newValue){const i=e.vr(r.key,r.newValue);if(i)return e.Vr(i)}}else if(e.hr.test(r.key)){if(null!==r.newValue){const i=e.Sr(r.key,r.newValue);if(i)return e.Dr(i)}}else if(r.key===e.lr){if(null!==r.newValue){const i=e.wr(r.newValue);if(i)return e.mr(i)}}else if(r.key===e.ur){const i=function(o){let c=Bo.ot;if(null!=o)try{const d=JSON.parse(o);Gt("number"==typeof d),c=d}catch(d){_i("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(r.newValue);i!==Bo.ot&&e.sequenceNumberHandler(i)}else if(r.key===e.dr){const i=e.Cr(r.newValue);yield Promise.all(i.map(o=>e.syncEngine.Nr(o)))}}else e.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(t,e,r){const i=new aI(this.currentUser,t,e,r),o=Mj(this.persistenceKey,this.currentUser,t);this.setItem(o,i.Yi())}pr(t){const e=Mj(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Er(t){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:t}))}Tr(t,e,r){const i=pM(this.persistenceKey,t),o=new IC(t,e,r);this.setItem(i,o.Yi())}Ar(t){const e=JSON.stringify(Array.from(t));this.setItem(this.dr,e)}Rr(t){const e=this.cr.exec(t);return e?e[1]:null}Pr(t,e){const r=this.Rr(t);return lI.Ji(r,e)}vr(t,e){const r=this.ar.exec(t),i=Number(r[1]);return aI.Ji(new ts(void 0!==r[2]?r[2]:null),i,e)}Sr(t,e){const r=this.hr.exec(t),i=Number(r[1]);return IC.Ji(i,e)}wr(t){return gM.Ji(t)}Cr(t){return JSON.parse(t)}Vr(t){var e=this;return(0,Te.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.kr(t.batchId,t.state,t.error);qe("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Dr(t){return this.syncEngine.Mr(t.targetId,t.state,t.error)}br(t,e){const r=e?this.sr.insert(t,e):this.sr.remove(t),i=this.gr(this.sr),o=this.gr(r),c=[],d=[];return o.forEach(f=>{i.has(f)||c.push(f)}),i.forEach(f=>{o.has(f)||d.push(f)}),this.syncEngine.Or(c,d).then(()=>{this.sr=r})}mr(t){this.sr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}gr(t){let e=WS();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class Pj{constructor(){this.Fr=new mM,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t){return this.Fr.Xi(t),this.$r[t]||"not-current"}updateQueryState(t,e,r){this.$r[t]=e}removeLocalQueryTarget(t){this.Fr.Zi(t)}isLocalQueryTarget(t){return this.Fr.activeTargetIds.has(t)}clearQueryState(t){delete this.$r[t]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(t){return this.Fr.activeTargetIds.has(t)}start(){return this.Fr=new mM,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class X9{Br(t){}shutdown(){}}class Fj{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(t){this.Gr.push(t)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Gr)t(0)}Kr(){qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Gr)t(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const eY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class tY{constructor(t){this.jr=t.jr,this.Wr=t.Wr}zr(t){this.Hr=t}Jr(t){this.Yr=t}onMessage(t){this.Xr=t}close(){this.Wr()}send(t){this.jr(t)}Zr(){this.Hr()}eo(t){this.Yr(t)}no(t){this.Xr(t)}}class nY extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.so=(t.ssl?"https":"http")+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(t,e,r,i,o){const c=this.oo(t,e);qe("RestConnection","Sending: ",c,r);const d={};return this.uo(d,i,o),this.co(t,c,d,r).then(f=>(qe("RestConnection","Received: ",f),f),f=>{throw ym("RestConnection",`${t} failed with error: `,f,"url: ",c,"request:",r),f})}ao(t,e,r,i,o,c){return this.ro(t,e,r,i,o)}uo(t,e,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+lv,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,o)=>t[o]=i),r&&r.headers.forEach((i,o)=>t[o]=i)}oo(t,e){return`${this.so}/v1/${e}:${eY[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,r,i){return new Promise((o,c)=>{const d=new e7;d.listenOnce(JK.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case OO.NO_ERROR:const y=d.getResponseJson();qe("Connection","XHR received:",JSON.stringify(y)),o(y);break;case OO.TIMEOUT:qe("Connection",'RPC "'+t+'" timed out'),c(new Ve(ge.DEADLINE_EXCEEDED,"Request time out"));break;case OO.HTTP_ERROR:const w=d.getStatus();if(qe("Connection",'RPC "'+t+'" failed with status:',w,"response text:",d.getResponseText()),w>0){const E=d.getResponseJson().error;if(E&&E.status&&E.message){const A=function(k){const M=k.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(M)>=0?M:ge.UNKNOWN}(E.status);c(new Ve(A,E.message))}else c(new Ve(ge.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Ve(ge.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{qe("Connection",'RPC "'+t+'" completed.')}});const f=JSON.stringify(i);d.send(e,"POST",f,r,15)})}ho(t,e,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=KK(),c=YK(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new XK({})),this.uo(d.initMessageHeaders,e,r),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const f=i.join("");qe("Connection","Creating WebChannel: "+f,d);const y=o.createWebChannel(f,d);let w=!1,E=!1;const A=new tY({jr:M=>{E?qe("Connection","Not sending because WebChannel is closed:",M):(w||(qe("Connection","Opening WebChannel transport."),y.open(),w=!0),qe("Connection","WebChannel sending:",M),y.send(M))},Wr:()=>y.close()}),k=(M,V,W)=>{M.listen(V,ne=>{try{W(ne)}catch(he){setTimeout(()=>{throw he},0)}})};return k(y,PS.EventType.OPEN,()=>{E||qe("Connection","WebChannel transport opened.")}),k(y,PS.EventType.CLOSE,()=>{E||(E=!0,qe("Connection","WebChannel transport closed"),A.eo())}),k(y,PS.EventType.ERROR,M=>{E||(E=!0,ym("Connection","WebChannel transport errored:",M),A.eo(new Ve(ge.UNAVAILABLE,"The operation could not be completed")))}),k(y,PS.EventType.MESSAGE,M=>{var V;if(!E){const W=M.data[0];Gt(!!W);const he=W.error||(null===(V=W[0])||void 0===V?void 0:V.error);if(he){qe("Connection","WebChannel received error:",he);const Ie=he.status;let me=function(He){const ct=Ii[He];if(void 0!==ct)return A3(ct)}(Ie),Pe=he.message;void 0===me&&(me=ge.INTERNAL,Pe="Unknown error status: "+Ie+" with message "+he.message),E=!0,A.eo(new Ve(me,Pe)),y.close()}else qe("Connection","WebChannel received:",W),A.no(W)}}),k(c,QK.STAT_EVENT,M=>{M.stat===OV.PROXY?qe("Connection","Detected buffering proxy"):M.stat===OV.NOPROXY&&qe("Connection","Detected no buffering proxy")}),setTimeout(()=>{A.Zr()},0),A}}function Lj(){return typeof window<"u"?window:null}function cI(){return typeof document<"u"?document:null}function AC(n){return new z7(n,!0)}class yM{constructor(t,e,r=1e3,i=1.5,o=6e4){this.js=t,this.timerId=e,this.lo=r,this.fo=i,this._o=o,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(t){this.cancel();const e=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,e-r);i>0&&qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),t())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Uj{constructor(t,e,r,i,o,c,d,f){this.js=t,this.Ao=r,this.Ro=i,this.bo=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new yM(t,e)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var t=this;return(0,Te.Z)(function*(){t.Do()&&(yield t.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(t){this.Fo(),this.stream.send(t)}Mo(){var t=this;return(0,Te.Z)(function*(){if(t.Co())return t.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(t,e){var r=this;return(0,Te.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==t?r.So.reset():e&&e.code===ge.RESOURCE_EXHAUSTED?(_i(e.toString()),_i("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):e&&e.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=t,yield r.listener.Jr(e)})()}Bo(){}auth(){this.state=1;const t=this.Lo(this.Po),e=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===e&&this.Uo(r,i)},r=>{t(()=>{const i=new Ve(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(t,e){const r=this.Lo(this.Po);this.stream=this.Ko(t,e),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var t=this;this.state=5,this.So.Io((0,Te.Z)(function*(){t.state=0,t.start()}))}qo(t){return qe("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Lo(t){return e=>{this.js.enqueueAndForget(()=>this.Po===t?e():(qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rY extends Uj{constructor(t,e,r,i,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,c),this.wt=o}Ko(t,e){return this.bo.ho("Listen",t,e)}onMessage(t){this.So.reset();const e=function Y7(n,t){let e;if("targetChange"in t){const r="NO_CHANGE"===(f=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:gt(),i=t.targetChange.targetIds||[],o=function(f,y){return f.dt?(Gt(void 0===y||"string"==typeof y),$i.fromBase64String(y||"")):(Gt(void 0===y||y instanceof Uint8Array),$i.fromUint8Array(y||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(f){const y=void 0===f.code?ge.UNKNOWN:A3(f.code);return new Ve(y,f.message||"")}(c);e=new O3(r,i,o,d||null)}else if("documentChange"in t){const r=t.documentChange,i=Bu(n,r.document.name),o=rs(r.document.updateTime),c=new vs({mapValue:{fields:r.document.fields}}),d=nr.newFoundDocument(i,o,c);e=new KS(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){const r=t.documentDelete,i=Bu(n,r.document),o=r.readTime?rs(r.readTime):$t.min(),c=nr.newNoDocument(i,o);e=new KS([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const r=t.documentRemove,i=Bu(n,r.document);e=new KS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return gt();{const r=t.filter,o=new B7(r.count||0);e=new R3(r.targetId,o)}}var f;return e}(this.wt,t),r=function(i){if(!("targetChange"in i))return $t.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?$t.min():o.readTime?rs(o.readTime):$t.min()}(t);return this.listener.Go(e,r)}Qo(t){const e={};e.database=yC(this.wt),e.addTarget=function(i,o){let c;const d=o.target;return c=HS(d)?{documents:$3(i,d)}:{query:G3(i,d)},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?c.resumeToken=L3(i,o.resumeToken):o.snapshotVersion.compareTo($t.min())>0&&(c.readTime=mC(i,o.snapshotVersion.toTimestamp())),c}(this.wt,t);const r=function Q7(n,t){const e=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);r&&(e.labels=r),this.Oo(e)}jo(t){const e={};e.database=yC(this.wt),e.removeTarget=t,this.Oo(e)}}class iY extends Uj{constructor(t,e,r,i,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,c),this.wt=o,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(t,e){return this.bo.ho("Write",t,e)}onMessage(t){if(Gt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Wo){this.So.reset();const e=function J7(n,t){return n&&n.length>0?(Gt(void 0!==t),n.map(e=>function(r,i){let o=rs(r.updateTime?r.updateTime:i);return o.isEqual($t.min())&&(o=rs(i)),new F7(o,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),r=rs(t.commitTime);return this.listener.Jo(r,e)}return Gt(!t.writeResults||0===t.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const t={};t.database=yC(this.wt),this.Oo(t)}Ho(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>vC(this.wt,r))};this.Oo(e)}}class sY extends class{}{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Ve(ge.FAILED_PRECONDITION,"The client has already been terminated.")}ro(t,e,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.bo.ro(t,e,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ve(ge.UNKNOWN,i.toString())})}ao(t,e,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.bo.ao(t,e,r,o,c,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ve(ge.UNKNOWN,o.toString())})}terminate(){this.Zo=!0}}class oY{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(t){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ru("Offline")))}set(t){this.cu(),this.eu=0,"Online"===t&&(this.su=!1),this.ru(t)}ru(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ou(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(_i(e),this.su=!1):qe("OnlineStateTracker",e)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class aY{constructor(t,e,r,i,o){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=o,this.du.Br(d=>{r.enqueueAndForget((0,Te.Z)(function*(){var f;pp(c)&&(qe("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,Te.Z)(function*(y){const w=at(y);w.lu.add(4),yield Dv(w),w._u.set("Unknown"),w.lu.delete(4),yield NC(w)}),function(y){return f.apply(this,arguments)})(c))}))}),this._u=new oY(r,i)}}function NC(n){return vM.apply(this,arguments)}function vM(){return vM=(0,Te.Z)(function*(n){if(pp(n))for(const t of n.fu)yield t(!0)}),vM.apply(this,arguments)}function Dv(n){return bM.apply(this,arguments)}function bM(){return bM=(0,Te.Z)(function*(n){for(const t of n.fu)yield t(!1)}),bM.apply(this,arguments)}function uI(n,t){const e=at(n);e.hu.has(t.targetId)||(e.hu.set(t.targetId,t),TM(e)?CM(e):Iv(e).Co()&&wM(e,t))}function xC(n,t){const e=at(n),r=Iv(e);e.hu.delete(t),r.Co()&&Bj(e,t),0===e.hu.size&&(r.Co()?r.ko():pp(e)&&e._u.set("Unknown"))}function wM(n,t){n.wu.Nt(t.targetId),Iv(n).Qo(t)}function Bj(n,t){n.wu.Nt(t),Iv(n).jo(t)}function CM(n){n.wu=new G7({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),te:t=>n.hu.get(t)||null}),Iv(n).start(),n._u.iu()}function TM(n){return pp(n)&&!Iv(n).Do()&&n.hu.size>0}function pp(n){return 0===at(n).lu.size}function Vj(n){n.wu=void 0}function lY(n){return EM.apply(this,arguments)}function EM(){return EM=(0,Te.Z)(function*(n){n.hu.forEach((t,e)=>{wM(n,t)})}),EM.apply(this,arguments)}function cY(n,t){return DM.apply(this,arguments)}function DM(){return DM=(0,Te.Z)(function*(n,t){Vj(n),TM(n)?(n._u.uu(t),CM(n)):n._u.set("Unknown")}),DM.apply(this,arguments)}function uY(n,t,e){return SM.apply(this,arguments)}function SM(){return SM=(0,Te.Z)(function*(n,t,e){if(n._u.set("Online"),t instanceof O3&&2===t.state&&t.cause)try{yield(r=(0,Te.Z)(function*(i,o){const c=o.cause;for(const d of o.targetIds)i.hu.has(d)&&(yield i.remoteSyncer.rejectListen(d,c),i.hu.delete(d),i.wu.removeTarget(d))}),function(i,o){return r.apply(this,arguments)})(n,t)}catch(r){qe("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield dI(n,r)}else if(t instanceof KS?n.wu.Ut(t):t instanceof R3?n.wu.zt(t):n.wu.Gt(t),!e.isEqual($t.min()))try{const r=yield Aj(n.localStore);e.compareTo(r)>=0&&(yield function(i,o){const c=i.wu.Yt(o);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.hu.get(f);y&&i.hu.set(f,y.withResumeToken(d.resumeToken,o))}}),c.targetMismatches.forEach(d=>{const f=i.hu.get(d);if(!f)return;i.hu.set(d,f.withResumeToken($i.EMPTY_BYTE_STRING,f.snapshotVersion)),Bj(i,d);const y=new dp(f.target,d,1,f.sequenceNumber);wM(i,y)}),i.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(r){qe("RemoteStore","Failed to raise snapshot:",r),yield dI(n,r)}var r}),SM.apply(this,arguments)}function dI(n,t,e){return IM.apply(this,arguments)}function IM(){return IM=(0,Te.Z)(function*(n,t,e){if(!sp(t))throw t;n.lu.add(1),yield Dv(n),n._u.set("Offline"),e||(e=()=>Aj(n.localStore)),n.asyncQueue.enqueueRetryable((0,Te.Z)(function*(){qe("RemoteStore","Retrying IndexedDB access"),yield e(),n.lu.delete(1),yield NC(n)}))}),IM.apply(this,arguments)}function jj(n,t){return t().catch(e=>dI(n,e,t))}function Sv(n){return AM.apply(this,arguments)}function AM(){return AM=(0,Te.Z)(function*(n){const t=at(n),e=gp(t);let r=t.au.length>0?t.au[t.au.length-1].batchId:-1;for(;dY(t);)try{const i=yield Y9(t.localStore,r);if(null===i){0===t.au.length&&e.ko();break}r=i.batchId,hY(t,i)}catch(i){yield dI(t,i)}Hj(t)&&$j(t)}),AM.apply(this,arguments)}function dY(n){return pp(n)&&n.au.length<10}function hY(n,t){n.au.push(t);const e=gp(n);e.Co()&&e.zo&&e.Ho(t.mutations)}function Hj(n){return pp(n)&&!gp(n).Do()&&n.au.length>0}function $j(n){gp(n).start()}function fY(n){return NM.apply(this,arguments)}function NM(){return NM=(0,Te.Z)(function*(n){gp(n).Xo()}),NM.apply(this,arguments)}function pY(n){return xM.apply(this,arguments)}function xM(){return xM=(0,Te.Z)(function*(n){const t=gp(n);for(const e of n.au)t.Ho(e.mutations)}),xM.apply(this,arguments)}function gY(n,t,e){return kM.apply(this,arguments)}function kM(){return kM=(0,Te.Z)(function*(n,t,e){const r=n.au.shift(),i=eM.from(r,t,e);yield jj(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Sv(n)}),kM.apply(this,arguments)}function mY(n,t){return RM.apply(this,arguments)}function RM(){return RM=(0,Te.Z)(function*(n,t){var e;t&&gp(n).zo&&(yield(e=(0,Te.Z)(function*(r,i){if(I3(o=i.code)&&o!==ge.ABORTED){const c=r.au.shift();gp(r).No(),yield jj(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Sv(r)}var o}),function(r,i){return e.apply(this,arguments)})(n,t)),Hj(n)&&$j(n)}),RM.apply(this,arguments)}function Gj(n,t){return OM.apply(this,arguments)}function OM(){return OM=(0,Te.Z)(function*(n,t){const e=at(n);e.asyncQueue.verifyOperationInProgress(),qe("RemoteStore","RemoteStore received new credentials");const r=pp(e);e.lu.add(3),yield Dv(e),r&&e._u.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.lu.delete(3),yield NC(e)}),OM.apply(this,arguments)}function MM(n,t){return PM.apply(this,arguments)}function PM(){return PM=(0,Te.Z)(function*(n,t){const e=at(n);t?(e.lu.delete(2),yield NC(e)):t||(e.lu.add(2),yield Dv(e),e._u.set("Unknown"))}),PM.apply(this,arguments)}function Iv(n){return n.mu||(n.mu=function(t,e,r){const i=at(t);return i.tu(),new rY(e,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:lY.bind(null,n),Jr:cY.bind(null,n),Go:uY.bind(null,n)}),n.fu.push(function(){var t=(0,Te.Z)(function*(e){e?(n.mu.No(),TM(n)?CM(n):n._u.set("Unknown")):(yield n.mu.stop(),Vj(n))});return function(e){return t.apply(this,arguments)}}())),n.mu}function gp(n){return n.gu||(n.gu=function(t,e,r){const i=at(t);return i.tu(),new iY(e,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:fY.bind(null,n),Jr:mY.bind(null,n),Yo:pY.bind(null,n),Jo:gY.bind(null,n)}),n.fu.push(function(){var t=(0,Te.Z)(function*(e){e?(n.gu.No(),yield Sv(n)):(yield n.gu.stop(),n.au.length>0&&(qe("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(e){return t.apply(this,arguments)}}())),n.gu}class FM{constructor(t,e,r,i,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,r,i,o){const c=Date.now()+r,d=new FM(t,e,c,i,o);return d.start(r),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ve(ge.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Av(n,t){if(_i("AsyncQueue",`${t}: ${n}`),sp(n))return new Ve(ge.UNAVAILABLE,`${t}: ${n}`);throw n}class Nv{constructor(t){this.comparator=t?(e,r)=>t(e,r)||it.comparator(e.key,r.key):(e,r)=>it.comparator(e.key,r.key),this.keyedMap=hC(),this.sortedSet=new Qr(this.comparator)}static emptySet(t){return new Nv(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Nv)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const r=new Nv;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class Zj{constructor(){this.yu=new Qr(it.comparator)}track(t){const e=t.doc.key,r=this.yu.get(e);r?0!==t.type&&3===r.type?this.yu=this.yu.insert(e,t):3===t.type&&1!==r.type?this.yu=this.yu.insert(e,{type:r.type,doc:t.doc}):2===t.type&&2===r.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===r.type?this.yu=this.yu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===r.type?this.yu=this.yu.remove(e):1===t.type&&2===r.type?this.yu=this.yu.insert(e,{type:1,doc:r.doc}):0===t.type&&1===r.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):gt():this.yu=this.yu.insert(e,t)}pu(){const t=[];return this.yu.inorderTraversal((e,r)=>{t.push(r)}),t}}class xv{constructor(t,e,r,i,o,c,d,f){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f}static fromInitialDocuments(t,e,r,i){const o=[];return e.forEach(c=>{o.push({type:0,doc:c})}),new xv(t,e,Nv.emptySet(e),o,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&cC(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}class _Y{constructor(){this.Iu=void 0,this.listeners=[]}}class yY{constructor(){this.queries=new up(t=>d3(t),cC),this.onlineState="Unknown",this.Tu=new Set}}function LM(n,t){return UM.apply(this,arguments)}function UM(){return UM=(0,Te.Z)(function*(n,t){const e=at(n),r=t.query;let i=!1,o=e.queries.get(r);if(o||(i=!0,o=new _Y),i)try{o.Iu=yield e.onListen(r)}catch(c){const d=Av(c,`Initialization of query '${qO(t.query)}' failed`);return void t.onError(d)}e.queries.set(r,o),o.listeners.push(t),t.Eu(e.onlineState),o.Iu&&t.Au(o.Iu)&&jM(e)}),UM.apply(this,arguments)}function BM(n,t){return VM.apply(this,arguments)}function VM(){return VM=(0,Te.Z)(function*(n,t){const e=at(n),r=t.query;let i=!1;const o=e.queries.get(r);if(o){const c=o.listeners.indexOf(t);c>=0&&(o.listeners.splice(c,1),i=0===o.listeners.length)}if(i)return e.queries.delete(r),e.onUnlisten(r)}),VM.apply(this,arguments)}function vY(n,t){const e=at(n);let r=!1;for(const i of t){const c=e.queries.get(i.query);if(c){for(const d of c.listeners)d.Au(i)&&(r=!0);c.Iu=i}}r&&jM(e)}function bY(n,t,e){const r=at(n),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(e);r.queries.delete(t)}function jM(n){n.Tu.forEach(t=>{t.next()})}class HM{constructor(t,e,r){this.query=t,this.Ru=e,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)3!==i.type&&r.push(i);t=new xv(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Ru.next(t),e=!0):this.Vu(t,this.onlineState)&&(this.Su(t),e=!0),this.Pu=t,e}onError(t){this.Ru.error(t)}Eu(t){this.onlineState=t;let e=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,t)&&(this.Su(this.Pu),e=!0),e}Vu(t,e){return!t.fromCache||!(this.options.Du&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(t){t=xv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Ru.next(t)}}class wY{constructor(t,e){this.payload=t,this.byteLength=e}Cu(){return"metadata"in this.payload}}class qj{constructor(t){this.wt=t}Wi(t){return Bu(this.wt,t)}zi(t){return t.metadata.exists?H3(this.wt,t.document,!1):nr.newNoDocument(this.Wi(t.metadata.name),this.Hi(t.metadata.readTime))}Hi(t){return rs(t)}}class CY{constructor(t,e,r){this.xu=t,this.localStore=e,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zj(t)}Nu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const r=vn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}ku(t){const e=new Map,r=new qj(this.wt);for(const i of t)if(i.metadata.queries){const o=r.Wi(i.metadata.name);for(const c of i.metadata.queries){const d=(e.get(c)||Xt()).add(o);e.set(c,d)}}return e}complete(){var t=this;return(0,Te.Z)(function*(){const e=yield function J9(n,t,e,r){return hM.apply(this,arguments)}(t.localStore,new qj(t.wt),t.documents,t.xu.id),r=t.ku(t.documents);for(const i of t.queries)yield Q9(t.localStore,i,r.get(i.name));return t.progress.taskState="Success",{progress:t.progress,Mu:t.collectionGroups,Ou:e}})()}}function zj(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Wj{constructor(t){this.key=t}}class Kj{constructor(t){this.key=t}}class Yj{constructor(t,e){this.query=t,this.Fu=e,this.$u=null,this.current=!1,this.Bu=Xt(),this.mutatedKeys=Xt(),this.Lu=f3(t),this.Uu=new Nv(this.Lu)}get qu(){return this.Fu}Ku(t,e){const r=e?e.Gu:new Zj,i=e?e.Uu:this.Uu;let o=e?e.mutatedKeys:this.mutatedKeys,c=i,d=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((w,E)=>{const A=i.get(w),k=zO(this.query,E)?E:null,M=!!A&&this.mutatedKeys.has(A.key),V=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let W=!1;A&&k?A.data.isEqual(k.data)?M!==V&&(r.track({type:3,doc:k}),W=!0):this.Qu(A,k)||(r.track({type:2,doc:k}),W=!0,(f&&this.Lu(k,f)>0||y&&this.Lu(k,y)<0)&&(d=!0)):!A&&k?(r.track({type:0,doc:k}),W=!0):A&&!k&&(r.track({type:1,doc:A}),W=!0,(f||y)&&(d=!0)),W&&(k?(c=c.add(k),o=V?o.add(w):o.delete(w)):(c=c.delete(w),o=o.delete(w)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const w="F"===this.query.limitType?c.last():c.first();c=c.delete(w.key),o=o.delete(w.key),r.track({type:1,doc:w})}return{Uu:c,Gu:r,Mi:d,mutatedKeys:o}}Qu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r){const i=this.Uu;this.Uu=t.Uu,this.mutatedKeys=t.mutatedKeys;const o=t.Gu.pu();o.sort((y,w)=>function(E,A){const k=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return k(E)-k(A)}(y.type,w.type)||this.Lu(y.doc,w.doc)),this.ju(r);const c=e?this.Wu():[],d=0===this.Bu.size&&this.current?1:0,f=d!==this.$u;return this.$u=d,0!==o.length||f?{snapshot:new xv(this.query,t.Uu,i,o,t.mutatedKeys,0===d,f,!1),zu:c}:{zu:c}}Eu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Zj,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(t){return!this.Fu.has(t)&&!!this.Uu.has(t)&&!this.Uu.get(t).hasLocalMutations}ju(t){t&&(t.addedDocuments.forEach(e=>this.Fu=this.Fu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Fu=this.Fu.delete(e)),this.current=t.current)}Wu(){if(!this.current)return[];const t=this.Bu;this.Bu=Xt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const e=[];return t.forEach(r=>{this.Bu.has(r)||e.push(new Kj(r))}),this.Bu.forEach(r=>{t.has(r)||e.push(new Wj(r))}),e}Ju(t){this.Fu=t.ji,this.Bu=Xt();const e=this.Ku(t.documents);return this.applyChanges(e,!0)}Yu(){return xv.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class TY{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class EY{constructor(t){this.key=t,this.Xu=!1}}class DY{constructor(t,e,r,i,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Zu={},this.tc=new up(d=>d3(d),cC),this.ec=new Map,this.nc=new Set,this.sc=new Qr(it.comparator),this.ic=new Map,this.rc=new sM,this.oc={},this.uc=new Map,this.cc=Mm.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function SY(n,t){return $M.apply(this,arguments)}function $M(){return $M=(0,Te.Z)(function*(n,t){const e=hP(n);let r,i;const o=e.tc.get(t);if(o)r=o.targetId,e.sharedClientState.addLocalQueryTarget(r),i=o.view.Yu();else{const c=yield Tv(e.localStore,Vo(t));e.isPrimaryClient&&uI(e.remoteStore,c);const d=e.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield GM(e,t,r,"current"===d)}return i}),$M.apply(this,arguments)}function GM(n,t,e,r){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,Te.Z)(function*(n,t,e,r){n.hc=(w,E,A)=>{return(k=(0,Te.Z)(function*(M,V,W,ne){let he=V.view.Ku(W);he.Mi&&(he=yield oI(M.localStore,V.query,!1).then(({documents:Pe})=>V.view.Ku(Pe,he)));const Ie=ne&&ne.targetChanges.get(V.targetId),me=V.view.applyChanges(he,M.isPrimaryClient,Ie);return tP(M,V.targetId,me.zu),me.snapshot}),function(M,V,W,ne){return k.apply(this,arguments)})(n,w,E,A);var k};const i=yield oI(n.localStore,t,!0),o=new Yj(t,i.ji),c=o.Ku(i.documents),d=gC.createSynthesizedTargetChangeForCurrentChange(e,r&&"Offline"!==n.onlineState),f=o.applyChanges(c,n.isPrimaryClient,d);tP(n,e,f.zu);const y=new TY(t,e,o);return n.tc.set(t,y),n.ec.has(e)?n.ec.get(e).push(t):n.ec.set(e,[t]),f.snapshot}),ZM.apply(this,arguments)}function IY(n,t){return qM.apply(this,arguments)}function qM(){return qM=(0,Te.Z)(function*(n,t){const e=at(n),r=e.tc.get(t),i=e.ec.get(r.targetId);if(i.length>1)return e.ec.set(r.targetId,i.filter(o=>!cC(o,t))),void e.tc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ev(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),xC(e.remoteStore,r.targetId),kv(e,r.targetId)}).catch(ip))):(kv(e,r.targetId),yield Ev(e.localStore,r.targetId,!0))}),qM.apply(this,arguments)}function zM(){return zM=(0,Te.Z)(function*(n,t,e){const r=fP(n);try{const i=yield function(o,c){const d=at(o),f=Ar.now(),y=c.reduce((A,k)=>A.add(k.key),Xt());let w,E;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let k=jo(),M=Xt();return d.Ui.getEntries(A,y).next(V=>{k=V,k.forEach((W,ne)=>{ne.isValidDocument()||(M=M.add(W))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,k)).next(V=>{w=V;const W=[];for(const ne of c){const he=U7(ne,w.get(ne.key).overlayedDocument);null!=he&&W.push(new _h(ne.key,he,t3(he.value.mapValue),Vr.exists(!0)))}return d.mutationQueue.addMutationBatch(A,f,W,c)}).next(V=>{E=V;const W=V.applyToLocalDocumentSet(w,M);return d.documentOverlayCache.saveOverlays(A,V.batchId,W)})}).then(()=>({batchId:E.batchId,changes:x3(w)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,d){let f=o.oc[o.currentUser.toKey()];f||(f=new Qr(Kt)),f=f.insert(c,d),o.oc[o.currentUser.toKey()]=f}(r,i.batchId,e),yield yh(r,i.changes),yield Sv(r.remoteStore)}catch(i){const o=Av(i,"Failed to persist write");e.reject(o)}}),zM.apply(this,arguments)}function Jj(n,t){return WM.apply(this,arguments)}function WM(){return WM=(0,Te.Z)(function*(n,t){const e=at(n);try{const r=yield function K9(n,t){const e=at(n),r=t.snapshotVersion;let i=e.$i;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=e.Ui.newChangeBuffer({trackRemovals:!0});i=e.$i;const d=[];t.targetChanges.forEach((w,E)=>{const A=i.get(E);if(!A)return;d.push(e.Vs.removeMatchingKeys(o,w.removedDocuments,E).next(()=>e.Vs.addMatchingKeys(o,w.addedDocuments,E)));let k=A.withSequenceNumber(o.currentSequenceNumber);var M,V,W;t.targetMismatches.has(E)?k=k.withResumeToken($i.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):w.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(w.resumeToken,r)),i=i.insert(E,k),V=k,W=w,(0===(M=A).resumeToken.approximateByteSize()||V.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8||W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0)&&d.push(e.Vs.updateTargetData(o,k))});let f=jo(),y=Xt();if(t.documentUpdates.forEach(w=>{t.resolvedLimboDocuments.has(w)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(o,w))}),d.push(Nj(o,c,t.documentUpdates).next(w=>{f=w.Gi,y=w.Qi})),!r.isEqual($t.min())){const w=e.Vs.getLastRemoteSnapshotVersion(o).next(E=>e.Vs.setTargetsMetadata(o,o.currentSequenceNumber,r));d.push(w)}return de.waitFor(d).next(()=>c.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,f,y)).next(()=>f)}).then(o=>(e.$i=i,o))}(e.localStore,t);t.targetChanges.forEach((i,o)=>{const c=e.ic.get(o);c&&(Gt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?Gt(c.Xu):i.removedDocuments.size>0&&(Gt(c.Xu),c.Xu=!1))}),yield yh(e,r,t)}catch(r){yield ip(r)}}),WM.apply(this,arguments)}function Qj(n,t,e){const r=at(n);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){const i=[];r.tc.forEach((o,c)=>{const d=c.view.Eu(t);d.snapshot&&i.push(d.snapshot)}),function(o,c){const d=at(o);d.onlineState=c;let f=!1;d.queries.forEach((y,w)=>{for(const E of w.listeners)E.Eu(c)&&(f=!0)}),f&&jM(d)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function NY(n,t,e){return KM.apply(this,arguments)}function KM(){return KM=(0,Te.Z)(function*(n,t,e){const r=at(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.ic.get(t),o=i&&i.key;if(o){let c=new Qr(it.comparator);c=c.insert(o,nr.newNoDocument(o,$t.min()));const d=Xt().add(o),f=new pC($t.min(),new Map,new Zn(Kt),c,d);yield Jj(r,f),r.sc=r.sc.remove(o),r.ic.delete(t),nP(r)}else yield Ev(r.localStore,t,!1).then(()=>kv(r,t,e)).catch(ip)}),KM.apply(this,arguments)}function xY(n,t){return YM.apply(this,arguments)}function YM(){return YM=(0,Te.Z)(function*(n,t){const e=at(n),r=t.batch.batchId;try{const i=yield function W9(n,t){const e=at(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),o=e.Ui.newChangeBuffer({trackRemovals:!0});return function(c,d,f,y){const w=f.batch,E=w.keys();let A=de.resolve();return E.forEach(k=>{A=A.next(()=>y.getEntry(d,k)).next(M=>{const V=f.docVersions.get(k);Gt(null!==V),M.version.compareTo(V)<0&&(w.applyToRemoteDocument(M,f),M.isValidDocument()&&(M.setReadTime(f.commitVersion),y.addEntry(M)))})}),A.next(()=>c.mutationQueue.removeMutationBatch(d,w))}(e,r,t,o).next(()=>o.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=Xt();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(t))).next(()=>e.localDocuments.getDocuments(r,i))})}(e.localStore,t);eP(e,r,null),XM(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),yield yh(e,i)}catch(i){yield ip(i)}}),YM.apply(this,arguments)}function kY(n,t,e){return JM.apply(this,arguments)}function JM(){return JM=(0,Te.Z)(function*(n,t,e){const r=at(n);try{const i=yield function(o,c){const d=at(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let y;return d.mutationQueue.lookupMutationBatch(f,c).next(w=>(Gt(null!==w),y=w.keys(),d.mutationQueue.removeMutationBatch(f,w))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,y,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y)).next(()=>d.localDocuments.getDocuments(f,y))})}(r.localStore,t);eP(r,t,e),XM(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),yield yh(r,i)}catch(i){yield ip(i)}}),JM.apply(this,arguments)}function QM(){return QM=(0,Te.Z)(function*(n,t){const e=at(n);pp(e.remoteStore)||qe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const c=at(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.mutationQueue.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===r)return void t.resolve();const i=e.uc.get(r)||[];i.push(t),e.uc.set(r,i)}catch(r){const i=Av(r,"Initialization of waitForPendingWrites() operation failed");t.reject(i)}}),QM.apply(this,arguments)}function XM(n,t){(n.uc.get(t)||[]).forEach(e=>{e.resolve()}),n.uc.delete(t)}function eP(n,t,e){const r=at(n);let i=r.oc[r.currentUser.toKey()];if(i){const o=i.get(t);o&&(e?o.reject(e):o.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function kv(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.ec.get(t))n.tc.delete(r),e&&n.Zu.lc(r,e);n.ec.delete(t),n.isPrimaryClient&&n.rc.us(t).forEach(r=>{n.rc.containsKey(r)||Xj(n,r)})}function Xj(n,t){n.nc.delete(t.path.canonicalString());const e=n.sc.get(t);null!==e&&(xC(n.remoteStore,e),n.sc=n.sc.remove(t),n.ic.delete(e),nP(n))}function tP(n,t,e){for(const r of e)r instanceof Wj?(n.rc.addReference(r.key,t),OY(n,r)):r instanceof Kj?(qe("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,t),n.rc.containsKey(r.key)||Xj(n,r.key)):gt()}function OY(n,t){const e=t.key,r=e.path.canonicalString();n.sc.get(e)||n.nc.has(r)||(qe("SyncEngine","New document in limbo: "+e),n.nc.add(r),nP(n))}function nP(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const t=n.nc.values().next().value;n.nc.delete(t);const e=new it(vn.fromString(t)),r=n.cc.next();n.ic.set(r,new EY(e)),n.sc=n.sc.insert(e,r),uI(n.remoteStore,new dp(Vo(fv(e.path)),r,2,Bo.ot))}}function yh(n,t,e){return rP.apply(this,arguments)}function rP(){return rP=(0,Te.Z)(function*(n,t,e){const r=at(n),i=[],o=[],c=[];var d;r.tc.isEmpty()||(r.tc.forEach((d,f)=>{c.push(r.hc(f,t,e).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,y.fromCache?"not-current":"current"),i.push(y);const w=cM.Vi(f.targetId,y);o.push(w)}}))}),yield Promise.all(c),r.Zu.Go(i),yield(d=(0,Te.Z)(function*(f,y){const w=at(f);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>de.forEach(y,A=>de.forEach(A.Pi,k=>w.persistence.referenceDelegate.addReference(E,A.targetId,k)).next(()=>de.forEach(A.vi,k=>w.persistence.referenceDelegate.removeReference(E,A.targetId,k)))))}catch(E){if(!sp(E))throw E;qe("LocalStore","Failed to update sequence numbers: "+E)}for(const E of y){const A=E.targetId;if(!E.fromCache){const k=w.$i.get(A),V=k.withLastLimboFreeSnapshotVersion(k.snapshotVersion);w.$i=w.$i.insert(A,V)}}}),function(f,y){return d.apply(this,arguments)})(r.localStore,o))}),rP.apply(this,arguments)}function MY(n,t){return iP.apply(this,arguments)}function iP(){return iP=(0,Te.Z)(function*(n,t){const e=at(n);if(!e.currentUser.isEqual(t)){qe("SyncEngine","User change. New user:",t.toKey());const r=yield Ij(e.localStore,t);e.currentUser=t,(i=e).uc.forEach(c=>{c.forEach(d=>{d.reject(new Ve(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield yh(e,r.Ki)}var i}),iP.apply(this,arguments)}function PY(n,t){const e=at(n),r=e.ic.get(t);if(r&&r.Xu)return Xt().add(r.key);{let i=Xt();const o=e.ec.get(t);if(!o)return i;for(const c of o){const d=e.tc.get(c);i=i.unionWith(d.view.qu)}return i}}function FY(n,t){return sP.apply(this,arguments)}function sP(){return sP=(0,Te.Z)(function*(n,t){const e=at(n),r=yield oI(e.localStore,t.query,!0),i=t.view.Ju(r);return e.isPrimaryClient&&tP(e,t.targetId,i.zu),i}),sP.apply(this,arguments)}function LY(n,t){return oP.apply(this,arguments)}function oP(){return oP=(0,Te.Z)(function*(n,t){const e=at(n);return kj(e.localStore,t).then(r=>yh(e,r))}),oP.apply(this,arguments)}function UY(n,t,e,r){return aP.apply(this,arguments)}function aP(){return aP=(0,Te.Z)(function*(n,t,e,r){const i=at(n),o=yield function(c,d){const f=at(c),y=at(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",w=>y.yn(w,d).next(E=>E?f.localDocuments.getDocuments(w,E):de.resolve(null)))}(i.localStore,t);var d;null!==o?("pending"===e?yield Sv(i.remoteStore):"acknowledged"===e||"rejected"===e?(eP(i,t,r||null),XM(i,t),d=t,at(at(i.localStore).mutationQueue).In(d)):gt(),yield yh(i,o)):qe("SyncEngine","Cannot apply mutation batch with id: "+t)}),aP.apply(this,arguments)}function lP(){return lP=(0,Te.Z)(function*(n,t){const e=at(n);if(hP(e),fP(e),!0===t&&!0!==e.ac){const r=e.sharedClientState.getAllActiveQueryTargets(),i=yield eH(e,r.toArray());e.ac=!0,yield MM(e.remoteStore,!0);for(const o of i)uI(e.remoteStore,o)}else if(!1===t&&!1!==e.ac){const r=[];let i=Promise.resolve();e.ec.forEach((o,c)=>{e.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(kv(e,c),Ev(e.localStore,c,!0))),xC(e.remoteStore,c)}),yield i,yield eH(e,r),function(o){const c=at(o);c.ic.forEach((d,f)=>{xC(c.remoteStore,f)}),c.rc.cs(),c.ic=new Map,c.sc=new Qr(it.comparator)}(e),e.ac=!1,yield MM(e.remoteStore,!1)}}),lP.apply(this,arguments)}function eH(n,t,e){return cP.apply(this,arguments)}function cP(){return cP=(0,Te.Z)(function*(n,t,e){const r=at(n),i=[],o=[];for(const c of t){let d;const f=r.ec.get(c);if(f&&0!==f.length){d=yield Tv(r.localStore,Vo(f[0]));for(const y of f){const w=r.tc.get(y),E=yield FY(r,w);E.snapshot&&o.push(E.snapshot)}}else{const y=yield xj(r.localStore,c);d=yield Tv(r.localStore,y),yield GM(r,tH(y),c,!1)}i.push(d)}return r.Zu.Go(o),i}),cP.apply(this,arguments)}function tH(n){return c3(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function VY(n){const t=at(n);return at(at(t.localStore).persistence).Ri()}function jY(n,t,e,r){return uP.apply(this,arguments)}function uP(){return uP=(0,Te.Z)(function*(n,t,e,r){const i=at(n);if(i.ac)return void qe("SyncEngine","Ignoring unexpected query state notification.");const o=i.ec.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{const c=yield kj(i.localStore,h3(o[0])),d=pC.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield yh(i,c,d);break}case"rejected":yield Ev(i.localStore,t,!0),kv(i,t,r);break;default:gt()}}),uP.apply(this,arguments)}function HY(n,t,e){return dP.apply(this,arguments)}function dP(){return dP=(0,Te.Z)(function*(n,t,e){const r=hP(n);if(r.ac){for(const i of t){if(r.ec.has(i)){qe("SyncEngine","Adding an already active target "+i);continue}const o=yield xj(r.localStore,i),c=yield Tv(r.localStore,o);yield GM(r,tH(o),c.targetId,!1),uI(r.remoteStore,c)}for(const i of e)r.ec.has(i)&&(yield Ev(r.localStore,i,!1).then(()=>{xC(r.remoteStore,i),kv(r,i)}).catch(ip))}}),dP.apply(this,arguments)}function hP(n){const t=at(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Jj.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=PY.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=NY.bind(null,t),t.Zu.Go=vY.bind(null,t.eventManager),t.Zu.lc=bY.bind(null,t.eventManager),t}function fP(n){const t=at(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=xY.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=kY.bind(null,t),t}class nH{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Te.Z)(function*(){e.wt=AC(t.databaseInfo.databaseId),e.sharedClientState=e.dc(t),e.persistence=e._c(t),yield e.persistence.start(),e.localStore=e.wc(t),e.gcScheduler=e.mc(t,e.localStore),e.indexBackfillerScheduler=e.gc(t,e.localStore)})()}mc(t,e){return null}gc(t,e){return null}wc(t){return Sj(this.persistence,new Dj,t.initialUser,this.wt)}_c(t){return new Tj(iI.Os,this.wt)}dc(t){return new Pj}terminate(){var t=this;return(0,Te.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class rH extends nH{constructor(t,e,r){super(),this.yc=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield e().call(r,t),yield r.yc.initialize(r,t),yield fP(r.yc.syncEngine),yield Sv(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(t){return Sj(this.persistence,new Dj,t.initialUser,this.wt)}mc(t,e){return new O9(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}gc(t,e){const r=new m7(e,this.persistence);return new g7(t.asyncQueue,r)}_c(t){const e=lM(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ho.withCacheSize(this.cacheSizeBytes):Ho.DEFAULT;return new aM(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,Lj(),cI(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(t){return new Pj}}class GY extends rH{constructor(t,e){super(t,e,!1),this.yc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield e().call(r,t);const i=r.yc.syncEngine;r.sharedClientState instanceof _M&&(r.sharedClientState.syncEngine={kr:UY.bind(null,i),Mr:jY.bind(null,i),Or:HY.bind(null,i),Ri:VY.bind(null,i),Nr:LY.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var o=(0,Te.Z)(function*(c){yield function BY(n,t){return lP.apply(this,arguments)}(r.yc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return o.apply(this,arguments)}}())})()}dc(t){const e=Lj();if(!_M.V(e))throw new Ve(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=lM(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new _M(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class pP{initialize(t,e){var r=this;return(0,Te.Z)(function*(){r.localStore||(r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(e),r.remoteStore=r.createRemoteStore(e),r.eventManager=r.createEventManager(e),r.syncEngine=r.createSyncEngine(e,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Qj(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=MY.bind(null,r.syncEngine),yield MM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(t){return new yY}createDatastore(t){const e=AC(t.databaseInfo.databaseId),r=new nY(t.databaseInfo);return new sY(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return e=this.localStore,r=this.datastore,i=t.asyncQueue,o=d=>Qj(this.syncEngine,d,0),c=Fj.V()?new Fj:new X9,new aY(e,r,i,o,c);var e,r,i,o,c}createSyncEngine(t,e){return function(r,i,o,c,d,f,y){const w=new DY(r,i,o,c,d,f);return y&&(w.ac=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Te.Z)(function*(e){const r=at(e);qe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Dv(r),r.du.shutdown(),r._u.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function iH(n,t=10240){let e=0;return{read:()=>(0,Te.Z)(function*(){if(e<n.byteLength){const r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})(),cancel:()=>(0,Te.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class hI{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ic(this.observer.next,t)}error(t){this.observer.error?this.Ic(this.observer.error,t):_i("Uncaught Error in snapshot listener:",t)}Tc(){this.muted=!0}Ic(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class ZY{constructor(t,e){this.Ec=t,this.wt=e,this.metadata=new ns,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var t=this;return(0,Te.Z)(function*(){return t.metadata.promise})()}fc(){var t=this;return(0,Te.Z)(function*(){return yield t.getMetadata(),t.Rc()})()}Rc(){var t=this;return(0,Te.Z)(function*(){const e=yield t.bc();if(null===e)return null;const r=t.Ac.decode(e),i=Number(r);isNaN(i)&&t.Pc(`length string (${r}) is not valid number`);const o=yield t.vc(i);return new wY(JSON.parse(o),e.length+i)})()}Vc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}bc(){var t=this;return(0,Te.Z)(function*(){for(;t.Vc()<0&&!(yield t.Sc()););if(0===t.buffer.length)return null;const e=t.Vc();e<0&&t.Pc("Reached the end of bundle when a length string is expected.");const r=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),r})()}vc(t){var e=this;return(0,Te.Z)(function*(){for(;e.buffer.length<t;)(yield e.Sc())&&e.Pc("Reached the end of bundle when more is expected.");const r=e.Ac.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),r})()}Pc(t){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${t}`)}Sc(){var t=this;return(0,Te.Z)(function*(){const e=yield t.Ec.read();if(!e.done){const r=new Uint8Array(t.buffer.length+e.value.length);r.set(t.buffer),r.set(e.value,t.buffer.length),t.buffer=r}return e.done})()}}class qY{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Te.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ve(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Te.Z)(function*(o,c){const d=at(o),f=yC(d.wt)+"/documents",y={documents:c.map(k=>_C(d.wt,k))},w=yield d.ao("BatchGetDocuments",f,y,c.length),E=new Map;w.forEach(k=>{const M=function K7(n,t){return"found"in t?function(e,r){Gt(!!r.found);const i=Bu(e,r.found.name),o=rs(r.found.updateTime),c=new vs({mapValue:{fields:r.found.fields}});return nr.newFoundDocument(i,o,c)}(n,t):"missing"in t?function(e,r){Gt(!!r.missing),Gt(!!r.readTime);const i=Bu(e,r.missing),o=rs(r.readTime);return nr.newNoDocument(i,o)}(n,t):gt()}(d.wt,k);E.set(M.key.toString(),M)});const A=[];return c.forEach(k=>{const M=E.get(k.toString());Gt(!!M),A.push(M)}),A}),function(o,c){return i.apply(this,arguments)})(e.datastore,t);var i;return r.forEach(i=>e.recordVersion(i)),r})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new yv(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Te.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var r;t.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,i)=>{const o=it.fromPath(i);t.mutations.push(new WO(o,t.precondition(o)))}),yield(r=(0,Te.Z)(function*(i,o){const c=at(i),d=yC(c.wt)+"/documents",f={writes:o.map(y=>vC(c.wt,y))};yield c.ro("Commit",d,f)}),function(i,o){return r.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw gt();e=$t.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new Ve(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Vr.updateTime(e):Vr.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual($t.min()))throw new Ve(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vr.updateTime(e)}return Vr.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class zY{constructor(t,e,r,i,o){this.asyncQueue=t,this.datastore=e,this.options=r,this.updateFunction=i,this.deferred=o,this.Dc=r.maxAttempts,this.So=new yM(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var t=this;this.So.Io((0,Te.Z)(function*(){const e=new qY(t.datastore),r=t.xc(e);r&&r.then(i=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(i)}).catch(o=>{t.Nc(o)}))}).catch(i=>{t.Nc(i)})}))}xc(t){try{const e=this.updateFunction(t);return!rC(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Nc(t){this.Dc>0&&this.kc(t)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(t)}kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!I3(e)}return!1}}class WY{constructor(t,e,r,i){var o=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=ts.UNAUTHENTICATED,this.clientId=LV.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Te.Z)(function*(d){qe("FirestoreClient","Received user=",d.uid),yield o.authCredentialListener(d),o.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(qe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,Te.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ve(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=Av(r,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}function sH(n,t){return gP.apply(this,arguments)}function gP(){return gP=(0,Te.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),qe("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(function(){var i=(0,Te.Z)(function*(o){r.isEqual(o)||(yield Ij(t.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),gP.apply(this,arguments)}function oH(n,t){return mP.apply(this,arguments)}function mP(){return mP=(0,Te.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield _P(n);qe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield t.initialize(e,r),n.setCredentialChangeListener(i=>Gj(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>Gj(t.remoteStore,o)),n.onlineComponents=t}),mP.apply(this,arguments)}function _P(n){return yP.apply(this,arguments)}function yP(){return yP=(0,Te.Z)(function*(n){return n.offlineComponents||(qe("FirestoreClient","Using default OfflineComponentProvider"),yield sH(n,new nH)),n.offlineComponents}),yP.apply(this,arguments)}function fI(n){return vP.apply(this,arguments)}function vP(){return vP=(0,Te.Z)(function*(n){return n.onlineComponents||(qe("FirestoreClient","Using default OnlineComponentProvider"),yield oH(n,new pP)),n.onlineComponents}),vP.apply(this,arguments)}function aH(n){return _P(n).then(t=>t.persistence)}function pI(n){return _P(n).then(t=>t.localStore)}function lH(n){return fI(n).then(t=>t.remoteStore)}function bP(n){return fI(n).then(t=>t.syncEngine)}function Rv(n){return wP.apply(this,arguments)}function wP(){return wP=(0,Te.Z)(function*(n){const t=yield fI(n),e=t.eventManager;return e.onListen=SY.bind(null,t.syncEngine),e.onUnlisten=IY.bind(null,t.syncEngine),e}),wP.apply(this,arguments)}function cH(n,t,e={}){const r=new ns;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,o,c,d,f){const y=new hI({next:E=>{o.enqueueAndForget(()=>BM(i,w));const A=E.docs.has(c);!A&&E.fromCache?f.reject(new Ve(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&d&&"server"===d.source?f.reject(new Ve(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),w=new HM(fv(c.path),y,{includeMetadataChanges:!0,Du:!0});return LM(i,w)}(yield Rv(n),n.asyncQueue,t,e,r)})),r.promise}function uH(n,t,e={}){const r=new ns;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,o,c,d,f){const y=new hI({next:E=>{o.enqueueAndForget(()=>BM(i,w)),E.fromCache&&"server"===d.source?f.reject(new Ve(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),w=new HM(c,y,{includeMetadataChanges:!0,Du:!0});return LM(i,w)}(yield Rv(n),n.asyncQueue,t,e,r)})),r.promise}const dH=new Map;function CP(n,t,e){if(!e)throw new Ve(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function hH(n,t,e,r){if(!0===t&&!0===r)throw new Ve(ge.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function fH(n){if(!it.isDocumentKey(n))throw new Ve(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pH(n){if(it.isDocumentKey(n))throw new Ve(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":gt()}function yn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ve(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=gI(n);throw new Ve(ge.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function gH(n,t){if(t<=0)throw new Ve(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class mH{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ve(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ve(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,hH("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class kC{constructor(t,e,r){this._authCredentials=e,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mH({}),this._settingsFrozen=!1,t instanceof gh?this._databaseId=t:(this._app=t,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ve(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gh(i.options.projectId)}(t))}get app(){if(!this._app)throw new Ve(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ve(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mH(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new r7;switch(e.type){case"gapi":const r=e.client;return Gt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new a7(r,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ve(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=dH.get(t);e&&(qe("ComponentProvider","Removing Datastore"),dH.delete(t),e.terminate())}(this),Promise.resolve()}}class pr{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new pr(this.firestore,t,this._key)}}class Fs{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Fs(this.firestore,t,this._query)}}class ju extends Fs{constructor(t,e,r){super(t,e,fv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new pr(this.firestore,null,new it(t))}withConverter(t){return new ju(this.firestore,t,this._path)}}function _H(n,t,...e){if(n=(0,F.m9)(n),CP("collection","path",t),n instanceof kC){const r=vn.fromString(t,...e);return pH(r),new ju(n,null,r)}{if(!(n instanceof pr||n instanceof ju))throw new Ve(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vn.fromString(t,...e));return pH(r),new ju(n.firestore,null,r)}}function mI(n,t,...e){if(n=(0,F.m9)(n),1===arguments.length&&(t=LV.I()),CP("doc","path",t),n instanceof kC){const r=vn.fromString(t,...e);return fH(r),new pr(n,null,new it(r))}{if(!(n instanceof pr||n instanceof ju))throw new Ve(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vn.fromString(t,...e));return fH(r),new pr(n.firestore,n instanceof ju?n.converter:null,new it(r))}}function yH(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),(n instanceof pr||n instanceof ju)&&(t instanceof pr||t instanceof ju)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function vH(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),n instanceof Fs&&t instanceof Fs&&n.firestore===t.firestore&&cC(n._query,t._query)&&n.converter===t.converter}class sJ{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new yM(this,"async_queue_retry"),this.Kc=()=>{const e=cI();e&&qe("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()};const t=cI();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Gc(),this.Qc(t)}enterRestrictedMode(t){if(!this.Fc){this.Fc=!0,this.Uc=t||!1;const e=cI();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Kc)}}enqueue(t){if(this.Gc(),this.Fc)return new Promise(()=>{});const e=new ns;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Oc.push(t),this.jc()))}jc(){var t=this;return(0,Te.Z)(function*(){if(0!==t.Oc.length){try{yield t.Oc[0](),t.Oc.shift(),t.So.reset()}catch(e){if(!sp(e))throw e;qe("AsyncQueue","Operation failed with retryable error: "+e)}t.Oc.length>0&&t.So.Io(()=>t.jc())}})()}Qc(t){const e=this.Mc.then(()=>(this.Lc=!0,t().catch(r=>{throw this.Bc=r,this.Lc=!1,_i("INTERNAL UNHANDLED ERROR: ",function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),c}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=e,e}enqueueAfterDelay(t,e,r){this.Gc(),this.qc.indexOf(t)>-1&&(e=0);const i=FM.createAndSchedule(this,t,e,r,o=>this.Wc(o));return this.$c.push(i),i}Gc(){this.Bc&&gt()}verifyOperationInProgress(){}zc(){var t=this;return(0,Te.Z)(function*(){let e;do{e=t.Mc,yield e}while(e!==t.Mc)})()}Hc(t){for(const e of this.$c)if(e.timerId===t)return!0;return!1}Jc(t){return this.zc().then(()=>{this.$c.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.$c)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.zc()})}Yc(t){this.qc.push(t)}Wc(t){const e=this.$c.indexOf(t);this.$c.splice(e,1)}}function TP(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const r=t;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class oJ{constructor(){this._progressObserver={},this._taskCompletionResolver=new ns,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Nr extends kC{constructor(t,e,r){super(t,e,r),this.type="firestore",this._queue=new sJ,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||bH(this),this._firestoreClient.terminate()}}function Ai(n){return n._firestoreClient||bH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function bH(n){var t;const e=n._freezeSettings(),r=(o=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new v7(n._databaseId,o,n._persistenceKey,(d=e).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var o,d;n._firestoreClient=new WY(n._authCredentials,n._appCheckCredentials,n._queue,r)}function wH(n,t,e){const r=new ns;return n.asyncQueue.enqueue((0,Te.Z)(function*(){try{yield sH(n,e),yield oH(n,t),r.resolve()}catch(i){const o=i;if(!("FirebaseError"===(c=o).name?c.code===ge.FAILED_PRECONDITION||c.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw o;ym("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var c})).then(()=>r.promise)}function CH(n){if(n._initialized||n._terminated)throw new Ve(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vh{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ve(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Hu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Hu($i.fromBase64String(t))}catch(e){throw new Ve(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Hu($i.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Fm{constructor(t){this._methodName=t}}class _I{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ve(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ve(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Kt(this._lat,t._lat)||Kt(this._long,t._long)}}const mJ=/^__.*__$/;class _J{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return null!==this.fieldMask?new _h(t,this.data,this.fieldMask,e,this.fieldTransforms):new _v(t,this.data,e,this.fieldTransforms)}}class TH{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new _h(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function EH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class yI{constructor(t,e,r,i,o,c){this.settings=t,this.databaseId=e,this.wt=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Xc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(t){return new yI(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ta({path:r,na:!1});return i.sa(t),i}ia(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(t){return this.ta({path:void 0,na:!0})}oa(t){return wI(t,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Xc(){if(this.path)for(let t=0;t<this.path.length;t++)this.sa(this.path.get(t))}sa(t){if(0===t.length)throw this.oa("Document fields must not be empty");if(EH(this.Zc)&&mJ.test(t))throw this.oa('Document fields cannot begin and end with "__"')}}class yJ{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.wt=r||AC(t)}aa(t,e,r,i=!1){return new yI({Zc:t,methodName:e,ca:r,path:Jr.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Lm(n){const t=n._freezeSettings(),e=AC(n._databaseId);return new yJ(n._databaseId,!!t.ignoreUndefinedProperties,e)}function vI(n,t,e,r,i,o={}){const c=n.aa(o.merge||o.mergeFields?2:0,t,e,i);IP("Data must be an object, but it was:",c,r);const d=IH(r,c);let f,y;if(o.merge)f=new Aa(c.fieldMask),y=c.fieldTransforms;else if(o.mergeFields){const w=[];for(const E of o.mergeFields){const A=AP(t,E,e);if(!c.contains(A))throw new Ve(ge.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);NH(w,A)||w.push(A)}f=new Aa(w),y=c.fieldTransforms.filter(E=>f.covers(E.field))}else f=null,y=c.fieldTransforms;return new _J(new vs(d),f,y)}class RC extends Fm{_toFieldTransform(t){if(2!==t.Zc)throw t.oa(1===t.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof RC}}function DH(n,t,e){return new yI({Zc:3,ca:t.settings.ca,methodName:n._methodName,na:e},t.databaseId,t.wt,t.ignoreUndefinedProperties)}class EP extends Fm{_toFieldTransform(t){return new uC(t.path,new gv)}isEqual(t){return t instanceof EP}}class vJ extends Fm{constructor(t,e){super(t),this.ha=e}_toFieldTransform(t){const e=DH(this,t,!0),r=this.ha.map(o=>Um(o,e)),i=new Sm(r);return new uC(t.path,i)}isEqual(t){return this===t}}class bJ extends Fm{constructor(t,e){super(t),this.ha=e}_toFieldTransform(t){const e=DH(this,t,!0),r=this.ha.map(o=>Um(o,e)),i=new Im(r);return new uC(t.path,i)}isEqual(t){return this===t}}class wJ extends Fm{constructor(t,e){super(t),this.la=e}_toFieldTransform(t){const e=new mv(t.wt,m3(t.wt,this.la));return new uC(t.path,e)}isEqual(t){return this===t}}function DP(n,t,e,r){const i=n.aa(1,t,e);IP("Data must be an object, but it was:",i,r);const o=[],c=vs.empty();wm(r,(f,y)=>{const w=bI(t,f,e);y=(0,F.m9)(y);const E=i.ia(w);if(y instanceof RC)o.push(w);else{const A=Um(y,E);null!=A&&(o.push(w),c.set(w,A))}});const d=new Aa(o);return new TH(c,d,i.fieldTransforms)}function SP(n,t,e,r,i,o){const c=n.aa(1,t,e),d=[AP(t,r,e)],f=[i];if(o.length%2!=0)throw new Ve(ge.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<o.length;A+=2)d.push(AP(t,o[A])),f.push(o[A+1]);const y=[],w=vs.empty();for(let A=d.length-1;A>=0;--A)if(!NH(y,d[A])){const k=d[A];let M=f[A];M=(0,F.m9)(M);const V=c.ia(k);if(M instanceof RC)y.push(k);else{const W=Um(M,V);null!=W&&(y.push(k),w.set(k,W))}}const E=new Aa(y);return new TH(w,E,c.fieldTransforms)}function SH(n,t,e,r=!1){return Um(e,n.aa(r?4:3,t))}function Um(n,t){if(AH(n=(0,F.m9)(n)))return IP("Unsupported field value:",t,n),IH(n,t);if(n instanceof Fm)return function(e,r){if(!EH(r.Zc))throw r.oa(`${e._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${e._methodName}() is not currently supported inside arrays`);const i=e._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,r){const i=[];let o=0;for(const c of e){let d=Um(c,r.ra(o));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}}(n,t)}return function(e,r){if(null===(e=(0,F.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return m3(r.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const i=Ar.fromDate(e);return{timestampValue:mC(r.wt,i)}}if(e instanceof Ar){const i=new Ar(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:mC(r.wt,i)}}if(e instanceof _I)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Hu)return{bytesValue:L3(r.wt,e._byteString)};if(e instanceof pr){const i=r.databaseId,o=e.firestore._databaseId;if(!o.isEqual(i))throw r.oa(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:KO(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r.oa(`Unsupported field value: ${gI(e)}`)}(n,t)}function IH(n,t){const e={};return ZV(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wm(n,(r,i)=>{const o=Um(i,t.ea(r));null!=o&&(e[r]=o)}),{mapValue:{fields:e}}}function AH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ar||n instanceof _I||n instanceof Hu||n instanceof pr||n instanceof Fm)}function IP(n,t,e){if(!AH(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=gI(e);throw t.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function AP(n,t,e){if((t=(0,F.m9)(t))instanceof vh)return t._internalPath;if("string"==typeof t)return bI(n,t);throw wI("Field path arguments must be of type string or ",n,!1,void 0,e)}const CJ=new RegExp("[~\\*/\\[\\]]");function bI(n,t,e){if(t.search(CJ)>=0)throw wI(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new vh(...t.split("."))._internalPath}catch{throw wI(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function wI(n,t,e,r,i){const o=r&&!r.isEmpty(),c=void 0!==i;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(o||c)&&(f+=" (found",o&&(f+=` in field ${r}`),c&&(f+=` in document ${i}`),f+=")"),new Ve(ge.INVALID_ARGUMENT,d+n+f)}function NH(n,t){return n.some(e=>e.isEqual(t))}class OC{constructor(t,e,r,i,o){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new TJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(CI("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class TJ extends OC{data(){return super.data()}}function CI(n,t){return"string"==typeof t?bI(n,t):t instanceof vh?t._internalPath:t._delegate._internalPath}class Bm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class bh extends OC{constructor(t,e,r,i,o,c){super(t,e,r,i,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new MC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(CI("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class MC extends bh{data(t={}){return super.data(t)}}class mp{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Bm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new MC(this._firestore,this._userDataWriter,r.key,r,new Bm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ve(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new MC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Bm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const d=new MC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Bm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,y=-1;return 0!==c.type&&(f=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),1!==c.type&&(o=o.add(c.doc),y=o.indexOf(c.doc.key)),{type:EJ(c.type),doc:d,oldIndex:f,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function EJ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function xH(n,t){return n instanceof bh&&t instanceof bh?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof mp&&t instanceof mp&&n._firestore===t._firestore&&vH(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function kH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ve(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PC{}function _p(n,...t){for(const e of t)n=e._apply(n);return n}class DJ extends PC{constructor(t,e,r){super(),this.fa=t,this.da=e,this._a=r,this.type="where"}_apply(t){const e=Lm(t.firestore),r=function(i,o,c,d,f,y,w){let E;if(f.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ve(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){LH(w,y);const k=[];for(const M of w)k.push(FH(d,i,M));E={arrayValue:{values:k}}}else E=FH(d,i,w)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||LH(w,y),E=SH(c,"where",w,"in"===y||"not-in"===y);const A=bs.create(f,y,E);return function(k,M){if(M.ht()){const W=GO(k);if(null!==W&&!W.isEqual(M.field))throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${W.toString()}' and '${M.field.toString()}'`);const ne=$O(k);null!==ne&&UH(0,M.field,ne)}const V=function(W,ne){for(const he of W.filters)if(ne.indexOf(he.op)>=0)return he.op;return null}(k,function(W){switch(W){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(M.op));if(null!==V)throw new Ve(ge.INVALID_ARGUMENT,V===M.op?`Invalid query. You cannot use more than one '${M.op.toString()}' filter.`:`Invalid query. You cannot use '${M.op.toString()}' filters with '${V.toString()}' filters.`)}(i,A),A}(t._query,0,e,t.firestore._databaseId,this.fa,this.da,this._a);return new Fs(t.firestore,t.converter,function(i,o){const c=i.filters.concat([o]);return new mh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}class IJ extends PC{constructor(t,e){super(),this.fa=t,this.wa=e,this.type="orderBy"}_apply(t){const e=function(r,i,o){if(null!==r.startAt)throw new Ve(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ve(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new hv(i,o);return function(d,f){if(null===$O(d)){const y=GO(d);null!==y&&UH(0,y,f.field)}}(r,c),c}(t._query,this.fa,this.wa);return new Fs(t.firestore,t.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new mh(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class RH extends PC{constructor(t,e,r){super(),this.type=t,this.ma=e,this.ga=r}_apply(t){return new Fs(t.firestore,t.converter,GS(t._query,this.ma,this.ga))}}class OH extends PC{constructor(t,e,r){super(),this.type=t,this.ya=e,this.pa=r}_apply(t){const e=PH(t,this.type,this.ya,this.pa);return new Fs(t.firestore,t.converter,(i=e,new mh((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class MH extends PC{constructor(t,e,r){super(),this.type=t,this.ya=e,this.pa=r}_apply(t){const e=PH(t,this.type,this.ya,this.pa);return new Fs(t.firestore,t.converter,(i=e,new mh((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function PH(n,t,e,r){if(e[0]=(0,F.m9)(e[0]),e[0]instanceof OC)return function(i,o,c,d,f){if(!d)throw new Ve(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const w of pv(i))if(w.field.isKeyField())y.push(Em(o,d.key));else{const E=d.data.field(w.field);if(VO(E))throw new Ve(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===E){const A=w.field.canonicalString();throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(E)}return new cp(y,f)}(n._query,n.firestore._databaseId,t,e[0]._document,r);{const i=Lm(n.firestore);return function(o,c,d,f,y,w){const E=o.explicitOrderBy;if(y.length>E.length)throw new Ve(ge.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let k=0;k<y.length;k++){const M=y[k];if(E[k].field.isKeyField()){if("string"!=typeof M)throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof M}`);if(!ZO(o)&&-1!==M.indexOf("/"))throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${M}' contains a slash.`);const V=o.path.child(vn.fromString(M));if(!it.isDocumentKey(V))throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const W=new it(V);A.push(Em(c,W))}else{const V=SH(d,f,M);A.push(V)}}return new cp(A,w)}(n._query,n.firestore._databaseId,i,t,e,r)}}function FH(n,t,e){if("string"==typeof(e=(0,F.m9)(e))){if(""===e)throw new Ve(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZO(t)&&-1!==e.indexOf("/"))throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(vn.fromString(e));if(!it.isDocumentKey(r))throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Em(n,new it(r))}if(e instanceof pr)return Em(n,e._key);throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gI(e)}.`)}function LH(n,t){if(!Array.isArray(n)||0===n.length)throw new Ve(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Ve(ge.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function UH(n,t,e){if(!e.isEqual(t))throw new Ve(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}const PJ={maxAttempts:5};class NP{convertValue(t,e="none"){switch(Tm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Xr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Cm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw gt()}}convertObject(t,e){const r={};return wm(t.fields,(i,o)=>{r[i]=this.convertValue(o,e)}),r}convertGeoPoint(t){return new _I(Xr(t.latitude),Xr(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=zV(t);return null==r?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(nC(t));default:return null}}convertTimestamp(t){const e=op(t);return new Ar(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=vn.fromString(t);Gt(z3(r));const i=new gh(r.get(1),r.get(3)),o=new it(r.popFirst(5));return i.isEqual(e)||_i(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}function TI(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class FJ extends NP{constructor(t){super(),this.firestore=t}convertBytes(t){return new Hu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new pr(this.firestore,null,e)}}class BH{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Lm(t)}set(t,e,r){this._verifyNotCommitted();const i=yp(t,this._firestore),o=TI(i.converter,e,r),c=vI(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Vr.none())),this}update(t,e,r,...i){this._verifyNotCommitted();const o=yp(t,this._firestore);let c;return c="string"==typeof(e=(0,F.m9)(e))||e instanceof vh?SP(this._dataReader,"WriteBatch.update",o._key,e,r,i):DP(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(c.toMutation(o._key,Vr.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=yp(t,this._firestore);return this._mutations=this._mutations.concat(new yv(e._key,Vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yp(n,t){if((n=(0,F.m9)(n)).firestore!==t)throw new Ve(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Vm extends NP{constructor(t){super(),this.firestore=t}convertBytes(t){return new Hu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new pr(this.firestore,null,e)}}function VH(n,t,e){n=yn(n,pr);const r=yn(n.firestore,Nr),i=TI(n.converter,t,e);return Ov(r,[vI(Lm(r),"setDoc",n._key,i,null!==n.converter,e).toMutation(n._key,Vr.none())])}function jH(n,t,e,...r){n=yn(n,pr);const i=yn(n.firestore,Nr),o=Lm(i);let c;return c="string"==typeof(t=(0,F.m9)(t))||t instanceof vh?SP(o,"updateDoc",n._key,t,e,r):DP(o,"updateDoc",n._key,t),Ov(i,[c.toMutation(n._key,Vr.exists(!0))])}function HH(n,...t){var e,r,i;n=(0,F.m9)(n);let o={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||TP(t[c])||(o=t[c],c++);const d={includeMetadataChanges:o.includeMetadataChanges};if(TP(t[c])){const E=t[c];t[c]=null===(e=E.next)||void 0===e?void 0:e.bind(E),t[c+1]=null===(r=E.error)||void 0===r?void 0:r.bind(E),t[c+2]=null===(i=E.complete)||void 0===i?void 0:i.bind(E)}let f,y,w;if(n instanceof pr)y=yn(n.firestore,Nr),w=fv(n._key.path),f={next:E=>{t[c]&&t[c](xP(y,n,E))},error:t[c+1],complete:t[c+2]};else{const E=yn(n,Fs);y=yn(E.firestore,Nr),w=E._query;const A=new Vm(y);f={next:k=>{t[c]&&t[c](new mp(y,A,E,k))},error:t[c+1],complete:t[c+2]},kH(n._query)}return function(E,A,k,M){const V=new hI(M),W=new HM(A,V,k);return E.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return LM(yield Rv(E),W)})),()=>{V.Tc(),E.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return BM(yield Rv(E),W)}))}}(Ai(y),w,d,f)}function Ov(n,t){return function(e,r){const i=new ns;return e.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function AY(n,t,e){return zM.apply(this,arguments)}(yield bP(e),r,i)})),i.promise}(Ai(n),t)}function xP(n,t,e){const r=e.docs.get(t._key),i=new Vm(n);return new bh(n,i,t._key,r,new Bm(e.hasPendingWrites,e.fromCache),t.converter)}class qJ extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Lm(t)}get(t){const e=yp(t,this._firestore),r=new FJ(this._firestore);return this._transaction.lookup([e._key]).then(i=>{if(!i||1!==i.length)return gt();const o=i[0];if(o.isFoundDocument())return new OC(this._firestore,r,o.key,o,e.converter);if(o.isNoDocument())return new OC(this._firestore,r,e._key,null,e.converter);throw gt()})}set(t,e,r){const i=yp(t,this._firestore),o=TI(i.converter,e,r),c=vI(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(t,e,r,...i){const o=yp(t,this._firestore);let c;return c="string"==typeof(e=(0,F.m9)(e))||e instanceof vh?SP(this._dataReader,"Transaction.update",o._key,e,r,i):DP(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,c),this}delete(t){const e=yp(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=yp(t,this._firestore),r=new Vm(this._firestore);return super.get(t).then(i=>new bh(this._firestore,r,e._key,i._document,new Bm(!1,!1),e.converter))}}!function(n,t=!0){lv=oo.SDK_VERSION,(0,oo._registerComponent)(new Tc.wA("firestore",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),o=new Nr(i,new s7(e.getProvider("auth-internal")),new l7(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o},"PUBLIC")),(0,oo.registerVersion)(MV,"3.4.14",n),(0,oo.registerVersion)(MV,"3.4.14","esm2017")}();function kP(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ve("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function GH(){if(typeof Uint8Array>"u")throw new Ve("unimplemented","Uint8Arrays are not available in this environment.")}function ZH(){if(!function _7(){return typeof atob<"u"}())throw new Ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}class FC{constructor(t){this._delegate=t}static fromBase64String(t){return ZH(),new FC(Hu.fromBase64String(t))}static fromUint8Array(t){return GH(),new FC(Hu.fromUint8Array(t))}toBase64(){return ZH(),this._delegate.toBase64()}toUint8Array(){return GH(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function RP(n){return function tQ(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(n,["next","error","complete"])}class nQ{enableIndexedDbPersistence(t,e){return function lJ(n,t){CH(n=yn(n,Nr));const e=Ai(n),r=n._freezeSettings(),i=new pP;return wH(e,i,new rH(i,r.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function cJ(n){CH(n=yn(n,Nr));const t=Ai(n),e=n._freezeSettings(),r=new pP;return wH(t,r,new GY(r,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function uJ(n){if(n._initialized&&!n._terminated)throw new Ve(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new ns;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{yield(e=(0,Te.Z)(function*(r){if(!Dc.V())return Promise.resolve();const i=r+"main";yield Dc.delete(i)}),function(r){return e.apply(this,arguments)})(lM(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class qH{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof gh||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&ym("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,r={}){!function rJ(n,t,e,r={}){var i;const o=(n=yn(n,kC))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&ym("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${t}:${e}`,ssl:!1})),r.mockUserToken){let c,d;if("string"==typeof r.mockUserToken)c=r.mockUserToken,d=ts.MOCK_USER;else{c=(0,F.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Ve(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ts(f)}n._authCredentials=new i7(new PV(c,d))}}(this._delegate,t,e,r)}enableNetwork(){return function hJ(n){return function KY(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const t=yield aH(n),e=yield lH(n);return t.setNetworkEnabled(!0),function(r){const i=at(r);return i.lu.delete(0),NC(i)}(e)}))}(Ai(n=yn(n,Nr)))}(this._delegate)}disableNetwork(){return function fJ(n){return function YY(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const t=yield aH(n),e=yield lH(n);return t.setNetworkEnabled(!1),(r=(0,Te.Z)(function*(i){const o=at(i);o.lu.add(0),yield Dv(o),o._u.set("Offline")}),function(i){return r.apply(this,arguments)})(e);var r}))}(Ai(n=yn(n,Nr)))}(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,hH("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function dJ(n){return function(t){const e=new ns;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function RY(n,t){return QM.apply(this,arguments)}(yield bP(t),e)})),e.promise}(Ai(n=yn(n,Nr)))}(this._delegate)}onSnapshotsInSync(t){return function ZJ(n,t){return function XY(n,t){const e=new hI(t);return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield Rv(n),i=e,at(r).Tu.add(i),void i.next();var r,i})),()=>{e.Tc(),n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield Rv(n),i=e,void at(r).Tu.delete(i);var r,i}))}}(Ai(n=yn(n,Nr)),TP(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Mv(this,_H(this._delegate,t))}catch(e){throw ho(e,"collection()","Firestore.collection()")}}doc(t){try{return new vl(this,mI(this._delegate,t))}catch(e){throw ho(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new fo(this,function iJ(n,t){if(n=yn(n,kC),CP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ve(ge.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Fs(n,null,(e=t,new mh(vn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw ho(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function zJ(n,t,e){n=yn(n,Nr);const r=Object.assign(Object.assign({},PJ),e);return function(i){if(i.maxAttempts<1)throw new Ve(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function eJ(n,t,e){const r=new ns;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){const i=yield(o=n,fI(o).then(c=>c.datastore));var o;new zY(n.asyncQueue,i,e,t,r).run()})),r.promise}(Ai(n),i=>t(new qJ(n,i)),r)}(this._delegate,e=>t(new zH(this,e)))}batch(){return Ai(this._delegate),new WH(new BH(this._delegate,t=>Ov(this._delegate,t)))}loadBundle(t){return function pJ(n,t){const e=Ai(n=yn(n,Nr)),r=new oJ;return function tJ(n,t,e,r){const i=function(o,c){let d;return d="string"==typeof o?(new TextEncoder).encode(o):o,f=function(f,y){if(f instanceof Uint8Array)return iH(f,y);if(f instanceof ArrayBuffer)return iH(new Uint8Array(f),y);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new ZY(f,c);var f}(e,AC(t));n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){!function $Y(n,t,e){const r=at(n);var i;(i=(0,Te.Z)(function*(o,c,d){try{const f=yield c.getMetadata();if(yield function(A,k){const M=at(A),V=rs(k.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",W=>M.Ds.getBundleMetadata(W,k.id)).then(W=>!!W&&W.createTime.compareTo(V)>=0)}(o.localStore,f))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(A=f).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);d._updateProgress(zj(f));const y=new CY(f,o.localStore,c.wt);let w=yield c.fc();for(;w;){const A=yield y.Nu(w);A&&d._updateProgress(A),w=yield c.fc()}const E=yield y.complete();return yield yh(o,E.Ou,void 0),yield function(A,k){const M=at(A);return M.persistence.runTransaction("Save bundle","readwrite",V=>M.Ds.saveBundleMetadata(V,k))}(o.localStore,f),d._completeWith(E.progress),Promise.resolve(E.Mu)}catch(f){return ym("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var A}),function(o,c,d){return i.apply(this,arguments)})(r,t,e).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield bP(n),i,r)}))}(e,n._databaseId,t,r),r}(this._delegate,t)}namedQuery(t){return function gJ(n,t){return function nJ(n,t){return n.asyncQueue.enqueue((0,Te.Z)(function*(){return function(e,r){const i=at(e);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ds.getNamedQuery(o,r))}(yield pI(n),t)}))}(Ai(n=yn(n,Nr)),t).then(e=>e?new Fs(n,null,e.query):null)}(this._delegate,t).then(e=>e?new fo(this,e):null)}}class EI extends NP{constructor(t){super(),this.firestore=t}convertBytes(t){return new FC(new Hu(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return vl.forKey(e,this.firestore,null)}}class zH{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new EI(t)}get(t){const e=Hm(t);return this._delegate.get(e).then(r=>new LC(this._firestore,new bh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const i=Hm(t);return r?(kP("Transaction.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const o=Hm(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,r,...i),this}delete(t){const e=Hm(t);return this._delegate.delete(e),this}}class WH{constructor(t){this._delegate=t}set(t,e,r){const i=Hm(t);return r?(kP("WriteBatch.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const o=Hm(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,r,...i),this}delete(t){const e=Hm(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class jm{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new MC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new UC(this._firestore,r),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=jm.INSTANCES;let i=r.get(t);i||(i=new WeakMap,r.set(t,i));let o=i.get(e);return o||(o=new jm(t,new EI(t),e),i.set(e,o)),o}}jm.INSTANCES=new WeakMap;class vl{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new EI(t)}static forPath(t,e,r){if(t.length%2!=0)throw new Ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new vl(e,new pr(e._delegate,r,new it(t)))}static forKey(t,e,r){return new vl(e,new pr(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new Mv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Mv(this.firestore,_H(this._delegate,t))}catch(e){throw ho(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,F.m9)(t))instanceof pr&&yH(this._delegate,t)}set(t,e){e=kP("DocumentReference.set",e);try{return e?VH(this._delegate,t,e):VH(this._delegate,t)}catch(r){throw ho(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return 1===arguments.length?jH(this._delegate,t):jH(this._delegate,t,e,...r)}catch(i){throw ho(i,"updateDoc()","DocumentReference.update()")}}delete(){return function $J(n){return Ov(yn(n.firestore,Nr),[new yv(n._key,Vr.none())])}(this._delegate)}onSnapshot(...t){const e=KH(t),r=YH(t,i=>new LC(this.firestore,new bh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return HH(this._delegate,e,r)}get(t){let e;return e="cache"===t?.source?function UJ(n){n=yn(n,pr);const t=yn(n.firestore,Nr),e=Ai(t),r=new Vm(t);return function JY(n,t){const e=new ns;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,o,c){try{const d=yield function(f,y){const w=at(f);return w.persistence.runTransaction("read document","readonly",E=>w.localDocuments.getDocument(E,y))}(i,o);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new Ve(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=Av(d,`Failed to get document '${o} from cache`);c.reject(f)}}),function(i,o,c){return r.apply(this,arguments)})(yield pI(n),t,e);var r})),e.promise}(e,n._key).then(i=>new bh(t,r,n._key,i,new Bm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===t?.source?function BJ(n){n=yn(n,pr);const t=yn(n.firestore,Nr);return cH(Ai(t),n._key,{source:"server"}).then(e=>xP(t,n,e))}(this._delegate):function LJ(n){n=yn(n,pr);const t=yn(n.firestore,Nr);return cH(Ai(t),n._key).then(e=>xP(t,n,e))}(this._delegate),e.then(r=>new LC(this.firestore,new bh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new vl(this.firestore,this._delegate.withConverter(t?jm.getInstance(this.firestore,t):null))}}function ho(n,t,e){return n.message=n.message.replace(t,e),n}function KH(n){for(const t of n)if("object"==typeof t&&!RP(t))return t;return{}}function YH(n,t){var e,r;let i;return i=RP(n[0])?n[0]:RP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(t(o))},error:null===(e=i.error)||void 0===e?void 0:e.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class LC{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new vl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return xH(this._delegate,t._delegate)}}class UC extends LC{data(t){const e=this._delegate.data(t);return function n7(n,t){n||gt()}(void 0!==e),e}}class fo{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new EI(t)}where(t,e,r){try{return new fo(this.firestore,_p(this._delegate,function SJ(n,t,e){const r=t,i=CI("where",n);return new DJ(i,r,e)}(t,e,r)))}catch(i){throw ho(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new fo(this.firestore,_p(this._delegate,function AJ(n,t="asc"){const e=t,r=CI("orderBy",n);return new IJ(r,e)}(t,e)))}catch(r){throw ho(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new fo(this.firestore,_p(this._delegate,function NJ(n){return gH("limit",n),new RH("limit",n,"F")}(t)))}catch(e){throw ho(e,"limit()","Query.limit()")}}limitToLast(t){try{return new fo(this.firestore,_p(this._delegate,function xJ(n){return gH("limitToLast",n),new RH("limitToLast",n,"L")}(t)))}catch(e){throw ho(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new fo(this.firestore,_p(this._delegate,function kJ(...n){return new OH("startAt",n,!0)}(...t)))}catch(e){throw ho(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new fo(this.firestore,_p(this._delegate,function RJ(...n){return new OH("startAfter",n,!1)}(...t)))}catch(e){throw ho(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new fo(this.firestore,_p(this._delegate,function OJ(...n){return new MH("endBefore",n,!1)}(...t)))}catch(e){throw ho(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new fo(this.firestore,_p(this._delegate,function MJ(...n){return new MH("endAt",n,!0)}(...t)))}catch(e){throw ho(e,"endAt()","Query.endAt()")}}isEqual(t){return vH(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function jJ(n){n=yn(n,Fs);const t=yn(n.firestore,Nr),e=Ai(t),r=new Vm(t);return function QY(n,t){const e=new ns;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,o,c){try{const d=yield oI(i,o,!0),f=new Yj(o,d.ji),y=f.Ku(d.documents),w=f.applyChanges(y,!1);c.resolve(w.snapshot)}catch(d){const f=Av(d,`Failed to execute query '${o} against cache`);c.reject(f)}}),function(i,o,c){return r.apply(this,arguments)})(yield pI(n),t,e);var r})),e.promise}(e,n._query).then(i=>new mp(t,r,n,i))}(this._delegate):"server"===t?.source?function HJ(n){n=yn(n,Fs);const t=yn(n.firestore,Nr),e=Ai(t),r=new Vm(t);return uH(e,n._query,{source:"server"}).then(i=>new mp(t,r,n,i))}(this._delegate):function VJ(n){n=yn(n,Fs);const t=yn(n.firestore,Nr),e=Ai(t),r=new Vm(t);return kH(n._query),uH(e,n._query).then(i=>new mp(t,r,n,i))}(this._delegate),e.then(r=>new OP(this.firestore,new mp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=KH(t),r=YH(t,i=>new OP(this.firestore,new mp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return HH(this._delegate,e,r)}withConverter(t){return new fo(this.firestore,this._delegate.withConverter(t?jm.getInstance(this.firestore,t):null))}}class iQ{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new UC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class OP{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new fo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new UC(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new iQ(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new UC(this._firestore,r))})}isEqual(t){return xH(this._delegate,t._delegate)}}class Mv extends fo{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new vl(this.firestore,t):null}doc(t){try{return new vl(this.firestore,void 0===t?mI(this._delegate):mI(this._delegate,t))}catch(e){throw ho(e,"doc()","CollectionReference.doc()")}}add(t){return function GJ(n,t){const e=yn(n.firestore,Nr),r=mI(n),i=TI(n.converter,t);return Ov(e,[vI(Lm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Vr.exists(!1))]).then(()=>r)}(this._delegate,t).then(e=>new vl(this.firestore,e))}isEqual(t){return yH(this._delegate,t._delegate)}withConverter(t){return new Mv(this.firestore,this._delegate.withConverter(t?jm.getInstance(this.firestore,t):null))}}function Hm(n){return yn(n,pr)}class MP{constructor(...t){this._delegate=new vh(...t)}static documentId(){return new MP(Jr.keyField().canonicalString())}isEqual(t){return(t=(0,F.m9)(t))instanceof vh&&this._delegate._internalPath.isEqual(t._internalPath)}}class $m{constructor(t){this._delegate=t}static serverTimestamp(){const t=function KJ(){return new EP("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new $m(t)}static delete(){const t=function WJ(){return new RC("deleteField")}();return t._methodName="FieldValue.delete",new $m(t)}static arrayUnion(...t){const e=function YJ(...n){return new vJ("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new $m(e)}static arrayRemove(...t){const e=function JJ(...n){return new bJ("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new $m(e)}static increment(t){const e=function QJ(n){return new wJ("increment",n)}(t);return e._methodName="FieldValue.increment",new $m(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const sQ={Firestore:qH,GeoPoint:_I,Timestamp:Ar,Blob:FC,Transaction:zH,WriteBatch:WH,DocumentReference:vl,DocumentSnapshot:LC,Query:fo,QueryDocumentSnapshot:UC,QuerySnapshot:OP,CollectionReference:Mv,FieldPath:MP,FieldValue:$m,setLogLevel:function rQ(n){!function t7(n){rp.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function aQ(n){(function oQ(n,t){n.INTERNAL.registerComponent(new Tc.wA("firestore-compat",e=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("firestore").getImmediate();return t(r,i)},"PUBLIC").setServiceProps(Object.assign({},sQ)))})(n,(t,e)=>new qH(t,e,new nQ)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(HR.Z);var DI=U(5363);function JH(n,t){return(0,ks.m)(t)?Bn(()=>n,t):Bn(()=>n)}var PP=U(9468);U(5867);const XH=new Map,hQ={activated:!1,tokenObservers:[]},fQ={initialized:!1,enabled:!1};function os(n){return XH.get(n)||hQ}function Sc(n,t){XH.set(n,t)}function II(){return fQ}const LP="https://content-firebaseappcheck.googleapis.com/v1",mQ="exchangeDebugToken",e6={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class yQ{constructor(t,e,r,i,o){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Te.Z)(function*(){e.stop();try{e.pending=new F.BH,yield function vQ(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new F.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(r){e.retryPolicy(r)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const po=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function VP(){return VP=(0,Te.Z)(function*({url:n,body:t},e){var r,i;const o={"Content-Type":"application/json"},c=e.getImmediate({optional:!0});if(c){const k=yield c.getHeartbeatsHeader();k&&(o["X-Firebase-Client"]=k)}const d={method:"POST",body:JSON.stringify(t),headers:o};let f,y;try{f=yield fetch(n,d)}catch(k){throw po.create("fetch-network-error",{originalErrorMessage:null===(r=k)||void 0===r?void 0:r.message})}if(200!==f.status)throw po.create("fetch-status-error",{httpStatus:f.status});try{y=yield f.json()}catch(k){throw po.create("fetch-parse-error",{originalErrorMessage:null===(i=k)||void 0===i?void 0:i.message})}const w=y.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw po.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const E=1e3*Number(w[1]),A=Date.now();return{token:y.token,expireTimeMillis:A+E,issuedAtTimeMillis:A}}),VP.apply(this,arguments)}const EQ="firebase-app-check-database",DQ=1,BC="firebase-app-check-store";let xI=null;function jP(){return jP=(0,Te.Z)(function*(n,t){const r=(yield function r6(){return xI||(xI=new Promise((n,t)=>{var e;try{const r=indexedDB.open(EQ,DQ);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var o;t(po.create("storage-open",{originalErrorMessage:null===(o=i.target.error)||void 0===o?void 0:o.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(BC,{keyPath:"compositeKey"})}}catch(r){t(po.create("storage-open",{originalErrorMessage:null===(e=r)||void 0===e?void 0:e.message}))}}),xI)}()).transaction(BC,"readwrite"),o=r.objectStore(BC).put({compositeKey:n,value:t});return new Promise((c,d)=>{o.onsuccess=f=>{c()},r.onerror=f=>{var y;d(po.create("storage-set",{originalErrorMessage:null===(y=f.target.error)||void 0===y?void 0:y.message}))}})}),jP.apply(this,arguments)}const VC=new Ec.Yd("@firebase/app-check");function a6(n,t){return(0,F.hl)()?function IQ(n,t){return function i6(n,t){return jP.apply(this,arguments)}(function o6(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{VC.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function ZP(){return ZP=(0,Te.Z)(function*(){const n=II();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),ZP.apply(this,arguments)}const OQ={error:"UNKNOWN_ERROR"};function MQ(n){return F.US.encodeString(JSON.stringify(n),!1)}function kI(n){return qP.apply(this,arguments)}function qP(){return qP=(0,Te.Z)(function*(n,t=!1){const e=n.app;!function t6(n){if(!os(n).activated)throw po.create("use-before-activation",{appName:n.name})}(e);const r=os(e);let o,i=r.token;if(!i){const f=yield r.cachedTokenPromise;f&&RI(f)&&(i=f)}if(!t&&i&&RI(i))return{token:i.token};let d,c=!1;if(function l6(){return II().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function BP(n,t){return VP.apply(this,arguments)}(function TQ(n,t){const{projectId:e,appId:r,apiKey:i}=n.options;return{url:`${LP}/projects/${e}/apps/${r}:${mQ}?key=${i}`,body:{debug_token:t}}}(e,yield function c6(){return ZP.apply(this,arguments)}()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0);const f=yield r.exchangeTokenPromise;return yield a6(e,f),Sc(e,Object.assign(Object.assign({},r),{token:f})),{token:f.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(f=>(r.exchangeTokenPromise=void 0,f)),c=!0),i=yield r.exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?VC.warn(f.message):VC.error(f),o=f}return i?(d={token:i.token},Sc(e,Object.assign(Object.assign({},r),{token:i})),yield a6(e,i)):d=function FQ(n){return{token:MQ(OQ),error:n}}(o),c&&function d6(n,t){const e=os(n).tokenObservers;for(const r of e)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch{}}(e,d),d}),qP.apply(this,arguments)}function WP(n,t){const e=os(n),r=e.tokenObservers.filter(i=>i.next!==t);0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),Sc(n,Object.assign(Object.assign({},e),{tokenObservers:r}))}function u6(n){const{app:t}=n,e=os(t);let r=e.tokenRefresher;r||(r=function PQ(n){const{app:t}=n;return new yQ((0,Te.Z)(function*(){let r;if(r=os(t).token?yield kI(n,!0):yield kI(n),r.error)throw r.error}),()=>!0,()=>{const e=os(t);if(e.token){let r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},e6.RETRIAL_MIN_WAIT,e6.RETRIAL_MAX_WAIT)}(n),Sc(t,Object.assign(Object.assign({},e),{tokenRefresher:r}))),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function RI(n){return n.expireTimeMillis-Date.now()>0}class LQ{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=os(this.app);for(const e of t)WP(this.app,e.next);return Promise.resolve()}}const v6="app-check-internal";!function JQ(){(0,oo._registerComponent)(new Tc.wA("app-check",n=>function UQ(n,t){return new LQ(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(v6).initialize()})),(0,oo._registerComponent)(new Tc.wA(v6,n=>function BQ(n){return{getToken:t=>kI(n,t),addTokenListener:t=>function zP(n,t,e,r){const{app:i}=n,o=os(i),c={next:e,error:r,type:t};if(Sc(i,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,c]})),o.token&&RI(o.token)){const d=o.token;Promise.resolve().then(()=>{e({token:d.token}),u6(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>u6(n))}(n,"INTERNAL",t),removeTokenListener:t=>WP(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,oo.registerVersion)("@firebase/app-check","0.5.12")}();class jC{constructor(){return(0,kn.vb)("app-check")}}typeof window<"u"&&window;var XP=U(127);const eF=new s.OlP("angularfire2.auth.use-emulator"),tF=new s.OlP("angularfire2.auth.settings"),nF=new s.OlP("angularfire2.auth.tenant-id"),rF=new s.OlP("angularfire2.auth.langugage-code"),iF=new s.OlP("angularfire2.auth.use-device-language"),sF=new s.OlP("angularfire.auth.persistence"),oF=(n,t,e,r,i,o,c,d)=>(0,Hi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=t.runOutsideAngular(()=>n.auth());if(e&&f.useEmulator(...e),r&&(f.tenantId=r),f.languageCode=i,o&&f.useDeviceLanguage(),c)for(const[y,w]of Object.entries(c))f.settings[y]=w;return d&&f.setPersistence(d),f},[e,r,i,o,c,d]);let aF=(()=>{class n{constructor(e,r,i,o,c,d,f,y,w,E,A,k){const M=new dn.x,V=Fe(void 0).pipe((0,DI.Q)(c.outsideAngular),Bn(()=>o.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,1451)))),(0,S.U)(()=>(0,Hi.on)(e,o,r)),(0,S.U)(W=>oF(W,o,d,y,w,E,f,A)),mD({bufferSize:1,refCount:!1}));if(Mc(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Fe(null);else{V.pipe(ua()).subscribe();const ne=V.pipe(Bn(me=>me.getRedirectResult().then(Pe=>Pe,()=>null)),kn.iC,mD({bufferSize:1,refCount:!1})),he=V.pipe(Bn(me=>new Tn.y(Pe=>({unsubscribe:o.runOutsideAngular(()=>me.onAuthStateChanged(He=>Pe.next(He),He=>Pe.error(He),()=>Pe.complete()))})))),Ie=V.pipe(Bn(me=>new Tn.y(Pe=>({unsubscribe:o.runOutsideAngular(()=>me.onIdTokenChanged(He=>Pe.next(He),He=>Pe.error(He),()=>Pe.complete()))}))));this.authState=ne.pipe(JH(he),(0,PP.R)(c.outsideAngular),(0,DI.Q)(c.insideAngular)),this.user=ne.pipe(JH(Ie),(0,PP.R)(c.outsideAngular),(0,DI.Q)(c.insideAngular)),this.idToken=this.user.pipe(Bn(me=>me?(0,Ut.D)(me.getIdToken()):Fe(null))),this.idTokenResult=this.user.pipe(Bn(me=>me?(0,Ut.D)(me.getIdTokenResult()):Fe(null))),this.credential=(0,jy.T)(ne,M,this.authState.pipe(Fr(me=>!me))).pipe((0,S.U)(me=>me?.user?me:null),(0,PP.R)(c.outsideAngular),(0,DI.Q)(c.insideAngular))}return(0,Hi.pX)(this,V,o,{spy:{apply:(W,ne,he)=>{(W.startsWith("signIn")||W.startsWith("createUser"))&&he.then(Ie=>M.next(Ie))}}})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Hi.Dh),s.LFG(Hi.xv,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(kn.HU),s.LFG(eF,8),s.LFG(tF,8),s.LFG(nF,8),s.LFG(rF,8),s.LFG(iF,8),s.LFG(sF,8),s.LFG(jC,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function w6(n,t){return function rX(n,t=Qg.z){return new Tn.y(e=>{let r;return null!=t?t.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},e)}):r=n.onSnapshot({includeMetadataChanges:!0},e),()=>{r?.()}})}(n,t)}function lF(n,t){return w6(n,t).pipe((0,S.U)(e=>({payload:e,type:"query"})))}function MI(n,t){return lF(n,t).pipe(ca(void 0),jR(),(0,S.U)(([e,r])=>{const i=r.payload.docChanges(),o=i.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,d)=>{const f=i.find(w=>w.doc.ref.isEqual(c.ref)),y=e?.payload.docs.find(w=>w.ref.isEqual(c.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(c.metadata)||!f&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||o.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),o}))}function C6(n,t,e){return MI(n,e).pipe(da((r,i)=>function sX(n,t,e){return t.forEach(r=>{e.indexOf(r.type)>-1&&(n=function oX(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return cF(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return cF(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return cF(n,t.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),t),[]),oh(),(0,S.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function cF(n,t,e,...r){const i=n.slice();return i.splice(t,e,...r),i}function T6(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class E6{constructor(t,e,r){this.ref=t,this.query=e,this.afs=r}stateChanges(t){let e=MI(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,S.U)(r=>r.filter(i=>t.indexOf(i.type)>-1)))),e.pipe(ca(void 0),jR(),Fr(([r,i])=>i.length>0||!r),(0,S.U)(([r,i])=>i),kn.iC)}auditTrail(t){return this.stateChanges(t).pipe(da((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=T6(t);return C6(this.query,e,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(t={}){return lF(this.query,this.afs.schedulers.outsideAngular).pipe((0,S.U)(e=>e.payload.docs.map(r=>t.idField?Object.assign(Object.assign({},r.data()),{[t.idField]:r.id}):r.data())),kn.iC)}get(t){return(0,Ut.D)(this.query.get(t)).pipe(kn.iC)}add(t){return this.ref.add(t)}doc(t){return new D6(this.ref.doc(t),this.afs)}}class D6{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const r=this.ref.collection(t),{ref:i,query:o}=A6(r,e);return new E6(i,o,this.afs)}snapshotChanges(){return function iX(n,t){return w6(n,t).pipe(ca(void 0),jR(),(0,S.U)(([e,r])=>r.exists?e?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,S.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Ut.D)(this.ref.get(t)).pipe(kn.iC)}}class aX{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?MI(this.query,this.afs.schedulers.outsideAngular).pipe((0,S.U)(e=>e.filter(r=>t.indexOf(r.type)>-1)),Fr(e=>e.length>0),kn.iC):MI(this.query,this.afs.schedulers.outsideAngular).pipe(kn.iC)}auditTrail(t){return this.stateChanges(t).pipe(da((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=T6(t);return C6(this.query,e,this.afs.schedulers.outsideAngular).pipe(kn.iC)}valueChanges(t={}){return lF(this.query,this.afs.schedulers.outsideAngular).pipe((0,S.U)(r=>r.payload.docs.map(i=>t.idField?Object.assign({[t.idField]:i.id},i.data()):i.data())),kn.iC)}get(t){return(0,Ut.D)(this.query.get(t)).pipe(kn.iC)}}const S6=new s.OlP("angularfire2.enableFirestorePersistence"),I6=new s.OlP("angularfire2.firestore.persistenceSettings"),lX=new s.OlP("angularfire2.firestore.settings"),cX=new s.OlP("angularfire2.firestore.use-emulator");function A6(n,t=(e=>e)){return{query:t(n),ref:n}}let Na=(()=>{class n{constructor(e,r,i,o,c,d,f,y,w,E,A,k,M,V,W,ne,he){this.schedulers=f;const Ie=(0,Hi.on)(e,d,r),me=w;E&&oF(Ie,d,A,M,V,W,k,ne),[this.firestore,this.persistenceEnabled$]=(0,Hi.cc)(`${Ie.name}.firestore`,"AngularFirestore",Ie.name,()=>{const Pe=d.runOutsideAngular(()=>Ie.firestore());if(o&&Pe.settings(o),me&&Pe.useEmulator(...me),i&&!Mc(c)){const He=()=>{try{return(0,Ut.D)(Pe.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(ct){return typeof console<"u"&&console.warn(ct),Fe(!1)}};return[Pe,d.runOutsideAngular(He)]}return[Pe,Fe(!1)]},[o,me,i])}collection(e,r){let i;i="string"==typeof e?this.firestore.collection(e):e;const{ref:o,query:c}=A6(i,r),d=this.schedulers.ngZone.run(()=>o);return new E6(d,c,this)}collectionGroup(e,r){const i=r||(c=>c),o=this.firestore.collectionGroup(e);return new aX(i(o),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const i=this.schedulers.ngZone.run(()=>r);return new D6(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Hi.Dh),s.LFG(Hi.xv,8),s.LFG(S6,8),s.LFG(lX,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(kn.HU),s.LFG(I6,8),s.LFG(cX,8),s.LFG(aF,8),s.LFG(eF,8),s.LFG(tF,8),s.LFG(nF,8),s.LFG(rF,8),s.LFG(iF,8),s.LFG(sF,8),s.LFG(jC,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),uX=(()=>{class n{constructor(){XP.Z.registerVersion("angularfire",kn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:S6,useValue:!0},{provide:I6,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[Na]}),n})(),vp=(()=>{class n extends hm{constructor(e){super(),this.firestore=e,this.collection=e.collection(dh.ACCOUNTS)}login(e){return this.firestore.collection(dh.ACCOUNTS,r=>r.where("deleted","==",!1).where("email","==",e.username).where("password","==",e.password).limit(1)).valueChanges()}create(e){return this.collection.doc(e.id).set(e),Fe(e)}delete(e){return(0,Ut.D)(this.collection.doc(e).delete())}fetch(e){return Fe()}fetchAll(){return this.collection.valueChanges()}update(e,r){return(0,Ut.D)(this.collection.doc(e).update(r))}search(e,r){let i=this.collection.ref;return console.log(e),e.forEach(o=>{i.where(o.field,o.comparator,o.value)}),(0,Ut.D)(i.get()).pipe((0,S.U)(o=>{const c=[];return o.forEach(d=>{c.push(d.data())}),console.log(c),c}))}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Na))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pv=(()=>{class n extends Mw{constructor(e){super(),this.firestore=e,this.collection=e.collection(dh.CLIENTS)}create(e){return this.collection.doc(e.id).set(e),Fe(e)}delete(e){return(0,Ut.D)(this.collection.doc(e).delete())}fetch(e){return Fe()}fetchAll(){return this.collection.valueChanges()}update(e,r){return(0,Ut.D)(this.collection.doc(e).update(r))}search(e,r){return Fe()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Na))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gm=(()=>{class n extends im{constructor(e){super(),this.firestore=e,this.collection=e.collection(dh.PROJECTS)}create(e){return this.collection.doc(e.id).set(e),Fe(e)}delete(e){return(0,Ut.D)(this.collection.doc(e).delete())}fetch(e){return this.collection.doc(e).valueChanges()}fetchAll(){return this.collection.valueChanges()}update(e,r){return(0,Ut.D)(this.collection.doc(e).update(r))}search(e,r){return Fe()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Na))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zm=(()=>{class n extends a{constructor(e){super(),this.firestore=e,this.collection=e.collection(dh.RESOURCES)}create(e){return this.collection.doc(e.id).set(e),Fe(e)}delete(e){return(0,Ut.D)(this.collection.doc(e).delete())}fetch(e){return Fe()}fetchByProject(e){return this.firestore.collection(dh.RESOURCES,r=>r.where("project","==",e)).valueChanges()}update(e,r){return(0,Ut.D)(this.collection.doc(e).update(r))}search(e,r){return Fe()}fetchAll(){return this.firestore.collection(dh.RESOURCES,e=>e.where("delete","==",!1)).valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Na))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PI=(()=>{class n extends IR{constructor(e){super(),this.firestore=e,this.collection=e.collection(dh.WORKING_DAYS)}create(e){return Fe()}delete(e){return Fe()}fetch(e){return Fe()}fetchAll(){return this.collection.valueChanges()}update(e,r){return(0,Ut.D)(this.collection.doc(e).update(r))}search(e,r){return Fe()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Na))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fv=(()=>{class n extends Rw{constructor(e){super(),this.firestore=e,this.collection=e.collection(dh.CURRENCY_EXCHANGE)}create(e){return this.collection.doc(e.id).set(e),Fe(e)}delete(e){return(0,Ut.D)(this.collection.doc(e).delete())}fetch(e){return Fe()}fetchAll(){return this.collection.valueChanges()}update(e,r){return(0,Ut.D)(this.collection.doc(e).update(r))}search(e,r){return Fe()}static#e=this.\u0275fac=function(r){return new(r||n)(s.LFG(Na))};static#t=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const dX=[{provide:zy,useClass:yB},{deps:[Na],provide:vp,useFactory:n=>new vp(n)},{deps:[vp],provide:PR,useFactory:n=>new PR(n)},{deps:[vp],provide:BR,useFactory:n=>new BR(n)},{deps:[vp],provide:VR,useFactory:n=>new VR(n)},{deps:[vp],provide:FR,useFactory:n=>new FR(n)},{deps:[vp],provide:UR,useFactory:n=>new UR(n)},{deps:[vp],provide:LR,useFactory:n=>new LR(n)}],hX=[{provide:p,useClass:_B},{deps:[Na],provide:Pv,useFactory:n=>new Pv(n)},{deps:[Pv],provide:xR,useFactory:n=>new xR(n)},{deps:[Pv],provide:OR,useFactory:n=>new OR(n)},{deps:[Pv],provide:kR,useFactory:n=>new kR(n)},{deps:[Pv],provide:RR,useFactory:n=>new RR(n)}],fX=[{provide:HD,useClass:h},{deps:[Na],provide:Gm,useFactory:n=>new Gm(n)},{deps:[Gm],provide:$D,useFactory:n=>new $D(n)},{deps:[Gm],provide:qD,useFactory:n=>new qD(n)},{deps:[Gm],provide:ww,useFactory:n=>new ww(n)},{deps:[Gm],provide:GD,useFactory:n=>new GD(n)},{deps:[Gm],provide:ZD,useFactory:n=>new ZD(n)}],pX=[{provide:m,useClass:N},{deps:[Na],provide:Zm,useFactory:n=>new Zm(n)},{deps:[Zm],provide:b,useFactory:n=>new b(n)},{deps:[Zm],provide:D,useFactory:n=>new D(n)},{deps:[Zm],provide:l,useFactory:n=>new l(n)},{deps:[Zm],provide:u,useFactory:n=>new u(n)},{deps:[Zm],provide:T,useFactory:n=>new T(n)}],gX=[{provide:gB,useClass:mB},{deps:[Na],provide:PI,useFactory:n=>new PI(n)},{deps:[PI],provide:AR,useFactory:n=>new AR(n)},{deps:[PI],provide:NR,useFactory:n=>new NR(n)}],mX=[{provide:pB,useClass:SR},{deps:[Na],provide:Fv,useFactory:n=>new Fv(n)},{deps:[Fv],provide:DR,useFactory:n=>new DR(n)},{deps:[Fv],provide:CR,useFactory:n=>new CR(n)},{deps:[Fv],provide:ER,useFactory:n=>new ER(n)},{deps:[Fv],provide:TR,useFactory:n=>new TR(n)}],_X_firebase={apiKey:"AIzaSyAg_FtlI1_5LgKh0cgXEMxQ_XFp2uAskkU",authDomain:"estimate-674a4.firebaseapp.com",projectId:"estimate-674a4",storageBucket:"estimate-674a4.appspot.com",messagingSenderId:"484728303804",appId:"1:484728303804:web:ce5e31020ba5e783d160b9",measurementId:"G-W9WFLFDK8R"},N6="firebasestorage.googleapis.com",x6="storageBucket";class ei extends F.ZR{constructor(t,e){super(uF(t),`Firebase Storage: ${e} (${uF(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ei.prototype)}_codeEquals(t){return uF(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function uF(n){return"storage/"+n}function dF(){return new ei("unknown","An unknown error occurred, please check the error payload for server response.")}function k6(){return new ei("canceled","User canceled the upload/download.")}function R6(){return new ei("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Lv(n){return new ei("invalid-argument",n)}function O6(){return new ei("app-deleted","The Firebase app was deleted.")}function M6(n){return new ei("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function HC(n,t){return new ei("invalid-format","String does not match format '"+n+"': "+t)}function $C(n){throw new ei("internal-error","Internal error: "+n)}class Ls{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let r;try{r=Ls.makeFromUrl(t,e)}catch{return new Ls(t,"")}if(""===r.path)return r;throw function AX(n){return new ei("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(me){me.path_=decodeURIComponent(me.path)}const E=e.replace(/[.]/g,"\\."),Ie=[{regex:d,indices:{bucket:1,path:3},postModify:function o(me){"/"===me.path.charAt(me.path.length-1)&&(me.path_=me.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${E}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${e===N6?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let me=0;me<Ie.length;me++){const Pe=Ie[me],He=Pe.regex.exec(t);if(He){let Bt=He[Pe.indices.path];Bt||(Bt=""),r=new Ls(He[Pe.indices.bucket],Bt),Pe.postModify(r);break}}if(null==r)throw function IX(n){return new ei("invalid-url","Invalid URL '"+n+"'.")}(t);return r}}class RX{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function FI(n){return"string"==typeof n||n instanceof String}function P6(n){return hF()&&n instanceof Blob}function hF(){return typeof Blob<"u"}function fF(n,t,e,r){if(r<t)throw Lv(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>e)throw Lv(`Invalid value for '${n}'. Expected ${e} or less.`)}function wh(n,t,e){let r=t;return null==e&&(r=`https://${t}`),`${e}://${r}/v0${n}`}function F6(n){const t=encodeURIComponent;let e="?";for(const r in n)n.hasOwnProperty(r)&&(e=e+(t(r)+"=")+t(n[r])+"&");return e=e.slice(0,-1),e}var bp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(bp||(bp={})),bp))();class UX{constructor(t,e,r,i,o,c,d,f,y,w,E){this.url_=t,this.method_=e,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=f,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,k)=>{this.resolve_=A,this.reject_=k,this.start_()})}start_(){const e=(r,i)=>{const o=this.resolve_,c=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function PX(n){return void 0!==n}(f)?o():o(f)}catch(f){c(f)}else if(null!==d){const f=dF();f.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,f):f)}else c(i.canceled?this.appDelete_?O6():k6():function SX(){return new ei("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?e(0,new LI(!1,null,!0)):this.backoffId_=function OX(n,t,e){let r=1,i=null,o=null,c=!1,d=0;function f(){return 2===d}let y=!1;function w(...W){y||(y=!0,t.apply(null,W))}function E(W){i=setTimeout(()=>{i=null,n(k,f())},W)}function A(){o&&clearTimeout(o)}function k(W,...ne){if(y)return void A();if(W)return A(),void w.call(null,W,...ne);if(f()||c)return A(),void w.call(null,W,...ne);let Ie;r<64&&(r*=2),1===d?(d=2,Ie=0):Ie=1e3*(r+Math.random()),E(Ie)}let M=!1;function V(W){M||(M=!0,A(),!y&&(null!==i?(W||(d=2),clearTimeout(i),E(0)):W||(d=1)))}return E(0),o=setTimeout(()=>{c=!0,V(!0)},e),V}((r,i)=>{if(i)return void r(!1,new LI(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const d=o.getErrorCode()===bp.NO_ERROR,f=o.getStatus();if(!d||this.isRetryStatusCode_(f)){const w=o.getErrorCode()===bp.ABORT;return void r(!1,new LI(!1,null,w))}const y=-1!==this.successCodes_.indexOf(f);r(!0,new LI(y,o))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function MX(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,i=-1!==[408,429].indexOf(t),o=-1!==this.additionalRetryCodes_.indexOf(t);return e||i||o}}class LI{constructor(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r}}function ZX(...n){const t=function GX(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let r=0;r<n.length;r++)e.append(n[r]);return e.getBlob()}if(hF())return new Blob(n);throw new ei("unsupported-environment","This browser doesn't seem to support creating Blobs")}const xa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pF{constructor(t,e){this.data=t,this.contentType=e||null}}function gF(n,t){switch(n){case xa.RAW:return new pF(L6(t));case xa.BASE64:case xa.BASE64URL:return new pF(U6(n,t));case xa.DATA_URL:return new pF(function KX(n){const t=new B6(n);return t.base64?U6(xa.BASE64,t.rest):function WX(n){let t;try{t=decodeURIComponent(n)}catch{throw HC(xa.DATA_URL,"Malformed data URL.")}return L6(t)}(t.rest)}(t),function YX(n){return new B6(n).contentType}(t))}throw dF()}function L6(n){const t=[];for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++e),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function U6(n,t){switch(n){case xa.BASE64:{const i=-1!==t.indexOf("-"),o=-1!==t.indexOf("_");if(i||o)throw HC(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case xa.BASE64URL:{const i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw HC(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function zX(n){return atob(n)}(t)}catch{throw HC(n,"Invalid character found")}const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}class B6{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw HC(xa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=e[1]||null;null!=r&&(this.base64=function JX(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}class $u{constructor(t,e){let r=0,i="";P6(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(P6(this.data_)){const i=function qX(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===i?null:new $u(i)}{const r=new Uint8Array(this.data_.buffer,t,e-t);return new $u(r,!0)}}static getBlob(...t){if(hF()){const e=t.map(r=>r instanceof $u?r.data_:r);return new $u(ZX.apply(null,e))}{const e=t.map(c=>FI(c)?gF(xa.RAW,c).data:c.data_);let r=0;e.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let o=0;return e.forEach(c=>{for(let d=0;d<c.length;d++)i[o++]=c[d]}),new $u(i,!0)}}uploadData(){return this.data_}}function mF(n){let t;try{t=JSON.parse(n)}catch{return null}return function LX(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function V6(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function eee(n,t){return t}class go{constructor(t,e,r,i){this.server=t,this.local=e||t,this.writable=!!r,this.xform=i||eee}}let UI=null;function GC(){if(UI)return UI;const n=[];n.push(new go("bucket")),n.push(new go("generation")),n.push(new go("metageneration")),n.push(new go("name","fullPath",!0));const e=new go("name");e.xform=function t(o,c){return function tee(n){return!FI(n)||n.length<2?n:V6(n)}(c)},n.push(e);const i=new go("size");return i.xform=function r(o,c){return void 0!==c?Number(c):c},n.push(i),n.push(new go("timeCreated")),n.push(new go("updated")),n.push(new go("md5Hash",null,!0)),n.push(new go("cacheControl",null,!0)),n.push(new go("contentDisposition",null,!0)),n.push(new go("contentEncoding",null,!0)),n.push(new go("contentLanguage",null,!0)),n.push(new go("contentType",null,!0)),n.push(new go("metadata","customMetadata",!0)),UI=n,UI}function j6(n,t,e){const r=mF(t);return null===r?null:function ree(n,t,e){const r={type:"file"},i=e.length;for(let o=0;o<i;o++){const c=e[o];r[c.local]=c.xform(r,t[c.server])}return function nee(n,t){Object.defineProperty(n,"ref",{get:function e(){const o=new Ls(n.bucket,n.fullPath);return t._makeStorageReference(o)}})}(r,n),r}(n,r,e)}function _F(n,t){const e={},r=t.length;for(let i=0;i<r;i++){const o=t[i];o.writable&&(e[o.server]=n[o.local])}return JSON.stringify(e)}const H6="prefixes",$6="items";class Gu{constructor(t,e,r,i){this.url=t,this.method=e,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Zu(n){if(!n)throw dF()}function BI(n,t){return function e(r,i){const o=j6(n,i,t);return Zu(null!==o),o}}function Uv(n){return function t(e,r){let i;return i=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function EX(){return new ei("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function TX(){return new ei("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function CX(n){return new ei("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function DX(n){return new ei("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function ZC(n){const t=Uv(n);return function e(r,i){let o=t(r,i);return 404===r.getStatus()&&(o=function wX(n){return new ei("object-not-found","Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function G6(n,t,e){const i=wh(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Gu(i,"GET",BI(n,e),c);return d.errorHandler=ZC(t),d}function cee(n,t,e,r,i){const o={};o.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(o.delimiter=e),r&&(o.pageToken=r),i&&(o.maxResults=i);const d=wh(t.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,w=new Gu(d,"GET",function aee(n,t){return function e(r,i){const o=function oee(n,t,e){const r=mF(e);return null===r?null:function see(n,t,e){const r={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[H6])for(const i of e[H6]){const o=i.replace(/\/$/,""),c=n._makeStorageReference(new Ls(t,o));r.prefixes.push(c)}if(e[$6])for(const i of e[$6]){const o=n._makeStorageReference(new Ls(t,i.name));r.items.push(o)}return r}(n,t,r)}(n,t,i);return Zu(null!==o),o}}(n,t.bucket),y);return w.urlParams=o,w.errorHandler=Uv(t),w}function q6(n,t,e){const r=Object.assign({},e);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=function fee(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}class VI{constructor(t,e,r,i){this.current=t,this.total=e,this.finalized=!!r,this.metadata=i||null}}function yF(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch{Zu(!1)}return Zu(!!e&&-1!==(t||["active"]).indexOf(e)),e}const _ee={STATE_CHANGED:"state_changed"},mo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function vF(n){switch(n){case"running":case"pausing":case"canceling":return mo.RUNNING;case"paused":return mo.PAUSED;case"success":return mo.SUCCESS;case"canceled":return mo.CANCELED;default:return mo.ERROR}}class yee{constructor(t,e,r){if(function FX(n){return"function"==typeof n}(t)||null!=e||null!=r)this.next=t,this.error=e??void 0,this.complete=r??void 0;else{const o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Bv(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}let K6=null;class vee{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=bp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=bp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=bp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,r,i){if(this.sent_)throw $C("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $C("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $C("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $C("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $C("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class bee extends vee{initXhr(){this.xhr_.responseType="text"}}function Ic(){return K6?K6():new bee}class Y6{constructor(t,e,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=r,this._mappings=GC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,r])=>{switch(this._state){case"running":t(e,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const r=function pee(n,t,e,r,i){const o=t.bucketOnlyServerUrl(),c=q6(t,r,i),d={name:c.fullPath},f=wh(o,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},E=_F(c,e),M=new Gu(f,"POST",function k(V){let W;yF(V);try{W=V.getResponseHeader("X-Goog-Upload-URL")}catch{Zu(!1)}return Zu(FI(W)),W},n.maxUploadRetryTime);return M.urlParams=d,M.headers=w,M.body=E,M.errorHandler=Uv(t),M}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ic,t,e);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,r)=>{const i=function gee(n,t,e,r){const f=new Gu(e,"POST",function o(y){const w=yF(y,["active","final"]);let E=null;try{E=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Zu(!1)}E||Zu(!1);const A=Number(E);return Zu(!isNaN(A)),new VI(A,r.size(),"final"===w)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=Uv(t),f}(this._ref.storage,this._ref._location,t,this._blob),o=this._ref.storage._makeRequest(i,Ic,e,r);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new VI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let c;try{c=function mee(n,t,e,r,i,o,c,d){const f=new VI(0,0);if(c?(f.current=c.current,f.total=c.total):(f.current=0,f.total=r.size()),r.size()!==f.total)throw function xX(){return new ei("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=f.total-f.current;let w=y;i>0&&(w=Math.min(w,i));const E=f.current,M={"X-Goog-Upload-Command":w===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${f.current}`},V=r.slice(E,E+w);if(null===V)throw R6();const Ie=new Gu(e,"POST",function W(me,Pe){const He=yF(me,["active","final"]),ct=f.current+w,Bt=r.size();let Dn;return Dn="final"===He?BI(t,o)(me,Pe):null,new VI(ct,Bt,"final"===He,Dn)},t.maxUploadRetryTime);return Ie.headers=M,Ie.body=V.uploadData(),Ie.progressCallback=d||null,Ie.errorHandler=Uv(n),Ie}(this._ref._location,this._ref.storage,r,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(c,Ic,i,o);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const r=G6(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ic,t,e);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const r=function z6(n,t,e,r,i){const o=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let Ie="";for(let me=0;me<2;me++)Ie+=Math.random().toString().slice(2);return Ie}();c["Content-Type"]="multipart/related; boundary="+f;const y=q6(t,r,i),w=_F(y,e),k=$u.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+f+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+f+"--");if(null===k)throw R6();const M={name:y.fullPath},V=wh(o,n.host,n._protocol),ne=n.maxUploadRetryTime,he=new Gu(V,"POST",BI(n,e),ne);return he.urlParams=M,he.headers=c,he.body=k.uploadData(),he.errorHandler=Uv(t),he}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ic,t,e);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=k6(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=vF(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,r,i){const o=new yee(e||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(vF(this._state)){case mo.SUCCESS:Bv(this._resolve.bind(null,this.snapshot))();break;case mo.CANCELED:case mo.ERROR:Bv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(vF(this._state)){case mo.RUNNING:case mo.PAUSED:t.next&&Bv(t.next.bind(t,this.snapshot))();break;case mo.SUCCESS:t.complete&&Bv(t.complete.bind(t))();break;default:t.error&&Bv(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class qm{constructor(t,e){this._service=t,this._location=e instanceof Ls?e:Ls.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new qm(t,e)}get root(){const t=new Ls(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return V6(this._location.path)}get storage(){return this._service}get parent(){const t=function QX(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Ls(this._location.bucket,t);return new qm(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw M6(t)}}function Q6(n,t,e){return bF.apply(this,arguments)}function bF(){return bF=(0,Te.Z)(function*(n,t,e){const i=yield X6(n,{pageToken:e});t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&(yield Q6(n,t,i.nextPageToken))}),bF.apply(this,arguments)}function X6(n,t){null!=t&&"number"==typeof t.maxResults&&fF("options.maxResults",1,1e3,t.maxResults);const e=t||{},r=cee(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(r,Ic)}function Ree(n){n._throwIfRoot("getDownloadURL");const t=function uee(n,t,e){const i=wh(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Gu(i,"GET",function lee(n,t){return function e(r,i){const o=j6(n,i,t);return Zu(null!==o),function iee(n,t,e,r){const i=mF(t);if(null===i||!FI(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const c=encodeURIComponent;return o.split(",").map(y=>{const E=n.fullPath;return wh("/b/"+c(n.bucket)+"/o/"+c(E),e,r)+F6({alt:"media",token:y})})[0]}(o,i,n.host,n._protocol)}}(n,e),c);return d.errorHandler=ZC(t),d}(n.storage,n._location,GC());return n.storage.makeRequestWithTokens(t,Ic).then(e=>{if(null===e)throw function kX(){return new ei("no-download-url","The given file does not have any download URLs.")}();return e})}function e$(n,t){const e=function XX(n,t){const e=t.split("/").filter(r=>r.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),r=new Ls(n._location.bucket,e);return new qm(n.storage,r)}function t$(n,t){if(n instanceof wF){const e=n;if(null==e._bucket)throw function NX(){return new ei("no-default-bucket","No default bucket found. Did you set the '"+x6+"' property when initializing the app?")}();const r=new qm(e,e._bucket);return null!=t?t$(r,t):r}return void 0!==t?e$(n,t):n}function Fee(n,t){if(t&&function Mee(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof wF)return function Pee(n,t){return new qm(n,t)}(n,t);throw Lv("To use ref(service, url), the first argument must be a Storage instance.")}return t$(n,t)}function n$(n,t){const e=t?.[x6];return null==e?null:Ls.makeFromBucketSpec(e,n)}class wF{constructor(t,e,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=N6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ls.makeFromBucketSpec(i,this._host):n$(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Ls.makeFromBucketSpec(this._url,t):n$(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){fF("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){fF("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,Te.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const r=yield e.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,Te.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new qm(this,t)}_makeRequest(t,e,r,i){if(this._deleted)return new RX(O6());{const o=function $X(n,t,e,r,i,o){const c=F6(n.urlParams),d=n.url+c,f=Object.assign({},n.headers);return function jX(n,t){t&&(n["X-Firebase-GMPID"]=t)}(f,t),function BX(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(f,e),function VX(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(f,o),function HX(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(f,r),new UX(d,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(t,this._appId,r,i,e,this._firebaseVersion);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(t,e){var r=this;return(0,Te.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(t,e,i,o).getPromise()})()}}const r$="@firebase/storage";function o$(n,t){return Fee(n=(0,F.m9)(n),t)}function zee(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new wF(e,r,i,t,oo.SDK_VERSION)}!function Wee(){(0,oo._registerComponent)(new Tc.wA("storage",zee,"PUBLIC").setMultipleInstances(!0)),(0,oo.registerVersion)(r$,"0.9.9",""),(0,oo.registerVersion)(r$,"0.9.9","esm2017")}();class jI{constructor(t,e,r){this._delegate=t,this.task=e,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class a${constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new jI(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(r=>{if(t)return t(new jI(r,this,this._ref))},e)}on(t,e,r,i){let o;return e&&(o="function"==typeof e?c=>e(new jI(c,this,this._ref)):{next:e.next?c=>e.next(new jI(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,r||void 0,i||void 0)}}class l${constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Ch(t,this._service))}get items(){return this._delegate.items.map(t=>new Ch(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ch{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function Zee(n,t){return e$(n,t)}(this._delegate,t);return new Ch(e,this.storage)}get root(){return new Ch(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new Ch(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new a$(function Uee(n,t,e){return function Iee(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new Y6(n,new $u(t),e)}(n=(0,F.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=xa.RAW,r){this._throwIfRoot("putString");const i=gF(e,t),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new a$(new Y6(this._delegate,new $u(i.data,!0),o),this)}listAll(){return function Hee(n){return function Nee(n){const t={prefixes:[],items:[]};return Q6(n,t).then(()=>t)}(n=(0,F.m9)(n))}(this._delegate).then(t=>new l$(t,this.storage))}list(t){return function jee(n,t){return X6(n=(0,F.m9)(n),t)}(this._delegate,t||void 0).then(e=>new l$(e,this.storage))}getMetadata(){return function Bee(n){return function xee(n){n._throwIfRoot("getMetadata");const t=G6(n.storage,n._location,GC());return n.storage.makeRequestWithTokens(t,Ic)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(t){return function Vee(n,t){return function kee(n,t){n._throwIfRoot("updateMetadata");const e=function dee(n,t,e,r){const o=wh(t.fullServerUrl(),n.host,n._protocol),d=_F(e,r),y=n.maxOperationRetryTime,w=new Gu(o,"PATCH",BI(n,r),y);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=d,w.errorHandler=ZC(t),w}(n.storage,n._location,t,GC());return n.storage.makeRequestWithTokens(e,Ic)}(n=(0,F.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function $ee(n){return Ree(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Gee(n){return function Oee(n){n._throwIfRoot("deleteObject");const t=function hee(n,t){const r=wh(t.fullServerUrl(),n.host,n._protocol),d=new Gu(r,"DELETE",function c(f,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=ZC(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,Ic)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw M6(t)}}class c${constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(u$(t))throw Lv("ref() expected a child path but got a URL, use refFromURL instead.");return new Ch(o$(this._delegate,t),this)}refFromURL(t){if(!u$(t))throw Lv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ls.makeFromUrl(t,this._delegate.host)}catch{throw Lv("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ch(o$(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,r={}){!function qee(n,t,e,r={}){!function Lee(n,t,e,r={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,F.Sg)(i,n.app.options.projectId))}(n,t,e,r)}(this._delegate,t,e,r)}}function u$(n){return/^[A-Za-z]+:\/\//.test(n)}function Qee(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:t});return new c$(e,r)}function d$(n){const t=function ete(n){return new Tn.y(t=>{const e=c=>t.next(c);e(n.snapshot);const o=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){o()}}).pipe(function yX(n,t=Qg.z){return(0,xn.e)((e,r)=>{let i=null,o=null,c=null;const d=()=>{if(i){i.unsubscribe(),i=null;const y=o;o=null,r.next(y)}};function f(){const y=c+n,w=t.now();if(w<y)return i=this.schedule(void 0,y-w),void r.add(i);d()}e.subscribe((0,ve.x)(r,y=>{o=y,c=t.now(),i||(i=t.schedule(f,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,S.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function HI(n){return{getDownloadURL:()=>Fe(void 0).pipe(kn.fc,Bn(()=>n.getDownloadURL()),kn.iC),getMetadata:()=>Fe(void 0).pipe(kn.fc,Bn(()=>n.getMetadata()),kn.iC),delete:()=>(0,Ut.D)(n.delete()),child:t=>HI(n.child(t)),updateMetadata:t=>(0,Ut.D)(n.updateMetadata(t)),put:(t,e)=>d$(n.put(t,e)),putString:(t,e,r)=>d$(n.putString(t,e,r)),list:t=>(0,Ut.D)(n.list(t)),listAll:()=>(0,Ut.D)(n.listAll())}}!function Xee(n){const t={TaskState:mo,TaskEvent:_ee,StringFormat:xa,Storage:c$,Reference:Ch};n.INTERNAL.registerComponent(new Tc.wA("storage-compat",Qee,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(HR.Z);const tte=new s.OlP("angularfire2.storageBucket"),nte=new s.OlP("angularfire2.storage.maxUploadRetryTime"),rte=new s.OlP("angularfire2.storage.maxOperationRetryTime"),ite=new s.OlP("angularfire2.storage.use-emulator");let ste=(()=>{class n{constructor(e,r,i,o,c,d,f,y,w,E){const A=(0,Hi.on)(e,c,r);this.storage=(0,Hi.cc)(`${A.name}.storage.${i}`,"AngularFireStorage",A.name,()=>{const k=c.runOutsideAngular(()=>A.storage(i||void 0)),M=w;return M&&k.useEmulator(...M),f&&k.setMaxUploadRetryTime(f),y&&k.setMaxOperationRetryTime(y),k},[f,y])}ref(e){return HI(this.storage.ref(e))}refFromURL(e){return HI(this.storage.refFromURL(e))}upload(e,r,i){return HI(this.storage.ref(e)).put(r,i)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Hi.Dh),s.LFG(Hi.xv,8),s.LFG(tte,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(kn.HU),s.LFG(nte,8),s.LFG(rte,8),s.LFG(ite,8),s.LFG(jC,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ote=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})(),ate=(()=>{class n{constructor(){XP.Z.registerVersion("angularfire",kn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[ste],imports:[ote]}),n})();const h$="@firebase/database";let CF="";function p$(n){CF=n}class cte{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,F.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,F.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class ute{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,F.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const g$=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new cte(t)}}catch{}return new ute},zm=g$("localStorage"),TF=g$("sessionStorage"),Vv=new Ec.Yd("@firebase/database"),m$=function(){let n=1;return function(){return n++}}(),_$=function(n){const t=(0,F.dS)(n),e=new F.gQ;e.update(t);const r=e.digest();return F.US.encodeByteArray(r)},qC=function(...n){let t="";for(let e=0;e<n.length;e++){const r=n[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=qC.apply(null,r):t+="object"==typeof r?(0,F.Pz)(r):r,t+=" "}return t};let Wm=null,y$=!0;const v$=function(n,t){(0,F.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Vv.logLevel=Ec.in.VERBOSE,Wm=Vv.log.bind(Vv),t&&TF.set("logging_enabled",!0)):"function"==typeof n?Wm=n:(Wm=null,TF.remove("logging_enabled"))},as=function(...n){if(!0===y$&&(y$=!1,null===Wm&&!0===TF.get("logging_enabled")&&v$(!0)),Wm){const t=qC.apply(null,n);Wm(t)}},zC=function(n){return function(...t){as(n,...t)}},EF=function(...n){const t="FIREBASE INTERNAL ERROR: "+qC(...n);Vv.error(t)},qu=function(...n){const t=`FIREBASE FATAL ERROR: ${qC(...n)}`;throw Vv.error(t),new Error(t)},Us=function(...n){const t="FIREBASE WARNING: "+qC(...n);Vv.warn(t)},$I=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Th="[MIN_NAME]",zu="[MAX_NAME]",Km=function(n,t){if(n===t)return 0;if(n===Th||t===zu)return-1;if(t===Th||n===zu)return 1;{const e=GI(n),r=GI(t);return null!==e?null!==r?e-r==0?n.length-t.length:e-r:-1:null!==r?1:n<t?-1:1}},fte=function(n,t){return n===t?0:n<t?-1:1},WC=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(t))},DF=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const t=[];for(const r in n)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)0!==r&&(e+=","),e+=(0,F.Pz)(t[r]),e+=":",e+=DF(n[t[r]]);return e+="}",e},b$=function(n,t){const e=n.length;if(e<=t)return[n];const r=[];for(let i=0;i<e;i+=t)r.push(n.substring(i,i+t>e?e:i+t));return r};function ls(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const w$=function(n){(0,F.hu)(!$I(n),"Invalid JSON number");const r=1023;let i,o,c,d,f;0===n?(o=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=d+r,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(o=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(f=52;f;f-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(f=11;f;f-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(i?1:0),y.reverse();const w=y.join("");let E="";for(f=0;f<64;f+=8){let A=parseInt(w.substr(f,8),2).toString(16);1===A.length&&(A="0"+A),E+=A}return E.toLowerCase()},_te=new RegExp("^-?(0*)\\d{1,10}$"),C$=-2147483648,SF=2147483647,GI=function(n){if(_te.test(n)){const t=Number(n);if(t>=C$&&t<=SF)return t}return null},jv=function(n){try{n()}catch(t){setTimeout(()=>{throw Us("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},yte=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},KC=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class vte{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Us(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class bte{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(as("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Us(t)}}let YC=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const I$=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,x$="websocket",k$="long_polling";class AF{constructor(t,e,r,i,o=!1,c="",d=!1){this.secure=e,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zm.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&zm.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function R$(n,t,e){let r;if((0,F.hu)("string"==typeof t,"typeof type must == string"),(0,F.hu)("object"==typeof e,"typeof params must == object"),t===x$)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==k$)throw new Error("Unknown connection type: "+t);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function wte(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const i=[];return ls(e,(o,c)=>{i.push(o+"="+c)}),r+i.join("&")}class Cte{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,F.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,F.p$)(this.counters_)}}const NF={},xF={};function kF(n){const t=n.toString();return NF[t]||(NF[t]=new Cte),NF[t]}class Ete{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&jv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class wp{constructor(t,e,r,i,o,c,d){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zC(t),this.stats_=kF(e),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),R$(e,k$,f))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ete(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new RF((...o)=>{const[c,d,f,y,w]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=f;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[c,d]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&I$.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wp.forceAllow_=!0}static forceDisallow(){wp.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!wp.forceAllow_&&(wp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,F.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=(0,F.h$)(e),i=b$(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,F.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class RF{constructor(t,e,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=m$(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=RF.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){as("frame writing exception"),d.stack&&as(d.stack),as(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||as("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return e+=r,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),r()})}addTag(t,e){(0,F.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{as("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let qI=null;typeof MozWebSocket<"u"?qI=MozWebSocket:typeof WebSocket<"u"&&(qI=WebSocket);let Hv=(()=>{class n{constructor(e,r,i,o,c,d,f){this.connId=e,this.applicationId=i,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zC(this.connId),this.stats_=kF(r),this.connURL=n.connectionURL_(r,d,f,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,i,o,c){const d={v:"5"};return!(0,F.Yr)()&&typeof location<"u"&&location.hostname&&I$.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),o&&(d.ac=o),c&&(d.p=c),R$(e,x$,d)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zm.set("previous_websocket_failure",!0);try{let i;if((0,F.Yr)()){i={headers:{"User-Agent":`Firebase/5/${CF}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,d=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new qI(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&null!==qI&&!n.forceDisallow_}static previouslyFailed(){return zm.isInMemoryStorage||!0===zm.get("previous_websocket_failure")}markConnectionHealthy(){zm.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,F.cI)(r);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const r=(0,F.Pz)(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=b$(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),B$=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[wp,Hv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const r=Hv&&Hv.isAvailable();let i=r&&!Hv.previouslyFailed();if(e.webSocketOnly&&(r||Us("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Hv];else{const o=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class q${constructor(t,e,r,i,o,c,d,f,y,w){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=f,this.onKill_=y,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zC("c:"+this.id+":"),this.transportManager_=new B$(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=KC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=WC("t",t),r=WC("d",t);if("c"===e)this.onSecondaryControl_(r);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=WC("t",t),r=WC("d",t);"c"===e?this.onControl_(r):"d"===e&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=WC("t",t);if("d"in t){const r=t.d;if("h"===e)this.onHandshake_(r);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(r):"r"===e?this.onReset_(r):"e"===e?EF("Server Error: "+r):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):EF("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==r&&Us("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),KC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):KC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class z${put(t,e,r,i){}merge(t,e,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}}class W${constructor(t){this.allowedEvents_=t,this.listeners_={},(0,F.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});const i=this.getInitialEvent(t);i&&e.apply(r,i)}off(t,e,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===e&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(t){(0,F.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class zI extends W${constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zI}getInitialEvent(t){return(0,F.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const K$=32,Y$=768;class Pn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function En(){return new Pn("")}function ln(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Cp(n){return n.pieces_.length-n.pieceNum_}function Yn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Pn(n.pieces_,t)}function MF(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function JC(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function J$(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Pn(t,0)}function xr(n,t){const e=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)e.push(n.pieces_[r]);if(t instanceof Pn)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&e.push(r[i])}return new Pn(e,0)}function cn(n){return n.pieceNum_>=n.pieces_.length}function _o(n,t){const e=ln(n),r=ln(t);if(null===e)return t;if(e===r)return _o(Yn(n),Yn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function qte(n,t){const e=JC(n,0),r=JC(t,0);for(let i=0;i<e.length&&i<r.length;i++){const o=Km(e[i],r[i]);if(0!==o)return o}return e.length===r.length?0:e.length<r.length?-1:1}function PF(n,t){if(Cp(n)!==Cp(t))return!1;for(let e=n.pieceNum_,r=t.pieceNum_;e<=n.pieces_.length;e++,r++)if(n.pieces_[e]!==t.pieces_[r])return!1;return!0}function bl(n,t){let e=n.pieceNum_,r=t.pieceNum_;if(Cp(n)>Cp(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}class zte{constructor(t,e){this.errorPrefix_=e,this.parts_=JC(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);Q$(this)}}function Q$(n){if(n.byteLength_>Y$)throw new Error(n.errorPrefix_+"has a key path longer than "+Y$+" bytes ("+n.byteLength_+").");if(n.parts_.length>K$)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+K$+") or object contains a cycle "+Ym(n))}function Ym(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class FF extends W${constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new FF}getInitialEvent(t){return(0,F.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const QC=1e3;let KI,Jm=(()=>{class n extends z${constructor(e,r,i,o,c,d,f,y){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=zC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=QC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");FF.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&zI.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,i){const o=++this.requestNumber_,c={r:o,a:e,b:r};this.log_((0,F.Pz)(c)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[o]=i)}get(e){this.initConnection_();const r=new F.BH,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const f=d.d;"ok"===d.s?r.resolve(f):r.reject(f)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(e,r,i,o){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const f={onComplete:o,hashFn:r,query:e,tag:i};this.listens.get(d).set(c,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(e){const r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const c={p:i};e.tag&&(c.q=r._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,f=>{const y=f.d,w=f.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(o))===e&&(this.log_("listen response",f),"ok"!==w&&this.removeListen_(i,o),e.onComplete&&e.onComplete(w,y))})}static warnOnListenWarnings_(e,r){if(e&&"object"==typeof e&&(0,F.r3)(e,"w")){const i=(0,F.DV)(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Us(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,F.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=(0,F.w9)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const c=o.s,d=o.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,i=e.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(e,r){const i=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,e._queryObject,r)}sendUnlisten_(e,r,i,o){this.log_("Unlisten on "+e+" for "+r);const c={p:e};o&&(c.q=i,c.t=o),this.sendRequest("n",c)}onDisconnectPut(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:i})}onDisconnectMerge(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:i})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,i,o){const c={p:r,d:i};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(e,r,i,o){this.putInternal("p",e,r,i,o)}merge(e,r,i,o){this.putInternal("m",e,r,i,o)}putInternal(e,r,i,o,c){this.initConnection_();const d={p:r,d:i};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,F.Pz)(e));const r=e.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),"d"===e?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===e?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===e?this.onListenRevoked_(r.p,r.q):"ac"===e?this.onAuthRevoked_(r.s,r.d):"apc"===e?this.onAppCheckRevoked_(r.s,r.d):"sd"===e?this.onSecurityDebugPacket_(r):EF("Unrecognized action received from server: "+(0,F.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=QC,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=QC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=QC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Te.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const r=e.onDataMessage_.bind(e),i=e.onReady_.bind(e),o=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let f=!1,y=null;const w=function(){y?y.close():(f=!0,o())};e.realtime_={close:w,sendRequest:function(k){(0,F.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(k)}};const A=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[k,M]=yield Promise.all([e.authTokenProvider_.getToken(A),e.appCheckTokenProvider_.getToken(A)]);f?as("getToken() completed but was canceled"):(as("getToken() completed. Creating connection."),e.authToken_=k&&k.accessToken,e.appCheckToken_=M&&M.token,y=new q$(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,r,i,o,V=>{Us(V+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(k){e.log_("Failed to get token: "+k),f||(e.repoInfo_.nodeAdmin&&Us(k),w())}}})()}interrupt(e){as("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){as("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=QC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let i;i=r?r.map(c=>DF(c)).join("$"):"default";const o=this.removeListen_(e,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,r){const i=new Pn(e).toString();let o;if(this.listens.has(i)){const c=this.listens.get(i);o=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(e,r){as("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){as("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+r+"."+CF.replace(/\./g,"-")]=1,(0,F.uI)()?e["framework.cordova"]=1:(0,F.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=zI.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class hn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new hn(t,e)}}class WI{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const r=new hn(Th,t),i=new hn(Th,e);return 0!==this.compare(r,i)}minPost(){return hn.MIN}}class tG extends WI{static get __EMPTY_NODE(){return KI}static set __EMPTY_NODE(t){KI=t}compare(t,e){return Km(t.name,e.name)}isDefinedOn(t){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return hn.MIN}maxPost(){return new hn(zu,KI)}makePost(t,e){return(0,F.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new hn(t,KI)}toString(){return".key"}}const Wu=new tG;class YI{constructor(t,e,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(c=e?r(t.key,e):1,i&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let UF,Ac=(()=>{class n{constructor(e,r,i,o,c){this.key=e,this.value=r,this.color=i??n.RED,this.left=o??$o.EMPTY_NODE,this.right=c??$o.EMPTY_NODE}copy(e,r,i,o,c){return new n(e??this.key,r??this.value,i??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,r,i),null):0===c?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(e,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return $o.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let i,o;if(i=this,r(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(e,i.key)){if(i.right.isEmpty())return $o.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class $o{constructor(t,e=$o.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new $o(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Ac.BLACK,null,null))}remove(t){return new $o(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ac.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,i=null;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new YI(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new YI(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new YI(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new YI(this.root_,null,this.comparator_,!0,t)}}function tne(n,t){return Km(n.name,t.name)}function LF(n,t){return Km(n,t)}$o.EMPTY_NODE=new class ene{copy(t,e,r,i,o){return this}insert(t,e,r){return new Ac(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const nG=function(n){return"number"==typeof n?"number:"+w$(n):"string:"+n},rG=function(n){if(n.isLeafNode()){const t=n.val();(0,F.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,F.r3)(t,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===UF||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===UF||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let iG,sG,oG,$v=(()=>{class n{constructor(e,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),rG(this.priorityNode_)}static set __childrenNodeConstructor(e){iG=e}static get __childrenNodeConstructor(){return iG}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return cn(e)?this:".priority"===ln(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return".priority"===e?this.updatePriority(r):r.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const i=ln(e);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,F.hu)(".priority"!==i||1===Cp(e),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Yn(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+nG(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",e+="number"===r?w$(this.value_):this.value_,this.lazyHash_=_$(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,F.hu)(o>=0,"Unknown leaf type: "+r),(0,F.hu)(c>=0,"Unknown leaf type: "+i),o===c?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&(this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const rr=new class sne extends WI{compare(t,e){const r=t.node.getPriority(),i=e.node.getPriority(),o=r.compareTo(i);return 0===o?Km(t.name,e.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return hn.MIN}maxPost(){return new hn(zu,new $v("[PRIORITY-POST]",oG))}makePost(t,e){const r=sG(t);return new hn(e,new $v("[PRIORITY-POST]",r))}toString(){return".priority"}},one=Math.log(2);class ane{constructor(t){this.count=parseInt(Math.log(t+1)/one,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const JI=function(n,t,e,r){n.sort(t);const i=function(f,y){const w=y-f;let E,A;if(0===w)return null;if(1===w)return E=n[f],A=e?e(E):E,new Ac(A,E.node,Ac.BLACK,null,null);{const k=parseInt(w/2,10)+f,M=i(f,k),V=i(k+1,y);return E=n[k],A=e?e(E):E,new Ac(A,E.node,Ac.BLACK,M,V)}},d=function(f){let y=null,w=null,E=n.length;const A=function(M,V){const W=E-M,ne=E;E-=M;const he=i(W+1,ne),Ie=n[W],me=e?e(Ie):Ie;k(new Ac(me,Ie.node,V,null,he))},k=function(M){y?(y.left=M,y=M):(w=M,y=M)};for(let M=0;M<f.count;++M){const V=f.nextBitIsOne(),W=Math.pow(2,f.count-(M+1));V?A(W,Ac.BLACK):(A(W,Ac.BLACK),A(W,Ac.RED))}return w}(new ane(n.length));return new $o(r||t,d)};let BF;const Gv={};class Eh{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,F.hu)(Gv&&rr,"ChildrenNode.ts has not been loaded"),BF=BF||new Eh({".priority":Gv},{".priority":rr}),BF}get(t){const e=(0,F.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof $o?e:null}hasIndex(t){return(0,F.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,F.hu)(t!==Wu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=e.getIterator(hn.Wrap);let d,c=o.getNext();for(;c;)i=i||t.isDefinedOn(c.node),r.push(c),c=o.getNext();d=i?JI(r,t.getCompare()):Gv;const f=t.toString(),y=Object.assign({},this.indexSet_);y[f]=t;const w=Object.assign({},this.indexes_);return w[f]=d,new Eh(w,y)}addToIndexes(t,e){const r=(0,F.UI)(this.indexes_,(i,o)=>{const c=(0,F.DV)(this.indexSet_,o);if((0,F.hu)(c,"Missing index implementation for "+o),i===Gv){if(c.isDefinedOn(t.node)){const d=[],f=e.getIterator(hn.Wrap);let y=f.getNext();for(;y;)y.name!==t.name&&d.push(y),y=f.getNext();return d.push(t),JI(d,c.getCompare())}return Gv}{const d=e.get(t.name);let f=i;return d&&(f=f.remove(new hn(t.name,d))),f.insert(t,t.node)}});return new Eh(r,this.indexSet_)}removeFromIndexes(t,e){const r=(0,F.UI)(this.indexes_,i=>{if(i===Gv)return i;{const o=e.get(t.name);return o?i.remove(new hn(t.name,o)):i}});return new Eh(r,this.indexSet_)}}let XC,Qt=(()=>{class n{constructor(e,r,i){this.children_=e,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&rG(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return XC||(XC=new n(new $o(LF),null,Eh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||XC}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const r=this.children_.get(e);return null===r?XC:r}}getChild(e){const r=ln(e);return null===r?this:this.getImmediateChild(r).getChild(Yn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(r);{const i=new hn(e,r);let o,c;r.isEmpty()?(o=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,r),c=this.indexMap_.addToIndexes(i,this.children_));const d=o.isEmpty()?XC:this.priorityNode_;return new n(o,d,c)}}updateChild(e,r){const i=ln(e);if(null===i)return r;{(0,F.hu)(".priority"!==ln(e)||1===Cp(e),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Yn(e),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let i=0,o=0,c=!0;if(this.forEachChild(rr,(d,f)=>{r[d]=f.val(e),i++,c&&n.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):c=!1}),!e&&c&&o<2*i){const d=[];for(const f in r)d[f]=r[f];return d}return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+nG(this.getPriority().val())+":"),this.forEachChild(rr,(r,i)=>{const o=i.hash();""!==o&&(e+=":"+r+":"+o)}),this.lazyHash_=""===e?"":_$(e)}return this.lazyHash_}getPredecessorChildName(e,r,i){const o=this.resolveIndex_(i);if(o){const c=o.getPredecessorKey(new hn(e,r));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new hn(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new hn(r,this.children_.get(r)):null}forEachChild(e,r){const i=this.resolveIndex_(e);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,hn.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,e)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,hn.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,e)>0;)o.getNext(),c=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===e1?-1:0}withIndex(e){if(e===Wu||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===Wu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(rr),o=r.getIterator(rr);let c=i.getNext(),d=o.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=i.getNext(),d=o.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(e){return e===Wu?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const e1=new class lne extends Qt{constructor(){super(new $o(LF),Qt.EMPTY_NODE,Eh.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Qt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(hn,{MIN:{value:new hn(Th,Qt.EMPTY_NODE)},MAX:{value:new hn(zu,e1)}}),tG.__EMPTY_NODE=Qt.EMPTY_NODE,$v.__childrenNodeConstructor=Qt,function nne(n){UF=n}(e1),function ine(n){oG=n}(e1);const cne=!0;function jr(n,t=null){if(null===n)return Qt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,F.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new $v(n,jr(t));if(n instanceof Array||!cne){let e=Qt.EMPTY_NODE;return ls(n,(r,i)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const o=jr(i);(o.isLeafNode()||!o.isEmpty())&&(e=e.updateImmediateChild(r,o))}}),e.updatePriority(jr(t))}{const e=[];let r=!1;if(ls(n,(c,d)=>{if("."!==c.substring(0,1)){const f=jr(d);f.isEmpty()||(r=r||!f.getPriority().isEmpty(),e.push(new hn(c,f)))}}),0===e.length)return Qt.EMPTY_NODE;const o=JI(e,tne,c=>c.name,LF);if(r){const c=JI(e,rr.getCompare());return new Qt(o,jr(t),new Eh({".priority":c},{".priority":rr}))}return new Qt(o,jr(t),Eh.Default)}}!function rne(n){sG=n}(jr);class VF extends WI{constructor(t){super(),this.indexPath_=t,(0,F.hu)(!cn(t)&&".priority"!==ln(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const r=this.extractChild(t.node),i=this.extractChild(e.node),o=r.compareTo(i);return 0===o?Km(t.name,e.name):o}makePost(t,e){const r=jr(t),i=Qt.EMPTY_NODE.updateChild(this.indexPath_,r);return new hn(e,i)}maxPost(){const t=Qt.EMPTY_NODE.updateChild(this.indexPath_,e1);return new hn(zu,t)}toString(){return JC(this.indexPath_,0).join("/")}}const jF=new class une extends WI{compare(t,e){const r=t.node.compareTo(e.node);return 0===r?Km(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return hn.MIN}maxPost(){return hn.MAX}makePost(t,e){const r=jr(t);return new hn(e,r)}toString(){return".value"}},Zv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",dne=function(){let n=0;const t=[];return function(e){const r=e===n;let i;n=e;const o=new Array(8);for(i=7;i>=0;i--)o[i]=Zv.charAt(e%64),e=Math.floor(e/64);(0,F.hu)(0===e,"Cannot push at time == 0");let c=o.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=Zv.charAt(t[i]);return(0,F.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),cG=function(n){if(n===""+SF)return"-";const t=GI(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let c=0;c<e.length;c++)e[c]=n.charAt(c);if(e.length<786)return e.push("-"),e.join("");let r=e.length-1;for(;r>=0&&"z"===e[r];)r--;if(-1===r)return zu;const o=Zv.charAt(Zv.indexOf(e[r])+1);return e[r]=o,e.slice(0,r+1).join("")},uG=function(n){if(n===""+C$)return Th;const t=GI(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let r=0;r<e.length;r++)e[r]=n.charAt(r);return"-"===e[e.length-1]?1===e.length?""+SF:(delete e[e.length-1],e.join("")):(e[e.length-1]=Zv.charAt(Zv.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function dG(n){return{type:"value",snapshotNode:n}}function qv(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function t1(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function n1(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class $F{constructor(t){this.index_=t}updateChild(t,e,r,i,o,c){(0,F.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?t.hasChild(e)?c.trackChildChange(t1(e,d)):(0,F.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(qv(e,r)):c.trackChildChange(n1(e,r,d))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(t,e,r){return null!=r&&(t.isLeafNode()||t.forEachChild(rr,(i,o)=>{e.hasChild(i)||r.trackChildChange(t1(i,o))}),e.isLeafNode()||e.forEachChild(rr,(i,o)=>{if(t.hasChild(i)){const c=t.getImmediateChild(i);c.equals(o)||r.trackChildChange(n1(i,o,c))}else r.trackChildChange(qv(i,o))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Qt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class r1{constructor(t){this.indexedFilter_=new $F(t.getIndex()),this.index_=t.getIndex(),this.startPost_=r1.getStartPost_(t),this.endPost_=r1.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,r,i,o,c){return this.matches(new hn(e,r))||(r=Qt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,r,i,o,c)}updateFullNode(t,e,r){e.isLeafNode()&&(e=Qt.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(Qt.EMPTY_NODE);const o=this;return e.forEachChild(rr,(c,d)=>{o.matches(new hn(c,d))||(i=i.updateImmediateChild(c,Qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class fne{constructor(t){this.rangedFilter_=new r1(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,r,i,o,c){return this.rangedFilter_.matches(new hn(e,r))||(r=Qt.EMPTY_NODE),t.getImmediateChild(e).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,r,i,o,c):this.fullLimitUpdateChild_(t,e,r,o,c)}updateFullNode(t,e,r){let i;if(e.isLeafNode()||e.isEmpty())i=Qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let o;i=Qt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){const d=o.getNext();let f;if(f=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!f)break;i=i.updateImmediateChild(d.name,d.node),c++}}else{let o,c,d,f;if(i=e.withIndex(this.index_),i=i.updatePriority(Qt.EMPTY_NODE),this.reverse_){f=i.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const E=this.index_.getCompare();d=(A,k)=>E(k,A)}else f=i.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,w=!1;for(;f.hasNext();){const E=f.getNext();!w&&d(o,E)<=0&&(w=!0),w&&y<this.limit_&&d(E,c)<=0?y++:i=i.updateImmediateChild(E.name,Qt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,r,i,o){let c;if(this.reverse_){const E=this.index_.getCompare();c=(A,k)=>E(k,A)}else c=this.index_.getCompare();const d=t;(0,F.hu)(d.numChildren()===this.limit_,"");const f=new hn(e,r),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),w=this.rangedFilter_.matches(f);if(d.hasChild(e)){const E=d.getImmediateChild(e);let A=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=A&&(A.name===e||d.hasChild(A.name));)A=i.getChildAfterChild(this.index_,A,this.reverse_);const k=null==A?1:c(A,f);if(w&&!r.isEmpty()&&k>=0)return o?.trackChildChange(n1(e,r,E)),d.updateImmediateChild(e,r);{o?.trackChildChange(t1(e,E));const V=d.updateImmediateChild(e,Qt.EMPTY_NODE);return null!=A&&this.rangedFilter_.matches(A)?(o?.trackChildChange(qv(A.name,A.node)),V.updateImmediateChild(A.name,A.node)):V}}return r.isEmpty()?t:w&&c(y,f)>=0?(null!=o&&(o.trackChildChange(t1(y.name,y.node)),o.trackChildChange(qv(e,r))),d.updateImmediateChild(e,r).updateImmediateChild(y.name,Qt.EMPTY_NODE)):t}}class QI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Th}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:zu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rr}copy(){const t=new QI;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function GF(n,t,e){const r=n.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=e?(r.startNameSet_=!0,r.indexStartName_=e):(r.startNameSet_=!1,r.indexStartName_=""),r}function ZF(n,t,e){const r=n.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==e?(r.endNameSet_=!0,r.indexEndName_=e):(r.endNameSet_=!1,r.indexEndName_=""),r}function XI(n,t){const e=n.copy();return e.index_=t,e}function hG(n){const t={};if(n.isDefault())return t;let e;return n.index_===rr?e="$priority":n.index_===jF?e="$value":n.index_===Wu?e="$key":((0,F.hu)(n.index_ instanceof VF,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,F.Pz)(e),n.startSet_&&(t.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function fG(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==rr&&(t.i=n.index_.toString()),t}class eA extends z${constructor(t,e,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=zC("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,F.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,r,i){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const c=eA.getListenId_(t,r),d={};this.listens_[c]=d;const f=hG(t._queryParams);this.restRequest_(o+".json",f,(y,w)=>{let E=w;if(404===y&&(E=null,y=null),null===y&&this.onDataUpdate_(o,E,!1,r),(0,F.DV)(this.listens_,c)===d){let A;A=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(A,null)}})}unlisten(t,e){const r=eA.getListenId_(t,e);delete this.listens_[r]}get(t){const e=hG(t._queryParams),r=t._path.toString(),i=new F.BH;return this.restRequest_(r+".json",e,(o,c)=>{let d=c;404===o&&(d=null,o=null),null===o?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(e.auth=i.accessToken),o&&o.token&&(e.ac=o.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,F.xO)(e);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,F.cI)(d.responseText)}catch{Us("Failed to parse JSON response for "+c+": "+d.responseText)}r(null,f)}else 401!==d.status&&404!==d.status&&Us("Got unsuccessful REST response for "+c+" Status: "+d.status),r(d.status);r=null}},d.open("GET",c,!0),d.send()})}}class vne{constructor(){this.rootNode_=Qt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function tA(){return{value:null,children:new Map}}function zv(n,t,e){if(cn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const r=ln(t);n.children.has(r)||n.children.set(r,tA()),zv(n.children.get(r),t=Yn(t),e)}}function qF(n,t){if(cn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(rr,(r,i)=>{zv(n,new Pn(r),i)}),qF(n,t)}}if(n.children.size>0){const e=ln(t);return t=Yn(t),n.children.has(e)&&qF(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function zF(n,t,e){null!==n.value?e(t,n.value):function bne(n,t){n.children.forEach((e,r)=>{t(r,e)})}(n,(r,i)=>{zF(i,new Pn(t.toString()+"/"+r),e)})}class wne{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&ls(this.last_,(r,i)=>{e[r]=e[r]-i}),this.last_=t,e}}class Ene{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new wne(t);const r=1e4+2e4*Math.random();KC(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),e={};let r=!1;ls(t,(i,o)=>{o>0&&(0,F.r3)(this.statsToReport_,i)&&(e[i]=o,r=!0)}),r&&this.server_.reportStats(e),KC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var wl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(wl||(wl={})),wl))();function YF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class nA{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=wl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(cn(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Pn(t));return new nA(En(),e,this.revert)}}return(0,F.hu)(ln(this.path)===t,"operationForChild called for unrelated child."),new nA(Yn(this.path),this.affectedTree,this.revert)}}class i1{constructor(t,e){this.source=t,this.path=e,this.type=wl.LISTEN_COMPLETE}operationForChild(t){return cn(this.path)?new i1(this.source,En()):new i1(this.source,Yn(this.path))}}class Qm{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=wl.OVERWRITE}operationForChild(t){return cn(this.path)?new Qm(this.source,En(),this.snap.getImmediateChild(t)):new Qm(this.source,Yn(this.path),this.snap)}}class Wv{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=wl.MERGE}operationForChild(t){if(cn(this.path)){const e=this.children.subtree(new Pn(t));return e.isEmpty()?null:e.value?new Qm(this.source,En(),e.value):new Wv(this.source,En(),e)}return(0,F.hu)(ln(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Wv(this.source,Yn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Tp{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(cn(t))return this.isFullyInitialized()&&!this.filtered_;const e=ln(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Dne{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function s1(n,t,e,r,i,o){const c=r.filter(d=>d.type===e);c.sort((d,f)=>function Ane(n,t,e){if(null==t.childName||null==e.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new hn(t.childName,t.snapshotNode),i=new hn(e.childName,e.snapshotNode);return n.index_.compare(r,i)}(n,d,f)),c.forEach(d=>{const f=function Ine(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,o);i.forEach(y=>{y.respondsTo(d.type)&&t.push(y.createEvent(f,n.query_))})})}function rA(n,t){return{eventCache:n,serverCache:t}}function o1(n,t,e,r){return rA(new Tp(t,e,r),n.serverCache)}function gG(n,t,e,r){return rA(n.eventCache,new Tp(t,e,r))}function iA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Xm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let JF;class ir{constructor(t,e=(()=>(JF||(JF=new $o(fte)),JF))()){this.value=t,this.children=e}static fromObject(t){let e=new ir(null);return ls(t,(r,i)=>{e=e.set(new Pn(r),i)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:En(),value:this.value};if(cn(t))return null;{const r=ln(t),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Yn(t),e);return null!=o?{path:xr(new Pn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(cn(t))return this;{const e=ln(t),r=this.children.get(e);return null!==r?r.subtree(Yn(t)):new ir(null)}}set(t,e){if(cn(t))return new ir(e,this.children);{const r=ln(t),o=(this.children.get(r)||new ir(null)).set(Yn(t),e),c=this.children.insert(r,o);return new ir(this.value,c)}}remove(t){if(cn(t))return this.children.isEmpty()?new ir(null):new ir(null,this.children);{const e=ln(t),r=this.children.get(e);if(r){const i=r.remove(Yn(t));let o;return o=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&o.isEmpty()?new ir(null):new ir(this.value,o)}return this}}get(t){if(cn(t))return this.value;{const e=ln(t),r=this.children.get(e);return r?r.get(Yn(t)):null}}setTree(t,e){if(cn(t))return e;{const r=ln(t),o=(this.children.get(r)||new ir(null)).setTree(Yn(t),e);let c;return c=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new ir(this.value,c)}}fold(t){return this.fold_(En(),t)}fold_(t,e){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(xr(t,i),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,En(),e)}findOnPath_(t,e,r){const i=!!this.value&&r(e,this.value);if(i)return i;if(cn(t))return null;{const o=ln(t),c=this.children.get(o);return c?c.findOnPath_(Yn(t),xr(e,o),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,En(),e)}foreachOnPath_(t,e,r){if(cn(t))return this;{this.value&&r(e,this.value);const i=ln(t),o=this.children.get(i);return o?o.foreachOnPath_(Yn(t),xr(e,i),r):new ir(null)}}foreach(t){this.foreach_(En(),t)}foreach_(t,e){this.children.inorderTraversal((r,i)=>{i.foreach_(xr(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}}class Nc{constructor(t){this.writeTree_=t}static empty(){return new Nc(new ir(null))}}function a1(n,t,e){if(cn(t))return new Nc(new ir(e));{const r=n.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const c=_o(i,t);return o=o.updateChild(c,e),new Nc(n.writeTree_.set(i,o))}{const i=new ir(e),o=n.writeTree_.setTree(t,i);return new Nc(o)}}}function QF(n,t,e){let r=n;return ls(e,(i,o)=>{r=a1(r,xr(t,i),o)}),r}function mG(n,t){if(cn(t))return Nc.empty();{const e=n.writeTree_.setTree(t,new ir(null));return new Nc(e)}}function XF(n,t){return null!=e_(n,t)}function e_(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(_o(e.path,t)):null}function _G(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(rr,(r,i)=>{t.push(new hn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&t.push(new hn(r,i.value))}),t}function Ep(n,t){if(cn(t))return n;{const e=e_(n,t);return new Nc(null!=e?new ir(e):n.writeTree_.subtree(t))}}function eL(n){return n.writeTree_.isEmpty()}function Kv(n,t){return yG(En(),n.writeTree_,t)}function yG(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{".priority"===i?((0,F.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):e=yG(xr(n,i),o,e)}),!e.getChild(n).isEmpty()&&null!==r&&(e=e.updateChild(xr(n,".priority"),r)),e}}function sA(n,t){return TG(t,n)}function Mne(n,t){if(n.snap)return bl(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&bl(xr(n.path,e),t))return!0;return!1}function Fne(n){return n.visible}function vG(n,t,e){let r=Nc.empty();for(let i=0;i<n.length;++i){const o=n[i];if(t(o)){const c=o.path;let d;if(o.snap)bl(e,c)?(d=_o(e,c),r=a1(r,d,o.snap)):bl(c,e)&&(d=_o(c,e),r=a1(r,En(),o.snap.getChild(d)));else{if(!o.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(bl(e,c))d=_o(e,c),r=QF(r,d,o.children);else if(bl(c,e))if(d=_o(c,e),cn(d))r=QF(r,En(),o.children);else{const f=(0,F.DV)(o.children,ln(d));if(f){const y=f.getChild(Yn(d));r=a1(r,En(),y)}}}}}return r}function bG(n,t,e,r,i){if(r||i){const o=Ep(n.visibleWrites,t);return!i&&eL(o)?e:i||null!=e||XF(o,En())?Kv(vG(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(bl(y.path,t)||bl(t,y.path))},t),e||Qt.EMPTY_NODE):null}{const o=e_(n.visibleWrites,t);if(null!=o)return o;{const c=Ep(n.visibleWrites,t);return eL(c)?e:null!=e||XF(c,En())?Kv(c,e||Qt.EMPTY_NODE):null}}}function oA(n,t,e,r){return bG(n.writeTree,n.treePath,t,e,r)}function tL(n,t){return function Lne(n,t,e){let r=Qt.EMPTY_NODE;const i=e_(n.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(rr,(o,c)=>{r=r.updateImmediateChild(o,c)}),r;if(e){const o=Ep(n.visibleWrites,t);return e.forEachChild(rr,(c,d)=>{const f=Kv(Ep(o,new Pn(c)),d);r=r.updateImmediateChild(c,f)}),_G(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return _G(Ep(n.visibleWrites,t)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,t)}function wG(n,t,e,r){return function Une(n,t,e,r,i){(0,F.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=xr(t,e);if(XF(n.visibleWrites,o))return null;{const c=Ep(n.visibleWrites,o);return eL(c)?i.getChild(e):Kv(c,i.getChild(e))}}(n.writeTree,n.treePath,t,e,r)}function aA(n,t){return function Vne(n,t){return e_(n.visibleWrites,t)}(n.writeTree,xr(n.treePath,t))}function nL(n,t,e){return function Bne(n,t,e,r){const i=xr(t,e),o=e_(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(e)?Kv(Ep(n.visibleWrites,i),r.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function CG(n,t){return TG(xr(n.treePath,t),n.writeTree)}function TG(n,t){return{treePath:n,writeTree:t}}class Gne{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,r=t.childName;(0,F.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(r,n1(r,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(r,t1(r,i.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(r,qv(r,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw(0,F.g5)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(r,n1(r,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const EG=new class Zne{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}};class rL{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new Tp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nL(this.writes_,t,r)}}getChildAfterChild(t,e,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Xm(this.viewCache_),o=function $ne(n,t,e,r,i,o){return function jne(n,t,e,r,i,o,c){let d;const f=Ep(n.visibleWrites,t),y=e_(f,En());if(null!=y)d=y;else{if(null==e)return[];d=Kv(f,e)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const w=[],E=c.getCompare(),A=o?d.getReverseIteratorFrom(r,c):d.getIteratorFrom(r,c);let k=A.getNext();for(;k&&w.length<i;)0!==E(k,r)&&w.push(k),k=A.getNext();return w}}(n.writeTree,n.treePath,t,e,r,i,o)}(this.writes_,i,e,1,r,t);return 0===o.length?null:o[0]}}function DG(n,t,e,r,i,o){const c=t.eventCache;if(null!=aA(r,e))return t;{let d,f;if(cn(e))if((0,F.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const y=Xm(t),E=tL(r,y instanceof Qt?y:Qt.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),E,o)}else{const y=oA(r,Xm(t));d=n.filter.updateFullNode(t.eventCache.getNode(),y,o)}else{const y=ln(e);if(".priority"===y){(0,F.hu)(1===Cp(e),"Can't have a priority with additional path components");const w=c.getNode();f=t.serverCache.getNode();const E=wG(r,e,w,f);d=null!=E?n.filter.updatePriority(w,E):c.getNode()}else{const w=Yn(e);let E;if(c.isCompleteForChild(y)){f=t.serverCache.getNode();const A=wG(r,e,c.getNode(),f);E=null!=A?c.getNode().getImmediateChild(y).updateChild(w,A):c.getNode().getImmediateChild(y)}else E=nL(r,y,t.serverCache);d=null!=E?n.filter.updateChild(c.getNode(),y,E,w,i,o):c.getNode()}}return o1(t,d,c.isFullyInitialized()||cn(e),n.filter.filtersNodes())}}function lA(n,t,e,r,i,o,c,d){const f=t.serverCache;let y;const w=c?n.filter:n.filter.getIndexedFilter();if(cn(e))y=w.updateFullNode(f.getNode(),r,null);else if(w.filtersNodes()&&!f.isFiltered()){const k=f.getNode().updateChild(e,r);y=w.updateFullNode(f.getNode(),k,null)}else{const k=ln(e);if(!f.isCompleteForPath(e)&&Cp(e)>1)return t;const M=Yn(e),W=f.getNode().getImmediateChild(k).updateChild(M,r);y=".priority"===k?w.updatePriority(f.getNode(),W):w.updateChild(f.getNode(),k,W,M,EG,null)}const E=gG(t,y,f.isFullyInitialized()||cn(e),w.filtersNodes());return DG(n,E,e,i,new rL(i,E,o),d)}function iL(n,t,e,r,i,o,c){const d=t.eventCache;let f,y;const w=new rL(i,t,o);if(cn(e))y=n.filter.updateFullNode(t.eventCache.getNode(),r,c),f=o1(t,y,!0,n.filter.filtersNodes());else{const E=ln(e);if(".priority"===E)y=n.filter.updatePriority(t.eventCache.getNode(),r),f=o1(t,y,d.isFullyInitialized(),d.isFiltered());else{const A=Yn(e),k=d.getNode().getImmediateChild(E);let M;if(cn(A))M=r;else{const V=w.getCompleteChild(E);M=null!=V?".priority"===MF(A)&&V.getChild(J$(A)).isEmpty()?V:V.updateChild(A,r):Qt.EMPTY_NODE}f=k.equals(M)?t:o1(t,n.filter.updateChild(d.getNode(),E,M,A,w,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function SG(n,t){return n.eventCache.isCompleteForChild(t)}function IG(n,t,e){return e.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function sL(n,t,e,r,i,o,c,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let y,f=t;y=cn(e)?r:new ir(null).setTree(e,r);const w=t.serverCache.getNode();return y.children.inorderTraversal((E,A)=>{if(w.hasChild(E)){const M=IG(0,t.serverCache.getNode().getImmediateChild(E),A);f=lA(n,f,new Pn(E),M,i,o,c,d)}}),y.children.inorderTraversal((E,A)=>{const k=!t.serverCache.isCompleteForChild(E)&&null===A.value;if(!w.hasChild(E)&&!k){const V=IG(0,t.serverCache.getNode().getImmediateChild(E),A);f=lA(n,f,new Pn(E),V,i,o,c,d)}}),f}class ere{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new $F(r.getIndex()),o=function pne(n){return n.loadsAllData()?new $F(n.getIndex()):n.hasLimit()?new fne(n):new r1(n)}(r);this.processor_=function qne(n){return{filter:n}}(o);const c=e.serverCache,d=e.eventCache,f=i.updateFullNode(Qt.EMPTY_NODE,c.getNode(),null),y=o.updateFullNode(Qt.EMPTY_NODE,d.getNode(),null),w=new Tp(f,c.isFullyInitialized(),i.filtersNodes()),E=new Tp(y,d.isFullyInitialized(),o.filtersNodes());this.viewCache_=rA(E,w),this.eventGenerator_=new Dne(this.query_)}get query(){return this.query_}}function rre(n,t){const e=Xm(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!cn(t)&&!e.getImmediateChild(ln(t)).isEmpty())?e.getChild(t):null}function AG(n){return 0===n.eventRegistrations_.length}function NG(n,t,e){const r=[];if(e){(0,F.hu)(null==t,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const c=o.createCancelEvent(e,i);c&&r.push(c)})}if(t){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const c=n.eventRegistrations_[o];if(c.matches(t)){if(t.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function xG(n,t,e,r){t.type===wl.MERGE&&null!==t.source.queryId&&((0,F.hu)(Xm(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(iA(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function Wne(n,t,e,r,i){const o=new Gne;let c,d;if(e.type===wl.OVERWRITE){const y=e;y.source.fromUser?c=iL(n,t,y.path,y.snap,r,i,o):((0,F.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||t.serverCache.isFiltered()&&!cn(y.path),c=lA(n,t,y.path,y.snap,r,i,d,o))}else if(e.type===wl.MERGE){const y=e;y.source.fromUser?c=function Yne(n,t,e,r,i,o,c){let d=t;return r.foreach((f,y)=>{const w=xr(e,f);SG(t,ln(w))&&(d=iL(n,d,w,y,i,o,c))}),r.foreach((f,y)=>{const w=xr(e,f);SG(t,ln(w))||(d=iL(n,d,w,y,i,o,c))}),d}(n,t,y.path,y.children,r,i,o):((0,F.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||t.serverCache.isFiltered(),c=sL(n,t,y.path,y.children,r,i,d,o))}else if(e.type===wl.ACK_USER_WRITE){const y=e;c=y.revert?function Xne(n,t,e,r,i,o){let c;if(null!=aA(r,e))return t;{const d=new rL(r,t,i),f=t.eventCache.getNode();let y;if(cn(e)||".priority"===ln(e)){let w;if(t.serverCache.isFullyInitialized())w=oA(r,Xm(t));else{const E=t.serverCache.getNode();(0,F.hu)(E instanceof Qt,"serverChildren would be complete if leaf node"),w=tL(r,E)}y=n.filter.updateFullNode(f,w,o)}else{const w=ln(e);let E=nL(r,w,t.serverCache);null==E&&t.serverCache.isCompleteForChild(w)&&(E=f.getImmediateChild(w)),y=null!=E?n.filter.updateChild(f,w,E,Yn(e),d,o):t.eventCache.getNode().hasChild(w)?n.filter.updateChild(f,w,Qt.EMPTY_NODE,Yn(e),d,o):f,y.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=oA(r,Xm(t)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,o)))}return c=t.serverCache.isFullyInitialized()||null!=aA(r,En()),o1(t,y,c,n.filter.filtersNodes())}}(n,t,y.path,r,i,o):function Jne(n,t,e,r,i,o,c){if(null!=aA(i,e))return t;const d=t.serverCache.isFiltered(),f=t.serverCache;if(null!=r.value){if(cn(e)&&f.isFullyInitialized()||f.isCompleteForPath(e))return lA(n,t,e,f.getNode().getChild(e),i,o,d,c);if(cn(e)){let y=new ir(null);return f.getNode().forEachChild(Wu,(w,E)=>{y=y.set(new Pn(w),E)}),sL(n,t,e,y,i,o,d,c)}return t}{let y=new ir(null);return r.foreach((w,E)=>{const A=xr(e,w);f.isCompleteForPath(A)&&(y=y.set(w,f.getNode().getChild(A)))}),sL(n,t,e,y,i,o,d,c)}}(n,t,y.path,y.affectedTree,r,i,o)}else{if(e.type!==wl.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+e.type);c=function Qne(n,t,e,r,i){const o=t.serverCache;return DG(n,gG(t,o.getNode(),o.isFullyInitialized()||cn(e),o.isFiltered()),e,r,EG,i)}(n,t,e.path,r,o)}const f=o.getChanges();return function Kne(n,t,e){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=iA(n);(e.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&e.push(dG(iA(t)))}}(t,c,f),{viewCache:c,changes:f}}(n.processor_,i,t,e,r);return function zne(n,t){(0,F.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,F.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,kG(n,o.changes,o.viewCache.eventCache.getNode(),null)}function kG(n,t,e,r){return function Sne(n,t,e,r){const i=[],o=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(function hne(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),s1(n,i,"child_removed",t,r,e),s1(n,i,"child_added",t,r,e),s1(n,i,"child_moved",o,r,e),s1(n,i,"child_changed",t,r,e),s1(n,i,"value",t,r,e),i}(n.eventGenerator_,t,e,r?[r]:n.eventRegistrations_)}let cA,dA;class RG{constructor(){this.views=new Map}}function oL(n,t,e,r){const i=t.source.queryId;if(null!==i){const o=n.views.get(i);return(0,F.hu)(null!=o,"SyncTree gave us an op for an invalid query."),xG(o,t,e,r)}{let o=[];for(const c of n.views.values())o=o.concat(xG(c,t,e,r));return o}}function OG(n,t,e,r,i){const c=n.views.get(t._queryIdentifier);if(!c){let d=oA(e,i?r:null),f=!1;d?f=!0:r instanceof Qt?(d=tL(e,r),f=!1):(d=Qt.EMPTY_NODE,f=!1);const y=rA(new Tp(d,f,!1),new Tp(r,i,!1));return new ere(t,y)}return c}function MG(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Dp(n,t){let e=null;for(const r of n.views.values())e=e||rre(r,t);return e}function PG(n,t){return t._queryParams.loadsAllData()?uA(n):n.views.get(t._queryIdentifier)}function FG(n,t){return null!=PG(n,t)}function Sp(n){return null!=uA(n)}function uA(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let fre=1;class LG{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ir(null),this.pendingWriteTree_=function Hne(){return{visibleWrites:Nc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function aL(n,t,e,r,i){return function xne(n,t,e,r,i){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:t,snap:e,writeId:r,visible:i}),i&&(n.visibleWrites=a1(n.visibleWrites,t,e)),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r,i),i?Yv(n,new Qm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Ip(n,t,e=!1){const r=function Rne(n,t){for(let e=0;e<n.allWrites.length;e++){const r=n.allWrites[e];if(r.writeId===t)return r}return null}(n.pendingWriteTree_,t);if(function One(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,F.hu)(e>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[e];n.allWrites.splice(e,1);let i=r.visible,o=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=e&&Mne(d,r.path)?i=!1:bl(r.path,d.path)&&(o=!0)),c--}return!!i&&(o?(function Pne(n){n.visibleWrites=vG(n.allWrites,Fne,En()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=mG(n.visibleWrites,r.path):ls(r.children,f=>{n.visibleWrites=mG(n.visibleWrites,xr(r.path,f))}),!0))}(n.pendingWriteTree_,t)){let o=new ir(null);return null!=r.snap?o=o.set(En(),!0):ls(r.children,c=>{o=o.set(new Pn(c),!0)}),Yv(n,new nA(r.path,o,e))}return[]}function l1(n,t,e){return Yv(n,new Qm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function hA(n,t,e,r,i=!1){const o=t._path,c=n.syncPointTree_.get(o);let d=[];if(c&&("default"===t._queryIdentifier||FG(c,t))){const f=function ure(n,t,e,r){const i=t._queryIdentifier,o=[];let c=[];const d=Sp(n);if("default"===i)for(const[f,y]of n.views.entries())c=c.concat(NG(y,e,r)),AG(y)&&(n.views.delete(f),y.query._queryParams.loadsAllData()||o.push(y.query));else{const f=n.views.get(i);f&&(c=c.concat(NG(f,e,r)),AG(f)&&(n.views.delete(i),f.query._queryParams.loadsAllData()||o.push(f.query)))}return d&&!Sp(n)&&o.push(new(function are(){return(0,F.hu)(cA,"Reference.ts has not been loaded"),cA}())(t._repo,t._path)),{removed:o,events:c}}(c,t,e,r);(function lre(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=f.removed;if(d=f.events,!i){const w=-1!==y.findIndex(A=>A._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(o,(A,k)=>Sp(k));if(w&&!E){const A=n.syncPointTree_.subtree(o);if(!A.isEmpty()){const k=function bre(n){return n.fold((t,e,r)=>{if(e&&Sp(e))return[uA(e)];{let i=[];return e&&(i=MG(e)),ls(r,(o,c)=>{i=i.concat(c)}),i}})}(A);for(let M=0;M<k.length;++M){const V=k[M],W=V.query,ne=jG(n,V);n.listenProvider_.startListening(u1(W),c1(n,W),ne.hashFn,ne.onComplete)}}}!E&&y.length>0&&!r&&(w?n.listenProvider_.stopListening(u1(t),null):y.forEach(A=>{const k=n.queryToTagMap.get(pA(A));n.listenProvider_.stopListening(u1(A),k)}))}!function wre(n,t){for(let e=0;e<t.length;++e){const r=t[e];if(!r._queryParams.loadsAllData()){const i=pA(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,y)}return d}function UG(n,t,e,r){const i=cL(n,r);if(null!=i){const o=uL(i),c=o.path,d=o.queryId,f=_o(c,t);return dL(n,c,new Qm(YF(d),f,e))}return[]}function lL(n,t,e,r=!1){const i=t._path;let o=null,c=!1;n.syncPointTree_.foreachOnPath(i,(A,k)=>{const M=_o(A,i);o=o||Dp(k,M),c=c||Sp(k)});let f,d=n.syncPointTree_.get(i);d?(c=c||Sp(d),o=o||Dp(d,En())):(d=new RG,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=o?f=!0:(f=!1,o=Qt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((k,M)=>{const V=Dp(M,En());V&&(o=o.updateImmediateChild(k,V))}));const y=FG(d,t);if(!y&&!t._queryParams.loadsAllData()){const A=pA(t);(0,F.hu)(!n.queryToTagMap.has(A),"View does not exist, but we have a tag");const k=function Cre(){return fre++}();n.queryToTagMap.set(A,k),n.tagToQueryMap.set(k,A)}let E=function cre(n,t,e,r,i,o){const c=OG(n,t,r,i,o);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function ire(n,t){n.eventRegistrations_.push(t)}(c,e),function sre(n,t){const e=n.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(rr,(o,c)=>{r.push(qv(o,c))}),e.isFullyInitialized()&&r.push(dG(e.getNode())),kG(n,r,e.getNode(),t)}(c,e)}(d,t,e,sA(n.pendingWriteTree_,i),o,f);if(!y&&!c&&!r){const A=PG(d,t);E=E.concat(function Tre(n,t,e){const r=t._path,i=c1(n,t),o=jG(n,e),c=n.listenProvider_.startListening(u1(t),i,o.hashFn,o.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,F.hu)(!Sp(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((y,w,E)=>{if(!cn(y)&&w&&Sp(w))return[uA(w).query];{let A=[];return w&&(A=A.concat(MG(w).map(k=>k.query))),ls(E,(k,M)=>{A=A.concat(M)}),A}});for(let y=0;y<f.length;++y){const w=f[y];n.listenProvider_.stopListening(u1(w),c1(n,w))}}return c}(n,t,A))}return E}function fA(n,t,e){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(t,(c,d)=>{const y=Dp(d,_o(c,t));if(y)return y});return bG(i,t,o,e,!0)}function Yv(n,t){return BG(t,n.syncPointTree_,null,sA(n.pendingWriteTree_,En()))}function BG(n,t,e,r){if(cn(n.path))return VG(n,t,e,r);{const i=t.get(En());null==e&&null!=i&&(e=Dp(i,En()));let o=[];const c=ln(n.path),d=n.operationForChild(c),f=t.children.get(c);if(f&&d){const y=e?e.getImmediateChild(c):null,w=CG(r,c);o=o.concat(BG(d,f,y,w))}return i&&(o=o.concat(oL(i,n,r,e))),o}}function VG(n,t,e,r){const i=t.get(En());null==e&&null!=i&&(e=Dp(i,En()));let o=[];return t.children.inorderTraversal((c,d)=>{const f=e?e.getImmediateChild(c):null,y=CG(r,c),w=n.operationForChild(c);w&&(o=o.concat(VG(w,d,f,y)))}),i&&(o=o.concat(oL(i,n,r,e))),o}function jG(n,t){const e=t.query,r=c1(n,e);return{hashFn:()=>(function tre(n){return n.viewCache_.serverCache.getNode()}(t)||Qt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function _re(n,t,e){const r=cL(n,e);if(r){const i=uL(r),o=i.path,c=i.queryId,d=_o(o,t);return dL(n,o,new i1(YF(c),d))}return[]}(n,e._path,r):function mre(n,t){return Yv(n,new i1({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const o=function mte(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const r=new Error(n+" at "+t._path.toString()+": "+e);return r.code=n.toUpperCase(),r}(i,e);return hA(n,e,null,o)}}}}function c1(n,t){const e=pA(t);return n.queryToTagMap.get(e)}function pA(n){return n._path.toString()+"$"+n._queryIdentifier}function cL(n,t){return n.tagToQueryMap.get(t)}function uL(n){const t=n.indexOf("$");return(0,F.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Pn(n.substr(0,t))}}function dL(n,t,e){const r=n.syncPointTree_.get(t);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),oL(r,e,sA(n.pendingWriteTree_,t),null)}function u1(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function hre(){return(0,F.hu)(dA,"Reference.ts has not been loaded"),dA}())(n._repo,n._path):n}class hL{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new hL(e)}node(){return this.node_}}class fL{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=xr(this.path_,t);return new fL(this.syncTree_,e)}node(){return fA(this.syncTree_,this.path_)}}const Ere=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},HG=function(n,t,e){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Dre(n[".sv"],t,e):"object"==typeof n[".sv"]?Sre(n[".sv"],t):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Dre=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},Sre=function(n,t,e){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,F.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},$G=function(n,t,e,r){return gL(t,new fL(e,n),r)},pL=function(n,t,e){return gL(n,new hL(t),e)};function gL(n,t,e){const r=n.getPriority().val(),i=HG(r,t.getImmediateChild(".priority"),e);let o;if(n.isLeafNode()){const c=n,d=HG(c.getValue(),t,e);return d!==c.getValue()||i!==c.getPriority().val()?new $v(d,jr(i)):n}{const c=n;return o=c,i!==c.getPriority().val()&&(o=o.updatePriority(new $v(i))),c.forEachChild(rr,(d,f)=>{const y=gL(f,t.getImmediateChild(d),e);y!==f&&(o=o.updateImmediateChild(d,y))}),o}}class mL{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}}function gA(n,t){let e=t instanceof Pn?t:new Pn(t),r=n,i=ln(e);for(;null!==i;){const o=(0,F.DV)(r.node.children,i)||{children:{},childCount:0};r=new mL(i,r,o),e=Yn(e),i=ln(e)}return r}function t_(n){return n.node.value}function _L(n,t){n.node.value=t,yL(n)}function GG(n){return n.node.childCount>0}function mA(n,t){ls(n.node.children,(e,r)=>{t(new mL(e,n,r))})}function ZG(n,t,e,r){e&&!r&&t(n),mA(n,i=>{ZG(i,t,!0,r)}),e&&r&&t(n)}function d1(n){return new Pn(null===n.parent?n.name:d1(n.parent)+"/"+n.name)}function yL(n){null!==n.parent&&function Nre(n,t,e){const r=function Ire(n){return void 0===t_(n)&&!GG(n)}(e),i=(0,F.r3)(n.node.children,t);r&&i?(delete n.node.children[t],n.node.childCount--,yL(n)):!r&&!i&&(n.node.children[t]=e.node,n.node.childCount++,yL(n))}(n.parent,n.name,n)}const xre=/[\[\].#$\/\u0000-\u001F\u007F]/,kre=/[\[\].#$\u0000-\u001F\u007F]/,vL=10485760,_A=function(n){return"string"==typeof n&&0!==n.length&&!xre.test(n)},qG=function(n){return"string"==typeof n&&0!==n.length&&!kre.test(n)},h1=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!$I(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},Ku=function(n,t,e,r){r&&void 0===t||f1((0,F.gK)(n,"value"),t,e)},f1=function(n,t,e){const r=e instanceof Pn?new zte(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Ym(r));if("function"==typeof t)throw new Error(n+"contains a function "+Ym(r)+" with contents = "+t.toString());if($I(t))throw new Error(n+"contains "+t.toString()+" "+Ym(r));if("string"==typeof t&&t.length>vL/3&&(0,F.ug)(t)>vL)throw new Error(n+"contains a string greater than "+vL+" utf8 bytes "+Ym(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,o=!1;if(ls(t,(c,d)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(o=!0,!_A(c)))throw new Error(n+" contains an invalid key ("+c+") "+Ym(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Wte(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,F.ug)(t),Q$(n)})(r,c),f1(n,d,r),function Kte(n){const t=n.parts_.pop();n.byteLength_-=(0,F.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+Ym(r)+" in addition to actual children.")}},zG=function(n,t,e,r){if(r&&void 0===t)return;const i=(0,F.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const o=[];ls(t,(c,d)=>{const f=new Pn(c);if(f1(i,d,xr(e,f)),".priority"===MF(f)&&!h1(d))throw new Error(i+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(f)}),function(n,t){let e,r;for(e=0;e<t.length;e++){r=t[e];const o=JC(r);for(let c=0;c<o.length;c++)if((".priority"!==o[c]||c!==o.length-1)&&!_A(o[c]))throw new Error(n+"contains an invalid key ("+o[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(qte);let i=null;for(e=0;e<t.length;e++){if(r=t[e],null!==i&&bl(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},bL=function(n,t,e){if(!e||void 0!==t){if($I(t))throw new Error((0,F.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!h1(t))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},p1=function(n,t,e,r){if(!(r&&void 0===e||_A(e)))throw new Error((0,F.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},g1=function(n,t,e,r){if(!(r&&void 0===e||qG(e)))throw new Error((0,F.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Mre=function(n,t,e,r){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),g1(n,t,e,r)},Cl=function(n,t){if(".info"===ln(t))throw new Error(n+" failed = Can't modify data under /.info/")},WG=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!_A(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qG(n)}(e))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Pre{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function yA(n,t){let e=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null!==e&&!PF(o,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:o}),e.events.push(i)}e&&n.eventLists_.push(e)}function KG(n,t,e){yA(n,e),YG(n,r=>PF(r,t))}function ka(n,t,e){yA(n,e),YG(n,r=>bl(r,t)||bl(t,r))}function YG(n,t){n.recursionDepth_++;let e=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(t(i.path)?(Fre(n.eventLists_[r]),n.eventLists_[r]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function Fre(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const r=e.getEventRunner();Wm&&as("event: "+e.toString()),jv(r)}}}const JG="repo_interrupt",Lre=25;class Ure{constructor(t,e,r,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pre,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tA(),this.transactionQueueTree_=new mL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function QG(n){const e=n.infoData_.getNode(new Pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function m1(n){return Ere({timestamp:QG(n)})}function XG(n,t,e,r,i){n.dataUpdateCount++;const o=new Pn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(i)if(r){const f=(0,F.UI)(e,y=>jr(y));c=function yre(n,t,e,r){const i=cL(n,r);if(i){const o=uL(i),c=o.path,d=o.queryId,f=_o(c,t),y=ir.fromObject(e);return dL(n,c,new Wv(YF(d),f,y))}return[]}(n.serverSyncTree_,o,f,i)}else{const f=jr(e);c=UG(n.serverSyncTree_,o,f,i)}else if(r){const f=(0,F.UI)(e,y=>jr(y));c=function gre(n,t,e){const r=ir.fromObject(e);return Yv(n,new Wv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,o,f)}else{const f=jr(e);c=l1(n.serverSyncTree_,o,f)}let d=o;c.length>0&&(d=Qv(n,o)),ka(n.eventQueue_,d,c)}function eZ(n,t){wL(n,"connected",t),!1===t&&function $re(n){Jv(n,"onDisconnectEvents");const t=m1(n),e=tA();zF(n.onDisconnect_,En(),(i,o)=>{const c=$G(i,o,n.serverSyncTree_,t);zv(e,i,c)});let r=[];zF(e,En(),(i,o)=>{r=r.concat(l1(n.serverSyncTree_,i,o));const c=DL(n,i);Qv(n,c)}),n.onDisconnect_=tA(),ka(n.eventQueue_,En(),r)}(n)}function wL(n,t,e){const r=new Pn("/.info/"+t),i=jr(e);n.infoData_.updateSnapshot(r,i);const o=l1(n.infoSyncTree_,r,i);ka(n.eventQueue_,r,o)}function vA(n){return n.nextWriteId_++}function CL(n,t,e,r,i){Jv(n,"set",{path:t.toString(),value:e,priority:r});const o=m1(n),c=jr(e,r),d=fA(n.serverSyncTree_,t),f=pL(c,d,o),y=vA(n),w=aL(n.serverSyncTree_,t,f,y,!0);yA(n.eventQueue_,w),n.server_.put(t.toString(),c.val(!0),(A,k)=>{const M="ok"===A;M||Us("set at "+t+" failed: "+A);const V=Ip(n.serverSyncTree_,y,!M);ka(n.eventQueue_,t,V),Ap(0,i,A,k)});const E=DL(n,t);Qv(n,E),ka(n.eventQueue_,E,[])}function Gre(n,t,e){n.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&qF(n.onDisconnect_,t),Ap(0,e,r,i)})}function tZ(n,t,e,r){const i=jr(e);n.server_.onDisconnectPut(t.toString(),i.val(!0),(o,c)=>{"ok"===o&&zv(n.onDisconnect_,t,i),Ap(0,r,o,c)})}function TL(n,t,e){let r;r=".info"===ln(t._path)?hA(n.infoSyncTree_,t,e):hA(n.serverSyncTree_,t,e),KG(n.eventQueue_,t._path,r)}function nZ(n){n.persistentConnection_&&n.persistentConnection_.interrupt(JG)}function Jv(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),as(e,...t)}function Ap(n,t,e,r){t&&jv(()=>{if("ok"===e)t(null);else{const i=(e||"error").toUpperCase();let o=i;r&&(o+=": "+r);const c=new Error(o);c.code=i,t(c)}})}function EL(n,t,e){return fA(n.serverSyncTree_,t,e)||Qt.EMPTY_NODE}function bA(n,t=n.transactionQueueTree_){if(t||wA(n,t),t_(t)){const e=iZ(n,t);(0,F.hu)(e.length>0,"Sending zero length transaction queue"),e.every(i=>0===i.status)&&function Yre(n,t,e){const r=e.map(y=>y.currentWriteId),i=EL(n,t,r);let o=i;const c=i.hash();for(let y=0;y<e.length;y++){const w=e[y];(0,F.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const E=_o(t,w.path);o=o.updateChild(E,w.currentOutputSnapshotRaw)}const d=o.val(!0),f=t;n.server_.put(f.toString(),d,y=>{Jv(n,"transaction put response",{path:f.toString(),status:y});let w=[];if("ok"===y){const E=[];for(let A=0;A<e.length;A++)e[A].status=2,w=w.concat(Ip(n.serverSyncTree_,e[A].currentWriteId)),e[A].onComplete&&E.push(()=>e[A].onComplete(null,!0,e[A].currentOutputSnapshotResolved)),e[A].unwatcher();wA(n,gA(n.transactionQueueTree_,t)),bA(n,n.transactionQueueTree_),ka(n.eventQueue_,t,w);for(let A=0;A<E.length;A++)jv(E[A])}else{if("datastale"===y)for(let E=0;E<e.length;E++)e[E].status=3===e[E].status?4:0;else{Us("transaction at "+f.toString()+" failed: "+y);for(let E=0;E<e.length;E++)e[E].status=4,e[E].abortReason=y}Qv(n,t)}},c)}(n,d1(t),e)}else GG(t)&&mA(t,e=>{bA(n,e)})}function Qv(n,t){const e=rZ(n,t),r=d1(e);return function Jre(n,t,e){if(0===t.length)return;const r=[];let i=[];const c=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const f=t[d],y=_o(e,f.path);let E,w=!1;if((0,F.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)w=!0,E=f.abortReason,i=i.concat(Ip(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=Lre)w=!0,E="maxretry",i=i.concat(Ip(n.serverSyncTree_,f.currentWriteId,!0));else{const A=EL(n,f.path,c);f.currentInputSnapshot=A;const k=t[d].update(A.val());if(void 0!==k){f1("transaction failed: Data returned ",k,f.path);let M=jr(k);"object"==typeof k&&null!=k&&(0,F.r3)(k,".priority")||(M=M.updatePriority(A.getPriority()));const W=f.currentWriteId,ne=m1(n),he=pL(M,A,ne);f.currentOutputSnapshotRaw=M,f.currentOutputSnapshotResolved=he,f.currentWriteId=vA(n),c.splice(c.indexOf(W),1),i=i.concat(aL(n.serverSyncTree_,f.path,he,f.currentWriteId,f.applyLocally)),i=i.concat(Ip(n.serverSyncTree_,W,!0))}else w=!0,E="nodata",i=i.concat(Ip(n.serverSyncTree_,f.currentWriteId,!0))}ka(n.eventQueue_,e,i),i=[],w&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&r.push("nodata"===E?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(E),!1,null)))}wA(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)jv(r[d]);bA(n,n.transactionQueueTree_)}(n,iZ(n,e),r),r}function rZ(n,t){let e,r=n.transactionQueueTree_;for(e=ln(t);null!==e&&void 0===t_(r);)r=gA(r,e),e=ln(t=Yn(t));return r}function iZ(n,t){const e=[];return sZ(n,t,e),e.sort((r,i)=>r.order-i.order),e}function sZ(n,t,e){const r=t_(t);if(r)for(let i=0;i<r.length;i++)e.push(r[i]);mA(t,i=>{sZ(n,i,e)})}function wA(n,t){const e=t_(t);if(e){let r=0;for(let i=0;i<e.length;i++)2!==e[i].status&&(e[r]=e[i],r++);e.length=r,_L(t,e.length>0?e:void 0)}mA(t,r=>{wA(n,r)})}function DL(n,t){const e=d1(rZ(n,t)),r=gA(n.transactionQueueTree_,t);return function Are(n,t,e){let r=e?n:n.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,i=>{SL(n,i)}),SL(n,r),ZG(r,i=>{SL(n,i)}),e}function SL(n,t){const e=t_(t);if(e){const r=[];let i=[],o=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,F.hu)(o===c-1,"All SENT items should be at beginning of queue."),o=c,e[c].status=3,e[c].abortReason="set"):((0,F.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),i=i.concat(Ip(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&r.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===o?_L(t,void 0):e.length=o+1,ka(n.eventQueue_,d1(t),i);for(let c=0;c<r.length;c++)jv(r[c])}}const IL=function(n,t){const e=eie(n),r=e.namespace;return"firebase.com"===e.domain&&qu(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==e.domain&&qu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Us("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new AF(e.host,e.secure,r,"ws"===e.scheme||"wss"===e.scheme,t,"",r!==e.subdomain),path:new Pn(e.pathString)}},eie=function(n){let t="",e="",r="",i="",o="",c=!0,d="https",f=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let w=n.indexOf("/");-1===w&&(w=n.length);let E=n.indexOf("?");-1===E&&(E=n.length),t=n.substring(0,Math.min(w,E)),w<E&&(i=function Qre(n){let t="";const e=n.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let i=e[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}(n.substring(w,E)));const A=function Xre(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const r=e.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Us(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,E)));y=t.indexOf(":"),y>=0?(c="https"===d||"wss"===d,f=parseInt(t.substring(y+1),10)):y=t.length;const k=t.slice(0,y);if("localhost"===k.toLowerCase())e="localhost";else if(k.split(".").length<=2)e=k;else{const M=t.indexOf(".");r=t.substring(0,M).toLowerCase(),e=t.substring(M+1),o=r}"ns"in A&&(o=A.ns)}return{host:t,port:f,domain:e,subdomain:r,secure:c,scheme:d,pathString:i,namespace:o}};class oZ{constructor(t,e,r,i){this.eventType=t,this.eventRegistration=e,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class aZ{constructor(t,e,r){this.eventRegistration=t,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class AL{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class lZ{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new F.BH;return Gre(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Cl("OnDisconnect.remove",this._path);const t=new F.BH;return tZ(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Cl("OnDisconnect.set",this._path),Ku("OnDisconnect.set",t,this._path,!1);const e=new F.BH;return tZ(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Cl("OnDisconnect.setWithPriority",this._path),Ku("OnDisconnect.setWithPriority",t,this._path,!1),bL("OnDisconnect.setWithPriority",e,!1);const r=new F.BH;return function Zre(n,t,e,r,i){const o=jr(e,r);n.server_.onDisconnectPut(t.toString(),o.val(!0),(c,d)=>{"ok"===c&&zv(n.onDisconnect_,t,o),Ap(0,i,c,d)})}(this._repo,this._path,t,e,r.wrapCallback(()=>{})),r.promise}update(t){Cl("OnDisconnect.update",this._path),zG("OnDisconnect.update",t,this._path,!1);const e=new F.BH;return function qre(n,t,e,r){if((0,F.xb)(e))return as("onDisconnect().update() called with empty data.  Don't do anything."),void Ap(0,r,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(i,o)=>{"ok"===i&&ls(e,(c,d)=>{const f=jr(d);zv(n.onDisconnect_,xr(t,c),f)}),Ap(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Go{constructor(t,e,r,i){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=i}get key(){return cn(this._path)?null:MF(this._path)}get ref(){return new Tl(this._repo,this._path)}get _queryIdentifier(){const t=fG(this._queryParams),e=DF(t);return"{}"===e?"default":e}get _queryObject(){return fG(this._queryParams)}isEqual(t){if(!((t=(0,F.m9)(t))instanceof Go))return!1;const e=this._repo===t._repo,r=PF(this._path,t._path);return e&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Zte(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function CA(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Np(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Wu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Th)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==zu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}}else if(n.getIndex()===rr){if(null!=t&&!h1(t)||null!=e&&!h1(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof VF||n.getIndex()===jF,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function TA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Tl extends Go{constructor(t,e){super(t,e,new QI,!1)}get parent(){const t=J$(this._path);return null===t?null:new Tl(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class n_{constructor(t,e,r){this._node=t,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Pn(t),r=r_(this.ref,t);return new n_(this._node.getChild(e),r,rr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>t(new n_(i,r_(this.ref,r),rr)))}hasChild(t){const e=new Pn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function cZ(n,t){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==t?r_(n._root,t):n._root}function uZ(n,t){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const e=IL(t,n._repo.repoInfo_.nodeAdmin);WG("refFromURL",e);const r=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&qu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),cZ(n,e.path.toString())}function r_(n,t){return null===ln((n=(0,F.m9)(n))._path)?Mre("child","path",t,!1):g1("child","path",t,!1),new Tl(n._repo,xr(n._path,t))}function NL(n,t){n=(0,F.m9)(n),Cl("set",n._path),Ku("set",t,n._path,!1);const e=new F.BH;return CL(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function sie(n,t){zG("update",t,n._path,!1);const e=new F.BH;return function Hre(n,t,e,r){Jv(n,"update",{path:t.toString(),value:e});let i=!0;const o=m1(n),c={};if(ls(e,(d,f)=>{i=!1,c[d]=$G(xr(t,d),jr(f),n.serverSyncTree_,o)}),i)as("update() called with empty data.  Don't do anything."),Ap(0,r,"ok",void 0);else{const d=vA(n),f=function pre(n,t,e,r){!function kne(n,t,e,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:r,visible:!0}),n.visibleWrites=QF(n.visibleWrites,t,e),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r);const i=ir.fromObject(e);return Yv(n,new Wv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,t,c,d);yA(n.eventQueue_,f),n.server_.merge(t.toString(),e,(y,w)=>{const E="ok"===y;E||Us("update at "+t+" failed: "+y);const A=Ip(n.serverSyncTree_,d,!E),k=A.length>0?Qv(n,t):t;ka(n.eventQueue_,k,A),Ap(0,r,y,w)}),ls(e,y=>{const w=DL(n,xr(t,y));Qv(n,w)}),ka(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function oie(n){n=(0,F.m9)(n);const t=new AL(()=>{}),e=new _1(t);return function jre(n,t,e){const r=function vre(n,t){const e=t._path;let r=null;n.syncPointTree_.foreachOnPath(e,(y,w)=>{const E=_o(y,e);r=r||Dp(w,E)});let i=n.syncPointTree_.get(e);i?r=r||Dp(i,En()):(i=new RG,n.syncPointTree_=n.syncPointTree_.set(e,i));const o=null!=r,c=o?new Tp(r,!0,!1):null;return function nre(n){return iA(n.viewCache_)}(OG(i,t,sA(n.pendingWriteTree_,t._path),o?c.getNode():Qt.EMPTY_NODE,o))}(n.serverSyncTree_,t);return null!=r?Promise.resolve(r):n.server_.get(t).then(i=>{const o=jr(i).withIndex(t._queryParams.getIndex());let c;if(lL(n.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())c=l1(n.serverSyncTree_,t._path,o);else{const d=c1(n.serverSyncTree_,t);c=UG(n.serverSyncTree_,t._path,o,d)}return ka(n.eventQueue_,t._path,c),hA(n.serverSyncTree_,t,e,null,!0),o},i=>(Jv(n,"get for query "+(0,F.Pz)(t)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,e).then(r=>new n_(r,new Tl(n._repo,n._path),n._queryParams.getIndex()))}class _1{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const r=e._queryParams.getIndex();return new oZ("value",this,new n_(t.snapshotNode,new Tl(e._repo,e._path),r))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new aZ(this,t,e):null}matches(t){return t instanceof _1&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class EA{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new aZ(this,t,e):null}createEvent(t,e){(0,F.hu)(null!=t.childName,"Child events should have a childName.");const r=r_(new Tl(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new oZ(t.type,this,new n_(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof EA&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function y1(n,t,e,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const f=e,y=(w,E)=>{TL(n._repo,n,d),f(w,E)};y.userCallback=e.userCallback,y.context=e.context,e=y}const c=new AL(e,o||void 0),d="value"===t?new _1(c):new EA(t,c);return function zre(n,t,e){let r;r=".info"===ln(t._path)?lL(n.infoSyncTree_,t,e):lL(n.serverSyncTree_,t,e),KG(n.eventQueue_,t._path,r)}(n._repo,n,d),()=>TL(n._repo,n,d)}function xL(n,t,e,r){return y1(n,"value",t,e,r)}function dZ(n,t,e,r){return y1(n,"child_added",t,e,r)}function hZ(n,t,e,r){return y1(n,"child_changed",t,e,r)}function fZ(n,t,e,r){return y1(n,"child_moved",t,e,r)}function pZ(n,t,e,r){return y1(n,"child_removed",t,e,r)}function gZ(n,t,e){let r=null;const i=e?new AL(e):null;"value"===t?r=new _1(i):t&&(r=new EA(t,i)),TL(n._repo,n,r)}class xc{}class mZ extends xc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Ku("endAt",this._value,t._path,!0);const e=ZF(t._queryParams,this._value,this._key);if(TA(e),Np(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Go(t._repo,t._path,e,t._orderByCalled)}}class lie extends xc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Ku("endBefore",this._value,t._path,!1);const e=function yne(n,t,e){let r,i;return n.index_===Wu?("string"==typeof t&&(t=uG(t)),i=ZF(n,t,e)):(r=null==e?Th:uG(e),i=ZF(n,t,r)),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(TA(e),Np(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Go(t._repo,t._path,e,t._orderByCalled)}}class _Z extends xc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Ku("startAt",this._value,t._path,!0);const e=GF(t._queryParams,this._value,this._key);if(TA(e),Np(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Go(t._repo,t._path,e,t._orderByCalled)}}class die extends xc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Ku("startAfter",this._value,t._path,!1);const e=function _ne(n,t,e){let r;if(n.index_===Wu)"string"==typeof t&&(t=cG(t)),r=GF(n,t,e);else{let i;i=null==e?zu:cG(e),r=GF(n,t,i)}return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(TA(e),Np(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Go(t._repo,t._path,e,t._orderByCalled)}}class fie extends xc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Go(t._repo,t._path,function gne(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class gie extends xc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Go(t._repo,t._path,function mne(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class _ie extends xc{constructor(t){super(),this._path=t}_apply(t){CA(t,"orderByChild");const e=new Pn(this._path);if(cn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new VF(e),i=XI(t._queryParams,r);return Np(i),new Go(t._repo,t._path,i,!0)}}class vie extends xc{_apply(t){CA(t,"orderByKey");const e=XI(t._queryParams,Wu);return Np(e),new Go(t._repo,t._path,e,!0)}}class wie extends xc{_apply(t){CA(t,"orderByPriority");const e=XI(t._queryParams,rr);return Np(e),new Go(t._repo,t._path,e,!0)}}class Tie extends xc{_apply(t){CA(t,"orderByValue");const e=XI(t._queryParams,jF);return Np(e),new Go(t._repo,t._path,e,!0)}}class Die extends xc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Ku("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new mZ(this._value,this._key)._apply(new _Z(this._value,this._key)._apply(t))}}function kc(n,...t){let e=(0,F.m9)(n);for(const r of t)e=r._apply(e);return e}(function ore(n){(0,F.hu)(!cA,"__referenceConstructor has already been defined"),cA=n})(Tl),function dre(n){(0,F.hu)(!dA,"__referenceConstructor has already been defined"),dA=n}(Tl);const Iie="FIREBASE_DATABASE_EMULATOR_HOST",kL={};let yZ=!1;function vZ(n,t,e,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||qu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),as("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,y,c=IL(o,i),d=c.repoInfo;typeof process<"u"&&process.env&&(y=process.env[Iie]),y?(f=!0,o=`http://${y}?ns=${d.namespace}`,c=IL(o,i),d=c.repoInfo):f=!c.repoInfo.secure;const w=i&&f?new YC(YC.OWNER):new bte(n.name,n.options,t);WG("Invalid Firebase Database URL",c),cn(c.path)||qu("Database URL must point to the root of a Firebase Database (not including a child path).");const E=function xie(n,t,e,r){let i=kL[t.name];i||(i={},kL[t.name]=i);let o=i[n.toURLString()];return o&&qu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Ure(n,yZ,e,r),i[n.toURLString()]=o,o}(d,n,w,new vte(n.name,e));return new Rie(E,n)}class Rie{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Bre(n,t,e){if(n.stats_=kF(n.repoInfo_),n.forceRestClient_||yte())n.server_=new eA(n.repoInfo_,(r,i,o,c)=>{XG(n,r,i,o,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>eZ(n,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Jm(n.repoInfo_,t,(r,i,o,c)=>{XG(n,r,i,o,c)},r=>{eZ(n,r)},r=>{!function Vre(n,t){ls(t,(e,r)=>{wL(n,e,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Tte(n,t){const e=n.toString();return xF[e]||(xF[e]=t()),xF[e]}(n.repoInfo_,()=>new Ene(n.stats_,n.server_)),n.infoData_=new vne,n.infoSyncTree_=new LG({startListening:(r,i,o,c)=>{let d=[];const f=n.infoData_.getNode(r._path);return f.isEmpty()||(d=l1(n.infoSyncTree_,r._path,f),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),wL(n,"connected",!1),n.serverSyncTree_=new LG({startListening:(r,i,o,c)=>(n.server_.listen(r,o,i,(d,f)=>{const y=c(d,f);ka(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Tl(this._repo,En())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Nie(n,t){const e=kL[t];(!e||e[n.key]!==n)&&qu(`Database ${t}(${n.repoInfo_}) has already been deleted.`),nZ(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&qu("Cannot call "+t+" on a deleted database.")}}function bZ(){B$.IS_TRANSPORT_INITIALIZED&&Us("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Oie(){bZ(),wp.forceDisallow()}function Mie(){bZ(),Hv.forceDisallow(),wp.forceAllow()}function Uie(n,t){v$(n,t)}const Vie={".sv":"timestamp"};class $ie{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Jm.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Jm.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function Bie(n){p$(oo.SDK_VERSION),(0,oo._registerComponent)(new Tc.wA("database",(t,{instanceIdentifier:e})=>vZ(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,oo.registerVersion)(h$,"0.13.5",n),(0,oo.registerVersion)(h$,"0.13.5","esm2017")}();const zie=new Ec.Yd("@firebase/database-compat"),wZ=function(n){zie.warn("FIREBASE WARNING: "+n)};class Yie{constructor(t){this._delegate=t}cancel(t){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),r=>t(r)),e}remove(t){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),r=>t(r)),e}set(t,e){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",e,!0);const r=this._delegate.set(t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(t,e);return r&&i.then(()=>r(null),o=>r(o)),i}update(t,e){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let o=0;o<t.length;++o)i[""+o]=t[o];t=i,wZ("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",e,!0);const r=this._delegate.update(t);return e&&r.then(()=>e(null),i=>e(i)),r}}class Jie{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class xp{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),g1("DataSnapshot.child","path",t,!1),new xp(this._database,this._delegate.child(t))}hasChild(t){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),g1("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new xp(this._database,e)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ra(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ws{constructor(t,e){this.database=t,this._delegate=e}on(t,e,r,i){var o;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",e,!1);const c=ws.getCancelAndContextArgs_("Query.on",r,i),d=(y,w)=>{e.call(c.context,new xp(this.database,y),w)};d.userCallback=e,d.context=c.context;const f=null===(o=c.cancel)||void 0===o?void 0:o.bind(c.context);switch(t){case"value":return xL(this._delegate,d,f),e;case"child_added":return dZ(this._delegate,d,f),e;case"child_removed":return pZ(this._delegate,d,f),e;case"child_changed":return hZ(this._delegate,d,f),e;case"child_moved":return fZ(this._delegate,d,f),e;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,F.Wj)("Query.off","callback",e,!0),(0,F.lb)("Query.off","context",r,!0),e){const i=()=>{};i.userCallback=e,i.context=r,gZ(this._delegate,t,i)}else gZ(this._delegate,t)}get(){return oie(this._delegate).then(t=>new xp(this.database,t))}once(t,e,r,i){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",e,!0);const o=ws.getCancelAndContextArgs_("Query.once",r,i),c=new F.BH,d=(y,w)=>{const E=new xp(this.database,y);e&&e.call(o.context,E,w),c.resolve(E)};d.userCallback=e,d.context=o.context;const f=y=>{o.cancel&&o.cancel.call(o.context,y),c.reject(y)};switch(t){case"value":xL(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":dZ(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":pZ(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":hZ(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":fZ(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new ws(this.database,kc(this._delegate,function pie(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new fie(n)}(t)))}limitToLast(t){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new ws(this.database,kc(this._delegate,function mie(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new gie(n)}(t)))}orderByChild(t){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new ws(this.database,kc(this._delegate,function yie(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return g1("orderByChild","path",n,!1),new _ie(n)}(t)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new ws(this.database,kc(this._delegate,function bie(){return new vie}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new ws(this.database,kc(this._delegate,function Cie(){return new wie}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new ws(this.database,kc(this._delegate,function Eie(){return new Tie}()))}startAt(t=null,e){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new ws(this.database,kc(this._delegate,function uie(n=null,t){return p1("startAt","key",t,!0),new _Z(n,t)}(t,e)))}startAfter(t=null,e){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new ws(this.database,kc(this._delegate,function hie(n,t){return p1("startAfter","key",t,!0),new die(n,t)}(t,e)))}endAt(t=null,e){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new ws(this.database,kc(this._delegate,function aie(n,t){return p1("endAt","key",t,!0),new mZ(n,t)}(t,e)))}endBefore(t=null,e){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new ws(this.database,kc(this._delegate,function cie(n,t){return p1("endBefore","key",t,!0),new lie(n,t)}(t,e)))}equalTo(t,e){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new ws(this.database,kc(this._delegate,function Sie(n,t){return p1("equalTo","key",t,!0),new Die(n,t)}(t,e)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof ws))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,r){const i={cancel:void 0,context:void 0};if(e&&r)i.cancel=e,(0,F.Wj)(t,"cancel",i.cancel,!0),i.context=r,(0,F.lb)(t,"context",i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error((0,F.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=e}return i}get ref(){return new Ra(this.database,new Tl(this._delegate._repo,this._delegate._path))}}class Ra extends ws{constructor(t,e){super(t,new Go(e._repo,e._path,new QI,!1)),this.database=t,this._delegate=e}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Ra(this.database,r_(this._delegate,t))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Ra(this.database,t):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new Ra(this.database,this._delegate.root)}set(t,e){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",e,!0);const r=NL(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}update(t,e){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let o=0;o<t.length;++o)i[""+o]=t[o];t=i,wZ("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Cl("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",e,!0);const r=sie(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function iie(n,t,e){if(Cl("setWithPriority",n._path),Ku("setWithPriority",t,n._path,!1),bL("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return CL(n._repo,n._path,t,e,r.wrapCallback(()=>{})),r.promise}(this._delegate,t,e);return r&&i.then(()=>r(null),o=>r(o)),i}remove(t){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",t,!0);const e=function nie(n){return Cl("remove",n._path),NL(n,null)}(this._delegate);return t&&e.then(()=>t(null),r=>t(r)),e}transaction(t,e,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,F.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,r){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Gie(n,t,e){var r;if(n=(0,F.m9)(n),Cl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=e?.applyLocally)||void 0===r||r,o=new F.BH,d=xL(n,()=>{});return function Kre(n,t,e,r,i,o){Jv(n,"transaction on "+t);const c={path:t,update:e,onComplete:r,status:null,order:m$(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=EL(n,t,void 0);c.currentInputSnapshot=d;const f=c.update(d.val());if(void 0===f)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{f1("transaction failed: Data returned ",f,c.path),c.status=0;const y=gA(n.transactionQueueTree_,t),w=t_(y)||[];let E;w.push(c),_L(y,w),"object"==typeof f&&null!==f&&(0,F.r3)(f,".priority")?(E=(0,F.DV)(f,".priority"),(0,F.hu)(h1(E),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):E=(fA(n.serverSyncTree_,t)||Qt.EMPTY_NODE).getPriority().val();const A=m1(n),k=jr(f,E),M=pL(k,d,A);c.currentOutputSnapshotRaw=k,c.currentOutputSnapshotResolved=M,c.currentWriteId=vA(n);const V=aL(n.serverSyncTree_,t,M,c.currentWriteId,c.applyLocally);ka(n.eventQueue_,t,V),bA(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(f,y,w)=>{let E=null;f?o.reject(f):(E=new n_(w,new Tl(n._repo,n._path),rr),o.resolve(new $ie(y,E)))},d,i),o.promise}(this._delegate,t,{applyLocally:r}).then(o=>new Jie(o.committed,new xp(this.database,o.snapshot)));return e&&i.then(o=>e(null,o.committed,o.snapshot),o=>e(o,!1,null)),i}setPriority(t,e){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",e,!0);const r=function rie(n,t){n=(0,F.m9)(n),Cl("setPriority",n._path),bL("setPriority",t,!1);const e=new F.BH;return CL(n._repo,xr(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}push(t,e){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",e,!0);const r=function tie(n,t){n=(0,F.m9)(n),Cl("push",n._path),Ku("push",t,n._path,!0);const e=QG(n._repo),r=dne(e),i=r_(n,r),o=r_(n,r);let c;return c=null!=t?NL(o,t).then(()=>o):Promise.resolve(o),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,t),i=r.then(c=>new Ra(this.database,c));e&&i.then(()=>e(null),c=>e(c));const o=new Ra(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return Cl("Reference.onDisconnect",this._delegate._path),new Yie(new lZ(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class v1{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Oie,forceLongPolling:Mie}}useEmulator(t,e,r={}){!function Pie(n,t,e,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&qu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&qu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new YC(YC.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);o=new YC(c)}!function Aie(n,t,e,r){n.repoInfo_=new AF(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,t,e,o)}(this._delegate,t,e,r)}ref(t){if((0,F.Dv)("database.ref",0,1,arguments.length),t instanceof Ra){const e=uZ(this._delegate,t.toString());return new Ra(this,e)}{const e=cZ(this._delegate,t);return new Ra(this,e)}}refFromURL(t){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=uZ(this._delegate,t);return new Ra(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function Fie(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),nZ(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function Lie(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function Wre(n){n.persistentConnection_&&n.persistentConnection_.resume(JG)}(n._repo)}(this._delegate)}}v1.ServerValue={TIMESTAMP:function jie(){return Vie}(),increment:n=>function Hie(n){return{".sv":{increment:n}}}(n)};var Xie=Object.freeze({__proto__:null,initStandalone:function Qie({app:n,url:t,version:e,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){p$(e);const c=new Tc.zt("auth-internal",new Tc.H0("database-standalone"));return c.setComponent(new Tc.wA("auth-internal",()=>r,"PRIVATE")),{instance:new v1(vZ(n,c,void 0,t,o),n),namespace:i}}});const ese=v1.ServerValue;function CZ(n){return null==n}function TZ(n){return"function"==typeof n.set}function EZ(n,t){return TZ(t)?t:n.ref(t)}function DZ(n,t){if(function nse(n){return"string"==typeof n}(n))return t.stringCase();if(TZ(n))return t.firebaseCase();if(function rse(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function b1(n,t,e="on",r=Qg.z){return new Tn.y(i=>{let o=null;return o=n[e](t,(c,d)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:d})}),"once"===e&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===e?{unsubscribe(){null!=o&&n.off(t,o)}}:{unsubscribe(){}}}).pipe((0,S.U)(i=>{const{snapshot:o,prevKey:c}=i;let d=null;return o.exists()&&(d=o.key),{type:t,payload:o,prevKey:c,key:d}}),(0,gD.B)())}function SZ(n,t){const e=n.length;for(let r=0;r<e;r++)if(n[r].payload.key===t)return r;return-1}function ose(n,t){const{payload:e,prevKey:r,key:i}=t,o=SZ(n,i),c=function sse(n,t){if(CZ(t))return 0;{const e=SZ(n,t);return-1===e?n.length:e+1}}(n,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(f=>{const y={payload:f,type:"value",prevKey:d,key:f.key};return d=f.key,n=[...n,y],!1})}return n;case"child_added":if(o>-1){const d=n[o-1];(d&&d.key||null)!==r&&(n=n.filter(f=>f.payload.key!==e.key)).splice(c,0,t)}else{if(null==r)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===i?t:d);case"child_moved":if(o>-1){const d=n.splice(o,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function IZ(n){return(CZ(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function AZ(n,t,e){return function ise(n,t,e){return b1(n,"value","once",e).pipe(Bn(r=>{const i=[Fe(r)];return t.forEach(o=>i.push(b1(n,o,"on",e))),(0,jy.T)(...i).pipe(da(ose,[]))}),oh())}(n,t=IZ(t),e)}function NZ(n,t,e){const r=(t=IZ(t)).map(i=>b1(n,i,"on",e));return(0,jy.T)(...r)}function xZ(n,t){return function(r,i){return DZ(r,{stringCase:()=>n.child(r)[t](i),firebaseCase:()=>r[t](i),snapshotCase:()=>r.ref[t](i)})}}function use(n){return function(e){return e?DZ(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function kZ(n,t){return function(){return b1(n,"value","on",t)}}!function tse(n){n.INTERNAL.registerComponent(new Tc.wA("database-compat",(t,{instanceIdentifier:e})=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:e});return new v1(i,r)},"PUBLIC").setServiceProps({Reference:Ra,Query:ws,Database:v1,DataSnapshot:xp,enableLogging:Uie,INTERNAL:Xie,ServerValue:ese}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.5")}(HR.Z);const fse=new s.OlP("angularfire2.realtimeDatabaseURL"),pse=new s.OlP("angularfire2.database.use-emulator");let gse=(()=>{class n{constructor(e,r,i,o,c,d,f,y,w,E,A,k,M,V,W){this.schedulers=d;const ne=f,he=(0,Hi.on)(e,c,r);y&&oF(he,c,w,A,k,M,E,V),this.database=(0,Hi.cc)(`${he.name}.database.${i}`,"AngularFireDatabase",he.name,()=>{const Ie=c.runOutsideAngular(()=>he.database(i||void 0));return ne&&Ie.useEmulator(...ne),Ie},[ne])}list(e,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>EZ(this.database,e));let o=i;return r&&(o=r(i)),function dse(n,t){const e=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:xZ(r,"update"),set:xZ(r,"set"),push:i=>r.push(i),remove:use(r),snapshotChanges:i=>AZ(n,i,e).pipe(kn.iC),stateChanges:i=>NZ(n,i,e).pipe(kn.iC),auditTrail:i=>function ase(n,t,e){return function cse(n,t,e){return function lse(n,t){return b1(n,"value","on",t).pipe((0,S.U)(e=>{let r;return e.payload.forEach(i=>(r=i.key,!1)),{data:e,lastKeyToLoad:r}}))}(n,e).pipe(WD(t),(0,S.U)(([i,o])=>{const c=i.lastKeyToLoad,d=o.map(f=>f.key);return{actions:o,lastKeyToLoad:c,loadedKeys:d}}),function lte(n){return(0,xn.e)((t,e)=>{let r=!1,i=0;t.subscribe((0,ve.x)(e,o=>(r||(r=!n(o,i++)))&&e.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,S.U)(i=>i.actions))}(n,NZ(n,t).pipe(da((i,o)=>[...i,o],[])),e)}(n,i,e).pipe(kn.iC),valueChanges:(i,o)=>AZ(n,i,e).pipe((0,S.U)(d=>d.map(f=>o&&o.idField?Object.assign(Object.assign({},f.payload.val()),{[o.idField]:f.key}):f.payload.val())),kn.iC)}}(o,this)}object(e){return function hse(n,t){return{query:n,snapshotChanges:()=>kZ(n,t.schedulers.outsideAngular)().pipe(kn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>kZ(n,t.schedulers.outsideAngular)().pipe(kn.iC,(0,S.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>EZ(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Hi.Dh),s.LFG(Hi.xv,8),s.LFG(fse,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(kn.HU),s.LFG(pse,8),s.LFG(aF,8),s.LFG(eF,8),s.LFG(tF,8),s.LFG(nF,8),s.LFG(rF,8),s.LFG(iF,8),s.LFG(sF,8),s.LFG(jC,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mse=(()=>{class n{constructor(){XP.Z.registerVersion("angularfire",kn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[gse]}),n})(),_se=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=s.oAB({type:n,bootstrap:[zW]});static#n=this.\u0275inj=s.cJS({providers:[{provide:ut,useClass:xe},MR,...dX,...hX,...fX,...pX,...gX,...mX],imports:[rl,ax,JE,Qx,dk,nT,RD.forRoot(),qW,Hi.hO.initializeApp(_X_firebase),mse,uX,ate,G2.forRoot(),F8]})}return n})();Gh().bootstrapModule(_se).catch(n=>console.error(n))},5867:(_t,Ae,U)=>{U.d(Ae,{C6:()=>s.getApps,Mq:()=>s.getApp});var s=U(9681);(0,s.registerVersion)("firebase","9.9.3","app")},127:(_t,Ae,U)=>{U.d(Ae,{Z:()=>s.Z});var s=U(3942);s.Z.registerVersion("firebase","9.9.3","app-compat")},1451:(_t,Ae,U)=>{U.r(Ae);var s=U(5861),te=U(3942),L=U(2090),le=U(9681),oe=U(7582),ie=U(1877),Ce=U(4859);const _e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ee_EMAIL_SIGNIN="EMAIL_SIGNIN",ee_PASSWORD_RESET="PASSWORD_RESET",ee_RECOVER_EMAIL="RECOVER_EMAIL",ee_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",ee_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",ee_VERIFY_EMAIL="VERIFY_EMAIL";const Qe=function Ye(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ut=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},be=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xe=new ie.Yd("@firebase/auth");function Ge(v,...g){xe.logLevel<=ie.in.ERROR&&xe.error(`Auth (${le.SDK_VERSION}): ${v}`,...g)}function ke(v,...g){throw je(v,...g)}function Se(v,...g){return je(v,...g)}function Me(v,g,_){const C=Object.assign(Object.assign({},ut()),{[g]:_});return new L.LL("auth","Firebase",C).create(g,{appName:v.name})}function ze(v,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&ke(v,"argument-error"),Me(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(v,...g){if("string"!=typeof v){const _=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=v.name),v._errorFactory.create(_,...C)}return be.create(v,...g)}function G(v,g,..._){if(!v)throw je(g,..._)}function Ee(v){const g="INTERNAL ASSERTION FAILED: "+v;throw Ge(g),new Error(g)}function Ke(v,g){v||Ee(g)}const tt=new Map;function yt(v){Ke(v instanceof Function,"Expected a class definition");let g=tt.get(v);return g?(Ke(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,tt.set(v,g),g)}function kr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function sr(){return"http:"===cs()||"https:"===cs()}function cs(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class fe{constructor(g,_){this.shortDelay=g,this.longDelay=_,Ke(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function ae(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(sr()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function se(v,g){Ke(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Ze{static initialize(g,_,C){this.fetchImpl=g,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Tt=new fe(3e4,6e4);function Xe(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function Yt(v,g,_,C){return St.apply(this,arguments)}function St(){return(St=(0,s.Z)(function*(v,g,_,C,x={}){return Jt(v,x,(0,s.Z)(function*(){let P={},Y={};C&&("GET"===g?Y=C:P={body:JSON.stringify(C)});const ue=(0,L.xO)(Object.assign({key:v.config.apiKey},Y)).slice(1),Be=yield v._getAdditionalHeaders();return Be["Content-Type"]="application/json",v.languageCode&&(Be["X-Firebase-Locale"]=v.languageCode),Ze.fetch()(Rr(v,v.config.apiHost,_,ue),Object.assign({method:g,headers:Be,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Jt(v,g,_){return un.apply(this,arguments)}function un(){return(un=(0,s.Z)(function*(v,g,_){v._canInitEmulator=!1;const C=Object.assign(Object.assign({},$e),g);try{const x=new Ln(v),P=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const Y=yield P.json();if("needConfirmation"in Y)throw qn(v,"account-exists-with-different-credential",Y);if(P.ok&&!("errorMessage"in Y))return Y;{const ue=P.ok?Y.errorMessage:Y.error.message,[Be,ot]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw qn(v,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Be)throw qn(v,"email-already-in-use",Y);if("USER_DISABLED"===Be)throw qn(v,"user-disabled",Y);const Nt=C[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(ot)throw Me(v,Nt,ot);ke(v,Nt)}}catch(x){if(x instanceof L.ZR)throw x;ke(v,"network-request-failed")}})).apply(this,arguments)}function rn(v,g,_,C){return gr.apply(this,arguments)}function gr(){return(gr=(0,s.Z)(function*(v,g,_,C,x={}){const P=yield Yt(v,g,_,C,x);return"mfaPendingCredential"in P&&ke(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Rr(v,g,_,C){const x=`${g}${_}?${C}`;return v.config.emulator?se(v.config,x):`${v.config.apiScheme}://${x}`}class Ln{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Se(this.auth,"network-request-failed")),Tt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qn(v,g,_){const C={appName:v.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const x=Se(v,g,C);return x.customData._tokenResponse=_,x}function Un(){return(Un=(0,s.Z)(function*(v,g){return Yt(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function us(){return(us=(0,s.Z)(function*(v,g){return Yt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function jn(){return(jn=(0,s.Z)(function*(v,g){return Yt(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function ti(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Sn(){return(Sn=(0,s.Z)(function*(v,g=!1){const _=(0,L.m9)(v),C=yield _.getIdToken(g),x=kt(C);G(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const P="object"==typeof x.firebase?x.firebase:void 0,Y=P?.sign_in_provider;return{claims:x,token:C,authTime:ti(Et(x.auth_time)),issuedAtTime:ti(Et(x.iat)),expirationTime:ti(Et(x.exp)),signInProvider:Y||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function Et(v){return 1e3*Number(v)}function kt(v){var g;const[_,C,x]=v.split(".");if(void 0===_||void 0===C||void 0===x)return Ge("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,L.tV)(C);return P?JSON.parse(P):(Ge("Failed to decode base64 JWT payload"),null)}catch(P){return Ge("Caught error parsing JWT payload as JSON",null===(g=P)||void 0===g?void 0:g.toString()),null}}function Jn(v,g){return zn.apply(this,arguments)}function zn(){return(zn=(0,s.Z)(function*(v,g,_=!1){if(_)return g;try{return yield g}catch(C){throw C instanceof L.ZR&&function js({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(C)&&v.auth.currentUser===v&&(yield v.auth.signOut()),C}})).apply(this,arguments)}class Gr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,s.Z)(function*(){yield _.iteration()}),C)}iteration(){var g=this;return(0,s.Z)(function*(){var _;try{yield g.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null===(_=C)||void 0===_?void 0:_.code)&&g.schedule(!0))}g.schedule()})()}}class Ma{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=ti(this.lastLoginAt),this.creationTime=ti(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function mn(v){return xi.apply(this,arguments)}function xi(){return xi=(0,s.Z)(function*(v){var g;const _=v.auth,C=yield v.getIdToken(),x=yield Jn(v,function Vs(v,g){return jn.apply(this,arguments)}(_,{idToken:C}));G(x?.users.length,_,"internal-error");const P=x.users[0];v._notifyReloadListener(P);const Y=null!==(g=P.providerUserInfo)&&void 0!==g&&g.length?function H(v){return v.map(g=>{var{providerId:_}=g,C=(0,oe._T)(g,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}(P.providerUserInfo):[],ue=function $(v,g){return[...v.filter(C=>!g.some(x=>x.providerId===C.providerId)),...g]}(v.providerData,Y),Nt=!!v.isAnonymous&&!(v.email&&P.passwordHash||ue?.length),Dt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:ue,metadata:new Ma(P.createdAt,P.lastLoginAt),isAnonymous:Nt};Object.assign(v,Dt)}),xi.apply(this,arguments)}function Q(){return(Q=(0,s.Z)(function*(v){const g=(0,L.m9)(v);yield mn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function K(){return(K=(0,s.Z)(function*(v,g){const _=yield Jt(v,{},(0,s.Z)(function*(){const C=(0,L.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:P}=v.config,Y=Rr(v,x,"/v1/token",`key=${P}`),ue=yield v._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",Ze.fetch()(Y,{method:"POST",headers:ue,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){G(g.idToken,"internal-error"),G(typeof g.idToken<"u","internal-error"),G(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function ds(v){const g=kt(v);return G(g,"internal-error"),G(typeof g.exp<"u","internal-error"),G(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var C=this;return(0,s.Z)(function*(){return G(!C.accessToken||C.refreshToken,g,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var C=this;return(0,s.Z)(function*(){const{accessToken:x,refreshToken:P,expiresIn:Y}=yield function z(v,g){return K.apply(this,arguments)}(g,_);C.updateTokensAndExpiration(x,P,Number(Y))})()}updateTokensAndExpiration(g,_,C){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,_){const{refreshToken:C,accessToken:x,expirationTime:P}=_,Y=new Ne;return C&&(G("string"==typeof C,"internal-error",{appName:g}),Y.refreshToken=C),x&&(G("string"==typeof x,"internal-error",{appName:g}),Y.accessToken=x),P&&(G("number"==typeof P,"internal-error",{appName:g}),Y.expirationTime=P),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ne,this.toJSON())}_performRefresh(){return Ee("not implemented")}}function Je(v,g){G("string"==typeof v||typeof v>"u","internal-error",{appName:g})}class bt{constructor(g){var{uid:_,auth:C,stsTokenManager:x}=g,P=(0,oe._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Ma(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,s.Z)(function*(){const C=yield Jn(_,_.stsTokenManager.getToken(_.auth,g));return G(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(g){return function wn(v){return Sn.apply(this,arguments)}(this,g)}reload(){return function en(v){return Q.apply(this,arguments)}(this)}_assign(g){this!==g&&(G(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new bt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var C=this;return(0,s.Z)(function*(){let x=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),x=!0),_&&(yield mn(C)),yield C.auth._persistUserIfCurrent(C),x&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,s.Z)(function*(){const _=yield g.getIdToken();return yield Jn(g,function Ni(v,g){return Un.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var C,x,P,Y,ue,Be,ot,Nt;const Dt=null!==(C=_.displayName)&&void 0!==C?C:void 0,Ur=null!==(x=_.email)&&void 0!==x?x:void 0,Ei=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,Ud=null!==(Y=_.photoURL)&&void 0!==Y?Y:void 0,ug=null!==(ue=_.tenantId)&&void 0!==ue?ue:void 0,bu=null!==(Be=_._redirectEventId)&&void 0!==Be?Be:void 0,dg=null!==(ot=_.createdAt)&&void 0!==ot?ot:void 0,_f=null!==(Nt=_.lastLoginAt)&&void 0!==Nt?Nt:void 0,{uid:yf,emailVerified:nc,isAnonymous:Rs,providerData:rc,stsTokenManager:ic}=_;G(yf&&ic,g,"internal-error");const S_=Ne.fromJSON(this.name,ic);G("string"==typeof yf,g,"internal-error"),Je(Dt,g.name),Je(Ur,g.name),G("boolean"==typeof nc,g,"internal-error"),G("boolean"==typeof Rs,g,"internal-error"),Je(Ei,g.name),Je(Ud,g.name),Je(ug,g.name),Je(bu,g.name),Je(dg,g.name),Je(_f,g.name);const vf=new bt({uid:yf,auth:g,email:Ur,emailVerified:nc,displayName:Dt,isAnonymous:Rs,photoURL:Ud,phoneNumber:Ei,tenantId:ug,stsTokenManager:S_,createdAt:dg,lastLoginAt:_f});return rc&&Array.isArray(rc)&&(vf.providerData=rc.map(I_=>Object.assign({},I_))),bu&&(vf._redirectEventId=bu),vf}static _fromIdTokenResponse(g,_,C=!1){return(0,s.Z)(function*(){const x=new Ne;x.updateFromServerResponse(_);const P=new bt({uid:_.localId,auth:g,stsTokenManager:x,isAnonymous:C});return yield mn(P),P})()}}const _n=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,s.Z)(function*(){return!0})()}_set(_,C){var x=this;return(0,s.Z)(function*(){x.storage[_]=C})()}_get(_){var C=this;return(0,s.Z)(function*(){const x=C.storage[_];return void 0===x?null:x})()}_remove(_){var C=this;return(0,s.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return v.type="NONE",v})();function An(v,g,_){return`firebase:${v}:${g}:${_}`}class Vt{constructor(g,_,C){this.persistence=g,this.auth=_,this.userKey=C;const{config:x,name:P}=this.auth;this.fullUserKey=An(this.userKey,x.apiKey,P),this.fullPersistenceKey=An("persistence",x.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,s.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?bt._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,s.Z)(function*(){if(_.persistence===g)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,C="authUser"){return(0,s.Z)(function*(){if(!_.length)return new Vt(yt(_n),g,C);const x=(yield Promise.all(_.map(function(){var ot=(0,s.Z)(function*(Nt){if(yield Nt._isAvailable())return Nt});return function(Nt){return ot.apply(this,arguments)}}()))).filter(ot=>ot);let P=x[0]||yt(_n);const Y=An(C,g.config.apiKey,g.name);let ue=null;for(const ot of _)try{const Nt=yield ot._get(Y);if(Nt){const Dt=bt._fromJSON(g,Nt);ot!==P&&(ue=Dt),P=ot;break}}catch{}const Be=x.filter(ot=>ot._shouldAllowMigration);return P._shouldAllowMigration&&Be.length?(P=Be[0],ue&&(yield P._set(Y,ue.toJSON())),yield Promise.all(_.map(function(){var ot=(0,s.Z)(function*(Nt){if(Nt!==P)try{yield Nt._remove(Y)}catch{}});return function(Nt){return ot.apply(this,arguments)}}())),new Vt(P,g,C)):new Vt(P,g,C)})()}}function Qn(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Oc(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Or(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Pa(g))return"Blackberry";if(Zr(g))return"Webos";if(tn(g))return"Safari";if((g.includes("chrome/")||vo(g))&&!g.includes("edge/"))return"Chrome";if(Ts(g))return"Android";{const C=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function Or(v=(0,L.z$)()){return/firefox\//i.test(v)}function tn(v=(0,L.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function vo(v=(0,L.z$)()){return/crios\//i.test(v)}function Oc(v=(0,L.z$)()){return/iemobile/i.test(v)}function Ts(v=(0,L.z$)()){return/android/i.test(v)}function Pa(v=(0,L.z$)()){return/blackberry/i.test(v)}function Zr(v=(0,L.z$)()){return/webos/i.test(v)}function Es(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Rp(v=(0,L.z$)()){return Es(v)||Ts(v)||Zr(v)||Pa(v)||/windows phone/i.test(v)||Oc(v)}function La(v,g=[]){let _;switch(v){case"Browser":_=Qn((0,L.z$)());break;case"Worker":_=`${Qn((0,L.z$)())}-${v}`;break;default:_=v}const C=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${le.SDK_VERSION}/${C}`}class Dh{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const C=P=>new Promise((Y,ue)=>{try{Y(g(P))}catch(Be){ue(Be)}});C.onAbort=_,this.queue.push(C);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,s.Z)(function*(){var C;if(_.auth.currentUser===g)return;const x=[];try{for(const P of _.queue)yield P(g),P.onAbort&&x.push(P.onAbort)}catch(P){x.reverse();for(const Y of x)try{Y()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=P)||void 0===C?void 0:C.message})}})()}}class Sh{constructor(g,_,C){this.app=g,this.heartbeatServiceProvider=_,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xu(this),this.idTokenSubscription=new Xu(this),this.beforeStateQueue=new Dh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=be,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(g,_){var C=this;return _&&(this._popupRedirectResolver=yt(_)),this._initializationPromise=this.queue((0,s.Z)(function*(){var x,P;if(!C._deleted&&(C.persistenceManager=yield Vt.create(C,g),!C._deleted)){if(null!==(x=C._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(P=C.currentUser)||void 0===P?void 0:P.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,s.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,s.Z)(function*(){var C;const x=yield _.assertedPersistence.getCurrentUser();let P=x,Y=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ue=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,Be=P?._redirectEventId,ot=yield _.tryRedirectSignIn(g);(!ue||ue===Be)&&ot?.user&&(P=ot.user,Y=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(Y)try{yield _.beforeStateQueue.runMiddleware(P)}catch(ue){P=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ue))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return G(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(g){var _=this;return(0,s.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,s.Z)(function*(){var C;try{yield mn(g)}catch(x){if("auth/network-request-failed"!==(null===(C=x)||void 0===C?void 0:C.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function pe(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,s.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,s.Z)(function*(){const C=g?(0,L.m9)(g):null;return C&&G(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(g,_=!1){var C=this;return(0,s.Z)(function*(){if(!C._deleted)return g&&G(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,s.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,s.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,s.Z)(function*(){yield _.assertedPersistence.setPersistence(yt(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new L.LL("auth","Firebase",g())}onAuthStateChanged(g,_,C){return this.registerStateListener(this.authStateSubscription,g,_,C)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,C){return this.registerStateListener(this.idTokenSubscription,g,_,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var C=this;return(0,s.Z)(function*(){const x=yield C.getOrInitRedirectPersistenceManager(_);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,s.Z)(function*(){if(!_.redirectPersistenceManager){const C=g&&yt(g)||_._popupRedirectResolver;G(C,_,"argument-error"),_.redirectPersistenceManager=yield Vt.create(_,[yt(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,s.Z)(function*(){var C,x;return _._isInitialized&&(yield _.queue((0,s.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===g?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,s.Z)(function*(){if(g===_.currentUser)return _.queue((0,s.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,C,x){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return G(Y,this,"internal-error"),Y.then(()=>P(this.currentUser)),"function"==typeof _?g.addObserver(_,C,x):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,s.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=La(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,s.Z)(function*(){var _;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(C["X-Firebase-Client"]=x),C})()}}function Wn(v){return(0,L.m9)(v)}class Xu{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,L.ne)(_=>this.observer=_)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function or(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function Hs(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class qo{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Ee("not implemented")}_getIdTokenResponse(g){return Ee("not implemented")}_linkToIdToken(g,_){return Ee("not implemented")}_getReauthenticationResolver(g){return Ee("not implemented")}}function ri(v,g){return zo.apply(this,arguments)}function zo(){return(zo=(0,s.Z)(function*(v,g){return Yt(v,"POST","/v1/accounts:resetPassword",Xe(v,g))})).apply(this,arguments)}function zi(v,g){return st.apply(this,arguments)}function st(){return(st=(0,s.Z)(function*(v,g){return Yt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function On(){return(On=(0,s.Z)(function*(v,g){return Yt(v,"POST","/v1/accounts:update",Xe(v,g))})).apply(this,arguments)}function $s(){return($s=(0,s.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:signInWithPassword",Xe(v,g))})).apply(this,arguments)}function ar(v,g){return lr.apply(this,arguments)}function lr(){return(lr=(0,s.Z)(function*(v,g){return Yt(v,"POST","/v1/accounts:sendOobCode",Xe(v,g))})).apply(this,arguments)}function Ua(){return(Ua=(0,s.Z)(function*(v,g){return ar(v,g)})).apply(this,arguments)}function Zt(){return(Zt=(0,s.Z)(function*(v,g){return ar(v,g)})).apply(this,arguments)}function bo(){return(bo=(0,s.Z)(function*(v,g){return ar(v,g)})).apply(this,arguments)}function hs(){return(hs=(0,s.Z)(function*(v,g){return ar(v,g)})).apply(this,arguments)}function Ba(){return(Ba=(0,s.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:signInWithEmailLink",Xe(v,g))})).apply(this,arguments)}function Wi(){return(Wi=(0,s.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:signInWithEmailLink",Xe(v,g))})).apply(this,arguments)}class Gs extends qo{constructor(g,_,C,x=null){super("password",C),this._email=g,this._password=_,this._tenantId=x}static _fromEmailAndPassword(g,_){return new Gs(g,_,"password")}static _fromEmailAndCode(g,_,C=null){return new Gs(g,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,s.Z)(function*(){switch(_.signInMethod){case"password":return function vi(v,g){return $s.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ii(v,g){return Ba.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:ke(g,"internal-error")}})()}_linkToIdToken(g,_){var C=this;return(0,s.Z)(function*(){switch(C.signInMethod){case"password":return zi(g,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function Wo(v,g){return Wi.apply(this,arguments)}(g,{idToken:_,email:C._email,oobCode:C._password});default:ke(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function bi(v,g){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,s.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:signInWithIdp",Xe(v,g))})).apply(this,arguments)}class Ki extends qo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Ki(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):ke("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:x}=_,P=(0,oe._T)(_,["providerId","signInMethod"]);if(!C||!x)return null;const Y=new Ki(C,x);return Y.idToken=P.idToken||void 0,Y.accessToken=P.accessToken||void 0,Y.secret=P.secret,Y.nonce=P.nonce,Y.pendingToken=P.pendingToken||null,Y}_getIdTokenResponse(g){return bi(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,bi(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,bi(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,L.xO)(_)}return g}}function Va(){return(Va=(0,s.Z)(function*(v,g){return Yt(v,"POST","/v1/accounts:sendVerificationCode",Xe(v,g))})).apply(this,arguments)}function si(){return(si=(0,s.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:signInWithPhoneNumber",Xe(v,g))})).apply(this,arguments)}function Ah(){return(Ah=(0,s.Z)(function*(v,g){const _=yield rn(v,"POST","/v1/accounts:signInWithPhoneNumber",Xe(v,g));if(_.temporaryProof)throw qn(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const ki={USER_NOT_FOUND:"user-not-found"};function El(){return(El=(0,s.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:signInWithPhoneNumber",Xe(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),ki)})).apply(this,arguments)}class fs extends qo{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new fs({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new fs({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Ko(v,g){return si.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function oi(v,g){return Ah.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Yi(v,g){return El.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:C,verificationCode:x}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:C,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:P}=g;return C||_||x||P?new fs({verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:P}):null}}class Dl{constructor(g){var _,C,x,P,Y,ue;const Be=(0,L.zd)((0,L.pd)(g)),ot=null!==(_=Be.apiKey)&&void 0!==_?_:null,Nt=null!==(C=Be.oobCode)&&void 0!==C?C:null,Dt=function nd(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Be.mode)&&void 0!==x?x:null);G(ot&&Nt&&Dt,"argument-error"),this.apiKey=ot,this.operation=Dt,this.code=Nt,this.continueUrl=null!==(P=Be.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Y=Be.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(ue=Be.tenantId)&&void 0!==ue?ue:null}static parseLink(g){const _=function Ri(v){const g=(0,L.zd)((0,L.pd)(v)).link,_=g?(0,L.zd)((0,L.pd)(g)).deep_link_id:null,C=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(C?(0,L.zd)((0,L.pd)(C)).link:null)||C||_||g||v}(g);try{return new Dl(_)}catch{return null}}}let rd=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,C){return Gs._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const x=Dl.parseLink(C);return G(x,"argument-error"),Gs._fromEmailAndCode(_,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Zs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ja extends Zs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Sl extends ja{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return G("providerId"in _&&"signInMethod"in _,"argument-error"),Ki._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return G(g.idToken||g.accessToken,"argument-error"),Ki._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Sl.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Sl.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:x,pendingToken:P,nonce:Y,providerId:ue}=g;if(!C&&!x&&!_&&!P||!ue)return null;try{return new Sl(ue)._credential({idToken:_,accessToken:C,nonce:Y,pendingToken:P})}catch{return null}}}let id=(()=>{class v extends ja{constructor(){super("facebook.com")}static credential(_){return Ki._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Mp=(()=>{class v extends ja{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return Ki._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:x}=_;if(!C&&!x)return null;try{return v.credential(C,x)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Pp=(()=>{class v extends ja{constructor(){super("github.com")}static credential(_){return Ki._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Ha extends qo{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return bi(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,bi(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,bi(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:x,pendingToken:P}=_;return C&&x&&P&&C===x?new Ha(C,P):null}static _create(g,_){return new Ha(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ss extends Zs{constructor(g){G(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Ss.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Ss.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Ha.fromJSON(g);return G(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:C}=g;if(!_||!C)return null;try{return Ha._create(C,_)}catch{return null}}}let c_=(()=>{class v extends ja{constructor(){super("twitter.com")}static credential(_,C){return Ki._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:x}=_;if(!C||!x)return null;try{return v.credential(C,x)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function qr(v,g){return sd.apply(this,arguments)}function sd(){return(sd=(0,s.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:signUp",Xe(v,g))})).apply(this,arguments)}class wi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,C,x=!1){return(0,s.Z)(function*(){const P=yield bt._fromIdTokenResponse(g,C,x),Y=od(C);return new wi({user:P,providerId:Y,_tokenResponse:C,operationType:_})})()}static _forOperation(g,_,C){return(0,s.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const x=od(C);return new wi({user:g,providerId:x,_tokenResponse:C,operationType:_})})()}}function od(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function wo(){return(wo=(0,s.Z)(function*(v){var g;const _=Wn(v);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new wi({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield qr(_,{returnSecureToken:!0}),x=yield wi._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Mc extends L.ZR{constructor(g,_,C,x){var P;super(_.code,_.message),this.operationType=C,this.user=x,Object.setPrototypeOf(this,Mc.prototype),this.customData={appName:g.name,tenantId:null!==(P=g.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,_,C,x){return new Mc(g,_,C,x)}}function Jo(v,g,_,C){return("reauthenticate"===g?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Mc._fromErrorAndOperation(v,P,g,C):P})}function Qo(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function $a(){return $a=(0,s.Z)(function*(v,g){const _=(0,L.m9)(v);yield Xo(!0,_,g);const{providerUserInfo:C}=yield function vt(v,g){return us.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),x=Qo(C||[]);return _.providerData=_.providerData.filter(P=>x.has(P.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),$a.apply(this,arguments)}function Fc(v,g){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,s.Z)(function*(v,g,_=!1){const C=yield Jn(v,g._linkToIdToken(v.auth,yield v.getIdToken()),_);return wi._forOperation(v,"link",C)})).apply(this,arguments)}function Xo(v,g,_){return Il.apply(this,arguments)}function Il(){return(Il=(0,s.Z)(function*(v,g,_){yield mn(g);const x=!1===v?"provider-already-linked":"no-such-provider";G(Qo(g.providerData).has(_)===v,g.auth,x)})).apply(this,arguments)}function ad(v,g){return Za.apply(this,arguments)}function Za(){return(Za=(0,s.Z)(function*(v,g,_=!1){var C;const{auth:x}=v,P="reauthenticate";try{const Y=yield Jn(v,Jo(x,P,g,v),_);G(Y.idToken,x,"internal-error");const ue=kt(Y.idToken);G(ue,x,"internal-error");const{sub:Be}=ue;return G(v.uid===Be,x,"user-mismatch"),wi._forOperation(v,P,Y)}catch(Y){throw"auth/user-not-found"===(null===(C=Y)||void 0===C?void 0:C.code)&&ke(x,"user-mismatch"),Y}})).apply(this,arguments)}function qa(v,g){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,s.Z)(function*(v,g,_=!1){const C="signIn",x=yield Jo(v,C,g),P=yield wi._fromIdTokenResponse(v,C,x);return _||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Kn(v,g){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,s.Z)(function*(v,g){return qa(Wn(v),g)})).apply(this,arguments)}function Xn(v,g){return za.apply(this,arguments)}function za(){return(za=(0,s.Z)(function*(v,g){const _=(0,L.m9)(v);return yield Xo(!1,_,g.providerId),Fc(_,g)})).apply(this,arguments)}function ea(v,g){return cr.apply(this,arguments)}function cr(){return(cr=(0,s.Z)(function*(v,g){return ad((0,L.m9)(v),g)})).apply(this,arguments)}function Wa(){return(Wa=(0,s.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:signInWithCustomToken",Xe(v,g))})).apply(this,arguments)}function _r(){return _r=(0,s.Z)(function*(v,g){const _=Wn(v),C=yield function ld(v,g){return Wa.apply(this,arguments)}(_,{token:g,returnSecureToken:!0}),x=yield wi._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(x.user),x}),_r.apply(this,arguments)}class Al{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Ka._fromServerResponse(g,_):ke(g,"internal-error")}}class Ka extends Al{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Ka(_)}}function Uc(v,g,_){var C;G((null===(C=_.url)||void 0===C?void 0:C.length)>0,v,"invalid-continue-uri"),G(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(G(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(G(_.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Nl(){return Nl=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v),x={requestType:"PASSWORD_RESET",email:g};_&&Uc(C,x,_),yield function mr(v,g){return Zt.apply(this,arguments)}(C,x)}),Nl.apply(this,arguments)}function Ft(){return(Ft=(0,s.Z)(function*(v,g,_){yield ri((0,L.m9)(v),{oobCode:g,newPassword:_})})).apply(this,arguments)}function xh(){return xh=(0,s.Z)(function*(v,g){yield function jt(v,g){return On.apply(this,arguments)}((0,L.m9)(v),{oobCode:g})}),xh.apply(this,arguments)}function Vc(v,g){return cd.apply(this,arguments)}function cd(){return(cd=(0,s.Z)(function*(v,g){const _=(0,L.m9)(v),C=yield ri(_,{oobCode:g}),x=C.requestType;switch(G(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(C.mfaInfo,_,"internal-error");default:G(C.email,_,"internal-error")}let P=null;return C.mfaInfo&&(P=Al._fromServerResponse(Wn(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:P},operation:x}})).apply(this,arguments)}function jc(){return(jc=(0,s.Z)(function*(v,g){const{data:_}=yield Vc((0,L.m9)(v),g);return _.email})).apply(this,arguments)}function dd(){return(dd=(0,s.Z)(function*(v,g,_){const C=Wn(v),x=yield qr(C,{returnSecureToken:!0,email:g,password:_}),P=yield wi._fromIdTokenResponse(C,"signIn",x);return yield C._updateCurrentUser(P.user),P})).apply(this,arguments)}function hd(){return hd=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v),x={requestType:"EMAIL_SIGNIN",email:g};G(_.handleCodeInApp,C,"argument-error"),_&&Uc(C,x,_),yield function ed(v,g){return bo.apply(this,arguments)}(C,x)}),hd.apply(this,arguments)}function kl(){return(kl=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v),x=rd.credentialWithLink(g,_||kr());return G(x._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Kn(C,x)})).apply(this,arguments)}function Mi(){return(Mi=(0,s.Z)(function*(v,g){return Yt(v,"POST","/v1/accounts:createAuthUri",Xe(v,g))})).apply(this,arguments)}function Gc(){return Gc=(0,s.Z)(function*(v,g){const C={identifier:g,continueUri:sr()?kr():"http://localhost"},{signinMethods:x}=yield function Hc(v,g){return Mi.apply(this,arguments)}((0,L.m9)(v),C);return x||[]}),Gc.apply(this,arguments)}function fd(){return fd=(0,s.Z)(function*(v,g){const _=(0,L.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&Uc(_.auth,x,g);const{email:P}=yield function Hn(v,g){return Ua.apply(this,arguments)}(_.auth,x);P!==v.email&&(yield v.reload())}),fd.apply(this,arguments)}function yr(){return yr=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};_&&Uc(C.auth,P,_);const{email:Y}=yield function td(v,g){return hs.apply(this,arguments)}(C.auth,P);Y!==v.email&&(yield v.reload())}),yr.apply(this,arguments)}function Co(){return(Co=(0,s.Z)(function*(v,g){return Yt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Is(){return Is=(0,s.Z)(function*(v,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const C=(0,L.m9)(v),P={idToken:yield C.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},Y=yield Jn(C,function Pi(v,g){return Co.apply(this,arguments)}(C.auth,P));C.displayName=Y.displayName||null,C.photoURL=Y.photoUrl||null;const ue=C.providerData.find(({providerId:Be})=>"password"===Be);ue&&(ue.displayName=C.displayName,ue.photoURL=C.photoURL),yield C._updateTokensIfNecessary(Y)}),Is.apply(this,arguments)}function Mh(v,g,_){return pd.apply(this,arguments)}function pd(){return(pd=(0,s.Z)(function*(v,g,_){const{auth:C}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(P.email=g),_&&(P.password=_);const Y=yield Jn(v,zi(C,P));yield v._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class zs{constructor(g,_,C={}){this.isNewUser=g,this.providerId=_,this.profile=C}}class Ph extends zs{constructor(g,_,C,x){super(g,_,C),this.username=x}}class md extends zs{constructor(g,_){super(g,"facebook.com",_)}}class Fh extends Ph{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Lp extends zs{constructor(g,_){super(g,"google.com",_)}}class qc extends Ph{constructor(g,_,C){super(g,"twitter.com",_,C)}}function Up(v){const{user:g,_tokenResponse:_}=v;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function gd(v){var g,_;if(!v)return null;const{providerId:C}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!C&&v?.idToken){const Y=null===(_=null===(g=kt(v.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(Y)return new zs(P,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!C)return null;switch(C){case"facebook.com":return new md(P,x);case"github.com":return new Fh(P,x);case"google.com":return new Lp(P,x);case"twitter.com":return new qc(P,x,v.screenName||null);case"custom":case"anonymous":return new zs(P,null);default:return new zs(P,C,x)}}(_)}class Ja{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Ja("enroll",g)}static _fromMfaPendingCredential(g){return new Ja("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,C;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Ja._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(C=g.multiFactorSession)&&void 0!==C&&C.idToken)return Ja._fromIdtoken(g.multiFactorSession.idToken)}return null}}class _d{constructor(g,_,C){this.session=g,this.hints=_,this.signInResolver=C}static _fromError(g,_){const C=Wn(g),x=_.customData._serverResponse,P=(x.mfaInfo||[]).map(ue=>Al._fromServerResponse(C,ue));G(x.mfaPendingCredential,C,"internal-error");const Y=Ja._fromMfaPendingCredential(x.mfaPendingCredential);return new _d(Y,P,function(){var ue=(0,s.Z)(function*(Be){const ot=yield Be._process(C,Y);delete x.mfaInfo,delete x.mfaPendingCredential;const Nt=Object.assign(Object.assign({},x),{idToken:ot.idToken,refreshToken:ot.refreshToken});switch(_.operationType){case"signIn":const Dt=yield wi._fromIdTokenResponse(C,_.operationType,Nt);return yield C._updateCurrentUser(Dt.user),Dt;case"reauthenticate":return G(_.user,C,"internal-error"),wi._forOperation(_.user,_.operationType,Nt);default:ke(C,"internal-error")}});return function(Be){return ue.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,s.Z)(function*(){return _.signInResolver(g)})()}}class Ol{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>Al._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new Ol(g)}getSession(){var g=this;return(0,s.Z)(function*(){return Ja._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var C=this;return(0,s.Z)(function*(){const x=g,P=yield C.getSession(),Y=yield Jn(C.user,x._process(C.user.auth,P,_));return yield C.user._updateTokensIfNecessary(Y),C.user.reload()})()}unenroll(g){var _=this;return(0,s.Z)(function*(){var C;const x="string"==typeof g?g:g.uid,P=yield _.user.getIdToken(),Y=yield Jn(_.user,function h_(v,g){return Yt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Xe(v,g))}(_.user.auth,{idToken:P,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ue})=>ue!==x),yield _.user._updateTokensIfNecessary(Y);try{yield _.user.reload()}catch(ue){if("auth/user-token-expired"!==(null===(C=ue)||void 0===C?void 0:C.code))throw ue}})()}}const ra=new WeakMap,To="__sak";class Ml{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(To,"1"),this.storage.removeItem(To),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const zc=(()=>{class v extends Ml{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Pl(){const v=(0,L.z$)();return tn(v)||Es(v)}()&&function Qu(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Rp(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const x=this.storage.getItem(C),P=this.localCache[C];x!==P&&_(C,P,x)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((ue,Be,ot)=>{this.notifyListeners(ue,ot)});const x=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(x);if(_.newValue!==ue)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!C)return}const P=()=>{const ue=this.storage.getItem(x);!C&&this.localCache[x]===ue||this.notifyListeners(x,ue)},Y=this.storage.getItem(x);!function kp(){return(0,L.w1)()&&10===document.documentMode}()||Y===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var x=()=>super._set,P=this;return(0,s.Z)(function*(){yield x().call(P,_,C),P.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,x=this;return(0,s.Z)(function*(){const P=yield C().call(x,_);return x.localCache[_]=JSON.stringify(P),P})()}_remove(_){var C=()=>super._remove,x=this;return(0,s.Z)(function*(){yield C().call(x,_),delete x.localCache[_]})()}}return v.type="LOCAL",v})(),ia=(()=>{class v extends Ml{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return v.type="SESSION",v})();let Vp=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(P=>P.isListeningto(_));if(C)return C;const x=new v(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,s.Z)(function*(){const x=_,{eventId:P,eventType:Y,data:ue}=x.data,Be=C.handlersMap[Y];if(!Be?.size)return;x.ports[0].postMessage({status:"ack",eventId:P,eventType:Y});const ot=Array.from(Be).map(function(){var Dt=(0,s.Z)(function*(Ur){return Ur(x.origin,ue)});return function(Ur){return Dt.apply(this,arguments)}}()),Nt=yield function Vh(v){return Promise.all(v.map(function(){var g=(0,s.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return g.apply(this,arguments)}}()))}(ot);x.ports[0].postMessage({status:"done",eventId:P,eventType:Y,response:Nt})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function sa(v="",g=10){let _="";for(let C=0;C<g;C++)_+=Math.floor(10*Math.random());return v+_}class Fl{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,C=50){var x=this;return(0,s.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Y,ue;return new Promise((Be,ot)=>{const Nt=sa("",20);P.port1.start();const Dt=setTimeout(()=>{ot(new Error("unsupported_event"))},C);ue={messageChannel:P,onMessage(Ur){const Ei=Ur;if(Ei.data.eventId===Nt)switch(Ei.data.status){case"ack":clearTimeout(Dt),Y=setTimeout(()=>{ot(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Be(Ei.data.response);break;default:clearTimeout(Dt),clearTimeout(Y),ot(new Error("invalid_response"))}}},x.handlers.add(ue),P.port1.addEventListener("message",ue.onMessage),x.target.postMessage({eventType:g,eventId:Nt,data:_},[P.port2])}).finally(()=>{ue&&x.removeMessageHandler(ue)})})()}}function $n(){return window}function Ws(){return typeof $n().WorkerGlobalScope<"u"&&"function"==typeof $n().importScripts}function Xa(){return(Xa=(0,s.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Wc="firebaseLocalStorageDb",Kc=1,Do="firebaseLocalStorage",el="fbase_key";class tl{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Bl(v,g){return v.transaction([Do],g?"readwrite":"readonly").objectStore(Do)}function Yc(){const v=indexedDB.open(Wc,Kc);return new Promise((g,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const C=v.result;try{C.createObjectStore(Do,{keyPath:el})}catch(x){_(x)}}),v.addEventListener("success",(0,s.Z)(function*(){const C=v.result;C.objectStoreNames.contains(Do)?g(C):(C.close(),yield function Vl(){const v=indexedDB.deleteDatabase(Wc);return new tl(v).toPromise()}(),g(yield Yc()))}))})}function Kr(v,g,_){return jl.apply(this,arguments)}function jl(){return(jl=(0,s.Z)(function*(v,g,_){const C=Bl(v,!0).put({[el]:g,value:_});return new tl(C).toPromise()})).apply(this,arguments)}function So(){return(So=(0,s.Z)(function*(v,g){const _=Bl(v,!1).get(g),C=yield new tl(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Hl(v,g){const _=Bl(v,!0).delete(g);return new tl(_).toPromise()}const oa=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,s.Z)(function*(){return _.db||(_.db=yield Yc()),_.db})()}_withRetries(_){var C=this;return(0,s.Z)(function*(){let x=0;for(;;)try{const P=yield C._openDb();return yield _(P)}catch(P){if(x++>3)throw P;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,s.Z)(function*(){return Ws()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,s.Z)(function*(){_.receiver=Vp._getInstance(function Ul(){return Ws()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,s.Z)(function*(x,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(x,P){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,s.Z)(function*(x,P){return["keyChanged"]});return function(x,P){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,s.Z)(function*(){var C,x;if(_.activeServiceWorker=yield function Ks(){return Xa.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Fl(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);P&&null!==(C=P[0])&&void 0!==C&&C.fulfilled&&null!==(x=P[0])&&void 0!==x&&x.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,s.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function vd(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,s.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Yc();return yield Kr(_,To,"1"),yield Hl(_,To),!0}catch{}return!1})()}_withPendingWrite(_){var C=this;return(0,s.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var x=this;return(0,s.Z)(function*(){return x._withPendingWrite((0,s.Z)(function*(){return yield x._withRetries(P=>Kr(P,_,C)),x.localCache[_]=C,x.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,s.Z)(function*(){const x=yield C._withRetries(P=>function nl(v,g){return So.apply(this,arguments)}(P,_));return C.localCache[_]=x,x})()}_remove(_){var C=this;return(0,s.Z)(function*(){return C._withPendingWrite((0,s.Z)(function*(){return yield C._withRetries(x=>Hl(x,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,s.Z)(function*(){const C=yield _._withRetries(Y=>{const ue=Bl(Y,!1).getAll();return new tl(ue).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const x=[],P=new Set;for(const{fbase_key:Y,value:ue}of C)P.add(Y),JSON.stringify(_.localCache[Y])!==JSON.stringify(ue)&&(_.notifyListeners(Y,ue),x.push(Y));for(const Y of Object.keys(_.localCache))_.localCache[Y]&&!P.has(Y)&&(_.notifyListeners(Y,null),x.push(Y));return x})()}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,s.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Qc(){return(Qc=(0,s.Z)(function*(v){return(yield Yt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ns(v){return new Promise((g,_)=>{const C=document.createElement("script");C.setAttribute("src",v),C.onload=g,C.onerror=x=>{const P=Se("internal-error");P.customData=x,_(P)},C.type="text/javascript",C.charset="UTF-8",function aa(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(C)})}function Hh(v){return`__${v}${Math.floor(1e6*Math.random())}`}const ps=1e12;class f_{constructor(g){this.auth=g,this.counter=ps,this._widgets=new Map}render(g,_){const C=this.counter;return this._widgets.set(C,new $h(g,this.auth.name,_||{})),this.counter++,C}reset(g){var _;const C=g||ps;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(g){var _;return(null===(_=this._widgets.get(g||ps))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,s.Z)(function*(){var C;return null===(C=_._widgets.get(g||ps))||void 0===C||C.execute(),""})()}}class $h{constructor(g,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;G(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function eu(v){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<v;C++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Gh=Hh("rcb"),wd=new fe(3e4,6e4);class Js{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=$n().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return G(function rl(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve($n().grecaptcha):new Promise((C,x)=>{const P=$n().setTimeout(()=>{x(Se(g,"network-request-failed"))},wd.get());$n()[Gh]=()=>{$n().clearTimeout(P),delete $n()[Gh];const ue=$n().grecaptcha;if(!ue)return void x(Se(g,"internal-error"));const Be=ue.render;ue.render=(ot,Nt)=>{const Dt=Be(ot,Nt);return this.counter++,Dt},this.hostLanguage=_,C(ue)},Ns(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Gh,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),x(Se(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=$n().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nu{load(g){return(0,s.Z)(function*(){return new f_(g)})()}clearedOneInstance(){}}const Zh="recaptcha",jp={theme:"light",type:"image"};class Zl{constructor(g,_=Object.assign({},jp),C){this.parameters=_,this.type=Zh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Wn(C),this.isInvisible="invisible"===this.parameters.size,G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;G(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nu:new Js,this.validateStartingState()}verify(){var g=this;return(0,s.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(_)||new Promise(P=>{const Y=ue=>{ue&&(g.tokenChangeListeners.delete(Y),P(ue))};g.tokenChangeListeners.add(Y),g.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof g)g(_);else if("string"==typeof g){const C=$n()[g];"function"==typeof C&&C(_)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,s.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,s.Z)(function*(){G(sr()&&!Ws(),g.auth,"internal-error"),yield function Hp(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function As(v){return Qc.apply(this,arguments)}(g.auth);G(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Cd{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=fs._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Td(){return(Td=(0,s.Z)(function*(v,g,_){const C=Wn(v),x=yield qh(C,g,(0,L.m9)(_));return new Cd(x,P=>Kn(C,P))})).apply(this,arguments)}function ru(){return(ru=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v);yield Xo(!1,C,"phone");const x=yield qh(C.auth,g,(0,L.m9)(_));return new Cd(x,P=>Xn(C,P))})).apply(this,arguments)}function Gp(){return(Gp=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v),x=yield qh(C.auth,g,(0,L.m9)(_));return new Cd(x,P=>ea(C,P))})).apply(this,arguments)}function qh(v,g,_){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,s.Z)(function*(v,g,_){var C;const x=yield _.verify();try{let P;if(G("string"==typeof x,v,"argument-error"),G(_.type===Zh,v,"argument-error"),P="string"==typeof g?{phoneNumber:g}:g,"session"in P){const Y=P.session;if("phoneNumber"in P)return G("enroll"===Y.type,v,"internal-error"),(yield function Bp(v,g){return Yt(v,"POST","/v2/accounts/mfaEnrollment:start",Xe(v,g))}(v,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{G("signin"===Y.type,v,"internal-error");const ue=(null===(C=P.multiFactorHint)||void 0===C?void 0:C.uid)||P.multiFactorUid;return G(ue,v,"missing-multi-factor-info"),(yield function Gl(v,g){return Yt(v,"POST","/v2/accounts/mfaSignIn:start",Xe(v,g))}(v,{mfaPendingCredential:Y.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function Ih(v,g){return Va.apply(this,arguments)}(v,{phoneNumber:P.phoneNumber,recaptchaToken:x});return Y}}finally{_._reset()}}),Zp.apply(this,arguments)}function qp(){return(qp=(0,s.Z)(function*(v,g){yield Fc((0,L.m9)(v),g)})).apply(this,arguments)}let Ed=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=Wn(_)}verifyPhoneNumber(_,C){return qh(this.auth,_,(0,L.m9)(C))}static credential(_,C){return fs._fromVerification(_,C)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:x}=_;return C&&x?fs._fromTokenResponse(C,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Nn(v,g){return g?yt(g):(G(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class su extends qo{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return bi(g,this._buildIdpRequest())}_linkToIdToken(g,_){return bi(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return bi(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function ou(v){return qa(v.auth,new su(v),v.bypassAuthState)}function Dd(v){const{auth:g,user:_}=v;return G(_,g,"internal-error"),ad(_,new su(v),v.bypassAuthState)}function Fi(v){return xs.apply(this,arguments)}function xs(){return(xs=(0,s.Z)(function*(v){const{auth:g,user:_}=v;return G(_,g,"internal-error"),Fc(_,new su(v),v.bypassAuthState)})).apply(this,arguments)}class au{constructor(g,_,C,x,P=!1){this.auth=g,this.resolver=C,this.user=x,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,s.Z)(function*(C,x){g.pendingPromise={resolve:C,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(P){g.reject(P)}});return function(C,x){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,s.Z)(function*(){const{urlResponse:C,sessionId:x,postBody:P,tenantId:Y,error:ue,type:Be}=g;if(ue)return void _.reject(ue);const ot={auth:_.auth,requestUri:C,sessionId:x,tenantId:Y||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Be)(ot))}catch(Nt){_.reject(Nt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return ou;case"linkViaPopup":case"linkViaRedirect":return Fi;case"reauthViaPopup":case"reauthViaRedirect":return Dd;default:ke(this.auth,"internal-error")}}resolve(g){Ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ql=new fe(2e3,1e4);function lu(){return(lu=(0,s.Z)(function*(v,g,_){const C=Wn(v);ze(v,g,Zs);const x=Nn(C,_);return new Ut(C,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function Wh(){return(Wh=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v);ze(C.auth,g,Zs);const x=Nn(C.auth,_);return new Ut(C.auth,"reauthViaPopup",g,x,C).executeNotNull()})).apply(this,arguments)}function Ti(){return(Ti=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v);ze(C.auth,g,Zs);const x=Nn(C.auth,_);return new Ut(C.auth,"linkViaPopup",g,x,C).executeNotNull()})).apply(this,arguments)}let Ut=(()=>{class v extends au{constructor(_,C,x,P,Y){super(_,C,P,Y),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,s.Z)(function*(){const C=yield _.execute();return G(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,s.Z)(function*(){Ke(1===_.filter.length,"Popup operations only handle one event");const C=sa();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Se(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Se(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,x;this.pollId=null!==(x=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Se(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,ql.get())};_()}}return v.currentPopupAction=null,v})();const vr="pendingRedirect",Fe=new Map;class dn extends au{constructor(g,_,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,s.Z)(function*(){let C=Fe.get(_.auth._key());if(!C){try{const P=(yield function br(v,g){return Qs.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;C=()=>Promise.resolve(P)}catch(x){C=()=>Promise.reject(x)}Fe.set(_.auth._key(),C)}return _.bypassAuthState||Fe.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,C=this;return(0,s.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(C,g);if("unknown"!==g.type){if(g.eventId){const x=yield C.auth._redirectUserForId(g.eventId);if(x)return C.user=x,_().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,s.Z)(function*(){})()}cleanUp(){}}function Qs(){return(Qs=(0,s.Z)(function*(v,g){const _=Wl(g),C=zl(v);if(!(yield C._isAvailable()))return!1;const x="true"===(yield C._get(_));return yield C._remove(_),x})).apply(this,arguments)}function sl(v,g){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,s.Z)(function*(v,g){return zl(v)._set(Wl(g),"true")})).apply(this,arguments)}function Kh(v,g){Fe.set(v._key(),g)}function zl(v){return yt(v._redirectPersistence)}function Wl(v){return An(vr,v.config.apiKey,v.name)}function cu(v,g,_){return function uu(v,g,_){return I.apply(this,arguments)}(v,g,_)}function I(){return(I=(0,s.Z)(function*(v,g,_){const C=Wn(v);ze(v,g,Zs);const x=Nn(C,_);return yield sl(x,C),x._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function S(v,g,_){return function R(v,g,_){return j.apply(this,arguments)}(v,g,_)}function j(){return(j=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v);ze(C.auth,g,Zs);const x=Nn(C.auth,_);yield sl(x,C.auth);const P=yield Ct(C);return x._openRedirect(C.auth,g,"reauthViaRedirect",P)})).apply(this,arguments)}function X(v,g,_){return function ce(v,g,_){return ve.apply(this,arguments)}(v,g,_)}function ve(){return(ve=(0,s.Z)(function*(v,g,_){const C=(0,L.m9)(v);ze(C.auth,g,Zs);const x=Nn(C.auth,_);yield Xo(!1,C,g.providerId),yield sl(x,C.auth);const P=yield Ct(C);return x._openRedirect(C.auth,g,"linkViaRedirect",P)})).apply(this,arguments)}function wt(){return(wt=(0,s.Z)(function*(v,g){return yield Wn(v)._initializationPromise,At(v,g,!1)})).apply(this,arguments)}function At(v,g){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,s.Z)(function*(v,g,_=!1){const C=Wn(v),x=Nn(C,g),Y=yield new dn(C,x,_).execute();return Y&&!_&&(delete Y.user._redirectEventId,yield C._persistUserIfCurrent(Y.user),yield C._setRedirectUser(null,g)),Y})).apply(this,arguments)}function Ct(v){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,s.Z)(function*(v){const g=sa(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class ai{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(_=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function ks(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return la(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var C;if(g.error&&!la(g)){const x=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Se(this.auth,x))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const C=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ol(g))}saveEventToCache(g){this.cachedEventUids.add(ol(g)),this.lastProcessedEventTime=Date.now()}}function ol(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function la({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===g?.code}function Io(v){return ur.apply(this,arguments)}function ur(){return(ur=(0,s.Z)(function*(v,g={}){return Yt(v,"GET","/v1/projects",g)})).apply(this,arguments)}const Xs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xn=/^https?/;function Wp(){return(Wp=(0,s.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield Io(v);for(const _ of g)try{if(Bn(_))return}catch{}ke(v,"unauthorized-domain")})).apply(this,arguments)}function Bn(v){const g=kr(),{protocol:_,hostname:C}=new URL(g);if(v.startsWith("chrome-extension://")){const Y=new URL(v);return""===Y.hostname&&""===C?"chrome-extension:"===_&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&Y.hostname===C}if(!xn.test(_))return!1;if(Xs.test(v))return C===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(C)}const li=new fe(3e4,6e4);function ca(){const v=$n().___jsl;if(v?.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let er=null;const r0=new fe(5e3,15e3),Yp="__/auth/iframe",ua="emulator/auth/iframe",Yl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ci=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jl(v){const g=v.config;G(g.authDomain,v,"auth-domain-config-required");const _=g.emulator?se(g,ua):`https://${v.config.authDomain}/${Yp}`,C={apiKey:g.apiKey,appName:v.name,v:le.SDK_VERSION},x=ci.get(v.config.apiHost);x&&(C.eid=x);const P=v._getFrameworks();return P.length&&(C.fw=P.join(",")),`${_}?${(0,L.xO)(C).slice(1)}`}function da(){return da=(0,s.Z)(function*(v){const g=yield function Kp(v){return er=er||function Fr(v){return new Promise((g,_)=>{var C,x,P;function Y(){ca(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{ca(),_(Se(v,"network-request-failed"))},timeout:li.get()})}if(null!==(x=null===(C=$n().gapi)||void 0===C?void 0:C.iframes)&&void 0!==x&&x.Iframe)g(gapi.iframes.getContext());else{if(null===(P=$n().gapi)||void 0===P||!P.load){const ue=Hh("iframefcb");return $n()[ue]=()=>{gapi.load?Y():_(Se(v,"network-request-failed"))},Ns(`https://apis.google.com/js/api.js?onload=${ue}`).catch(Be=>_(Be))}Y()}}).catch(g=>{throw er=null,g})}(v),er}(v),_=$n().gapi;return G(_,v,"internal-error"),g.open({where:document.body,url:Jl(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yl,dontclear:!0},C=>new Promise(function(){var x=(0,s.Z)(function*(P,Y){yield C.restyle({setHideOnLeave:!1});const ue=Se(v,"network-request-failed"),Be=$n().setTimeout(()=>{Y(ue)},r0.get());function ot(){$n().clearTimeout(Be),P(C)}C.ping(ot).then(ot,()=>{Y(ue)})});return function(P,Y){return x.apply(this,arguments)}}()))}),da.apply(this,arguments)}const Yh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Jh=500,m_=600,Qh="_blank",Xh="http://localhost";class It{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const du="__/auth/handler",__="emulator/auth/handler";function Id(v,g,_,C,x,P){G(v.config.authDomain,v,"auth-domain-config-required"),G(v.config.apiKey,v,"invalid-api-key");const Y={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:C,v:le.SDK_VERSION,eventId:x};if(g instanceof Zs){g.setDefaultLanguage(v.languageCode),Y.providerId=g.providerId||"",(0,L.xb)(g.getCustomParameters())||(Y.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Be,ot]of Object.entries(P||{}))Y[Be]=ot}if(g instanceof ja){const Be=g.getScopes().filter(ot=>""!==ot);Be.length>0&&(Y.scopes=Be.join(","))}v.tenantId&&(Y.tid=v.tenantId);const ue=Y;for(const Be of Object.keys(ue))void 0===ue[Be]&&delete ue[Be];return`${function Ao({config:v}){return v.emulator?se(v,__):`https://${v.authDomain}/${du}`}(v)}?${(0,L.xO)(ue).slice(1)}`}const ef="webStorageSupport",tf=class y_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ia,this._completeRedirectFn=At,this._overrideRedirectResult=Kh}_openPopup(g,_,C,x){var P=this;return(0,s.Z)(function*(){var Y;Ke(null===(Y=P.eventManagers[g._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const ue=Id(g,_,C,kr(),x);return function Sd(v,g,_,C=Jh,x=m_){const P=Math.max((window.screen.availHeight-x)/2,0).toString(),Y=Math.max((window.screen.availWidth-C)/2,0).toString();let ue="";const Be=Object.assign(Object.assign({},Yh),{width:C.toString(),height:x.toString(),top:P,left:Y}),ot=(0,L.z$)().toLowerCase();_&&(ue=vo(ot)?Qh:_),Or(ot)&&(g=g||Xh,Be.scrollbars="yes");const Nt=Object.entries(Be).reduce((Ur,[Ei,Ud])=>`${Ur}${Ei}=${Ud},`,"");if(function Fa(v=(0,L.z$)()){var g;return Es(v)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(ot)&&"_self"!==ue)return function s0(v,g){const _=document.createElement("a");_.href=v,_.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(g||"",ue),new It(null);const Dt=window.open(g||"",ue,Nt);G(Dt,v,"popup-blocked");try{Dt.focus()}catch{}return new It(Dt)}(g,ue,sa())})()}_openRedirect(g,_,C,x){var P=this;return(0,s.Z)(function*(){return yield P._originValidation(g),function Ll(v){$n().location.href=v}(Id(g,_,C,kr(),x)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:x,promise:P}=this.eventManagers[_];return x?Promise.resolve(x):(Ke(P,"If manager is not set, promise should be"),P)}const C=this.initAndGetManager(g);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(g){var _=this;return(0,s.Z)(function*(){const C=yield function w1(v){return da.apply(this,arguments)}(g),x=new ai(g);return C.register("authEvent",P=>(G(P?.authEvent,g,"invalid-auth-event"),{status:x.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:x},_.iframes[g._key()]=C,x})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(ef,{type:ef},x=>{var P;const Y=null===(P=x?.[0])||void 0===P?void 0:P[ef];void 0!==Y&&_(!!Y),ke(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Kl(v){return Wp.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Rp()||tn()||Es()}};class C1{constructor(g){this.factorId=g}_process(g,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,C);case"signin":return this._finalizeSignIn(g,_.credential);default:return Ee("unexpected MultiFactorSessionType")}}}class Lr extends C1{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Lr(g)}_finalizeEnroll(g,_,C){return function d_(v,g){return Yt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Xe(v,g))}(g,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function jh(v,g){return Yt(v,"POST","/v2/accounts/mfaSignIn:finalize",Xe(v,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let dr=(()=>{class v{constructor(){}static assertion(_){return Lr._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var Ql="@firebase/auth";class nf{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,s.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(C=>{var x;g((null===(x=C)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);_&&(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function al(){return window}!function Ad(v){(0,le._registerComponent)(new Ce.wA("auth",(g,{options:_})=>{const C=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:P,authDomain:Y}=C.options;return((ue,Be)=>{G(P&&!P.includes(":"),"invalid-api-key",{appName:ue.name}),G(!Y?.includes(":"),"argument-error",{appName:ue.name});const ot={apiKey:P,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:La(v)},Nt=new Sh(ue,Be,ot);return function Rn(v,g){const _=g?.persistence||[],C=(Array.isArray(_)?_:[_]).map(yt);g?.errorMap&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(C,g?.popupRedirectResolver)}(Nt,_),Nt})(C,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,C)=>{g.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new Ce.wA("auth-internal",g=>{const _=Wn(g.getProvider("auth").getImmediate());return new nf(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(Ql,"0.20.5",function ui(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,le.registerVersion)(Ql,"0.20.5","esm2017")}("Browser");const b_=2e3;function hu(){return hu=(0,s.Z)(function*(v,g,_){var C;const{BuildInfo:x}=al();Ke(g.sessionId,"AuthEvent did not contain a session ID");const P=yield function Xl(v){return Nd.apply(this,arguments)}(g.sessionId),Y={};return Es()?Y.ibi=x.packageName:Ts()?Y.apn=x.packageName:ke(v,"operation-not-supported-in-this-environment"),x.displayName&&(Y.appDisplayName=x.displayName),Y.sessionId=P,Id(v,_,g.type,void 0,null!==(C=g.eventId)&&void 0!==C?C:void 0,Y)}),hu.apply(this,arguments)}function zt(){return(zt=(0,s.Z)(function*(v){const{BuildInfo:g}=al(),_={};Es()?_.iosBundleId=g.packageName:Ts()?_.androidPackageName=g.packageName:ke(v,"operation-not-supported-in-this-environment"),yield Io(v,_)})).apply(this,arguments)}function fa(){return(fa=(0,s.Z)(function*(v,g,_){const{cordova:C}=al();let x=()=>{};try{yield new Promise((P,Y)=>{let ue=null;function Be(){var Dt;P();const Ur=null===(Dt=C.plugins.browsertab)||void 0===Dt?void 0:Dt.close;"function"==typeof Ur&&Ur(),"function"==typeof _?.close&&_.close()}function ot(){ue||(ue=window.setTimeout(()=>{Y(Se(v,"redirect-cancelled-by-user"))},b_))}function Nt(){"visible"===document?.visibilityState&&ot()}g.addPassiveListener(Be),document.addEventListener("resume",ot,!1),Ts()&&document.addEventListener("visibilitychange",Nt,!1),x=()=>{g.removePassiveListener(Be),document.removeEventListener("resume",ot,!1),document.removeEventListener("visibilitychange",Nt,!1),ue&&window.clearTimeout(ue)}})}finally{x()}})).apply(this,arguments)}function Nd(){return(Nd=(0,s.Z)(function*(v){const g=function xd(v){if(Ke(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),_=new Uint8Array(g);for(let C=0;C<v.length;C++)_[C]=v.charCodeAt(C);return _}(v),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const rf=20;class kd extends ai{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,s.Z)(function*(){yield g.initPromise})()}}function eg(v){return No.apply(this,arguments)}function No(){return(No=(0,s.Z)(function*(v){const g=yield af()._get(Rd(v));return g&&(yield af()._remove(Rd(v))),g})).apply(this,arguments)}function tg(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<rf;_++){const C=Math.floor(Math.random()*g.length);v.push(g.charAt(C))}return v.join("")}function af(){return yt(zc)}function Rd(v){return An("authEvent",v.config.apiKey,v.name)}function ec(v){if(!v?.includes("?"))return{};const[g,..._]=v.split("?");return(0,L.zd)(_.join("?"))}const d0=class u0{constructor(){this._redirectPersistence=ia,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=At,this._overrideRedirectResult=Kh}_initialize(g){var _=this;return(0,s.Z)(function*(){const C=g._key();let x=_.eventManagers.get(C);return x||(x=new kd(g),_.eventManagers.set(C,x),_.attachCallbackListeners(g,x)),x})()}_openPopup(g){ke(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,C,x){var P=this;return(0,s.Z)(function*(){!function Xp(v){var g,_,C,x,P,Y,ue,Be,ot,Nt;const Dt=al();G("function"==typeof(null===(g=Dt?.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof(null===(_=Dt?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G("function"==typeof(null===(P=null===(x=null===(C=Dt?.cordova)||void 0===C?void 0:C.plugins)||void 0===x?void 0:x.browsertab)||void 0===P?void 0:P.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(Be=null===(ue=null===(Y=Dt?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Be?void 0:Be.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(Nt=null===(ot=Dt?.cordova)||void 0===ot?void 0:ot.InAppBrowser)||void 0===Nt?void 0:Nt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Y=yield P._initialize(g);yield Y.initialized(),Y.resetRedirect(),function zp(){Fe.clear()}(),yield P._originValidation(g);const ue=function sf(v,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:tg(),postBody:null,tenantId:v.tenantId,error:Se(v,"no-auth-event")}}(g,C,x);yield function pu(v,g){return af()._set(Rd(v),g)}(g,ue);const Be=yield function Qp(v,g,_){return hu.apply(this,arguments)}(g,ue,_),ot=yield function fu(v){const{cordova:g}=al();return new Promise(_=>{g.plugins.browsertab.isAvailable(C=>{let x=null;C?g.plugins.browsertab.openUrl(v):x=g.InAppBrowser.open(v,function a_(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(x)})})}(Be);return function o0(v,g,_){return fa.apply(this,arguments)}(g,Y,ot)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ha(v){return zt.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:C,handleOpenURL:x,BuildInfo:P}=al(),Y=setTimeout((0,s.Z)(function*(){yield eg(g),_.onEvent(ng())}),500),ue=function(){var Nt=(0,s.Z)(function*(Dt){clearTimeout(Y);const Ur=yield eg(g);let Ei=null;Ur&&Dt?.url&&(Ei=function gu(v,g){var _,C;const x=function l0(v){const g=ec(v),_=g.link?decodeURIComponent(g.link):void 0,C=ec(_).link,x=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return ec(x).link||x||C||_||v}(g);if(x.includes("/__/auth/callback")){const P=ec(x),Y=P.firebaseError?function a0(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,ue=null===(C=null===(_=Y?.code)||void 0===_?void 0:_.split("auth/"))||void 0===C?void 0:C[1],Be=ue?Se(ue):null;return Be?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:x,postBody:null}}return null}(Ur,Dt.url)),_.onEvent(Ei||ng())});return function(Ur){return Nt.apply(this,arguments)}}();typeof C<"u"&&"function"==typeof C.subscribe&&C.subscribe(null,ue);const Be=x,ot=`${P.packageName.toLowerCase()}://`;al().handleOpenURL=function(){var Nt=(0,s.Z)(function*(Dt){if(Dt.toLowerCase().startsWith(ot)&&ue({url:Dt}),"function"==typeof Be)try{Be(Dt)}catch(Ur){console.error(Ur)}});return function(Dt){return Nt.apply(this,arguments)}}()}};function ng(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Se("no-auth-event")}}const h0=1e3;function eo(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function w_(v=(0,L.z$)()){return!("file:"!==eo()&&"ionic:"!==eo()&&"capacitor:"!==eo()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Md(){try{const v=self.localStorage,g=sa();if(v)return v.setItem(g,"1"),v.removeItem(g),!function Od(v=(0,L.z$)()){return function ig(){return(0,L.w1)()&&11===document?.documentMode}()||function C_(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch{return to()&&(0,L.hl)()}return!1}function to(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function uf(){return(function cf(){return"http:"===eo()||"https:"===eo()}()||(0,L.ru)()||w_())&&!function ll(){return(0,L.b$)()||(0,L.UG)()}()&&Md()&&!to()}function df(){return w_()&&typeof document<"u"}function pa(){return(pa=(0,s.Z)(function*(){return!!df()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},h0);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const Qi={LOCAL:"local",NONE:"none",SESSION:"session"},ga=G,Pd="persistence";function xo(v){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,s.Z)(function*(v){yield v._initializationPromise;const g=_u(),_=An(Pd,v.config.apiKey,v.name);g&&g.setItem(_,v._getPersistence())})).apply(this,arguments)}function _u(){var v;try{return(null===(v=function og(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const T_=G;class ko{constructor(){this.browserResolver=yt(tf),this.cordovaResolver=yt(d0),this.underlyingResolver=null,this._redirectPersistence=ia,this._completeRedirectFn=At,this._overrideRedirectResult=Kh}_initialize(g){var _=this;return(0,s.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,C,x){var P=this;return(0,s.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(g,_,C,x)})()}_openRedirect(g,_,C,x){var P=this;return(0,s.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(g,_,C,x)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return df()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return T_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,s.Z)(function*(){if(g.underlyingResolver)return;const _=yield function sg(){return pa.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function yu(v){return v.unwrap()}function ag(v){return vu(v)}function vu(v){const{_tokenResponse:g}=v instanceof L.ZR?v.customData:v;if(!g)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Ed.credentialFromResult(v);const _=g.providerId;if(!_||_===_e.PASSWORD)return null;let C;switch(_){case _e.GOOGLE:C=Mp;break;case _e.FACEBOOK:C=id;break;case _e.GITHUB:C=Pp;break;case _e.TWITTER:C=c_;break;default:const{oauthIdToken:x,oauthAccessToken:P,oauthTokenSecret:Y,pendingToken:ue,nonce:Be}=g;return P||Y||x||ue?ue?_.startsWith("saml.")?Ha._create(_,ue):Ki._fromParams({providerId:_,signInMethod:_,pendingToken:ue,idToken:x,accessToken:P}):new Sl(_).credential({idToken:x,accessToken:P,rawNonce:Be}):null}return v instanceof L.ZR?C.credentialFromError(v):C.credentialFromResult(v)}function Cr(v,g){return g.catch(_=>{throw _ instanceof L.ZR&&function cl(v,g){var _,C;const x=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(C=g)||void 0===C?void 0:C.code))g.resolver=new f0(v,function Wr(v,g){var _;const C=(0,L.m9)(v),x=g;return G(g.customData.operationType,C,"argument-error"),G(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),_d._fromError(C,x)}(v,g));else if(x){const P=vu(g),Y=g;P&&(Y.credential=P,Y.tenantId=x.tenantId||void 0,Y.email=x.email||void 0,Y.phoneNumber=x.phoneNumber||void 0)}}(v,_),_}).then(_=>{const x=_.user;return{operationType:_.operationType,credential:ag(_),additionalUserInfo:Up(_),user:ma.getOrCreate(x)}})}function tc(v,g){return ul.apply(this,arguments)}function ul(){return(ul=(0,s.Z)(function*(v,g){const _=yield g;return{verificationId:_.verificationId,confirm:C=>Cr(v,_.confirm(C))}})).apply(this,arguments)}class f0{constructor(g,_){this.resolver=_,this.auth=function Ro(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Cr(yu(this.auth),this.resolver.resolveSignIn(g))}}class ma{constructor(g){this._delegate=g,this.multiFactor=function yd(v){const g=(0,L.m9)(v);return ra.has(g)||ra.set(g,Ol._fromUser(g)),ra.get(g)}(g)}static getOrCreate(g){return ma.USER_MAP.has(g)||ma.USER_MAP.set(g,new ma(g)),ma.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,s.Z)(function*(){return Cr(_.auth,Xn(_._delegate,g))})()}linkWithPhoneNumber(g,_){var C=this;return(0,s.Z)(function*(){return tc(C.auth,function p_(v,g,_){return ru.apply(this,arguments)}(C._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,s.Z)(function*(){return Cr(_.auth,function g_(v,g,_){return Ti.apply(this,arguments)}(_._delegate,g,ko))})()}linkWithRedirect(g){var _=this;return(0,s.Z)(function*(){return yield xo(Wn(_.auth)),X(_._delegate,g,ko)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,s.Z)(function*(){return Cr(_.auth,ea(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return tc(this.auth,function $p(v,g,_){return Gp.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return Cr(this.auth,function zh(v,g,_){return Wh.apply(this,arguments)}(this._delegate,g,ko))}reauthenticateWithRedirect(g){var _=this;return(0,s.Z)(function*(){return yield xo(Wn(_.auth)),S(_._delegate,g,ko)})()}sendEmailVerification(g){return function Rh(v,g){return fd.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,s.Z)(function*(){return yield function Pc(v,g){return $a.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function Oh(v,g){return Mh((0,L.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function Rl(v,g){return Mh((0,L.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function iu(v,g){return qp.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function na(v,g){return Is.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function Zc(v,g,_){return yr.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ma.USER_MAP=new WeakMap;const ff=G;let E_=(()=>{class v{constructor(_,C){if(this.app=_,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=_.options;ff(x,"invalid-api-key",{appName:_.name}),ff(x,"invalid-api-key",{appName:_.name});const P=typeof window<"u"?ko:void 0;this._delegate=C.initialize({options:{persistence:p0(x,_.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ma.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,C){!function pn(v,g,_){const C=Wn(v);G(C._canInitEmulator,C,"emulator-config-failed"),G(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const x=!!_?.disableWarnings,P=or(g),{host:Y,port:ue}=function Mr(v){const g=or(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(C);if(x){const P=x[1];return{host:P,port:Hs(C.substr(P.length+1))}}{const[P,Y]=C.split(":");return{host:P,port:Hs(Y)}}}(g);C.config.emulator={url:`${P}//${Y}${null===ue?"":`:${ue}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:Y,port:ue,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function ni(){function v(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,C)}applyActionCode(_){return function Bc(v,g){return xh.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Vc(this._delegate,_)}confirmPasswordReset(_,C){return function xl(v,g,_){return Ft.apply(this,arguments)}(this._delegate,_,C)}createUserWithEmailAndPassword(_,C){var x=this;return(0,s.Z)(function*(){return Cr(x._delegate,function Fp(v,g,_){return dd.apply(this,arguments)}(x._delegate,_,C))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function $c(v,g){return Gc.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function kh(v,g){return"EMAIL_SIGNIN"===Dl.parseLink(g)?.operation}(0,_)}getRedirectResult(){var _=this;return(0,s.Z)(function*(){ff(uf(),_._delegate,"operation-not-supported-in-this-environment");const C=yield function et(v,g){return wt.apply(this,arguments)}(_._delegate,ko);return C?Cr(_._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function rg(v,g){Wn(v)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,C,x){const{next:P,error:Y,complete:ue}=pf(_,C,x);return this._delegate.onAuthStateChanged(P,Y,ue)}onIdTokenChanged(_,C,x){const{next:P,error:Y,complete:ue}=pf(_,C,x);return this._delegate.onIdTokenChanged(P,Y,ue)}sendSignInLinkToEmail(_,C){return function an(v,g,_){return hd.apply(this,arguments)}(this._delegate,_,C)}sendPasswordResetEmail(_,C){return function qs(v,g,_){return Nl.apply(this,arguments)}(this._delegate,_,C||void 0)}setPersistence(_){var C=this;return(0,s.Z)(function*(){let x;switch(function hf(v,g){ga(Object.values(Qi).includes(g),v,"invalid-persistence-type"),(0,L.b$)()?ga(g!==Qi.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?ga(g===Qi.NONE,v,"unsupported-persistence-type"):to()?ga(g===Qi.NONE||g===Qi.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):ga(g===Qi.NONE||Md(),v,"unsupported-persistence-type")}(C._delegate,_),_){case Qi.SESSION:x=ia;break;case Qi.LOCAL:x=(yield yt(oa)._isAvailable())?oa:zc;break;case Qi.NONE:x=_n;break;default:return ke("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Cr(this._delegate,function Nh(v){return wo.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Cr(this._delegate,Kn(this._delegate,_))}signInWithCustomToken(_){return Cr(this._delegate,function ta(v,g){return _r.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,C){return Cr(this._delegate,function we(v,g,_){return Kn((0,L.m9)(v),rd.credential(g,_))}(this._delegate,_,C))}signInWithEmailLink(_,C){return Cr(this._delegate,function zr(v,g,_){return kl.apply(this,arguments)}(this._delegate,_,C))}signInWithPhoneNumber(_,C){return tc(this._delegate,function sn(v,g,_){return Td.apply(this,arguments)}(this._delegate,_,C))}signInWithPopup(_){var C=this;return(0,s.Z)(function*(){return ff(uf(),C._delegate,"operation-not-supported-in-this-environment"),Cr(C._delegate,function il(v,g,_){return lu.apply(this,arguments)}(C._delegate,_,ko))})()}signInWithRedirect(_){var C=this;return(0,s.Z)(function*(){return ff(uf(),C._delegate,"operation-not-supported-in-this-environment"),yield xo(C._delegate),cu(C._delegate,_,ko)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function ud(v,g){return jc.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Qi,v})();function pf(v,g,_){let C=v;"function"!=typeof v&&({next:C,error:g,complete:_}=v);const x=C;return{next:Y=>x(Y&&ma.getOrCreate(Y)),error:g,complete:_}}function p0(v,g){const _=function Ld(v,g){const _=_u();if(!_)return[];const C=An(Pd,v,g);switch(_.getItem(C)){case Qi.NONE:return[_n];case Qi.LOCAL:return[oa,ia];case Qi.SESSION:return[ia];default:return[]}}(v,g);if(typeof self<"u"&&!_.includes(oa)&&_.push(oa),typeof window<"u")for(const C of[zc,ia])_.includes(C)||_.push(C);return _.includes(_n)||_.push(_n),_}class gf{constructor(){this.providerId="phone",this._delegate=new Ed(yu(te.Z.auth()))}static credential(g,_){return Ed.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}gf.PHONE_SIGN_IN_METHOD=Ed.PHONE_SIGN_IN_METHOD,gf.PROVIDER_ID=Ed.PROVIDER_ID;const mf=G;class lg{constructor(g,_,C=te.Z.app()){var x;mf(null===(x=C.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new Zl(g,_,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function cg(v){v.INTERNAL.registerComponent(new Ce.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),C=g.getProvider("auth");return new E_(_,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ee_EMAIL_SIGNIN,PASSWORD_RESET:ee_PASSWORD_RESET,RECOVER_EMAIL:ee_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ee_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ee_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ee_VERIFY_EMAIL}},EmailAuthProvider:rd,FacebookAuthProvider:id,GithubAuthProvider:Pp,GoogleAuthProvider:Mp,OAuthProvider:Sl,SAMLAuthProvider:Ss,PhoneAuthProvider:gf,PhoneMultiFactorGenerator:dr,RecaptchaVerifier:lg,TwitterAuthProvider:c_,Auth:E_,AuthCredential:qo,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.18")}(te.Z)},9751:(_t,Ae,U)=>{U.d(Ae,{y:()=>ye});var s=U(930),te=U(727),L=U(8822),le=U(9635),oe=U(2416),ie=U(576),Ce=U(2806);let ye=(()=>{class ee{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const Qe=new ee;return Qe.source=this,Qe.operator=Re,Qe}subscribe(Re,Qe,ut){const be=function Z(ee){return ee&&ee instanceof s.Lv||function q(ee){return ee&&(0,ie.m)(ee.next)&&(0,ie.m)(ee.error)&&(0,ie.m)(ee.complete)}(ee)&&(0,te.Nn)(ee)}(Re)?Re:new s.Hp(Re,Qe,ut);return(0,Ce.x)(()=>{const{operator:Oe,source:xe}=this;be.add(Oe?Oe.call(be,xe):xe?this._subscribe(be):this._trySubscribe(be))}),be}_trySubscribe(Re){try{return this._subscribe(Re)}catch(Qe){Re.error(Qe)}}forEach(Re,Qe){return new(Qe=_e(Qe))((ut,be)=>{const Oe=new s.Hp({next:xe=>{try{Re(xe)}catch(Ge){be(Ge),Oe.unsubscribe()}},error:be,complete:ut});this.subscribe(Oe)})}_subscribe(Re){var Qe;return null===(Qe=this.source)||void 0===Qe?void 0:Qe.subscribe(Re)}[L.L](){return this}pipe(...Re){return(0,le.U)(Re)(this)}toPromise(Re){return new(Re=_e(Re))((Qe,ut)=>{let be;this.subscribe(Oe=>be=Oe,Oe=>ut(Oe),()=>Qe(be))})}}return ee.create=Ye=>new ee(Ye),ee})();function _e(ee){var Ye;return null!==(Ye=ee??oe.v.Promise)&&void 0!==Ye?Ye:Promise}},7579:(_t,Ae,U)=>{U.d(Ae,{x:()=>Ce});var s=U(9751),te=U(727);const le=(0,U(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=U(8737),ie=U(2806);let Ce=(()=>{class _e extends s.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Z){const ee=new ye(this,this);return ee.operator=Z,ee}_throwIfClosed(){if(this.closed)throw new le}next(Z){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(Z)}})}error(Z){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Z;const{observers:ee}=this;for(;ee.length;)ee.shift().error(Z)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Z}=this;for(;Z.length;)Z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Z;return(null===(Z=this.observers)||void 0===Z?void 0:Z.length)>0}_trySubscribe(Z){return this._throwIfClosed(),super._trySubscribe(Z)}_subscribe(Z){return this._throwIfClosed(),this._checkFinalizedStatuses(Z),this._innerSubscribe(Z)}_innerSubscribe(Z){const{hasError:ee,isStopped:Ye,observers:Re}=this;return ee||Ye?te.Lc:(this.currentObservers=null,Re.push(Z),new te.w0(()=>{this.currentObservers=null,(0,oe.P)(Re,Z)}))}_checkFinalizedStatuses(Z){const{hasError:ee,thrownError:Ye,isStopped:Re}=this;ee?Z.error(Ye):Re&&Z.complete()}asObservable(){const Z=new s.y;return Z.source=this,Z}}return _e.create=(q,Z)=>new ye(q,Z),_e})();class ye extends Ce{constructor(q,Z){super(),this.destination=q,this.source=Z}next(q){var Z,ee;null===(ee=null===(Z=this.destination)||void 0===Z?void 0:Z.next)||void 0===ee||ee.call(Z,q)}error(q){var Z,ee;null===(ee=null===(Z=this.destination)||void 0===Z?void 0:Z.error)||void 0===ee||ee.call(Z,q)}complete(){var q,Z;null===(Z=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===Z||Z.call(q)}_subscribe(q){var Z,ee;return null!==(ee=null===(Z=this.source)||void 0===Z?void 0:Z.subscribe(q))&&void 0!==ee?ee:te.Lc}}},930:(_t,Ae,U)=>{U.d(Ae,{Hp:()=>ut,Lv:()=>ee});var s=U(576),te=U(727),L=U(2416),le=U(7849),oe=U(5032);const ie=_e("C",void 0,void 0);function _e(ke,Se,Me){return{kind:ke,value:Se,error:Me}}var q=U(3410),Z=U(2806);class ee extends te.w0{constructor(Se){super(),this.isStopped=!1,Se?(this.destination=Se,(0,te.Nn)(Se)&&Se.add(this)):this.destination=Ge}static create(Se,Me,ze){return new ut(Se,Me,ze)}next(Se){this.isStopped?xe(function ye(ke){return _e("N",ke,void 0)}(Se),this):this._next(Se)}error(Se){this.isStopped?xe(function Ce(ke){return _e("E",void 0,ke)}(Se),this):(this.isStopped=!0,this._error(Se))}complete(){this.isStopped?xe(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Se){this.destination.next(Se)}_error(Se){try{this.destination.error(Se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ye=Function.prototype.bind;function Re(ke,Se){return Ye.call(ke,Se)}class Qe{constructor(Se){this.partialObserver=Se}next(Se){const{partialObserver:Me}=this;if(Me.next)try{Me.next(Se)}catch(ze){be(ze)}}error(Se){const{partialObserver:Me}=this;if(Me.error)try{Me.error(Se)}catch(ze){be(ze)}else be(Se)}complete(){const{partialObserver:Se}=this;if(Se.complete)try{Se.complete()}catch(Me){be(Me)}}}class ut extends ee{constructor(Se,Me,ze){let je;if(super(),(0,s.m)(Se)||!Se)je={next:Se??void 0,error:Me??void 0,complete:ze??void 0};else{let G;this&&L.v.useDeprecatedNextContext?(G=Object.create(Se),G.unsubscribe=()=>this.unsubscribe(),je={next:Se.next&&Re(Se.next,G),error:Se.error&&Re(Se.error,G),complete:Se.complete&&Re(Se.complete,G)}):je=Se}this.destination=new Qe(je)}}function be(ke){L.v.useDeprecatedSynchronousErrorHandling?(0,Z.O)(ke):(0,le.h)(ke)}function xe(ke,Se){const{onStoppedNotification:Me}=L.v;Me&&q.z.setTimeout(()=>Me(ke,Se))}const Ge={closed:!0,next:oe.Z,error:function Oe(ke){throw ke},complete:oe.Z}},727:(_t,Ae,U)=>{U.d(Ae,{Lc:()=>ie,w0:()=>oe,Nn:()=>Ce});var s=U(576);const L=(0,U(3888).d)(_e=>function(Z){_e(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((ee,Ye)=>`${Ye+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z});var le=U(8737);class oe{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:Z}=this;if(Z)if(this._parentage=null,Array.isArray(Z))for(const Re of Z)Re.remove(this);else Z.remove(this);const{initialTeardown:ee}=this;if((0,s.m)(ee))try{ee()}catch(Re){q=Re instanceof L?Re.errors:[Re]}const{_finalizers:Ye}=this;if(Ye){this._finalizers=null;for(const Re of Ye)try{ye(Re)}catch(Qe){q=q??[],Qe instanceof L?q=[...q,...Qe.errors]:q.push(Qe)}}if(q)throw new L(q)}}add(q){var Z;if(q&&q!==this)if(this.closed)ye(q);else{if(q instanceof oe){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(Z=this._finalizers)&&void 0!==Z?Z:[]).push(q)}}_hasParent(q){const{_parentage:Z}=this;return Z===q||Array.isArray(Z)&&Z.includes(q)}_addParent(q){const{_parentage:Z}=this;this._parentage=Array.isArray(Z)?(Z.push(q),Z):Z?[Z,q]:q}_removeParent(q){const{_parentage:Z}=this;Z===q?this._parentage=null:Array.isArray(Z)&&(0,le.P)(Z,q)}remove(q){const{_finalizers:Z}=this;Z&&(0,le.P)(Z,q),q instanceof oe&&q._removeParent(this)}}oe.EMPTY=(()=>{const _e=new oe;return _e.closed=!0,_e})();const ie=oe.EMPTY;function Ce(_e){return _e instanceof oe||_e&&"closed"in _e&&(0,s.m)(_e.remove)&&(0,s.m)(_e.add)&&(0,s.m)(_e.unsubscribe)}function ye(_e){(0,s.m)(_e)?_e():_e.unsubscribe()}},2416:(_t,Ae,U)=>{U.d(Ae,{v:()=>s});const s={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(_t,Ae,U)=>{U.d(Ae,{E:()=>te});const te=new(U(9751).y)(oe=>oe.complete())},8996:(_t,Ae,U)=>{U.d(Ae,{D:()=>Se});var s=U(8421),te=U(5363),L=U(9468),ie=U(9751),ye=U(2202),_e=U(576),q=U(9672);function ee(Me,ze){if(!Me)throw new Error("Iterable cannot be null");return new ie.y(je=>{(0,q.f)(je,ze,()=>{const G=Me[Symbol.asyncIterator]();(0,q.f)(je,ze,()=>{G.next().then(Ee=>{Ee.done?je.complete():je.next(Ee.value)})},0,!0)})})}var Ye=U(3670),Re=U(8239),Qe=U(1144),ut=U(6495),be=U(2206),Oe=U(4532),xe=U(3260);function Se(Me,ze){return ze?function ke(Me,ze){if(null!=Me){if((0,Ye.c)(Me))return function le(Me,ze){return(0,s.Xf)(Me).pipe((0,L.R)(ze),(0,te.Q)(ze))}(Me,ze);if((0,Qe.z)(Me))return function Ce(Me,ze){return new ie.y(je=>{let G=0;return ze.schedule(function(){G===Me.length?je.complete():(je.next(Me[G++]),je.closed||this.schedule())})})}(Me,ze);if((0,Re.t)(Me))return function oe(Me,ze){return(0,s.Xf)(Me).pipe((0,L.R)(ze),(0,te.Q)(ze))}(Me,ze);if((0,be.D)(Me))return ee(Me,ze);if((0,ut.T)(Me))return function Z(Me,ze){return new ie.y(je=>{let G;return(0,q.f)(je,ze,()=>{G=Me[ye.h](),(0,q.f)(je,ze,()=>{let Ee,Ke;try{({value:Ee,done:Ke}=G.next())}catch(tt){return void je.error(tt)}Ke?je.complete():je.next(Ee)},0,!0)}),()=>(0,_e.m)(G?.return)&&G.return()})}(Me,ze);if((0,xe.L)(Me))return function Ge(Me,ze){return ee((0,xe.Q)(Me),ze)}(Me,ze)}throw(0,Oe.z)(Me)}(Me,ze):(0,s.Xf)(Me)}},8421:(_t,Ae,U)=>{U.d(Ae,{Xf:()=>Ye});var s=U(7582),te=U(1144),L=U(8239),le=U(9751),oe=U(3670),ie=U(2206),Ce=U(4532),ye=U(6495),_e=U(3260),q=U(576),Z=U(7849),ee=U(8822);function Ye(ke){if(ke instanceof le.y)return ke;if(null!=ke){if((0,oe.c)(ke))return function Re(ke){return new le.y(Se=>{const Me=ke[ee.L]();if((0,q.m)(Me.subscribe))return Me.subscribe(Se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,te.z)(ke))return function Qe(ke){return new le.y(Se=>{for(let Me=0;Me<ke.length&&!Se.closed;Me++)Se.next(ke[Me]);Se.complete()})}(ke);if((0,L.t)(ke))return function ut(ke){return new le.y(Se=>{ke.then(Me=>{Se.closed||(Se.next(Me),Se.complete())},Me=>Se.error(Me)).then(null,Z.h)})}(ke);if((0,ie.D)(ke))return Oe(ke);if((0,ye.T)(ke))return function be(ke){return new le.y(Se=>{for(const Me of ke)if(Se.next(Me),Se.closed)return;Se.complete()})}(ke);if((0,_e.L)(ke))return function xe(ke){return Oe((0,_e.Q)(ke))}(ke)}throw(0,Ce.z)(ke)}function Oe(ke){return new le.y(Se=>{(function Ge(ke,Se){var Me,ze,je,G;return(0,s.mG)(this,void 0,void 0,function*(){try{for(Me=(0,s.KL)(ke);!(ze=yield Me.next()).done;)if(Se.next(ze.value),Se.closed)return}catch(Ee){je={error:Ee}}finally{try{ze&&!ze.done&&(G=Me.return)&&(yield G.call(Me))}finally{if(je)throw je.error}}Se.complete()})})(ke,Se).catch(Me=>Se.error(Me))})}},6451:(_t,Ae,U)=>{U.d(Ae,{T:()=>ie});var s=U(8189),te=U(8421),L=U(515),le=U(3269),oe=U(8996);function ie(...Ce){const ye=(0,le.yG)(Ce),_e=(0,le._6)(Ce,1/0),q=Ce;return q.length?1===q.length?(0,te.Xf)(q[0]):(0,s.J)(_e)((0,oe.D)(q,ye)):L.E}},5403:(_t,Ae,U)=>{U.d(Ae,{x:()=>te});var s=U(930);function te(le,oe,ie,Ce,ye){return new L(le,oe,ie,Ce,ye)}class L extends s.Lv{constructor(oe,ie,Ce,ye,_e,q){super(oe),this.onFinalize=_e,this.shouldUnsubscribe=q,this._next=ie?function(Z){try{ie(Z)}catch(ee){oe.error(ee)}}:super._next,this._error=ye?function(Z){try{ye(Z)}catch(ee){oe.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(Z){oe.error(Z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(_t,Ae,U)=>{U.d(Ae,{U:()=>L});var s=U(4482),te=U(5403);function L(le,oe){return(0,s.e)((ie,Ce)=>{let ye=0;ie.subscribe((0,te.x)(Ce,_e=>{Ce.next(le.call(oe,_e,ye++))}))})}},8189:(_t,Ae,U)=>{U.d(Ae,{J:()=>L});var s=U(5577),te=U(4671);function L(le=1/0){return(0,s.z)(te.y,le)}},5577:(_t,Ae,U)=>{U.d(Ae,{z:()=>ye});var s=U(4004),te=U(8421),L=U(4482),le=U(9672),oe=U(5403),Ce=U(576);function ye(_e,q,Z=1/0){return(0,Ce.m)(q)?ye((ee,Ye)=>(0,s.U)((Re,Qe)=>q(ee,Re,Ye,Qe))((0,te.Xf)(_e(ee,Ye))),Z):("number"==typeof q&&(Z=q),(0,L.e)((ee,Ye)=>function ie(_e,q,Z,ee,Ye,Re,Qe,ut){const be=[];let Oe=0,xe=0,Ge=!1;const ke=()=>{Ge&&!be.length&&!Oe&&q.complete()},Se=ze=>Oe<ee?Me(ze):be.push(ze),Me=ze=>{Re&&q.next(ze),Oe++;let je=!1;(0,te.Xf)(Z(ze,xe++)).subscribe((0,oe.x)(q,G=>{Ye?.(G),Re?Se(G):q.next(G)},()=>{je=!0},void 0,()=>{if(je)try{for(Oe--;be.length&&Oe<ee;){const G=be.shift();Qe?(0,le.f)(q,Qe,()=>Me(G)):Me(G)}ke()}catch(G){q.error(G)}}))};return _e.subscribe((0,oe.x)(q,Se,()=>{Ge=!0,ke()})),()=>{ut?.()}}(ee,Ye,_e,Z)))}},5363:(_t,Ae,U)=>{U.d(Ae,{Q:()=>le});var s=U(9672),te=U(4482),L=U(5403);function le(oe,ie=0){return(0,te.e)((Ce,ye)=>{Ce.subscribe((0,L.x)(ye,_e=>(0,s.f)(ye,oe,()=>ye.next(_e),ie),()=>(0,s.f)(ye,oe,()=>ye.complete(),ie),_e=>(0,s.f)(ye,oe,()=>ye.error(_e),ie)))})}},3099:(_t,Ae,U)=>{U.d(Ae,{B:()=>oe});var s=U(8421),te=U(7579),L=U(930),le=U(4482);function oe(Ce={}){const{connector:ye=(()=>new te.x),resetOnError:_e=!0,resetOnComplete:q=!0,resetOnRefCountZero:Z=!0}=Ce;return ee=>{let Ye,Re,Qe,ut=0,be=!1,Oe=!1;const xe=()=>{Re?.unsubscribe(),Re=void 0},Ge=()=>{xe(),Ye=Qe=void 0,be=Oe=!1},ke=()=>{const Se=Ye;Ge(),Se?.unsubscribe()};return(0,le.e)((Se,Me)=>{ut++,!Oe&&!be&&xe();const ze=Qe=Qe??ye();Me.add(()=>{ut--,0===ut&&!Oe&&!be&&(Re=ie(ke,Z))}),ze.subscribe(Me),!Ye&&ut>0&&(Ye=new L.Hp({next:je=>ze.next(je),error:je=>{Oe=!0,xe(),Re=ie(Ge,_e,je),ze.error(je)},complete:()=>{be=!0,xe(),Re=ie(Ge,q),ze.complete()}}),(0,s.Xf)(Se).subscribe(Ye))})(ee)}}function ie(Ce,ye,..._e){if(!0===ye)return void Ce();if(!1===ye)return;const q=new L.Hp({next:()=>{q.unsubscribe(),Ce()}});return(0,s.Xf)(ye(..._e)).subscribe(q)}},9468:(_t,Ae,U)=>{U.d(Ae,{R:()=>te});var s=U(4482);function te(L,le=0){return(0,s.e)((oe,ie)=>{ie.add(L.schedule(()=>oe.subscribe(ie),le))})}},8505:(_t,Ae,U)=>{U.d(Ae,{b:()=>oe});var s=U(576),te=U(4482),L=U(5403),le=U(4671);function oe(ie,Ce,ye){const _e=(0,s.m)(ie)||Ce||ye?{next:ie,error:Ce,complete:ye}:ie;return _e?(0,te.e)((q,Z)=>{var ee;null===(ee=_e.subscribe)||void 0===ee||ee.call(_e);let Ye=!0;q.subscribe((0,L.x)(Z,Re=>{var Qe;null===(Qe=_e.next)||void 0===Qe||Qe.call(_e,Re),Z.next(Re)},()=>{var Re;Ye=!1,null===(Re=_e.complete)||void 0===Re||Re.call(_e),Z.complete()},Re=>{var Qe;Ye=!1,null===(Qe=_e.error)||void 0===Qe||Qe.call(_e,Re),Z.error(Re)},()=>{var Re,Qe;Ye&&(null===(Re=_e.unsubscribe)||void 0===Re||Re.call(_e)),null===(Qe=_e.finalize)||void 0===Qe||Qe.call(_e)}))}):le.y}},4408:(_t,Ae,U)=>{U.d(Ae,{o:()=>oe});var s=U(727);class te extends s.w0{constructor(Ce,ye){super()}schedule(Ce,ye=0){return this}}const L={setInterval(ie,Ce,...ye){const{delegate:_e}=L;return _e?.setInterval?_e.setInterval(ie,Ce,...ye):setInterval(ie,Ce,...ye)},clearInterval(ie){const{delegate:Ce}=L;return(Ce?.clearInterval||clearInterval)(ie)},delegate:void 0};var le=U(8737);class oe extends te{constructor(Ce,ye){super(Ce,ye),this.scheduler=Ce,this.work=ye,this.pending=!1}schedule(Ce,ye=0){var _e;if(this.closed)return this;this.state=Ce;const q=this.id,Z=this.scheduler;return null!=q&&(this.id=this.recycleAsyncId(Z,q,ye)),this.pending=!0,this.delay=ye,this.id=null!==(_e=this.id)&&void 0!==_e?_e:this.requestAsyncId(Z,this.id,ye),this}requestAsyncId(Ce,ye,_e=0){return L.setInterval(Ce.flush.bind(Ce,this),_e)}recycleAsyncId(Ce,ye,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return ye;null!=ye&&L.clearInterval(ye)}execute(Ce,ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(Ce,ye);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ce,ye){let q,_e=!1;try{this.work(Ce)}catch(Z){_e=!0,q=Z||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:Ce,scheduler:ye}=this,{actions:_e}=ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(_e,this),null!=Ce&&(this.id=this.recycleAsyncId(ye,Ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(_t,Ae,U)=>{U.d(Ae,{v:()=>L});var s=U(6063);class te{constructor(oe,ie=te.now){this.schedulerActionCtor=oe,this.now=ie}schedule(oe,ie=0,Ce){return new this.schedulerActionCtor(this,oe).schedule(Ce,ie)}}te.now=s.l.now;class L extends te{constructor(oe,ie=te.now){super(oe,ie),this.actions=[],this._active=!1}flush(oe){const{actions:ie}=this;if(this._active)return void ie.push(oe);let Ce;this._active=!0;do{if(Ce=oe.execute(oe.state,oe.delay))break}while(oe=ie.shift());if(this._active=!1,Ce){for(;oe=ie.shift();)oe.unsubscribe();throw Ce}}}},4986:(_t,Ae,U)=>{U.d(Ae,{P:()=>le,z:()=>L});var s=U(4408);const L=new(U(7565).v)(s.o),le=L},6063:(_t,Ae,U)=>{U.d(Ae,{l:()=>s});const s={now:()=>(s.delegate||Date).now(),delegate:void 0}},3410:(_t,Ae,U)=>{U.d(Ae,{z:()=>s});const s={setTimeout(te,L,...le){const{delegate:oe}=s;return oe?.setTimeout?oe.setTimeout(te,L,...le):setTimeout(te,L,...le)},clearTimeout(te){const{delegate:L}=s;return(L?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(_t,Ae,U)=>{U.d(Ae,{h:()=>te});const te=function s(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(_t,Ae,U)=>{U.d(Ae,{L:()=>s});const s="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(_t,Ae,U)=>{U.d(Ae,{_6:()=>ie,jO:()=>le,yG:()=>oe});var s=U(576),te=U(3532);function L(Ce){return Ce[Ce.length-1]}function le(Ce){return(0,s.m)(L(Ce))?Ce.pop():void 0}function oe(Ce){return(0,te.K)(L(Ce))?Ce.pop():void 0}function ie(Ce,ye){return"number"==typeof L(Ce)?Ce.pop():ye}},8737:(_t,Ae,U)=>{function s(te,L){if(te){const le=te.indexOf(L);0<=le&&te.splice(le,1)}}U.d(Ae,{P:()=>s})},3888:(_t,Ae,U)=>{function s(te){const le=te(oe=>{Error.call(oe),oe.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}U.d(Ae,{d:()=>s})},2806:(_t,Ae,U)=>{U.d(Ae,{O:()=>le,x:()=>L});var s=U(2416);let te=null;function L(oe){if(s.v.useDeprecatedSynchronousErrorHandling){const ie=!te;if(ie&&(te={errorThrown:!1,error:null}),oe(),ie){const{errorThrown:Ce,error:ye}=te;if(te=null,Ce)throw ye}}else oe()}function le(oe){s.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=oe)}},9672:(_t,Ae,U)=>{function s(te,L,le,oe=0,ie=!1){const Ce=L.schedule(function(){le(),ie?te.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(te.add(Ce),!ie)return Ce}U.d(Ae,{f:()=>s})},4671:(_t,Ae,U)=>{function s(te){return te}U.d(Ae,{y:()=>s})},1144:(_t,Ae,U)=>{U.d(Ae,{z:()=>s});const s=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(_t,Ae,U)=>{U.d(Ae,{D:()=>te});var s=U(576);function te(L){return Symbol.asyncIterator&&(0,s.m)(L?.[Symbol.asyncIterator])}},576:(_t,Ae,U)=>{function s(te){return"function"==typeof te}U.d(Ae,{m:()=>s})},3670:(_t,Ae,U)=>{U.d(Ae,{c:()=>L});var s=U(8822),te=U(576);function L(le){return(0,te.m)(le[s.L])}},6495:(_t,Ae,U)=>{U.d(Ae,{T:()=>L});var s=U(2202),te=U(576);function L(le){return(0,te.m)(le?.[s.h])}},8239:(_t,Ae,U)=>{U.d(Ae,{t:()=>te});var s=U(576);function te(L){return(0,s.m)(L?.then)}},3260:(_t,Ae,U)=>{U.d(Ae,{L:()=>le,Q:()=>L});var s=U(7582),te=U(576);function L(oe){return(0,s.FC)(this,arguments,function*(){const Ce=oe.getReader();try{for(;;){const{value:ye,done:_e}=yield(0,s.qq)(Ce.read());if(_e)return yield(0,s.qq)(void 0);yield yield(0,s.qq)(ye)}}finally{Ce.releaseLock()}})}function le(oe){return(0,te.m)(oe?.getReader)}},3532:(_t,Ae,U)=>{U.d(Ae,{K:()=>te});var s=U(576);function te(L){return L&&(0,s.m)(L.schedule)}},4482:(_t,Ae,U)=>{U.d(Ae,{A:()=>te,e:()=>L});var s=U(576);function te(le){return(0,s.m)(le?.lift)}function L(le){return oe=>{if(te(oe))return oe.lift(function(ie){try{return le(ie,this)}catch(Ce){this.error(Ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(_t,Ae,U)=>{function s(){}U.d(Ae,{Z:()=>s})},9635:(_t,Ae,U)=>{U.d(Ae,{U:()=>L,z:()=>te});var s=U(4671);function te(...le){return L(le)}function L(le){return 0===le.length?s.y:1===le.length?le[0]:function(ie){return le.reduce((Ce,ye)=>ye(Ce),ie)}}},7849:(_t,Ae,U)=>{U.d(Ae,{h:()=>L});var s=U(2416),te=U(3410);function L(le){te.z.setTimeout(()=>{const{onUnhandledError:oe}=s.v;if(!oe)throw le;oe(le)})}},4532:(_t,Ae,U)=>{function s(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Ae,{z:()=>s})},4650:(_t,Ae,U)=>{U.d(Ae,{$8M:()=>tu,$WT:()=>Hs,$Z:()=>rT,AFp:()=>lw,ALo:()=>Kb,AaK:()=>ye,AsE:()=>gy,BQk:()=>ry,CHM:()=>hd,CRH:()=>ew,CZH:()=>$y,CqO:()=>Du,D6c:()=>lh,EJc:()=>Zy,EiD:()=>xA,EpF:()=>FT,F$t:()=>oy,F4k:()=>LT,FYo:()=>N0,FiY:()=>uu,Gf:()=>Ly,GfV:()=>F1,Gpc:()=>Z,Hsn:()=>HT,Ikx:()=>my,JOm:()=>It,JVY:()=>Nt,JZr:()=>ut,KtG:()=>kh,L6k:()=>Dt,LAX:()=>Ei,LFG:()=>$,LMc:()=>ww,Lbi:()=>vD,Lck:()=>Vx,MAs:()=>RT,MGl:()=>Vf,MMx:()=>Hb,MR2:()=>MA,NdJ:()=>Og,OlP:()=>sn,Oqu:()=>fy,P3R:()=>I1,PXZ:()=>Pk,Q6J:()=>Lf,QGY:()=>tb,QbO:()=>bk,Qsj:()=>HA,QtT:()=>Lx,R0b:()=>gi,RDi:()=>p0,Rgc:()=>My,SBq:()=>Df,SDv:()=>Fx,Sil:()=>bD,Suo:()=>Kg,TTD:()=>Pc,TgZ:()=>kg,Tol:()=>ub,Udp:()=>lb,VKq:()=>Zb,W1O:()=>iD,WLB:()=>ku,X6Q:()=>Hk,XFs:()=>vt,Xpm:()=>Fa,Xts:()=>v0,Y36:()=>xf,YKP:()=>Vb,YNc:()=>kT,Yjl:()=>Xu,Yz7:()=>Xe,Z0I:()=>un,ZZ4:()=>Jf,_Bn:()=>Bb,_UZ:()=>Rg,_Vd:()=>Ef,_c5:()=>nm,_uU:()=>Lg,aQg:()=>mi,c2e:()=>wk,cJS:()=>St,cg1:()=>vy,d8E:()=>_y,dDg:()=>M2,dqk:()=>wn,eBb:()=>Ur,eFA:()=>AD,eJc:()=>oD,ekj:()=>cb,eoX:()=>xk,f3M:()=>z,g9A:()=>yD,h0i:()=>Gf,hGG:()=>HD,hij:()=>py,iGM:()=>Fy,ifc:()=>Qn,ip1:()=>Vi,jDz:()=>PE,kEZ:()=>HE,kL8:()=>yE,lG2:()=>Wn,lcZ:()=>Yx,lqb:()=>Vd,lri:()=>Ak,mCW:()=>nc,n5z:()=>$h,oAB:()=>La,oJD:()=>E1,oxw:()=>jT,pB0:()=>Ud,pQV:()=>RE,q3G:()=>hr,q4F:()=>L1,qLn:()=>_g,qOj:()=>J_,qZA:()=>ty,qzn:()=>Be,rWj:()=>Nk,s9C:()=>Bf,sBO:()=>$k,s_b:()=>Lo,soG:()=>Gy,tb:()=>Rk,tp0:()=>S,uIk:()=>qd,vHH:()=>be,vpe:()=>pc,wAp:()=>xt,xp6:()=>W1,ynx:()=>ny,z2F:()=>on,z3N:()=>ue,zSh:()=>wu,zs3:()=>If});var s=U(7579),te=U(727),L=U(9751),le=U(6451),oe=U(3099);function ie(a){for(let l in a)if(a[l]===ie)return l;throw Error("Could not find renamed property on target object.")}function Ce(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function ye(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(ye).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function _e(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const q=ie({__forward_ref__:ie});function Z(a){return a.__forward_ref__=Z,a.toString=function(){return ye(this())},a}function ee(a){return Ye(a)?a():a}function Ye(a){return"function"==typeof a&&a.hasOwnProperty(q)&&a.__forward_ref__===Z}function Re(a){return a&&!!a.\u0275providers}const ut="https://g.co/ng/security#xss";class be extends Error{constructor(l,u){super(Oe(l,u)),this.code=l}}function Oe(a,l){return`NG0${Math.abs(a)}${l?": "+l.trim():""}`}function xe(a){return"string"==typeof a?a:null==a?"":String(a)}function ze(a,l){throw new be(-201,!1)}function se(a,l,u,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${u} ${h} ${l} <=Actual]`))}function Xe(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function St(a){return{providers:a.providers||[],imports:a.imports||[]}}function Jt(a){return rn(a,Ln)||rn(a,Ni)}function un(a){return null!==Jt(a)}function rn(a,l){return a.hasOwnProperty(l)?a[l]:null}function Rr(a){return a&&(a.hasOwnProperty(qn)||a.hasOwnProperty(Un))?a[qn]:null}const Ln=ie({\u0275prov:ie}),qn=ie({\u0275inj:ie}),Ni=ie({ngInjectableDef:ie}),Un=ie({ngInjectorDef:ie});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let us;function jn(a){const l=us;return us=a,l}function ti(a,l,u){const h=Jt(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&vt.Optional?null:void 0!==l?l:void ze(ye(a))}const wn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ds={},Jn="__NG_DI_FLAG__",zn="ngTempTokenPath",js="ngTokenPath",Gr=/\n/gm,Ma="\u0275",mn="__source";let xi;function en(a){const l=xi;return xi=a,l}function Q(a,l=vt.Default){if(void 0===xi)throw new be(-203,!1);return null===xi?ti(a,void 0,l):xi.get(a,l&vt.Optional?null:void 0,l)}function $(a,l=vt.Default){return(function Vs(){return us}()||Q)(ee(a),l)}function z(a,l=vt.Default){return $(a,K(l))}function K(a){return typeof a>"u"||"number"==typeof a?a:0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)}function Ne(a){const l=[];for(let u=0;u<a.length;u++){const h=ee(a[u]);if(Array.isArray(h)){if(0===h.length)throw new be(900,!1);let p,m=vt.Default;for(let b=0;b<h.length;b++){const T=h[b],D=bt(T);"number"==typeof D?-1===D?p=T.token:m|=D:p=T}l.push($(p,m))}else l.push($(h))}return l}function Je(a,l){return a[Jn]=l,a.prototype[Jn]=l,a}function bt(a){return a[Jn]}function An(a){return{toString:a}.toString()}var Vt=(()=>((Vt=Vt||{})[Vt.OnPush=0]="OnPush",Vt[Vt.Default=1]="Default",Vt))(),Qn=(()=>{return(a=Qn||(Qn={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Qn;var a})();const Or={},tn=[],vo=ie({\u0275cmp:ie}),Oc=ie({\u0275dir:ie}),Ts=ie({\u0275pipe:ie}),Pa=ie({\u0275mod:ie}),Zr=ie({\u0275fac:ie}),Es=ie({__NG_ELEMENT_ID__:ie});let a_=0;function Fa(a){return An(()=>{const l=qo(a),u={...l,decls:a.decls,vars:a.vars,template:a.template,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,onPush:a.changeDetection===Vt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:l.standalone&&a.dependencies||null,getStandaloneInjector:null,data:a.data||{},encapsulation:a.encapsulation||Qn.Emulated,id:"c"+a_++,styles:a.styles||tn,_:null,schemas:a.schemas||null,tView:null};ri(u);const h=a.dependencies;return u.directiveDefs=zo(h,!1),u.pipeDefs=zo(h,!0),u})}function Rp(a){return pn(a)||or(a)}function Qu(a){return null!==a}function La(a){return An(()=>({type:a.type,bootstrap:a.bootstrap||tn,declarations:a.declarations||tn,imports:a.imports||tn,exports:a.exports||tn,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function Sh(a,l){if(null==a)return Or;const u={};for(const h in a)if(a.hasOwnProperty(h)){let p=a[h],m=p;Array.isArray(p)&&(m=p[1],p=p[0]),u[p]=h,l&&(l[p]=m)}return u}function Wn(a){return An(()=>{const l=qo(a);return ri(l),l})}function Xu(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function pn(a){return a[vo]||null}function or(a){return a[Oc]||null}function Mr(a){return a[Ts]||null}function Hs(a){const l=pn(a)||or(a)||Mr(a);return null!==l&&l.standalone}function ni(a,l){const u=a[Pa]||null;if(!u&&!0===l)throw new Error(`Type ${ye(a)} does not have '\u0275mod' property.`);return u}function qo(a){const l={};return{type:a.type,providersResolver:null,factory:null,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:l,exportAs:a.exportAs||null,standalone:!0===a.standalone,selectors:a.selectors||tn,viewQuery:a.viewQuery||null,features:a.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Sh(a.inputs,l),outputs:Sh(a.outputs)}}function ri(a){a.features?.forEach(l=>l(a))}function zo(a,l){if(!a)return null;const u=l?Mr:Rp;return()=>("function"==typeof a?a():a).map(h=>u(h)).filter(Qu)}const zi=0,st=1,jt=2,On=3,vi=4,$s=5,ar=6,lr=7,Hn=8,Ua=9,mr=10,Zt=11,ed=12,bo=13,td=14,hs=15,ii=16,Ba=17,Wo=18,Wi=19,Gs=20,bi=21,Cn=22,Ki=1,Ih=2,Va=7,Ko=8,si=9,oi=10;function ki(a){return Array.isArray(a)&&"object"==typeof a[Ki]}function Yi(a){return Array.isArray(a)&&!0===a[Ki]}function El(a){return 0!=(4&a.flags)}function fs(a){return a.componentOffset>-1}function nd(a){return 1==(1&a.flags)}function Ri(a){return!!a.template}function Dl(a){return 0!=(256&a[jt])}function Jo(a,l){return a.hasOwnProperty(Zr)?a[Zr]:null}class Qo{constructor(l,u,h){this.previousValue=l,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Pc(){return $a}function $a(a){return a.type.prototype.ngOnChanges&&(a.setInput=Ga),Fc}function Fc(){const a=Il(this),l=a?.current;if(l){const u=a.previous;if(u===Or)a.previous=l;else for(let h in l)u[h]=l[h];a.current=null,this.ngOnChanges(l)}}function Ga(a,l,u,h){const p=this.declaredInputs[u],m=Il(a)||function ad(a,l){return a[Xo]=l}(a,{previous:Or,current:null}),b=m.current||(m.current={}),T=m.previous,D=T[p];b[p]=new Qo(D&&D.currentValue,l,T===Or),a[h]=l}Pc.ngInherit=!0;const Xo="__ngSimpleChanges__";function Il(a){return a[Xo]||null}const Oi=function(a,l,u){};function Xn(a){for(;Array.isArray(a);)a=a[zi];return a}function ea(a,l){return Xn(l[a])}function cr(a,l){return Xn(l[a.index])}function Wa(a,l){return a.data[l]}function ta(a,l){return a[l]}function _r(a,l){const u=l[a];return ki(u)?u:u[zi]}function Ka(a){return 64==(64&a[jt])}function qs(a,l){return null==l?null:a[l]}function Nl(a){a[Wo]=0}function xl(a,l){a[$s]+=l;let u=a,h=a[On];for(;null!==h&&(1===l&&1===u[$s]||-1===l&&0===u[$s]);)h[$s]+=l,u=h,h=h[On]}const Ft={lFrame:e0(null),bindingsEnabled:!0};function jc(){return Ft.bindingsEnabled}function we(){return Ft.lFrame.lView}function an(){return Ft.lFrame.tView}function hd(a){return Ft.lFrame.contextLView=a,a[Hn]}function kh(a){return Ft.lFrame.contextLView=null,a}function zr(){let a=kl();for(;null!==a&&64===a.type;)a=a.parent;return a}function kl(){return Ft.lFrame.currentTNode}function Hc(){const a=Ft.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}function Mi(a,l){const u=Ft.lFrame;u.currentTNode=a,u.isParent=l}function $c(){return Ft.lFrame.isParent}function Gc(){Ft.lFrame.isParent=!1}function yr(){const a=Ft.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Pi(){return Ft.lFrame.bindingIndex}function na(){return Ft.lFrame.bindingIndex++}function Is(a){const l=Ft.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function Rl(a){Ft.lFrame.inI18n=a}function Mh(a,l){const u=Ft.lFrame;u.bindingIndex=u.bindingRootIndex=a,gd(l)}function gd(a){Ft.lFrame.currentDirectiveIndex=a}function zs(a){const l=Ft.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function Ph(){return Ft.lFrame.currentQueryIndex}function md(a){Ft.lFrame.currentQueryIndex=a}function Fh(a){const l=a[st];return 2===l.type?l.declTNode:1===l.type?a[ar]:null}function Lp(a,l,u){if(u&vt.SkipSelf){let p=l,m=a;for(;!(p=p.parent,null!==p||u&vt.Host||(p=Fh(m),null===p||(m=m[hs],10&p.type))););if(null===p)return!1;l=p,a=m}const h=Ft.lFrame=Up();return h.currentTNode=l,h.lView=a,!0}function qc(a){const l=Up(),u=a[st];Ft.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function Up(){const a=Ft.lFrame,l=null===a?null:a.child;return null===l?e0(a):l}function e0(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function t0(){const a=Ft.lFrame;return Ft.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Lh=t0;function u_(){const a=t0();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function Ci(){return Ft.lFrame.selectedIndex}function Ya(a){Ft.lFrame.selectedIndex=a}function Mn(){const a=Ft.lFrame;return Wa(a.tView,a.selectedIndex)}function Ol(a,l){for(let u=l.directiveStart,h=l.directiveEnd;u<h;u++){const m=a.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:T,ngAfterViewInit:D,ngAfterViewChecked:N,ngOnDestroy:O}=m;b&&(a.contentHooks??(a.contentHooks=[])).push(-u,b),T&&((a.contentHooks??(a.contentHooks=[])).push(u,T),(a.contentCheckHooks??(a.contentCheckHooks=[])).push(u,T)),D&&(a.viewHooks??(a.viewHooks=[])).push(-u,D),N&&((a.viewHooks??(a.viewHooks=[])).push(u,N),(a.viewCheckHooks??(a.viewCheckHooks=[])).push(u,N)),null!=O&&(a.destroyHooks??(a.destroyHooks=[])).push(u,O)}}function ra(a,l,u){Ml(a,l,3,u)}function yd(a,l,u,h){(3&a[jt])===u&&Ml(a,l,u,h)}function To(a,l){let u=a[jt];(3&u)===l&&(u&=2047,u+=1,a[jt]=u)}function Ml(a,l,u,h){const m=h??-1,b=l.length-1;let T=0;for(let D=void 0!==h?65535&a[Wo]:0;D<b;D++)if("number"==typeof l[D+1]){if(T=l[D],null!=h&&T>=h)break}else l[D]<0&&(a[Wo]+=65536),(T<m||-1==m)&&(Pl(a,u,l,D),a[Wo]=(4294901760&a[Wo])+D+2),D++}function Pl(a,l,u,h){const p=u[h]<0,m=u[h+1],T=a[p?-u[h]:u[h]];if(p){if(a[jt]>>11<a[Wo]>>16&&(3&a[jt])===l){a[jt]+=2048,Oi(4,T,m);try{m.call(T)}finally{Oi(5,T,m)}}}else{Oi(4,T,m);try{m.call(T)}finally{Oi(5,T,m)}}}const Qa=-1;class Eo{constructor(l,u,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function $n(a,l,u){let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const m=u[h++],b=u[h++],T=u[h++];a.setAttribute(l,b,T,m)}else{const m=p,b=u[++h];Ws(m)?a.setProperty(l,m,b):a.setAttribute(l,m,b),h++}}return h}function Ll(a){return 3===a||4===a||6===a}function Ws(a){return 64===a.charCodeAt(0)}function Ks(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let h=0;h<l.length;h++){const p=l[h];"number"==typeof p?u=p:0===u||Xa(a,u,p,null,-1===u||2===u?l[++h]:null)}}return a}function Xa(a,l,u,h,p){let m=0,b=a.length;if(-1===l)b=-1;else for(;m<a.length;){const T=a[m++];if("number"==typeof T){if(T===l){b=-1;break}if(T>l){b=m-1;break}}}for(;m<a.length;){const T=a[m];if("number"==typeof T)break;if(T===u){if(null===h)return void(null!==p&&(a[m+1]=p));if(h===a[m+1])return void(a[m+2]=p)}m++,null!==h&&m++,null!==p&&m++}-1!==b&&(a.splice(b,0,l),m=b+1),a.splice(m++,0,u),null!==h&&a.splice(m++,0,h),null!==p&&a.splice(m++,0,p)}function vd(a){return a!==Qa}function Ul(a){return 32767&a}function Kc(a,l){let u=function Wc(a){return a>>16}(a),h=l;for(;u>0;)h=h[hs],u--;return h}let Do=!0;function el(a){const l=Do;return Do=a,l}const Bl=255,Vl=5;let Yc=0;const Kr={};function nl(a,l){const u=Hl(a,l);if(-1!==u)return u;const h=l[st];h.firstCreatePass&&(a.injectorIndex=l.length,So(h.data,a),So(l,null),So(h.blueprint,null));const p=Jc(a,l),m=a.injectorIndex;if(vd(p)){const b=Ul(p),T=Kc(p,l),D=T[st].data;for(let N=0;N<8;N++)l[m+N]=T[b+N]|D[b+N]}return l[m+8]=p,m}function So(a,l){a.push(0,0,0,0,0,0,0,0,l)}function Hl(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function Jc(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,h=null,p=l;for(;null!==p;){if(h=wd(p),null===h)return Qa;if(u++,p=p[hs],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return Qa}function $l(a,l,u){!function jl(a,l,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Es)&&(h=u[Es]),null==h&&(h=u[Es]=Yc++);const p=h&Bl;l.data[a+(p>>Vl)]|=1<<p}(a,l,u)}function oa(a,l,u){if(u&vt.Optional||void 0!==a)return a;ze()}function Gl(a,l,u,h){if(u&vt.Optional&&void 0===h&&(h=null),!(u&(vt.Self|vt.Host))){const p=a[Ua],m=jn(void 0);try{return p?p.get(l,h,u&vt.Optional):ti(l,h,u&vt.Optional)}finally{jn(m)}}return oa(h,0,u)}function jh(a,l,u,h=vt.Default,p){if(null!==a){if(1024&l[jt]){const b=function Gh(a,l,u,h,p){let m=a,b=l;for(;null!==m&&null!==b&&1024&b[jt]&&!(256&b[jt]);){const T=As(m,b,u,h|vt.Self,Kr);if(T!==Kr)return T;let D=m.parent;if(!D){const N=b[bi];if(N){const O=N.get(u,Kr,h);if(O!==Kr)return O}D=wd(b),b=b[hs]}m=D}return p}(a,l,u,h,Kr);if(b!==Kr)return b}const m=As(a,l,u,h,Kr);if(m!==Kr)return m}return Gl(l,u,h,p)}function As(a,l,u,h,p){const m=function Hh(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(Es)?a[Es]:void 0;return"number"==typeof l?l>=0?l&Bl:f_:l}(u);if("function"==typeof m){if(!Lp(l,a,h))return h&vt.Host?oa(p,0,h):Gl(l,u,h,p);try{const b=m(h);if(null!=b||h&vt.Optional)return b;ze()}finally{Lh()}}else if("number"==typeof m){let b=null,T=Hl(a,l),D=Qa,N=h&vt.Host?l[ii][ar]:null;for((-1===T||h&vt.SkipSelf)&&(D=-1===T?Jc(a,l):l[T+8],D!==Qa&&Ys(h,!1)?(b=l[st],T=Ul(D),l=Kc(D,l)):T=-1);-1!==T;){const O=l[st];if(Xc(m,T,O.data)){const B=Qc(T,l,u,b,h,N);if(B!==Kr)return B}D=l[T+8],D!==Qa&&Ys(h,l[st].data[T+8]===N)&&Xc(m,T,l)?(b=O,T=Ul(D),l=Kc(D,l)):T=-1}}return p}function Qc(a,l,u,h,p,m){const b=l[st],T=b.data[a+8],O=aa(T,b,u,null==h?fs(T)&&Do:h!=b&&0!=(3&T.type),p&vt.Host&&m===T);return null!==O?Ns(l,b,O,T):Kr}function aa(a,l,u,h,p){const m=a.providerIndexes,b=l.data,T=1048575&m,D=a.directiveStart,O=m>>20,J=p?T+O:a.directiveEnd;for(let re=h?T:T+O;re<J;re++){const De=b[re];if(re<D&&u===De||re>=D&&De.type===u)return re}if(p){const re=b[D];if(re&&Ri(re)&&re.type===u)return D}return null}function Ns(a,l,u,h){let p=a[u];const m=l.data;if(function Ji(a){return a instanceof Eo}(p)){const b=p;b.resolving&&function ke(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new be(-200,`Circular dependency in DI detected for ${a}${u}`)}(function Ge(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():xe(a)}(m[u]));const T=el(b.canSeeViewProviders);b.resolving=!0;const D=b.injectImpl?jn(b.injectImpl):null;Lp(a,h,vt.Default);try{p=a[u]=b.factory(void 0,m,a,h),l.firstCreatePass&&u>=h.directiveStart&&function h_(a,l,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:m}=l.type.prototype;if(h){const b=$a(l);(u.preOrderHooks??(u.preOrderHooks=[])).push(a,b),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(a,b)}p&&(u.preOrderHooks??(u.preOrderHooks=[])).push(0-a,p),m&&((u.preOrderHooks??(u.preOrderHooks=[])).push(a,m),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(a,m))}(u,m[u],l)}finally{null!==D&&jn(D),el(T),b.resolving=!1,Lh()}}return p}function Xc(a,l,u){return!!(u[l+(a>>Vl)]&1<<a)}function Ys(a,l){return!(a&vt.Self||a&vt.Host&&l)}class ps{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,h){return jh(this._tNode,this._lView,l,K(h),u)}}function f_(){return new ps(zr(),we())}function $h(a){return An(()=>{const l=a.prototype.constructor,u=l[Zr]||eu(l),h=Object.prototype;let p=Object.getPrototypeOf(a.prototype).constructor;for(;p&&p!==h;){const m=p[Zr]||eu(p);if(m&&m!==u)return m;p=Object.getPrototypeOf(p)}return m=>new m})}function eu(a){return Ye(a)?()=>{const l=eu(ee(a));return l&&l()}:Jo(a)}function wd(a){const l=a[st],u=l.type;return 2===u?l.declTNode:1===u?a[ar]:null}function tu(a){return function bd(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const m=u[p];if(Ll(m))break;if(0===m)p+=2;else if("number"==typeof m)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(m===l)return u[p+1];p+=2}}}return null}(zr(),a)}const rl="__parameters__";function Zl(a,l,u){return An(()=>{const h=function jp(a){return function(...u){if(a){const h=a(...u);for(const p in h)this[p]=h[p]}}}(l);function p(...m){if(this instanceof p)return h.apply(this,m),this;const b=new p(...m);return T.annotation=b,T;function T(D,N,O){const B=D.hasOwnProperty(rl)?D[rl]:Object.defineProperty(D,rl,{value:[]})[rl];for(;B.length<=O;)B.push(null);return(B[O]=B[O]||[]).push(b),D}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=a,p.annotationCls=p,p})}class sn{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Xe({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function xs(a,l){a.forEach(u=>Array.isArray(u)?xs(u,l):l(u))}function au(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function ql(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function il(a,l){const u=[];for(let h=0;h<a;h++)u.push(l);return u}function Ti(a,l,u){let h=vr(a,l);return h>=0?a[1|h]=u:(h=~h,function Wh(a,l,u,h){let p=a.length;if(p==l)a.push(u,h);else if(1===p)a.push(h,a[0]),a[0]=u;else{for(p--,a.push(a[p-1],a[p]);p>l;)a[p]=a[p-2],p--;a[l]=u,a[l+1]=h}}(a,h,l,u)),h}function Ut(a,l){const u=vr(a,l);if(u>=0)return a[1|u]}function vr(a,l){return function dn(a,l,u){let h=0,p=a.length>>u;for(;p!==h;){const m=h+(p-h>>1),b=a[m<<u];if(l===b)return m<<u;b>l?p=m:h=m+1}return~(p<<u)}(a,l,1)}const uu=Je(Zl("Optional"),8),S=Je(Zl("SkipSelf"),4);var It=(()=>((It=It||{})[It.Important=1]="Important",It[It.DashCase=2]="DashCase",It))();const Sd=/^>|^->|<!--|-->|--!>|<!-$/g,s0=/(<|>)/,du="\u200b$1\u200b";const Id=new Map;let Ao=0;const nf="__ngContext__";function ui(a,l){ki(l)?(a[nf]=l[Gs],function y_(a){Id.set(a[Gs],a)}(l)):a[nf]=l}let Xp;function Xl(a,l){return Xp(a,l)}function xd(a){const l=a[On];return Yi(l)?l[On]:l}function sf(a){return eg(a[bo])}function pu(a){return eg(a[vi])}function eg(a){for(;null!==a&&!Yi(a);)a=a[vi];return a}function No(a,l,u,h,p){if(null!=h){let m,b=!1;Yi(h)?m=h:ki(h)&&(b=!0,h=h[zi]);const T=Xn(h);0===a&&null!==u?null==p?ig(l,u,T):ll(l,u,T,p||null,!0):1===a&&null!==u?ll(l,u,T,p||null,!0):2===a?Fd(l,T,b):3===a&&l.destroyNode(T),null!=m&&function yu(a,l,u,h,p){const m=u[Va];m!==Xn(u)&&No(l,a,h,m,p);for(let T=oi;T<u.length;T++){const D=u[T];_u(D[st],D,a,l,h,m)}}(l,a,m,u,p)}}function gu(a,l){return a.createText(l)}function tg(a,l,u){a.setValue(l,u)}function af(a,l){return a.createComment(function __(a){return a.replace(Sd,l=>l.replace(s0,du))}(l))}function Rd(a,l,u){return a.createElement(l,u)}function ng(a,l){const u=a[si],h=u.indexOf(l),p=l[On];512&l[jt]&&(l[jt]&=-513,xl(p,-1)),u.splice(h,1)}function rg(a,l){if(a.length<=oi)return;const u=oi+l,h=a[u];if(h){const p=h[Ba];null!==p&&p!==a&&ng(p,h),l>0&&(a[u-1][vi]=h[vi]);const m=ql(a,oi+l);!function a0(a,l){_u(a,l,l[Zt],2,null,null),l[zi]=null,l[ar]=null}(h[st],h);const b=m[Wi];null!==b&&b.detachView(m[st]),h[On]=null,h[vi]=null,h[jt]&=-65}return h}function lf(a,l){if(!(128&l[jt])){const u=l[Zt];u.destroyNode&&_u(a,l,u,3,null,null),function c0(a){let l=a[bo];if(!l)return mu(a[st],a);for(;l;){let u=null;if(ki(l))u=l[bo];else{const h=l[oi];h&&(u=h)}if(!u){for(;l&&!l[vi]&&l!==a;)ki(l)&&mu(l[st],l),l=l[On];null===l&&(l=a),ki(l)&&mu(l[st],l),u=l&&l[vi]}l=u}}(l)}}function mu(a,l){if(!(128&l[jt])){l[jt]&=-65,l[jt]|=128,function eo(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let h=0;h<u.length;h+=2){const p=l[u[h]];if(!(p instanceof Eo)){const m=u[h+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const T=p[m[b]],D=m[b+1];Oi(4,T,D);try{D.call(T)}finally{Oi(5,T,D)}}else{Oi(4,p,m);try{m.call(p)}finally{Oi(5,p,m)}}}}}(a,l),function h0(a,l){const u=a.cleanup,h=l[lr];let p=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const b=u[m+3];b>=0?h[p=b]():h[p=-b].unsubscribe(),m+=2}else{const b=h[p=u[m+1]];u[m].call(b)}if(null!==h){for(let m=p+1;m<h.length;m++)(0,h[m])();l[lr]=null}}(a,l),1===l[st].type&&l[Zt].destroy();const u=l[Ba];if(null!==u&&Yi(l[On])){u!==l[On]&&ng(u,l);const h=l[Wi];null!==h&&h.detachView(a)}!function C1(a){Id.delete(a[Gs])}(l)}}function cf(a,l,u){return w_(a,l.parent,u)}function w_(a,l,u){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return u[zi];{const{componentOffset:p}=h;if(p>-1){const{encapsulation:m}=a.data[h.directiveStart+p];if(m===Qn.None||m===Qn.Emulated)return null}return cr(h,u)}}function ll(a,l,u,h,p){a.insertBefore(l,u,h,p)}function ig(a,l,u){a.appendChild(l,u)}function C_(a,l,u,h,p){null!==h?ll(a,l,u,h,p):ig(a,l,u)}function to(a,l){return a.parentNode(l)}function df(a,l,u){return pa(a,l,u)}function sg(a,l,u){return 40&a.type?cr(a,u):null}let og,Cr,pf,mf,pa=sg;function Qi(a,l){pa=a,og=l}function ga(a,l,u,h){const p=cf(a,h,l),m=l[Zt],T=df(h.parent||l[ar],h,l);if(null!=p)if(Array.isArray(u))for(let D=0;D<u.length;D++)C_(m,p,u[D],T,!1);else C_(m,p,u,T,!1);void 0!==og&&og(m,h,l,u,p)}function Pd(a,l){if(null!==l){const u=l.type;if(3&u)return cr(l,a);if(4&u)return xo(-1,a[l.index]);if(8&u){const h=l.child;if(null!==h)return Pd(a,h);{const p=a[l.index];return Yi(p)?xo(-1,p):Xn(p)}}if(32&u)return Xl(l,a)()||Xn(a[l.index]);{const h=hf(a,l);return null!==h?Array.isArray(h)?h[0]:Pd(xd(a[ii]),h):Pd(a,l.next)}}return null}function hf(a,l){return null!==l?a[ii][ar].projection[l.projection]:null}function xo(a,l){const u=oi+a+1;if(u<l.length){const h=l[u],p=h[st].firstChild;if(null!==p)return Pd(h,p)}return l[Va]}function Fd(a,l,u){const h=to(a,l);h&&function Od(a,l,u,h){a.removeChild(l,u,h)}(a,h,l,u)}function Ld(a,l,u,h,p,m,b){for(;null!=u;){const T=h[u.index],D=u.type;if(b&&0===l&&(T&&ui(Xn(T),h),u.flags|=2),32!=(32&u.flags))if(8&D)Ld(a,l,u.child,h,p,m,!1),No(l,a,p,T,m);else if(32&D){const N=Xl(u,h);let O;for(;O=N();)No(l,a,p,O,m);No(l,a,p,T,m)}else 16&D?ko(a,l,h,u,p,m):No(l,a,p,T,m);u=b?u.projectionNext:u.next}}function _u(a,l,u,h,p,m){Ld(u,h,a.firstChild,l,p,m,!1)}function ko(a,l,u,h,p,m){const b=u[ii],D=b[ar].projection[h.projection];if(Array.isArray(D))for(let N=0;N<D.length;N++)No(l,a,p,D[N],m);else Ld(a,l,D,b[On],p,m,!0)}function cl(a,l,u){""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u)}function vu(a,l,u){const{mergedAttrs:h,classes:p,styles:m}=u;null!==h&&$n(a,l,h),null!==p&&cl(a,l,p),null!==m&&function ag(a,l,u){a.setAttribute(l,"style",u)}(a,l,m)}function ul(a){return function tc(){if(void 0===Cr&&(Cr=null,wn.trustedTypes))try{Cr=wn.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return Cr}()?.createHTML(a)||a}function p0(a){pf=a}function gf(){return void 0!==pf?pf:typeof document<"u"?document:void 0}function lg(){if(void 0===mf&&(mf=null,wn.trustedTypes))try{mf=wn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return mf}function D_(a){return lg()?.createHTML(a)||a}function v(a){return lg()?.createScriptURL(a)||a}class g{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ut})`}}class _ extends g{getTypeName(){return"HTML"}}class C extends g{getTypeName(){return"Style"}}class x extends g{getTypeName(){return"Script"}}class P extends g{getTypeName(){return"URL"}}class Y extends g{getTypeName(){return"ResourceURL"}}function ue(a){return a instanceof g?a.changingThisBreaksApplicationSecurity:a}function Be(a,l){const u=function ot(a){return a instanceof g&&a.getTypeName()||null}(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see ${ut})`)}return u===l}function Nt(a){return new _(a)}function Dt(a){return new C(a)}function Ur(a){return new x(a)}function Ei(a){return new P(a)}function Ud(a){return new Y(a)}function ug(a){const l=new dg(a);return function _f(){try{return!!(new window.DOMParser).parseFromString(ul(""),"text/html")}catch{return!1}}()?new bu(l):l}class bu{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(ul(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch{return null}}}class dg{constructor(l){this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(l){const u=this.inertDocument.createElement("template");return u.innerHTML=ul(l),u}}const yf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function nc(a){return(a=String(a)).match(yf)?a:"unsafe:"+a}function Rs(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function rc(...a){const l={};for(const u of a)for(const h in u)u.hasOwnProperty(h)&&(l[h]=!0);return l}const ic=Rs("area,br,col,hr,img,wbr"),S_=Rs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),vf=Rs("rp,rt"),A_=rc(ic,rc(S_,Rs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),rc(vf,Rs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rc(vf,S_)),N_=Rs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hg=rc(N_,Rs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Rs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),k_=Rs("script,style,template");class AA{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let p=this.checkClobberedElement(u,u.nextSibling);if(p){u=p;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!A_.hasOwnProperty(u))return this.sanitizedSomething=!0,!k_.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=l.attributes;for(let p=0;p<h.length;p++){const m=h.item(p),b=m.name,T=b.toLowerCase();if(!hg.hasOwnProperty(T)){this.sanitizedSomething=!0;continue}let D=m.value;N_[T]&&(D=nc(D)),this.buf.push(" ",b,'="',m0(D),'"')}return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();A_.hasOwnProperty(u)&&!ic.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(m0(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const NA=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g0=/([^\#-~ |!])/g;function m0(a){return a.replace(/&/g,"&amp;").replace(NA,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(g0,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let _0;function xA(a,l){let u=null;try{_0=_0||ug(a);let h=l?String(l):"";u=_0.getInertBodyElement(h);let p=5,m=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=m,m=u.innerHTML,u=_0.getInertBodyElement(h)}while(h!==m);return ul((new AA).sanitizeChildren(T1(u)||u))}finally{if(u){const h=T1(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function T1(a){return"content"in a&&function ML(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var hr=(()=>((hr=hr||{})[hr.NONE=0]="NONE",hr[hr.HTML=1]="HTML",hr[hr.STYLE=2]="STYLE",hr[hr.SCRIPT=3]="SCRIPT",hr[hr.URL=4]="URL",hr[hr.RESOURCE_URL=5]="RESOURCE_URL",hr))();function E1(a){const l=pg();return l?D_(l.sanitize(hr.HTML,a)||""):Be(a,"HTML")?D_(ue(a)):xA(gf(),xe(a))}function D1(a){const l=pg();return l?l.sanitize(hr.URL,a)||"":Be(a,"URL")?ue(a):nc(xe(a))}function R_(a){const l=pg();if(l)return v(l.sanitize(hr.RESOURCE_URL,a)||"");if(Be(a,"ResourceURL"))return v(ue(a));throw new be(904,!1)}function I1(a,l,u){return function RA(a,l){return"src"===l&&("embed"===a||"frame"===a||"iframe"===a||"media"===a||"script"===a)||"href"===l&&("base"===a||"link"===a)?R_:D1}(l,u)(a)}function pg(){const a=we();return a&&a[ed]}const v0=new sn("ENVIRONMENT_INITIALIZER"),Bd=new sn("INJECTOR",-1),bf=new sn("INJECTOR_DEF_TYPES");class A1{get(l,u=ds){if(u===ds){const h=new Error(`NullInjectorError: No provider for ${ye(l)}!`);throw h.name="NullInjectorError",h}return u}}function MA(a){return{\u0275providers:a}}function gg(...a){return{\u0275providers:wf(0,a),\u0275fromNgModule:!0}}function wf(a,...l){const u=[],h=new Set;let p;return xs(l,m=>{const b=m;b0(b,u,[],h)&&(p||(p=[]),p.push(b))}),void 0!==p&&N1(p,u),u}function N1(a,l){for(let u=0;u<a.length;u++){const{providers:p}=a[u];w0(p,m=>{l.push(m)})}}function b0(a,l,u,h){if(!(a=ee(a)))return!1;let p=null,m=Rr(a);const b=!m&&pn(a);if(m||b){if(b&&!b.standalone)return!1;p=a}else{const D=a.ngModule;if(m=Rr(D),!m)return!1;p=D}const T=h.has(p);if(b){if(T)return!1;if(h.add(p),b.dependencies){const D="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const N of D)b0(N,l,u,h)}}else{if(!m)return!1;{if(null!=m.imports&&!T){let N;h.add(p);try{xs(m.imports,O=>{b0(O,l,u,h)&&(N||(N=[]),N.push(O))})}finally{}void 0!==N&&N1(N,l)}if(!T){const N=Jo(p)||(()=>new p);l.push({provide:p,useFactory:N,deps:tn},{provide:bf,useValue:p,multi:!0},{provide:v0,useValue:()=>$(p),multi:!0})}const D=m.providers;null==D||T||w0(D,O=>{l.push(O)})}}return p!==a&&void 0!==a.providers}function w0(a,l){for(let u of a)Re(u)&&(u=u.\u0275providers),Array.isArray(u)?w0(u,l):l(u)}const PA=ie({provide:String,useValue:ie});function C0(a){return null!==a&&"object"==typeof a&&PA in a}function sc(a){return"function"==typeof a}const wu=new sn("Set Injector scope."),M_={},LA={};let T0;function P_(){return void 0===T0&&(T0=new A1),T0}class Vd{}class k1 extends Vd{get destroyed(){return this._destroyed}constructor(l,u,h,p){super(),this.parent=u,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Tf(l,b=>this.processProvider(b)),this.records.set(Bd,Cf(void 0,this)),p.has("environment")&&this.records.set(Vd,Cf(void 0,this));const m=this.records.get(wu);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(bf.multi,tn,vt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const u=en(this),h=jn(void 0);try{return l()}finally{en(u),jn(h)}}get(l,u=ds,h=vt.Default){this.assertNotDestroyed(),h=K(h);const p=en(this),m=jn(void 0);try{if(!(h&vt.SkipSelf)){let T=this.records.get(l);if(void 0===T){const D=function I0(a){return"function"==typeof a||"object"==typeof a&&a instanceof sn}(l)&&Jt(l);T=D&&this.injectableDefInScope(D)?Cf(E0(l),M_):null,this.records.set(l,T)}if(null!=T)return this.hydrate(l,T)}return(h&vt.Self?P_():this.parent).get(l,u=h&vt.Optional&&u===ds?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[zn]=b[zn]||[]).unshift(ye(l)),p)throw b;return function In(a,l,u,h){const p=a[zn];throw l[mn]&&p.unshift(l[mn]),a.message=function _n(a,l,u,h=null){a=a&&"\n"===a.charAt(0)&&a.charAt(1)==Ma?a.slice(2):a;let p=ye(l);if(Array.isArray(l))p=l.map(ye).join(" -> ");else if("object"==typeof l){let m=[];for(let b in l)if(l.hasOwnProperty(b)){let T=l[b];m.push(b+":"+("string"==typeof T?JSON.stringify(T):ye(T)))}p=`{${m.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${a.replace(Gr,"\n  ")}`}("\n"+a.message,p,u,h),a[js]=p,a[zn]=null,a}(b,l,"R3InjectorError",this.source)}throw b}finally{jn(m),en(p)}}resolveInjectorInitializers(){const l=en(this),u=jn(void 0);try{const h=this.get(v0.multi,tn,vt.Self);for(const p of h)p()}finally{en(l),jn(u)}}toString(){const l=[],u=this.records;for(const h of u.keys())l.push(ye(h));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(l){let u=sc(l=ee(l))?l:ee(l&&l.provide);const h=function BA(a){return C0(a)?Cf(void 0,a.useValue):Cf(D0(a),M_)}(l);if(sc(l)||!0!==l.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=Cf(void 0,M_,!0),p.factory=()=>Ne(p.multi),this.records.set(u,p)),u=l,p.multi.push(l)}this.records.set(u,h)}hydrate(l,u){return u.value===M_&&(u.value=LA,u.value=u.factory()),"object"==typeof u.value&&u.value&&function R1(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=ee(l.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function E0(a){const l=Jt(a),u=null!==l?l.factory:Jo(a);if(null!==u)return u;if(a instanceof sn)throw new be(204,!1);if(a instanceof Function)return function UA(a){const l=a.length;if(l>0)throw il(l,"?"),new be(204,!1);const u=function gr(a){return a&&(a[Ln]||a[Ni])||null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new be(204,!1)}function D0(a,l,u){let h;if(sc(a)){const p=ee(a);return Jo(p)||E0(p)}if(C0(a))h=()=>ee(a.useValue);else if(function x1(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...Ne(a.deps||[]));else if(function FA(a){return!(!a||!a.useExisting)}(a))h=()=>$(ee(a.useExisting));else{const p=ee(a&&(a.useClass||a.provide));if(!function S0(a){return!!a.deps}(a))return Jo(p)||E0(p);h=()=>new p(...Ne(a.deps))}return h}function Cf(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function Tf(a,l){for(const u of a)Array.isArray(u)?Tf(u,l):u&&Re(u)?Tf(u.\u0275providers,l):l(u)}class VA{}class O1{}class P1{resolveComponentFactory(l){throw function jA(a){const l=Error(`No component factory found for ${ye(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let Ef=(()=>{class a{}return a.NULL=new P1,a})();function F_(){return oc(zr(),we())}function oc(a,l){return new Df(cr(a,l))}let Df=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=F_,a})();function mg(a){return a instanceof Df?a.nativeElement:a}class N0{}let HA=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function $A(){const a=we(),u=_r(zr().index,a);return(ki(u)?u:a)[Zt]}(),a})(),GA=(()=>{class a{}return a.\u0275prov=Xe({token:a,providedIn:"root",factory:()=>null}),a})();class F1{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const L1=new F1("15.2.10"),L_={},x0="ngOriginalError";function k0(a){return a[x0]}class _g{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l);this._console.error("ERROR",l),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&k0(l);for(;u&&k0(u);)u=k0(u);return u||null}}function dl(a){return a instanceof Function?a():a}function $1(a,l,u){let h=a.length;for(;;){const p=a.indexOf(l,u);if(-1===p)return p;if(0===p||a.charCodeAt(p-1)<=32){const m=l.length;if(p+m===h||a.charCodeAt(p+m)<=32)return p}u=p+1}}const R0="ng-template";function O0(a,l,u){let h=0,p=!0;for(;h<a.length;){let m=a[h++];if("string"==typeof m&&p){const b=a[h++];if(u&&"class"===m&&-1!==$1(b.toLowerCase(),l,0))return!0}else{if(1===m){for(;h<a.length&&"string"==typeof(m=a[h++]);)if(m.toLowerCase()===l)return!0;return!1}"number"==typeof m&&(p=!1)}}return!1}function M0(a){return 4===a.type&&a.value!==R0}function Sf(a,l,u){return l===(4!==a.type||u?a.value:R0)}function P0(a,l,u){let h=4;const p=a.attrs||[],m=function Z1(a){for(let l=0;l<a.length;l++)if(Ll(a[l]))return l;return a.length}(p);let b=!1;for(let T=0;T<l.length;T++){const D=l[T];if("number"!=typeof D){if(!b)if(4&h){if(h=2|1&h,""!==D&&!Sf(a,D,u)||""===D&&1===l.length){if(_a(h))return!1;b=!0}}else{const N=8&h?D:l[++T];if(8&h&&null!==a.attrs){if(!O0(a.attrs,N,u)){if(_a(h))return!1;b=!0}continue}const B=G1(8&h?"class":D,p,M0(a),u);if(-1===B){if(_a(h))return!1;b=!0;continue}if(""!==N){let J;J=B>m?"":p[B+1].toLowerCase();const re=8&h?J:null;if(re&&-1!==$1(re,N,0)||2&h&&N!==J){if(_a(h))return!1;b=!0}}}}else{if(!b&&!_a(h)&&!_a(D))return!1;if(b&&_a(D))continue;b=!1,h=D|1&h}}return _a(h)||b}function _a(a){return 0==(1&a)}function G1(a,l,u,h){if(null===l)return-1;let p=0;if(h||!u){let m=!1;for(;p<l.length;){const b=l[p];if(b===a)return p;if(3===b||6===b)m=!0;else{if(1===b||2===b){let T=l[++p];for(;"string"==typeof T;)T=l[++p];continue}if(4===b)break;if(0===b){p+=4;continue}}p+=m?1:2}return-1}return function q1(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const h=a[u];if("number"==typeof h)return-1;if(h===l)return u;u++}return-1}(l,a)}function vg(a,l,u=!1){for(let h=0;h<l.length;h++)if(P0(a,l[h],u))return!0;return!1}function JA(a,l){e:for(let u=0;u<l.length;u++){const h=l[u];if(a.length===h.length){for(let p=0;p<a.length;p++)if(a[p]!==h[p])continue e;return!0}}return!1}function z1(a,l){return a?":not("+l.trim()+")":l}function QA(a){let l=a[0],u=1,h=2,p="",m=!1;for(;u<a.length;){let b=a[u];if("string"==typeof b)if(2&h){const T=a[++u];p+="["+b+(T.length>0?'="'+T+'"':"")+"]"}else 8&h?p+="."+b:4&h&&(p+=" "+b);else""!==p&&!_a(b)&&(l+=z1(m,p),p=""),h=b,m=m||!_a(h);u++}return""!==p&&(l+=z1(m,p)),l}const Ht={};function W1(a){K1(an(),we(),Ci()+a,!1)}function K1(a,l,u,h){if(!h)if(3==(3&l[jt])){const m=a.preOrderCheckHooks;null!==m&&ra(l,m,u)}else{const m=a.preOrderHooks;null!==m&&yd(l,m,0,u)}Ya(u)}function J1(a,l=null,u=null,h){const p=L0(a,l,u,h);return p.resolveInjectorInitializers(),p}function L0(a,l=null,u=null,h,p=new Set){const m=[u||tn,gg(a)];return h=h||("object"==typeof a?void 0:ye(a)),new k1(m,l||P_(),h||null,p)}let If=(()=>{class a{static create(u,h){if(Array.isArray(u))return J1({name:""},h,u,"");{const p=u.name??"";return J1({name:p},u.parent,u.providers,p)}}}return a.THROW_IF_NOT_FOUND=ds,a.NULL=new A1,a.\u0275prov=Xe({token:a,providedIn:"any",factory:()=>$(Bd)}),a.__NG_ELEMENT_ID__=-1,a})();function xf(a,l=vt.Default){const u=we();return null===u?$(a,l):jh(zr(),u,ee(a),l)}function rT(){throw new Error("invalid")}function iT(a,l){const u=a.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const m=u[h+1];if(-1!==m){const b=a.data[m];md(u[h]),b.contentQueries(2,l[m],m)}}}function j_(a,l,u,h,p,m,b,T,D,N,O){const B=l.blueprint.slice();return B[zi]=p,B[jt]=76|h,(null!==O||a&&1024&a[jt])&&(B[jt]|=1024),Nl(B),B[On]=B[hs]=a,B[Hn]=u,B[mr]=b||a&&a[mr],B[Zt]=T||a&&a[Zt],B[ed]=D||a&&a[ed]||null,B[Ua]=N||a&&a[Ua]||null,B[ar]=m,B[Gs]=function ef(){return Ao++}(),B[bi]=O,B[ii]=2==l.type?a[ii]:B,B}function Tg(a,l,u,h,p){let m=a.data[l];if(null===m)m=H_(a,l,u,h,p),function Oh(){return Ft.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=u,m.value=h,m.attrs=p;const b=Hc();m.injectorIndex=null===b?-1:b.injectorIndex}return Mi(m,!0),m}function H_(a,l,u,h,p){const m=kl(),b=$c(),D=a.data[l]=function qL(a,l,u,h,p,m){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,u,l,h,p);return null===a.firstChild&&(a.firstChild=D),null!==m&&(b?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D,D.prev=m)),D}function Eg(a,l,u,h){if(0===u)return-1;const p=l.length;for(let m=0;m<u;m++)l.push(h),a.blueprint.push(h),a.data.push(null);return p}function ya(a,l,u){qc(l);try{const h=a.viewQuery;null!==h&&W0(1,h,u);const p=a.template;null!==p&&H0(a,l,p,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&iT(a,l),a.staticViewQueries&&W0(2,a.viewQuery,u);const m=a.components;null!==m&&function sT(a,l){for(let u=0;u<l.length;u++)MN(a,l[u])}(l,m)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{l[jt]&=-5,u_()}}function $_(a,l,u,h){const p=l[jt];if(128!=(128&p)){qc(l);try{Nl(l),function Co(a){return Ft.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&H0(a,l,u,2,h);const b=3==(3&p);if(b){const N=a.preOrderCheckHooks;null!==N&&ra(l,N,null)}else{const N=a.preOrderHooks;null!==N&&yd(l,N,0,null),To(l,0)}if(function RN(a){for(let l=sf(a);null!==l;l=pu(l)){if(!l[Ih])continue;const u=l[si];for(let h=0;h<u.length;h++){const p=u[h];512&p[jt]||xl(p[On],1),p[jt]|=512}}}(l),function kN(a){for(let l=sf(a);null!==l;l=pu(l))for(let u=oi;u<l.length;u++){const h=l[u],p=h[st];Ka(h)&&$_(p,h,p.template,h[Hn])}}(l),null!==a.contentQueries&&iT(a,l),b){const N=a.contentCheckHooks;null!==N&&ra(l,N)}else{const N=a.contentHooks;null!==N&&yd(l,N,1),To(l,1)}!function pN(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const p=u[h];if(p<0)Ya(~p);else{const m=p,b=u[++h],T=u[++h];Mh(b,m),T(2,l[m])}}}finally{Ya(-1)}}(a,l);const T=a.components;null!==T&&function gN(a,l){for(let u=0;u<l.length;u++)ON(a,l[u])}(l,T);const D=a.viewQuery;if(null!==D&&W0(2,D,h),b){const N=a.viewCheckHooks;null!==N&&ra(l,N)}else{const N=a.viewHooks;null!==N&&yd(l,N,2),To(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[jt]&=-41,512&l[jt]&&(l[jt]&=-513,xl(l[On],-1))}finally{u_()}}}function H0(a,l,u,h,p){const m=Ci(),b=2&h;try{Ya(-1),b&&l.length>Cn&&K1(a,l,Cn,!1),Oi(b?2:0,p),u(h,p)}finally{Ya(m),Oi(b?3:1,p)}}function oT(a,l,u){if(El(l)){const p=l.directiveEnd;for(let m=l.directiveStart;m<p;m++){const b=a.data[m];b.contentQueries&&b.contentQueries(1,u[m],m)}}}function G_(a,l,u){jc()&&(function CN(a,l,u,h){const p=u.directiveStart,m=u.directiveEnd;fs(u)&&function AN(a,l,u){const h=cr(l,a),p=Z_(u),m=a[mr],b=q_(a,j_(a,p,null,u.onPush?32:16,h,l,m,m.createRenderer(h,u),null,null,null));a[l.index]=b}(l,u,a.data[p+u.componentOffset]),a.firstCreatePass||nl(u,l),ui(h,l);const b=u.initialInputs;for(let T=p;T<m;T++){const D=a.data[T],N=Ns(l,a,T,u);ui(N,l),null!==b&&NN(0,T-p,N,D,0,b),Ri(D)&&(_r(u.index,l)[Hn]=Ns(l,a,T,u))}}(a,l,u,cr(u,l)),64==(64&u.flags)&&dT(a,l,u))}function Hd(a,l,u=cr){const h=l.localNames;if(null!==h){let p=l.index+1;for(let m=0;m<h.length;m+=2){const b=h[m+1],T=-1===b?u(l,a):a[b];a[p++]=T}}}function Z_(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=aT(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function aT(a,l,u,h,p,m,b,T,D,N){const O=Cn+h,B=O+p,J=function lT(a,l){const u=[];for(let h=0;h<l;h++)u.push(h<a?null:Ht);return u}(O,B),re="function"==typeof N?N():N;return J[st]={type:a,blueprint:J,template:u,queries:null,viewQuery:T,declTNode:l,data:J.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:D,consts:re,incompleteFirstPass:!1}}function mN(a,l,u,h){const p=fT(l);null===u?p.push(h):(p.push(u),a.firstCreatePass&&pT(a).push(h,p.length-1))}function _N(a,l,u,h){for(let p in a)if(a.hasOwnProperty(p)){u=null===u?{}:u;const m=a[p];null===h?yN(u,l,p,m):h.hasOwnProperty(p)&&yN(u,l,h[p],m)}return u}function yN(a,l,u,h){a.hasOwnProperty(u)?a[u].push(l,h):a[u]=[l,h]}function Os(a,l,u,h,p,m,b,T){const D=cr(l,u);let O,N=l.inputs;!T&&null!=N&&(O=N[h])?(K0(a,u,O,h,p),fs(l)&&function $0(a,l){const u=_r(l,a);16&u[jt]||(u[jt]|=32)}(u,l.index)):3&l.type&&(h=function Dg(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),p=null!=b?b(p,l.value||"",h):p,m.setProperty(D,h,p))}function G0(a,l,u,h){if(jc()){const p=null===h?null:{"":-1},m=function EN(a,l){const u=a.directiveRegistry;let h=null,p=null;if(u)for(let m=0;m<u.length;m++){const b=u[m];if(vg(l,b.selectors,!1))if(h||(h=[]),Ri(b))if(null!==b.findHostDirectiveDefs){const T=[];p=p||new Map,b.findHostDirectiveDefs(b,T,p),h.unshift(...T,b),Z0(a,l,T.length)}else h.unshift(b),Z0(a,l,0);else p=p||new Map,b.findHostDirectiveDefs?.(b,h,p),h.push(b)}return null===h?null:[h,p]}(a,u);let b,T;null===m?b=T=null:[b,T]=m,null!==b&&uT(a,l,u,b,p,T),p&&function DN(a,l,u){if(l){const h=a.localNames=[];for(let p=0;p<l.length;p+=2){const m=u[l[p+1]];if(null==m)throw new be(-301,!1);h.push(l[p],m)}}}(u,h,p)}u.mergedAttrs=Ks(u.mergedAttrs,u.attrs)}function uT(a,l,u,h,p,m){for(let N=0;N<h.length;N++)$l(nl(u,l),a,h[N].type);!function SN(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}(u,a.data.length,h.length);for(let N=0;N<h.length;N++){const O=h[N];O.providersResolver&&O.providersResolver(O)}let b=!1,T=!1,D=Eg(a,l,h.length,null);for(let N=0;N<h.length;N++){const O=h[N];u.mergedAttrs=Ks(u.mergedAttrs,O.hostAttrs),IN(a,u,l,D,O),WL(D,O,p),null!==O.contentQueries&&(u.flags|=4),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(u.flags|=64);const B=O.type.prototype;!b&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((a.preOrderHooks??(a.preOrderHooks=[])).push(u.index),b=!0),!T&&(B.ngOnChanges||B.ngDoCheck)&&((a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(u.index),T=!0),D++}!function cT(a,l,u){const p=l.directiveEnd,m=a.data,b=l.attrs,T=[];let D=null,N=null;for(let O=l.directiveStart;O<p;O++){const B=m[O],J=u?u.get(B):null,De=J?J.outputs:null;D=_N(B.inputs,O,D,J?J.inputs:null),N=_N(B.outputs,O,N,De);const We=null===D||null===b||M0(l)?null:xN(D,O,b);T.push(We)}null!==D&&(D.hasOwnProperty("class")&&(l.flags|=8),D.hasOwnProperty("style")&&(l.flags|=16)),l.initialInputs=T,l.inputs=D,l.outputs=N}(a,u,m)}function dT(a,l,u){const h=u.directiveStart,p=u.directiveEnd,m=u.index,b=function pd(){return Ft.lFrame.currentDirectiveIndex}();try{Ya(m);for(let T=h;T<p;T++){const D=a.data[T],N=l[T];gd(T),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&TN(D,N)}}finally{Ya(-1),gd(b)}}function TN(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function Z0(a,l,u){l.componentOffset=u,(a.components??(a.components=[])).push(l.index)}function WL(a,l,u){if(u){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)u[l.exportAs[h]]=a;Ri(l)&&(u[""]=a)}}function IN(a,l,u,h,p){a.data[h]=p;const m=p.factory||(p.factory=Jo(p.type)),b=new Eo(m,Ri(p),xf);a.blueprint[h]=b,u[h]=b,function bN(a,l,u,h,p){const m=p.hostBindings;if(m){let b=a.hostBindingOpCodes;null===b&&(b=a.hostBindingOpCodes=[]);const T=~l.index;(function wN(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(b)!=T&&b.push(T),b.push(u,h,m)}}(a,l,h,Eg(a,u,p.hostVars,Ht),p)}function q0(a,l,u,h,p,m,b){if(null==m)a.removeAttribute(l,p,u);else{const T=null==b?xe(m):b(m,h||"",p);a.setAttribute(l,p,T,u)}}function NN(a,l,u,h,p,m){const b=m[l];if(null!==b){const T=h.setInput;for(let D=0;D<b.length;){const N=b[D++],O=b[D++],B=b[D++];null!==T?h.setInput(u,B,N,O):u[O]=B}}}function xN(a,l,u){let h=null,p=0;for(;p<u.length;){const m=u[p];if(0!==m)if(5!==m){if("number"==typeof m)break;if(a.hasOwnProperty(m)){null===h&&(h=[]);const b=a[m];for(let T=0;T<b.length;T+=2)if(b[T]===l){h.push(m,b[T+1],u[p+1]);break}}p+=2}else p+=2;else p+=4}return h}function hT(a,l,u,h){return[a,!0,!1,l,null,0,h,u,null,null]}function ON(a,l){const u=_r(l,a);if(Ka(u)){const h=u[st];48&u[jt]?$_(h,u,h.template,u[Hn]):u[$s]>0&&z0(u)}}function z0(a){for(let h=sf(a);null!==h;h=pu(h))for(let p=oi;p<h.length;p++){const m=h[p];if(Ka(m))if(512&m[jt]){const b=m[st];$_(b,m,b.template,m[Hn])}else m[$s]>0&&z0(m)}const u=a[st].components;if(null!==u)for(let h=0;h<u.length;h++){const p=_r(u[h],a);Ka(p)&&p[$s]>0&&z0(p)}}function MN(a,l){const u=_r(l,a),h=u[st];(function PN(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(h,u),ya(h,u,u[Hn])}function q_(a,l){return a[bo]?a[td][vi]=l:a[bo]=l,a[td]=l,l}function z_(a){for(;a;){a[jt]|=32;const l=xd(a);if(Dl(a)&&!l)return a;a=l}return null}function W_(a,l,u,h=!0){const p=l[mr];p.begin&&p.begin();try{$_(a,l,a.template,u)}catch(b){throw h&&gT(l,b),b}finally{p.end&&p.end()}}function W0(a,l,u){md(0),l(a,u)}function fT(a){return a[lr]||(a[lr]=[])}function pT(a){return a.cleanup||(a.cleanup=[])}function gT(a,l){const u=a[Ua],h=u?u.get(_g,null):null;h&&h.handleError(l)}function K0(a,l,u,h,p){for(let m=0;m<u.length;){const b=u[m++],T=u[m++],D=l[b],N=a.data[b];null!==N.setInput?N.setInput(D,p,h,T):D[T]=p}}function ac(a,l,u){const h=ea(l,a);tg(a[Zt],h,u)}function kf(a,l,u){let h=u?a.styles:null,p=u?a.classes:null,m=0;if(null!==l)for(let b=0;b<l.length;b++){const T=l[b];"number"==typeof T?m=T:1==m?p=_e(p,T):2==m&&(h=_e(h,T+": "+l[++b]+";"))}u?a.styles=h:a.stylesWithoutHost=h,u?a.classes=p:a.classesWithoutHost=p}function va(a,l,u,h,p=!1){for(;null!==u;){const m=l[u.index];if(null!==m&&h.push(Xn(m)),Yi(m))for(let T=oi;T<m.length;T++){const D=m[T],N=D[st].firstChild;null!==N&&va(D[st],D,N,h)}const b=u.type;if(8&b)va(a,l,u.child,h);else if(32&b){const T=Xl(u,l);let D;for(;D=T();)h.push(D)}else if(16&b){const T=hf(l,u);if(Array.isArray(T))h.push(...T);else{const D=xd(l[ii]);va(D[st],D,T,h,!0)}}u=p?u.projectionNext:u.next}return h}class Rf{get rootNodes(){const l=this._lView,u=l[st];return va(u,l,u.firstChild,[])}constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Hn]}set context(l){this._lView[Hn]=l}get destroyed(){return 128==(128&this._lView[jt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[On];if(Yi(l)){const u=l[Ko],h=u?u.indexOf(this):-1;h>-1&&(rg(l,h),ql(u,h))}this._attachedToViewContainer=!1}lf(this._lView[st],this._lView)}onDestroy(l){mN(this._lView[st],this._lView,null,l)}markForCheck(){z_(this._cdRefInjectingView||this._lView)}detach(){this._lView[jt]&=-65}reattach(){this._lView[jt]|=64}detectChanges(){W_(this._lView[st],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ec(a,l){_u(a,l,l[Zt],2,null,null)}(this._lView[st],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=l}}class Y0 extends Rf{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;W_(l[st],l,l[Hn],!1)}checkNoChanges(){}get context(){return null}}class K_ extends Ef{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=pn(l);return new $d(u,this.ngModule)}}function Y_(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class mT{constructor(l,u){this.injector=l,this.parentInjector=u}get(l,u,h){h=K(h);const p=this.injector.get(l,L_,h);return p!==L_||u===L_?p:this.parentInjector.get(l,u,h)}}class $d extends O1{get inputs(){return Y_(this.componentDef.inputs)}get outputs(){return Y_(this.componentDef.outputs)}constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function XA(a){return a.map(QA).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}create(l,u,h,p){let m=(p=p||this.ngModule)instanceof Vd?p:p?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const b=m?new mT(l,m):l,T=b.get(N0,null);if(null===T)throw new be(407,!1);const D=b.get(GA,null),N=T.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",B=h?function ZL(a,l,u){return a.selectRootElement(l,u===Qn.ShadowDom)}(N,h,this.componentDef.encapsulation):Rd(N,O,function no(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(O)),J=this.componentDef.onPush?288:272,re=aT(0,null,null,1,0,null,null,null,null,null),De=j_(null,re,null,J,null,null,T,N,D,b,null);let We,rt;qc(De);try{const ft=this.componentDef;let Pt,Ue=null;ft.findHostDirectiveDefs?(Pt=[],Ue=new Map,ft.findHostDirectiveDefs(ft,Pt,Ue),Pt.push(ft)):Pt=[ft];const qt=function J0(a,l){const u=a[st],h=Cn;return a[h]=l,Tg(u,h,2,"#host",null)}(De,B),tr=function JL(a,l,u,h,p,m,b,T){const D=p[st];!function UN(a,l,u,h){for(const p of a)l.mergedAttrs=Ks(l.mergedAttrs,p.hostAttrs);null!==l.mergedAttrs&&(kf(l,l.mergedAttrs,!0),null!==u&&vu(h,u,l))}(h,a,l,b);const N=m.createRenderer(l,u),O=j_(p,Z_(u),null,u.onPush?32:16,p[a.index],a,m,N,T||null,null,null);return D.firstCreatePass&&Z0(D,a,h.length-1),q_(p,O),p[a.index]=O}(qt,B,ft,Pt,De,T,N);rt=Wa(re,Cn),B&&function yT(a,l,u,h){if(h)$n(a,u,["ng-version",L1.full]);else{const{attrs:p,classes:m}=function eN(a){const l=[],u=[];let h=1,p=2;for(;h<a.length;){let m=a[h];if("string"==typeof m)2===p?""!==m&&l.push(m,a[++h]):8===p&&u.push(m);else{if(!_a(p))break;p=m}h++}return{attrs:l,classes:u}}(l.selectors[0]);p&&$n(a,u,p),m&&m.length>0&&cl(a,u,m.join(" "))}}(N,ft,B,h),void 0!==u&&function BN(a,l,u){const h=a.projection=[];for(let p=0;p<l.length;p++){const m=u[p];h.push(null!=m?Array.from(m):null)}}(rt,this.ngContentSelectors,u),We=function Gd(a,l,u,h,p,m){const b=zr(),T=p[st],D=cr(b,p);uT(T,p,b,u,null,h);for(let O=0;O<u.length;O++)ui(Ns(p,T,b.directiveStart+O,b),p);dT(T,p,b),D&&ui(D,p);const N=Ns(p,T,b.directiveStart+b.componentOffset,b);if(a[Hn]=p[Hn]=N,null!==m)for(const O of m)O(N,l);return oT(T,b,a),N}(tr,ft,Pt,Ue,De,[QL]),ya(re,De,null)}finally{u_()}return new _T(this.componentType,We,oc(rt,De),De,rt)}}class _T extends VA{constructor(l,u,h,p,m){super(),this.location=h,this._rootLView=p,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new Y0(p),this.componentType=l}setInput(l,u){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[l])){const m=this._rootLView;K0(m[st],m,p,l,u),z_(_r(this._tNode.index,m))}}get injector(){return new ps(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function QL(){const a=zr();Ol(we()[st],a)}function J_(a){let l=function vT(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const h=[a];for(;l;){let p;if(Ri(a))p=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new be(903,!1);p=l.\u0275dir}if(p){if(u){h.push(p);const b=a;b.inputs=wT(a.inputs),b.declaredInputs=wT(a.declaredInputs),b.outputs=wT(a.outputs);const T=p.hostBindings;T&&VN(a,T);const D=p.viewQuery,N=p.contentQueries;if(D&&CT(a,D),N&&Q0(a,N),Ce(a.inputs,p.inputs),Ce(a.declaredInputs,p.declaredInputs),Ce(a.outputs,p.outputs),Ri(p)&&p.data.animation){const O=a.data;O.animation=(O.animation||[]).concat(p.data.animation)}}const m=p.features;if(m)for(let b=0;b<m.length;b++){const T=m[b];T&&T.ngInherit&&T(a),T===J_&&(u=!1)}}l=Object.getPrototypeOf(l)}!function bT(a){let l=0,u=null;for(let h=a.length-1;h>=0;h--){const p=a[h];p.hostVars=l+=p.hostVars,p.hostAttrs=Ks(p.hostAttrs,u=Ks(u,p.hostAttrs))}}(h)}function wT(a){return a===Or?{}:a===tn?[]:a}function CT(a,l){const u=a.viewQuery;a.viewQuery=u?(h,p)=>{l(h,p),u(h,p)}:l}function Q0(a,l){const u=a.contentQueries;a.contentQueries=u?(h,p,m)=>{l(h,p,m),u(h,p,m)}:l}function VN(a,l){const u=a.hostBindings;a.hostBindings=u?(h,p)=>{l(h,p),u(h,p)}:l}function Zd(a){return!!X_(a)&&(Array.isArray(a)||!(a instanceof Map)&&Symbol.iterator in a)}function X_(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function ba(a,l,u){return a[l]=u}function Li(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function Cu(a,l,u,h){const p=Li(a,l,u);return Li(a,l+1,h)||p}function qd(a,l,u,h){const p=we();return Li(p,na(),l)&&(an(),function hl(a,l,u,h,p,m){const b=cr(a,l);q0(l[Zt],b,m,a.value,u,h,p)}(Mn(),p,a,l,u,h)),qd}function Tu(a,l,u,h){return Li(a,na(),u)?l+xe(u)+h:Ht}function kT(a,l,u,h,p,m,b,T){const D=we(),N=an(),O=a+Cn,B=N.firstCreatePass?function ey(a,l,u,h,p,m,b,T,D){const N=l.consts,O=Tg(l,a,4,b||null,qs(N,T));G0(l,u,O,qs(N,D)),Ol(l,O);const B=O.tView=aT(2,O,h,p,m,l.directiveRegistry,l.pipeRegistry,null,l.schemas,N);return null!==l.queries&&(l.queries.template(l,O),B.queries=l.queries.embeddedTView(O)),O}(O,N,D,l,u,h,p,m,b):N.data[O];Mi(B,!1);const J=D[Zt].createComment("");ga(N,D,J,B),ui(J,D),q_(D,D[O]=hT(J,D,J,B)),nd(B)&&G_(N,D,B),null!=b&&Hd(D,B,T)}function RT(a){return ta(function Rh(){return Ft.lFrame.contextLView}(),Cn+a)}function Lf(a,l,u){const h=we();return Li(h,na(),l)&&Os(an(),Mn(),h,a,l,h[Zt],u,!1),Lf}function Uf(a,l,u,h,p){const b=p?"class":"style";K0(a,u,l.inputs[b],b,h)}function kg(a,l,u,h){const p=we(),m=an(),b=Cn+a,T=p[Zt],D=m.firstCreatePass?function OT(a,l,u,h,p,m){const b=l.consts,D=Tg(l,a,2,h,qs(b,p));return G0(l,u,D,qs(b,m)),null!==D.attrs&&kf(D,D.attrs,!1),null!==D.mergedAttrs&&kf(D,D.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,D),D}(b,m,p,l,u,h):m.data[b],N=p[b]=Rd(T,l,function d_(){return Ft.lFrame.currentNamespace}()),O=nd(D);return Mi(D,!0),vu(T,N,D),32!=(32&D.flags)&&ga(m,p,N,D),0===function Vc(){return Ft.lFrame.elementDepthCount}()&&ui(N,p),function cd(){Ft.lFrame.elementDepthCount++}(),O&&(G_(m,p,D),oT(m,D,p)),null!==h&&Hd(p,D),kg}function ty(){let a=zr();$c()?Gc():(a=a.parent,Mi(a,!1));const l=a;!function ud(){Ft.lFrame.elementDepthCount--}();const u=an();return u.firstCreatePass&&(Ol(u,a),El(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function Vh(a){return 0!=(8&a.flags)}(l)&&Uf(u,l,we(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Vp(a){return 0!=(16&a.flags)}(l)&&Uf(u,l,we(),l.stylesWithoutHost,!1),ty}function Rg(a,l,u,h){return kg(a,l,u,h),ty(),Rg}function ny(a,l,u){const h=we(),p=an(),m=a+Cn,b=p.firstCreatePass?function MT(a,l,u,h,p){const m=l.consts,b=qs(m,h),T=Tg(l,a,8,"ng-container",b);return null!==b&&kf(T,b,!0),G0(l,u,T,qs(m,p)),null!==l.queries&&l.queries.elementStart(l,T),T}(m,p,h,l,u):p.data[m];Mi(b,!0);const T=h[m]=h[Zt].createComment("");return ga(p,h,T,b),ui(T,h),nd(b)&&(G_(p,h,b),oT(p,b,h)),null!=u&&Hd(h,b),ny}function ry(){let a=zr();const l=an();return $c()?Gc():(a=a.parent,Mi(a,!1)),l.firstCreatePass&&(Ol(l,a),El(a)&&l.queries.elementEnd(a)),ry}function FT(){return we()}function tb(a){return!!a&&"function"==typeof a.then}function LT(a){return!!a&&"function"==typeof a.subscribe}const Du=LT;function Og(a,l,u,h){const p=we(),m=an(),b=zr();return function UT(a,l,u,h,p,m,b){const T=nd(h),N=a.firstCreatePass&&pT(a),O=l[Hn],B=fT(l);let J=!0;if(3&h.type||b){const We=cr(h,l),rt=b?b(We):We,ft=B.length,Pt=b?qt=>b(Xn(qt[h.index])):h.index;let Ue=null;if(!b&&T&&(Ue=function sy(a,l,u,h){const p=a.cleanup;if(null!=p)for(let m=0;m<p.length-1;m+=2){const b=p[m];if(b===u&&p[m+1]===h){const T=l[lr],D=p[m+2];return T.length>D?T[D]:null}"string"==typeof b&&(m+=2)}return null}(a,l,p,h.index)),null!==Ue)(Ue.__ngLastListenerFn__||Ue).__ngNextListenerFn__=m,Ue.__ngLastListenerFn__=m,J=!1;else{m=VT(h,l,O,m,!1);const qt=u.listen(rt,p,m);B.push(m,qt),N&&N.push(p,Pt,ft,ft+1)}}else m=VT(h,l,O,m,!1);const re=h.outputs;let De;if(J&&null!==re&&(De=re[p])){const We=De.length;if(We)for(let rt=0;rt<We;rt+=2){const tr=l[De[rt]][De[rt+1]].subscribe(m),fn=B.length;B.push(m,tr),N&&N.push(p,h.index,fn,-(fn+1))}}}(m,p,p[Zt],b,a,l,h),Og}function BT(a,l,u,h){try{return Oi(6,l,u),!1!==u(h)}catch(p){return gT(a,p),!1}finally{Oi(7,l,u)}}function VT(a,l,u,h,p){return function m(b){if(b===Function)return h;z_(a.componentOffset>-1?_r(a.index,l):l);let D=BT(l,u,h,b),N=m.__ngNextListenerFn__;for(;N;)D=BT(l,u,N,b)&&D,N=N.__ngNextListenerFn__;return p&&!1===D&&(b.preventDefault(),b.returnValue=!1),D}}function jT(a=1){return function n0(a){return(Ft.lFrame.contextLView=function Uh(a,l){for(;a>0;)l=l[hs],a--;return l}(a,Ft.lFrame.contextLView))[Hn]}(a)}function qN(a,l){let u=null;const h=function U_(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(!(1&u))return l[u+1]}return null}(a);for(let p=0;p<l.length;p++){const m=l[p];if("*"!==m){if(null===h?vg(a,m,!0):JA(h,m))return p}else u=p}return u}function oy(a){const l=we()[ii][ar];if(!l.projection){const h=l.projection=il(a?a.length:1,null),p=h.slice();let m=l.child;for(;null!==m;){const b=a?qN(m,a):0;null!==b&&(p[b]?p[b].projectionNext=m:h[b]=m,p[b]=m),m=m.next}}}function HT(a,l=0,u){const h=we(),p=an(),m=Tg(p,Cn+a,16,null,u||null);null===m.projection&&(m.projection=l),Gc(),32!=(32&m.flags)&&function T_(a,l,u){ko(l[Zt],0,l,u,cf(a,u,l),df(u.parent||l[ar],u,l))}(p,h,m)}function Bf(a,l,u){return Vf(a,"",l,"",u),Bf}function Vf(a,l,u,h,p){const m=we(),b=Tu(m,l,u,h);return b!==Ht&&Os(an(),Mn(),m,a,b,m[Zt],p,!1),Vf}function ly(a,l){return a<<17|l<<2}function cc(a){return a>>17&32767}function zT(a){return 2|a}function Wd(a){return(131068&a)>>2}function ib(a,l){return-131069&a|l<<2}function sb(a){return 1|a}function KT(a,l,u,h,p){const m=a[u+1],b=null===l;let T=h?cc(m):Wd(m),D=!1;for(;0!==T&&(!1===D||b);){const O=a[T+1];YT(a[T],l)&&(D=!0,a[T+1]=h?sb(O):zT(O)),T=h?cc(O):Wd(O)}D&&(a[u+1]=h?zT(m):sb(m))}function YT(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&vr(a,l)>=0}const di={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function cy(a){return a.substring(di.key,di.keyEnd)}function JT(a,l){const u=di.textEnd;return u===l?-1:(l=di.keyEnd=function ab(a,l,u){for(;l<u&&a.charCodeAt(l)>32;)l++;return l}(a,di.key=l,u),Ui(a,l,u))}function Ui(a,l,u){for(;l<u&&a.charCodeAt(l)<=32;)l++;return l}function lb(a,l,u){return Fo(a,l,u,!1),lb}function cb(a,l){return Fo(a,l,null,!0),cb}function ub(a){!function Er(a,l,u,h){const p=an(),m=Is(2);p.firstUpdatePass&&tE(p,null,m,h);const b=we();if(u!==Ht&&Li(b,m,u)){const T=p.data[Ci()];if(db(T,h)&&!Kd(p,m)){let D=h?T.classesWithoutHost:T.stylesWithoutHost;null!==D&&(u=_e(D,u||"")),Uf(p,T,b,u,h)}else!function iE(a,l,u,h,p,m,b,T){p===Ht&&(p=tn);let D=0,N=0,O=0<p.length?p[0]:null,B=0<m.length?m[0]:null;for(;null!==O||null!==B;){const J=D<p.length?p[D+1]:void 0,re=N<m.length?m[N+1]:void 0;let We,De=null;O===B?(D+=2,N+=2,J!==re&&(De=B,We=re)):null===B||null!==O&&O<B?(D+=2,De=O):(N+=2,De=B,We=re),null!==De&&sE(a,l,u,h,De,We,b,T),O=D<p.length?p[D]:null,B=N<m.length?m[N]:null}}(p,T,b,b[Zt],b[m+1],b[m+1]=function ix(a,l,u){if(null==u||""===u)return tn;const h=[],p=ue(u);if(Array.isArray(p))for(let m=0;m<p.length;m++)a(h,p[m],!0);else if("object"==typeof p)for(const m in p)p.hasOwnProperty(m)&&a(h,m,p[m]);else"string"==typeof p&&l(h,p);return h}(a,l,u),h,m)}}(sx,wa,a,!0)}function wa(a,l){for(let u=function QN(a){return function QT(a){di.key=0,di.keyEnd=0,di.value=0,di.valueEnd=0,di.textEnd=a.length}(a),JT(a,Ui(a,0,di.textEnd))}(l);u>=0;u=JT(l,u))Ti(a,cy(l),!0)}function Fo(a,l,u,h){const p=we(),m=an(),b=Is(2);m.firstUpdatePass&&tE(m,a,b,h),l!==Ht&&Li(p,b,l)&&sE(m,m.data[Ci()],p,p[Zt],a,p[b+1]=function ox(a,l){return null==a||""===a||("string"==typeof l?a+=l:"object"==typeof a&&(a=ye(ue(a)))),a}(l,u),h,b)}function Kd(a,l){return l>=a.expandoStartIndex}function tE(a,l,u,h){const p=a.data;if(null===p[u+1]){const m=p[Ci()],b=Kd(a,u);db(m,h)&&null===l&&!b&&(l=!1),l=function nx(a,l,u,h){const p=zs(a);let m=h?l.residualClasses:l.residualStyles;if(null===p)0===(h?l.classBindings:l.styleBindings)&&(u=Fg(u=jf(null,a,l,u,h),l.attrs,h),m=null);else{const b=l.directiveStylingLast;if(-1===b||a[b]!==p)if(u=jf(p,a,l,u,h),null===m){let D=function nE(a,l,u){const h=u?l.classBindings:l.styleBindings;if(0!==Wd(h))return a[cc(h)]}(a,l,h);void 0!==D&&Array.isArray(D)&&(D=jf(null,a,l,D[1],h),D=Fg(D,l.attrs,h),function rx(a,l,u,h){a[cc(u?l.classBindings:l.styleBindings)]=h}(a,l,h,D))}else m=function rE(a,l,u){let h;const p=l.directiveEnd;for(let m=1+l.directiveStylingLast;m<p;m++)h=Fg(h,a[m].hostAttrs,u);return Fg(h,l.attrs,u)}(a,l,h)}return void 0!==m&&(h?l.residualClasses=m:l.residualStyles=m),u}(p,m,l,h),function WT(a,l,u,h,p,m){let b=m?l.classBindings:l.styleBindings,T=cc(b),D=Wd(b);a[h]=u;let O,N=!1;if(Array.isArray(u)?(O=u[1],(null===O||vr(u,O)>0)&&(N=!0)):O=u,p)if(0!==D){const J=cc(a[T+1]);a[h+1]=ly(J,T),0!==J&&(a[J+1]=ib(a[J+1],h)),a[T+1]=function qT(a,l){return 131071&a|l<<17}(a[T+1],h)}else a[h+1]=ly(T,0),0!==T&&(a[T+1]=ib(a[T+1],h)),T=h;else a[h+1]=ly(D,0),0===T?T=h:a[D+1]=ib(a[D+1],h),D=h;N&&(a[h+1]=zT(a[h+1])),KT(a,O,h,!0),KT(a,O,h,!1),function YN(a,l,u,h,p){const m=p?a.residualClasses:a.residualStyles;null!=m&&"string"==typeof l&&vr(m,l)>=0&&(u[h+1]=sb(u[h+1]))}(l,O,a,h,m),b=ly(T,D),m?l.classBindings=b:l.styleBindings=b}(p,m,l,u,b,h)}}function jf(a,l,u,h,p){let m=null;const b=u.directiveEnd;let T=u.directiveStylingLast;for(-1===T?T=u.directiveStart:T++;T<b&&(m=l[T],h=Fg(h,m.hostAttrs,p),m!==a);)T++;return null!==a&&(u.directiveStylingLast=T),h}function Fg(a,l,u){const h=u?1:2;let p=-1;if(null!==l)for(let m=0;m<l.length;m++){const b=l[m];"number"==typeof b?p=b:p===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Ti(a,b,!!u||l[++m]))}return void 0===a?null:a}function sx(a,l,u){const h=String(l);""!==h&&!h.includes(" ")&&Ti(a,h,u)}function sE(a,l,u,h,p,m,b,T){if(!(3&l.type))return;const D=a.data,N=D[T+1],O=function KN(a){return 1==(1&a)}(N)?oE(D,l,u,p,Wd(N),b):void 0;hy(O)||(hy(m)||function rb(a){return 2==(2&a)}(N)&&(m=oE(D,null,u,p,T,b)),function Ro(a,l,u,h,p){if(l)p?a.addClass(u,h):a.removeClass(u,h);else{let m=-1===h.indexOf("-")?void 0:It.DashCase;null==p?a.removeStyle(u,h,m):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),m|=It.Important),a.setStyle(u,h,p,m))}}(h,b,ea(Ci(),u),p,m))}function oE(a,l,u,h,p,m){const b=null===l;let T;for(;p>0;){const D=a[p],N=Array.isArray(D),O=N?D[1]:D,B=null===O;let J=u[p+1];J===Ht&&(J=B?tn:void 0);let re=B?Ut(J,h):O===h?J:void 0;if(N&&!hy(re)&&(re=Ut(D,h)),hy(re)&&(T=re,b))return T;const De=a[p+1];p=b?cc(De):Wd(De)}if(null!==l){let D=m?l.residualClasses:l.residualStyles;null!=D&&(T=Ut(D,h))}return T}function hy(a){return void 0!==a}function db(a,l){return 0!=(a.flags&(l?8:16))}function Lg(a,l=""){const u=we(),h=an(),p=a+Cn,m=h.firstCreatePass?Tg(h,p,1,l,null):h.data[p],b=u[p]=gu(u[Zt],l);ga(h,u,b,m),Mi(m,!1)}function fy(a){return py("",a,""),fy}function py(a,l,u){const h=we(),p=Tu(h,a,l,u);return p!==Ht&&ac(h,Ci(),p),py}function gy(a,l,u,h,p){const m=we(),b=function zd(a,l,u,h,p,m){const T=Cu(a,Pi(),u,p);return Is(2),T?l+xe(u)+h+xe(p)+m:Ht}(m,a,l,u,h,p);return b!==Ht&&ac(m,Ci(),b),gy}function my(a,l,u){const h=we();return Li(h,na(),l)&&Os(an(),Mn(),h,a,l,h[Zt],u,!0),my}function _y(a,l,u){const h=we();if(Li(h,na(),l)){const m=an(),b=Mn();Os(m,b,h,a,l,function FN(a,l,u){return(null===a||Ri(a))&&(u=function za(a){for(;Array.isArray(a);){if("object"==typeof a[Ki])return a;a=a[zi]}return null}(u[l.index])),u[Zt]}(zs(m.data),b,h),u,!0)}return _y}const Iu=void 0;var yy=["en",[["a","p"],["AM","PM"],Iu],[["AM","PM"],Iu,Iu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Iu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Iu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Iu,"{1} 'at' {0}",Iu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _E(a){const u=Math.floor(Math.abs(a)),h=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let Jd={};function vy(a){const l=function vE(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=vb(l);if(u)return u;const h=l.split("-")[0];if(u=vb(h),u)return u;if("en"===h)return yy;throw new be(701,!1)}function yE(a){return vy(a)[xt.PluralCase]}function vb(a){return a in Jd||(Jd[a]=wn.ng&&wn.ng.common&&wn.ng.common.locales&&wn.ng.common.locales[a]),Jd[a]}var xt=(()=>((xt=xt||{})[xt.LocaleId=0]="LocaleId",xt[xt.DayPeriodsFormat=1]="DayPeriodsFormat",xt[xt.DayPeriodsStandalone=2]="DayPeriodsStandalone",xt[xt.DaysFormat=3]="DaysFormat",xt[xt.DaysStandalone=4]="DaysStandalone",xt[xt.MonthsFormat=5]="MonthsFormat",xt[xt.MonthsStandalone=6]="MonthsStandalone",xt[xt.Eras=7]="Eras",xt[xt.FirstDayOfWeek=8]="FirstDayOfWeek",xt[xt.WeekendRange=9]="WeekendRange",xt[xt.DateFormat=10]="DateFormat",xt[xt.TimeFormat=11]="TimeFormat",xt[xt.DateTimeFormat=12]="DateTimeFormat",xt[xt.NumberSymbols=13]="NumberSymbols",xt[xt.NumberFormats=14]="NumberFormats",xt[xt.CurrencyCode=15]="CurrencyCode",xt[xt.CurrencySymbol=16]="CurrencySymbol",xt[xt.CurrencyName=17]="CurrencyName",xt[xt.Currencies=18]="Currencies",xt[xt.Directionality=19]="Directionality",xt[xt.PluralCase=20]="PluralCase",xt[xt.ExtraData=21]="ExtraData",xt))();const bb=["zero","one","two","few","many"],Qd="en-US",Hf={marker:"element"},Xd={marker:"ICU"};var fr=(()=>((fr=fr||{})[fr.SHIFT=2]="SHIFT",fr[fr.APPEND_EAGERLY=1]="APPEND_EAGERLY",fr[fr.COMMENT=2]="COMMENT",fr))();let wb=Qd;function Xi(a){(function fe(a,l){null==a&&se(l,a,null,"!=")})(a,"Expected localeId to be defined"),"string"==typeof a&&(wb=a.toLowerCase().replace(/_/g,"-"))}function Cb(a,l,u){const h=l.insertBeforeIndex,p=Array.isArray(h)?h[0]:h;return null===p?sg(a,0,u):Xn(u[p])}function yx(a,l,u,h,p){const m=l.insertBeforeIndex;if(Array.isArray(m)){let b=h,T=null;if(3&l.type||(T=b,b=p),null!==b&&-1===l.componentOffset)for(let D=1;D<m.length;D++)ll(a,b,u[m[D]],T,!1)}}function vx(a,l){if(a.push(l),a.length>1)for(let u=a.length-2;u>=0;u--){const h=a[u];Nu(h)||eh(h,l)&&null===Tb(h)&&by(h,l.index)}}function Nu(a){return!(64&a.type)}function eh(a,l){return Nu(l)||a.index>l.index}function Tb(a){const l=a.insertBeforeIndex;return Array.isArray(l)?l[0]:l}function by(a,l){const u=a.insertBeforeIndex;Array.isArray(u)?u[0]=l:(Qi(Cb,yx),a.insertBeforeIndex=l)}function Ug(a,l){const u=a.data[l];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function o2(a,l,u){const h=H_(a,u,64,null,null);return vx(l,h),h}function Db(a,l){const u=l[a.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function wx(a){return a>>>17}function Cx(a){return(131070&a)>>>1}let wy=0,Bg=0;function TE(a,l,u,h){const p=u[Zt];let b,m=null;for(let T=0;T<l.length;T++){const D=l[T];if("string"==typeof D){const N=l[++T];null===u[N]&&(u[N]=gu(p,D))}else if("number"==typeof D)switch(1&D){case 0:const N=wx(D);let O,B;if(null===m&&(m=N,b=to(p,h)),N===m?(O=h,B=b):(O=null,B=Xn(u[N])),null!==B){const We=Cx(D);ll(p,B,u[We],O,!1);const ft=Ug(a,We);if(null!==ft&&"object"==typeof ft){const Pt=Db(ft,u);null!==Pt&&TE(a,ft.create[Pt],u,u[ft.anchorIdx])}}break;case 1:const re=l[++T],De=l[++T];q0(p,ea(D>>>1,u),null,null,re,De,null)}else switch(D){case Xd:const N=l[++T],O=l[++T];null===u[O]&&ui(u[O]=af(p,N),u);break;case Hf:const B=l[++T],J=l[++T];null===u[J]&&ui(u[J]=Rd(p,B,null),u)}}}function Cy(a,l,u,h,p){for(let m=0;m<u.length;m++){const b=u[m],T=u[++m];if(b&p){let D="";for(let N=m+1;N<=m+T;N++){const O=u[N];if("string"==typeof O)D+=O;else if("number"==typeof O)if(O<0)D+=xe(l[h-O]);else{const B=O>>>2;switch(3&O){case 1:const J=u[++N],re=u[++N],De=a.data[B];"string"==typeof De?q0(l[Zt],l[B],null,De,J,D,re):Os(a,De,l,J,D,l[Zt],re,!1);break;case 0:const We=l[B];null!==We&&tg(l[Zt],We,D);break;case 2:Ty(a,Ug(a,B),l,D);break;case 3:$f(a,Ug(a,B),h,l)}}}}else{const D=u[m+1];if(D>0&&3==(3&D)){const O=Ug(a,D>>>2);l[O.currentCaseLViewIndex]<0&&$f(a,O,h,l)}}m+=T}}function $f(a,l,u,h){let p=h[l.currentCaseLViewIndex];if(null!==p){let m=wy;p<0&&(p=h[l.currentCaseLViewIndex]=~p,m=-1),Cy(a,h,l.update[p],u,m)}}function Ty(a,l,u,h){const p=function Vg(a,l){let u=a.cases.indexOf(l);if(-1===u)switch(a.type){case 1:{const h=function bE(a,l){const u=yE(l)(parseInt(a,10)),h=bb[u];return void 0!==h?h:"other"}(l,function Au(){return wb}());u=a.cases.indexOf(h),-1===u&&"other"!==h&&(u=a.cases.indexOf("other"));break}case 0:u=a.cases.indexOf("other")}return-1===u?null:u}(l,h);if(Db(l,u)!==p&&(th(a,l,u),u[l.currentCaseLViewIndex]=null===p?null:~p,null!==p)){const b=u[l.anchorIdx];b&&TE(a,l.create[p],u,b)}}function th(a,l,u){let h=Db(l,u);if(null!==h){const p=l.remove[h];for(let m=0;m<p.length;m++){const b=p[m];if(b>0){const T=ea(b,u);null!==T&&Fd(u[Zt],T)}else th(a,Ug(a,~b),u)}}}function Sb(){const a=[];let u,h,l=-1;function m(T,D){l=0;const N=Db(T,D);h=null!==N?T.remove[N]:tn}function b(){if(l<h.length){const T=h[l++];return T>0?u[T]:(a.push(l,h),m(u[st].data[~T],u),b())}return 0===a.length?null:(h=a.pop(),l=a.pop(),b())}return function p(T,D){for(u=D;a.length;)a.pop();return m(T.value,D),b}}const jg=/\ufffd(\d+):?\d*\ufffd/gi,hi=/\ufffd(\d+)\ufffd/,Sx=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Ey="\ufffd",Ix=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,u2=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,nh=/\uE500/g;function Gg(a,l,u,h,p,m,b){const T=Eg(a,h,1,null);let D=T<<fr.SHIFT,N=Hc();l===N&&(N=null),null===N&&(D|=fr.APPEND_EAGERLY),b&&(D|=fr.COMMENT,function Nd(a){void 0===Xp&&(Xp=a())}(Sb)),p.push(D,null===m?"":m);const O=H_(a,T,b?32:1,null===m?"":m,null);vx(u,O);const B=O.index;return Mi(O,!1),null!==N&&l!==N&&function bx(a,l){let u=a.insertBeforeIndex;null===u?(Qi(Cb,yx),u=a.insertBeforeIndex=[null,l]):(function tt(a,l,u){a!=l&&se(u,a,l,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(l))}(N,B),O}function Dy(a,l,u,h,p,m,b){const T=b.match(jg),D=Gg(a,l,u,m,h,T?null:b,!1);T&&rh(p,b,D.index,null,0,null)}function rh(a,l,u,h,p,m){const b=a.length,T=b+1;a.push(null,null);const D=b+2,N=l.split(jg);let O=0;for(let B=0;B<N.length;B++){const J=N[B];if(1&B){const re=p+parseInt(J,10);a.push(-1-re),O|=SE(re)}else""!==J&&a.push(J)}return a.push(u<<2|(h?1:0)),h&&a.push(h,m),a[b]=O,a[T]=a.length-D,O}function SE(a){return 1<<Math.min(a,31)}function xb(a){let l,m,u="",h=0,p=!1;for(;null!==(l=Ix.exec(a));)p?l[0]===`${Ey}/*${m}${Ey}`&&(h=l.index,p=!1):(u+=a.substring(h,l.index+l[0].length),m=l[1],p=!0);return u+=a.slice(h),u}function kb(a,l,u,h,p,m){let b=0;const T={type:p.type,currentCaseLViewIndex:Eg(a,l,1,null),anchorIdx:m,cases:[],create:[],remove:[],update:[]};(function Rb(a,l,u){a.push(SE(l.mainBinding),2,-1-l.mainBinding,u<<2|2)})(u,p,m),function Eb(a,l,u){const h=a.data[l];null===h?a.data[l]=u:h.value=u}(a,m,T);const D=p.values;for(let N=0;N<D.length;N++){const O=D[N],B=[];for(let J=0;J<O.length;J++){const re=O[J];if("string"!=typeof re){const De=B.push(re)-1;O[J]=`\x3c!--\ufffd${De}\ufffd--\x3e`}}b=Rx(a,T,l,u,h,p.cases[N],O.join(""),B)|b}b&&function Mx(a,l,u){a.push(l,1,u<<2|3)}(u,b,m)}function kx(a){const l=[],u=[];let h=1,p=0;const m=IE(a=a.replace(Sx,function(b,T,D){return h="select"===D?0:1,p=parseInt(T.slice(1),10),""}));for(let b=0;b<m.length;){let T=m[b++].trim();1===h&&(T=T.replace(/\s*(?:=)?(\w+)\s*/,"$1")),T.length&&l.push(T);const D=IE(m[b++]);l.length>u.length&&u.push(D)}return{type:h,mainBinding:p,cases:l,values:u}}function IE(a){if(!a)return[];let l=0;const u=[],h=[],p=/[{}]/g;let m;for(p.lastIndex=0;m=p.exec(a);){const T=m.index;if("}"==m[0]){if(u.pop(),0==u.length){const D=a.substring(l,T);Sx.test(D)?h.push(kx(D)):h.push(D),l=T+1}}else{if(0==u.length){const D=a.substring(l,T);h.push(D),l=T+1}u.push("{")}}const b=a.substring(l);return h.push(b),h}function Rx(a,l,u,h,p,m,b,T){const D=[],N=[],O=[];l.cases.push(m),l.create.push(D),l.remove.push(N),l.update.push(O);const J=ug(gf()).getInertBodyElement(b),re=T1(J)||J;return re?Iy(a,l,u,h,D,N,O,re,p,T,0):0}function Iy(a,l,u,h,p,m,b,T,D,N,O){let B=0,J=T.firstChild;for(;J;){const re=Eg(a,u,1,null);switch(J.nodeType){case Node.ELEMENT_NODE:const De=J,We=De.tagName.toLowerCase();if(A_.hasOwnProperty(We)){Ay(p,Hf,We,D,re),a.data[re]=We;const Ue=De.attributes;for(let qt=0;qt<Ue.length;qt++){const tr=Ue.item(qt),fn=tr.name.toLowerCase();tr.value.match(jg)?hg.hasOwnProperty(fn)&&rh(b,tr.value,re,tr.name,0,N_[fn]?nc:null):Ob(p,re,tr)}B=Iy(a,l,u,h,p,m,b,J,re,N,O+1)|B,Ox(m,re,O)}break;case Node.TEXT_NODE:const rt=J.textContent||"",ft=rt.match(jg);Ay(p,null,ft?"":rt,D,re),Ox(m,re,O),ft&&(B=rh(b,rt,re,null,0,null)|B);break;case Node.COMMENT_NODE:const Pt=hi.exec(J.textContent||"");if(Pt){const qt=N[parseInt(Pt[1],10)];Ay(p,Xd,"",D,re),kb(a,u,h,D,qt,re),d2(m,re,O)}}J=J.nextSibling}return B}function Ox(a,l,u){0===u&&a.push(l)}function d2(a,l,u){0===u&&(a.push(~l),a.push(l))}function Ay(a,l,u,h,p){null!==l&&a.push(l),a.push(u,p,function a2(a,l,u){return a|l<<17|u<<1}(0,h,p))}function Ob(a,l,u){a.push(l<<1|1,u.name,u.value)}function kE(a,l,u=-1){const h=an(),p=we(),m=Cn+a,b=qs(h.consts,l),T=Hc();h.firstCreatePass&&function $g(a,l,u,h,p,m){const b=Hc(),T=[],D=[],N=[[]];p=function xx(a,l){if(function Nx(a){return-1===a}(l))return xb(a);{const u=a.indexOf(`:${l}${Ey}`)+2+l.toString().length,h=a.search(new RegExp(`${Ey}\\/\\*\\d+:${l}${Ey}`));return xb(a.substring(u,h))}}(p,m);const O=function Hg(a){return a.replace(nh," ")}(p).split(u2);for(let B=0;B<O.length;B++){let J=O[B];if(1&B){const re=47===J.charCodeAt(0),We=(J.charCodeAt(re?1:0),Cn+Number.parseInt(J.substring(re?2:1)));if(re)N.shift(),Mi(Hc(),!1);else{const rt=o2(a,N[0],We);N.unshift([]),Mi(rt,!0)}}else{const re=IE(J);for(let De=0;De<re.length;De++){let We=re[De];if(1&De){const rt=We;if("object"!=typeof rt)throw new Error(`Unable to parse ICU expression in "${p}" message.`);kb(a,u,D,l,rt,Gg(a,b,N[0],u,T,"",!0).index)}else""!==We&&Dy(a,b,N[0],T,D,u,We)}}}a.data[h]={create:T,update:D}}(h,null===T?0:T.index,p,m,b,u);const D=h.data[m],O=w_(h,T===p[ar]?null:T,p);(function Dx(a,l,u,h){const p=a[Zt];for(let m=0;m<l.length;m++){const b=l[m++],T=l[m],N=(b&fr.APPEND_EAGERLY)===fr.APPEND_EAGERLY,O=b>>>fr.SHIFT;let B=a[O];null===B&&(B=a[O]=(b&fr.COMMENT)===fr.COMMENT?p.createComment(T):gu(p,T)),N&&null!==u&&ll(p,u,B,h,!1)}})(p,D.create,O,T&&8&T.type?p[T.index]:null),Rl(!0)}function Fx(a,l,u){kE(a,l,u),function Pb(){Rl(!1)}()}function RE(a){return function CE(a){a&&(wy|=1<<Math.min(Bg,31)),Bg++}(Li(we(),na(),a)),RE}function Lx(a){!function Ex(a,l,u){if(Bg>0){const h=a.data[u];Cy(a,l,Array.isArray(h)?h:h.update,Pi()-Bg-1,wy)}wy=0,Bg=0}(an(),we(),a+Cn)}function Fb(a,l,u,h,p){if(a=ee(a),Array.isArray(a))for(let m=0;m<a.length;m++)Fb(a[m],l,u,h,p);else{const m=an(),b=we();let T=sc(a)?a:ee(a.provide),D=D0(a);const N=zr(),O=1048575&N.providerIndexes,B=N.directiveStart,J=N.providerIndexes>>20;if(sc(a)||!a.multi){const re=new Eo(D,p,xf),De=hc(T,l,p?O:O+J,B);-1===De?($l(nl(N,b),m,T),Ny(m,a,l.length),l.push(T),N.directiveStart++,N.directiveEnd++,p&&(N.providerIndexes+=1048576),u.push(re),b.push(re)):(u[De]=re,b[De]=re)}else{const re=hc(T,l,O+J,B),De=hc(T,l,O,O+J),rt=De>=0&&u[De];if(p&&!rt||!p&&!(re>=0&&u[re])){$l(nl(N,b),m,T);const ft=function g2(a,l,u,h,p){const m=new Eo(a,u,xf);return m.multi=[],m.index=l,m.componentProviders=0,Lb(m,p,h&&!u),m}(p?qg:Bx,u.length,p,h,D);!p&&rt&&(u[De].providerFactory=ft),Ny(m,a,l.length,0),l.push(T),N.directiveStart++,N.directiveEnd++,p&&(N.providerIndexes+=1048576),u.push(ft),b.push(ft)}else Ny(m,a,re>-1?re:De,Lb(u[p?De:re],D,!p&&h));!p&&h&&rt&&u[De].componentProviders++}}}function Ny(a,l,u,h){const p=sc(l),m=function O_(a){return!!a.useClass}(l);if(p||m){const D=(m?ee(l.useClass):l).prototype.ngOnDestroy;if(D){const N=a.destroyHooks||(a.destroyHooks=[]);if(!p&&l.multi){const O=N.indexOf(u);-1===O?N.push(u,[h,D]):N[O+1].push(h,D)}else N.push(u,D)}}}function Lb(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function hc(a,l,u,h){for(let p=u;p<h;p++)if(l[p]===a)return p;return-1}function Bx(a,l,u,h){return Ub(this.multi,[])}function qg(a,l,u,h){const p=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,T=Ns(u,u[st],this.providerFactory.index,h);m=T.slice(0,b),Ub(p,m);for(let D=b;D<T.length;D++)m.push(T[D])}else m=[],Ub(p,m);return m}function Ub(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function Bb(a,l=[]){return u=>{u.providersResolver=(h,p)=>function OE(a,l,u){const h=an();if(h.firstCreatePass){const p=Ri(a);Fb(u,h.data,h.blueprint,p,!0),Fb(l,h.data,h.blueprint,p,!1)}}(h,p?p(a):a,l)}}class Gf{}class Vb{}function Vx(a,l){return new xy(a,l??null)}class xy extends Gf{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new K_(this);const h=ni(l);this._bootstrapComponents=dl(h.bootstrap),this._r3Injector=L0(l,u,[{provide:Gf,useValue:this},{provide:Ef,useValue:this.componentFactoryResolver}],ye(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class jb extends Vb{constructor(l){super(),this.moduleType=l}create(l){return new xy(this.moduleType,l)}}class ME extends Gf{constructor(l,u,h){super(),this.componentFactoryResolver=new K_(this),this.instance=null;const p=new k1([...l,{provide:Gf,useValue:this},{provide:Ef,useValue:this.componentFactoryResolver}],u||P_(),h,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function Hb(a,l,u=null){return new ME(a,l,u).injector}let fc=(()=>{class a{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=wf(0,u.type),p=h.length>0?Hb([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,p)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return a.\u0275prov=Xe({token:a,providedIn:"environment",factory:()=>new a($(Vd))}),a})();function PE(a){a.getStandaloneInjector=l=>l.get(fc).getOrCreateStandaloneInjector(a)}function Zb(a,l,u,h){return ZE(we(),yr(),a,l,u,h)}function ku(a,l,u,h,p){return function zb(a,l,u,h,p,m,b){const T=l+u;return Cu(a,T,p,m)?ba(a,T+2,b?h.call(b,p,m):h(p,m)):Zf(a,T+2)}(we(),yr(),a,l,u,h,p)}function HE(a,l,u,h,p,m){return function qE(a,l,u,h,p,m,b,T){const D=l+u;return function ro(a,l,u,h,p){const m=Cu(a,l,u,h);return Li(a,l+2,p)||m}(a,D,p,m,b)?ba(a,D+3,T?h.call(T,p,m,b):h(p,m,b)):Zf(a,D+3)}(we(),yr(),a,l,u,h,p,m)}function Zf(a,l){const u=a[l];return u===Ht?void 0:u}function ZE(a,l,u,h,p,m){const b=l+u;return Li(a,b,p)?ba(a,b+1,m?h.call(m,p):h(p)):Zf(a,b+1)}function Kb(a,l){const u=an();let h;const p=a+Cn;u.firstCreatePass?(h=function Wx(a,l){if(l)for(let u=l.length-1;u>=0;u--){const h=l[u];if(a===h.name)return h}}(l,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks??(u.destroyHooks=[])).push(p,h.onDestroy)):h=u.data[p];const m=h.factory||(h.factory=Jo(h.type)),b=jn(xf);try{const T=el(!1),D=m();return el(T),function ZN(a,l,u,h){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=h}(u,we(),p,D),D}finally{jn(b)}}function Yx(a,l,u){const h=a+Cn,p=we(),m=ta(p,h);return function Oy(a,l){return a[st].data[l].pure}(p,h)?ZE(p,yr(),l,m.transform,u,m):m.transform(u)}function KE(a){return l=>{setTimeout(a,void 0,l)}}const pc=class y2 extends s.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,h){let p=l,m=u||(()=>null),b=h;if(l&&"object"==typeof l){const D=l;p=D.next?.bind(D),m=D.error?.bind(D),b=D.complete?.bind(D)}this.__isAsync&&(m=KE(m),p&&(p=KE(p)),b&&(b=KE(b)));const T=super.subscribe({next:p,error:m,complete:b});return l instanceof te.w0&&l.add(T),T}};function v2(){return this._results[Symbol.iterator]()}class YE{get changes(){return this._changes||(this._changes=new pc)}constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=YE.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=v2)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const h=this;h.dirty=!1;const p=function Fi(a){return a.flat(Number.POSITIVE_INFINITY)}(l);(this._changesDetected=!function Dd(a,l,u){if(a.length!==l.length)return!1;for(let h=0;h<a.length;h++){let p=a[h],m=l[h];if(u&&(p=u(p),m=u(m)),m!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let My=(()=>{class a{}return a.__NG_ELEMENT_ID__=Py,a})();const JE=My,Qx=class extends JE{constructor(l,u,h){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(l,u){const h=this._declarationTContainer.tView,p=j_(this._declarationLView,h,l,16,null,h.declTNode,null,null,null,null,u||null);p[Ba]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[Wi];return null!==b&&(p[Wi]=b.createEmbeddedView(h)),ya(h,p,l),new Rf(p)}};function Py(){return qf(zr(),we())}function qf(a,l){return 4&a.type?new Qx(l,a,oc(a,l)):null}let Lo=(()=>{class a{}return a.__NG_ELEMENT_ID__=b2,a})();function b2(){return Jb(zr(),we())}const Xx=Lo,QE=class extends Xx{constructor(l,u,h){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=h}get element(){return oc(this._hostTNode,this._hostLView)}get injector(){return new ps(this._hostTNode,this._hostLView)}get parentInjector(){const l=Jc(this._hostTNode,this._hostLView);if(vd(l)){const u=Kc(l,this._hostLView),h=Ul(l);return new ps(u[st].data[h+8],u)}return new ps(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=XE(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-oi}createEmbeddedView(l,u,h){let p,m;"number"==typeof h?p=h:null!=h&&(p=h.index,m=h.injector);const b=l.createEmbeddedView(u||{},m);return this.insert(b,p),b}createComponent(l,u,h,p,m){const b=l&&!function ou(a){return"function"==typeof a}(l);let T;if(b)T=u;else{const B=u||{};T=B.index,h=B.injector,p=B.projectableNodes,m=B.environmentInjector||B.ngModuleRef}const D=b?l:new $d(pn(l)),N=h||this.parentInjector;if(!m&&null==D.ngModule){const J=(b?N:this.parentInjector).get(Vd,null);J&&(m=J)}const O=D.create(N,p,void 0,m);return this.insert(O.hostView,T),O}insert(l,u){const h=l._lView,p=h[st];if(function Uc(a){return Yi(a[On])}(h)){const O=this.indexOf(l);if(-1!==O)this.detach(O);else{const B=h[On],J=new QE(B,B[ar],B[On]);J.detach(J.indexOf(l))}}const m=this._adjustIndex(u),b=this._lContainer;!function u0(a,l,u,h){const p=oi+h,m=u.length;h>0&&(u[p-1][vi]=l),h<m-oi?(l[vi]=u[p],au(u,oi+h,l)):(u.push(l),l[vi]=null),l[On]=u;const b=l[Ba];null!==b&&u!==b&&function d0(a,l){const u=a[si];l[ii]!==l[On][On][ii]&&(a[Ih]=!0),null===u?a[si]=[l]:u.push(l)}(b,l);const T=l[Wi];null!==T&&T.insertView(a),l[jt]|=64}(p,h,b,m);const T=xo(m,b),D=h[Zt],N=to(D,b[Va]);return null!==N&&function l0(a,l,u,h,p,m){h[zi]=p,h[ar]=l,_u(a,h,u,1,p,m)}(p,b[ar],D,h,N,T),l.attachToViewContainerRef(),au(Yb(b),m,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=XE(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),h=rg(this._lContainer,u);h&&(ql(Yb(this._lContainer),u),lf(h[st],h))}detach(l){const u=this._adjustIndex(l,-1),h=rg(this._lContainer,u);return h&&null!=ql(Yb(this._lContainer),u)?new Rf(h):null}_adjustIndex(l,u=0){return l??this.length+u}};function XE(a){return a[Ko]}function Yb(a){return a[Ko]||(a[Ko]=[])}function Jb(a,l){let u;const h=l[a.index];if(Yi(h))u=h;else{let p;if(8&a.type)p=Xn(h);else{const m=l[Zt];p=m.createComment("");const b=cr(a,l);ll(m,to(m,b),p,function uf(a,l){return a.nextSibling(l)}(m,b),!1)}l[a.index]=u=hT(h,l,p,a),q_(l,u)}return new QE(u,a,l)}class zf{constructor(l){this.queryList=l,this.matches=null}clone(){return new zf(this.queryList)}setDirty(){this.queryList.setDirty()}}class ml{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const h=null!==l.contentQueries?l.contentQueries[0]:u.length,p=[];for(let m=0;m<h;m++){const b=u.getByIndex(m);p.push(this.queries[b.indexInDeclarationView].clone())}return new ml(p)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==rD(l,u).matches&&this.queries[u].setDirty()}}class ek{constructor(l,u,h=null){this.predicate=l,this.flags=u,this.read=h}}class Qb{constructor(l=[]){this.queries=l}elementStart(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,m=this.getByIndex(h).embeddedTView(l,p);m&&(m.indexInDeclarationView=h,null!==u?u.push(m):u=[m])}return null!==u?new Qb(u):null}template(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Xb{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new Xb(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const m=h[p];this.matchTNodeWithReadOption(l,u,eD(u,m)),this.matchTNodeWithReadOption(l,u,aa(u,l,m,!1,!1))}else h===My?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,aa(u,l,h,!1,!1))}matchTNodeWithReadOption(l,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===Df||p===Lo||p===My&&4&u.type)this.addMatch(u.index,-2);else{const m=aa(u,l,p,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,h)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function eD(a,l){const u=a.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===l)return u[h+1];return null}function nD(a,l,u,h){return-1===u?function tD(a,l){return 11&a.type?oc(a,l):4&a.type?qf(a,l):null}(l,a):-2===u?function tk(a,l,u){return u===Df?oc(l,a):u===My?qf(l,a):u===Lo?Jb(l,a):void 0}(a,l,h):Ns(a,a[st],u,l)}function Wf(a,l,u,h){const p=l[Wi].queries[h];if(null===p.matches){const m=a.data,b=u.matches,T=[];for(let D=0;D<b.length;D+=2){const N=b[D];T.push(N<0?null:nD(l,m[N],b[D+1],u.metadata.read))}p.matches=T}return p.matches}function Dr(a,l,u,h){const p=a.queries.getByIndex(u),m=p.matches;if(null!==m){const b=Wf(a,l,p,u);for(let T=0;T<m.length;T+=2){const D=m[T];if(D>0)h.push(b[T/2]);else{const N=m[T+1],O=l[-D];for(let B=oi;B<O.length;B++){const J=O[B];J[Ba]===J[On]&&Dr(J[st],J,N,h)}if(null!==O[si]){const B=O[si];for(let J=0;J<B.length;J++){const re=B[J];Dr(re[st],re,N,h)}}}}}return h}function Fy(a){const l=we(),u=an(),h=Ph();md(h+1);const p=rD(u,h);if(a.dirty&&function Al(a){return 4==(4&a[jt])}(l)===(2==(2&p.metadata.flags))){if(null===p.matches)a.reset([]);else{const m=p.crossesNgTemplate?Dr(u,l,h,[]):Wf(u,l,p,h);a.reset(m,mg),a.notifyOnChanges()}return!0}return!1}function Ly(a,l,u){const h=an();h.firstCreatePass&&(rw(h,new ek(a,l,u),-1),2==(2&l)&&(h.staticViewQueries=!0)),nw(h,we(),l)}function Kg(a,l,u,h){const p=an();if(p.firstCreatePass){const m=zr();rw(p,new ek(l,u,h),m.index),function nk(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(p,a),2==(2&u)&&(p.staticContentQueries=!0)}nw(p,we(),u)}function ew(){return function tw(a,l){return a[Wi].queries[l].queryList}(we(),Ph())}function nw(a,l,u){const h=new YE(4==(4&u));mN(a,l,h,h.destroy),null===l[Wi]&&(l[Wi]=new ml),l[Wi].queries.push(new zf(h))}function rw(a,l,u){null===a.queries&&(a.queries=new Qb),a.queries.track(new Xb(l,u))}function rD(a,l){return a.queries.getByIndex(l)}function iD(a,l){return qf(a,l)}function oD(a){return!!ni(a)}function Hy(...a){}const Vi=new sn("Application Initializer");let $y=(()=>{class a{constructor(u){this.appInits=u,this.resolve=Hy,this.reject=Hy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const m=this.appInits[p]();if(tb(m))u.push(m);else if(Du(m)){const b=new Promise((T,D)=>{m.subscribe({complete:T,error:D})});u.push(b)}}Promise.all(u).then(()=>{h()}).catch(p=>{this.reject(p)}),0===u.length&&h(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)($(Vi,8))},a.\u0275prov=Xe({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const lw=new sn("AppId",{providedIn:"root",factory:function _D(){return`${cw()}${cw()}${cw()}`}});function cw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yD=new sn("Platform Initializer"),vD=new sn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),bk=new sn("AnimationModuleType");let wk=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Xe({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const Gy=new sn("LocaleId",{providedIn:"root",factory:()=>z(Gy,vt.Optional|vt.SkipSelf)||function Ck(){return typeof $localize<"u"&&$localize.locale||Qd}()}),Zy=new sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ek{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let bD=(()=>{class a{compileModuleSync(u){return new jb(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),m=dl(ni(u).declarations).reduce((b,T)=>{const D=pn(T);return D&&b.push(new $d(D)),b},[]);return new Ek(h,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Xe({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const Ru=(()=>Promise.resolve(0))();function ah(a){typeof Zone>"u"?Ru.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class gi{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pc(!1),this.onMicrotaskEmpty=new pc(!1),this.onStable=new pc(!1),this.onError=new pc(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function CD(){let a=wn.requestAnimationFrame,l=wn.cancelAnimationFrame;if(typeof Zone<"u"&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function Ot(a){const l=()=>{!function TD(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(wn,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,ED(a),a.isCheckStableRunning=!0,pw(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),ED(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,m,b,T)=>{try{return Sk(a),u.invokeTask(p,m,b,T)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||a.shouldCoalesceRunChangeDetection)&&l(),Ik(a)}},onInvoke:(u,h,p,m,b,T,D)=>{try{return Sk(a),u.invoke(p,m,b,T,D)}finally{a.shouldCoalesceRunChangeDetection&&l(),Ik(a)}},onHasTask:(u,h,p,m)=>{u.hasTask(p,m),h===p&&("microTask"==m.change?(a._hasPendingMicrotasks=m.microTask,ED(a),pw(a)):"macroTask"==m.change&&(a.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,h,p,m)=>(u.handleError(p,m),a.runOutsideAngular(()=>a.onError.emit(m)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gi.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(gi.isInAngularZone())throw new be(909,!1)}run(l,u,h){return this._inner.run(l,u,h)}runTask(l,u,h,p){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+p,l,fw,Hy,Hy);try{return m.runTask(b,u,h)}finally{m.cancelTask(b)}}runGuarded(l,u,h){return this._inner.runGuarded(l,u,h)}runOutsideAngular(l){return this._outer.run(l)}}const fw={};function pw(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function ED(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function Sk(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function Ik(a){a._nesting--,pw(a)}class O2{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pc,this.onMicrotaskEmpty=new pc,this.onStable=new pc,this.onError=new pc}run(l,u,h){return l.apply(u,h)}runGuarded(l,u,h){return l.apply(u,h)}runOutsideAngular(l){return l()}runTask(l,u,h,p){return l.apply(u,h)}}const Ak=new sn(""),Nk=new sn("");let gw,M2=(()=>{class a{constructor(u,h,p){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,gw||(function kk(a){gw=a}(p),p.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gi.assertNotInAngularZone(),ah(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ah(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,p){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:p})}whenStable(u,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,p){return[]}}return a.\u0275fac=function(u){return new(u||a)($(gi),$(xk),$(Nk))},a.\u0275prov=Xe({token:a,factory:a.\u0275fac}),a})(),xk=(()=>{class a{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return gw?.findTestabilityInTree(this,u,h)??null}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Xe({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const gc=!1;let _l=null;const DD=new sn("AllowMultipleToken"),SD=new sn("PlatformDestroyListeners"),Rk=new sn("appBootstrapListener");class Pk{constructor(l,u){this.name=l,this.token=u}}function AD(a,l,u=[]){const h=`Platform: ${l}`,p=new sn(h);return(m=[])=>{let b=kD();if(!b||b.injector.get(DD,!1)){const T=[...u,...m,{provide:p,useValue:!0}];a?a(T):function Fk(a){if(_l&&!_l.get(DD,!1))throw new be(400,!1);_l=a;const l=a.get(Bk);(function ID(a){const l=a.get(yD,null);l&&l.forEach(u=>u())})(a)}(function Uk(a=[],l){return If.create({name:l,providers:[{provide:wu,useValue:"platform"},{provide:SD,useValue:new Set([()=>_l=null])},...a]})}(T,h))}return function ND(a){const l=kD();if(!l)throw new be(401,!1);return l}()}}function kD(){return _l?.get(Bk)??null}let Bk=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const p=function jk(a,l){let u;return u="noop"===a?new O2:("zone.js"===a?void 0:a)||new gi(l),u}(h?.ngZone,function Vk(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!a||!a.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!a||!a.ngZoneRunCoalescing)||!1}}(h)),m=[{provide:gi,useValue:p}];return p.run(()=>{const b=If.create({providers:m,parent:this.injector,name:u.moduleType.name}),T=u.create(b),D=T.injector.get(_g,null);if(!D)throw new be(402,!1);return p.runOutsideAngular(()=>{const N=p.onError.subscribe({next:O=>{D.handleError(O)}});T.onDestroy(()=>{tm(this._modules,T),N.unsubscribe()})}),function RD(a,l,u){try{const h=u();return tb(h)?h.catch(p=>{throw l.runOutsideAngular(()=>a.handleError(p)),p}):h}catch(h){throw l.runOutsideAngular(()=>a.handleError(h)),h}}(D,p,()=>{const N=T.injector.get($y);return N.runInitializers(),N.donePromise.then(()=>(Xi(T.injector.get(Gy,Qd)||Qd),this._moduleDoBootstrap(T),T))})})}bootstrapModule(u,h=[]){const p=mw({},h);return function Ok(a,l,u){const h=new jb(u);return Promise.resolve(h)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,p))}_moduleDoBootstrap(u){const h=u.injector.get(on);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new be(-403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(SD,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)($(If))},a.\u0275prov=Xe({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function mw(a,l){return Array.isArray(l)?l.reduce(mw,a):{...a,...l}}let on=(()=>{class a{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,h,p){this._zone=u,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new L.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),b=new L.y(T=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{gi.assertNotInAngularZone(),ah(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{gi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{D.unsubscribe(),N.unsubscribe()}});this.isStable=(0,le.T)(m,b.pipe((0,oe.B)()))}bootstrap(u,h){const p=u instanceof O1;if(!this._injector.get($y).done){!p&&Hs(u);throw new be(405,gc)}let b;b=p?u:this._injector.get(Ef).resolveComponentFactory(u),this.componentTypes.push(b.componentType);const T=function Mk(a){return a.isBoundToModule}(b)?void 0:this._injector.get(Gf),N=b.create(If.NULL,[],h||b.selector,T),O=N.location.nativeElement,B=N.injector.get(Ak,null);return B?.registerApplication(O),N.onDestroy(()=>{this.detachView(N.hostView),tm(this.components,N),B?.unregisterApplication(O)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;tm(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const h=this._injector.get(Rk,[]);h.push(...this._bootstrapListeners),h.forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>tm(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new be(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return a.\u0275fac=function(u){return new(u||a)($(gi),$(Vd),$(_g))},a.\u0275prov=Xe({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function tm(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}function Hk(){return!1}let $k=(()=>{class a{}return a.__NG_ELEMENT_ID__=Gk,a})();function Gk(a){return function Zk(a,l,u){if(fs(a)&&!u){const h=_r(a.index,l);return new Rf(h,h)}return 47&a.type?new Rf(l[ii],l):null}(zr(),we(),16==(16&a))}class Kk{constructor(){}supports(l){return Zd(l)}create(l){return new mc(l)}}const Z2=(a,l)=>l;class mc{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||Z2}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,h=this._removalsHead,p=0,m=null;for(;u||h;){const b=!h||u&&u.currentIndex<UD(h,p,m)?u:h,T=UD(b,p,m),D=b.currentIndex;if(b===h)p--,h=h._nextRemoved;else if(u=u._next,null==b.previousIndex)p++;else{m||(m=[]);const N=T-p,O=D-p;if(N!=O){for(let J=0;J<N;J++){const re=J<m.length?m[J]:m[J]=0,De=re+J;O<=De&&De<N&&(m[J]=re+1)}m[b.previousIndex]=O-N}}T!==D&&l(b,T,D)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Zd(l))throw new be(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let p,m,b,u=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let T=0;T<this.length;T++)m=l[T],b=this._trackByFn(T,m),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,m,b,T)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,b,T),h=!0),u=u._next}else p=0,function Ag(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[Symbol.iterator]();let h;for(;!(h=u.next()).done;)l(h.value)}}(l,T=>{b=this._trackByFn(p,T),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,T,b,p)),Object.is(u.item,T)||this._addIdentityChange(u,T)):(u=this._mismatch(u,T,b,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,h,p){let m;return null===l?m=this._itTail:(m=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,m,p)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,m,p)):l=this._addAfter(new Yk(u,h),m,p),l}_verifyReinsertion(l,u,h,p){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?l=this._reinsertAfter(m,l._prev,p):l.currentIndex!=p&&(l.currentIndex=p,this._addToMoves(l,p)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const p=l._prevRemoved,m=l._nextRemoved;return null===p?this._removalsHead=m:p._nextRemoved=m,null===m?this._removalsTail=p:m._prevRemoved=p,this._insertAfter(l,u,h),this._addToMoves(l,h),l}_moveAfter(l,u,h){return this._unlink(l),this._insertAfter(l,u,h),this._addToMoves(l,h),l}_addAfter(l,u,h){return this._insertAfter(l,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,h){const p=null===u?this._itHead:u._next;return l._next=p,l._prev=u,null===p?this._itTail=l:p._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new LD),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,h=l._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new LD),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class Yk{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Jk{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const u=l._prevDup,h=l._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class LD{constructor(){this.map=new Map}put(l){const u=l.trackById;let h=this.map.get(u);h||(h=new Jk,this.map.set(u,h)),h.add(l)}get(l,u){const p=this.map.get(l);return p?p.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function UD(a,l,u){const h=a.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+l+p}class BD{constructor(){}supports(l){return l instanceof Map||X_(l)}create(){return new Qk}}class Qk{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||X_(l)))throw new be(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const h=l._prev;return u._next=l,u._prev=h,l._prev=u,h&&(h._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const p=this._records.get(l);this._maybeAddToChanges(p,u);const m=p._prev,b=p._next;return m&&(m._next=b),b&&(b._prev=m),p._next=null,p._prev=null,p}const h=new q2(l);return this._records.set(l,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(h=>u(l[h],h))}}class q2{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bw(){return new Jf([new Kk])}let Jf=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(null!=h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||bw()),deps:[[a,new S,new uu]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(null!=h)return h;throw new be(901,!1)}}return a.\u0275prov=Xe({token:a,providedIn:"root",factory:bw}),a})();function VD(){return new mi([new BD])}let mi=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(h){const p=h.factories.slice();u=u.concat(p)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||VD()),deps:[[a,new S,new uu]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(h)return h;throw new be(901,!1)}}return a.\u0275prov=Xe({token:a,providedIn:"root",factory:VD}),a})();const nm=AD(null,"core",[]);let HD=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)($(on))},a.\u0275mod=La({type:a}),a.\u0275inj=St({}),a})();function lh(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}function ww(a,l){const u=pn(a),h=l.elementInjector||P_();return new $d(u).create(h,l.projectableNodes,l.hostElement,l.environmentInjector)}},3942:(_t,Ae,U)=>{U.d(Ae,{Z:()=>Qe});var s=U(2090),te=U(4859),L=U(9681),le=U(1877);class oe{constructor(be,Oe){this._delegate=be,this.firebase=Oe,(0,L._addComponent)(be,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this._delegate.automaticDataCollectionEnabled=be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(be=>{this._delegate.checkDestroyed(),be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(be,Oe=L._DEFAULT_ENTRY_NAME){var xe;this._delegate.checkDestroyed();const Ge=this._delegate.container.getProvider(be);return!Ge.isInitialized()&&"EXPLICIT"===(null===(xe=Ge.getComponent())||void 0===xe?void 0:xe.instantiationMode)&&Ge.initialize(),Ge.getImmediate({identifier:Oe})}_removeServiceInstance(be,Oe=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(be).clearInstance(Oe)}_addComponent(be){(0,L._addComponent)(this._delegate,be)}_addOrOverwriteComponent(be){(0,L._addOrOverwriteComponent)(this._delegate,be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new s.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function _e(){const ut=function ye(ut){const be={},Oe={__esModule:!0,initializeApp:function ke(je,G={}){const Ee=L.initializeApp(je,G);if((0,s.r3)(be,Ee.name))return be[Ee.name];const Ke=new ut(Ee,Oe);return be[Ee.name]=Ke,Ke},app:Ge,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Me(je){const G=je.name,Ee=G.replace("-compat","");if(L._registerComponent(je)&&"PUBLIC"===je.type){const Ke=(tt=Ge())=>{if("function"!=typeof tt[Ee])throw Ce.create("invalid-app-argument",{appName:G});return tt[Ee]()};void 0!==je.serviceProps&&(0,s.ZB)(Ke,je.serviceProps),Oe[Ee]=Ke,ut.prototype[Ee]=function(...tt){return this._getService.bind(this,G).apply(this,je.multipleInstances?tt:[])}}return"PUBLIC"===je.type?Oe[Ee]:null},removeApp:function xe(je){delete be[je]},useAsService:function ze(je,G){return"serverAuth"===G?null:G},modularAPIs:L}};function Ge(je){if(!(0,s.r3)(be,je=je||L._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:je});return be[je]}return Oe.default=Oe,Object.defineProperty(Oe,"apps",{get:function Se(){return Object.keys(be).map(je=>be[je])}}),Ge.App=ut,Oe}(oe);return ut.INTERNAL=Object.assign(Object.assign({},ut.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function be(Oe){(0,s.ZB)(ut,Oe)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),ut}(),Z=new le.Yd("@firebase/app-compat");if((0,s.jU)()&&void 0!==self.firebase){Z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ut=self.firebase.SDK_VERSION;ut&&ut.indexOf("LITE")>=0&&Z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Qe=q;!function Re(ut){(0,L.registerVersion)("@firebase/app-compat","0.1.32",ut)}()},9681:(_t,Ae,U)=>{U.r(Ae),U.d(Ae,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>gr,_DEFAULT_ENTRY_NAME:()=>ae,_addComponent:()=>Ze,_addOrOverwriteComponent:()=>$e,_apps:()=>fe,_clearComponents:()=>St,_components:()=>se,_getProvider:()=>Xe,_registerComponent:()=>Tt,_removeServiceInstance:()=>Yt,deleteApp:()=>Ni,getApp:()=>Ln,getApps:()=>qn,initializeApp:()=>Rr,onLog:()=>us,registerVersion:()=>vt,setLogLevel:()=>Vs});var s=U(5861),te=U(4859),L=U(1877),le=U(2090),oe=U(8766);class ie{constructor(z){this.container=z}getPlatformInfoString(){return this.container.getProviders().map(K=>{if(function Ce(H){return"VERSION"===H.getComponent()?.type}(K)){const Ne=K.getImmediate();return`${Ne.library}/${Ne.version}`}return null}).filter(K=>K).join(" ")}}const ye="@firebase/app",q=new L.Yd("@firebase/app"),ae="[DEFAULT]",pe={[ye]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fe=new Map,se=new Map;function Ze(H,z){try{H.container.addComponent(z)}catch(K){q.debug(`Component ${z.name} failed to register with FirebaseApp ${H.name}`,K)}}function $e(H,z){H.container.addOrOverwriteComponent(z)}function Tt(H){const z=H.name;if(se.has(z))return q.debug(`There were multiple attempts to register component ${z}.`),!1;se.set(z,H);for(const K of fe.values())Ze(K,H);return!0}function Xe(H,z){const K=H.container.getProvider("heartbeat").getImmediate({optional:!0});return K&&K.triggerHeartbeat(),H.container.getProvider(z)}function Yt(H,z,K=ae){Xe(H,z).clearInstance(K)}function St(){se.clear()}const un=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class rn{constructor(z,K,Ne){this._isDeleted=!1,this._options=Object.assign({},z),this._config=Object.assign({},K),this._name=K.name,this._automaticDataCollectionEnabled=K.automaticDataCollectionEnabled,this._container=Ne,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(z){this.checkDestroyed(),this._automaticDataCollectionEnabled=z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(z){this._isDeleted=z}checkDestroyed(){if(this.isDeleted)throw un.create("app-deleted",{appName:this._name})}}const gr="9.9.3";function Rr(H,z={}){"object"!=typeof z&&(z={name:z});const K=Object.assign({name:ae,automaticDataCollectionEnabled:!1},z),Ne=K.name;if("string"!=typeof Ne||!Ne)throw un.create("bad-app-name",{appName:String(Ne)});const Je=fe.get(Ne);if(Je){if((0,le.vZ)(H,Je.options)&&(0,le.vZ)(K,Je.config))return Je;throw un.create("duplicate-app",{appName:Ne})}const bt=new te.H0(Ne);for(const _n of se.values())bt.addComponent(_n);const In=new rn(H,K,bt);return fe.set(Ne,In),In}function Ln(H=ae){const z=fe.get(H);if(!z)throw un.create("no-app",{appName:H});return z}function qn(){return Array.from(fe.values())}function Ni(H){return Un.apply(this,arguments)}function Un(){return(Un=(0,s.Z)(function*(H){const z=H.name;fe.has(z)&&(fe.delete(z),yield Promise.all(H.container.getProviders().map(K=>K.delete())),H.isDeleted=!0)})).apply(this,arguments)}function vt(H,z,K){var Ne;let Je=null!==(Ne=pe[H])&&void 0!==Ne?Ne:H;K&&(Je+=`-${K}`);const bt=Je.match(/\s|\//),In=z.match(/\s|\//);if(bt||In){const _n=[`Unable to register library "${Je}" with version "${z}":`];return bt&&_n.push(`library name "${Je}" contains illegal characters (whitespace or "/")`),bt&&In&&_n.push("and"),In&&_n.push(`version name "${z}" contains illegal characters (whitespace or "/")`),void q.warn(_n.join(" "))}Tt(new te.wA(`${Je}-version`,()=>({library:Je,version:z}),"VERSION"))}function us(H,z){if(null!==H&&"function"!=typeof H)throw un.create("invalid-log-argument");(0,L.Am)(H,z)}function Vs(H){(0,L.Ub)(H)}const jn="firebase-heartbeat-database",ti=1,qi="firebase-heartbeat-store";let wn=null;function Sn(){return wn||(wn=(0,oe.X3)(jn,ti,{upgrade:(H,z)=>{0===z&&H.createObjectStore(qi)}}).catch(H=>{throw un.create("idb-open",{originalErrorMessage:H.message})})),wn}function kt(){return(kt=(0,s.Z)(function*(H){var z;try{return(yield Sn()).transaction(qi).objectStore(qi).get(zn(H))}catch(K){if(K instanceof le.ZR)q.warn(K.message);else{const Ne=un.create("idb-get",{originalErrorMessage:null===(z=K)||void 0===z?void 0:z.message});q.warn(Ne.message)}}})).apply(this,arguments)}function ds(H,z){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,s.Z)(function*(H,z){var K;try{const Je=(yield Sn()).transaction(qi,"readwrite");return yield Je.objectStore(qi).put(z,zn(H)),Je.done}catch(Ne){if(Ne instanceof le.ZR)q.warn(Ne.message);else{const Je=un.create("idb-set",{originalErrorMessage:null===(K=Ne)||void 0===K?void 0:K.message});q.warn(Je.message)}}})).apply(this,arguments)}function zn(H){return`${H.name}!${H.options.appId}`}class Ma{constructor(z){this.container=z,this._heartbeatsCache=null;const K=this.container.getProvider("app").getImmediate();this._storage=new en(K),this._heartbeatsCachePromise=this._storage.read().then(Ne=>(this._heartbeatsCache=Ne,Ne))}triggerHeartbeat(){var z=this;return(0,s.Z)(function*(){const Ne=z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Je=mn();if(null===z._heartbeatsCache&&(z._heartbeatsCache=yield z._heartbeatsCachePromise),z._heartbeatsCache.lastSentHeartbeatDate!==Je&&!z._heartbeatsCache.heartbeats.some(bt=>bt.date===Je))return z._heartbeatsCache.heartbeats.push({date:Je,agent:Ne}),z._heartbeatsCache.heartbeats=z._heartbeatsCache.heartbeats.filter(bt=>{const In=new Date(bt.date).valueOf();return Date.now()-In<=2592e6}),z._storage.overwrite(z._heartbeatsCache)})()}getHeartbeatsHeader(){var z=this;return(0,s.Z)(function*(){if(null===z._heartbeatsCache&&(yield z._heartbeatsCachePromise),null===z._heartbeatsCache||0===z._heartbeatsCache.heartbeats.length)return"";const K=mn(),{heartbeatsToSend:Ne,unsentEntries:Je}=function xi(H,z=1024){const K=[];let Ne=H.slice();for(const Je of H){const bt=K.find(In=>In.agent===Je.agent);if(bt){if(bt.dates.push(Je.date),Q(K)>z){bt.dates.pop();break}}else if(K.push({agent:Je.agent,dates:[Je.date]}),Q(K)>z){K.pop();break}Ne=Ne.slice(1)}return{heartbeatsToSend:K,unsentEntries:Ne}}(z._heartbeatsCache.heartbeats),bt=(0,le.L)(JSON.stringify({version:2,heartbeats:Ne}));return z._heartbeatsCache.lastSentHeartbeatDate=K,Je.length>0?(z._heartbeatsCache.heartbeats=Je,yield z._storage.overwrite(z._heartbeatsCache)):(z._heartbeatsCache.heartbeats=[],z._storage.overwrite(z._heartbeatsCache)),bt})()}}function mn(){return(new Date).toISOString().substring(0,10)}class en{constructor(z){this.app=z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,s.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var z=this;return(0,s.Z)(function*(){return(yield z._canUseIndexedDBPromise)&&(yield function Et(H){return kt.apply(this,arguments)}(z.app))||{heartbeats:[]}})()}overwrite(z){var K=this;return(0,s.Z)(function*(){var Ne;if(yield K._canUseIndexedDBPromise){const bt=yield K.read();return ds(K.app,{lastSentHeartbeatDate:null!==(Ne=z.lastSentHeartbeatDate)&&void 0!==Ne?Ne:bt.lastSentHeartbeatDate,heartbeats:z.heartbeats})}})()}add(z){var K=this;return(0,s.Z)(function*(){var Ne;if(yield K._canUseIndexedDBPromise){const bt=yield K.read();return ds(K.app,{lastSentHeartbeatDate:null!==(Ne=z.lastSentHeartbeatDate)&&void 0!==Ne?Ne:bt.lastSentHeartbeatDate,heartbeats:[...bt.heartbeats,...z.heartbeats]})}})()}}function Q(H){return(0,le.L)(JSON.stringify({version:2,heartbeats:H})).length}!function $(H){Tt(new te.wA("platform-logger",z=>new ie(z),"PRIVATE")),Tt(new te.wA("heartbeat",z=>new Ma(z),"PRIVATE")),vt(ye,"0.7.31",H),vt(ye,"0.7.31","esm2017"),vt("fire-js","")}("")},4859:(_t,Ae,U)=>{U.d(Ae,{H0:()=>ye,wA:()=>L,zt:()=>oe});var s=U(5861),te=U(2090);class L{constructor(q,Z,ee){this.name=q,this.instanceFactory=Z,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const le="[DEFAULT]";class oe{constructor(q,Z){this.name=q,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const Z=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(Z)){const ee=new te.BH;if(this.instancesDeferred.set(Z,ee),this.isInitialized(Z)||this.shouldAutoInitialize())try{const Ye=this.getOrInitializeService({instanceIdentifier:Z});Ye&&ee.resolve(Ye)}catch{}}return this.instancesDeferred.get(Z).promise}getImmediate(q){var Z;const ee=this.normalizeInstanceIdentifier(q?.identifier),Ye=null!==(Z=q?.optional)&&void 0!==Z&&Z;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(Ye)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Re){if(Ye)return null;throw Re}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function Ce(_e){return"EAGER"===_e.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[Z,ee]of this.instancesDeferred.entries()){const Ye=this.normalizeInstanceIdentifier(Z);try{const Re=this.getOrInitializeService({instanceIdentifier:Ye});ee.resolve(Re)}catch{}}}}clearInstance(q=le){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,s.Z)(function*(){const Z=Array.from(q.instances.values());yield Promise.all([...Z.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...Z.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=le){return this.instances.has(q)}getOptions(q=le){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:Z={}}=q,ee=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ye=this.getOrInitializeService({instanceIdentifier:ee,options:Z});for(const[Re,Qe]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Re)&&Qe.resolve(Ye);return Ye}onInit(q,Z){var ee;const Ye=this.normalizeInstanceIdentifier(Z),Re=null!==(ee=this.onInitCallbacks.get(Ye))&&void 0!==ee?ee:new Set;Re.add(q),this.onInitCallbacks.set(Ye,Re);const Qe=this.instances.get(Ye);return Qe&&q(Qe,Ye),()=>{Re.delete(q)}}invokeOnInitCallbacks(q,Z){const ee=this.onInitCallbacks.get(Z);if(ee)for(const Ye of ee)try{Ye(q,Z)}catch{}}getOrInitializeService({instanceIdentifier:q,options:Z={}}){let ee=this.instances.get(q);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=q,_e===le?void 0:_e),options:Z}),this.instances.set(q,ee),this.instancesOptions.set(q,Z),this.invokeOnInitCallbacks(ee,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,ee)}catch{}var _e;return ee||null}normalizeInstanceIdentifier(q=le){return this.component?this.component.multipleInstances?q:le:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ye{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const Z=this.getProvider(q.name);if(Z.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);Z.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const Z=new oe(q,this);return this.providers.set(q,Z),Z}getProviders(){return Array.from(this.providers.values())}}},1877:(_t,Ae,U)=>{U.d(Ae,{Am:()=>_e,Ub:()=>ye,Yd:()=>Ce,in:()=>te});const s=[];var te=(()=>{return(q=te||(te={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",te;var q})();const L={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},le=te.INFO,oe={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},ie=(q,Z,...ee)=>{if(Z<q.logLevel)return;const Ye=(new Date).toISOString(),Re=oe[Z];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[Re](`[${Ye}]  ${q.name}:`,...ee)};class Ce{constructor(Z){this.name=Z,this._logLevel=le,this._logHandler=ie,this._userLogHandler=null,s.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in te))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?L[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...Z),this._logHandler(this,te.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...Z),this._logHandler(this,te.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,te.INFO,...Z),this._logHandler(this,te.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,te.WARN,...Z),this._logHandler(this,te.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...Z),this._logHandler(this,te.ERROR,...Z)}}function ye(q){s.forEach(Z=>{Z.setLogLevel(q)})}function _e(q,Z){for(const ee of s){let Ye=null;Z&&Z.level&&(Ye=L[Z.level]),ee.userLogHandler=null===q?null:(Re,Qe,...ut)=>{const be=ut.map(Oe=>{if(null==Oe)return null;if("string"==typeof Oe)return Oe;if("number"==typeof Oe||"boolean"==typeof Oe)return Oe.toString();if(Oe instanceof Error)return Oe.message;try{return JSON.stringify(Oe)}catch{return null}}).filter(Oe=>Oe).join(" ");Qe>=(Ye??Re.logLevel)&&q({level:te[Qe].toLowerCase(),message:be,args:ut,type:Re.name})}}}},8766:(_t,Ae,U)=>{U.d(Ae,{Lj:()=>ke,X3:()=>Ge});var s=U(5861);const te=(G,Ee)=>Ee.some(Ke=>G instanceof Ke);let L,le;const Ce=new WeakMap,ye=new WeakMap,_e=new WeakMap,q=new WeakMap,Z=new WeakMap;let Re={get(G,Ee,Ke){if(G instanceof IDBTransaction){if("done"===Ee)return ye.get(G);if("objectStoreNames"===Ee)return G.objectStoreNames||_e.get(G);if("store"===Ee)return Ke.objectStoreNames[1]?void 0:Ke.objectStore(Ke.objectStoreNames[0])}return Oe(G[Ee])},set:(G,Ee,Ke)=>(G[Ee]=Ke,!0),has:(G,Ee)=>G instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in G};function be(G){return"function"==typeof G?function ut(G){return G!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(G)?function(...Ee){return G.apply(xe(this),Ee),Oe(Ce.get(this))}:function(...Ee){return Oe(G.apply(xe(this),Ee))}:function(Ee,...Ke){const tt=G.call(xe(this),Ee,...Ke);return _e.set(tt,Ee.sort?Ee.sort():[Ee]),Oe(tt)}}(G):(G instanceof IDBTransaction&&function Ye(G){if(ye.has(G))return;const Ee=new Promise((Ke,tt)=>{const yt=()=>{G.removeEventListener("complete",nt),G.removeEventListener("error",Rn),G.removeEventListener("abort",Rn)},nt=()=>{Ke(),yt()},Rn=()=>{tt(G.error||new DOMException("AbortError","AbortError")),yt()};G.addEventListener("complete",nt),G.addEventListener("error",Rn),G.addEventListener("abort",Rn)});ye.set(G,Ee)}(G),te(G,function oe(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(G,Re):G)}function Oe(G){if(G instanceof IDBRequest)return function ee(G){const Ee=new Promise((Ke,tt)=>{const yt=()=>{G.removeEventListener("success",nt),G.removeEventListener("error",Rn)},nt=()=>{Ke(Oe(G.result)),yt()},Rn=()=>{tt(G.error),yt()};G.addEventListener("success",nt),G.addEventListener("error",Rn)});return Ee.then(Ke=>{Ke instanceof IDBCursor&&Ce.set(Ke,G)}).catch(()=>{}),Z.set(Ee,G),Ee}(G);if(q.has(G))return q.get(G);const Ee=be(G);return Ee!==G&&(q.set(G,Ee),Z.set(Ee,G)),Ee}const xe=G=>Z.get(G);function Ge(G,Ee,{blocked:Ke,upgrade:tt,blocking:yt,terminated:nt}={}){const Rn=indexedDB.open(G,Ee),kr=Oe(Rn);return tt&&Rn.addEventListener("upgradeneeded",sr=>{tt(Oe(Rn.result),sr.oldVersion,sr.newVersion,Oe(Rn.transaction))}),Ke&&Rn.addEventListener("blocked",()=>Ke()),kr.then(sr=>{nt&&sr.addEventListener("close",()=>nt()),yt&&sr.addEventListener("versionchange",()=>yt())}).catch(()=>{}),kr}function ke(G,{blocked:Ee}={}){const Ke=indexedDB.deleteDatabase(G);return Ee&&Ke.addEventListener("blocked",()=>Ee()),Oe(Ke).then(()=>{})}const Se=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],ze=new Map;function je(G,Ee){if(!(G instanceof IDBDatabase)||Ee in G||"string"!=typeof Ee)return;if(ze.get(Ee))return ze.get(Ee);const Ke=Ee.replace(/FromIndex$/,""),tt=Ee!==Ke,yt=Me.includes(Ke);if(!(Ke in(tt?IDBIndex:IDBObjectStore).prototype)||!yt&&!Se.includes(Ke))return;const nt=function(){var Rn=(0,s.Z)(function*(kr,...sr){const cs=this.transaction(kr,yt?"readwrite":"readonly");let ae=cs.store;return tt&&(ae=ae.index(sr.shift())),(yield Promise.all([ae[Ke](...sr),yt&&cs.done]))[0]});return function(sr){return Rn.apply(this,arguments)}}();return ze.set(Ee,nt),nt}!function Qe(G){Re=G(Re)}(G=>({...G,get:(Ee,Ke,tt)=>je(Ee,Ke)||G.get(Ee,Ke,tt),has:(Ee,Ke)=>!!je(Ee,Ke)||G.has(Ee,Ke)}))},5861:(_t,Ae,U)=>{function s(L,le,oe,ie,Ce,ye,_e){try{var q=L[ye](_e),Z=q.value}catch(ee){return void oe(ee)}q.done?le(Z):Promise.resolve(Z).then(ie,Ce)}function te(L){return function(){var le=this,oe=arguments;return new Promise(function(ie,Ce){var ye=L.apply(le,oe);function _e(Z){s(ye,ie,Ce,_e,q,"next",Z)}function q(Z){s(ye,ie,Ce,_e,q,"throw",Z)}_e(void 0)})}}U.d(Ae,{Z:()=>te})},7582:(_t,Ae,U)=>{function le(ae,pe){var fe={};for(var se in ae)Object.prototype.hasOwnProperty.call(ae,se)&&pe.indexOf(se)<0&&(fe[se]=ae[se]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var Ze=0;for(se=Object.getOwnPropertySymbols(ae);Ze<se.length;Ze++)pe.indexOf(se[Ze])<0&&Object.prototype.propertyIsEnumerable.call(ae,se[Ze])&&(fe[se[Ze]]=ae[se[Ze]])}return fe}function ee(ae,pe,fe,se){return new(fe||(fe=Promise))(function($e,Tt){function Xe(Jt){try{St(se.next(Jt))}catch(un){Tt(un)}}function Yt(Jt){try{St(se.throw(Jt))}catch(un){Tt(un)}}function St(Jt){Jt.done?$e(Jt.value):function Ze($e){return $e instanceof fe?$e:new fe(function(Tt){Tt($e)})}(Jt.value).then(Xe,Yt)}St((se=se.apply(ae,pe||[])).next())})}function ke(ae){return this instanceof ke?(this.v=ae,this):new ke(ae)}function Se(ae,pe,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ze,se=fe.apply(ae,pe||[]),$e=[];return Ze={},Tt("next"),Tt("throw"),Tt("return"),Ze[Symbol.asyncIterator]=function(){return this},Ze;function Tt(rn){se[rn]&&(Ze[rn]=function(gr){return new Promise(function(Rr,Ln){$e.push([rn,gr,Rr,Ln])>1||Xe(rn,gr)})})}function Xe(rn,gr){try{!function Yt(rn){rn.value instanceof ke?Promise.resolve(rn.value.v).then(St,Jt):un($e[0][2],rn)}(se[rn](gr))}catch(Rr){un($e[0][3],Rr)}}function St(rn){Xe("next",rn)}function Jt(rn){Xe("throw",rn)}function un(rn,gr){rn(gr),$e.shift(),$e.length&&Xe($e[0][0],$e[0][1])}}function ze(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,pe=ae[Symbol.asyncIterator];return pe?pe.call(ae):(ae=function ut(ae){var pe="function"==typeof Symbol&&Symbol.iterator,fe=pe&&ae[pe],se=0;if(fe)return fe.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&se>=ae.length&&(ae=void 0),{value:ae&&ae[se++],done:!ae}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),fe={},se("next"),se("throw"),se("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function se($e){fe[$e]=ae[$e]&&function(Tt){return new Promise(function(Xe,Yt){!function Ze($e,Tt,Xe,Yt){Promise.resolve(Yt).then(function(St){$e({value:St,done:Xe})},Tt)}(Xe,Yt,(Tt=ae[$e](Tt)).done,Tt.value)})}}}U.d(Ae,{FC:()=>Se,KL:()=>ze,_T:()=>le,mG:()=>ee,qq:()=>ke}),"function"==typeof SuppressedError&&SuppressedError}},_t=>{_t(_t.s=5735)}]);